var Templates = function () {
    var e = {};
    return {
        get: function (t) {
            var i = e[t];
            return i || (i = function (e) {
                switch (e.trim()) {
                    case "profilePopupMarkup":
                        return '          <div class="dropdown-content">            <div class="col20 f-left project-dropdown-info mb-15">               <h5>' + M.PROJECT + '</h5>               <h3>%projectName%</h3>               <div class="flex align-center project-status-wrapper">                <span class="project-status mr-5 %statusClass%">%statusText%</span>                <a rel="tab" href="/me/settings/billing" class="project-status blue rounded-effect %upgradeClass%">' + M.UPGRADE_NOW_LBL + ' â†’</a>              </div>             </div>             <a class="dash-dropdown-nav" rel="tab" href="/me/dashboard"><i class="material-icons-outlined">dashboard</i>' + M.DASHBOARD_TITLE + '</a>            <a class="dash-dropdown-nav" rel="tab" href="/me/settings/access"><i class="material-icons-outlined"> supervised_user_circle </i>' + M.ADMINS + '</a>            <a class="dash-dropdown-nav" rel="tab" href="/me/settings/billing"><i class="material-icons-outlined">credit_card</i>' + M.MANAGE_BILLING + '</a>            <a class="dash-dropdown-nav" rel="tab" href="/me/settings"><i class="material-icons-outlined">settings</i>' + M.ACCOUNT_SETTINGS + '</a>            <a class="dash-dropdown-nav" href="/Logout"><i class="material-icons-outlined">lock</i>' + M.LOGOUT + "</a>          </div>";
                    case "websitePageMarkup":
                        return '<div class="working-area overflow-auto flex-1"><div id="website" class="theme clearfix"></div></div>';
                    case "funnelActionLaneMarkup":
                        return '        <div class="builder-action-lane flex-centered flex-row">          <div class="viewport-buttons ' + themeContrastColor + '-viewport-buttons flex-1">            <ul class="t-left">              <li>                <a class="button-tooltip" data-size="desktop" data-tooltip="desktopView" rel="action" data-action="changeViewport">                  <img src="' + resources + "/images/small-icons/desktop-white.png?v=" + resourcesVersion + '">                </a>              </li>              <li>                <a class="button-tooltip" data-size="tablet" data-tooltip="tabletView" rel="action" data-action="changeViewport">                  <img src="' + resources + "/images/small-icons/tablet-white.png?v=" + resourcesVersion + '">                </a>              </li>              <li>                <a class="button-tooltip" data-size="mobile" data-tooltip="phoneView" rel="action" data-action="changeViewport">                  <img src="' + resources + "/images/small-icons/phone-white.png?v=" + resourcesVersion + '">                </a>              </li>            </ul>          </div>          <div class="action-steps-wrapper flex align-center flex-none">            <a rel="action" data-action="actionBarPrevStep" class="funnel-step-back rounded-effect"></a>            <div class="action-step-funnel" data-role="current-step"></div>            <a rel="action" data-action="actionBarNextStep" class="funnel-step-next rounded-effect"></a>          </div>          <div class="action-domain-wrapper flex align-center flex-1 justify-flex-end">            <div class="action-domain flex align-center">              <a target="_blank" class="action-url"></a>              <a rel="action" data-action="actionBarUrlAction" class="connect-domain rounded-effect button-tooltip" data-tooltip="domainSettings"></a>            </div>          </div>        </div>';
                    case "websiteActionLaneMarkup":
                        return '      <div class="builder-action-lane website-action-lane flex-centered space-between flex-row flex-none">        <div class="flex align-center flex-1">          <a rel="action" data-action="actionBarAddPage" class="quick-add-btn rounded-effect button-tooltip" data-tooltip="addNew"></a>          <div class="viewport-buttons ' + themeContrastColor + '-viewport-buttons flex-1">            <ul class="t-left">              <li>                <a class="button-tooltip" data-size="desktop" data-tooltip="desktopView" rel="action" data-action="changeViewport">                  <img src="' + resources + "/images/small-icons/desktop-white.png?v=" + resourcesVersion + '">                </a>              </li>              <li>                <a class="button-tooltip" data-size="tablet" data-tooltip="tabletView" rel="action" data-action="changeViewport">                  <img src="' + resources + "/images/small-icons/tablet-white.png?v=" + resourcesVersion + '">                </a>              </li>              <li>                <a class="button-tooltip" data-size="mobile" data-tooltip="phoneView" rel="action" data-action="changeViewport">                  <img src="' + resources + "/images/small-icons/phone-white.png?v=" + resourcesVersion + '">                </a>              </li>            </ul>          </div>        </div>        <div class="action-domain-wrapper flex align-center flex-none">          <div class="action-domain flex align-center">            <a target="_blank" class="action-url"></a>            <a rel="action" data-action="actionBarUrlAction" class="connect-domain green rounded-effect button-tooltip" data-tooltip="domainSettings"></a>          </div>        </div>        <div class="flex-1">&nbsp;</div>      </div>';
                    case "feedbackStructure":
                        return '<div>       <a class="close-btn close-popup"></a>       <img src="' + resources + "/images/logo-dark.png?v=" + resourcesVersion + '">      <h1>' + M.LEAVE_FEEDBACK + "</h1>      <span>" + M.LEAVE_FEEDBACK_TEXT + '</span>      <select name="feedback">        <option value="' + M.GENERAL_IMPRESSIONS + '">' + M.GENERAL_IMPRESSIONS + '</option>         <option value="' + M.DESIGN_AND_INTERFACE + '">' + M.DESIGN_AND_INTERFACE + '</option>         <option value="' + M.BUGS + '">' + M.BUGS + '</option>         <option value="' + M.OTHER + '">' + M.OTHER + '</option>       </select>      <textarea placeholder="' + M.FEEDBACK + '" class="focus"></textarea>      <a title="" class="sendFeedback">' + M.SEND + "</a>    </div>";
                    case "videoStructure":
                        return '<a class="close-btn close-popup"></a>%videosource%';
                    case "autohideMessageMarkup":
                        return '<div class="success-message"><div class="success-message-icon"></div>%message%</div>';
                    case "cornerMessage":
                        return '<div class="corner-message corner-message-%type%">%message%</div>';
                    case "popupStructure":
                        return '<div class="cpanel-popup %customClass%" style="width: %width%;">       <div class="cpanel-popup-title">       %closebtn%         <div class="popup-icon %popupIcon%"></div>         <span class="ptSans">%title%</span>       </div>       <div class="cpanel-popup-content" style="width: 100%;"> \t\t    <div class="cpanel-popup-content-inner">%content%</div> \t\t  </div> \t\t  <div class="cpanel-popup-nav"> \t\t\t  <div class="button-wrapper"></div> \t\t  </div>     </div>';
                    case "inlinePopupStructure":
                        return '<div class="%customClass%" style="width: 100%; height: 100%;">       <div class="cpanel-popup-title">         %closebtn%         <div class="popup-icon %popupIcon%"></div>         <span class="ptSans">%title%</span>       </div>       <div class="inline-popup-content" style="width: 100%;"></div> \t\t  <div class="cpanel-popup-nav"> \t\t\t  <div class="button-wrapper"></div> \t\t  </div>     </div>';
                    case "popupOverlay":
                        return '<div class="cpanel-popup-overlay"></div>';
                    case "buttonMarkup":
                        return '<div title="%caption%" class="%class% transition-bg %float%" %id%>%caption%</div>';
                    case "promptFurInputTemplate":
                        return '<div class="popup-centered-wrapper">         <span class="help-text">%message%</span>         <input type="text" name="val" class="focus transition-border" value="%value%" autocomplete="new-password">       </div>';
                    case "errorDialogMarkup":
                        return '<span class="popup-error"><i class="fa fa-exclamation-triangle"></i>%message%</span>';
                    case "promptDialogMarkup":
                        return '<span class="prompt-dialog-message">%message%</span>';
                    case "alertDialogMarkup":
                        return '<div class="loadingBarContent" style="position: relative"></div><span class="prompt-dialog-message">%message%</span>';
                    case "tooltipOptionsMarkup":
                        return '<div class="simple-tooltip"><ul></ul></div>';
                    case "loadingBarContent":
                        return '\n          <div class="loadingBarContainer">\n            <div class="loadingBarOverlay"></div>\n            <div class="loadingBarContent"></div>\n            <div class="loadingBarText none"> Hey, let\'s try this! </div>\n          </div>';
                    case "addPageDialogMarkup":
                        return '<div class="modal-nav layout-buttons-wrapper">                   <ul>                     <li><a class="slow-transition-all">' + M.PAGE_INFO + '</a></li>                     <li><a class="slow-transition-all">' + M.SEO_INFO + '</a></li>                   </ul>                 </div>                 <div class="cpanel-popup-slider">                  <div class="cpanel-popup-slide">                    <div class="popup-newpage-wrapper">                      <div class="popup-input-wrapper" >                        <h5>' + M.PAGE_NAME + '</h5>                        <div class="input-wrapper">                          <input type="text" name="pageName" class="focus transition-border">                        </div>                      </div>                      <div class="popup-input-wrapper" >                        <div class="info">                          <h5>' + M.PAGE_URL + '</h5>                        </div>                        <div class="input-wrapper">                          <div class="page-url-text">website.com/</div>                          <input type="text" name="pageUrl" class="page-url-field transition-border">                          <input type="text" name="stupid-chrome-autofills-the-last-field" style="display: none;">                        </div>                      </div>                      <div class="popup-input-wrapper input-wrapper2">                        <div class="info cpanel-tooltip" data-tooltip="pageTemplateInfo">                          <h5>' + M.PAGE_TEMPLATE + '</h5>                        </div>                        <select class="template-select" name="dpSelect"></select>                      </div>                      <div class="popup-input-wrapper input-wrapper2 f-right" id="addPageGroupWrapper">                        <div class="info">                          <h5>' + M.ADD_TO_GROUP + '</h5>                        </div>                        <select class="page-select" name="grSelect"></select>                      </div>                      <div class="popup-input-wrapper">                        <div class="info cpanel-tooltip" data-tooltip="pageAccessInfo" data-timeout="3000">                          <h5>' + M.PAGE_ACCESS + '</h5>                        </div>                        <select name="pageAccess">                          <option value="public">' + M.PUBLIC + '</option>                          <option value="password">' + M.PASSWORD_PROTECTED + '</option>                          <option value="members">' + M.MEMBERS_ONLY + '</option>                        </select>                        <div class="popup-input-wrapper pagePassword none-soft col20 f-left">                          <div class="info">                            <h5>' + M.PASSWORD_TEXT + '</h5>                          </div>                          <div class="input-wrapper">                            <input type="password" autocomplete="new-password" name="pagePassword" class="transition-border">                          </div>                        </div>                        <div class="pageMembers none-soft col20 f-left" style="margin-bottom: 15px">                          <a class="middle-button gray">' + M.CHOOSE_MEMBER_GROUPS + '</a>                        </div>                      </div>                      <div class="popup-input-wrapper">                        <div class="checkbox-wrapper">                          <input id="useSecondaryHeader" class="css-checkbox modify" type="checkbox" name="useSecondaryHeader" />                          <label for="useSecondaryHeader" class="css-label button-tooltip" data-tooltip="alternativeHeaderTooltip" data-timeout="3000">' + M.USE_ALTERNATIVE_HEADER + '</label>                        </div>                      </div>                    </div>                  </div>                  <div class="cpanel-popup-slide">                     <div class="popup-newpage-wrapper">                       <div class="popup-input-wrapper">                         <div class="flex col20 align-center justify-center need-help-text-wrapper" data-key="seo"><a class="need-help-text mt-0" rel="action" data-action="showHelperVideo" data-target="CPanel">' + M.NEED_HELP + " <span>" + M.PLAY_VIDEO + ' <i class="material-icons"> play_circle_filled </i></span></a></div>                         <div class="popup-input-wrapper">                           <h5>' + M.META_TITLE + '</h5>                           <input type="text" name="pageTitle" class="transition-border">                         </div>                         <div class="popup-input-wrapper">                           <h5>' + M.META_DESCRIPTION + '</h5>                           <textarea style="height:86px; width: 405px;" placeholder="' + M.META_DESCRIPTION + '" name="description"></textarea>                         </div>                       </div>                       <div class="popup-input-wrapper">                        <div class="checkbox-wrapper">                          <input id="isPublic" class="css-checkbox modify" type="checkbox" name="isPublic" checked="checked" />                          <label for="isPublic" class="css-label button-tooltip" data-tooltip="makePagePublic" data-timeout="3000">' + M.ADD_SITEMAP + "</label>                        </div>                      </div>                    </div>                  </div>                </div>";
                    case "gridPlaceholderMarkup":
                        return '<div class="grid-placeholder"></div>';
                    case "editPageDialogMarkup":
                        return '<div class="modal-nav layout-buttons-wrapper">                   <ul>                     <li><a class="slow-transition-bg">' + M.PAGE_INFO + '</a></li>                     <li><a class="slow-transition-bg">' + M.SEO_INFO + '</a></li>                   </ul>                 </div>                 <div class="cpanel-popup-slider">                   <div class="cpanel-popup-slide">                     <div class="popup-newpage-wrapper">                       <div class="popup-input-wrapper">                         <h5>' + M.PAGE_NAME + '</h5>                         <input type="text" name="pageName" class="focus transition-border">                       </div>                       <div class="popup-input-wrapper">                         <h5>' + M.PAGE_URL + '</h5>                         <div class="page-url-text">website.com/</div>                         <input type="text" name="pageUrl" class="page-url-field transition-border">                       </div>                       <div class="popup-input-wrapper input-wrapper page-group-wrapper none">                         <div class="info">                           <h5>' + M.ADD_TO_GROUP + '</h5>                         </div>                         <select class="page-select" name="grSelect"></select>                       </div>                       <div class="popup-input-wrapper">                         <div class="info cpanel-tooltip" data-tooltip="pageAccessInfo" data-timeout="3000">                           <h5>' + M.PAGE_ACCESS + '</h5>                         </div>                         <select name="pageAccess">                           <option value="public">' + M.PUBLIC + '</option>                           <option value="password">' + M.PASSWORD_PROTECTED + '</option>                           <option value="members">' + M.MEMBERS_ONLY + '</option>                         </select>                         <div class="popup-input-wrapper pagePassword none-soft col20 f-left">                           <h5>' + M.PASSWORD_TEXT + '</h5>                           <input type="password" autocomplete="new-password" name="pagePassword" class="transition-border">                         </div>                         <div class="pageMembers none-soft col20 f-left" style="margin-bottom: 15px">                           <a class="middle-button gray">' + M.CHOOSE_MEMBER_GROUPS + '</a>                         </div>                       </div>                       <div class="popup-input-wrapper">                         <div class="checkbox-wrapper">                           <input id="useSecondaryHeader" class="css-checkbox modify" type="checkbox" name="useSecondaryHeader" />                           <label for="useSecondaryHeader" class="css-label button-tooltip" data-tooltip="alternativeHeaderTooltip" data-timeout="3000">' + M.USE_ALTERNATIVE_HEADER + '</label>                         </div>                       </div>                     </div>                   </div>                   <div class="cpanel-popup-slide">                     <div class="popup-newpage-wrapper">                       <div class="popup-input-wrapper">                         <div class="flex col20 align-center justify-center need-help-text-wrapper mt-0" data-key="seo"><a class="need-help-text" rel="action" data-action="showHelperVideo" data-target="CPanel">' + M.NEED_HELP + " <span>" + M.PLAY_VIDEO + ' <i class="material-icons"> play_circle_filled </i></span></a></div>' + (Website.textAssistEnabled ? '<div class="col20 f-left none t-center" data-role="seoSuggestionBtn"><a class="ai-generate-button system-bg-color rounded-effect"><i class="fa fa-circle-o-notch fa-spin"></i>' + Templates.get("aiIcon") + M.TEXT_ASSIST_ACTION_LABEL + "</a></div>" : "") + '                        <div class="popup-input-wrapper mt-15">                           <h5>' + M.META_TITLE + (Website.textAssistEnabled ? '<a class="ai-help-btn f-right system-bg-color rounded-effect" data-target="pageTitle" data-role="text-assist">' + Templates.get("aiIcon") + "</a>" : "") + '                          </h5>                           <input type="text" name="pageTitle" class="transition-border">                         </div>                         <div class="popup-input-wrapper">                           <h5>' + M.META_DESCRIPTION + (Website.textAssistEnabled ? '<a class="ai-help-btn f-right system-bg-color rounded-effect" data-target="description" data-role="text-assist">' + Templates.get("aiIcon") + "</a>" : "") + '                          </h5>                           <textarea style="height:86px; width: 405px;" placeholder="' + M.META_DESCRIPTION + '" name="description"></textarea>                         </div>                       </div>                       <div class="input-wrapper">                         <div class="checkbox-wrapper">                           <input id="isPublic" class="css-checkbox modify" type="checkbox" name="isPublic" />                           <label for="isPublic" class="css-label button-tooltip" data-tooltip="makePagePublic" data-timeout="3000">' + M.ADD_SITEMAP + '</label>                         </div>                       </div>                       <div class="input-wrapper flex flex-row mt-15 none" id="shareImageWrapper">                         <a class="add-image transition-all flex-none small-add-image mr-25" id="shareImageBtn">                           <span class="add-button"></span>                         </a>                         <div class="info info2 flex-1 ta-left">                           <h5 style="margin-top: 25px;">' + M.SOCIAL_SHARE_IMAGE + '</h5>                           <span class="mt-15">' + M.SOCIAL_SHARE_IMAGE_DESC + "</span>                         </div>                       </div>                     </div>                   </div>                 </div>";
                    case "addGroupDialogMarkup":
                        return '<div class="popup-newpage-wrapper">           <span class="help-text">' + M.ENTER_GROUP_NAME + '</span>           <input type="text" name="groupName" class="focus transition-border" placeholder="' + M.GROUP_NAME + '" id="groupName">         </div>';
                    case "groupWidgetNav":
                        return '<div class="widgetNav widgetGroupNav widget-settings widget-settings3">          <div class="widgetNavInner">             <a class="spacerBtn iconBtn button-tooltip" data-tooltip="margin" data-top="true"></a>             <a class="deleteBtn iconBtn button-tooltip" data-tooltip="deletee" data-top="true"></a>           </div>         </div>';
                    case "deleteNavButton":
                        return '<a class="deleteBtn iconBtn button-tooltip" data-tooltip="deletee" data-top="true"></a>';
                    case "fullWidthContainerNav":
                        return '<div class="container-nav container-nav2">                  <a class="editBtn container-settings-btn"><span class="columns-number"><span class="material-icons" style="font-size: 14px;line-height: 21px;"> settings </span></span>' + M.BLOCK + '</a>                  <div class="settings-options">                    <a class="widgetResizeButton button-tooltip" data-tooltip="collapse" data-top="true"></a>                     <a class="containerCopyBtn widget-button-default widget-copy-btn button-tooltip none" data-tooltip="widgetCopy" data-top="true">' + M.COPY + '</a>                     <a class="containerCopyBtn widget-button-default widget-copy-btn button-tooltip flex align-center justify-center" data-tooltip="widgetCopy" data-top="true"><span class="material-icons-outlined"> copy </span></a>                     <a class="deleteBtn iconBtn button-tooltip" data-tooltip="deletee" data-top="true"></a>                   </div>                </div>                <div class="block-right-controls">                   <a class="visibility button-tooltip" data-tooltip="hideBlock" data-bottom="true" data-role="hideBlock"><span class="material-icons"> visibility_off </span></a>                   <a class="visibility button-tooltip" data-tooltip="showBlock" data-bottom="true" data-role="showBlock"><span class="material-icons"> visibility_on </span></a>                   <a class="timer button-tooltip" data-tooltip="delayElement" data-bottom="true" data-role="delayElement"><span class="material-icons-outlined" style="font-size: 22px;"> timer </span></a>                   <a class="arrow-up button-tooltip" data-tooltip="moveBlockDown" data-bottom="true" data-role="moveBlockDown"><span class="material-icons"> arrow_right_alt </span></a>                   <a class="arrow-down button-tooltip" data-tooltip="moveBlockUp" data-bottom="true" data-role="moveBlockUp"><span class="material-icons"> arrow_right_alt </span></a>                 </div>                 <div class="mobile-controls">                   <div class="mobile-view-buttons">                     <a data-action="toggle-mobile" data-tooltip="togglePhoneVisibility" class="system-bg-color phone-view-icon button-tooltip" data-top="true" data-timeout="5000" ><i class="fa fa-mobile"></i></a>                     <a data-action="toggle-tablet" data-tooltip="toggleTabletVisibility" class="system-bg-color tablet-view-icon button-tooltip" data-top="true" data-timeout="5000" ><i class="fa fa-tablet"></i></a>                     <a class="system-bg-color disabled desktop-view-icon button-tooltip" data-tooltip="disabledForDesktop" data-top="true"><i class="fa fa-desktop" data-timeout="5000" ></i></a>                   </div>                   <div class="checkbox-wrapper f-right stretch-mobile-cbx button-tooltip" data-tooltip="stretchedContainerInfo" data-top="true" data-timeout="5000" >                     <input id="stretchedContainerForMobile%uid%" class="css-checkbox modify" type="checkbox" name="stretchedContainerForMobile%uid%" %stretched-mobile% />                     <label for="stretchedContainerForMobile%uid%" class="css-label">' + M.STRETCHED_CONTAINER + '</label>                   </div>                   <div class="checkbox-wrapper f-right stretch-tablet-cbx button-tooltip" data-tooltip="stretchedContainerInfo" data-top="true" data-timeout="5000" >                     <input id="stretchedContainerForTablet%uid%" class="css-checkbox modify" type="checkbox" name="stretchedContainerForTablet%uid%" %stretched-tablet% />                     <label for="stretchedContainerForTablet%uid%" class="css-label">' + M.STRETCHED_CONTAINER + '</label>                   </div>                   <div class="checkbox-wrapper f-right col-reverse-cbx button-tooltip" data-tooltip="columnReverse" data-top="true" data-timeout="5000" >                     <input id="columnReverse%uid%" class="css-checkbox modify" type="checkbox" name="columnReverse%uid%" %column-reverse%/>                     <label for="columnReverse%uid%" class="css-label">' + M.COLUMN_REVERSE + '</label>                   </div>                 </div>                 <div class="hidden-area-badge system-bg-color">' + M.HIDDEN_AREA + '</div>                 <div class="mobile-only-badge system-bg-color">' + M.MOBILE_ONLY + '</div>                <div class="widget-settings bottom-nav">                   <a class="button-tooltip system-bg-color">' + M.ADD_WIDGET_BLOCK_TITLE + "</a>                 </div>";
                    case "fullWidthBlockRowNav":
                        return '<div class="widget-settings columns-nav flex-none" data-position="%position%">                   <div>                     <div class="row-controls-wrapper flex align-center">                       <a class="row-columns flex align-center button-tooltip" data-bottom="true" data-tooltip="changeColumns">                         <span class="columns-number"></span>                         <span class="columns-text"></span>                       </a>                       <a class="row-add-inner button-tooltip" data-tooltip="addBlockRow" data-bottom="true" data-role="addBlockRow"><span class="material-icons"> add </span></a>                       <a class="row-delete button-tooltip" data-tooltip="deleteBlockRow" data-bottom="true" data-role="deleteBlockRow"><span class="material-icons"> delete_outline </span></a>                       <a class="arrow-up button-tooltip" data-tooltip="moveBlockRowDown" data-bottom="true" data-role="moveBlockRowDown"><span class="material-icons"> arrow_right_alt </span></a>                      <a class="arrow-down button-tooltip" data-tooltip="moveBlockRowUp" data-bottom="true" data-role="moveBlockRowUp"><span class="material-icons"> arrow_right_alt </span></a>                    </div>                     <a class="row-add flex none align-center justify-center"><span class="material-icons">add</span></a>                   </div>                 </div>';
                    case "pickPageTabEmail":
                        return '<div class="pickPageDialogContent tab-email">                <div class="popup-input-wrapper">                   <div class="info">                     <h5>' + M.CAPTION + '</h5>                   </div>                   <input type="text" class="emailCaption" />                </div>                 <div class="popup-input-wrapper">                   <div class="info">                     <h5>' + M.EMAIL + '</h5>                  </div>                   <input type="text" class="emailField" />                </div>               </div> ';
                    case "pickPageTabPhone":
                        return '<div class="pickPageDialogContent tab-phone">                <div class="popup-input-wrapper">                   <div class="info">                     <h5>' + M.CAPTION + '</h5>                   </div>                   <input type="text" class="phoneCaption" />                </div>                 <div class="popup-input-wrapper">                   <div class="info">                     <h5>' + M.PHONE_NUMBER + '</h5>                   </div>                   <input type="text" class="phoneField" />                </div>               </div>';
                    case "pickPageTabFile":
                        return '<div class="pickPageDialogContent tab-file">                <div class="popup-input-wrapper">                   <div class="info">                     <h5>' + M.CAPTION + '</h5>                   </div>                   <input type="text" class="pickFileCaption" />                </div>                 <div class="popup-input-wrapper">                   <div class="info">                     <h5>' + M.FILE + '</h5>                   </div>                   <input class="select-like" readonly="readonly" name="fileSelect">                 </div>                 <div class="col20 f-left" data-role="open-in-wrapper">                  <div class="info">                     <h5>' + M.OPEN_IN + '</h5>                   </div>                   <select class="template-select openIn">                    <option value="_self">' + M.SAME_TAB + '</option>                     <option value="_blank">' + M.NEW_TAB + '</option>                   </select>                 </div>                <div class="checkbox-wrapper checkbox-wrapper2 none">                   <input id="nofollow-cbx" class="css-checkbox" type="checkbox">                   <label for="nofollow-cbx" class="css-label modify">' + M.MAKE_NOFOLLOW + "</label>                 </div>               </div>";
                    case "pickPageTabPopup":
                        return '<div class="pickPageDialogContent tab-popup">                <div class="popup-input-wrapper">                   <div class="info">                     <h5>' + M.POPUP + "</h5>                   </div>                   <select></select>                 </div>               </div>";
                    case "pickPageTabPage":
                        return '<div class="pickPageDialogContent tab-pages">                <div class="popup-input-wrapper">                   <div class="info">                     <h5>' + M.PAGE_GROUP + '</h5>                   </div>                   <select class="focus pick-page-group-select"></select>                 </div>                 <div class="popup-input-wrapper">                   <div class="info">                     <h5>' + M.PAGE + '</h5>                   </div>                   <select class="pick-page-page-select"></select>                 </div>                 <div class="col20 f-left" data-role="open-in-wrapper">                  <div class="info">                     <h5>' + M.OPEN_IN + '</h5>                   </div>                   <select class="template-select openIn">                    <option value="_self">' + M.SAME_TAB + '</option>                     <option value="_blank">' + M.NEW_TAB + '</option>                   </select>                 </div>                <div class="checkbox-wrapper checkbox-wrapper2 none">                   <input id="nofollow-cbx" class="css-checkbox" type="checkbox">                   <label for="nofollow-cbx" class="css-label modify">' + M.MAKE_NOFOLLOW + "</label>                 </div>               </div>";
                    case "pickPageTabAnchorPoint":
                        return '<div class="pickPageDialogContent tab-pages">                <div class="popup-input-wrapper">                   <div class="info">                     <h5>' + M.PAGE_GROUP + '</h5>                   </div>                   <select class="focus pick-page-group-select"></select>                 </div>                 <div class="popup-input-wrapper">                   <div class="info">                     <h5>' + M.PAGE + '</h5>                   </div>                   <select class="pick-page-page-select"></select>                 </div>                 <div class="popup-input-wrapper anchor-wrapper">                   <div class="info">                     <h5>' + M.ANCHOR_POINT + '</h5>                   </div>                   <select class="pick-page-anchor-select"></select>                 </div>                 <div class="col20 f-left" data-role="open-in-wrapper">                  <div class="info">                     <h5>' + M.OPEN_IN + '</h5>                   </div>                   <select class="template-select openIn">                    <option value="_self">' + M.SAME_TAB + '</option>                     <option value="_blank">' + M.NEW_TAB + '</option>                   </select>                 </div>                <div class="checkbox-wrapper checkbox-wrapper2 none">                   <input id="nofollow-cbx" class="css-checkbox" type="checkbox">                   <label for="nofollow-cbx" class="css-label modify">' + M.MAKE_NOFOLLOW + "</label>                 </div>               </div>";
                    case "pickPageTabExternal":
                        return '<div class="pickPageDialogContent tab-external">                <div class="popup-input-wrapper">                   <div class="info">                     <h5>' + M.CAPTION + '</h5>                   </div>                   <input type="text" class="pickPageCaption" />                </div>                 <div class="popup-input-wrapper" style="margin-bottom:10px;">                   <div class="info">                     <h5>' + M.URL + '</h5>                   </div>                   <input type="text" class="pickPageUrl" />                 </div>                 <div class="col20 f-left" data-role="open-in-wrapper">                  <div class="info">                     <h5>' + M.OPEN_IN + '</h5>                   </div>                   <select class="template-select openIn">                    <option value="_self">' + M.SAME_TAB + '</option>                     <option value="_blank">' + M.NEW_TAB + '</option>                   </select>                 </div>                <div class="checkbox-wrapper checkbox-wrapper2 none">                   <input id="nofollow-cbx" class="css-checkbox" type="checkbox">                   <label for="nofollow-cbx" class="css-label modify">' + M.MAKE_NOFOLLOW + "</label>                 </div>               </div>";
                    case "pickPageTabFunnels":
                        return '<div class="pickPageDialogContent tab-funnels">                <div class="popup-input-wrapper">                   <div class="info">                     <h5>' + M.FUNNEL + '</h5>                   </div>                   <select class="pick-funnel-group-select"></select>                 </div>                 <div class="popup-input-wrapper">                   <div class="info">                     <h5>' + M.FUNNEL_STEP + '</h5>                   </div>                   <select class="pick-funnel-page-select"></select>                 </div>                 <div class="col20 f-left" data-role="open-in-wrapper">                  <div class="info">                     <h5>' + M.OPEN_IN + '</h5>                   </div>                   <select class="template-select openIn">                    <option value="_self">' + M.SAME_TAB + '</option>                     <option value="_blank">' + M.NEW_TAB + '</option>                   </select>                 </div>                <div class="checkbox-wrapper checkbox-wrapper2 none">                   <input id="nofollow-cbx" class="css-checkbox" type="checkbox">                   <label for="nofollow-cbx" class="css-label modify">' + M.MAKE_NOFOLLOW + "</label>                 </div>               </div>";
                    case "pickPageTabActiveFunnel":
                        return '<div class="pickPageDialogContent tab-funnel">                <div class="popup-input-wrapper">                   <div class="info">                     <h5>' + M.FUNNEL_STEP + '</h5>                   </div>                   <select></select>                 </div>                 <div class="checkbox-wrapper checkbox-wrapper2 none">                   <input id="nofollow-cbx" class="css-checkbox" type="checkbox">                   <label for="nofollow-cbx" class="css-label modify">' + M.MAKE_NOFOLLOW + "</label>                 </div>               </div>";
                    case "pickPageTabStore":
                        return '<div class="pickPageDialogContent tab-store">                  <div class="popup-input-wrapper category-wrapper">                     <div class="info">                       <h5>' + M.STORE_CATEGORY + '</h5>                     </div>                     <select class="pick-page-store-category-select"></select>                   </div>                   <div class="popup-input-wrapper">                     <div class="info">                       <h5>' + M.PAGE + '</h5>                     </div>                     <select class="pick-page-page-select"></select>                   </div>                   <div class="col20 f-left" data-role="open-in-wrapper">                    <div class="info">                       <h5>' + M.ACTION + '</h5>                     </div>                     <select class="template-select openInStore">                      <option value="_self">' + M.OPEN_IN + " " + M.SAME_TAB + '</option>                       <option value="_blank">' + M.OPEN_IN + " " + M.NEW_TAB + '</option>                       <option value="cart">' + M.ADD_PRODUCT_TO_CART + '</option>                       \x3c!--<option value="buy">' + M.BUY_NOW_PRODUCT + '</option>--\x3e                     </select>                     <div id="next-action" class="col20 f-left none-soft">                       <div class="info">                         <h5>' + M.THEN_SHOW + '</h5>                       </div>                       <input class="select-like" readonly="readonly" name="nextAction">                     </div>                   </div>                  <div class="checkbox-wrapper checkbox-wrapper2 none">                     <input id="nofollow-cbx" class="css-checkbox" type="checkbox">                     <label for="nofollow-cbx" class="css-label modify">' + M.MAKE_NOFOLLOW + "</label>                   </div>                 </div>";
                    case "pickPageDialog":
                        return '<div class="side-nav-popup link-popup">             <div class="cpanel-left-navigation">               <div class="categories-wrapper">                 <ul>                   <li class="none" data-tab="active-funnel"><a class="button">' + M.FUNNEL + '</a></li>                  <li data-tab="page"><a class="button">' + M.PAGE + '</a></li>                   <li data-tab="store"><a class="button">' + M.STORE_TITLE + '</a></li>                   <li class="none" data-tab="funnels"><a class="button">' + M.FUNNEL + '</a></li>                  <li data-tab="external"><a class="button">' + M.EXTERNAL_LINK + '</a></li>                  <li data-tab="anchor-point"><a class="button">' + M.ANCHOR_POINT + '</a></li>                  <li data-tab="file"><a class="button">' + M.FILE + '</a></li>                  <li data-tab="popup"><a class="button">' + M.POPUP + '</a></li>                  <li data-tab="email"><a class="button">' + M.EMAIL + '</a></li>                  <li data-tab="phone"><a class="button">' + M.PHONE + '</a></li>                </ul>              </div>            </div>             <div class="content-wrapper">             </div>         </div>';
                    case "addWidgetDialogMarkup":
                        return '        <div class="content admin-custom-scroll" id="cpanel-widgets-popup">           <div data-role="widgets-target" class="col20 f-left" style="padding: 5px 20px; box-sizing: border-box;">             <div class="help-text" style="margin-top:0;">' + M.DRAG_AND_DROP + "</div>          </div>         </div>";
                    case "addHeaderWidgetDialogMarkup":
                        return '        <div class="content admin-custom-scroll" id="cpanel-widgets-popup">        </div>';
                    case "addBlockWidgetDialogMarkupOld":
                        return '<div class="content">           <div class="cpanel-popup-slider" style="width: 100%">             <div class="categories-wrapper"></div>           </div>        </div>';
                    case "addBlockDialogMarkup":
                    case "addPopupTemplates":
                        return '<div class="cpanel-left-navigation">                   <h3>' + M.CATEGORIES + '</h3>                   <div class="categories-wrapper">                     <ul class="admin-custom-scroll"></ul>                   </div>                </div>                 <div class="content-wrapper admin-custom-scroll dark-admin-custom-scroll">                    <div class="popup-templates-inner-wrapper col20 f-left"></div>                 </div>';
                    case "blockTemplateItemMarkup":
                        return '<div class="page-wrapper" data-id="%id%">                   <img src="%thumb%" class="page-thumb" data-action="select" data-id="%id%" />                 </div>';
                    case "addPopupDialogMarkup":
                        return '<div class="content popups-list-wrapper">           <div class="content-wrapper admin-custom-scroll dark-admin-custom-scroll">             <ul>               <li><a id="-1"><img src="' + resources + "/images/empty-popup-thumb.jpg?v=" + resourcesVersion + '"></a></li>             </ul>           </div>         </div>';
                    case "addComplexWidgetTitle":
                        return '<a class="complexCategory" title="%category%">%category%</a>';
                    case "addComplexWidgetItem":
                        return '<a class="widget-item complex-widget"><img src="%thumb%" alt="" /></a>';
                    case "addWidgetItemMarkup":
                        return '<div class="widget-item transitions-all">           <div class="%cssClass%"></div>             <span>%text%</span> %addition%        </div>';
                    case "addWidgetDialogComplexWidgetMarkup":
                        return '<div style="display: none; width: 50%; float: right;">          <div class="categories-wrapper">             <span class="category-title"><a class="back-btn"></a>%category%</span>             <ul class="admin-custom-scroll"></ul>           </div>        </div>';
                    case "editBackgroundDialogMarkup":
                        return '<div class="popup-newpage-wrapper">       <div class="left-section-pop">         <a class="add-image transition-all backgroundSelectImageHolder full-width" style="margin-top:0;">           <span class="add-button transition-all"></span>         </a>       </div>       <div class="input-wrapper input-wrapper-small color-pick-wrap-widgets" style="margin-bottom:10px;">         <div class="color-pick-wrap">           <div></div>           <input type="text" value="" class="colorpicker-selected modify" name="bgColor">         </div>         <div class="info">           <h5>' + M.BACKGROUND_COLOR + '</h5>         </div>       </div>      <div class="checkbox-wrapper col20 f-left" id="parallaxBtnWrapper">         <input id="parallaxEffect" class="css-checkbox modify" type="checkbox" name="bgParallax" />         <label for="parallaxEffect" class="css-label">' + M.PARALLAX_EFFECT + '</label>       </div>       <div class="f20 parallaxWrapper none-soft">        <div class="input-wrapper">           <div class="info">             <label>' + M.PARALLAX_SPEED + '</label>            <input type="text" readonly="readonly" class="slider-val modify" name="parallaxSpeed">           </div>           <div id="parallaxSpeedSlider"></div>         </div>         <div class="input-wrapper">           <div class="info">             <label>' + M.IMAGE_DESCRIPTION + '</label>            <input type="text" name="parallaxAlt">           </div>         </div>       </div>      <div class="f20 noParallaxWrapper none-soft">        <div class="col20 f-left" id="bgPositionControlsWrapper">           <div class="popup-input-wrapper mt-15">             <div class="info">               <h5>' + M.BACKGROUND_IMAGE_POSITION + '</h5>             </div>             <select class="page-select modify" name="bgPosition">               <option value="left top">' + M.LEFT_TOP + '</option>               <option value="left center">' + M.LEFT_CENTER + '</option>               <option value="left bottom">' + M.LEFT_BOTTOM + '</option>               <option value="right top">' + M.RIGHT_TOP + '</option>               <option value="right center">' + M.RIGHT_CENTER + '</option>               <option value="right bottom">' + M.RIGHT_BOTTOM + '</option>               <option value="center top">' + M.CENTER_TOP + '</option>               <option value="center center">' + M.CENTER_CENTER + '</option>               <option value="center bottom">' + M.CENTER_BOTTOM + '</option>             </select>           </div>           <div class="popup-input-wrapper">             <div class="info">               <h5>' + M.BACKGROUND_IMAGE_REPEAT + '</h5>             </div>             <select class="page-select modify" name="bgRepeat">               <option value="repeat">' + M.REPEAT + '</option>               <option value="repeat-x">' + M.REPEAT_HORIZONTALLY + '</option>               <option value="repeat-y">' + M.REPEAT_VERTICALLY + '</option>               <option value="no-repeat">' + M.NO_REPEAT + '</option>               <option value="cover">' + M.COVER_WHOLE_AREA + '</option>               <option value="contain">' + M.BG_SIZE_CONTAIN + '</option>             </select>           </div>         </div>        <div class="checkbox-wrapper">           <input id="hasVideoBackground" class="css-checkbox modify" type="checkbox" name="hasVideoBackground" />           <label for="hasVideoBackground" class="css-label">' + M.ADD_VIDEO_BACKGROUND + '</label>         </div>         <div class="f20 videoWrapper none-soft" style="margin-top:10px;">          <div class="input-wrapper">             <div class="info">               <h5>' + M.YOUTUBE_VIDEO_URL + '</h5>             </div>             <div class="input-wrapper">               <input type="text" name="videoUrl" value="" class="modify transition-border">             </div>             <div class="info input-slider-wrapper mt-15 mb-15">               <label>' + M.VIDEO_VOLUME + '</label>              <div id="videoVolumeSlider"></div>               <input type="text" readonly="readonly" class="slider-val modify" name="videoVolume">             </div>             <div class="info">               <h5>' + M.VIDEO_LOOP + '</h5>             </div>             <div class="input-wrapper" style="margin-bottom: 10px;">               <input type="number" name="videoStart" value="" class="modify transition-border" style="width: 48%; margin-right:4%;">               <input type="number" name="videoEnd" value="" class="modify transition-border" style="width: 48%;">             </div>           </div>         </div>      </div>      <div class="col20 f-left" data-role="bg-gradient">' + format(Templates.get("gradientMarkup"), "id", "bgGradient", "margin", "mb-15") + '</div>      <div class="checkbox-wrapper">         <input id="addOverlayCbx" class="css-checkbox" type="checkbox" name="addOverlay" />         <label for="addOverlayCbx" class="css-label">' + M.ADD_OVERLAY + '</label>       </div>       <div class="col20 f-left" id="overlayColorWrapper">         <div class="input-wrapper col20 f-left color-pick-wrap-widgets">           <div class="color-pick-wrap">             <div></div>             <input type="text" class="colorpicker-selected" name="overlayColor">           </div>           <div class="info">             <h5>' + M.OVERLAY_COLOR + "</h5>           </div>         </div>         " + format(Templates.get("gradientMarkup"), "id", "overlayGradient", "margin", "mb-15") + '      </div>       <div class="col20 f-left">         <div class="checkbox-wrapper">           <input id="addDivider" class="css-checkbox" type="checkbox" name="addDivider" />           <label for="addDivider" class="css-label">' + M.ADD_SHAPE_DIVIDER + '</label>         </div>         <div class="col20 f-left none-soft" id="shapeDividerSettingsWrapper">           <div class="input-wrapper mt-5">             <div class="info">               <h5>' + M.SHAPE_DIVIDER_TYPE + '</h5>             </div>             <select name="dividerType">               <option value="curve">' + M.SHAPE_CURVE + '</option>               <option value="curve2">' + M.SHAPE_CURVE + ' 2</option>               <option value="curve3">' + M.SHAPE_CURVE + ' 3</option>               <option value="curve4">' + M.SHAPE_CURVE + ' 4</option>               <option value="curve-with-opacity">' + M.SHAPE_CURVE_WITH_OPACITY + '</option>               <option value="curve-with-opacity-small">' + M.SHAPE_CURVE_WITH_OPACITY_SMALL + '</option>               <option value="triangle">' + M.SHAPE_TRIANGLE + '</option>               <option value="triangle-asymmetrical">' + M.SHAPE_TRIANGLE_ASYMMETRICAL + '</option>               <option value="arrow">' + M.SHAPE_ARROW + '</option>               <option value="grunge">' + M.SHAPE_GRUNGE + ' </option>               <option value="grunge2">' + M.SHAPE_GRUNGE + ' 2</option>               <option value="paint">' + M.SHAPE_PAINT + '</option>               <option value="paint2">' + M.SHAPE_PAINT + ' 2</option>               <option value="paper">' + M.SHAPE_PAPER + '</option>               <option value="paper2">' + M.SHAPE_PAPER + ' 2</option>               <option value="wavebrush">' + M.SHAPE_WAVE_BRUSH + '</option>               <option value="clouds">' + M.SHAPE_CLOUDS + '</option>               <option value="tilt">' + M.SHAPE_TILT + '</option>               <option value="tilt-with-opacity">' + M.SHAPE_TILT_WITH_OPACITY + '</option>             </select>           </div>           <div class="input-wrapper col20 f-left color-pick-wrap-widgets">             <div class="color-pick-wrap">               <div></div>               <input type="text" value="" class="colorpicker-selected" name="dividerColor">             </div>             <div class="info">               <h5>' + M.DIVIDER_COLOR + '</h5>             </div>           </div>           <div class="input-wrapper mt-5">             <div class="info">               <h5>' + M.DIVIDER_POSITION + '</h5>             </div>             <select name="dividerPosition">               <option value="bottom">' + M.AT_BOTTOM + '</option>               <option value="top">' + M.AT_TOP + '</option>             </select>           </div>           <div class="checkbox-wrapper col20 f-left">             <input id="flipDivider" class="css-checkbox" type="checkbox" name="flipDivider" />             <label for="flipDivider" class="css-label">' + M.FLIP_DIVIDER + '</label>           </div>           <div class="checkbox-wrapper col20 f-left">             <input id="invertDivider" class="css-checkbox" type="checkbox" name="invertDivider" />             <label for="invertDivider" class="css-label">' + M.INVERT_DIVIDER + '</label>           </div>         </div>       </div>      <div class="popup-input-wrapper none" id="containerAnchorSettingsWrapper" style="margin-bottom:15px;">         <div class="checkbox-wrapper checkbox-wrapper2">           <input id="addAnchorPoint" class="css-checkbox" type="checkbox" name="addAnchorPoint" />           <label for="addAnchorPoint" class="css-label">' + M.ADD_ANCHOR_POINT + '</label>         </div>         <div class="col20 f-left mt-15" id="containerAnchorSettings">           <div class="info">             <h5>' + M.ANCHOR_POINT_NAME + '</h5>           </div>           <div class="popup-input-wrapper">             <input type="text" name="anchorPointName" value="" class="modify transition-border" style="margin-bottom: 5px;">             <span class="small-info-text">site.com/page#<span style="font-weight: bold;" id="anchorPointUrl"></span></span>           </div>         </div>       </div>       <div class="col20 f-left mb-15 mt-5">         <div class="info">           <a class="small-info-text with-icon" id="custom-class-trigger">' + M.ADD_CUSTOM_CSS_CLASS_TO_BLOCK_TITLE + '</a>         </div>         <div class="col20 f-left none-soft" id="custom-class-target">           <input type="text" name="customClass" value="" class="modify transition-border" style="margin-bottom: 5px;">           <span class="small-info-text">' + M.ADD_CUSTOM_CSS_CLASS_TO_BLOCK_DESC + "</span>         </div>       </div>     </div>";
                    case "uploaderTemplate":
                        return '<div class="file-manager">           <div class="folder-nav">             <div class="cpanel-popup-title"><div class="popup-icon popup-files-icon"></div><span class="ptSans">' + M.FILE_MANAGER + '</span></div>            <div class="section-heading t-center">              <a class="middle-button blue with-icon inline-block f-none" data-rel="add-folder">' + M.ADD_FOLDER + '</a>             </div>            <div class="uploaderFolders">              <ul id="uploaderTemplateFolderWrapper" class="uploader-template-folder-wrapper">                <li class="slow-transition-bg"></li>              </ul>            </div>            <div class="unsplash-explore">               <ul class="uploader-template-folder-wrapper explore">                <li id="explore-unsplash" class="slow-transition-bg folderItem flex align-center justify-center rounded-effect" data-name="explore-unsplash" data-displayname="Explore">                  <svg  class="mr-10" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M120-200q-33 0-56.5-23.5T40-280v-400q0-33 23.5-56.5T120-760h400q33 0 56.5 23.5T600-680v400q0 33-23.5 56.5T520-200H120Zm600-320q-17 0-28.5-11.5T680-560v-160q0-17 11.5-28.5T720-760h160q17 0 28.5 11.5T920-720v160q0 17-11.5 28.5T880-520H720Zm40-80h80v-80h-80v80ZM120-280h400v-400H120v400Zm40-80h320L375-500l-75 100-55-73-85 113Zm560 160q-17 0-28.5-11.5T680-240v-160q0-17 11.5-28.5T720-440h160q17 0 28.5 11.5T920-400v160q0 17-11.5 28.5T880-200H720Zm40-80h80v-80h-80v80Zm-640 0v-400 400Zm640-320v-80 80Zm0 320v-80 80Z"/></svg>                   <p class="">' + M.IMAGE_DIRECTORY + '</p>                </li>              </ul>            </div>          </div>           <div class="flex flex-col flex-1 height-100 overflow-auto">             <div class="file-manager-content file-manager-empty">               <div class="empty-info">                 <h2>' + M.NO_FILES_TITLE + "</h2>                 <span>" + M.NO_FILES_INFO + '</span>               </div>               <div class="qq-upload-drop-area"><span>' + M.DROP_FILES_TO_UPLOAD + '</span></div>               <div id="fileManagerUploaderList"></div>              <div class="file-wrapper" id="uploaderTemplateFileWrapper"></div>               <div class="file-wrapper" id="unsplashWrapper">                <div class="unsplash-search-bar-outer">                   <div class="unsplash-search-bar flex align-center">                     <svg class="unsplash-search-icon flex-none" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/></svg>                     <input autocomplete="off" type="text" id="exploreGallerySearchInput" placeholder="' + M.SEARCH_UNSPLASH + '"/>                  </div>                 </div>                 <div id="unsplash-items"></div>              </div>             </div>             <div class="file-manager-buttons">               <div title="' + M.UPLOAD_FILE + '" class="blue middle-button transition-bg f-left with-icon" id="fileUploaderButton"></div>              <div title="' + M.SELECT + '" class="blue middle-button transition-bg f-right" id="selectBtn">' + M.SELECT + '</div>              <div title="' + M.CLOSE + '" class="gray middle-button transition-bg f-right" id="closeBtn">' + M.CLOSE + '</div>             </div>           </div>           <div id="uploaderDropZone"></div>         </div>';
                    case "uploaderItemTemplate":
                        return '<div class="downloading downloading2"><img src="' + resources + "/images/image-avatar.png?v=" + resourcesVersion + '" class="uploading-thumb"/><div class="fm-middle"><div class="middle-content"><span class="qq-upload-file title"></span><span class="qq-upload-size size"></span><span class="qq-upload-failed-text">{failUploadtext}</span></div><div class="download-tracker"><span class="qq-progress-bar"></span></div><span class="qq-upload-spinner"></span></div><a class="qq-upload-cancel close-button"></a>';
                    case "uploadButtonTemplate":
                        return '<div class="qq-uploader"><div class="qq-upload-button">{uploadButtonText}</div><ul class="qq-upload-list"></ul></div>';
                    case "folderTemplate":
                        return '<li class="slow-transition-bg folderItem" data-name="%name%" data-displayname="%displayname%">       <span>%displayname%</span>       <a class="deleteItem"></a>     </li>';
                    case "bigThumbItemMarkup":
                        return '<div class="file2 %fileClass% %type%" id="%id%">       <div class="big-thumb" style="background: %background%;"></div>       <div class="item-name"><span>%itemName%</span></div>       <a class="close-button2"></a>       <a class="copy-link-button"></a>       <a class="check-button2"></a>     </div>';
                    case "unsplashBigThumbItemMarkup":
                        return '<div class="file2 %fileClass% %type%" id="%id%">       <div class="big-thumb" style="background: %background%;"></div>       <div class="item-name"><span>%itemName%</span></div>       <a class="copy-link-button"></a>       <a class="check-button2"></a>       <div class="unsplash-attribution">        <a href="%unsplash_user_url%" target="_blank" class="f-left">%unsplash_user_name%</a>        <a href="%unsplash_platform_url%" class="f-left" target="_blank">&nbsp;/&nbsp;Unsplash</a>      </div>    </div>';
                    case "sliderSlidesMarkup":
                        return '<div class="modal-nav layout-buttons-wrapper">       <ul>         <li><a class="slow-transition-all">' + M.SLIDES + '</a></li>         <li><a class="slow-transition-all">' + M.SLIDER_SETTINGS + '</a></li>       </ul>     </div>     <div class="cpanel-popup-slider">       <div class="cpanel-popup-slide">         <div class="content">           <div class="help-text-wrapper">             <a id="slider-layer-add" class="square-add modify" title="' + M.SLIDER_ADD_SLIDE + '"></a>             <span class="help-text">' + M.SLIDES_POSITION + '<br></span>           </div>           <div class="slidesContainer"></div>         </div>       </div>       <div class="cpanel-popup-slide">         <div class="content">          <div class="info info2" style="display:none">            <h5>' + M.SLIDER_TYPE + '</h5>          </div>           <div class="layout-buttons-wrapper" style="display:none">            <ul>              <li><a class="button modify">' + M.FIXED_WIDTH + '</a></li>              <li><a class="button modify">' + M.FULL_WIDTH + '</a></li>              <li><a class="button modify">' + M.FULL_SCREEN + '</a></li>            </ul>          </div>          <div class="input-wrapper input-wrapper2">             <div class="info">               <label for="layerHeight">' + M.SLIDE_ANIMATION_SPEED + '</label>              <input type="text" id="slideAnimationSpeed" readonly="readonly" class="modify">             </div>             <div id="slideAnimationSpeedSlider"></div>          </div>           <div class="input-wrapper input-wrapper2 f-right">             <div class="info">               <label for="slideDuration">' + M.SLIDE_DISPLAY_DURATION + '</label>              <input type="text" id="slideDuration" readonly="readonly" class="modify">             </div>             <div id="slideDurationSlider"></div>          </div>           <div class="input-wrapper input-wrapper2">             <div class="info cpanel-tooltipp">               <h5>' + M.SLIDES_TRANSITION + '</h5>             </div>             <select class="slidesTransition modify"></select>           </div>           <div class="input-wrapper">             <div class="checkbox-wrapper checkbox-wrapper2">               <input id="stop-slider-on-hover" class="css-checkbox modify" type="checkbox">               <label for="stop-slider-on-hover" class="css-label modify">' + M.SLIDER_PAUSE_ON_MOUSE_OVER + '</label>             </div>           </div>           <div class="input-wrapper">             <div class="checkbox-wrapper checkbox-wrapper2">               <input id="show-timer-nav" class="css-checkbox modify" type="checkbox">               <label for="show-timer-nav" class="css-label modify">' + M.SLIDER_SHOW_TIMER + '</label>             </div>           </div>           <div class="input-wrapper">             <div class="checkbox-wrapper checkbox-wrapper2">               <input id="show-arrow-nav" class="css-checkbox modify" type="checkbox">               <label for="show-arrow-nav" class="css-label modify">' + M.SLIDER_NAV_ARROWS + '</label>             </div>           </div>           <div class="input-wrapper">             <div class="checkbox-wrapper checkbox-wrapper2">               <input id="show-bullet-nav" class="css-checkbox modify" type="checkbox">               <label for="show-bullet-nav" class="css-label modify">' + M.SLIDER_NAV_BULLETS + "</label>             </div>           </div>         </div>       </div>     </div>";
                    case "sliderSlideMarkup":
                        return '<div class="slide">         <span class="move-icon"></span>         <div class="big-thumb"></div>         <div class="slide-buttons-wrapper">           <a class="edit-slide modify"></a>           <a class="duplicate-slide modify"></a>           <a class="delete-slide delete-icon modify"></a>         </div>       </div>';
                    case "sliderSlideEditMarkup":
                        return '<div class="content">       <div class="slide-background">         <div class="radio-option">             <input type="radio" name="bgOption" id="radio1" value="image" class="css-checkbox">             <label for="radio1" class="css-label">' + M.IMAGE + '</label>         </div>         <input type="hidden" id="sliderSelectedBg" value="" />         <input type="hidden" id="sliderSelectedBgBase" value="" />         <a class="blue button" id="sliderSelectBg">' + M.SLIDE_CHANGE_IMAGE + '</a>         <div class="radio-option">           <input type="radio" name="bgOption" id="radio2" value="color" class="css-checkbox">           <label for="radio2" class="css-label">' + M.SOLID_COLOR + '</label>         </div>         <div class="color-pick-wrap">           <div id="slide-bg-color"></div>           <input type="text" value="" id="slide-colorpicker">         </div>       </div>       <div class="f20"><div class="preview"> </div></div>    </div>';
                    case "sliderAddTextLayerMarkup":
                        return '<div class="popup-slider-wrapper">         <div class="popup-input-wrapper">           <div class="info">             <h5 style="text-indent: 2px">' + M.TEXT_CONTENT + '</h5>           </div>           <div class="slider-text-content-wrapper">             <div class="slider-text-content"></div>           </div>         </div>         <div class="input-wrapper input-wrapper2 f-left clear-left">           <div class="info cpanel-tooltipp">             <h5>' + M.ANIMATION_STARTING_POINT + ' <span class="startingPoint"></span></h5>           </div>           <div id="startingPointSlider"></div>         </div>         <div class="input-wrapper input-wrapper2 f-right">           <div class="info cpanel-tooltipp">             <h5>' + M.ANIMATION_SPEED + ' <span class="animationSpeed"></span></h5>           </div>           <div id="animationSpeedSlider"></div>         </div>         <div class="input-wrapper input-wrapper2 f-left clear-left">           <div class="info">             <h5>' + M.ANIMATION + '</h5>           </div>           <select class="template-select animationSelect"></select>         </div>         <div class="input-wrapper input-wrapper2 f-right color-pick-wrap-widgets" style="width:47%; margin-top: 20px">           <div class="color-pick-wrap">             <div style="background-color: rgb(51, 51, 51);"></div>             <input type="text" value="" class="colorpicker-selected modify" name="backgroundColor" />           </div>           <div class="info">             <h5>' + M.BACKGROUND_COLOR + '</h5>           </div>         </div>         <div style="float:left;width:100%;height:20px;"></div>       </div>';
                    case "sliderAddImageLayerMarkup":
                        return '<div class="popup-slider-wrapper">       <div class="popup-input-wrapper">         <div class="info cpanel-tooltipp">           <h5>' + M.ANIMATION_STARTING_POINT + ' <span class="startingPoint"></span></h5>         </div>         <div id="startingPointSlider"></div>       </div>       <div class="popup-input-wrapper">         <div class="info cpanel-tooltipp">           <h5>' + M.ANIMATION_SPEED + ' <span class="animationSpeed"></span></h5>         </div>         <div id="animationSpeedSlider"></div>       </div>       <div class="popup-input-wrapper">         <div class="info">           <h5>' + M.ANIMATION + '</h5>         </div>         <select class="template-select animationSelect"></select>       </div>       <div class="popup-input-wrapper">         <div class="info">           <h5>' + M.IMAGE_DESCRIPTION + '</h5>         </div>         <input type="text" name="imageDescription" />       </div>       <div class="checkbox-wrapper">         <input id="lightbox-check-layer-edit" class="css-checkbox" type="checkbox">         <label for="lightbox-check-layer-edit" class="css-label">' + M.ADD_LINK + '</label>       </div>       <div class="popup-input-wrapper">         <div class="info">           <h5>' + M.LINK + ' <span class="inline"></span></h5>         </div>         <input class="template-select select-like" readonly="readonly" value="' + M.SELECT_PAGE_TITLE + '" />         <input type="hidden" value="_self"  />       </div>     </div>';
                    case "sliderAddVideoLayerMarkup":
                        return '<div class="popup-slider-wrapper">       <div class="input-wrapper">         <div class="info cpanel-tooltipp">           <h5>' + M.VIDEO_SOURCE + '</h5>         </div>         <textarea class="transition-border" style="height: 150px"></textarea>         <span class="example-text">' + M.VIDEO_EXAMPLE + '</span>       </div>       <div class="input-wrapper input-wrapper2">         <div class="info cpanel-tooltipp">           <h5>' + M.ANIMATION_STARTING_POINT + ' <span class="startingPoint"></span></h5>         </div>         <div id="startingPointSlider"></div>       </div>       <div class="input-wrapper input-wrapper2 f-right">         <div class="info cpanel-tooltipp">           <h5>' + M.ANIMATION_SPEED + ' <span class="animationSpeed"></span></h5>         </div>         <div id="animationSpeedSlider"></div>       </div>       <div class="input-wrapper input-wrapper2">         <div class="info">           <h5>' + M.ANIMATION + '</h5>         </div>         <select class="template-select animationSelect"></select>       </div>     </div>';
                    case "sliderLayerImageMarkup":
                        return '<div class="drag-item item" >       <img src="" alt="" />       <div class="widgetNav widget-settings">         <a title="' + M.SLIDER_DELETE_LAYER + '" class="deleteBtn iconBtn"></a>         <a title="' + M.SLIDER_EDIT_SETTINGS + '" class="editBtn iconBtn"></a>         <a title="' + M.SLIDER_MOVE_LAYER_ON_TOP + '" class="moveOnTopBtn iconBtn"></a>       </div>     </div>';
                    case "sliderLayerTextMarkup":
                        return '<div class="drag-item item" >       <div class="layer-text-content note-editor"></div>       <div class="widgetNav widget-settings">         <a title="' + M.SLIDER_DELETE_LAYER + '" class="deleteBtn iconBtn"></a>         <a title="' + M.SLIDER_EDIT_SETTINGS + '" class="editBtn iconBtn"></a>         <a title="' + M.SLIDER_MOVE_LAYER_ON_TOP + '" class="moveOnTopBtn iconBtn"></a>       </div>     </div>';
                    case "sliderLayerVideoMarkup":
                        return '<div class="drag-item item" >       <div class="slider-video-source"></div>       <div class="slider-video-source-cover"></div>       <div class="widgetNav widget-settings">         <a title="' + M.SLIDER_DELETE_LAYER + '" class="deleteBtn iconBtn"></a>         <a title="' + M.SLIDER_EDIT_SETTINGS + '" class="editBtn iconBtn"></a>         <a title="' + M.SLIDER_MOVE_LAYER_ON_TOP + '" class="moveOnTopBtn iconBtn"></a>       </div>     </div>';
                    case "imageWidgetAdminMarkup":
                        return '<div class="popup-newpage-wrapper">       <a id="backgroundSelectImageHolder" class="add-image transition-all">         <span class="add-button transition-all"></span>       </a>       <div class="right-section-pop">         <div class="checkbox-wrapper">           <input id="stretchImage" name="stretch" class="css-checkbox modify" type="checkbox">           <label for="stretchImage" class="css-label">' + M.STRETCH_IMAGE + '</label>         </div>         <div class="checkbox-wrapper">           <input id="lightboxImage" class="css-checkbox modify" type="checkbox">           <label for="lightboxImage" class="css-label">' + M.OPEN_LIGHTBOX + '</label>         </div>         <div class="input-wrapper" id="imageWidgetUrlToggle">           <div class="checkbox-wrapper">             <input id="openUrlOnClick" class="css-checkbox modify" name="openUrl" type="checkbox">             <label for="openUrlOnClick" class="css-label" rel="toggle" data-toggle="#imageOpenUrlToggle">' + M.OPEN_LINK_ON_CLICK + '</label>           </div>           <div class="f20 none-soft" id="imageOpenUrlToggle">             <div class="info">               <h5>' + M.URL + ' <span class="inline"></span></h5>             </div>             <input class="path-select select-like modify" type="text" />             <input type="hidden" value="" />           </div>         </div>         <div class="popup-input-wrapper" >           <h5>' + M.ADD_ANIMATION + '</h5>           <select class="imageAnimation modify" name="animation" id="imageAnimation"></select>         </div>         <div class="popup-input-wrapper" style="display:none;">           <div class="info info-top">             <h5>' + M.IMAGE_CAPTION + '</h5>           </div>           <select class="imageCaption modify" id="imageCaption"></select>         </div>         <div class="popup-input-wrapper">           <div class="info info-top">             <h5>' + M.IMAGE_DESCRIPTION + '</h5>           </div>           <input type="text" class="modify" name="imageDescription" />         </div>       </div>     </div>';
                    case "showPagesDialogMarkup":
                        return '               <div class="full-size flex flex-col">                 <div class="pages-popups-header flex-none">                   <h2 class="col20 f-left t-center roboto font-24">' + M.PAGES_AND_POPUPS + '</h2>                   <div class="button-wrapper t-center">                     <a class="big-button rounded with-icon blue" id="addPageBtnSmall">' + M.ADD_NEW + '</a>                     <div class="flex col20 align-center justify-center need-help-text-wrapper" data-key="addPagePopup"><a class="need-help-text" rel="action" data-action="showHelperVideo" data-target="CPanel">' + M.NEED_HELP + " <span>" + M.PLAY_VIDEO + ' <i class="material-icons"> play_circle_filled </i></span></a></div>                   </div>                 </div>                 <ul class="upper-navigation f-left col20 mb-15 flex-none" data-role="slider-nav">                   <li><a>' + M.PAGES + "</a></li>                   <li><a>" + M.POPUPS + '</a></li>                 </ul>                <div id="websiteMenuWrapper" class="cpanel-popup-slider flex-1 flex flex-row">                   <div class="cpanel-popup-slide overflow" data-role="pages">                     <div class="folder-items-wrapper">                       <div class="content" id="cpanel-pages-popup">                         <ul id="groupsWrapperSmall"></ul>                       </div>                     </div>                  </div>                   <div class="cpanel-popup-slide overflow" data-role="popups">                   </div>                 </div>               </div>';
                    case "noPopupsMessage":
                        return '<div class="no-data-action t-center"><h3>' + M.NO_POPUPS_YET + '</h3><a rel="action" data-action="addPopup" class="middle-button blue f-none">' + M.CREATE_A_POPUP + "</a></div>";
                    case "pageItemsActions":
                        return '<div class="page-buttons-wrapper"><a class="more-settings-btn"><span class="material-icons-outlined page-settings-icon"> settings </span></a></div>';
                    case "pageGroupItemActions":
                        return '<div class="page-buttons-wrapper">                  <a class="settings" data-role="deleteItem"><span class="material-icons-outlined page-settings-icon"> delete_outline </span></a>                  <a class="settings" data-role="settings"><span class="material-icons-outlined page-settings-icon"> settings </span></a>                 </div>';
                    case "settingsSeparatorItem":
                        return '<li class="item separator-item"><span>%value%</span><div class="delete-icon"></div></li>';
                    case "settingsMenuItem":
                        return '<li class="item %itemclass%" data-menuid="%menuid%" data-id="%id%" data-target="%target%" data-link="%link%" title="%link%">                  <span class="with-handle">%name%</span>                  <a class="delete-icon"></a>                   <a class="edit-icon"></a>                 </li>';
                    case "settingsMegaMenuItem":
                        return '<li class="item mega-menu-item">                  <span>%name%</span>                  <a class="delete-icon"></a>                   <a class="edit-icon"></a>                 </li>';
                    case "componentStyleDeclaration":
                        return '<link rel="stylesheet" href="%resources%/styles/%name%.css?%r%" id="%name%Style" type="text/css" disabled />';
                    case "settingsStyleDeclaration":
                        return '<link rel="stylesheet" href="%resources%/styles/settings.css?%r%" id="websiteSettingsStyle" type="text/css" />';
                    case "blogStyleDeclaration":
                        return '<link rel="stylesheet" href="%resources%/styles/blog.css?%r%" id="blogStyle" type="text/css" />';
                    case "defaultBlogDescription":
                        return '<p style="line-height:1.4;color:#666;font-size:14px;">' + M.BLOG_LIST_SUMMARY + "</p>";
                    case "settingsMenuColumnMarkup":
                        return '<li>                  <div class="nav-column-wrapper">                    <ul class="nav-column ui-sortable">                      <li class="item non-sortable-menu-item %highlightedClass%" data-menuid="%menuid%" data-id="%id%" data-target="%target%" data-link="%link%" title="%link%">                        <span class="with-handle">%name%</span>                        <a class="delete-icon"></a>                         <a class="edit-icon"></a>                       </li>                      <li class="fake-item non-sortable-menu-item"><div></div></li>                    </ul>                    <div class="nav-add-page-wrapper"><a class="nav-add-page">' + M.ADD_SUBPAGE_TITLE_LONG + "</a></div>                   </div>                </li>";
                    case "blogListItemMarkup":
                        return '<div class="blog-item transition-bg status%status% %scheduled%">       <div class="checkbox-wrapper f-left">         <input id="blogItem%id%" class="css-checkbox" value="%id%" name="post%id%" type="checkbox">           <label for="blogItem%id%" class="css-label"></label>         </div>         <header>           <a class="transition-bg"><h4>%title%</h4></a>           <div>             <span class="blog-comments-count">%comments%</span>             <span class="blog-not-approved-comments-count">%pending% ' + M.NOT_APPROVED + '</span>           </div>         </header>       <span class="author">%author%</span>       <div class="options">         <a rel="action" data-action="previewBlogPost" data-url="%pageUrl%" class="view gray transition-bg"></a>         <a rel="action" data-action="cloneBlogPost" data-id="%id%" class="clone gray transition-bg button-tooltip" data-tooltip="duplicate" data-top="true"></a>       </div>       <span class="date">%date%</span>       </div>';
                    case "blogCommentMarkup":
                        return '<div data-id="%id%" class="blog-comment blog-status-approved%approved%">       <div class="comment-body">         <span> <label>' + M.FROM_SENDER + '</label> <h5 clsas="comment-name">%username%</h5> </span> <br />        <span> <label>' + M.EMAIL + '</label> <span class="comment-email">%email%</span> </span> <br />        <span style="margin-top:10px;"> <label>' + M.COMMENT + '</label> <span class="comment-content">%comment%</span> </span> <br />        <span> <label>' + M.DATE + '</label> <span class="comment-time">%time%</span> </span> <br />      </div>       <div class="comment-actions">         <a class="blue middle-button approve" title="' + M.APPROVE_COMMENT + '">' + M.APPROVE + '</a>        <a class="gray middle-button delete" style="margin-left:4px;" title="' + M.DELETE_COMMENT + '">' + M.DELETE + "</a>      </div>     </div>";
                    case "blogItemDefaultContentMarkup":
                        return '<div class="grid-row stretched-tablet stretched-mobile" data-type="Container">         <div class="grid-content grid-row-empty">           <div class="grid-column">             <div class="widget-row">               <div class="widget widgetResponsive textWidget col20" data-type="TextWidget" style="margin-left: 0%;">                 <div class="text-widget-content"><p style="color: #888; line-height: 1.6; font-size: 15px;">' + M.BLOG_DEFAULT_CONTENT + "</p></div>               </div>             </div>           </div>         </div>       </div>";
                    case "storeProductDefaultContentMarkup":
                        return '<div class="grid-row grid-row-fullwidth stretched-tablet stretched-mobile" data-type="Container">         <div class="grid-content">           <div class="grid-column">             <div class="widget-row">               <div class="widget widgetResponsive textWidget col20" data-type="TextWidget" style="margin-left: 0%;">                 <div class="data-object" data-object=\'{"col":"col20","top":"5%","left":"0%","width":"800px","clear":"none","type":"TextWidget","content":"<p style="color: #888; line-height: 1.6; font-size: 15px;">' + M.LOREM_IPSUM + " " + M.LOREM_IPSUM + '</p>","height":"163px"}\'></div>                 <div class="text-widget-content"><p style="color: #888; line-height: 1.6; font-size: 15px;">' + M.LOREM_IPSUM + " " + M.LOREM_IPSUM + "</p></div>               </div>             </div>           </div>         </div>       </div>";
                    case "blogItemMarkup":
                        return '<div class="sections-wrapper blog-sections-wrapper">       <div class="inner-wrapper clearfix">' + (Website.textAssistEnabled ? '<div class="col20 f-left">          <a class="ai-help-btn f-right system-bg-color rounded-effect mb-5" data-role="text-assist">' + Templates.get("aiIcon") + "</a>        </div>" : "") + '        <input type="text" id="blogTitle" class="transition-all websiteOption" placeholder="' + M.BLOG_POST_TITLE + '" value="%title%">        <h3 class="blog-title-label">' + M.SUMMARY + '</h3>         <div id="blogDescriptionWrapper" class="description-text-content-wrapper">           <textarea id="blogDescription" class="transition-all full-size">%description%</textarea>         </div>         <div class="relativeLeftWrapper">           <div class="blog-content-area">%content%</div>         </div>       </div>     </div>';
                    case "blogItemCommentsMarkup":
                        return '<div class="blog-comments-admin">       <div class="blog-comments-area"><span class="empty-message">' + M.NO_COMMENTS + "</span></div>    </div>";
                    case "blogTagMarkup":
                        return '<li class="item"><span></span><div class="delete-icon"></div></li>';
                    case "blogTagInput":
                        return '<div class="tag-submit-wrapper"><input type="text" class="tag-autocomplete" /><a class="plus-sign"></a></div>';
                    case "selectImageMarkup":
                        return '<a class="add-image transition-all"><span class="add-button"></span></a>';
                    case "selectImageMarkup2":
                        return '<a class="add-image transition-all"><span class="close-button2"></span></a>';
                    case "trashButtonMarkup":
                        return '<span class="close-button2"></span>';
                    case "scrollbarMarkup":
                        return '<div class="scrollbar"><div class="track"><div class="thumb"><div class="end"></div></div></div></div>';
                    case "blogSettingsMarkup":
                        return '<div class="popup-newpage-wrapper">       <div class="section-right section-right2" style="margin-right:4%;">         <div class="blog-option1"></div>         <div class="info info-top">           <h5>' + M.LAYOUT + '</h5>         </div>        <select class="page-select">          <option value="0">' + M.BLOG_WITH_SIDEBAR + '</option>           <option value="1">' + M.LARGE_IMAGE_NO_SIDEBAR + '</option>           <option value="2">' + M.MEDIUM_IMAGE_WITH_SIDEBAR + '</option>           <option value="5">' + M.MEDIUM_IMAGE_NO_SIDEBAR + '</option>           <option value="3">' + M.MASONRY_WITH_SIDEBAR + '</option>           <option value="4">' + M.MASONRY_NO_SIDEBAR + '</option>         </select>      </div>       <div class="section-right section-right2">         <div class="blog-option2"></div>         <div class="info info-top">           <h5>' + M.NAVIGATION + '</h5>         </div>         <select class="page-select">           <option value="0">' + M.PAGINATION + '</option>           <option value="1">' + M.LOAD_MORE_BUTTON + '</option>         </select>       </div>       <div class="checkbox-wrapper">         <input id="settings-add-share" class="css-checkbox modify" type="checkbox">         <label for="settings-add-share" class="css-label">' + M.ADD_SHARE_BUTTONS + '</label>       </div>       <div class="blog-share-settings">         <div class="checkbox-wrapper">           <input id="settings-fb-share" class="css-checkbox modify" type="checkbox">           <label for="settings-fb-share" class="css-label">Facebook</label>         </div>         <div class="checkbox-wrapper none">           <input id="settings-gp-share" class="css-checkbox modify" type="checkbox">           <label for="settings-gp-share" class="css-label">Google+</label>         </div>         <div class="checkbox-wrapper">           <input id="settings-tw-share" class="css-checkbox modify" type="checkbox">           <label for="settings-tw-share" class="css-label">X (Twitter)</label>         </div>         <div class="checkbox-wrapper">           <input id="settings-ln-share" class="css-checkbox modify" type="checkbox">           <label for="settings-ln-share" class="css-label">LinkedIn</label>         </div>       </div>       <div class="checkbox-wrapper mt-15">         <input id="disqusEnabled" class="css-checkbox" type="checkbox">         <label for="disqusEnabled" class="css-label">' + M.ENABLE_DISQUS_COMMENTS + '</label>       </div>       <div class="col20 f-left none-soft" id="disqusIdWrapper">         <div class="input-wrapper mt-15">           <div class="info">            <h5>' + M.ENTER_DISQUS_SHORTNAME + '</h5>          </div>          <input type="text" name="disqusId" class="transition-border">         </div>      </div>       <div class="checkbox-wrapper mt-15">         <input id="sendNotificationEmail" class="css-checkbox" type="checkbox">         <label for="sendNotificationEmail" class="css-label">' + M.BLOG_NEW_COMMENT_NOTIF + '</label>       </div>       <div class="col20 f-left none-soft" id="notificateionEmailsWrapper">         <div class="input-wrapper mt-15">           <div class="info">            <h5>' + M.BLOG_NEW_COMMENT_NOTIF_DESC + '</h5>          </div>          <input type="text" name="notificationEmails" class="transition-border">         </div>      </div>     </div>';
                    case "portfolioAddMarkup":
                        return '<div class="popup-newpage-wrapper">       <div class="half-wrapper">         <div class="modal-nav portfolioThumb layout-buttons-wrapper">           <ul>             <li><a class="button modify">' + M.IMAGE + '</a></li>             <li><a class="button modify">' + M.GALLERY + '</a></li>             <li><a class="button modify">' + M.VIDEO + '</a></li>           </ul>         </div>         <div class="add-image-wrapper">           <a class="add-image">             <span class="add-button"> </span>           </a>         </div>         <div class="add-image-wrapper gallery">           <a class="add-image"></a>         </div>         <div class="add-image-wrapper video">           <h5>' + M.VIDEO_SOURCE + '</h5>           <textarea class="transition-border"></textarea>           <span>' + M.VIDEO_EXAMPLE + '</span>         </div>         <div class="button-wrapper"><a class="big-blue-btn" id="portfolioAddCategories" title="' + M.CATEGORIES + '">' + M.CATEGORIES + '</a></div>         <div class="button-wrapper"><a class="middle-button none" id="portfolioPageSettingsBtn" title="' + M.PAGE_SETTINGS + '">' + M.PAGE_SETTINGS + '</a></div>       </div>       <div class="half-wrapper">         <div class="section-right">           <div class="info info-top">             <h5>' + M.TITLE + '</h5>           </div>           <input type="text" name="portfolioTitle" class="focus transition-border" />         </div>         <div class="info info-top" style="margin-top: 15px;">           <h5>' + M.DESCRIPTION + '</h5>         </div>         <div class="section-right" style="overflow: visible">           <div class="description-text-content-wrapper">             <div class="description-text-content"></div>           </div>         </div>         <div class="checkbox-wrapper" id="portfolio-item-title-descr">           <input id="portfolioItemShowDescription" class="css-checkbox modify" type="checkbox">           <label for="portfolioItemShowDescription" class="css-label">' + M.SHOW_TITLE_DESCRIPTION + '</label>         </div>         <div style="float:left;">          <div class="checkbox-wrapper">             <input id="portfolioItemShowInLightbox" class="css-checkbox modify" type="checkbox">             <label for="portfolioItemShowInLightbox" class="css-label">' + M.SHOW_IN_LIGHTBOX + '</label>           </div>           <div class="checkbox-wrapper">             <input id="portfolioItemShowInPopup" class="css-checkbox modify" type="checkbox">             <label for="portfolioItemShowInPopup" class="css-label">' + M.SHOW_DESCRIPTION + '</label>           </div>           <div class="checkbox-wrapper">             <input id="portfolioItemShowInPage" class="css-checkbox modify" type="checkbox">             <label for="portfolioItemShowInPage" class="css-label">' + M.ADD_DEDICATED_PAGE + "</label>           </div>         </div>       </div>     </div>";
                    case "galleryFilesMarkup":
                        return '<div class="popup-gallery-pick-files">       <div class="add-image-wrapper"></div>     </div>';
                    case "multipleItemsSelectDlg":
                        return '<div class="popup-newpage-wrapper popup-not-padded-wrapper">       <span class="help-text no-margin-top %messageClass%">%message%<br /></span>       <span class="help-text no-margin-top no-items-message">%noitemsmessage%<br /></span>       <div class="info margin-top add-new-items none">         <input type="text" name="newPortfolioCategory" class="focus transition-border">         <a class="plus-sign add-category transition-bg"></a>       </div>     </div>';
                    case "portfolioCategoryTemplate":
                        return '<div class="checkbox-wrapper">       <input id="stretchImage%id%" class="css-checkbox modify" type="checkbox" %checked%>       <label for="stretchImage%id%" class="css-label"></label>     </div>';
                    case "portfolioCategoryTemplateRadio":
                        return '<div class="checkbox-wrapper">       <input id="stretchImage%id%" class="css-checkbox modify" type="radio" %checked% name="portfolioCategoryTemplateRadio">       <label for="stretchImage%id%" class="css-label"></label>     </div>';
                    case "portfolioPageSettingsTemplate":
                        return '<div class="popup-newpage-wrapper">       <div class="popup-input-wrapper" style="margin-bottom: 40px;">         <h5>' + M.PAGE_URL + '</h5>         <div class="page-url-text" style="width: 50px">/</div>         <input type="text" name="pageUrl" style="width: calc(100% - 50px) !important" class="focus page-url-field transition-border">       </div>       <div class="input-wrapper">         <div class="info info2">           <h5>' + M.SEO + "</h5>           <span>" + M.SEO_INFORMATION + '</span>         </div>         <textarea placeholder="' + M.META_KEYWORDS + '" name="keywords" class="none-soft"></textarea>         <textarea style="margin-top:15px;" placeholder="' + M.META_DESCRIPTION + '" name="description"></textarea>       </div>';
                    case "portfolioItemTemplate":
                        return '<div class="file2 portfolio-item status2">       <div class="big-thumb"       style="background: url(%thumb%) 50% 50% no-repeat;"></div>       <div class="draft-badge"></div>       <div class="content">         <h4>%title%</h4>         <div class="options">           <a class="duplicate button-tooltip" data-tooltip="duplicatePortfolioItem" data-top="true"></a>           <a class="delete button-tooltip" data-tooltip="deletePortfolioItem" data-top="true"></a>           <a class="edit button-tooltip" data-tooltip="editPortfolioItem" data-top="true"></a>           <a rel="tab" class="edit-page">' + M.EDIT_PAGE_TITLE + "</a>         </div>       </div>     </div>";
                    case "portfolioItemMenuTemplate":
                        return '<li><a href="javascript: void( 0)" class="button modify %class%"><span>%category%</span> (%count%)</a></li>';
                    case "portfolioSettingsMarkup":
                        return '<div class="popup-newpage-wrapper">         <div class="info">           <h5>' + M.LAYOUT + '</h5>         </div>        <div class="portfolio-list-option"></div>         <div class="row">          <div class="section-right3">            <select class="portfolio-list-type">              <option value="1">' + M.LIST + '</option>               <option value="2">' + M.COLUMNS2 + '</option>               <option value="3">' + M.COLUMNS3 + '</option>               <option value="4">' + M.COLUMNS4 + '</option>               <option value="5">' + M.COLUMNS5 + '</option>               <option value="0">' + M.MASONRY + '</option>             </select>          </div>          <div class="section-right3">            <select class="portfolio-spacing-type">              <option value="0">' + M.WITH_SPACING + '</option>               <option value="1">' + M.NO_SPACING + '</option>             </select>          </div>          <div class="section-right3">            <select class="portfolio-box-type">              <option value="0">' + M.BOXED + '</option>               <option value="1">' + M.FULL_WIDTH + "</option>             </select>          </div>        </div>      </div>";
                    case "pickIconDialogMarkup":
                        return '<div data-placement="inline" class="icp"></div>';
                    case "mapsAdminMarkup":
                        return '<div class="popup-newpage-wrapper">       <div class="input-wrapper input-wrapper2">         <div class="info">          <h5>' + M.LOCATION + '</h5>        </div>        <input type="text" id="mapAddress" name="val" value="" class="transition-border modify">       </div>      <div class="input-wrapper input-wrapper2 f-right">         <div class="info">          <h5>' + M.MAP_TYPE + '</h5>        </div>        <select class="button-size-select modify">          <option value="roadmap">' + M.ROADMAP + '</option>          <option value="satellite">' + M.SATELITE + '</option>        </select>      </div>      <div class="input-wrapper">         <div class="info">           <label for="mapZoomLevel">' + M.MAP_WIDGET_ZOOM + '</label>          <input type="text" id="mapZoomLevel" readonly="readonly" class="modify none">         </div>         <div id="mapZoomLevelSlider" style="width: 97%; margin-left: 1%"></div>      </div>       <iframe width="100%" height="450" frameborder="0" style="border: 0; background: #fff url(' + resources + '/images/image-avatar.png) no-repeat center center"></iframe>     </div>';
                    case "websiteSettingsNavigationEditMarkup":
                        return '<div class="settings-nav-wrapper col20">                  <div class="header-settings-title padded">                     <h4>' + M.NAVIGATION_MENU + '</h4>                     <a class="back"><i class="fa fa-angle-left"></i></a>                   </div>                   <div class="col20 f-left padded dynamic-height-content">                     <div class="info none" style="margin-bottom:15px;">                      <span>' + M.NAV_LINKS_POSITION + '</span>                    </div>                    <ul class="nav-arrange"></ul>                    <a id="nav-add-page">' + M.ADD_PAGE_TITLE_LONG + '</a>                    <div class="extra-settings none">                       <div class="checkbox-wrapper">                        <input id="navCart" class="css-checkbox modify" type="checkbox" name="navCart" />                        <label for="navCart" class="css-label" >' + M.CART_NAVIGATION + '</label>                        <a href="" class="settings-btn"></a>                       </div>                      <div class="checkbox-wrapper">                        <input id="navMember" class="css-checkbox modify" type="checkbox" name="navMember" />                        <label for="navMember" class="css-label" >' + M.MEMBER_NAVIGATION + '</label>                        <a href="" class="settings-btn"></a>                       </div>                    </div>                   </div>                 </div>';
                    case "websiteSettingsdHeaderMarkup":
                        return '<div class="settings-nav-wrapper col20">                  <div class="header-settings-title padded">                    <h4></h4>                    <a class="back"><i class="fa fa-angle-left"></i></a>                  </div>                   <div class="col20 f-left padded dynamic-height-content">                     <div id="headerPropertiesWrapper">                       <a class="settings-edit-btn logo-settings-pop">' + M.CHANGE_LOGO_BTN + '                        <div class="edit"></div>                      </a>                      <a class="settings-edit-btn styling-settings-pop">' + M.STYLING_BTN + '                        <div class="edit"></div>                      </a>                      <div id="layoutWithFixedHeader" class="col20 f-left none-soft">                         <div class="col20 f-left" id="floatingHeaderSettingsWrapper">                           <div class="f-left">                            <div class="checkbox-wrapper">                              <input id="extendedHeader" class="css-checkbox modify" type="checkbox" name="extendedHeader" />                              <label for="extendedHeader" class="css-label" >' + M.EXTEND_HEADER_TITLE + '</label>                            </div>                          </div>                          <div class="f-left">                            <div class="checkbox-wrapper">                              <input id="absoluteHeader" class="css-checkbox modify" type="checkbox" name="absoluteHeader" />                              <label for="absoluteHeader" class="css-label" >' + M.HEADER_OVER_CONTENT_TITLE + '</label>                            </div>                          </div>                        </div>                         <div class="col20 f-left" id="headerPaddingWrapper">                           <div class="f-left col20">                             <div class="info">                               <h5 class="ta-left">' + M.HEADER_PADDING_TOP + '<span class="headerMarginSlider slider-val f-right"></span></h5>                             </div>                             <div id="headerMarginSlider"></div>                           </div>                         </div>                         <div class="col20 f-left" id="fixedHeaderWrapper">                          <div class="f-left">                            <div class="checkbox-wrapper">                              <input id="applyFixedHeader" class="css-checkbox modify" type="checkbox" name="applyFixedHeader" />                              <label for="applyFixedHeader" class="css-label" >' + M.USE_FIXED_HEADER + '</label>                            </div>                          </div>                          <a class="fixed-header-settings settings-edit-btn none-soft" style="margin-top:10px;">' + M.FIXED_HEADER_SETTINGS_BTN + '                        <i class="fa fa-angle-right"></i>                          </a>                        </div>                       </div>                       <div id="layoutWithSideHeader" class="col20 f-left none-soft" style="margin-top:10px;">                         <h5>' + M.MENU_POSITION_TITLE + '</h5>                         <div class="f-left col20" style="margin-top:10px;">                          <div class="checkbox-wrapper">                            <input id="sideMenuAtLeft" class="css-checkbox modify" type="radio" name="side-menu-position" value="left" />                            <label for="sideMenuAtLeft" class="css-label">' + M.MENU_POSITION_AT_LEFT + '</label>                          </div>                        </div>                        <div class="f-left col20">                          <div class="checkbox-wrapper">                            <input id="sideMenuAtRight" class="css-checkbox modify" type="radio" name="side-menu-position" value="right" />                            <label for="sideMenuAtRight" class="css-label">' + M.MENU_POSITION_AT_RIGHT + '</label>                          </div>                        </div>                      </div>                     </div>                     <div class="header-options">                      <h5>' + M.HEADER_LAYOUT_TITLE + '</h5>                      <label class="image-checkable">                        <input type="radio" name="headerLayout" value="header-1">                        <span><img src="' + resources + '/images/header-layouts/h1.jpg"></span>                      </label>                      <label class="image-checkable">                        <input type="radio" name="headerLayout" value="header-2">                        <span><img src="' + resources + '/images/header-layouts/h2.jpg"></span>                      </label>                      <label class="image-checkable">                        <input type="radio" name="headerLayout" value="header-3">                        <span><img src="' + resources + '/images/header-layouts/h3.jpg"></span>                      </label>                      <label class="image-checkable">                        <input type="radio" name="headerLayout" value="header-4">                        <span><img src="' + resources + '/images/header-layouts/h4.jpg"></span>                      </label>                      <label class="image-checkable">                        <input type="radio" name="headerLayout" value="header-5">                        <span><img src="' + resources + '/images/header-layouts/h5.jpg"></span>                      </label>                      <label class="image-checkable">                        <input type="radio" name="headerLayout" value="header-6">                        <span><img src="' + resources + '/images/header-layouts/h6.jpg"></span>                      </label>                      <label class="image-checkable">                        <input type="radio" name="headerLayout" value="header-7">                        <span><img src="' + resources + '/images/header-layouts/h7.jpg"></span>                      </label>                      <label class="image-checkable">                        <input type="radio" name="headerLayout" value="header-8">                        <span><img src="' + resources + '/images/header-layouts/h8.jpg"></span>                      </label>                      <label class="image-checkable">                        <input type="radio" name="headerLayout" value="header-9">                        <span><img src="' + resources + '/images/header-layouts/h9.jpg"></span>                      </label>                      <label class="image-checkable">                        <input type="radio" name="headerLayout" value="header-10">                        <span><img src="' + resources + '/images/header-layouts/h10.jpg"></span>                      </label>                      <label class="image-checkable">                        <input type="radio" name="headerLayout" value="header-11">                        <span><img src="' + resources + '/images/header-layouts/h11.jpg"></span>                      </label>                      <label class="col10 image-checkable">                        <input type="radio" name="headerLayout" value="header-side-1">                        <span><img src="' + resources + '/images/header-layouts/h-side.jpg"></span>                      </label>                      <label class="col10 image-checkable" style="margin-left: 4%">                        <input type="radio" name="headerLayout" value="header-side-1a">                        <span><img src="' + resources + '/images/header-layouts/h-side2.jpg"></span>                      </label>                      <label class="image-checkable">                        <input type="radio" name="headerLayout" value="header-none">                        <span class="no-header-text">' + M.NO_HEADER + "</span>                      </label>                    </div>                  </div>                 </div>";
                    case "websiteSettingsdFixedHeaderMarkup":
                        return '<div class="settings-nav-wrapper col20">                  <div class="header-settings-title padded">                    <h4>' + M.FIXED_HEADER + '</h4>                    <a class="back"><i class="fa fa-angle-left"></i></a>                  </div>                   <div class="col20 f-left padded dynamic-height-content">                     <a class="settings-edit-btn logo-settings-pop none">' + M.CHANGE_LOGO_BTN + '                      <div class="edit"></div>                    </a>                    <a class="settings-edit-btn styling-settings-pop">' + M.STYLING_BTN + '                      <div class="edit"></div>                    </a>                  </div>                 </div>';
                    case "emptyGridBlockRowMarkup":
                        return '      <div class="grid-content grid-row-empty">         <div class="grid-column">           <div class="widget-row"></div>         </div>     </div>';
                    case "emptyGridRowMarkup":
                        return '<div class="grid-row stretched-tablet stretched-mobile" data-type="Container" style="padding-top: 3%; padding-bottom: 3%;">' + Templates.get("emptyGridBlockRowMarkup") + "</div>";
                    case "selectFontDialogMarkup":
                        return '<div class="popup-newpage-wrapper">       <div class="layout-buttons-wrapper modal-nav">         <ul class="sort-buttons-wrapper">           <li><a class="sort-btn sort-popular" title="' + M.SORT_BY_POPULARITY + '">' + M.MOST_POPULAR + '</a></li>           <li><a class="sort-btn sort-alpha" title="' + M.SORT_ALPHABETICALLY + '">' + M.ALPHABETICAL + '</a></li>         </ul>       </div>       <iframe name="font-select-frame" src="%src%"></iframe>       <a class="gogole-fonts-icon" href="https://www.google.com/fonts" target="_blank" title="Powered by Google Fonts"></a>     </div>';
                    case "contributorMarkup":
                        return '         <div class="col20 f-left funnel-inner-wrapper admin-view" data-type="%type%" data-id="%id%" data-status="%status%">           <div class="col20 f-left funnels-wrapper vertical-flex flex-col">             <div rel="toggle" data-toggle="#contributor%id%" class="col20 f-left flex flex-row align-center">               <div class="admin-row flex-1">                 <h4 class="col20 f-left">%name%</h4>                 <span class="col20 f-left mt-10">%email%</span>                 <span class="col20 f-left mt-10 lightBlue">%accountType%%statusText%</span>               </div>               <div class="admin-row flex-none">                 <a rel="action" data-action="showAdminActions" class="icon actions"></a>               </div>             </div>             <div class="permissions-wrapper f-left col20 mt-25 none-soft" id="contributor%id%">               <div class="permissions-wrapper">%permissionsTree%</div>               <div class="f-left col20 ta-center mt-25">                 <a rel="action" class="middle-button blue transition-bg" data-action="updateContributorPermissions" class="blue admin-button center-button">' + M.UPDATE_PERMISSIONS + "</a>               </div>             </div>           </div>         </div>";
                    case "contributorMarkupOld":
                        return '<div class="subscribtion-item transition-bg contributor-item" data-id="%id%" data-status="%status%">         <div rel="toggle" data-toggle="#contributor%id%" class="top-part">           <header>             <div class="title">               <h4 class="name">%name%</h4>               <h4>%email%</h4>               <h4 class="lightBlue">%statusText%</h4>               <h4 class="account-type lightBlue">%accountType%</h4>             </div>             <a class="icon expand"></a>             <a rel="action" data-action="removeContributor" class="delete-icon"></a>           </header>         </div>         <div class="message-content access-permissions-wrapper" style="display: none" id="contributor%id%">           <section>             <h4 style="margin-bottom:30px;">' + M.ACCESS_PERMISSIONS + '</h4>             <div class="permissions-wrapper">%permissionsTree%</div>             <div class="buttons-wrapper">               <a rel="action" class="middle-button blue transition-bg" data-action="updateContributorPermissions">' + M.UPDATE_PERMISSIONS + "</a>             </div>           </section>         </div>       </div>";
                    case "contributorPermisionGroupMarkup":
                        return '<div class="permission-group">       <span>%label%</span>       <div class="children-wrapper">%permissions%</div>     </div>';
                    case "contributorPermissionMarkup":
                        return '<div class="checkbox-wrapper f-left">       <input type="checkbox" class="css-checkbox" id="permission%id%_%perm%" value="%perm%" name="permission%id%_%perm%" %readonly% %checked% />       <label for="permission%id%_%perm%" class="css-label">%label%</label>     </div>';
                    case "themePreviewMarkup":
                        return '<div class="overlay-content theme-preview">         <div class="button-wrapper">           <a href="javascript:;" class="main-action-btn middle-button blue">' + M.USE_THIS_THEME + '</a>           <div class="theme-preview-viewport-buttons">             <ul>               <li>                 <a href="javascript:;" class="viewport-item button-tooltip active" data-size="desktop" data-tooltip="desktopView" data-bottom="true" title=""><img src="' + resources + '/images/small-icons/desktop-white.png"></a>               </li>               <li>                 <a href="javascript:;" class="viewport-item button-tooltip" data-size="tablet" data-tooltip="tabletView" data-bottom="true" title=""><img src="' + resources + '/images/small-icons/tablet-white.png"></a>               </li>               <li>                 <a href="javascript:;" class="viewport-item button-tooltip" data-size="mobile" data-tooltip="phoneView" data-bottom="true" title=""><img src="' + resources + '/images/small-icons/phone-white.png"></a>               </li>             </ul>           </div>         </div>         <div class="iframe-content desktop-preview">           <iframe name="previewIframe" src="javascript:;" allowfullscreen></iframe>         </div>       </div>';
                    case "formAdminMarkup":
                        return '<div class="modal-nav layout-buttons-wrapper">         <ul>           <li><a href="javascript:;">' + M.FORM + '</a></li>           <li><a href="javascript:;">' + M.SETTINGS + '</a></li>         </ul>       </div>       <div class="cpanel-popup-slider popup-style-2">         <div class="cpanel-popup-slide">           <div class="content padded-content">             <div class="input-wrapper input-wrapper2">               <div class="info" style="width:100%;">                 <h5>' + M.FORM_NAME + "</h5>                 <span>" + M.FORM_MESSAGE_DASHBOARD + '</span>               </div>               <input type="text" name="formName" class="transition-background modify" value="">             </div>             <div class="help-text-wrapper">               <span class="help-text" style="margin-bottom:20px;">' + M.EDIT_YOUR_FORM_BELOW + '</span>             </div>             <div class="form-wrapper"></div>             <a class="square-add" title="' + M.ADD_FIELD + '"></a>           </div>         </div>         <div class="cpanel-popup-slide">           <div class="content padded-content">             <div class="info" style="margin-top:0;">               <h5>' + M.SEND_NOTIFICATION_TO + '</h5>             </div>             <div class="input-wrapper">               <input type="text" name="sendTo" class="transition-border" placeholder="' + M.EMAIL + '">             </div>             <div class="input-wrapper">               <div class="info" style="width: 100%; margin-top: 5px">                 <h5>' + M.THEME + "</h5>                 <span>" + M.IT_WILL_CHANGE + '</span>               </div>               <select class="button-size-select modify" name="formTheme" style="width: 100%">                 <option value="dark">' + M.LIGHT + '</option>                 <option value="light">' + M.DARK + '</option>               </select>             </div>             <div class="input-wrapper input-wrapper2">               <div class="info" style="margin-top:0;">                 <h5>' + M.BUTTON_TEXT + '</h5>               </div>               <input type="text" name="buttonText" class="transition-border modify" />             </div>             <div class="input-wrapper input-wrapper2 f-right">               <div class="info">                 <h5>' + M.BUTTON_ALIGNMENT + '</h5>               </div>               <select class="button-size-select modify" name="buttonPosition">                 <option value="left" selected="selected">' + M.LEFT + '</option>                 <option value="center">' + M.CENTER + '</option>                 <option value="right">' + M.RIGHT + '</option>               </select>             </div>             <div class="input-wrapper input-wrapper2 input-wrapper-margin color-pick-wrap-widgets">               <div class="color-pick-wrap">                 <div style="background-color: rgb(51, 51, 51);"></div>                 <input type="text" value="" class="colorpicker-selected modify" name="buttonColor" />               </div>               <div class="info">                 <h5>' + M.BUTTON_COLOR + '</h5>               </div>             </div>             <div class="input-wrapper input-wrapper2 f-right color-pick-wrap-widgets" style="margin-bottom:10px;">               <div class="color-pick-wrap">                 <div style="background-color: rgb(255, 255, 255);"></div>                 <input type="text" value="" class="colorpicker-selected modify" name="buttonTextColor" />               </div>               <div class="info">                 <h5>' + M.BUTTON_TEXT_COLOR + '</h5>               </div>             </div>             <div class="input-wrapper">               <div class="info" style="width: 100%; margin-top: 5px">                 <h5>' + M.ACTION_ON_SUBMIT + "</h5>                 <span>" + M.WHAT_TO_SHOW + '</span>               </div>               <select class="button-size-select modify" name="successType" style="width: 100%">                 <option value="message">' + M.SHOW_THANK_YOU_MESSAGE + '</option>                 <option value="page">' + M.GO_TO_PAGE + '</option>               </select>             </div>             <div class="none-soft input-wrapper input-wrapper2" id="form-widget-message">               <div class="info" style="margin-top:0;">                 <h5>' + M.THANK_YOU_MESSAGE + '</h5>               </div>               <textarea name="thankYouMessage" class="transition-border modify"></textarea>             </div>             <div class="f20 none-soft" id="form-widget-goto">               <div class="info">                 <h5>' + M.THANK_YOU_PAGE + '</h5>               </div>               <input class="path-select select-like modify" type="text" style="width: 100%" />             </div>           </div>         </div>       </div>';
                    case "formAdminField":
                        return '<div class="field %class%">       <span class="move-icon button-tooltip" data-tooltip="simpleMove"></span>       <input type="text" name="fieldName" tabindex="1" class="label-field modify" value="%name%" placeholder="%placeholder%" %readonly% />       <div class="buttons-wrapper flex-none">         <a data-tooltip="simpleEdit" class="edit light-gray-icon modify button-tooltip circle-effect"><i class="material-icons-outlined">settings</i></a>         <a data-tooltip="simpleResize" class="resize resize-icon light-gray-icon modify button-tooltip circle-effect"><i class="material-icons-outlined">unfold_less</i></a>         <a data-tooltip="simpleDelete" class="delete delete-icon light-gray-icon modify button-tooltip mr-10 circle-effect"><i class="material-icons-outlined">delete</i></a>       </div>     </div>';
                    case "editFormMarkup":
                        return '<div class="popup-widget-wrapper">       <div class="popup-input-wrapper" id="fieldDescription">         <div class="info">           <h5>' + M.DESCRIPTION + "</h5>           <span>" + M.SHORT_DESCRIPTION_FOR + '</span>         </div>         <div class="small-text-area rich-text-area f-left col20 mt-15">          <textarea data-name="description"></textarea>         </div>       </div>       <div class="popup-input-wrapper none" id="fieldValue">         <div class="info">           <h5>' + M.FORM_VALUE_TITLE + "</h5>           <span>" + M.FORM_VALUE_DESCRIPTION + '</span>         </div>         <textarea name="fieldValue"></textarea>       </div>       <div class="popup-input-wrapper" id="fieldType" style="display: none">         <div class="info">           <h5>' + M.FIELD_TYPE + "</h5>           <span>" + M.YOU_CAN_SELECT + '</span>         </div>         <select name="fieldtype">          <option value="text">' + M.ANY_TEXT + '</option>           <option value="email">' + M.EMAIL_ONLY + '</option>           <option value="number">' + M.NUMBER_ONLY + '</option>         </select>       </div>       <div class="popup-input-wrapper" id="fieldPlaceholder" style="display: none">         <div class="info">           <h5>' + M.PLACEHOLDER + "</h5>           <span>" + M.PLACEHOLDER_TEXT + '</span>         </div>         <input type="text" name="placeholder" class="transition-border">       </div>       <div class="col20 f-left none-soft" id="fieldRange">        <div class="popup-input-wrapper mt-15 col9">          <h5>' + M.RANGE_FROM + '</h5>          <input type="number" name="rangeFrom" />        </div>        <div class="popup-input-wrapper mt-15 col9 f-right">          <h5>' + M.RANGE_TO + '</h5>          <input type="number" name="rangeTo" />        </div>        <div class="popup-input-wrapper mt-15 col9">          <h5>' + M.RANGE_FROM_LBL + '</h5>          <input type="text" name="rangeFromLabel" />        </div>        <div class="popup-input-wrapper mt-15 col9 f-right">          <h5>' + M.RANGE_TO_LBL + '</h5>          <input type="text" name="rangeToLabel" />        </div>         <div class="popup-input-wrapper">             <div class="info">               <h5>' + M.RANGE_LAYOUT + "</h5>               <span>" + M.RANGE_LAYOUT_DESC + '</span>             </div>             <select name="rangeStyle">              <option value="style-1">' + M.BOXED + '</option>               <option value="style-2">' + M.UNDERLINED + '</option>             </select>           </div>       </div>      <div class="popup-input-wrapper none" id="selectType">         <div class="info">           <h5>' + M.FIELD_STYLE + "</h5>           <span>" + M.FIELD_STYLE_DESC + '</span>         </div>         <select name="style">          <option value="complex">' + M.FIELD_STYLE_BOX + '</option>           <option value="simple">' + M.FIELD_STYLE_SIMPLE + '</option>         </select>         <div class="col20 f-left none-soft" data-role="tile-styles">          <div class="info">             <h5>' + M.OPTION_BOX_LAYOUT + "</h5>             <span>" + M.OPTION_BOX_LAYOUT_DESC + '</span>           </div>           <select name="layout">            <option value="left">' + M.OPTION_BOX_AT_LEFT + '</option>             <option value="top">' + M.OPTION_BOX_STACKED + '</option>             <option value="icon">' + M.OPTION_BOX_WITH_ICON + '</option>           </select>           <div class="popup-input-wrapper none-soft" id="optionImageWrapper">             <div class="info">               <h5>' + M.OPTION_IMAGE_STYLE + "</h5>               <span>" + M.OPTION_IMAGE_STYLE_DESC + '</span>             </div>             <select name="imageStyle">              <option value="circle">' + M.OPTION_IMAGE_STYLE_CIRCLE + '</option>               <option value="square">' + M.OPTION_IMAGE_STYLE_SQUARE + '</option>               <option value="raw">' + M.OPTION_IMAGE_STYLE_PRESERVE + '</option>             </select>             <div class="checkbox-wrapper">               <input id="tileCheckbox" class="css-checkbox" name="tileCheckbox" type="checkbox" />               <label for="tileCheckbox" class="css-label">' + M.OPTION_SHOW_CHECKBOX + '</label>             </div>           </div>          <div class="info">            <h5>' + M.OPTIONS_PER_ROW + "</h5>             <span>" + M.OPTIONS_PER_ROW_DESC + '</span>           </div>           <select name="optionsPerRow">            <option value="split-1">1 ' + M.OPTION_PER_ROW_LBL + '</option>             <option value="split-2">2 ' + M.OPTIONS_PER_ROW_LBL + '</option>             <option value="split-3">3 ' + M.OPTIONS_PER_ROW_LBL + '</option>             <option value="split-4">4 ' + M.OPTIONS_PER_ROW_LBL + '</option>             <option value="split-5">5 ' + M.OPTIONS_PER_ROW_LBL + '</option>             <option value="split-fit">' + M.OPTIONS_FIT + '</option>           </select>           <div class="checkbox-wrapper col20 f-left mt-5 none-soft" id="canDoMultiChoice">             <input id="allowMultiple" class="css-checkbox" name="allowMultiple" type="checkbox" />             <label for="allowMultiple" class="css-label">' + M.CAN_SELECT_MULTIPLE + "               <span>" + M.CAN_SELECT_MULTIPLE_DESC + '</span>            </label>           </div>         </div>      </div>       <div class="popup-input-wrapper col20 f-left" id="contactPropertyWrapper">         <div class="info">           <h5>' + M.MAP_TO_CRM_PROP + "</h5>           <span>" + M.MAP_TO_CRM_PROP_DESC + '</span>         </div>         <select name="property">        </select>       </div>       <div class="popup-input-wrapper none" id="keapFieldWrapper">         <div class="info">           <h5>' + M.MAP_TO_CRM_PROP + "</h5>           <span>" + M.MAP_TO_CRM_PROP_DESC + '</span>         </div>         <select name="keapFieldName"></select>      </div>       <div class="popup-input-wrapper none" id="mailchimpFieldWrapper">         <div class="info">           <h5>' + M.FORM_MAILCHIMP_FIELD_NAME + "</h5>           <span>" + M.FORM_MAILCHIMP_FIELD_DESC + '</span>         </div>         <input type="text" name="mailchimpFieldName" class="transition-border">       </div>       <div class="popup-input-wrapper none" id="mailerliteFieldWrapper">         <div class="info">           <h5>' + M.FORM_MAILERLITE_FIELD_NAME + "</h5>           <span>" + M.FORM_MAILERLITE_FIELD_DESC + '</span>         </div>         <input type="text" name="mailerliteFieldName" class="transition-border">       </div>       <div class="popup-input-wrapper none" id="getresponseFieldWrapper">         <div class="info">           <h5>' + M.FORM_GETRESPONSE_FIELD_NAME + "</h5>           <span>" + M.FORM_GETRESPONSE_FIELD_DESC + '</span>         </div>         <input type="text" name="getresponseFieldName" class="transition-border">       </div>       <div class="popup-input-wrapper none" id="aweberFieldWrapper">         <div class="info">           <h5>' + M.FORM_AWEBER_FIELD_NAME + "</h5>           <span>" + M.FORM_AWEBER_FIELD_DESC + '</span>         </div>         <input type="text" name="aweberFieldName" class="transition-border">       </div>       <div class="popup-input-wrapper none" id="moosendFieldWrapper">         <div class="info">           <h5>' + M.FORM_MOOSEND_FIELD_NAME + "</h5>           <span>" + M.FORM_MOOSEND_FIELD_DESC + '</span>         </div>         <input type="text" name="moosendFieldName" class="transition-border">       </div>       <div class="popup-input-wrapper none" id="activecampaignFieldWrapper">         <div class="info">           <h5>' + M.FORM_ACTIVECAMPAIGN_FIELD_NAME + "</h5>           <span>" + M.FORM_ACTIVECAMPAIGN_FIELD_DESC + '</span>         </div>         <input type="text" name="activecampaignFieldId" class="transition-border">       </div>       <div class="popup-input-wrapper none-soft" id="fieldOptions">         <div class="info">           <h5>' + M.OPTIONS + "</h5>           <span>" + M.OPTIONS_TEXT + '</span>         </div>         <textarea name="options"></textarea>       </div>       <div class="input-wrapper" id="fieldPrefixToggle" style="display: none">         <div class="checkbox-wrapper">           <input id="prefixIconToggle" class="css-checkbox" name="prefixed" type="checkbox" />           <label for="prefixIconToggle" class="css-label">' + M.ADD_PREFIX_ICON + '</label>         </div>       </div>       <div class="popup-input-wrapper none-soft" id="fieldPrefixIconToggleWrapper">         <div class="info">           <h5>' + M.PREFIX_ICON + "</h5>           <span>" + M.PREFIX_ICON_TEXT + '</span>         </div>         <div class="prefixed-input" data-role="field-icon">           <span class="fa"></span>           <input type="text" data-role="icon-field" readonly="readonly" class="transition-border">         </div>      </div>       <div class="input-wrapper" id="fieldRequired" style="display: none">         <div class="checkbox-wrapper">           <input id="formfield-required-check" class="css-checkbox" name="required" type="checkbox" />           <label for="formfield-required-check" class="css-label">' + M.REQUIRED_FIELD + "</label>         </div>       </div>     </div>";
                    case "formMessageMarkup":
                        return '<div class="message-item subscribtion-item transition-bg %readClass%" data-id="%id%" >     <div class="top-part row" rel="toggle" data-toggle="#message%id%" data-action="onToggleClick" style="cursor: pointer">       <div class="checkbox-wrapper f-left">         <input id="check%id%" class="css-checkbox no-toggle" type="checkbox">         <label for="check%id%" class="css-label no-toggle"></label>       </div>       <header>         <div>%content%</div>       </header>       <span class="date">%date%</span>     </div>     <div class="message-content" id="message%id%" style="display: none">%content%</div>   </div>';
                    case "noFormMessagesMarkup":
                        return '<div class="message-item subscribtion-item transition-bg" >     <div class="top-part row">       <header>         <div><h4>' + M.NO_MESSAGES + "</h4></div>       </header>     </div>   </div>";
                    case "galleryAdminMarkup":
                        return '<div class="modal-nav layout-buttons-wrapper">       <ul>         <li><a>' + M.IMAGES + "</a></li>         <li><a>" + M.SETTINGS + '</a></li>       </ul>     </div>     <div class="cpanel-popup-slider">       <div class="cpanel-popup-slide">         <div class="content padded-content">           <div class="input-wrapper input-wrapper2">             <div class="help-text-wrapper">               <span class="help-text">' + M.YOU_CAN_ADD + '</span>             </div>           </div>           <div class="galleryContainer">            <div class="items-wrapper">              <a class="add-image add-image-select add-image-inline">Add Image</a>            </div>          </div>        </div>       </div>       <div class="cpanel-popup-slide">         <div class="content padded-content">           <div class="input-wrapper input-wrapper2">             <div class="portfolio-list-option"></div>           </div>           <ul class="gallery-select">            <li class="active"><a class="grid transition-bg"><span></span>' + M.GRID + '</a></li>            <li><a class="carousel transition-bg"><span></span>' + M.CAROUSEL + '</a></li>          </ul>          <div class="gallery-content">             <div class="input-wrapper">               <div class="info input-slider-wrapper">                  <label>' + M.IMAGES_PER_ROW + '</label>                  <div id="imagesPerRowSlider"></div>                  <input type="text" readonly="readonly" class="slider-val modify">                </div>              </div>             <div class="input-wrapper">               <div class="info input-slider-wrapper">                  <label>' + M.IMAGE_PADDINGS + '</label>                 <div id="imageGapSlider"></div>                  <input type="text" readonly="readonly" class="slider-val modify">                </div>              </div>            <div class="input-wrapper">               <div class="info">                 <h5>' + M.IMAGE_RATIO + "</h5>                 <span>" + M.IMAGE_RATIO_TEXT + '</span>               </div>               <select name="aspectRatio">                <option value="1">' + M.IMG_SQUARE + '</option>                 <option value="0.75">' + M.IMG_STANDARD + '</option>                 <option value="0.666666667">' + M.IMG_RECTANGLE + '</option>                 <option value="1.33333333">' + M.IMG_STANDARD_TALL + '</option>                 <option value="1.5">' + M.IMG_RECTANGLE_TALL + '</option>                 <option value="0.5625">' + M.IMG_WIDE + '</option>               </select>             </div>             <div class="checkbox-wrapper">               <input id="stretchImage" name="stretchImage" class="css-checkbox modify" type="checkbox">               <label for="stretchImage" class="css-label">' + M.IMAGE_FILL + '</label>             </div>              <div class="checkbox-wrapper">                <input id="openInLightbox" name="openInLightbox" class="css-checkbox modify" type="checkbox">                <label for="openInLightbox" class="css-label">' + M.OPEN_IMAGES_IN_LIGHTBOX + '</label>             </div>             <div class="f-left" id="carouselSettings">               <div class="checkbox-wrapper">                 <input id="showArrows" name="showArrows" class="css-checkbox modify" type="checkbox">                 <label for="showArrows" class="css-label">' + M.SHOW_NAVIGATION_ARROWS + '</label>              </div>              <div class="checkbox-wrapper">                 <input id="autoChangeSlides" name="autoChangeSlides" class="css-checkbox modify" type="checkbox">                 <label for="autoChangeSlides" class="css-label" rel="toggle"  data-toggle="#autoChangeSlidesDelay">' + M.CHANGE_SLIDES_AUTOMATICALLY + '</label>              </div>              <div class="input-wrapper" id="autoChangeSlidesDelay" style="display: none">                <div class="info">                   <label>' + M.SLIDE_DELAY + '</label>                  <input type="text" readonly="readonly" class="slider-val modify">                 </div>                 <div id="autoChangeSlidesTimeoutSlider"></div>               </div>            </div>           </div>        </div>       </div>     </div>';
                    case "blogWidgetAdminMarkup":
                        return '<div class="content popup-widget-wrapper">       <div class="popup-input-wrapper">         <div class="info" >           <h5>' + M.COLLECTION_TO_DISPLAY + "</h5>            <span>" + M.WHAT_TYPE_OF_LOG_DATA_TO_DISPLAY + '</span>         </div>         <select class="modify" name="blogType">           <option value="posts">' + M.RECENT_POST + '</option>           <option value="categories">' + M.MOST_POPULAR_CATEGORIES + '</option>           <option value="tags">' + M.MOST_POPULAR_TAGS + '</option>         </select>       </div>       <div class="popup-input-wrapper" id="blog-widget-categories">         <div class="info" >           <h5>' + M.CATEGORY + "</h5>            <span>" + M.SHOW_POSTS_CATEGORY + '</span>         </div>         <select class="modify" name="blogPostsCategory"></select>         <div class="checkbox-wrapper none">          <input id="blog-widget-toggle" name="showAsToggle" class="css-checkbox modify" type="checkbox">          <label for="blog-widget-toggle" class="css-label">' + M.SHOW_POSTS_IN_TOGGLE + '</label>        </div>        <div class="checkbox-wrapper" style="margin: 10px 0;">          <input id="show-featured-image" name="showPostDetails" class="css-checkbox modify" type="checkbox">          <label for="show-featured-image" class="css-label">' + M.SHOW_POST_IMAGE_AND_DESCRIPTION + '</label>        </div>        <div class="f-left" id="detailedPostSettings">          <div class="popup-input-wrapper">             <div class="info" >              <h5>' + M.LAYOUT + "</h5>               <span>" + M.BLOG_ITEMS_DISPLAY + '</span>             </div>             <select class="modify" name="blogPostsDisplayType">               <option value="large">' + M.LARGE_IMAGE + '</option>               <option value="medium">' + M.MEDIUM_SIZE_IMAGE + '</option>               <option value="masonry">' + M.MASONRY + '</option>             </select>           </div>           <div class="popup-input-wrapper">              <div class="info" >               <h5>' + M.NAVIGATION_TYPE + "</h5>               <span>" + M.SELECT_TYPE_OF_NAV + '</span>             </div>             <select class="modify" name="blogPostsPagingType">               <option value="none">' + M.NONE + '</option>               <option value="pagination">' + M.PAGINATION + '</option>               <option value="button">' + M.LOAD_MORE_BUTTON + '</option>             </select>           </div>           <div class="checkbox-wrapper">            <input id="add-social-networks" name="addSocialNetworks" class="css-checkbox modify" type="checkbox">            <label for="add-social-networks" class="css-label">' + M.ADD_SHARE_BUTTONS + '</label>          </div>          <div class="f-left blog-share-settings">             <div class="checkbox-wrapper">               <input id="settings-fb-share" class="css-checkbox modify" type="checkbox">               <label for="settings-fb-share" class="css-label">Facebook</label>             </div>             <div class="checkbox-wrapper none">               <input id="settings-gp-share" class="css-checkbox modify" type="checkbox">               <label for="settings-gp-share" class="css-label">Google+</label>             </div>             <div class="checkbox-wrapper">               <input id="settings-tw-share" class="css-checkbox modify" type="checkbox">               <label for="settings-tw-share" class="css-label">X (Twitter)</label>             </div>             <div class="checkbox-wrapper">               <input id="settings-ln-share" class="css-checkbox modify" type="checkbox">               <label for="settings-ln-share" class="css-label">LinkedIn</label>             </div>           </div>         </div>       </div>       <div class="popup-input-wrapper">        <div class="info input-slider-wrapper">           <label>' + M.NUMBER_OF_ITEMS + '</label>          <div id="numberOfItemsSlider"></div>           <input type="text" readonly="readonly" class="slider-val modify">         </div>       </div>      <div class="input-wrapper input-wrapper-small color-pick-wrap-widgets">         <div class="color-pick-wrap">           <div></div>           <input type="text" value="" class="colorpicker-selected modify" name="itemsColor" />         </div>         <div class="info">           <h5>' + M.ITEMS_COLOR + "</h5>         </div>       </div>     </div>";
                    case "portfolioAdminMarkup":
                        return '<div class="modal-nav layout-buttons-wrapper">       <ul>         <li><a>' + M.ITEMS + "</a></li>         <li><a>" + M.SETTINGS + '</a></li>       </ul>     </div>     <div class="cpanel-popup-slider">       <div class="cpanel-popup-slide">         <div class="content padded-content">           <div class="input-wrapper input-wrapper2">             <div class="help-text-wrapper">               <span class="help-text">' + M.ADD_REMOVE_SORT + '</span>             </div>           </div>           <div class="galleryContainer">            <div class="items-wrapper">              <a class="add-image add-image-select"><span class="add-button"></span></a>            </div>          </div>        </div>       </div>       <div class="cpanel-popup-slide">         <div class="content padded-content">           <div class="input-wrapper input-wrapper2">             <div class="portfolio-list-option"></div>           </div>           <ul class="gallery-select">            <li class="active"><a class="grid transition-bg"><span></span>' + M.GRID + '</a></li>            <li><a class="carousel transition-bg"><span></span>' + M.CAROUSEL + '</a></li>          </ul>          <div class="gallery-content">             <div class="input-wrapper">               <div class="info input-slider-wrapper">                  <label>' + M.ITEMS_PER_ROW + '</label>                 <div id="itemsPerRowSlider"></div>                  <input type="text" readonly="readonly" class="slider-val modify">                </div>              </div>             <div class="input-wrapper">               <div class="info input-slider-wrapper">                  <label>' + M.PADDING_BETWEEN_ITEMS + '</label>                 <div id="itemsGapSlider"></div>                  <input type="text" readonly="readonly" class="slider-val modify">                </div>              </div>             <div class="input-wrapper">              <div class="checkbox-wrapper">                  <input id="showTitle" name="showTitle" class="css-checkbox modify" type="checkbox">                  <label for="showTitle" class="css-label">' + M.SHOW_ITEM_TITLE + '</label>               </div>              <div class="checkbox-wrapper">                  <input id="showCategories" name="showCategories" class="css-checkbox modify" type="checkbox">                  <label for="showCategories" class="css-label">' + M.SHOW_ITEM_CATEGORIES + '</label>               </div>              <div class="checkbox-wrapper">                  <input id="showDescription" name="showDescription" class="css-checkbox modify" type="checkbox">                  <label for="showDescription" class="css-label">' + M.SHOW_ITEM_DESCRIPTION + '</label>               </div>              </div>              <div class="f-left" id="carouselSettings">               <div class="checkbox-wrapper">                 <input id="showArrows" name="showArrows" class="css-checkbox modify" type="checkbox">                 <label for="showArrows" class="css-label">' + M.SHOW_NAVIGATION_ARROWS + '</label>              </div>              <div class="checkbox-wrapper">                 <input id="autoChangeSlides" name="autoChangeSlides" class="css-checkbox modify" type="checkbox">                 <label for="autoChangeSlides" class="css-label" rel="toggle"  data-toggle="#autoChangeSlidesDelay">' + M.CHANGE_SLIDES_AUTOMATICALLY + '</label>              </div>              <div class="input-wrapper" id="autoChangeSlidesDelay" style="display: none">                <div class="info">                   <label>' + M.SLIDE_DELAY + '</label>                  <input type="text" readonly="readonly" class="slider-val modify">                 </div>                 <div id="autoChangeSlidesTimeoutSlider"></div>               </div>            </div>           </div>        </div>       </div>     </div>';
                    case "simplePortfolioItemTemplate":
                        return '<div class="file2 portfolio-item status2 %selectedClass%" style="cursor: pointer; margin-left: 10px;">       <div class="big-thumb"       style="background: url(%thumb%) 50% 50% no-repeat;"></div>       <div class="content">         <h4>%title%</h4>       </div>       <a class="check-button2"></a>    </div>';
                    case "codeWidgetMarkup":
                        return '<div class="popup-newpage-wrapper">       <div class="input-wrapper input-wrapper2">         <div class="info" >           <h5>' + M.TYPE + "</h5>           <span>" + M.TYPE_CODE + '</span>         </div>         <select class="button-size-select modify" name="codeType">           <option value="text/html">HTML</option>           <option value="text/css">CSS</option>           <option value="text/javascript">JavaScript</option>           <option value="text/x-sql">SQL</option>           <option value="application/xml">XML</option>           <option value="">' + M.CODE_WIDGET_SOURCE_TYPE_PLAIN_TEXT + '</option>         </select>       </div>       <div class="input-wrapper input-wrapper2">         <div class="info" >           <h5>' + M.THEME + "</h5>           <span>" + M.CODE_THEME + '</span>         </div>         <select class="button-size-select modify" name="codeTheme">           <option value="dark">' + M.DARK + '</option>           <option value="light">' + M.LIGHT + '</option>         </select>       </div>       <div class="input-wrapper input-wrapper2" id="insertRawWrapper" style="display: none">         <div class="checkbox-wrapper checkbox-wrapper2">           <input id="insertRaw" name="insertRaw" class="css-checkbox modify" type="checkbox">           <label for="insertRaw" class="css-label modify">' + M.EXECUTE_CODE + '</label>         </div>       </div>       <div class="input-wrapper input-wrapper2">         <div class="checkbox-wrapper checkbox-wrapper2">           <input id="includeRowNumbers" name="includeRowNumbers" class="css-checkbox modify" type="checkbox">           <label for="includeRowNumbers" class="css-label modify">' + M.INCLUDE_ROW_NUMBERS + '</label>         </div>       </div>       <div class="input-wrapper input-wrapper2 mt-15">         <div class="info">           <h5>' + M.SOURCE_CODE + "</h5>           <span>" + M.SOURCE_CODE_TEXT + '</span>         </div>         <div style="width: 100%; height: 300px; float: left; margin-top: 7px;">           <textarea name="sourceCode" class="full-size"></textarea>         </div>       </div>     </div>';
                    case "embedWidgetAdminMarkup":
                        return '<div class="popup-newpage-wrapper">       <div class="input-wrapper input-wrapper2">         <div class="info">          <h5>' + M.CONTENT_TO_EMBED + '</h5>        </div>        <input type="text" name="enteredEmbedValue" class="transition-border focus modify">         <div class="info"><span>' + M.ENTER_URL_EMBED + '</span></div>       </div>      <div class="input-wrapper mt-15">         <div class="info">          <h5>' + M.PREVIEW + '</h5>        </div>        <div class="preview full-size f20 mt-15" style="height: 300px;) no-repeat center center"></div>       </div>    </div>';
                    case "videoWidgetAdminMarkup":
                        return '<div class="popup-newpage-wrapper">       <div class="input-wrapper input-wrapper2">         <div class="info">          <h5>' + M.VIDEO_SOURCE + '</h5>        </div>        <input type="text" name="enteredEmbedValue" class="transition-border focus modify">         <div class="info">          <span>' + M.ENTER_URL_VIDE_EMBED + '</span>         </div>      </div>      <div class="input-wrapper mt-15">         <div class="info">          <h5>' + M.PREVIEW + '</h5>        </div>        <div class="preview video-thumb-bg full-size f20 mt-15" style="height: 200px;"></div>       </div>       <div class="input-wrapper mt-15">         <div class="checkbox-wrapper">           <input id="useCustomThumb" class="css-checkbox modify" name="useCustomThumb" type="checkbox" />           <label for="useCustomThumb" class="css-label" rel="toggle"  data-toggle="#useCustomThumbWrapper">' + M.USE_CUSTOM_THUMBNAIL + '</label>         </div>       </div>       <div class="input-wrapper" id="useCustomThumbWrapper" style="display: none">         <div class="info">           <h5>' + M.THUMBNAIL + "</h5>           <span>" + M.CLICK_THE_THUMBNAIL + '</span>         </div>         <div class="prefixed-input">           <div class="add-image thumb video-thumb-bg full-size f20 mt-15" style="height: 200px; cursor: pointer;">             <span class="add-button transition-all"></span>          </div>         </div>      </div>     </div>';
                    case "subscribeFormAdminMarkup":
                        return '<div class="modal-nav layout-buttons-wrapper">         <ul>           <li><a href="javascript:;">' + M.FORM + '</a></li>           <li><a href="javascript:;">' + M.SETTINGS + '</a></li>         </ul>       </div>       <div class="cpanel-popup-slider popup-style-2">         <div class="cpanel-popup-slide">           <div class="content padded-content">             <div class="input-wrapper">               <div class="info" style="width:100%;">                 <h5>' + M.SUBSCRIPTION_NAME + "</h5>                 <span>" + M.SUBSCRIPTION_DASHBOARD + '</span>               </div>               <input type="text" name="formName" class="transition-border modify" value="">             </div>             <div class="input-wrapper">               <div class="info">                 <h5>' + M.TITLE + '</h5>               </div>               <input type="text" name="formTitle" class="transition-border modify" value="">             </div>             <div class="input-wrapper">               <div class="info">                 <h5>' + M.DESCRIPTION + '</h5>               </div>               <input type="text" name="formDescription" class="transition-border modify" value="">             </div>             <div class="input-wrapper">               <div class="info">                 <h5>' + M.LAYOUT + "</h5>                 <span>" + M.SUBSCRIPTION_FIELDS_LAYOUT + '</span>               </div>               <select class="button-size-select modify" name="formLayout" style="width: 100%">                 <option value="stacked">' + M.SUBSCRIPTION_FIELDS_STACKED + '</option>                 <option value="lined">' + M.SUBSCRIPTION_FIELDS_LINED_IN_ROW + '</option>               </select>             </div>             <div class="help-text-wrapper">               <span class="help-text" style="margin-bottom:20px;">' + M.EDIT_YOUR_FORM_BELOW + '</span>             </div>             <div class="form-wrapper"></div>             <a class="square-add" title="' + M.ADD_FIELD + '"></a>           </div>         </div>         <div class="cpanel-popup-slide">           <div class="content padded-content">             <div class="info">               <h5>' + M.SEND_NOTIFICATION_TO + '</h5>             </div>             <div class="input-wrapper">               <input type="text" name="sendTo" class="transition-border" placeholder="' + M.EMAIL + '">             </div>             <div class="input-wrapper">               <div class="info" style="width: 100%; margin-top: 5px">                 <h5>' + M.THEME + "</h5>                 <span>" + M.SUBSCRIPTION_FIELDS_THEME + '</span>               </div>               <select class="button-size-select modify" name="formTheme" style="width: 100%">                 <option value="dark">' + M.LIGHT + '</option>                 <option value="light">' + M.DARK + '</option>               </select>             </div>             <div class="input-wrapper input-wrapper2">               <div class="info" style="margin-top:0;">                 <h5>' + M.BUTTON_TEXT + '</h5>               </div>               <input type="text" name="buttonText" class="transition-border modify" />             </div>             <div class="input-wrapper input-wrapper2 f-right">               <div class="info">                 <h5>' + M.BUTTON_ALIGNMENT + '</h5>               </div>               <select class="button-size-select modify" name="buttonPosition">                 <option value="left" selected="selected">' + M.LEFT + '</option>                 <option value="center">' + M.CENTER + '</option>                 <option value="right">' + M.RIGHT + '</option>               </select>             </div>             <div class="input-wrapper input-wrapper2 input-wrapper-margin color-pick-wrap-widgets">               <div class="color-pick-wrap">                 <div style="background-color: rgb(51, 51, 51);"></div>                 <input type="text" value="" class="colorpicker-selected modify" name="buttonColor" />               </div>               <div class="info">                 <h5>' + M.BUTTON_COLOR + '</h5>               </div>             </div>             <div class="input-wrapper input-wrapper2 f-right color-pick-wrap-widgets">               <div class="color-pick-wrap">                 <div style="background-color: rgb(255, 255, 255);"></div>                 <input type="text" value="" class="colorpicker-selected modify" name="buttonTextColor" />               </div>               <div class="info">                 <h5>' + M.TEXT_COLOR + '</h5>               </div>             </div>             <div class="input-wrapper">               <div class="info" style="width: 100%; margin-top: 5px">                 <h5>' + M.ACTION_ON_SUBMIT + "</h5>                 <span>" + M.WHAT_TO_SHOW_SUBMIT + '</span>               </div>               <select class="button-size-select modify" name="successType" style="width: 100%">                 <option value="message">' + M.SHOW_THANK_YOU_MESSAGE + '</option>                 <option value="page">' + M.GO_TO_PAGE + '</option>               </select>             </div>             <div class="none-soft input-wrapper input-wrapper2" id="form-widget-message">               <div class="info" style="margin-top:0;">                 <h5>' + M.THANK_YOU_MESSAGE + '</h5>               </div>               <textarea name="thankYouMessage" class="transition-border modify"></textarea>             </div>             <div class="f20 none-soft" id="form-widget-goto">               <div class="info">                 <h5>' + M.THANK_YOU_PAGE + '</h5>               </div>               <input class="path-select select-like modify" type="text" style="width: 100%" />             </div>           </div>         </div>       </div>';
                    case "socialMediaMarkup":
                        return '<div class="modal-nav layout-buttons-wrapper">         <ul>           <li><a href="javascript:;">' + M.BUTTONS + '</a></li>           <li><a href="javascript:;">' + M.SETTINGS + '</a></li>         </ul>       </div>       <div class="cpanel-popup-slider popup-style-2">         <div class="cpanel-popup-slide padded-content">           <div class="input-wrapper input-wrapper2">             \x3c!--<div class="portfolio-list-option"></div>--\x3e             <ul class="gallery-select social-media-type">              <li><a class="share-page transition-bg"><span></span>' + M.SHARE_THIS_PAGE + '</a></li>              <li><a class="goto-page transition-bg"><span></span>' + M.GO_TO_PAGE + '</a></li>            </ul>          </div>          <div class="f20 none-soft social-media-type-share">            <div class="input-wrapper mt-15">               <div class="info">                 <h5>' + M.NETWORKS_TO_SHARE + "</h5>                 <span>" + M.CLICK_ON_ICON + '</span>               </div>               <div class="f20 networks selected-networks"></div>               <div class="info">                 <h5>' + M.AVAILABLE_NETWORKS + "</h5>                 <span>" + M.CLICK_AN_ICON + '</span>               </div>               <div class="f20 networks available-networks"></div>               <a class="square-add button-tooltip" data-tooltip="addOtherNetwork" rel="toggle" data-toggle="#socialMediaTypeShareIconpickerWrapper"></a>             </div>           </div>          <div class="f20 none-soft social-media-type-page">            <div class="help-text-wrapper"><span class="help-text mt-15">' + M.EDIT_URL_DRAG + '</span></div>            <div class="f20 fields-box"></div>             <a class="square-add button-tooltip f-left mt-15" data-tooltip="addAnotherButton"></a>           </div>        </div>        <div class="cpanel-popup-slide padded-content">           <div class="input-wrapper ta-center social-icon-preview"><div id="iconpicker" class="fa fa-send"></div></div>           <div class="social-size-settings">             <div class="input-wrapper f-right">               <div class="info input-slider-wrapper">                 <label>' + M.BUTTON_SIZE + '</label>                <div id="iconSizeSlider"></div>                 <input type="text" readonly="readonly" class="slider-val modify" name="iconsSize">               </div>             </div>             <div class="input-wrapper f-right">               <div class="info input-slider-wrapper">                 <label>' + M.BUTTON_BORDER_RADIUS + '</label>                <div id="borderRadiusSlider"></div>                 <input type="text" readonly="readonly" class="slider-val modify" name="borderRadius">               </div>             </div>           </div>           <div class="input-wrapper color-pick-wrap-widgets">             <div class="color-pick-wrap">               <div></div>               <input type="text" value="" class="colorpicker-selected modify" name="iconsColor">             </div>             <div class="info">               <h5>' + M.BUTTON_BACKGROUND_COLOR + '</h5>             </div>           </div>           <div class="input-wrapper color-pick-wrap-widgets">             <div class="color-pick-wrap">               <div></div>               <input type="text" value="" class="colorpicker-selected modify" name="iconsHoverColor">             </div>             <div class="info">               <h5>' + M.BUTTON_HOVER_BACKGROUND_COLOR + '</h5>             </div>           </div>           <div class="input-wrapper color-pick-wrap-widgets">             <div class="color-pick-wrap">               <div></div>               <input type="text" value="" class="colorpicker-selected modify" name="iconsTextColor">             </div>             <div class="info">               <h5>' + M.ICONS_COLOR + '</h5>             </div>           </div>           <div class="input-wrapper input-wrapper2 f-right">             <div class="info">               <h5>' + M.BUTTONS_POSITION + '</h5>             </div>             <select class="template-select" name="iconsAlign">              <option value="left">' + M.LEFT + '</option>              <option value="center">' + M.CENTER + '</option>              <option value="right">' + M.RIGHT + "</option>            </select>           </div>         </div>       </div> ";
                    case "socialWidgetFieldMarkup":
                        return '<div class="field">      <span class="move-icon button-tooltip" data-tooltip="simpleMove"></span>      <div class="iconpicker-social fa fa-%icon%" data-type="%icon%"></div>       <input type="text" class="label-field" value="%url%">      <div class="buttons-wrapper">        <a data-tooltip="simpleDelete" class="delete delete-icon button-tooltip circle-icon circle-effect"><i class="material-icons-outlined">delete</i></a>      </div>    </div>';
                    case "domainRow":
                        return '<div class="section-bg domain-item %primary% domain-type-%typeClass%" data-domain="%domain%">       <div class="icon"></div>       <header>         <h4>%domain%</h4>         <div class="new-subdomain-wrapper none-soft col20 f-left">           <input placeholder="new-subdomain" type="text" name="custom-subdomain" class="transition-border" value="" />           <span class="root-domain">.%rootDomain%</span>           <a rel="action" data-action="changeSubdomain" class="next-button middle-button blue" style="border:none;">' + M.CHANGE + '</a>         </div>       </header>       <span class="domain-type">%type%</span>       <div class="options">         <a rel="action" data-action="unlinkWebsiteDomain" class="unlink transition-all button-tooltip" data-tooltip="unlink_domain" data-top="true"></a>         <a rel="action" data-action="editDomain" class="edit transition-all button-tooltip" data-tooltip="edit_domain" data-top="true"></a>         <a rel="action" data-action="viewDomain" class="view transition-all button-tooltip" data-tooltip="view_domain" data-top="true"></a>         <a rel="action" data-action="makeWebsiteDomainPrimary" class="make-primary transition-all button-tooltip" data-tooltip="make_primary_domain" data-top="true"></a>         <a rel="action" data-action="editSystemSubdomain" class="edit-subdomain transition-all button-tooltip" data-tooltip="editSystemSubdomain" data-top="true"></a>       </div>       <div class="content" data-role="information">         <div class="f20"><h1 class="domain-message"></h1></div>         <div class="f20 domain-info">          <span>' + M.DOMAIN_EXPLAIN_TEXT + '</span></div>        <div class="domain-table">          <div class="row title">            <span>Host / Name</span>            <span>Record Type</span>            <span>Value</span>          </div>          <div class="row info">            <span>@</span>            <span>A</span>            <span>%ip%</span>          </div>          <div class="row info">            <span>www</span>            <span>CNAME</span>            <span>%domain%</span>          </div>        </div>      </div>     </div>';
                    case "funnelDomainRow":
                        return '<h5 class="f-left">%domain%</h5>             <div class="domain-controls">               <a href="http://%domain%?preview=__PREVIEW_ONLY" target="_blank" class="view transition-all button-tooltip" data-tooltip="view_domain" data-top="true"></a>               <a class="domain-settings external-domain-settings button-tooltip" data-tooltip="edit_domain" data-top="true">                 <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"                    viewBox="0 0 478.703 478.703" style="enable-background:new 0 0 478.703 478.703;" xml:space="preserve">                   <g>                     <g>                       <path d="M454.2,189.101l-33.6-5.7c-3.5-11.3-8-22.2-13.5-32.6l19.8-27.7c8.4-11.8,7.1-27.9-3.2-38.1l-29.8-29.8                         c-5.6-5.6-13-8.7-20.9-8.7c-6.2,0-12.1,1.9-17.1,5.5l-27.8,19.8c-10.8-5.7-22.1-10.4-33.8-13.9l-5.6-33.2                         c-2.4-14.3-14.7-24.7-29.2-24.7h-42.1c-14.5,0-26.8,10.4-29.2,24.7l-5.8,34c-11.2,3.5-22.1,8.1-32.5,13.7l-27.5-19.8                         c-5-3.6-11-5.5-17.2-5.5c-7.9,0-15.4,3.1-20.9,8.7l-29.9,29.8c-10.2,10.2-11.6,26.3-3.2,38.1l20,28.1                         c-5.5,10.5-9.9,21.4-13.3,32.7l-33.2,5.6c-14.3,2.4-24.7,14.7-24.7,29.2v42.1c0,14.5,10.4,26.8,24.7,29.2l34,5.8                         c3.5,11.2,8.1,22.1,13.7,32.5l-19.7,27.4c-8.4,11.8-7.1,27.9,3.2,38.1l29.8,29.8c5.6,5.6,13,8.7,20.9,8.7c6.2,0,12.1-1.9,17.1-5.5                         l28.1-20c10.1,5.3,20.7,9.6,31.6,13l5.6,33.6c2.4,14.3,14.7,24.7,29.2,24.7h42.2c14.5,0,26.8-10.4,29.2-24.7l5.7-33.6                         c11.3-3.5,22.2-8,32.6-13.5l27.7,19.8c5,3.6,11,5.5,17.2,5.5l0,0c7.9,0,15.3-3.1,20.9-8.7l29.8-29.8c10.2-10.2,11.6-26.3,3.2-38.1                         l-19.8-27.8c5.5-10.5,10.1-21.4,13.5-32.6l33.6-5.6c14.3-2.4,24.7-14.7,24.7-29.2v-42.1                         C478.9,203.801,468.5,191.501,454.2,189.101z M451.9,260.401c0,1.3-0.9,2.4-2.2,2.6l-42,7c-5.3,0.9-9.5,4.8-10.8,9.9                         c-3.8,14.7-9.6,28.8-17.4,41.9c-2.7,4.6-2.5,10.3,0.6,14.7l24.7,34.8c0.7,1,0.6,2.5-0.3,3.4l-29.8,29.8c-0.7,0.7-1.4,0.8-1.9,0.8                         c-0.6,0-1.1-0.2-1.5-0.5l-34.7-24.7c-4.3-3.1-10.1-3.3-14.7-0.6c-13.1,7.8-27.2,13.6-41.9,17.4c-5.2,1.3-9.1,5.6-9.9,10.8l-7.1,42                         c-0.2,1.3-1.3,2.2-2.6,2.2h-42.1c-1.3,0-2.4-0.9-2.6-2.2l-7-42c-0.9-5.3-4.8-9.5-9.9-10.8c-14.3-3.7-28.1-9.4-41-16.8                         c-2.1-1.2-4.5-1.8-6.8-1.8c-2.7,0-5.5,0.8-7.8,2.5l-35,24.9c-0.5,0.3-1,0.5-1.5,0.5c-0.4,0-1.2-0.1-1.9-0.8l-29.8-29.8                         c-0.9-0.9-1-2.3-0.3-3.4l24.6-34.5c3.1-4.4,3.3-10.2,0.6-14.8c-7.8-13-13.8-27.1-17.6-41.8c-1.4-5.1-5.6-9-10.8-9.9l-42.3-7.2                         c-1.3-0.2-2.2-1.3-2.2-2.6v-42.1c0-1.3,0.9-2.4,2.2-2.6l41.7-7c5.3-0.9,9.6-4.8,10.9-10c3.7-14.7,9.4-28.9,17.1-42                         c2.7-4.6,2.4-10.3-0.7-14.6l-24.9-35c-0.7-1-0.6-2.5,0.3-3.4l29.8-29.8c0.7-0.7,1.4-0.8,1.9-0.8c0.6,0,1.1,0.2,1.5,0.5l34.5,24.6                         c4.4,3.1,10.2,3.3,14.8,0.6c13-7.8,27.1-13.8,41.8-17.6c5.1-1.4,9-5.6,9.9-10.8l7.2-42.3c0.2-1.3,1.3-2.2,2.6-2.2h42.1                         c1.3,0,2.4,0.9,2.6,2.2l7,41.7c0.9,5.3,4.8,9.6,10,10.9c15.1,3.8,29.5,9.7,42.9,17.6c4.6,2.7,10.3,2.5,14.7-0.6l34.5-24.8                         c0.5-0.3,1-0.5,1.5-0.5c0.4,0,1.2,0.1,1.9,0.8l29.8,29.8c0.9,0.9,1,2.3,0.3,3.4l-24.7,34.7c-3.1,4.3-3.3,10.1-0.6,14.7                         c7.8,13.1,13.6,27.2,17.4,41.9c1.3,5.2,5.6,9.1,10.8,9.9l42,7.1c1.3,0.2,2.2,1.3,2.2,2.6v42.1H451.9z"/>                       <path d="M239.4,136.001c-57,0-103.3,46.3-103.3,103.3s46.3,103.3,103.3,103.3s103.3-46.3,103.3-103.3S296.4,136.001,239.4,136.001                         z M239.4,315.601c-42.1,0-76.3-34.2-76.3-76.3s34.2-76.3,76.3-76.3s76.3,34.2,76.3,76.3S281.5,315.601,239.4,315.601z"/>                     </g>                   </g>                 </svg>               </a>               <a class="domain-unlink button-tooltip" data-tooltip="unlink_domain" data-top="true"></a>             </div>             <div class="domain-settings-wrapper f-left col20 mt-25 none-soft" data-role="information">               <h4 class="col20 f-left domain-message" style="line-height:1.3;">&nbsp;</h4>               <span class="help-text t-left col20 f-left mt-25" style="padding: 0;">' + M.DOMAIN_EXPLAIN_TEXT + '</span>              <div class="col20 f-left mt-25 domain-table">                 <div class="col20 f-left domain-row gray">                   <span>Host/Name</span>                   <span>Record Type</span>                   <span>Value</span>                 </div>                 <div class="col20 f-left domain-row">                   <span>@</span>                   <span>A</span>                   <span>%ip%</span>                 </div>                 <div class="col20 f-left domain-row">                   <span>www</span>                   <span>CNAME</span>                   <span>%domain%</span>                 </div>               </div>             </div>';
                    case "websiteSettingsSocialMediaMarkup":
                        return '<div class="f20 padded-content">       <div class="f20 social-media-type-page">        <div class="help-text-wrapper"><span class="help-text">' + M.EDIT_URL_DRAG + '</span></div>        <div class="f20 fields-box"></div>         <a class="square-add button-tooltip f-left mt-15" data-tooltip="addAnotherButton"></a>       </div>    </div>';
                    case "promptForThemeTitle":
                        return '<div class="popup-centered-wrapper">       <span class="help-text" style="display:none;">' + M.WEBSITE_TITLE_TEXT + '</span>       <input type="text" name="val" class="focus transition-border" placeholder="' + M.WEBSITE_TITLE_TEXT + '" />     </div>';
                    case "billingAcceptedMarkup":
                        return '<span class="success-message success-message-padding">         <div class="col20 f-left t-center mt-25">           <span class="material-icons fingerprint-icon"> done </span>         </div>         <h2 class="col20 f-left t-center mb-25 mt-25" style="font-size:32px;">' + M.SUCCESSFULL_PAYMENT + '</h2>         <div class="col20 f-left t-center"><a class="middle-button close-popup f-none inline-block blue">' + M.CLOSE + '</a></div>         <p class="none" style="margin-top: 30px; font-size: 16px;">' + M.SHARE_MESSAGE + '</p>         <div class="share-btn-wrapper none">           <a rel="action" data-action="sharePage" data-type="facebook"><i class="fa fa-facebook"></i></a>           <a rel="action" data-action="sharePage" data-type="twitter"><i class="fa fa-twitter"></i></a>           <a rel="action" data-action="sharePage" data-type="linkedin"><i class="fa fa-linkedin"></i></a>           <a rel="action" data-action="sharePage" data-type="pinterest"><i class="fa fa-pinterest-p"></i></a>         </div>         </span>';
                    case "billingTaxUpdated":
                        return '<span class="success-message success-message-padding vat-recalculation-modal popup-error">                 <i class="fa fa-exclamation-triangle"></i>' + M.VAT_RECALCULATE + "</span>";
                    case "billingInvoicesMarkup":
                        return '<div class="message-item subscribtion-item transition-bg">       <div class="top-part row">         <header>           <div>             <h4>%date% /%planType%/ - <b>%suffix% %amount%</b></h4>           </div>         </header>         <a data-id="%id%" rel="action" data-action="downloadInvoice" class="middle-button gray f-right">' + M.DOWNLOAD_INVOICE + "</a>       </div>     </div>";
                    case "dashboardWebsitesListTemplate":
                        return '<div class="website-wrapper" data-idx="%idx%">       <div class="website-preview">         <div style="%style%"></div>       </div>       <h3>%name%</h3>       <span>%url%</span>     </div>';
                    case "websiteSettingsHeaderLogoMarkup":
                        return '<div class="logo-settings-wrapper popup-widget-wrapper">                   <div class="checkbox-wrapper">                     <input id="useImgLogoInput" name="logoType" value="image" class="css-checkbox modify" type="radio">                     <label for="useImgLogoInput" class="css-label">' + M.IMG_LOGO + "<p>" + M.USE_IMG_LOGO + '</p></label>                   </div>                   <div class="checkbox-wrapper">                     <input id="useTextLogoInput" name="logoType" value="text" class="css-checkbox modify" type="radio">                     <label for="useTextLogoInput" class="css-label">' + M.TEXT_LOGO + "<p>" + M.USE_TEXT_LOGO + '</p></label>                   </div>                   <a class="add-image transition-all f-left none-soft" style="height:120px;">                     <span class="add-button transition-all"></span>                   </a>                   <div class="col20 f-left none-soft" id="textLogoToggle">                     <span>' + M.EDIT_YOUR_TEXT_LOGO + '</span>                     <div class="input-wrapper">                       <div class="text-editor-wrapper">                         <textarea name="textLogo"></textarea>                       </div>                     </div>                   </div>                   <div class="input-wrapper f-right none-soft" id="maxLogoHeightWrapper">                     <div class="info">                       <h5 class="ta-left">' + M.MAX_LOGO_HEIGHT + '<span class="maxLogoHeightSlider slider-val f-right"></span></h5>                     </div>                     <div id="maxLogoHeightSlider"></div>                   </div>                   <div class="input-wrapper f-right">                     <div class="info">                       <h5 class="ta-left">' + M.TOP_BOTTOM_HEADER_MARGIN + '<span class="headerPaddingSlider slider-val f-right"></span></h5>                     </div>                     <div id="headerPaddingSlider"></div>                   </div>                 </div>';
                    case "websiteSettingsHeaderStylesMarkup":
                        return '<div class="popup-widget-wrapper">                   <div class="logo-settings-wrapper">                     <div class="input-wrapper color-pick-wrap-widgets">                       <div class="color-pick-wrap f-left">                         <div></div>                         <input type="text" value="" class="colorpicker-selected" name="headerBackgroundColor">                       </div>                       <div class="info">                         <h5 class="ta-left">' + M.HEADER_BG_COLOR + '</h5>                       </div>                     </div>                     <div class="col20 f-left none-soft" id="with-sidebar-color">                      <div class="input-wrapper color-pick-wrap-widgets">                         <div class="color-pick-wrap f-left">                           <div></div>                           <input type="text" value="" class="colorpicker-selected" name="sideMenuBackgroundColor">                         </div>                         <div class="info">                           <h5 class="ta-left">' + M.SIDE_MENU_BG_COLOR + '</h5>                         </div>                       </div>                     </div>                     <div class="col20 f-left none-soft" id="with-header-text-icon-color">                      <div class="input-wrapper color-pick-wrap-widgets">                         <div class="color-pick-wrap f-left">                           <div></div>                           <input type="text" value="" class="colorpicker-selected" name="headerTextIconColor">                         </div>                         <div class="info">                           <h5 class="ta-left">' + M.HEADER_TEXT_ICON_COLOR + '</h5>                         </div>                       </div>                     </div>                     <div class="input-wrapper color-pick-wrap-widgets" style="margin-bottom: 15px;">                       <div class="color-pick-wrap f-left">                         <div></div>                         <input type="text" value="" class="colorpicker-selected" name="menuTextColor">                       </div>                       <div class="info">                         <h5 class="ta-left">' + M.MENU_TEXT_COLOR + '</h5>                       </div>                     </div>                     <div class="popup-input-wrapper">                       <div class="info">                         <h5 class="ta-left">' + M.MENU_FONT + '</h5>                       </div>                       <select name="menuFont"></select>                     </div>                     <div class="popup-input-wrapper f-right">                       <div class="info">                         <h5 class="ta-left">' + M.FONT_SIZE + '<span class="menuFontSizeSlider slider-val f-right"></span></h5>                       </div>                       <div id="menuFontSizeSlider"></div>                     </div>                     <div class="popup-input-wrapper">                       <div class="checkbox-wrapper">                         <input id="menuUppercase" class="css-checkbox modify" type="checkbox" name="menuUppercase" />                         <label for="menuUppercase" class="css-label" >' + M.ALL_UPPERCASE + "</label>                       </div>                     </div>                   </div>                 </div>";
                    case "addMemberMarkup":
                        return '           <div class="popup-newpage-wrapper">             <div class="popup-input-wrapper" >               <h5>' + M.NAME + '</h5>               <input type="text" name="memberName" placeholder="' + M.NAME + '" class="focus transition-border">             </div>             <div class="popup-input-wrapper" >               <div class="info" >                 <h5>' + M.EMAIL + "</h5>                 <span>" + M.USED_TO_LOGIN + '</span>               </div>               <input type="text" name="memberEmail" placeholder="' + M.EMAIL + '" class="transition-border">             </div>             <div class="input-wrapper">               <a class="middle-button gray choose-groups">' + M.CHOOSE_MEMBER_GROUPS + "</a>             </div>           </div>";
                    case "addContactMarkup":
                        return '           <div class="popup-newpage-wrapper">             <div class="popup-input-wrapper" >               <h5>' + M.NAME + '</h5>               <input type="text" name="name" placeholder="' + M.NAME + '" class="focus transition-border">             </div>             <div class="popup-input-wrapper" >               <div class="info" >                 <h5>' + M.EMAIL + '</h5>               </div>               <input type="text" name="email" placeholder="' + M.EMAIL + '" class="transition-border">             </div>           </div>';
                    case "membersTableRow":
                        return '<tr class="member-item" data-id="%id%">      <td></td>      <td><a rel="tab" href="/me/members/list/%id%" class="member-name">%name%</a></td>      <td>%email%</td>      <td>%registeredOn%</td>      <td>%status%</td>       <td><a rel="tab" href="/me/members/list/%id%" class="details"><i class="fa fa-arrow-right"></i></a></td>    </tr>';
                    case "membersTableRowApproveDeny":
                        return '<div class="approve-buttons">      <a rel="action" data-action="approveMember" class="green middle-button">' + M.APPROVE + '</a>       <a rel="action" data-action="denyMember" class="deny-button">' + M.DENY + "</a>    </div>";
                    case "membersSettingsMarkup":
                        return '<div class="popup-newpage-wrapper">     <div class="checkbox-wrapper col20">       <input id="allow-registrations" class="css-checkbox modify" type="checkbox" name="allowRegistrations" />       <label for="allow-registrations" class="css-label">' + M.ALLOW_REGISTRATIONS + '</label>     </div>     <div class="checkbox-wrapper col20">       <input id="approve-members" class="css-checkbox modify" type="checkbox" name="memberApproval" />       <label for="approve-members" class="css-label">' + M.MEMBER_APPROVAL + '</label>     </div>     <div class="checkbox-wrapper col20">       <input id="notify-on-reg" class="css-checkbox modify" type="checkbox" name="notifyOnReg" />       <label for="notify-on-reg" class="css-label">' + M.MEMBERS_NOTIFY_TITLE + '</label>     </div>     <div class="input-wrapper col20 f-left mt-15">       <div class="info">         <h5>' + M.MEMBER_NOTIFICATION_EMAIL + '</h5>       </div>       <input type="text" name="notifyOnRegEmail" placeholder="' + M.EMAIL + '" />     </div>     <div class="input-wrapper " style="margin-top:20px;">       <div class="info">         <h5>' + M.DEFAULT_GROUP_MEMBERS + '</h5>       </div>       <select name="defaultGroup"></select>     </div>     <div class="input-wrapper none headerSettingsWrapper">       <div class="info">         <h5>' + M.LOGIN_MEMBERS + '</h5>       </div>       <select name="loginLinkType">         <option value="none">' + M.HIDE_FROM_NAVIGATION + '</option>         <option value="icon">' + M.ICON_ONLY + '</option>         <option value="text">' + M.TEXT_ONLY + '</option>         <option value="icon+text">' + M.ICON_AND_TEXT + '</option>       </select>     </div>     <div class="input-wrapper mailchimp-settings-wrapper none">       <a class="middle-button gray mailchimp-settings">' + M.MAILCHIMP_SETTINGS + '</a>     </div>     <div class="input-wrapper mailerlite-settings-wrapper none mt-15">       <a class="middle-button gray mailerlite-settings">' + M.MAILERLITE_SETTINGS + '</a>     </div>     <div class="input-wrapper aweber-settings-wrapper none mt-15">       <a class="middle-button gray aweber-settings">' + M.AWEBER_SETTINGS + '</a>     </div>     <div class="input-wrapper getresponse-settings-wrapper none mt-15">       <a class="middle-button gray getresponse-settings">' + M.GETRESPONSE_SETTINGS + '</a>     </div>     <div class="input-wrapper activecampaign-settings-wrapper none mt-15">       <a class="middle-button gray activecampaign-settings">' + M.ACTIVECAMPAIGN_SETTINGS + '</a>     </div>     <div class="input-wrapper moosend-settings-wrapper none mt-15">       <a class="middle-button gray moosend-settings">' + M.MOOSEND_SETTINGS + '</a>     </div>     <div class="input-wrapper keap-settings-wrapper none mt-15">       <a class="middle-button gray keap-settings">Set Tags</a>     </div>   </div>';
                    case "addCouponPopupMarkup":
                        return '<div class="popup-newpage-wrapper">                   <ul class="discount-select" style="margin-bottom:35px;">                     <li><a class="flat-discount" data-type="FIXED_DISCOUNT"><span></span>' + M.FLAT_DISCOUNT + '</a></li>                     <li><a class="percent-discount" data-type="PERCENT_DISCOUNT"><span></span>' + M.PERCENT_DISCOUNT + '</a></li>                     <li><a class="shipping-discount" data-type="FREE_SHIPPING"><span></span>' + M.FREE_SHIPPING + '</a></li>                   </ul>                   <div class="col20 f-left">                     <div class="info" >                       <h5>' + M.DISCOUNT_NAME + "</h5>                       <span>" + M.DISCOUNT_NAME_TEXT + '</span>                     </div>                     <input type="text" name="name" class="transition-border">                     <div class="col20 f-left mt-15" id="discountCodeWrapper">                      <div class="input-wrapper input-wrapper2">                       <div class="info" >                         <h5>' + M.DISCOUNT_CODE + "</h5>                         <span>" + M.DISCOUNT_CODE_TEXT + '</span>                       </div>                       <input type="text" name="code" class="transition-border">                       </div>                       <div class="input-wrapper input-wrapper2 f-right">                         <div class="info" >                           <h5>' + M.DISCOUNT_CODE_USAGES + "</h5>                           <span>" + M.DISCOUNT_CODE_USAGES_TEXT + '</span>                         </div>                         <input type="number" class="transition-border" name="allowedUsages" />                       </div>                     </div>                      <div class="checkbox-wrapper f-left col20">                         <input id="useWithOtherDiscounts" class="css-checkbox " type="checkbox" name="useWithOtherDiscounts">                         <label for="useWithOtherDiscounts" class="css-label">' + M.DISCOUNT_USE_WITH_OTHER + '</label>                       </div>                     <div class="checkbox-wrapper f-left col20" id="applyAutomaticallyWrapper">                       <input id="applyAutomatically" class="css-checkbox " type="checkbox" name="applyAutomatically">                       <label for="applyAutomatically" class="css-label">' + M.DISCOUNT_APPLY_WITHOUT_CODE + "<p>" + M.DISCOUNT_APPLY_WITHOUT_CODE_DESC + '</p></label>                     </div>                     <div id="discountValueWrapper" class="col20 f-left">                       <div class="info" >                         <h5>' + M.DISCOUNT_VALUE + '</h5>                       </div>                       <div class="symbol-input price-input">                         <span class="symbol-sign"></span>                         <input type="number" min="0.01" step="0.01" value="0.00" placeholder="0.00" class="transition-border" name="value" />                       </div>                     </div>                     <div class="input-wrapper input-wrapper2">                       <div class="info">                         <h5>' + M.DISCOUNT_START_DATE + "</h5>                         <span>" + M.INCLUSIVE + '</span>                       </div>                       <input type="text" name="validFrom" class="transition-border">                    </div>                     <div class="input-wrapper input-wrapper2 f-right">                       <div class="info">                         <h5>' + M.DISCOUNT_END_DATE + "</h5>                         <span>" + M.INCLUSIVE + '</span>                       </div>                       <input type="text" name="validTo" class="transition-border">                    </div>                     <div class="info">                       <h5>' + M.APPLY_THE_CODE_FOR + '</h5>                     </div>                     <select name="applyTo"></select>                     <div class="col20 f-left none-soft" id="totalOverWrapper">                       <div class="symbol-input">                         <span class="symbol-sign"></span>                         <input type="number" min="0.01" step="0.01" value="0.00" placeholder="0.00" class="transition-border" name="applyOverAmount" />                       </div>                     </div>                     <div class="col20 f-left multiple-items-picker" id="memberGroupsWrapper">                       <ul class="groups">                         <li class="add-group"><a rel="action" data-action="chooseMemberGroups" class="middle-button with-icon blue">' + M.SELECT_MEMBER_GROUPS + '</a></li>                       </ul>                     </div>                     <div class="col20 f-left multiple-items-picker" id="categoriesWrapper">                       <ul class="groups" style="margin-bottom:20px;">                         <li class="add-group"><a rel="action" data-action="chooseProductCategories" class="blue middle-button with-icon">' + M.SELECT_STORE_PRODUCT_CATEGORIES + '</a></li>                         <li data-role="count">' + WebPlatform.format(M.CATEGORIES_SELECTED, "no", 0) + '</li>                       </ul>                     </div>                     <div class="col20 f-left multiple-items-picker" id="productsWrapper">                       <ul class="groups">                         <li class="add-group"><a rel="action" data-action="chooseProductCategories" class="blue middle-button">' + M.SELECT_PRODUCTS + "</a></li>                       </ul>                     </div>                   </div>                 </div>";
                    case "productImageSmallMarkup":
                        return '<a class="product-image add-image">                   <span class="add-button"></span>                 </a>';
                    case "productVariationRow":
                        return '<tr>                   <td width="80px;"><span class="variation-name"></span></td>                   <td>                     <ul class="variation-tags tags-wrapper f-left col20"></ul>                   </td>                   <td width="50px;">                     <div class="checkbox-wrapper f-left col20">                       <input id="advanced-variation%id%" class="css-checkbox " type="checkbox">                       <label for="advanced-variation%id%" style="margin-right: 0" class="css-label button-tooltip" data-timeout="6000" data-tooltip="storeProductAdvancedVariationTooltip">&nbsp;</label>                     </div>                   </td>                   <td width="50px;">                    <a class="set-image button-tooltip" data-tooltip="variationImages" style="margin-right: 15px;"><i class="fa fa-picture-o"></i></a>                    <a class="delete"><i class="fa fa-trash-o"></i></a>                  </td>                 </tr>';
                    case "productCombinationRow":
                        return '<tr>                   <td style="width: 150px"><span></span></td>                   <td>                     <div class="symbol-input %currencyAlign% variation-price">                       <span class="symbol-sign">%currencySymbol%</span>                      <input type="number" min="0.01" step="0.01" value="0.00" placeholder="0.00" name="combinationPrice">                    </div>                  </td>                   <td>                    <div class="symbol-input %currencyAlign% variation-price">                      <span class="symbol-sign">%currencySymbol%</span>                      <input type="number" min="0.01" step="0.01" value="0.00" placeholder="0.00" name="combinationSalePrice">                    </div>                  </td>                   <td>                     <div class="checkbox-wrapper f-left col20">                       <input id="on-sale-%id%" class="css-checkbox " type="checkbox" name="combinationOnSale">                       <label for="on-sale-%id%" class="css-label">&nbsp;</label>                     </div>                   </td>                   <td><input type="text" name="combinationSKU"></td>                   <td><input type="text" min="0" step="1" name="combinationQuantity"></td>                   <td>                    <div class="symbol-input right-sign variation-price">                      <span class="symbol-sign">%weightUnit%</span>                      <input type="text" name="combinationWeight">                    </div>                  </td>                 </tr>';
                    case "productListRow":
                        return '<tr class="member-item">                <td class="desktop"></td>                <td><div class="product-thumb"></div></td>                <td><a href="/me/store/products/%id%" rel="tab"></a></td>                <td class="desktop"></td>                <td></td>                <td><a href="/me/store/products/%id%" rel="tab" class="details"><i class="fa fa-arrow-right"></i></a></td>               </tr>';
                    case "storeProductCategoryMarkup":
                        return '<div class="popup-newpage-wrapper">           <div class="popup-input-wrapper" >             <h5>' + M.PRODUCT_CATEGORY_NAME + '</h5>             <input type="text" name="categoryName" class="focus transition-border">           </div>           <div class="popup-input-wrapper">             <h5>' + M.PRODUCT_CATEGORY_URL + '</h5>             <input type="text" name="categoryUrl" class="transition-border">           </div>         </div>';
                    case "storeAddTaxCountry":
                        return '<div class="popup-newpage-wrapper">           <div class="info">             <h5>' + M.COUNTRY + '</h5>           </div>           <div class="input-wrapper">             <select name="countryCode" class="focus transition-border"></select>           </div>           <div id="stateWrapper" class="col20 f-left none-soft">             <div class="info">               <h5>' + M.STATE + '</h5>             </div>             <div class="input-wrapper">               <select name="state" class="transition-border"></select>             </div>           </div>           <div class="info">             <h5>' + M.TAX_NAME + "</h5>             <span>" + M.TAX_NAME_DESC + '</span>          </div>           <div class="input-wrapper">             <input type="text" name="taxName" class="transition-border">           </div>           <div class="info">             <h5>' + M.TAX_TYPE + '</h5>           </div>           <div class="input-wrapper">             <select type="text" name="taxType" class="transition-border">               <option value="0">' + M.TAX_TYPE_PERCENT + '</option>               <option value="1">' + M.TAX_TYPE_FIXED + '</option>             </select>           </div>           <div class="info">             <h5>' + M.TAX_AMOUNT + '</h5>           </div>           <div class="input-wrapper">             <div class="symbol-input right-symbol">               <span class="symbol-sign">$</span>              <input type="number" min="0.01" step="0.01" value="0.00" placeholder="0.00" name="taxAmount">            </div>          </div>           <div class="checkbox-wrapper f-left col20 mt-15">             <input id="applyToShipping" class="css-checkbox " type="checkbox" name="applyToShipping">             <label for="applyToShipping" class="css-label">' + M.TAX_APPLY_TO_SHIPPING + "<p>" + M.TAX_APPLY_TO_SHIPPING_DESC + '</p></label>           </div>           <div class="checkbox-wrapper f-left col20">             <input id="applyToBusiness" class="css-checkbox " type="checkbox" name="applyToBusiness">             <label for="applyToBusiness" class="css-label">' + M.TAX_APPLY_TO_BUSINESSES + "<p>" + M.TAX_APPLY_TO_BUSINESSES_DESC + "</p></label>           </div>         </div>";
                    case "storeTaxCountryRow":
                        return '<a rel="action" data-action="editTaxCountry" id="tax-country-%id%" class="tax-country col20 f-left">          <span>%country% - %name%<span class="f-right">%amount%</span></span>        </a>';
                    case "editShippingOptionMarkup":
                        return '<div class="popup-newpage-wrapper">           <div class="info">             <h5>' + M.STORE_SHIPPING_COSTS_DEPEND_TITLE + "</h5>             <span>" + M.STORE_SHIPPING_COSTS_DEPEND_DESC + '</span>           </div>           <div class="input-wrapper">             <select name="shippingType" class="focus transition-border">               <option value="0">' + M.STORE_SHIPPING_BY_PRICE + '</option>               <option value="1">' + M.STORE_SHIPPING_BY_WEIGHT + '</option>             </select>           </div>           <div class="info">             <h5>' + M.NAME + '</h5>           </div>           <div class="input-wrapper">             <div class="symbol-input">               <input type="text" name="name">            </div>          </div>           <div class="input-wrapper input-wrapper2">             <div class="info">               <h5>' + M.FROM_RANGE + "</h5>               <span>" + M.INCLUSIVE + '</span>             </div>             <div class="symbol-input">               <span class="symbol-sign"></span>              <input type="number" min="0.01" step="0.01" value="0.00" placeholder="0.00" name="rangeFrom">            </div>          </div>           <div class="input-wrapper input-wrapper2 f-right">             <div class="info">               <h5>' + M.TO_RANGE + "</h5>               <span>" + M.INCLUSIVE + '</span>             </div>             <div class="symbol-input">               <span class="symbol-sign"></span>              <input type="number" min="0.01" step="0.01" value="0.00" placeholder="0.00" name="rangeTo">            </div>          </div>           <div class="info">             <h5>' + M.SHIPPING_COST + '</h5>           </div>           <div class="input-wrapper">             <div class="symbol-input">               <span class="symbol-sign"></span>              <input type="number" min="0.01" step="0.01" value="0.00" placeholder="0.00" name="cost">            </div>          </div>           <div class="info">             <h5>' + M.APPLY_FOR + '</h5>           </div>           <div class="shipping-country-list"><span class="ellipsis"></span><a class="edit-icon f-right"></a></div>         </div>';
                    case "shippingOptionRowMarkup":
                        return '<a rel="action" data-action="editShippingOption" class="shipping-option col20 f-left" data-role="shipping-option" id="shipping-option-%order%">                   <span class="h5">%name%</span>                   <span class="h5 shipping-type">(%title%)</span>                   <span class="ellipsis">%countries%</span>                   <span class="shipping-price">%fromRange% - %toRange% <span>%price%</span></span>                 </a>';
                    case "storeOrderRow":
                        return '<div class="order-item paymentStatus%paymentStatusClass% orderStatus%orderStatusClass%" id="store-order-%id%" data-id="%id%">                   <div class="order-item-wrapper" rel="action" data-action="viewOrderItem" data-id="%id%">                     <div class="tcol-15">%no%</div>                     <div class="tcol-25"><span>%customerName%</span><p>(%customerEmail%)</p></div>                     <div class="tcol-15">%time%</div>                     <div class="tcol-10 roboto">%total%</div>                     <div class="tcol-13">%paymentType%</div>                     <div class="tcol-10 payment-status-field">%paid%</div>                     <div class="tcol-12 status-field"><span class="payment-indicator"></span><span class="order-status-text">%paymentStatus%</span></div>                   </div>                   <div class="order-summary-wrapper none-soft"></div>                 </div>';
                    case "storeOrderRowMobile":
                    case "storeOrderRowContactMobileView":
                        return '<div class="order-item paymentStatus%paymentStatusClass% orderStatus%orderStatusClass%" id="store-order-%id%" data-id="%id%">                 <div class="order-item-wrapper" rel="action" data-action="viewOrderItem" data-id="%id%">                   <section class="left">                     <div>                       <div class="tcol-10">%no%</div>                       <div class="tcol-15">%time%</div>                     </div>                     <div class="tcol-25"><span>%customerName%</span><p>(%customerEmail%)</p></div>                   </section>                   <section class="right">                     <div class="tcol-12"><b>%total%</b></div>                     <div class="tcol-12 status-field"><span class="payment-indicator"></span>%paymentStatus%</div>                   </section>                 </div>                 <div class="order-summary-wrapper none-soft"></div>               </div>';
                    case "storeSubscriptionRow":
                        return '              <div class="order-item" data-id="%id%">                 <div class="order-item-wrapper">                   <div class="tcol-25">%title%</div>                   <div class="tcol-10">                     <span>%price%</span>                     <p class="%partsclz%">(%priceParts%)</p>                   </div>                   <div class="tcol-15">%lastBilling%</div>                   <div data-role="next-billing-date" class="tcol-15 %nextBillingClz%"><span class="subscription-status">%nextBilling%</span></div>                   <div class="tcol-5 row-options"></div>                 </div>               </div>';
                    case "storeOrderRowContactView":
                        return '<div class="order-item paymentStatus%paymentStatusClass% orderStatus%orderStatusClass%" id="store-order-%id%" data-id="%id%">                 <div class="order-item-wrapper" rel="action" data-action="viewOrderItem" data-id="%id%">                  <div class="tcol-10">%no%</div>                  <div class="tcol-25">                    <span>%customerName%</span>                    <p>(%customerEmail%)</p>                  </div>                  <div class="tcol-15">%time%</div>                  <div class="tcol-10 roboto">%total%</div>                  <div class="tcol-12 status-field"><span class="order-status">%paymentStatus%</span></div>                 </div>                <div class="order-summary-wrapper none-soft"></div>              </div>';
                    case "storeOrderInfoRow":
                        return '<div class="order-summary">                   <h4>' + M.PRODUCTS + '</h4>                   <div class="ordered-product titles">                     <div class="tcol-15">' + M.SKU + '</div>                     <div class="tcol-40">' + M.PRODUCT + '</div>                     <div class="tcol-20">' + M.VARIATION + '</div>                     <div class="tcol-10">' + M.QUANTITY + '</div>                     <div class="tcol-10">' + M.PRICE + '</div>                   </div>                   <div class="col20 f-left ordered-products-wrapper"></div>                   <div class="order-shipping-info-wrapper">                     <h4 >' + M.SHIPPING_DETAILS + '</h4>                     <span></span>                   </div>                   <div class="order-billing-info-wrapper">                     <h4 >' + M.BILLING_DETAILS + '</h4>                     <span></span>                   </div>                   <div class="order-payment-info-wrapper">                     <h4 >' + M.PAYMENT_INFO + '</h4>                     <span></span>                   </div>                   <div class="order-buttons-info-wrapper col20 f-left mt-15">                   <a rel="action" data-action="orderActions" class="middle-button green f-right">' + M.ACTIONS + '</a>                  </div>                   \x3c!--<div class="order-details">                     <h4 style="margin-top:30px;">Coupon Codes</h4>                     <span>                       NONE                     </span>                   </div>                   <div class="order-details">                     <h4 style="margin-top:30px;">Invoice</h4>                     <a href="" class="blue-text">View Invoice</a>                   </div> --\x3e                </div>';
                    case "storeOrderInfoItemRow":
                        return '<div class="ordered-product">                   <div class="tcol-10" style="overflow:visible;">%thumb%</div>                   <div class="tcol-30">%name%</div>                   <div class="tcol-20">%variations%</div>                   <div class="tcol-10">%quantity%</div>                   <div class="tcol-10 roboto">%price%</div>                   <div class="tcol-15">%sku%</div>                   \x3c!--<div class="tcol-5"><a href="" class="delete-product"><i class="fa fa-trash-o"></i></a></div> --\x3e                </div>';
                    case "storeDiscountsRow":
                        return '<tr class="member-item %disabled%" data-id="%id%">               \t\t<td><span class="payment-indicator"></span></td>               \t\t<td>%code%<span>%name%</span></td>               \t\t<td>%type%</td>               \t\t<td>%validFrom%</td>               \t\t<td>%validTo%</td>                         <td>%usages%</td>               \t\t<td>                     <a rel="action" data-action="changeDiscountStatus" class="disable-coupon">%changeStatusBtn%</a>                     <a rel="action" data-action="editDiscount" class="edit-coupon">' + M.EDIT + '</a>                  </td>               \t\t<td><a rel="action" data-action="deleteDiscount" class="delete-coupon"><i class="fa fa-trash-o"></i></a></td>               \t</tr>';
                    case "addPageDialogMarkupNew":
                        return '<div class="add-page-wrapper flex flex-row">           <a class="add-page page flex-1"><p></p><h3>' + M.PAGE + '</h3></a>           <a class="add-page store flex-1"><p></p><h3>' + M.STORE_TITLE + '</h3></a>           <a class="add-page blog flex-1"><p></p><h3>' + M.BLOG_TITLE + '</h3></a>           <a class="add-page portfolio flex-1"><p></p><h3>' + M.PORTFOLIO_TITLE + '</h3></a>           <a class="add-page popup flex-1"><p></p><h3>' + M.POPUP + '</h3></a>           <a class="add-page group flex-1"><p></p><h3>' + M.GROUP + "</h3></a>         </div>";
                    case "containerResizePopupMarkup":
                        return '<div class="popup-widget-wrapper container-layout-wrapper">           <div class="options-wrapper">             <h5>' + M.CONTAINER_WIDTH + '</h5>             <ul class="option-select container-type container-width">              <li><a class="container-boxed transition-bg"><span></span>' + M.CONTAINER_BOXED + '</a></li>              <li><a class="container-full transition-bg"><span></span>' + M.CONTAINER_FULL + '</a></li>            </ul>          <div class="options-wrapper" style="margin-bottom:0;">             <h5>' + M.CONTAINER_HEIGHT + '</h5>             <ul class="option-select container-type container-height" style="margin-bottom:0;">              <li><a class="container-normal transition-bg"><span></span>' + M.CONTAINER_NORMAL + '</a></li>              <li><a class="container-height transition-bg"><span></span>' + M.CONTAINER_HEIGHT + '</a></li>            </ul>          </div>           <div class="checkbox-wrapper popup-input-wrapper mt-25">             <input id="isMobileFullHeight" name="isMobileFullHeight" class="css-checkbox" type="checkbox">             <label for="isMobileFullHeight" class="css-label">' + M.KEEP_FULLHEIGHT_ON_MOBILE + "</label>          </div>        <div>";
                    case "storeProductsLimitReachedMarkup":
                        return '<div>           <div class="upgrade-modal">           <img src="' + resources + '/images/store-upgrade.png">           <h2>' + M.PRODUCT_LIMIT + "</h2>           <span>" + M.NO_STORE_ITEMS_AVAILABLE + '</span>           <a data-action="openBilling" class="blue upgrade-button">' + M.UPGRADE + "</a>           </div>         </div>";
                    case "pagesLimitReachedMarkup":
                        return '<div>           <div class="upgrade-modal">           <img src="' + resources + '/images/pages-upgrade.png">           <h2>' + M.PAGE_LIMIT + "</h2>           <span>" + M.NO_PAGES_AVAILABLE + '</span>           <a href="/me/settings/billing" class="blue upgrade-button">' + M.UPGRADE + "</a>           </div>         </div>";
                    case "contributorsLimitReachedMarkup":
                        return '<div>           <div class="upgrade-modal">           <img src="' + resources + '/images/contributor-upgrade.png">           <h2>' + M.CONTRIBUTOR_LIMIT + "</h2>           <span>" + M.NO_CONTRIBUTORS_AVAILABLE + '</span>           <a data-action="openBilling" class="blue upgrade-button">' + M.UPGRADE + "</a>           </div>         </div>";
                    case "storageLimitReachedMarkup":
                    case "popupShowOnStructure":
                        return '<div>           <div class="upgrade-modal">           <img src="' + resources + '/images/storage-upgrade.png">           <h2>' + M.STORAGE_LIMIT + "</h2>           <span>" + M.NO_STORAGE_AVAILABLE + '</span>           <a href="/me/settings/billing" class="blue upgrade-button">' + M.UPGRADE + "</a>           </div>         </div>";
                    case "popupSettingsButtons":
                        return '<div class="modal-settings active-widget-settings">                   <a rel="action" data-action="popupSettings" class="widget-setting popup-edit">' + M.POPUP_SETTINGS + '</a>                   <a rel="action" data-action="popupShowOnSettings" class="widget-setting widget-button-default widget-button-default-text">' + M.POPUP_SHOW_ON_SETTINGS + '</a>                   <a rel="action" data-action="popupStylingSettings" class="widget-setting widget-button-default popup-styling"></a>                   <a rel="action" data-action="savePopup" class="widget-setting f-right none-soft popup-edit popup-save">' + M.SAVE + "</a>                 </div>";
                    case "megaMenuSettingsButtons":
                        return '<div class="megamenu-settings-wrapper">                  <div class="modal-settings active-widget-settings">                   <a rel="action" data-action="saveMegaMenu" class="widget-setting none-soft btn-save">' + M.CONFIRM + '</a>                   <a rel="action" data-action="closeMegaMenu" class="widget-setting popup-edit btn-cancel">' + M.CLOSE + "</a>                   </div>                </div>";
                    case "popupSettingsStructure":
                        return '<div class="popup-widget-wrapper">           <ul class="option-select container-type modal-select">            <li><a class="modal-center transition-bg"><span></span>' + M.CENTER_POP + '</a></li>            <li><a class="modal-bottom-right transition-bg"><span></span>' + M.BOTTOM_RIGHT_POP + '</a></li>            <li><a class="modal-bottom-left transition-bg"><span></span>' + M.BOTTOM_LEFT_POP + '</a></li>            <li><a class="modal-full transition-bg"><span></span>' + M.FULL_POP + '</a></li>            <li><a class="modal-top transition-bg"><span></span>' + M.TOP_POP + '</a></li>            <li><a class="modal-bottom transition-bg"><span></span>' + M.BOTTOM_POP + '</a></li>          </ul>          <div class="popup-input-wrapper" >             <h5>' + M.POPUP_NAME + '</h5>             <input type="text" name="name" />           </div>           <div class="popup-input-wrapper" >             <h5>' + M.POPUP_SHOW + '</h5>           </div>           <div class="checkbox-wrapper popup-input-wrapper">             <input id="showPopupWithDelay" name="showPopupWithDelay" class="css-checkbox" type="checkbox">             <label for="showPopupWithDelay" class="css-label">' + M.POPUP_DELAY + '</label>          </div>          <div class="popup-input-wrapper" id="popupDelaySliderWrapper">             <h5 class="inline">' + M.POPUP_DELAY_DESC + '</h5>            <input type="text" readonly="readonly" class="slider-val">             <div id="popupDelaySlider"></div>           </div>           <div class="checkbox-wrapper popup-input-wrapper">             <input id="showPopupOnScroll" name="showPopupOnScroll" class="css-checkbox" type="checkbox">             <label for="showPopupOnScroll" class="css-label">' + M.POPUP_SCROLL + '</label>          </div>          <div class="popup-input-wrapper" id="scrollDistanceSliderWrapper">             <h5 class="inline">' + M.POPUP_SCROLL_DESC + '</h5>            <input type="text" readonly="readonly" class="slider-val">             <div id="scrollDistanceSlider"></div>           </div>           <div class="checkbox-wrapper popup-input-wrapper">             <input id="popupExit" name="showOnExit" class="css-checkbox" type="checkbox">             <label for="popupExit" class="css-label">' + M.POPUP_EXIT + '</label>          </div>          <div class="checkbox-wrapper popup-input-wrapper">             <input id="showOnMobile" name="showOnMobile" class="css-checkbox" type="checkbox">             <label for="showOnMobile" class="css-label">' + M.POPUP_ALLOWED_ON_MOBILE + '</label>          </div>          <div class="popup-input-wrapper" style="margin-top: 10px;">             <h5>' + M.POPUP_FREQUENCY_SETTINGS_TITLE + '</h5>             <select name="popupShowFrequency">               <option value="once">' + M.POPUP_SHOW_ONLY_ONCE + '</option>               <option value="session">' + M.POPUP_SHOW_ONCE_PER_SESSION + '</option>               <option value="always">' + M.POPUP_SHOW_EVERY_TIME + '</option>             </select>           </div>           <div class="popup-input-wrapper">             <h5>' + M.POPUP_ANIMATION + '</h5>             <select name="popupAnimation">               <option value="popup-fade">' + M.FADE_IN + '</option>               <option value="popup-fade-scale">' + M.FADE_IN_SCALE + '</option>               <option value="popup-fade-top">' + M.FADE_IN_FROM_TOP + '</option>               <option value="popup-fade-bottom">' + M.FADE_IN_FROM_BOTTOM + '</option>               <option value="popup-fade-right">' + M.FADE_IN_FROM_RIGHT + '</option>               <option value="popup-fade-left">' + M.FADE_IN_FROM_LEFT + '</option>               <option value="popup-fade-superscale">' + M.FADE_SUPERSCALE + '</option>               <option value="popup-flip-horizontal">' + M.FLIP_HORIZONTAL + '</option>               <option value="popup-flip-vertical">' + M.FLIP_VERTICAL + "</option>             </select>           </div>         </div>";
                    case "popupStylingStructure":
                        return '<div class="popup-widget-wrapper">           <div class="col20 f-left" style="margin-bottom:30px;">             <ul class="option-select five-way-select">               <li class="blank"><a><span></span></a></li>               <li><a class="popup-top transition-bg"><span></span></a></li>              <li class="blank"><a><span></span></a></li>               <li><a class="popup-left transition-bg"><span></span></a></li>              <li><a class="popup-center transition-bg"><span></span></a></li>              <li><a class="popup-right transition-bg"><span></span></a></li>              <li class="blank"><a><span></span></a></li>               <li><a class="popup-bottom transition-bg"><span></span></a></li>              <li class="blank"><a><span></span></a></li>             </ul>           </div>           <div class="popup-input-wrapper color-pick-wrap-widgets" style="margin-bottom:0;">             <div class="color-pick-wrap">               <div></div>               <input type="text" value="" class="colorpicker-selected" name="contentBackgroundColor">             </div>             <div class="info">               <h5>' + M.POPUP_BACKGROUND_COLOR + '</h5>             </div>           </div>           <div class="col20 f-left none" id="bgOverlaySettings">             <div class="popup-input-wrapper color-pick-wrap-widgets" style="margin-bottom:0;">               <div class="color-pick-wrap">                 <div></div>                 <input type="text" value="" class="colorpicker-selected" name="overlayColor">               </div>               <div class="info">                 <h5>' + M.OVERLAY_BACKGROUND_COLOR + '</h5>               </div>             </div>           </div>           <div class="popup-input-wrapper color-pick-wrap-widgets">             <div class="color-pick-wrap">               <div></div>               <input type="text" value="" class="colorpicker-selected" name="closeBtnColor">             </div>             <div class="info">               <h5>' + M.POPUP_CLOSE_COLOR + '</h5>             </div>           </div>           <div class="popup-input-wrapper">             <h5 class="inline">' + M.PADDING_SIZE + '</h5>            <input type="text" readonly="readonly" class="slider-val">             <div id="paddingSizeSlider"></div>           </div>         </div>';
                    case "popupBackgroundStructure":
                        return '<div class="popup-newpage-wrapper">                   <div class="left-section-pop">                     <a class="add-image transition-all backgroundSelectImageHolder full-width" style="margin-top:0;">                       <span class="add-button transition-all"></span>                     </a>                   </div>                   <div class="input-wrapper input-wrapper-small color-pick-wrap-widgets" style="margin-bottom:10px;">                     <div class="color-pick-wrap">                       <div></div>                       <input type="text" value="" class="colorpicker-selected modify" name="bgColor">                     </div>                     <div class="info">                       <h5>' + M.BACKGROUND_COLOR + '</h5>                     </div>                   </div>                  <div class="col20 f-left">                    <div class="popup-input-wrapper mt-15">                       <div class="info">                         <h5>' + M.BACKGROUND_IMAGE_POSITION + '</h5>                       </div>                       <select class="page-select modify" name="bgPosition">                         <option value="left top">' + M.LEFT_TOP + '</option>                         <option value="left center">' + M.LEFT_CENTER + '</option>                         <option value="left bottom">' + M.LEFT_BOTTOM + '</option>                         <option value="right top">' + M.RIGHT_TOP + '</option>                         <option value="right center">' + M.RIGHT_CENTER + '</option>                         <option value="right bottom">' + M.RIGHT_BOTTOM + '</option>                         <option value="center top">' + M.CENTER_TOP + '</option>                         <option value="center center">' + M.CENTER_CENTER + '</option>                         <option value="center bottom">' + M.CENTER_BOTTOM + '</option>                       </select>                     </div>                     <div class="popup-input-wrapper">                       <div class="info">                         <h5>' + M.BACKGROUND_IMAGE_REPEAT + '</h5>                       </div>                       <select class="page-select modify" name="bgRepeat">                         <option value="repeat">' + M.REPEAT + '</option>                         <option value="repeat-x">' + M.REPEAT_HORIZONTALLY + '</option>                         <option value="repeat-y">' + M.REPEAT_VERTICALLY + '</option>                         <option value="no-repeat">' + M.NO_REPEAT + '</option>                         <option value="cover">' + M.COVER_WHOLE_AREA + "</option>                       </select>                     </div>                   </div>                </div>";
                    case "popupPickThumbnailPopup":
                        return '<div class="popup-newpage-wrapper">                   <div class="left-section-pop">                     <a class="add-image transition-all backgroundSelectImageHolder full-width" style="margin-top:0;">                       <span class="add-button transition-all"></span>                     </a>                   </div>                   <div class="checkbox-wrapper popup-input-wrapper">                     <input id="visibleAsTemplate" name="visibleAsTemplate" class="css-checkbox" type="checkbox">                     <label for="visibleAsTemplate" class="css-label">VISIBLE AS TEMPLATE FOR NEW POPUPS</label>                  </div>                </div>';
                    case "emailSettingsMarkup":
                        return '<div class="popup-widget-wrapper">                   <div class="popup-input-wrapper" >                     <h5>' + M.SMTP_HOST + '</h5>                      <input type="text" name="smtpHost" class="transition-all">                   </div>                   <div class="popup-input-wrapper" >                     <h5>' + M.SMTP_PORT + '</h5>                      <input type="number" name="smtpPort" placeholder="ex. 587" class="transition-all">                   </div>                   <div class="popup-input-wrapper" >                     <h5>' + M.SMTP_USER + '</h5>                      <input type="text" name="smtpUser" class="transition-all">                   </div>                   <div class="popup-input-wrapper" >                     <h5>' + M.SMTP_PASS + '</h5>                      <input type="password" autocomplete="new-password" name="smtpPass" class="transition-all">                   </div>                   <div class="popup-input-wrapper" >                     <h5>From email</h5>                      <input type="text" name="emailFrom" class="transition-all">                   </div>                   <div class="popup-input-wrapper" >                     <h5>From name</h5>                      <input type="text" name="fromName" class="transition-all">                   </div>                 </div>';
                    case "mailchimpSettingsMarkup":
                        return '<div class="popup-widget-wrapper">                   <div class="info">                     <span>You can connect your mailchimp account and send collected emails to your mailchimp lists. Simply enter your API key below</span>                   </div>                   <div class="popup-input-wrapper mt-15" >                     <h5>Mailchimp API Key</h5>                      <input type="text" name="mailchimpKey" class="transition-all">                   </div>                   <div class="checkbox-wrapper">                       <input id="enableDoubleOptInCbx" class="css-checkbox" type="checkbox" name="enableDoubleOptIn" />                       <label for="enableDoubleOptInCbx" class="css-label">' + M.MAILCHIMP_ENABLE_DOUBLE_OPT_IN + "<span>" + M.MAILCHIMP_DOUBLE_OPT_IN_DESC + "</span>                       </label>                     </div>                 </div>";
                    case "getresponseSettingsMarkup":
                        return '<div class="popup-widget-wrapper">                   <div class="info">                     <span>' + M.GETRESPONSE_SETTINGS_INFO + '</span>                   </div>                   <div class="popup-input-wrapper mt-15" >                     <h5>' + M.GETRESPONSE_API_KEY + '</h5>                      <input type="text" name="getresponseKey" class="transition-all">                   </div>                 </div>';
                    case "mailerliteSettingsMarkup":
                        return '<div class="popup-widget-wrapper">                   <div class="info">                     <span>' + M.MAILERLITE_SETTINGS_INFO + '</span>                   </div>                   <div class="popup-input-wrapper mt-15" >                     <h5>' + M.MAILERLITE_API_KEY + '</h5>                      <input type="text" name="mailerliteKey" class="transition-all">                   </div>                 </div>';
                    case "moosendSettingsMarkup":
                        return '<div class="popup-widget-wrapper">                   <div class="info">                     <span>' + M.MOOSEND_SETTINGS_INFO + '</span>                   </div>                   <div class="popup-input-wrapper mt-15" >                     <h5>' + M.MOOSEND_API_KEY + '</h5>                      <input type="text" name="moosendKey" class="transition-all">                   </div>                 </div>';
                    case "activecampaignSettingsMarkup":
                        return '<div class="popup-widget-wrapper">                   <div class="info">                     <span style="line-height:1.4;margin-bottom:20px;">' + M.ACTIVECAMPAIGN_SETTINGS_DESC + '</span>                   </div>                   <div class="popup-input-wrapper mt-15" >                     <h5>' + M.ACTIVECAMPAIGN_SETTINGS_HOST + '</h5>                      <div class="col20 f-left">                       <input type="text" name="activecampaignHost" class="transition-all" style="width: 60%">                       <span class="f-left" style="line-height: 60px; margin-left: 15px;">.activehosted.com</span>                     </div>                   </div>                   <div class="popup-input-wrapper mt-15" >                     <h5>' + M.API_KEY + '</h5>                      <input type="text" name="activecampaignKey" class="transition-all">                   </div>                 </div>';
                    case "fbPixelSettingsMarkup":
                        return '<div class="popup-widget-wrapper">                   <div class="info">                     <span>' + M.FB_PX_ID_PROMPT_MESSAGE + '</span>                   </div>                   <div class="popup-input-wrapper mt-15" >                     <h5>Facebook Pixel ID</h5>                      <input type="text" name="fbpixelKey" class="transition-all" placeholder="xxxxxxxxxxxxxxx">                   </div>                   <div class="checkbox-wrapper col20 f-left mb-15">                     <input id="fb-px-capi-cbx" class="css-checkbox" type="checkbox" name="enabled" />                     <label for="fb-px-capi-cbx" class="css-label">' + M.ENABLE_CAPI + "                        <span>" + M.CAPI_DESC + ' <a href="%capiHelpArticle%" target="_blank">' + M.LEARN_MORE + '</a></span>                    </label>                   </div>                   <div class="col20 f-left popup-input-wrapper mt-5 none-soft" data-role="fb-px-token-wrapper">                     <h5>' + M.CAPI_TOKEN + '</h5>                     <div class="info">                       <span>' + M.CAPI_TOKEN_DESC + ' <a href="%capiHelpArticle%" class="f-left cl-left" target="_blank">' + M.LEARN_MORE + '</a></span>                     </div>                     <input type="password" name="token" class="transition-all" placeholder="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx">                     <a class="f-left mt-5 underline blue-text" rel="toggle" data-toggle="#testFbEventsWrapper">' + M.TEST_CAPI + '</a>                     <div class="col20 f-left none-soft" id="testFbEventsWrapper">                      <div class="info f-left mt-5">                         <span>' + M.TEST_CAPI_DESC + '</span>                       </div>                       <input type="text" name="testCode" class="transition-all" placeholder="TEST12345">                     </div>                  </div>                 </div>';
                    case "editWidgetAnimationPopup":
                        return '<div class="upper-navigation col20 mb-15 flex-none" data-role="slider-nav">                   <ul>                     <li><a>' + M.ANIMATION + "</a></li>                     <li><a>" + M.ELEMENT_DELAY + '</a></li>                   </ul>                 </div>                 <div class="cpanel-popup-slider flex-1 flex flex-row">                   <div class="cpanel-popup-slide popup-widget-wrapper overflow">                   <div class="popup-input-wrapper" >                     <div class="info">                       <h5>' + M.SELECT_ANIMATION_TYPE + '</h5>                     </div>                     <select class="button-size-select" name="animation" style="width: 100%">                       <option value="0">' + M.NONE + '</option>                       <option value="1">' + M.FADE_IN + '</option>                       \x3c!--<option value="2">' + M.SLIDE_FROM_TOP + '</option>                       <option value="3">' + M.SLIDE_FROM_LEFT + '</option>                       <option value="4">' + M.SLIDE_FROM_RIGHT + '</option>                       <option value="5">' + M.SLIDE_FROM_BOTTOM + '</option> --\x3e                       <option value="6">' + M.ZOOM_IN + '</option>                       <option value="bounceIn">' + M.BOUNCE + '</option>                       <option value="rollIn">' + M.ROLL_IN + '</option>                       <option value="rotateIn">' + M.ROTATE + '</option>                       <option value="fadeInLeft">' + M.FADE_IN_FROM_LEFT + '</option>                       <option value="fadeInRight">' + M.FADE_IN_FROM_RIGHT + '</option>                       <option value="fadeInDown">' + M.FADE_IN_FROM_TOP + '</option>                       <option value="fadeInUp">' + M.FADE_IN_FROM_BOTTOM + '</option>                       <option value="flipInX">' + M.FLIP_VERTICALLY + '</option>                       <option value="flipInY">' + M.FLIP_HORIZONTALLY + '</option>                       <option value="bounceInDown">' + M.BOUNCE_FROM_TOP + '</option>                       <option value="bounceInLeft">' + M.BOUNCE_FROM_LEFT + '</option>                       <option value="bounceInRight">' + M.BOUNCE_FROM_RIGHT + '</option>                       <option value="bounceInUp">' + M.BOUNCE_FROM_BOTTOM + '</option>                       <option value="lightSpeedIn">' + M.TILT_FROM_LEFT + '</option>                     </select>                   </div>                   <div class="popup-input-wrapper input-slider-wrapper" >                     <h5>' + M.ANIMATION_SPEED + '</h5>                    <div id="animationDurationSlider"></div>                     <input type="text" readonly="readonly" class="slider-val">                   </div>                   <div class="popup-input-wrapper input-slider-wrapper" >                     <h5>' + M.ANIMATION_DELAY + '</h5>                    <div id="animationDelaySlider"></div>                     <input type="text" readonly="readonly" class="slider-val">                   </div>                   <div class="popup-input-wrapper t-center mt-15">                     <a class="blue middle-button animation-play f-none inline-block"><i class="fa fa-play-circle"></i>' + M.PLAY_ANIMATION + '</a>                   </div>                   </div>                  <div class="cpanel-popup-slide popup-widget-wrapper overflow">                     <div class="input-wrapper mb-10">                       <h4>' + M.ELEMENT_DELAY + '</h4>                       <span class="f-left light-gray-text mt-15">' + M.ELEMENT_DELAY_DESC + '</span>                     </div>                    <div class="input-wrapper input-wrapper2 f-left mt-15">                       <h5>' + M.MINUTES + '</h5>                       <input name="minutes" type="number" min="0" step="1" />                     </div>                     <div class="input-wrapper input-wrapper2 f-right mt-15">                       <h5>' + M.SECONDS + '</h5>                       <input name="seconds" type="number" min="0" step="1" />                   </div>                   </div>                </div>';
                    case "productVariationNameInput":
                        return '<div class="inline-popup-wrapper">                   <h4>' + M.ADD_VARIATION_NAME_HINT + '</h4>                   <input type="text" class="tag-autocomplete" /><a class="plus-sign"></a>                </div>';
                    case "editColumnSettingsMarkup":
                        return '<div class="popup-newpage-wrapper">                   <div class="left-section-pop">                     <a class="add-image transition-all backgroundSelectImageHolder col20" style="margin-top:0; width: 100%;">                       <span class="add-button transition-all"></span>                     </a>                   </div>                   <div class="input-wrapper input-wrapper-small color-pick-wrap-widgets" style="margin-bottom:10px;">                     <div class="color-pick-wrap">                       <div></div>                       <input type="text" value="" class="colorpicker-selected modify" name="bgColor">                     </div>                     <div class="info">                       <h5>' + M.BACKGROUND_COLOR + '</h5>                     </div>                   </div>                  <div class="f20 noParallaxWrapper">                    <div class="col20 f-left" id="bgPositionControlsWrapper">                       <div class="popup-input-wrapper mt-15">                         <div class="info">                           <h5>' + M.BACKGROUND_IMAGE_POSITION + '</h5>                         </div>                         <select class="page-select modify" name="bgPosition">                           <option value="left top">' + M.LEFT_TOP + '</option>                           <option value="left center">' + M.LEFT_CENTER + '</option>                           <option value="left bottom">' + M.LEFT_BOTTOM + '</option>                           <option value="right top">' + M.RIGHT_TOP + '</option>                           <option value="right center">' + M.RIGHT_CENTER + '</option>                           <option value="right bottom">' + M.RIGHT_BOTTOM + '</option>                           <option value="center top">' + M.CENTER_TOP + '</option>                           <option value="center center">' + M.CENTER_CENTER + '</option>                           <option value="center bottom">' + M.CENTER_BOTTOM + '</option>                         </select>                       </div>                       <div class="popup-input-wrapper">                         <div class="info">                           <h5>' + M.BACKGROUND_IMAGE_REPEAT + '</h5>                         </div>                         <select class="page-select modify" name="bgRepeat">                           <option value="repeat">' + M.REPEAT + '</option>                           <option value="repeat-x">' + M.REPEAT_HORIZONTALLY + '</option>                           <option value="repeat-y">' + M.REPEAT_VERTICALLY + '</option>                           <option value="no-repeat">' + M.NO_REPEAT + '</option>                           <option value="cover">' + M.COVER_WHOLE_AREA + '</option>                           <option value="contain">' + M.BG_SIZE_CONTAIN + '</option>                         </select>                       </div>                     </div>                     <div class="col20 f-left" data-role="bg-gradient">' + format(Templates.get("gradientMarkup"), "id", "bgGradient", "margin", "mb-15") + '</div>                    <div class="checkbox-wrapper">                       <input id="addOverlayCbx" class="css-checkbox" type="checkbox" name="addOverlay" />                       <label for="addOverlayCbx" class="css-label">' + M.ADD_OVERLAY + '</label>                     </div>                     <div class="col20 f-left" id="overlayColorWrapper">                       <div class="input-wrapper col20 f-left color-pick-wrap-widgets">                         <div class="color-pick-wrap">                           <div></div>                           <input type="text" class="colorpicker-selected" name="overlayColor">                         </div>                         <div class="info">                           <h5>' + M.OVERLAY_COLOR + "</h5>                         </div>                       </div>                         " + format(Templates.get("gradientMarkup"), "id", "overlayGradient", "margin", "mb-15") + '                    </div>                     <div class="input-wrapper mt-15">                       <div class="info">                         <label>' + M.COLUMN_MARGIN + '</label>                        <input type="text" readonly="readonly" class="slider-val" name="topMargin">                       </div>                       <div id="topMargin"></div>                     </div>                     <div class="f-left mt-15 mb-15 col20 inline-settings vertical-flex">                       <h5 class="flex-0">' + M.CONTENT_ALIGNMENT + '</h5>                       <div style="margin-left: 20px;" data-role="column-align">                         <a class="column-alignment top-icon f-left button-tooltip" data-align="justify-flex-start" data-bottom="true" data-tooltip="columnAlignTop" data-timeout="5500"></a>                         <a class="column-alignment middle-icon f-left button-tooltip" data-align="justify-center" data-bottom="true" data-tooltip="columnAlignMiddle" data-timeout="5500"></a>                         <a class="column-alignment bottom-icon f-left button-tooltip" data-align="justify-flex-end" data-bottom="true" data-tooltip="columnAlignBottom" data-timeout="5500"></a>                       </div>                     </div>                     <div class="col20 mb-5 f-left gray-section product-select-wrapper">                       <div class="col20 f-left ab-step center-vertically">                         <h4 class="roboto">' + M.BORDER + '</h4>                         <a class="text-link blue-text" data-role="changeBorderStyles">' + M.CHANGE + '</a>                       </div>                     </div>                     <div class="col20 mb-15 f-left gray-section product-select-wrapper">                       <div class="col20 f-left ab-step center-vertically">                         <h4 class="roboto">' + M.SHADOW + '</h4>                         <a class="text-link blue-text" data-role="changeShadowStyles">' + M.CHANGE + '</a>                       </div>                     </div>                     <div class="input-wrapper mt-5">                       <div class="checkbox-wrapper">                         <input id="addBgEffect" class="css-checkbox" type="checkbox" name="addBgEffect" />                         <label for="addBgEffect" class="css-label">' + M.TILT_BG_EFFECT + '</label>                       </div>                       <div class="col20 f-left none-soft" data-role="tilted-bg-style">                        <div class="col20 f-left gray-section product-select-wrapper mt-15 mb-15">                           <div class="col20 f-left ab-step center-vertically">                             <h4 class="roboto">' + M.TILT_BG_EFFECT_STYLE + '</h4>                             <a class="text-link blue-text" data-role="editColumnBgEffect">' + M.CHANGE + '</a>                           </div>                         </div>                      </div>                    </div>                    <div class="checkbox-wrapper" id="globalContentChbxWrapper">                       <input id="useGlobalContent" class="css-checkbox" type="checkbox" name="useGlobalContent" />                       <label for="useGlobalContent" class="css-label">' + M.GLOBAL_COLUMN_TITLE + "<span>" + M.GLOBAL_COLUMN_DESC + '</span></label>                     </div>                     <div class="popup-input-wrapper f-left mt-15 none-soft" id="globalContentWrapper">                       <div class="info">                         <h5>' + M.GLOBAL_COLUMN_CONTENT + '</h5>                       </div>                       <select name="global">                         <option value="" disabled="disabled" style="display: none">' + M.GLOBAL_COLUMN_SELECT + '</option>                         <option value="new">' + M.SAVE_GLOBAL_COLUMN + '</option>                       </select>                       <a class="small-info-text f-right none-soft" data-role="rename-global">' + M.RENAME_GLOBAL_COLUMN + "</a>                     </div>                   </div>                </div>";
                    case "columnSettingsBorderStyleMarkup":
                        return '<div class="popup-newpage-wrapper">                   <div class="f20 noParallaxWrapper">                    <div class="input-wrapper input-wrapper-margin color-pick-wrap-widgets">                       <div class="color-pick-wrap">                         <div></div>                         <input type="text" value="" class="colorpicker-selected" name="borderColor">                       </div>                       <div class="info">                         <h5>' + M.BORDER_COLOR + '</h5>                       </div>                     </div>                     <div class="popup-input-wrapper mt-15 input-slider-wrapper">                       <h5 class="inline">' + M.BORDER_SIZE + '</h5>                      <div id="borderSizeSlider"></div>                       <input type="text" readonly="readonly" class="slider-val">                     </div>                     <div class="popup-input-wrapper input-slider-wrapper mb-25" >                       <h5 class="inline">' + M.BORDER_RADIUS + '</h5>                      <div id="borderRadiusSlider"></div>                       <input type="text" readonly="readonly" class="slider-val">                     </div>                   </div>                </div>';
                    case "websiteSettingsIconsWindow":
                        return '<div class="f-left col20 web-setings-wrapper">           <a data-action="showWebsiteStyling" class="col10 f-left website-setting-wrapper system-border-color-hover2"><img src="' + resources + '/images/web-settings/new/1.png"><span>' + M.WEBSITE_STYLING + '</span></a>           <a data-action="showHeadersSettings" class="col10 f-left website-setting-wrapper system-border-color-hover2"><img src="' + resources + '/images/web-settings/new/2.png"><span>' + M.HEADERS + '</span></a>           <a data-action="showOnPageSEO" class="col10 f-left website-setting-wrapper system-border-color-hover2"><img src="' + resources + '/images/web-settings/new/3.png"><span>' + M.PAGE_SEO + '</span></a>           <a data-action="showAdvancedSettings" class="col10 f-left website-setting-wrapper system-border-color-hover2"><img src="' + resources + '/images/web-settings/new/4.png"><span>' + M.ADVANCED_SETTINGS + '</span></a>           <a data-action="showCustomCodeEditor" class="col10 f-left website-setting-wrapper system-border-color-hover2"><img src="' + resources + '/images/web-settings/new/5.png"><span>' + M.CUSTOM_CODE + '</span></a>           <a data-action="showFileManager" class="col10 f-left website-setting-wrapper system-border-color-hover2"><img src="' + resources + '/images/web-settings/new/6.png"><span>' + M.FILE_MANAGER + "</span></a>         </div>";
                    case "footerSettings":
                        return '<div class="header-label-wrapper footer-controls">                 <p class="header-label">' + M.FOOTER + ' <span class="arrow">&darr;</span></p>                 <a rel="action" data-action="toggleFooter" class="header-label system-bg-color system-bg-color-hover"><span class="hide-button"></span><span class="caption"></class></a>               </div>';
                    case "showHideHeaderSettings":
                        return '<div class="header-label-wrapper header-controls">                 <p class="header-label">' + M.HEADER + ' <span class="arrow">&uarr;</span></p>                 <a rel="action" data-action="toggleHeader" class="header-label system-bg-color system-bg-color-hover"><span class="hide-button"></span><span class="caption"></class></a>               </div>';
                    case "showHideFixedHeaderSettings":
                        return '<div class="header-label-wrapper header-controls">                 <p class="header-label">' + M.FIXED_HEADER + '<span class="arrow">&uarr;</span></p>                 <a class="header-label toggle-btn system-bg-color system-bg-color-hover  button-tooltip" data-tooltip="fixedHeaderCollapse" data-timeout="4500"><span class="hide-button"></span><span class="caption"></class></a>               </div>';
                    case "storeProductAdditionalField":
                        return '<section class="half-section mt-15">                   <h5 class="info">' + M.STORE_PRODUCT_ADDITIONAL_FIELD_LABEL + '</h5>                   <input type="text" />                   <a class="remove"></a>                 </section>';
                    case "addPageTemplates":
                        return '<div class="cpanel-left-navigation">                   <h3>' + M.CATEGORIES + '</h3>                   <div class="categories-wrapper">                     <ul class="admin-custom-scroll"></ul>                   </div>                </div>                 <div class="content-wrapper admin-custom-scroll dark-admin-custom-scroll"></div>';
                    case "pageTemplateItemMarkup":
                        return '<div class="page-wrapper" data-id="%id%">               <div class="page-thumb" data-action="select" data-id="%id%" style="background-image:url(%thumb%)"></div>               <div class="buttons-wrapper col20 f-left">                 <a data-action="select" class="select-btn system-bg-color system-bg-color-hover">' + M.SELECT + '</a>                 <a data-action="preview">' + M.PREVIEW + "</a></div>               </div>";
                    case "popupTemplateItemMarkup":
                        return '<div class="page-wrapper" data-id="%id%">                 <img src="%thumb%" class="page-thumb" data-action="select" data-id="%id%" />               </div>';
                    case "pricingWidgetSettingsPopup":
                        return '<div class="popup-widget-wrapper">             <div class="popup-input-wrapper" >               <div class="popup-input-wrapper" >                 <h5 class="inline">Pricing Table Design</h5>                <select name="design">                  <option value="1">Pricing blocks with shadow</option>                   <option value="2">Flat pricing blocks</option>                   <option value="3">Joined in a single container</option>                 </select>               </div>               <div class="input-wrapper none-soft" id="pricingShadowWrapper">                 <div class="checkbox-wrapper">                   <input id="pricingShadow" class="css-checkbox" name="hasShadow" type="checkbox">                   <label for="pricingShadow" class="css-label">Add shadow on the pricing container</label>                 </div>               </div>               <div class="input-wrapper">                 <div class="checkbox-wrapper">                   <input id="monthlyPricingSwitch" class="css-checkbox" name="hasToggle" type="checkbox">                   <label for="monthlyPricingSwitch" class="css-label">Enable monthly / yearly pricing toggle</label>                 </div>               </div>               <div class="input-wrapper">                 <div class="checkbox-wrapper">                   <input id="hasActionButton" class="css-checkbox" name="hasActionButton" type="checkbox">                   <label for="hasActionButton" class="css-label">Add action button on each plan</label>                 </div>                 <div class="f20 none-soft" id="buttonOpenUrlToggle">                   <div class="info mt-15">                     <h5>Button URL</h5>                   </div>                   <input class="path-select select-like" type="text" />                   <input type="hidden" value="" />                   <div class="popup-input-wrapper mt-15">                     <h5>Button text</h5>                      <input type="text" name="buttonText" class="transition-all">                   </div>                 </div>               </div>               <div class="col20 f-left mt-25 product-select-wrapper gray-section">                 <div class="col20 f-left ab-step center-vertically">                    <h4 class="roboto">' + M.SUBSCRIPTION_PLAN + '</h4>                    <span data-role="plansSummary"></span>                    <a data-role="editPlans" class="text-link blue-text">' + M.CHANGE + "</a>                 </div>               </div>             </div>           </div>";
                    case "storeProductAddNewMarkup":
                        return '<div class="store-icons-wrapper f-left col20">                   <div class="f-left"><a data-type="phisical" data-tooltip="storeProductPhysicalTooltip" data-bottom="true" class="f-left col20 button-tooltip"><div class="store-icon-color physical-product-icon"></div><h4>' + M.STORE_PRODUCT_PHYSICAL + '</h4></a></div>                   <div class="f-left"><a data-type="digital" data-tooltip="storeProductDigitalTooltip" data-bottom="true" class="f-left col20 button-tooltip"><div class="store-icon-color digital-product-icon"></div><h4>' + M.STORE_PRODUCT_DIGITAL + '</h4></a></div>                   <div class="f-left"><a data-type="service" data-tooltip="storeProductServiceTooltip" data-bottom="true" class="f-left col20 button-tooltip"><div class="store-icon-color services-product-icon"></div><h4>' + M.STORE_PRODUCT_SERVICE + '</h4></a></div>                   <div class="f-left"><a data-type="membership" data-tooltip="storeProductMembershipTooltip" data-bottom="true" class="f-left col20 button-tooltip"><div class="store-icon-color membership-product-icon"></div><h4>' + M.STORE_PRODUCT_MEMBERSHIP + "</h4></a></div>                 </div>";
                    case "whatsappSettingsMarkup":
                        return '<div class="popup-widget-wrapper">                   <div class="popup-input-wrapper" >                     <h5>' + M.WHATSAP_CONTACT_NUMBER + '</h5>                      <input type="text" name="number" class="transition-all">                   </div>                   <div class="popup-input-wrapper" >                     <h5>' + M.WHATSAP_HELLO_MESSAGE + '</h5>                      <input type="text" name="message" class="transition-all">                   </div>                   <div class="popup-input-wrapper" >                     <h5>' + M.WHATSAP_HELLO_MESSAGE + '</h5>                      <select name="buttonPosition">                       <option value="top-left">' + M.TOP_LEFT + '</option>                       <option value="top-right">' + M.TOP_RIGHT + '</option>                       <option value="middle-left">' + M.MIDDLE_LEFT + '</option>                       <option value="middle-right">' + M.MIDDLE_RIGHT + '</option>                       <option value="bottom-left">' + M.BOTTOM_LEFT + '</option>                       <option value="bottom-right">' + M.BOTTOM_RIGHT + "</option>                     </select>                   </div>                 </div>";
                    case "clientifySettingsMarkup":
                        return '<div class="popup-widget-wrapper">                   <div class="popup-input-wrapper" >                     <h5>Clientify API Key</h5>                      <input type="text" name="key" class="transition-all">                   </div>                 </div>';
                    case "twilioSettingsMarkup":
                        return '<div class="popup-widget-wrapper">                   <div class="help-text t-left">                     <span class="col20 f-left mb-10">' + M.TWILIO_SETTINGS_INFO + '</span>                     <span class="col20 f-left">' + M.TWILIO_SIGN_UP + '</span>                   </div>                   <div class="popup-input-wrapper mt-20">                     <h5>' + M.TWILIO_AUTH_TYPE + '</h5>                     <div class="info mb-10">                       <span>' + M.TWILIO_AUTH_TYPE_DESC + '</span>                     </div>                     <div class="radio-option">                       <input type="radio" name="authType" id="authTokenRadio" value="' + TWILIO_AUTH_TYPE.AUTH_TOKEN + '" class="css-checkbox">                       <label for="authTokenRadio" class="css-label">' + M.TWILIO_AUTH_TOKEN + '</label>&nbsp;&nbsp;&nbsp;&nbsp;                       <input type="radio" name="authType" id="apiKeyRadio" value="' + TWILIO_AUTH_TYPE.API_KEY + '" class="css-checkbox">                       <label for="apiKeyRadio" class="css-label">' + M.API_KEY + '</label>                     </div>                   </div>                   <div class="popup-input-wrapper">                     <h5>' + M.TWILIO_ACCOUNT_SID + '</h5>                      <input type="text" name="accountSid" class="transition-all">                   </div>                   <div class="popup-input-wrapper" data-role="api-key-wrapper">                     <div class="popup-input-wrapper">                       <h5>' + M.API_KEY + '</h5>                        <input type="text" name="apiKey" class="transition-all">                     </div>                     <div class="popup-input-wrapper">                       <h5>' + M.TWILIO_API_SECRET + '</h5>                        <input type="password" name="apiSecret" class="transition-all">                     </div>                   </div>                   <div class="popup-input-wrapper" data-role="auth-token-wrapper">                     <h5>' + M.TWILIO_AUTH_TOKEN + '</h5>                      <input type="password" name="authToken" class="transition-all">                   </div>                   <div class="popup-input-wrapper" data-role="twilio-number-wrapper">                     <h5>' + M.TWILIO_NUMBER + '</h5>                      <div class="info">                       <span>' + M.TWILIO_NUMBER_DESC + '</span>                     </div>                     <input type="text" name="fromNumber" id="fromNumber" class="transition-all">                   </div>                   <div class="popup-input-wrapper" data-role="sender-id-wrapper">                     <div class="checkbox-wrapper">                       <input id="senderIdCheck" class="css-checkbox" type="checkbox" name="senderIdCheck">                       <label for="senderIdCheck" class="css-label">' + M.TWILIO_SEND_WITH_SENDER_ID + '</label>                     </div>                     <div class="popup-input-wrapper" data-role="sender-id-input-wrapper">                       <h5>' + M.TWILIO_SENDER_ID + '</h5>                        <div class="info">                         <span>' + M.TWILIO_SENDER_ID_DESC + '</span>                       </div>                       <input type="text" name="senderId" class="transition-all">                     </div>                   </div>                   <div class="popup-input-wrapper setting-wrapper-fixed">                     <div class="checkbox-wrapper">                       <input id="messagingServiceCheck" class="css-checkbox" type="checkbox" name="messagingServiceCheck">                       <label for="messagingServiceCheck" class="css-label">' + M.TWILIO_ADD_MESSAGING_SERVICE + '</label>                     </div>                     <div class="popup-input-wrapper none-soft" data-role="messaging-service-wrapper">                       <h5>' + M.TWILIO_MESSAGING_SERVICE_SID + '</h5>                        <div class="info">                         <span>' + M.TWILIO_ADD_MESSAGING_SERVICE_DESC + '</span>                       </div>                       <input type="text" name="messagingServiceSid" class="transition-all">                     </div>                   </div>                   <div class="popup-input-wrapper">                     <h5>' + M.TWILIO_TEST_NUMBER_NUMBER + '</h5>                     <div class="info">                       <span>' + M.TWILIO_TEST_NUMBER_DESC + '</span>                     </div>                     <input type="text" name="testNumber" id="testNumber" class="transition-all">                   </div>                   <div class="popup-input-wrapper none-soft" data-role="otp-channel-wrapper">                     <div class="info mb-10">                       <span>' + M.TWILIO_VERIFICATION_DESC + '</span>                     </div>                     <div class="radio-option">' + (1 === platformId ? '<input type="radio" name="otpChannel" id="waChannelRadio" value="' + CRM_MESSAGE_CHANNEL.WHATSAPP + '" class="css-checkbox" checked>                       <label for="waChannelRadio" class="css-label">' + M.WHATSAPP + "</label>" : "") + '<input type="radio" name="otpChannel" id="smsChannelRadio" value="' + CRM_MESSAGE_CHANNEL.SMS + '" class="css-checkbox" ' + (1 === platformId ? "" : "checked") + '>                       <label for="smsChannelRadio" class="css-label ml-25">' + M.SMS + '</label>                       <input type="radio" name="otpChannel" id="voiceChannelRadio" value="' + CRM_MESSAGE_CHANNEL.VOICE + '" class="css-checkbox">                       <label for="voiceChannelRadio" class="css-label ml-25">' + M.VOICE + "</label>                     </div>                   </div>                 </div>";
                    case "memberGroupListItem":
                        return '<div class="member-group-wrapper t-center">           <h3 class="col20 f-left">%name%</h3>           <span class="col20 f-left">%count%</span>           <a rel="tab" href="/me/members/groups/%id%" class="gray next-button middle-button inline-block f-none">' + M.SETTINGS + " <p>&rarr;</p></a>         </div>";
                    case "memberRowMarkup":
                        return '<tr class="member-item" data-id="%id%">                   <td></td>                   <td><a rel="tab" href="/me/members/list/%id%" class="member-name">%name%</a></td>                   <td>%email%</td>                   <td>%registration%</td>                   <td><a rel="tab" href="/me/members/list/%id%" class="details"><i class="fa fa-arrow-right"></i></a></td>                 </tr>';
                    case "storeProductsImageSizeSettings":
                        return '<div class="popup-widget-wrapper">             <div class="popup-input-wrapper" >               <h5>' + M.IMAGE_POSITION + '</h5>                <select name="imageSizeType">                 <option value="">' + M.PLEASE_SELECT + '</option>                 <option value="fit-height">' + M.FILL_CONTAINER_HEIGHT + '</option>                 <option value="fit-image">' + M.FIT_IN_CONTAINER + '</option>                 <option value="cover-image">' + M.FILL_CONTAINER + '</option>               </select>             </div>             <div class="popup-input-wrapper" >               <h5>' + M.IMAGE_SIZE_RATIO + '</h5>                <select name="imageSize">                 <option value="75">' + M.IMG_STANDARD + '</option>                 <option value="80">' + M.IMG_WIDE_5_4 + '</option>                 <option value="56.25">' + M.IMG_WIDE + '</option>                 <option value="50">' + M.IMG_WIDE_2_1 + '</option>                 <option value="100">' + M.IMG_SQUARE + '</option>                 <option value="125">' + M.IMG_TALL_4_5 + '</option>                 <option value="133.333">' + M.IMG_STANDARD_TALL + '</option>                 <option value="177.7778">' + M.IMG_TALL_9_16 + '</option>                 <option value="200">' + M.IMG_TALL_1_2 + "</option>               </select>             </div>           </div>";
                    case "customerDataRequestTemplate":
                        return '<div class="popup-widget-wrapper">           <span class="help-text mt-5">' + M.CUSTOMER_DATA_REQUEST_INFO + '</span>           <div class="popup-input-wrapper mt-15" >             <h5>' + M.CUSTOMER_EMAIL + '</h5>              <input type="text" name="email" class="transition-all">           </div>           <div class="popup-input-wrapper" >             <h5>' + M.REQUEST_TYPE + '</h5>              <select name="type">               <option value="request">' + M.REQUEST_CUSTOMER_DATA + '</option>               <option value="delete">' + M.DELETE_CUSTOMER_DATA + '</option>             </select>           </div>           <span class="help-text">' + M.DATA_REQUEST_DESC + "</span>         </div>";
                    case "headerSettings":
                        return '<div class="popup-widget-wrapper">             <div class="popup-input-wrapper" >               <h5 class="inline">' + M.HEADER_LAYOUT + '</h5>              <select name="layout">                 <option value="">' + M.NORMAL_AT_TOP + '</option>                 <option value="header-layout-fullwidth">' + M.FULL_SCREEN_AT_TOP + '</option>                 <option value="header-layout-floating">' + M.FIT_AT_TOP + '</option>                 <option value="header-layout-vertical-left">' + M.VERTICAL_AT_LEFT + '</option>                 <option value="header-layout-vertical-right">' + M.VERTICAL_AT_RIGHT + '</option>               </select>             </div>             <div class="input-wrapper color-pick-wrap-widgets mb-15">               <div class="color-pick-wrap">                 <div></div>                 <input type="text" value="" class="colorpicker-selected" name="bgColor">               </div>               <div class="info">                 <h5>' + M.HEADER_BG_COLOR + '</h5>               </div>             </div>             <div class="checkbox-wrapper col20 f-left setting-wrapper-shadow none-soft">               <input id="hasShadow" class="css-checkbox modify" type="checkbox" name="hasShadow" />               <label for="hasShadow" class="css-label">' + M.ADD_SHADOW + '</label>             </div>             <div class="checkbox-wrapper col20 f-left" style="margin-bottom: 7px;">               <input id="hasBorder" class="css-checkbox modify" type="checkbox" name="hasBorder" />               <label for="hasBorder" class="css-label">' + M.ADD_BOTTOM_BORDER + '</label>             </div>             <div class="input-wrapper input-wrapper-margin color-pick-wrap-widgets border-color-wrapper displayed-setting mb-15">               <div class="color-pick-wrap">                 <div></div>                 <input type="text" value="" class="colorpicker-selected" name="borderColor">               </div>               <div class="info">                 <h5>' + M.BUTTON_BORDER_COLOR + '</h5>               </div>             </div>             <div class="popup-input-wrapper setting-wrapper-absolute" style="margin-bottom: 0;">               <div class="checkbox-wrapper">                 <input id="isAbsolute" class="css-checkbox" type="checkbox" name="isAbsolute" />                 <label for="isAbsolute" class="css-label">' + M.APPLY_ABSOLUTE_HEADER + '</label>               </div>             </div>             <div class="popup-input-wrapper setting-wrapper-fixed">               <div class="checkbox-wrapper">                 <input id="isFixed" class="css-checkbox" type="checkbox" name="isFixed" />                 <label for="isFixed" class="css-label">' + M.APPLY_FIXED_HEADER + "</label>               </div>             </div>           </div>";
                    case "verticalHeaderSettings":
                        return '<div class="popup-widget-wrapper">             <div class="popup-input-wrapper" >               <h5 class="inline">' + M.HEADER_LAYOUT + '</h5>              <select name="layout">                 <option value="">' + M.NORMAL_AT_TOP + '</option>                 <option value="header-layout-fullwidth">' + M.FULL_SCREEN_AT_TOP + '</option>                 <option value="header-layout-floating">' + M.FIT_AT_TOP + '</option>                 <option value="header-layout-vertical-left">' + M.VERTICAL_AT_LEFT + '</option>                 <option value="header-layout-vertical-right">' + M.VERTICAL_AT_RIGHT + '</option>               </select>             </div>             <div class="input-wrapper color-pick-wrap-widgets mb-15">               <div class="color-pick-wrap">                 <div></div>                 <input type="text" value="" class="colorpicker-selected" name="bgColor">               </div>               <div class="info">                 <h5>' + M.HEADER_BG_COLOR + '</h5>               </div>             </div>             <div class="input-wrapper mt-15">               <div class="checkbox-wrapper col20 f-left">                 <input id="hasShadow" class="css-checkbox modify" type="checkbox" name="hasShadow" />                 <label for="hasShadow" class="css-label">' + M.ADD_SHADOW + "</label>               </div>             </div>           </div>";
                    case "headerAdditionalRowSettings":
                        return '<div class="popup-widget-wrapper">         <div class="popup-input-wrapper" >           <div class="input-wrapper input-wrapper-margin color-pick-wrap-widgets">             <div class="color-pick-wrap">               <div></div>               <input type="text" value="" class="colorpicker-selected" name="backgroundColor">             </div>             <div class="info">               <h5>' + M.BACKGROUND_COLOR + '</h5>             </div>           </div>           <div class="checkbox-wrapper col20 f-left mt-15">             <input id="hasBorder" class="css-checkbox modify" type="checkbox" name="hasBorder" />             <label for="hasBorder" class="css-label">' + M.ADD_BOTTOM_BORDER + '</label>           </div>           <div class="input-wrapper input-wrapper-margin color-pick-wrap-widgets border-color-wrapper displayed-setting">             <div class="color-pick-wrap">               <div></div>               <input type="text" value="" class="colorpicker-selected" name="borderColor">             </div>             <div class="info">               <h5>' + M.BORDER_COLOR + "</h5>             </div>           </div>         </div>       </div>";
                    case "headerSwitchPopupMarkup":
                        return '          <div class="popup-widget-wrapper">             <img style="margin: 0 auto; display:block;" src="' + resources + '/images/header-switch.png">            <h3 class="t-center mt-25">' + M.NEW_HEADER_EDITOR_TITLE + '</h3>             <span class="t-center mt-25 f-16">' + M.NEW_HEADER_EDITOR_DESC + '</span>            <a data-role="show-video" class="mt-35 t-center text-link blue-text">' + M.WATCH_THE_VIDEO_FIRST + '</a>            <div class="col20 f-left mt-35 t-center">              <a data-role="switch" class="big-button blue">' + M.SWITCH + '</a>            </div>            <div class="col20 f-left mt-25 mb-15">              <a data-role="close" class="t-center f-14">' + M.NO_CLOSE + "</a>            </div>          </div>";
                    case "globalStylingAddCustomFont":
                        return '          <div class="popup-newpage-wrapper">             <div class="popup-input-wrapper">               <h5>' + M.NAME + "</h5>                <span>" + M.CUSTOM_FONT_POPUP_DESC + '</span>               <input type="text" name="name" class="required transition-all">             </div>             <div class="popup-input-wrapper mt-15" >               <h5>' + M.CUSTOM_FONT_WOFF + '</h5>               <input class="select-like woff-file" readonly="readonly" name="woffFile">            </div>             <div class="popup-input-wrapper mt-15" >               <h5>' + M.CUSTOM_FONT_OTF + '</h5>               <input class="select-like otf-file" readonly="readonly" name="otfFile">              <span>' + M.CUSTOM_FONT_OTF_DESC + "</span>             </div>           </div>";
                    case "globalStylingHeadingSettings":
                        return '          <div class="popup-widget-wrapper inline-inputs">             <div class="popup-input-wrapper" >               <select name="font"></select>             </div>             <div class="popup-input-wrapper f-right">               <div class="info input-slider-wrapper">                 <h5 class="ta-left">' + M.FONT_SIZE + '</h5>               <div id="headingFontSize"></div>                 <input class="headingFontSize slider-val f-right" type="text" />             </div>             </div>             <div class="popup-input-wrapper f-right">               <div class="info input-slider-wrapper">                 <h5 class="ta-left">' + M.LETTER_SPACING + '</h5>                 <div id="headingLetterSpacing"></div>                 <input type="text" class="headingLetterSpacing slider-val f-right" />               </div>             </div>             <div class="popup-input-wrapper f-right">               <div class="info input-slider-wrapper">                 <h5 class="ta-left">' + M.LINE_HEIGHT + '</h5>                 <div id="headingLineHeight"></div>                 <input type="text" class="headingLineHeight slider-val f-right" />               </div>             </div>             <div class="input-wrapper input-wrapper-margin color-pick-wrap-widgets border-color-wrapper">               <div class="color-pick-wrap">                 <div></div>                 <input type="text" class="colorpicker-selected" name="textColor">               </div>               <div class="info">                 <h5>' + M.TEXT_COLOR + "</h5>               </div>             </div>           </div>";
                    case "websiteSettingsMarkup":
                        return '           <div id="websiteSettingsMarkup">             <div class="website-settings-main-wrapper">               <div class="website-settings-main">                 <a data-action="showCustomCodeEditor" class="col20 f-left custom-code-btn"><span>' + M.CUSTOM_CODE + '</span></a>                 <a data-action="showOnPageSEO" class="col20 f-left page-seo-btn"><span>' + M.PAGE_SEO + '</span></a>                 <a data-action="showAdvancedSettings" class="col20 f-left advanced-settings-btn"><span>' + M.ADVANCED_SETTINGS + '</span></a>                 <a data-action="showFileManager" class="col20 f-left file-manager-btn"><span>' + M.FILE_MANAGER + '</span></a>                 <a data-action="showHeadersSettings" class="col20 f-left headers-btn"><span>' + M.HEADERS + "</span></a>               </div>             </div>           </div>";
                    case "funnelPreviewMarkup":
                        return '<div class="overlay-content theme-preview funnel-preview">         <div class="button-wrapper">           <a class="main-action-btn none middle-button blue">' + M.USE_THIS_THEME + '</a>           <select class="funnel-step-select"></select>           <div class="theme-preview-viewport-buttons">             <ul>               <li>                 <a href="javascript:;" class="viewport-item button-tooltip active" data-size="desktop" data-tooltip="desktopView" data-bottom="true" title=""><img src="' + resources + '/images/small-icons/desktop-white.png"></a>               </li>               <li>                 <a href="javascript:;" class="viewport-item button-tooltip" data-size="tablet" data-tooltip="tabletView" data-bottom="true" title=""><img src="' + resources + '/images/small-icons/tablet-white.png"></a>               </li>               <li>                 <a href="javascript:;" class="viewport-item button-tooltip" data-size="mobile" data-tooltip="phoneView" data-bottom="true" title=""><img src="' + resources + '/images/small-icons/phone-white.png"></a>               </li>             </ul>           </div>         </div>         <div class="iframe-content desktop-preview">           <iframe src="javascript:;"></iframe>         </div>       </div>       <div class="funnel-right-content center-vertically flex-column">         <div class="funnel-right-content-inner">           <h2 class="f-left col20 roboto">%name%</h2>           <span class="f-left col20 mt-45">%longDescription%</span>           <a class="main-action-btn big-button blue mt-25">' + M.ADD_FUNNEL + "</a>         </div>       </div>";
                    case "funnelStepRow":
                        return '<div class="funnel-step-wrapper-new %funnelStepRowClass%" data-id="%id%">                 <div class="funnel-step-handle%handle%"></div>                 <div class="funnel-step-num %tooltipclz%" data-tooltip="%tooltip%">%no%</div>                 <div class="funnel-step-content" data-role="funnel-step" data-id="%id%">                   <h6 data-role="funnel-step-name" data-id="%id%" class="button-tooltip" data-tooltip="editStepContent" data-top="true">%name%</h6>                   <div class="flex-1"><div class="funnel-step-bar f-right"></div></div>                   <h4 class="funnel-step-percentage f-none f-left %goalClass%"><p>%stepConversion%</p><span class="material-icons-outlined step-goal-icon"> emoji_events </span></h4>                   <div class="funnel-controls">                     <a class="more-options"></a>                   </div>                 </div>               </div>';
                    case "funnelStepUpsellRow":
                        return '<div class="upsell-step-new flex algin-center space-between %funnelStepRowClass%" data-role="upsell-step-root" data-id="%id%">                   <div class="funnel-step-handle%handle%"></div>                   <div class="funnel-step-content" data-role="funnel-step" data-id="%id%">                     <div class="flex align-center">                       <div class="%tooltipclz% upsell-icon flex-none" data-tooltip="%tooltip%"><span class="material-icons">%icon%</span></div>                       <h5 data-role="funnel-step-name" data-id="%id%" class="button-tooltip" data-tooltip="editStepContent" data-top="true">%name%</h5>                     </div>                     <div class="funnel-step-bar"></div>                     <div class="funnel-controls">                       <a class="more-options"></a>                     </div>                   </div>                 </div>';
                    case "funnelStepGroupingRow":
                        return '<div class="col20 f-left funnel-step-wrapper funnel-sortable-step grouping-row grouping-row-new" data-group="%groupId%" data-role="funnel-step">                 <div class="funnels-wrapper f-left col20  center-vertically flex flex-row">                   <div class="funnel-step-handle flex-none"></div>                   <div class="col8 f-left center-vertically flex-1 grouping-row-name-wrapper justify-center" style="padding-right: 20px;box-sizing: border-box;">                     <span class="grouping-row-name f-left">%name% &nbsp; &darr;</span>                   </div>                    <div class="funnel-controls flex-none">                     <a class="more-options group-options"></a>                   </div>                 </div>               </div>';
                    case "funnelStepABPart":
                        return '<div class="col10 f-left %abclass%">                   %sessions%                   <span class="ab-part ab-badge button-tooltip" data-tooltip="editStepVariation">%badge%</span>                   <span class="step-conversion-badge button-tooltip %stepConversionClass%" data-id="%id%" data-tooltip="stepConversion">%traffic%</span>                 </div>';
                    case "funnelStepABManualWinnerRow":
                        return '<div class="col20 f-left mb-10 ab-step center-vertically" data-id="%id%">                   <div class="funnel-step-number flex-none %rowClass%">%letter%</div>                   <h4 class="roboto">%percent%</h4>                   <span>%visitors%</span>                   <a class="winner-select-btn blue f-right middle-button">' + M.SELECT + "</a>                 </div>";
                    case "funnelStepABHistoryRow":
                        return '<div class="col20 f-left mb-10 ab-step ab-old center-vertically">                   <div class="funnel-step-number flex-none">%percent%</div>                   <h4 class="roboto">%startDate%<br/>%endDate%</h4>                   <span>%visitors%</span>                 </div>';
                    case "funnelGoalStatsRow":
                        return '<div class="f-left goal-stats-inner-wrapper">                   <div class="stats-segment f-left flex align-center">                     <div class="goal-tag"><span>%idx%</span></div>                     <h3 class="f-left goal-step flex align-center">%stepName%: <span class="goal-conversion-tag mr-10 ml-10 flex-none">%conversionFromAll%</span> <span class="flex-none">(%stepConversion% ' + M.STEP_CONVERSION + ')</span></h3>                     \x3c!--<span class="f-left col20">' + M.REACHED_GOAL + "</span>--\x3e                   </div>                 </div>";
                    case "singleFunnelAnalytics":
                        return '<div class="flex-1 horizontal-flex-table funnel-sub-tab">                 <div class="col20 f-left funnels-wrapper funnels-header">                   <div class="col20 f-left funnel-stats">                     <div class="col20 f-left funnels-box-wrapper funnels-box-wrapper-inner">                       <div class="col20 f-left mb-5 funnel-analytics-header">                         <h4 class="inline-block roboto">' + M.FUNNEL_ANALYTICS + '</h4>                         <select class="funnel-period-select inline-period-select" name="periodSelect">                           <option value="all-time" selected>' + M.ALL_TIME + '</option>                           <option value="today">' + M.TODAY + '</option>                           <option value="last-week">' + M.LAST_SEVEN_DAYS + '</option>                           <option value="last-30-days">' + M.LAST_THIRTY_DAYS + '</option>                         </select>                       </div>                       <div class="col20 f-left funnel-analytics-summary mt-45">                         <div class="box box-clean">                           <h3>' + M.TOTAL_VISITORS + '</h3>                           <span class="col20 f-left" id="totalVisitorsLabel" style="color: #f66082">0</span>                         </div>                         <div class="box box-clean" id="reachedGoalBox">                           <h3>' + M.REACHED_GOAL + '</h3>                         </div>                       </div>                     </div>                     <div class="col20 f-left funnel-analytics-graph">                         <div class="chart-box col20 f-left">                           <canvas class="col20"></canvas>                         </div>                       </div>                   </div>                 </div>               </div>';
                    case "singleFunnelSales":
                        return '<div class="flex-1 horizontal-flex-table funnel-sub-tab">                 <div class="col20 f-left funnels-wrapper funnels-header">                   <div class="upper-navigation upper-navigation-full mt-15 mb-25">                     <ul>                       <li><a class="active">Sales Overview</a></li>                       <li><a>Upsells &amp; Downsells</a></li>                       <li><a>Subscriptions</a></li>                     </ul>                   </div>                   <div class="col20 f-left funnel-stats">                     <div class="col20 f-left funnels-box-wrapper funnels-box-wrapper-inner">                       <h4 class="inline-block roboto">' + M.SALES_STATS + '</h4>                       <select class="funnel-period-select inline-period-select" name="periodSelect">                           <option value="all-time" selected>' + M.ALL_TIME + '</option>                         <option value="today">' + M.TODAY + '</option>                         <option value="last-week">' + M.LAST_SEVEN_DAYS + '</option>                         <option value="last-30-days">' + M.LAST_THIRTY_DAYS + '</option>                       </select>                       <div class="col20 f-left funnel-analytics-summary sales-funnel-analytics mt-45">                         <div class="box box-clean col10">                           <div class="col9 f-left">                             <h3>' + M.SALES + '</h3>                             <span class="col20 f-left" id="totalSalesLabel" style="color: #8aca87">0</span>                           </div>                           <div class="col9 f-right">                             <h3>' + M.ORDERS + '</h3>                             <span class="col20 f-left" id="totalOrdersLabel" style="color: #518de9">0</span>                           </div>                         </div>                         <div class="box box-clean col10 none-soft" id="totalSubscriptionsWrapper">                           <div class="col9 f-left">                             <h3>' + M.NEW_SUBSCRIPTIONS + '</h3>                             <span class="col20 f-left" id="totalSubscriptionsLabel" style="color: #e9ae51">6</span>                           </div>                         </div>                       </div>                     </div>                     <div class="col20 f-left funnel-analytics-graph">                       <div class="chart-box col20 f-left">                         <canvas class="col20"></canvas>                       </div>                     </div>                     <div class="col20 f-left funnels-box-wrapper funnels-box-wrapper-inner mt-35" id="allTimeSubscriptionStats">                       <h4 class="inline-block roboto">' + M.ALL_TIME_SUBSCRIPTION_STATS + '</h4>                       <div class="col20 f-left funnel-analytics-summary sales-funnel-analytics mt-45">                         <div class="box box-clean col12">                           <div class="col9 f-left">                             <h3 style="width: 120px">' + M.ALL_ACTIVE_SUBSCRIPTIONS + '</h3>                             <span class="col20 f-left" id="activeSubsLabel" style="color: #e9ae51">0</span>                           </div>                           <div class="col9 f-right">                             <h3>' + M.ALL_CANCELED_SUBSCRIPTIONS + '</h3>                             <span class="col20 f-left" id="churnLabel" style="color: #f66082">0</span>                           </div>                         </div>                         <div class="box box-clean col8">                           <div class="col20 f-left">                             <h3>' + M.MRR + '</h3>                             <span class="col20 f-left" id="mrrLabel" style="color: #8aca87">0</span>                           </div>                         </div>                       </div>                     </div>                   </div>                 </div>               </div>';
                    case "singleFunnelOrders":
                        return '<div class="flex-1 horizontal-flex-table funnel-sub-tab">                   <div class="col20 f-left funnels-wrapper funnels-header">                     <div class="col20 f-left funnel-stats">                       <div class="col20 f-left funnels-box-wrapper">                         <h4 class="inline-block roboto"><span class="mr-10" data-role="count">0</span>' + M.ORDERS + ' <a class="percent" data-role="showOrders" style="color: #76bd65; font-size: 13px; margin-left: 6px; text-decoration: underline;">' + M.VIEW_ALL_ORDERS + '</a> </h4>                         <select class="funnel-period-select inline-period-select" name="periodSelect">                           <option value="all-time" selected>' + M.ALL_TIME + '</option>                           <option value="today">' + M.TODAY + '</option>                           <option value="last-week">' + M.LAST_SEVEN_DAYS + '</option>                           <option value="last-30-days">' + M.LAST_THIRTY_DAYS + '</option>                         </select>                         <div class="col20 f-left funnel-analytics-summary sales-funnel-analytics mt-25" style="margin-bottom: 0;">                           <div class="box box-clean col20">                             <div class="col10 f-left">                               <h3>' + M.SUCCESSFUL_ORDERS + '</h3>                               <span style="color: #76bd65" class="col20 f-left" data-role="count">0</span>                             </div>                             <div class="col10 f-right none">                               <h3>Abandoned Orders</h3>                               <span class="col20 f-left" id="totalOrdersLabel" style="color: #518de9">0</span>                             </div>                           </div>                         </div>                       </div>                     </div>                     <div class="col20 f-left mt-25 funnel-table-wrapper">                       <h3 class="no-items none">' + M.THERE_ARE_NO_ORDERS + '</h3>                       <div class="col20 f-left funnel-table">                         <header class="col20 f-left">                           <div class="col2">' + M.NO + '</div>                           <div class="col7">' + M.CONTACT + '</div>                           <div class="col4">' + M.DATE + '</div>                           <div class="col3a">' + M.TOTAL + '</div>                           <div class="col3a">' + M.PAYMENT + '</div>                         </header>                         <div class="funnel-table-body f-left col20"></div>                         <div class="col20 f-left pagination-wrapper"></div>                       </div>                     </div>                   </div>                 </div>';
                    case "singleFunnelOrdersList":
                        return '<div class="flex-1 funnel-sub-tab">                   <div class="col20 f-left funnels-wrapper funnels-header">                     <div class="col20 f-left funnel-stats">                       <div class="col20 f-left funnels-box-wrapper">                         <h3 class="roboto flex align-center"><span class="mr-10" data-role="successful-orders">0</span>' + M.ORDERS + ' <a class="small-button blue rounded-effect" data-role="showOrders">' + M.VIEW_ALL_ORDERS + '</a> </h3>                         <div class="col20 f-left funnel-analytics-summary none sales-funnel-analytics mt-25" style="margin-bottom: 0;">                           <div class="box box-clean col20">                             <div class="col10 f-left">                               <h3>' + M.SUCCESSFUL_ORDERS + '</h3>                               <span style="color: #76bd65" class="col20 f-left" data-role="successful-orders">0</span>                             </div>                             <div class="col10 f-right none">                               <h3>Abandoned Orders</h3>                               <span class="col20 f-left" id="totalOrdersLabel" style="color: #518de9">0</span>                             </div>                           </div>                         </div>                       </div>                     </div>                   </div>                   <div class="col20 horizontal-flex-table f-left">                    <div class="f-left funnel-table-wrapper" data-role="table"></div>                     </div>                </div>';
                    case "singleFunnelTopPerformers":
                        return '<div class="flex-1 horizontal-flex-table funnel-sub-tab">                   <div class="col20 f-left funnels-wrapper funnels-header">                     <div class="col20 f-left mt-25 funnel-table-wrapper" data-role="table"></div>                   </div>                 </div>';
                    case "singleFunnelProducts":
                        return '<div class="flex-1 horizontal-flex-table funnel-sub-tab">                   <div class="col20 f-left funnels-wrapper funnels-header">                     <div class="col20 f-left funnel-stats">                       <div class="col20 f-left funnels-box-wrapper t-left flex flex-row align-center" style="vertical-align: middle;">                         <h4 class="f-left mb-5 roboto inline-block">' + M.PRODUCTS + '</h4>                         <select class="funnel-period-select inline-period-select" name="periodSelect">                           <option value="all-time" selected>' + M.ALL_TIME + '</option>                           <option value="today">' + M.TODAY + '</option>                           <option value="last-week">' + M.LAST_SEVEN_DAYS + '</option>                           <option value="last-30-days">' + M.LAST_THIRTY_DAYS + '</option>                         </select>                         <a class="middle-button blue with-icon create-product-funnel f-none inline-block" style="margin-left: 20px;">' + M.CREATE_A_PRODUCT + '</a>                       </div>                     </div>                     <div class="col20 f-left mt-25 funnel-table-wrapper" style="padding-top: 30px;">                       <h3 class="no-items none">' + M.NO_PRODUCTS_SOLD + '</h3>                       <div class="col20 f-left funnel-table">                         <header class="col20 f-left">                           <div class="col12">' + M.PRODUCT + '</div>                           <div class="col4">' + M.ORDERS + '</div>                           <div class="col4">' + M.TOTAL + '</div>                         </header>                         <div class="funnel-table-body f-left col20"></div>                         <div class="col20 f-left pagination-wrapper"></div>                       </div>                     </div>                   </div>                 </div>';
                    case "singleFunnelTopProducts":
                        return '<div class="flex-1 horizontal-flex-table funnel-sub-tab">                   <div class="col20 f-left funnels-wrapper funnels-header">                     <div class="col20 f-left funnel-stats">                       <div class="col20 f-left funnels-box-wrapper t-left flex flex-row align-center" style="vertical-align: middle;">                         <h3 class="f-left roboto inline-block">' + M.PRODUCTS + '</h3>                         <a class="small-button blue with-icon f-none inline-block" data-role="create-product" style="margin-left: 20px;">' + M.CREATE_A_PRODUCT + '</a>                       </div>                     </div>                   </div>                   <div class="f-left funnel-table-wrapper" data-role="table"></div>                 </div>';
                    case "singleFunnelUpsells":
                        return '<div class="flex-1 horizontal-flex-table funnel-sub-tab">                   <div class="col20 f-left funnels-wrapper funnels-header">                     <div class="col20 f-left funnel-stats">                       <div class="col20 f-left funnels-box-wrapper" style="margin-bottom:0;">                         <h4 class="col20 f-left mb-5 roboto">' + M.UPSELLS_AND_DOWNSELLS + '</h4>                         <select class="funnel-period-select inline-period-select" name="periodSelect">                           <option value="all-time" selected>' + M.ALL_TIME + '</option>                           <option value="today">' + M.TODAY + '</option>                           <option value="last-week">' + M.LAST_SEVEN_DAYS + '</option>                           <option value="last-30-days">' + M.LAST_THIRTY_DAYS + '</option>                         </select>                         <div class="col20 f-left funnel-analytics-summary sales-funnel-analytics mt-45">                           <div class="box box-clean col10">                             <div class="col9 f-left">                               <h3>' + M.UPSELL_REVENUE + '</h3>                               <span class="col20 f-left" id="upsellRevenueLabel" style="color: #8aca87"></span>                             </div>                             <div class="col9 f-right">                               <h3>' + M.UPSELL_SUCCESS + '</h3>                               <span class="col20 f-left" id="upsellOrdersLabel" style="color: #518de9"></span>                             </div>                           </div>                           <div class="box box-clean col10">                             <div class="col9 f-left">                               <h3>' + M.DOWNSELL_REVENUE + '</h3>                               <span class="col20 f-left" id="downsellRevenueLabel" style="color: #f66082"></span>                             </div>                             <div class="col9 f-right">                               <h3>' + M.DOWNSELL_SUCCESS + '</h3>                               <span class="col20 f-left" id="downsellOrdersLabel" style="color: #518de9"></span>                             </div>                           </div>                         </div>                         <div class="col20 f-left funnel-analytics-graph mt-45">                           <div class="chart-box col20 f-left">                             <canvas class="col20"></canvas>                           </div>                         </div>                       </div>                       <div class="col20 f-left mt-25 funnel-table-wrapper" style="padding-top: 30px;">                         <h3 class="no-items none">' + M.NO_PRODUCTS_SOLD + '</h3>                         <div class="col20 f-left funnel-table mt-15" data-role="upsell-products">                           <h4>' + M.UPSELL_PRODUCTS + '</h4>                           <header class="col20 f-left">                             <div class="col12">' + M.PRODUCT + '</div>                             <div class="col4">' + M.ORDERS + '</div>                             <div class="col4">' + M.TOTAL + '</div>                           </header>                           <div class="funnel-table-body f-left col20"></div>                         </div>                         <div class="col20 f-left funnel-table mt-15" data-role="downsell-products">                           <h4>' + M.DOWNSELL_PRODUCTS + '</h4>                           <header class="col20 f-left">                             <div class="col12">' + M.PRODUCT + '</div>                             <div class="col4">' + M.ORDERS + '</div>                             <div class="col4">' + M.TOTAL + '</div>                           </header>                           <div class="funnel-table-body f-left col20"></div>                         </div>                         <div class="col20 f-left funnel-table mt-15" data-role="bump-products">                           <h4>' + M.BUMP_PRODUCTS + '</h4>                           <header class="col20 f-left">                             <div class="col12">' + M.PRODUCT + '</div>                             <div class="col4">' + M.ORDERS + '</div>                             <div class="col4">' + M.TOTAL + '</div>                           </header>                           <div class="funnel-table-body f-left col20"></div>                         </div>                       </div>                     </div>                   </div>                 </div>';
                    case "singleFunnelAbandonCart":
                        return '<div class="flex-1 horizontal-flex-table funnel-sub-tab">                   <div class="col20 f-left funnels-wrapper funnels-header">                     <div class="col20 f-left funnel-stats">                       <div class="col20 f-left funnels-box-wrapper">                         <h4 class="col20 f-left mb-5 roboto">Abandoned Checkouts</h4>                         <div class="col20 f-left funnel-analytics-summary sales-funnel-analytics mt-25">                           <div class="box box-clean col10">                             <div class="col9 f-left">                               <h3>Abandons</h3>                               <span class="value" id="totalSalesLabel" style="color: #f66082">0</span>                               <span class="percent">(26.3%)</span>                             </div>                             <div class="col9 f-right">                               <h3>Returned</h3>                               <span class="value" id="totalOrdersLabel" style="color: #8aca87">0</span>                               <span class="percent" style="color: #8aca87">(16.8%)</span>                             </div>                           </div>                           <div class="box box-clean col10">                             <div class="col9 f-left">                               <h3>Purchased</h3>                               <span class="value" id="totalVisitorsLabel" style="color: #8aca87">0</span>                               <span class="percent" style="color: #8aca87">(64.1%)</span>                             </div>                             <div class="col9 f-right">                               <h3>Revenue</h3>                               <span class="value" id="totalVisitorsLabel" style="color: #518de9">0</span>                             </div>                           </div>                         </div>                         <div class="col20 f-left funnel-analytics-graph">                           <div class="chart-box col20 f-left">                             <canvas class="col20"></canvas>                           </div>                         </div>                       </div>                     </div>                   </div>                 </div>';
                    case "singleFunnelSteps":
                        return '<div class="flex-1 horizontal-flex-table funnel-sub-tab">                   <div class="col20 f-left funnels-wrapper funnels-header dashboard-funnels-header rrr">                     <div class="col20 f-left funnel-stats">                       <div class="col20 f-left goal-stats-wrapper">                         <div class="flex space-between col20 align-center mb-15 none">                           <h4 class="col20 f-left roboto" style="font-weight: bold;">Funnel Analytics</h4>                           <div class="range-select">                             <div class="flex align-center custom-dropdown-button circle-effect"><span class="material-icons date-range-icon"> date_range </span> Today <span class="material-icons"> keyboard_arrow_down </span></div>                             <select class="funnel-period-select steps-section none" name="periodSelect">                               <option value="all-time" selected>' + M.ALL_TIME + '</option>                               <option value="today">' + M.TODAY + '</option>                               <option value="last-week">' + M.LAST_SEVEN_DAYS + '</option>                               <option value="last-30-days">' + M.LAST_THIRTY_DAYS + '</option>                             </select>                           </div>                         </div>                         <div class="flex space-between col20 align-center" data-role="funnel-summary">                           <div class="col20 f-left store-section-analytics-warapper flex flex-row flex-col-mobile" style="margin-top: 0;">                             <div class="analytics-box analytics-box-small">                               <h3 class="col20 flex space-between align-center">                                <span>' + M.TOTAL_VISITORS + '</span><a class="blue-text" data-role="show-tab" data-tab="analytics">' + M.DETAILS + '</a>                              </h3>                               <h2 class="col20 f-left f-28 gray-text bold" data-role="total-visitors">0</h2>                             </div>                             <div class="analytics-box analytics-box-small">                               <h3 class="col20 flex space-between align-center"><span>' + M.SALES + '</span><a class="blue-text" data-role="show-tab" data-tab="sales-and-subs">' + M.DETAILS + '</a></h3>                               <h2 class="col20 f-left f-28 gray-text bold" data-role="total-sales">$0</h2>                               <h4 class="col20 f-left mt-10" data-role="sales-counts"></h4>                             </div>                             <div class="analytics-box analytics-box-small none">                               <h3>Generated Leads</h3>                               <h2 class="col20 f-left f-28 gray-text"><b>732 </span></b></h2>                               <h4 class="col20 f-left mt-10">(32% conversion)</h4>                             </div>                           </div>                         </div>                         <div class="col20 f-left flex justify-center mt-10"><a class="f-none flex align-center small-border-btn" data-role="toggle-goals"><span class="underline-hover" data-role="label">' + M.SHOW_GOALS + '</span><span class="material-icons ml-5" style="font-size:20px;">keyboard_arrow_down</span></a></div>                         <div class="col20 f-left goals-target mt-15 mb-15" data-role="goals-target"></div>                        <div class="col20 f-left todo-section mt-15 none">                           <h4 class="col20 f-left roboto">To Do List (Important) <span>Things to do before you can start selling in your funnel.</span></h4>                           <div class="col20 f-left mt-10 funnel-todo flex align-center">                             <div class="todo-step flex align-center rounded-effect">                               <span class="material-icons-outlined todo-icon"> list_alt </span>                               <span class="todo-text">Add Product</span>                               <span class="material-icons-outlined right-arrow"> arrow_right_alt </span>                             </div>                             <div class="todo-step flex align-center rounded-effect complete">                               <span class="material-icons-outlined todo-icon todo-icon-incomplete"> credit_score </span>                               <span class="material-icons-outlined todo-icon todo-icon-complete"> done </span>                               <span class="todo-text">Connect Processor</span>                               <span class="material-icons-outlined right-arrow"> arrow_right_alt </span>                             </div>                             <div class="todo-step flex align-center rounded-effect">                               <span class="material-icons-outlined todo-icon"> local_shipping </span>                               <span class="todo-text">Shipping Rules</span>                               <span class="material-icons-outlined right-arrow"> arrow_right_alt </span>                             </div>                           </div>                         </div>                         <div class="col20 f-left todo-section mt-15 none">                           <h4 class="col20 f-left roboto mt-15 t-center" style="font-size: 24px;">Ready to launch your funnel?</span></h4>                           <div class="col20 f-left mt-15 t-center">                             <a class="middle-button blue inline-block f-none">Publish Funnel</a>                           </div>                         </div>                       </div>                     </div>                   </div>                   <div class="col20 f-left funnel-tab dashboard-funnel-tab" data-tab="list">                     <div class="col20 f-left mb-35 flex flex-col align-center justify-center none">                       <div class="funnel-step-wrapper-new" data-role="funnel-step">                         <div class="funnel-step-num">1</div>                         <div class="funnel-step-content">                           <h6>This would be your step name</h6>                           <div class="funnel-step-bar" style="width: 100%;">1<a class="step-conversion-badge button-tooltip" data-id="1" data-tooltip="stepConversion">0%</a><a class="blue ab-split button-tooltip" data-tooltip="startABTest">A/B Test</a></div>                         </div>                       </div>                       <div class="funnel-step-wrapper-new" data-role="funnel-step">                         <div class="funnel-step-num">2</div>                         <div class="funnel-step-content">                           <h6>Checkout Page</h6>                           <div class="funnel-step-bar ab-funnel-step" style="width: 0%;">                             <div class="col10 f-left ab-left ab-winning">                   0                   <span class="ab-part ab-badge button-tooltip" data-tooltip="editStepVariation">A</span><span class="step-conversion-badge button-tooltip " data-id="6" data-tooltip="stepConversion">0%</span></div>                             <div class="col10 f-left ab-right ab-losing">                   0                   <span class="ab-part ab-badge button-tooltip" data-tooltip="editStepVariation">B</span><span class="step-conversion-badge button-tooltip " data-id="7" data-tooltip="stepConversion">0%</span></div>                             <a class="ab-settings button-tooltip" data-tooltip="showABSettings" data-original-title="" title=""></a>                           </div>                         </div>                         <div class="col20 f-left">                           <div class="upsell-step-new flex algin-center space-between">                             <div class="flex align-center">                               <div class="upsell-icon flex-none"><span class="material-icons"> arrow_upward </span></div>                               <h5>Upsell Name</h5>                             </div>                             <div class="funnel-step-bar flex-none" >1 / $99.00<a class="blue ab-split button-tooltip" data-tooltip="startABTest">A/B Test</a></div>                           </div>                           <div class="upsell-step-new flex algin-center space-between downsell-step">                             <div class="flex align-center">                               <div class="upsell-icon flex-none"><span class="material-icons"> arrow_downward </span></div>                               <h5>Downsell</h5>                             </div>                             <div class="funnel-step-bar flex-none" >1 / $99.00<a class="blue ab-split button-tooltip" data-tooltip="startABTest">A/B Test</a></div>                           </div>                           <div class="upsell-step-new flex algin-center space-between">                             <div class="flex align-center">                               <div class="upsell-icon flex-none"><span class="material-icons"> arrow_upward </span></div>                               <h5>Upsell Name 2</h5>                               <a rel="action" data-action="addFilter" class="add-downsell-btn ml-10">                                 Add Downsell                               </a>                             </div>                             <div class="funnel-step-bar flex-none" >1 / $99.00<a class="blue ab-split button-tooltip" data-tooltip="startABTest">A/B Test</a></div>                           </div>                           <a rel="action" data-action="addFilter" class="add-upsell-btn mt-10">                             + Add Upsell                           </a>                         </div>                       </div>                       <div class="funnel-step-wrapper-new" data-role="funnel-step">                         <div class="funnel-step-num">3</div>                         <div class="funnel-step-content">                           <h6>Thank You</h6>                           <div class="funnel-step-bar" style="width: 50%;">1<a class="step-conversion-badge button-tooltip" data-id="1" data-tooltip="stepConversion">0%</a><a class="blue ab-split button-tooltip" data-tooltip="startABTest">A/B Test</a></div>                         </div>                       </div>                       <div class="funnel-step-wrapper-new" data-role="funnel-step">                         <div class="funnel-step-num">4</div>                         <div class="funnel-step-content">                           <h6>Another Step</h6>                           <div class="funnel-step-bar" style="width: 50%;">1<a class="step-conversion-badge button-tooltip" data-id="1" data-tooltip="stepConversion">0%</a><a class="blue ab-split button-tooltip" data-tooltip="startABTest">A/B Test</a></div>                         </div>                       </div>                     </div>                     <div class="funnels-wrapper t-center f-left col20">                       <div class="col20 warning-wrapper warning-wrapper-smaller none">                         <span class="col20 f-left t-center warrning-message">' + M.FUNNEL_NOT_VISIBLE + '</span>                       </div>                     </div>                     <div class="no-items-wrapper">                       <h4 class="t-center mt-25" style="padding: 60px 0;">' + M.NO_STEPS_IN_FUNNEL + '</h4>                     </div>                     <div class="col20 f-left" id="funnelStepsListOuter">                      <div class="col20 f-left t-center mb-10">                         <div class="funnel-labels-wrapper flex align-center space-between">                           <span class="funnel-steps-label">' + M.STEP_NAME + '</span>                           <span class="funnel-steps-label">' + M.VISITORS + '</span>                         </div>                       </div>                       <div class="col20 f-left" id="funnelStepsList"></div>                     </div>                     <div class="funnels-wrapper f-left t-left col20">                       <div class="add-step-wrapper">                         <a class="big-button with-icon blue mb-45" data-action="add-step">' + M.ADD_NEW_STEP + "</a>                       </div>                     </div>                   </div>                 </div>";
                    case "singleFunnelMarkup":
                        return '<div class="col20 f-left flex full-size flex-row">                   <ul class="engage-main-nav" data-role="tabs">                     <li><a data-tab="steps" class="engage-main-link button-tooltip" data-tooltip="showFunnelSteps"><span style="font-size:29px;" class="material-icons-outlined"> filter_list </span></a></li>                     <li><a data-tab="analytics" class="engage-main-link button-tooltip" data-tooltip="showFunnelAnalytics"><span class="material-icons-outlined"> show_chart </span></a></li>                     <li><a data-tab="sales-and-subs" class="engage-main-link button-tooltip" data-tooltip="showFunnelSalesAndSubs"><span class="material-icons-outlined"> storefront </span></a></li>                     <li><a data-tab="funnel-orders" class="engage-main-link button-tooltip" data-tooltip="showFunnelOrders"><span><span class="material-icons-outlined"> shopping_basket </span><span class="notification-badge none">7</span></a></li>                     <li><a data-tab="top-products" class="engage-main-link button-tooltip" data-tooltip="showFunnelProducts"><span class="material-icons-outlined"> list_alt </span></a></li>                     <li><a data-tab="funnel-top-performers" class="engage-main-link button-tooltip" data-tooltip="showFunnelTopPerformers"><span class="material-icons-outlined"> bookmark_border </span></a></li>                   </ul>                   <div class="filter-nav members-subnav flex-none funnel-nav none">                     <h3 class="mt-25" style="font-size: 21px; padding-bottom: 15px;">' + M.FUNNEL_CONTROLS + '</h3>                     <div class="flex col20 align-center justify-start need-help-text-wrapper" data-key="funnelControls"><a class="need-help-text" style="margin-top: 0;" rel="action" data-action="showHelperVideo" data-target="CPanel">' + M.NEED_HELP + " <span>" + M.PLAY_VIDEO + ' <i class="material-icons"> play_circle_filled </i></span></a></div>                     <ul class="mt-15 larger-nav f-left larger-nav-with-icons" data-role="tabs">                       <li class="active"><a data-tab="steps"><span><span class="material-icons-outlined"> filter_list </span>' + M.STEPS + '</span></a></li>                       <li><a data-tab="analytics"><span><span class="material-icons-outlined"> show_chart </span>' + M.ANALYTICS + '</span></a></li>                       <li><a data-tab="sales"><span><span class="material-icons-outlined"> analytics </span>' + M.SALES + '</span></a></li>                       <li><a data-tab="orders"><span><span><span class="material-icons-outlined"> shopping_basket </span>' + M.ORDERS + '</span><span class="notification-badge none">7</span></a></li>                       <li><a data-tab="products"><span><span class="material-icons-outlined"> list_alt </span>' + M.PRODUCTS + '</span></a></li>                       <li><a data-tab="upsells"><span><span class="material-icons-outlined"> add_shopping_cart </span>' + M.UPSELLS_AND_DOWNSELLS + '</span></a></li>                       <li class="none"><a data-tab="abandoned"><span>Abandon Cart</span><span class="notification-badge">5</span></a></li>                     </ul>                   </div>                   <div class="flex-1 horizontal-flex-table funnel-sub-tab" data-role="tab-root">                     <div class="col20 f-left funnels-wrapper funnels-header funnels-header-main">                       <div class="col20 f-left center-vertically" style="justify-content: space-between;">                         <div class="center-vertically">                           <a class="back-arrow rounded-back-arrow none-soft flex-none" style="display: inline; position: relative; left: 0; top: 0;"></a>                           <div class="ml-15 flex-1">                             <h3 data-type="name" class="f-left"></h3>                             <span class="funnel-url-copy f-left col20 light-gray-text mt-5"><a class="underline" target="_blank" data-type="url"></a> <a class="copy-funnel-url">' + M.COPY_LINK + '</a></span>                           </div>                         </div>                         <div class="flex-none">                           <a data-role="showSettings" class="middle-button blue f-right">' + M.SETTINGS + '</a>                           <a data-role="showOptions" class="middle-button gray f-right mr-5"><span class="material-icons-outlined mr-10"> more_horiz </span>' + M.OPTIONS + '<a/>                           <div class="f-right mr-5" data-role="time-picker"></div>                           \x3c!--<a target="_blank" data-role="preview-link" class="preview-icon f-right button-tooltip" data-tooltip="previewFunnel" data-bottom="true"></a>                           <a class="share-icon f-right button-tooltip" data-tooltip="shareFunnel" data-role="shareFunnel" data-left="true"></a>--\x3e                         </div>                       </div>                     </div>                     <div class="col20 f-left" data-role="tab-content"></div>                   </div>                 </div>';
                    case "funnelABSettingsMarkup":
                        return '<div class="add-page-wrapper flex flex-row">                   <a class="add-page duplicate-page flex-1"><p></p><h3>' + M.DUPLICATE_PAGE + '</h3></a>                   <a class="add-page page flex-1"><p></p><h3>' + M.NEW_PAGE + "</h3></a>                 </div>";
                    case "funnelActiveABSettingsMarkup":
                        return '<div class="popup-widget-wrapper">                   <div class="col20 f-left gray-section">                     <div class="col20 f-left mb-10 ab-step center-vertically">                       <div class="funnel-step-number flex-none winner" style="font-size:14px;">' + M.ALL + '</div>                       <h4 class="roboto"><span class="total-visitors-label"></span> <span class="light">' + M.TOTAL_VISITORS_ON_STEP + '</span></h4>                     </div>                     <h4 class="t-center col20 f-left mt-15 mb-15">' + M.WINNER_SELECT + '</h4>                     <div class="flex col20">                       <a class="addon-select selected half-select">                         <div class="check-top"></div>                         <h4>' + M.AUTOMATICALLY + '</h4>                         <span class="t-center f-left col20">' + M.AUTOMATICALLY_DESC + '</span>                       </a>                       <a class="addon-select half-select">                         <div class="check-top"></div>                         <h4>' + M.MANUAL + '</h4>                         <span class="t-center f-left col20">' + M.MANUAL_DESC + '</span>                       </a>                     </div>                     <div class="col20 f-left mt-25 ab-manual-wrapper none"></div>                     <div class="col20 f-left mt-25 t-center ab-automatic-wrapper">                       <h4 class="t-center col20 f-left">' + M.WINNER_THRESHOLD + '</h4>                       <span class="col20 f-left t-center help-text mb-15">' + M.THRESHOLD_DESC + '</span>                       <input type="text" class="col20 big-input" placeholder="' + M.THRESHOLD_PLACEHOLDER + '" name="abThreshold" />                     </div>                   </div>                 </div>';
                    case "funnelAddStepMarkup":
                        return '<div class="add-page-wrapper flex flex-row">                   <a class="add-page page flex-1"><p></p><h3>' + M.PAGE + '</h3></a>                   <a class="add-page popup flex-1"><p></p><h3>' + M.POPUP + '</h3></a>                   <a class="add-page funnel-section flex-1"><p></p><h3>' + M.SECTION_LABEL + "</h3></a>                 </div>";
                    case "funnelAddSubStepMarkup":
                    case "funnelTemplatesAddStepMarkup":
                        return '<div class="add-page-wrapper flex flex-row">                   <a class="add-page page flex-1"><p></p><h3>' + M.PAGE + '</h3></a>                   <a class="add-page popup flex-1"><p></p><h3>' + M.POPUP + "</h3></a>                 </div>";
                    case "funnelABHistoryMarkup":
                        return '<div class="popup-widget-wrapper">                   <div class="col20 f-left gray-section ab-history-items">                     <div class="col20 f-left mb-10 ab-step ab-current center-vertically">                       <div class="funnel-step-number flex-none winner">-%</div>                       <h4 class="roboto">' + M.WINNER + '</h4>                       <span class="winner-visitors">-</span>                     </div>                     <h4 class="col20 f-left mt-25 mb-15 roboto">' + M.AB_LOSERS + "</h4>                   </div>                 </div>";
                    case "newFunnelSettingsMarkup":
                        return '<div class="popup-widget-wrapper pt-65">                   <div class="col20 f-left">                     <h3 class="t-center col20 f-left mb-15">' + M.FUNNEL_NAME + '</h3>                     <input type="text" class="col20 big-input" placeholder="' + M.FUNNEL_NAME_PLACEHOLDER + '" name="funnelName" />                   </div>                 </div>';
                    case "funnelsLibraryPopupMarkup":
                        return '<div class="cpanel-left-navigation general-cpanel-left-navigation">                     <h3>' + M.CATEGORIES + '</h3>                     <div class="categories-wrapper">                       <ul class="admin-custom-scroll"></ul>                     </div>                   </div>                   <div class="content-wrapper admin-custom-scroll dark-admin-custom-scroll general-cpanel-content-wrapper">                </div>';
                    case "funnelLibraryItemMarkup":
                        return '<div class="page-wrapper cpanel-funnel-wrapper">                   <div class="page-thumb" data-action="select" data-id="10" style="background-image:url(%thumb%)"></div>                   <div class="col20 f-left thumb-text">                     <h4 class="col20 f-left roboto ellipsis">&nbsp;%name%</h3>                     <p class="col20 f-left mt-15 ellipsis">&nbsp;%shortDesc%</p>                   </div>                   <div class="buttons-wrapper col20 f-left">                     <a data-action="select" class="select-btn system-bg-color system-bg-color-hover">' + M.SELECT + '</a>                     <a data-action="preview">' + M.PREVIEW + "</a></div>                 </div>";
                    case "noFunnelStepsTemplateMarkup":
                        return '<div class="col20 f-left">                   <div class="no-items-wrapper" style="margin-top: 100px;">                     <img src="' + resources + '/images/funnel-steps.png">                     <h4 class="col20 f-left t-center mt-25">' + M.THERE_ARE_NO_STEPS + "</h4>                   </div>                  </div>";
                    case "funnelTemplateListStepsMarkup":
                        return '<div class="col20 f-left">                   <div class="col20 f-left funnels-wrapper funnels-header" style="padding-bottom: 30px;">                     <div class="col20 f-left t-center">                       <img class="inline-block mt-5" src="' + resources + '/images/funnel-icon.png">                       <h3 class="inline-block ml-15" style="vertical-align: top;">%funnelName%</h3>                     </div>                     <div class="col20 f-left t-center" style="margin-bottom: -56px; margin-top: 28px;">                       <a class="big-button blue with-icon inline-block" data-action="createFunnelStep">' + M.ADD_NEW_STEP + '</a>                     </div>                   </div>                   <div class="col20 f-left list-holder" style="padding: 30px; box-sizing: border-box;"></div>                 </div>';
                    case "funnelTemplateListRow":
                        return '<div class="col20 f-left funnel-inner-wrapper %rowClass%">               <div class="col20 f-left funnels-wrapper vertical-flex">                 <div class="funnel-inner-texts">                   <h4 class="col20 f-left" data-type="name">%name%</h4>                   <span class="col20 f-left mt-10">%type%</span>                 </div>                 <div class="funnel-controls">                   <a class="more-options"></a>                 </div>               </div>             </div>';
                    case "funnelSettingsMarkup":
                        return '<div class="full-size flex flex-row">                   <div class="flex-none">                     <div class="global-left-nav big">                       <div class="col20 f-left">                         <h3 class="global-title f-left">' + M.FUNNEL_SETTINGS + '</h3>                         <ul class="global-nav f-left">                           <li><a class="popup-tab-trigger transition-all" data-show="general">' + M.GENERAL + '</a></li>                           <li><a class="popup-tab-trigger transition-all" data-show="domain">' + M.DOMAIN + '</a></li>                         </ul>                         <h3 class="global-title f-left mt-25">' + M.CUSTOM_FUNNEL_CODE_TITLE + '</h3>                         <ul class="global-nav f-left">                           <li><a class="popup-tab-trigger transition-all" data-show="head">' + M.CODE_CUSTOM_HEAD_MARKUP + '</a></li>                           <li><a class="popup-tab-trigger transition-all" data-show="css">' + M.CODE_CUSTOM_CSS + '</a></li>                           <li><a class="popup-tab-trigger transition-all" data-show="body">' + M.CODE_CUSTOM_BODY_CODE_TITLE + '</a></li>                         </ul>                       </div>                     </div>                   </div>                   <div class="flex-1 relative" style="overflow: auto">                     <div class="popup-tab-content none flex flex-col" data-tab="general">                       <div class="col20 f-left">                         <h3 class="t-center col20 f-left mb-15">' + M.FUNNEL_NAME + '</h3>                         <input type="text" class="col20 big-input" placeholder="' + M.FUNNEL_NAME_PLACEHOLDER + '" name="funnelName" />                       </div>                       <div class="col20 f-left">                         <div class="section section-logo f-left" style="width: 45%">                           <a class="add-image transition-all">                             <span class="add-button"></span>                           </a>                           <input type="hidden" name="favicon" />                           <div class="info logo-info">                             <h4>' + M.FAVICON + '</h4>                             <span class="mt-10">' + M.FAVICON_DESC + '<br>                               <span class="blue-text">' + M.FAVICON_DIMENSIONS + '</span></span>                           </div>                         </div>                         <div class="section section-logo f-right" style="width: 45%">                           <a class="add-image transition-all">                             <span class="add-button"></span>                           </a>                           <input type="hidden" name="shareImage" />                           <div class="info logo-info">                             <h4>' + M.SHARE_IMAGE + '</h4>                             <span class="mt-10">' + M.SHARE_IMAGE_DESC + '</span>                           </div>                         </div>                       </div>                       <div class="popup-input-wrapper mt-25">                         <div class="checkbox-wrapper">                           <input class="css-checkbox" id="funnelUseGlobalCode" type="checkbox" name="useGlobalCode" />                           <label class="css-label" for="funnelUseGlobalCode">' + M.FUNNEL_USE_CUSTOM_WEBSITE_CODE + '</label>                         </div>                         <div class="checkbox-wrapper">                           <input class="css-checkbox" type="checkbox" id="hideProductLinks" name="hideProductLinks" />                           <label class="css-label" for="hideProductLinks">' + M.REMOVE_PRODUCT_LINKS_TITLE + "                            <span>" + M.REMOVE_PRODUCT_LINKS_DESC + '</span>                           </label>                         </div>                         <div class="checkbox-wrapper">                           <input class="css-checkbox" type="checkbox" id="showCheckoutButton" name="showCheckoutButton" />                           <label class="css-label" for="showCheckoutButton">' + M.SHOW_FUNNEL_CHECKOUT_BTN + "                            <span>" + M.SHOW_FUNNEL_CHECKOUT_BTN_DESC + '</span>                           </label>                         </div>                         <div class="popup-input-wrapper" data-role="checkout-button-controls">                           <div class="info mt-5">                             <h5>' + M.CHECKOUT_BUTTON_STYLE + '</h5>                             <span></span>                          </div>                           <select name="checkoutButtonStyle">                            <option value="button">' + M.FLOATING_CHECKOUT_BUTTON + '</option>                            <option value="cart-popup">' + M.POPUP_WITH_ORDER_SUMMARY + '</option>                          </select>                        </div>                         <div class="popup-input-wrapper" data-role="checkout-button-controls">                           <div class="info mt-5">                             <h5>' + M.FUNNEL_CHECKOUT_BTN_TARGET_TITLE + "</h5>                             <span>" + M.FUNNEL_CHECKOUT_BTN_TARGET_DESC + '</span>                          </div>                           <input class="select-like" name="checkoutButtonTarget" readonly="readonly">                         </div>                       </div>                       <div class="col20 f-left mt-15 t-center">                         <a class="big-button f-none blue inline-block" data-role="makeHomepage">' + M.SET_AS_HOMEPAGE + '</a>                       </div>                     </div>                     <div class="popup-tab-content none flex flex-col web-settings-content" data-tab="domain">                       <h3 class="t-center col20 f-left mt-25 mb-25">' + M.DOMAINS + '</h3>                       <div class="col20 f-left mb-10 gray-section">                         <h5 class="f-left"><span class="funnel-system-url">domain.com/promo</span> <span class="system-tag">' + M.SYSTEM_DOMAIN_URL + '</span></h5>                         <div class="domain-controls">                           <a class="domain-settings system-domain-settings button-tooltip" data-tooltip="changeFunnelUrl">                             <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"                              viewBox="0 0 478.703 478.703" style="enable-background:new 0 0 478.703 478.703;" xml:space="preserve">                             <g>                               <g>                                 <path d="M454.2,189.101l-33.6-5.7c-3.5-11.3-8-22.2-13.5-32.6l19.8-27.7c8.4-11.8,7.1-27.9-3.2-38.1l-29.8-29.8                                   c-5.6-5.6-13-8.7-20.9-8.7c-6.2,0-12.1,1.9-17.1,5.5l-27.8,19.8c-10.8-5.7-22.1-10.4-33.8-13.9l-5.6-33.2                                   c-2.4-14.3-14.7-24.7-29.2-24.7h-42.1c-14.5,0-26.8,10.4-29.2,24.7l-5.8,34c-11.2,3.5-22.1,8.1-32.5,13.7l-27.5-19.8                                   c-5-3.6-11-5.5-17.2-5.5c-7.9,0-15.4,3.1-20.9,8.7l-29.9,29.8c-10.2,10.2-11.6,26.3-3.2,38.1l20,28.1                                   c-5.5,10.5-9.9,21.4-13.3,32.7l-33.2,5.6c-14.3,2.4-24.7,14.7-24.7,29.2v42.1c0,14.5,10.4,26.8,24.7,29.2l34,5.8                                   c3.5,11.2,8.1,22.1,13.7,32.5l-19.7,27.4c-8.4,11.8-7.1,27.9,3.2,38.1l29.8,29.8c5.6,5.6,13,8.7,20.9,8.7c6.2,0,12.1-1.9,17.1-5.5                                   l28.1-20c10.1,5.3,20.7,9.6,31.6,13l5.6,33.6c2.4,14.3,14.7,24.7,29.2,24.7h42.2c14.5,0,26.8-10.4,29.2-24.7l5.7-33.6                                   c11.3-3.5,22.2-8,32.6-13.5l27.7,19.8c5,3.6,11,5.5,17.2,5.5l0,0c7.9,0,15.3-3.1,20.9-8.7l29.8-29.8c10.2-10.2,11.6-26.3,3.2-38.1                                   l-19.8-27.8c5.5-10.5,10.1-21.4,13.5-32.6l33.6-5.6c14.3-2.4,24.7-14.7,24.7-29.2v-42.1                                   C478.9,203.801,468.5,191.501,454.2,189.101z M451.9,260.401c0,1.3-0.9,2.4-2.2,2.6l-42,7c-5.3,0.9-9.5,4.8-10.8,9.9                                   c-3.8,14.7-9.6,28.8-17.4,41.9c-2.7,4.6-2.5,10.3,0.6,14.7l24.7,34.8c0.7,1,0.6,2.5-0.3,3.4l-29.8,29.8c-0.7,0.7-1.4,0.8-1.9,0.8                                   c-0.6,0-1.1-0.2-1.5-0.5l-34.7-24.7c-4.3-3.1-10.1-3.3-14.7-0.6c-13.1,7.8-27.2,13.6-41.9,17.4c-5.2,1.3-9.1,5.6-9.9,10.8l-7.1,42                                   c-0.2,1.3-1.3,2.2-2.6,2.2h-42.1c-1.3,0-2.4-0.9-2.6-2.2l-7-42c-0.9-5.3-4.8-9.5-9.9-10.8c-14.3-3.7-28.1-9.4-41-16.8                                   c-2.1-1.2-4.5-1.8-6.8-1.8c-2.7,0-5.5,0.8-7.8,2.5l-35,24.9c-0.5,0.3-1,0.5-1.5,0.5c-0.4,0-1.2-0.1-1.9-0.8l-29.8-29.8                                   c-0.9-0.9-1-2.3-0.3-3.4l24.6-34.5c3.1-4.4,3.3-10.2,0.6-14.8c-7.8-13-13.8-27.1-17.6-41.8c-1.4-5.1-5.6-9-10.8-9.9l-42.3-7.2                                   c-1.3-0.2-2.2-1.3-2.2-2.6v-42.1c0-1.3,0.9-2.4,2.2-2.6l41.7-7c5.3-0.9,9.6-4.8,10.9-10c3.7-14.7,9.4-28.9,17.1-42                                   c2.7-4.6,2.4-10.3-0.7-14.6l-24.9-35c-0.7-1-0.6-2.5,0.3-3.4l29.8-29.8c0.7-0.7,1.4-0.8,1.9-0.8c0.6,0,1.1,0.2,1.5,0.5l34.5,24.6                                   c4.4,3.1,10.2,3.3,14.8,0.6c13-7.8,27.1-13.8,41.8-17.6c5.1-1.4,9-5.6,9.9-10.8l7.2-42.3c0.2-1.3,1.3-2.2,2.6-2.2h42.1                                   c1.3,0,2.4,0.9,2.6,2.2l7,41.7c0.9,5.3,4.8,9.6,10,10.9c15.1,3.8,29.5,9.7,42.9,17.6c4.6,2.7,10.3,2.5,14.7-0.6l34.5-24.8                                   c0.5-0.3,1-0.5,1.5-0.5c0.4,0,1.2,0.1,1.9,0.8l29.8,29.8c0.9,0.9,1,2.3,0.3,3.4l-24.7,34.7c-3.1,4.3-3.3,10.1-0.6,14.7                                   c7.8,13.1,13.6,27.2,17.4,41.9c1.3,5.2,5.6,9.1,10.8,9.9l42,7.1c1.3,0.2,2.2,1.3,2.2,2.6v42.1H451.9z"/>                                 <path d="M239.4,136.001c-57,0-103.3,46.3-103.3,103.3s46.3,103.3,103.3,103.3s103.3-46.3,103.3-103.3S296.4,136.001,239.4,136.001                                   z M239.4,315.601c-42.1,0-76.3-34.2-76.3-76.3s34.2-76.3,76.3-76.3s76.3,34.2,76.3,76.3S281.5,315.601,239.4,315.601z"/>                               </g>                             </g>                           </svg>                           </a>                         </div>                       </div>                       <div class="col20 f-left mb-15 gray-section none-soft connected-domain-section"></div>                       <div class="col20 f-left mb-15 mt-25 gray-section none-soft new-domain-section">                         <h4 class="t-center col20 f-left mb-15">' + M.ENTER_DOMAIN + '</h4>                         <input type="text" class="col20 big-input" placeholder="yourdomain.com"/>                         <div class="col20 f-left mt-15 t-center">                           <a class="big-button f-none blue inline-block" data-role="connect">' + M.CONNECT_DOMAIN + '</a>                         </div>                         <div class="col20 f-left mt-15 t-center">                           <a data-role="cancel">' + M.CANCEL + '</a>                         </div>                       </div>                       <div class="col20 f-left mt-25 t-center none-soft connect-domain-section">                         <a data-role="connect" class="big-button with-icon blue">' + M.CONNECT_EXISTING_DOMAIN + '</a>                       </div>                       <div class="funnels-wrapper f-left col20 none-soft no-domain-section" style="padding: 0 30px;">                         <div class="col20 f-left warning-wrapper" style="display: block;">                           <span class="col20 f-left t-center warrning-message">                          <span data-role="message">' + M.SUBSCRIPTION_NOT_SUPPORT_FUNNELS + '</span>                           <a data-role="action" class="f-none inline-block" style="text-decoration: underline;">' + M.UPGRADE_NOW + '</a></span>                         </div>                       </div>                     </div>                     <div class="popup-tab-content none flex flex-col" data-tab="head" data-type="text/html">                       <div class="flex flex-col">                         <span class="flex-none ta-center">' + M.CODE_GLOBAL_HEAD_MARKUP_DESC + '</span>                       </div>                       <div class="flex-1 mt-15">                         <textarea data-option="customHeaderCode"></textarea>                       </div>                     </div>                     <div class="popup-tab-content none flex flex-col" data-tab="css" data-type="text/css">                       <div class="flex flex-col">                         <span class="flex-none ta-center">' + M.CODE_GLOBAL_CSS_DESC + '</span>                       </div>                       <div class="flex-1 mt-15">                         <textarea data-option="customCSS"></textarea>                       </div>                     </div>                     <div class="popup-tab-content none flex flex-col" data-tab="body" data-type="text/html">                       <div class="flex flex-col">                         <span class="flex-none ta-center">' + M.CODE_GLOBAL_BODY_MARKUP_DESC + '</span>                       </div>                       <div class="flex-1 mt-15">                         <textarea data-option="customBodyCode"></textarea>                       </div>                     </div>                   </div>                 </div>';
                    case "templateCodeSettingsMarkup":
                        return '<div class="full-size flex flex-row">                   <div class="flex-none">                     <div class="global-left-nav big">                       <div class="col20 f-left none" id="globalCodeLinks">                         <h3 class="global-title f-left">' + M.FUNNEL_CUSTOM_CODE + '</h3>                         <ul class="global-nav f-left">                           <li><a class="popup-tab-trigger transition-all" data-show="head">' + M.CODE_CUSTOM_HEAD_MARKUP + '</a></li>                           <li><a class="popup-tab-trigger transition-all" data-show="css">' + M.CODE_CUSTOM_CSS + '</a></li>                           <li><a class="popup-tab-trigger transition-all" data-show="body">' + M.CODE_CUSTOM_BODY_CODE_TITLE + '</a></li>                         </ul>                       </div>                       <div class="col20 f-left" id="pageCodeLinks">                         <h3 class="global-title f-left" style="margin-top:40px;">' + M.CODE_PAGE_CODE_TITLE + '</h3>                         <ul class="global-nav f-left">                           <li><a class="popup-tab-trigger transition-all" data-show="pageCss">' + M.CODE_PAGE_CSS_TITLE + '</a></li>                           <li><a class="popup-tab-trigger transition-all" data-show="pageHead">' + M.CODE_HEAD_MARKUP_TITLE + '</a></li>                           <li><a class="popup-tab-trigger transition-all" data-show="pageBody">' + M.CODE_BODY_MARKUP_TITLE + '</a></li>                         </ul>                       </div>                     </div>                   </div>                   <div class="flex-1 relative">                     <div class="popup-tab-content none flex flex-col" data-tab="head" data-type="text/html">                       <div class="flex flex-col">                         <span class="flex-none ta-center">' + M.CODE_GLOBAL_HEAD_MARKUP_DESC + '</span>                       </div>                       <div class="flex-1 mt-15">                         <textarea data-option="customHeaderCode"></textarea>                       </div>                     </div>                     <div class="popup-tab-content none flex flex-col" data-tab="css" data-type="text/css">                       <div class="flex flex-col">                         <span class="flex-none ta-center">' + M.CODE_GLOBAL_CSS_DESC + '</span>                       </div>                       <div class="flex-1 mt-15">                         <textarea data-option="customCSS"></textarea>                       </div>                     </div>                     <div class="popup-tab-content none flex flex-col" data-tab="body" data-type="text/html">                       <div class="flex flex-col">                         <span class="flex-none ta-center">' + M.CODE_GLOBAL_BODY_MARKUP_DESC + '</span>                       </div>                       <div class="flex-1 mt-15">                         <textarea data-option="customBodyCode"></textarea>                       </div>                     </div>                     <div class="popup-tab-content none flex flex-col" data-tab="pageCss" data-type="text/css">                       <div class="flex flex-col">                         <span class="flex-none ta-center">' + M.CODE_PAGE_CSS_DESC + '</span>                       </div>                       <div class="flex-1 mt-15">                         <textarea data-option="css"></textarea>                       </div>                     </div>                     <div class="popup-tab-content none flex flex-col" data-tab="pageHead" data-type="text/html">                       <div class="flex flex-col">                         <span class="flex-none ta-center">' + M.CODE_PAGE_HEAD_MARKUP_DESC + '</span>                       </div>                       <div class="flex-1 mt-15">                         <textarea data-option="headMarkup"></textarea>                       </div>                     </div>                     <div class="popup-tab-content none flex flex-col" data-tab="pageBody" data-type="text/html">                       <div class="flex flex-col">                         <span class="flex-none ta-center">' + M.CODE_PAGE_BODY_MARKUP_DESC + '</span>                       </div>                       <div class="flex-1 mt-15">                         <textarea data-option="bodyMarkup"></textarea>                       </div>                     </div>                   </div>                 </div>';
                    case "codeSettingsMarkup":
                        return '<div class="full-size flex flex-row">                   <div class="flex-none">                     <div class="global-left-nav big">                       <div class="col20 f-left" id="globalCodeLinks">                         <h3 class="global-title f-left">' + M.CODE_GLOBAL_CODE_TITLE + '</h3>                         <ul class="global-nav f-left">                           <li><a class="popup-tab-trigger transition-all" data-show="head">' + M.CODE_CUSTOM_HEAD_MARKUP + '</a></li>                           <li><a class="popup-tab-trigger transition-all" data-show="css">' + M.CODE_CUSTOM_CSS + '</a></li>                           <li><a class="popup-tab-trigger transition-all" data-show="body">' + M.CODE_CUSTOM_BODY_CODE_TITLE + '</a></li>                         </ul>                       </div>                       <div class="col20 f-left none" id="pageCodeLinks">                         <h3 class="global-title f-left" style="margin-top:40px;">' + M.CODE_PAGE_CODE_TITLE + '</h3>                         <ul class="global-nav f-left">                           <li><a class="popup-tab-trigger transition-all" data-show="pageCss">' + M.CODE_PAGE_CSS_TITLE + '</a></li>                           <li><a class="popup-tab-trigger transition-all" data-show="pageHead">' + M.CODE_HEAD_MARKUP_TITLE + '</a></li>                           <li><a class="popup-tab-trigger transition-all" data-show="pageBody">' + M.CODE_BODY_MARKUP_TITLE + '</a></li>                         </ul>                       </div>                     </div>                   </div>                   <div class="flex-1 relative">                     <div class="popup-tab-content none flex flex-col" data-tab="head" data-type="text/html">                       <div class="flex flex-col">                         <span class="flex-none ta-center">' + M.CODE_GLOBAL_HEAD_MARKUP_DESC + '</span>                       </div>                       <div class="flex-1 mt-15">                         <textarea data-option="customHeaderCode"></textarea>                       </div>                     </div>                     <div class="popup-tab-content none flex flex-col" data-tab="css" data-type="text/css">                       <div class="flex flex-col">                         <span class="flex-none ta-center">' + M.CODE_GLOBAL_CSS_DESC + '</span>                       </div>                       <div class="flex-1 mt-15">                         <textarea data-option="customCSS"></textarea>                       </div>                     </div>                     <div class="popup-tab-content none flex flex-col" data-tab="body" data-type="text/html">                       <div class="flex flex-col">                         <span class="flex-none ta-center">' + M.CODE_GLOBAL_BODY_MARKUP_DESC + '</span>                       </div>                       <div class="flex-1 mt-15">                         <textarea data-option="googleAnalytics"></textarea>                       </div>                     </div>                     <div class="popup-tab-content none flex flex-col" data-tab="pageCss" data-type="text/css">                       <div class="flex flex-col">                         <span class="flex-none ta-center">' + M.CODE_PAGE_CSS_DESC + '</span>                       </div>                       <div class="flex-1 mt-15">                         <textarea data-option="css"></textarea>                       </div>                     </div>                     <div class="popup-tab-content none flex flex-col" data-tab="pageHead" data-type="text/html">                       <div class="flex flex-col">                         <span class="flex-none ta-center">' + M.CODE_PAGE_HEAD_MARKUP_DESC + '</span>                       </div>                       <div class="flex-1 mt-15">                         <textarea data-option="headMarkup"></textarea>                       </div>                     </div>                     <div class="popup-tab-content none flex flex-col" data-tab="pageBody" data-type="text/html">                       <div class="flex flex-col">                         <span class="flex-none ta-center">' + M.CODE_PAGE_BODY_MARKUP_DESC + '</span>                       </div>                       <div class="flex-1 mt-15">                         <textarea data-option="bodyMarkup"></textarea>                       </div>                     </div>                   </div>                 </div>';
                    case "movePageToFunnelWindow":
                        return '<div class="popup-widget-wrapper">             <div class="popup-input-wrapper" >               <h5>' + M.MOVE_TO_FUNNEL_MESSAGE + '</h5>               <select>                 <option value="" selected>' + M.LOADING_WAIT + "</option>               </select>             </div>";
                    case "funnelOrdersRowMarkup":
                        return '<div class="col20 f-left" data-id="%id%">                   <div class="col2">%no%</div>                   <div class="col7">%name% <p>%email%</p></div>                   <div class="col4">%date%<p>%time%</p></div>                   <div class="col3a">%price%</div>                   <div class="col3a"><div class="pay-status %paidclz%">%paidtitle%</div></div>                 </div>';
                    case "funnelProductsRowMarkup":
                        return '<div class="col20 f-left" data-id="%id%">                   <div class="col3"><img src="%src%"></div>                   <div class="col9"><h4>%name%</h4></div>                   <div class="col4">%orders%</div>                   <div class="col4">%total%</div>                 </div>';
                    case "checkoutWidgetBumpsMarkup":
                        return '<div class="popup-widget-wrapper">                   <div class="col20 f-left product-select-wrapper gray-section">                     <div class="col20 f-left product-bumps mb-15"></div>                     <div class="col20 f-left t-center">                       <a class="middle-button f-none blue with-icon inline-block" data-role="add-bump">' + M.ADD_BUMP + '</a>                     </div>                   </div>                   <div class="popup-input-wrapper mt-15 mb-0" data-role="bumpsPositionWrapper">                     <div class="info">                       <h5>' + M.BUMP_POSITION + '</h5>                     </div>                     <select class="template-select" name="bumpsPosition">                      <option value="above-buttons">' + M.BUMP_BELOW_INFO + '</option>                       <option value="in-summary">' + M.BUMP_BELOW_SUMMARY + '</option>                     </select>                   </div>                   <div class="popup-input-wrapper mt-15">                     <div class="info">                       <h5>' + M.BUMP_LAYOUT + '</h5>                     </div>                     <select class="template-select" name="bumpsLayout">                      <option value="bump-offer-buttons">' + M.SHOW_REGULAR_BUTTONS + '</option>                       <option value="bump-offer-radio">' + M.SHOW_AS_RADIO_BUTTONS + "</option>                     </select>                   </div>                 </div>";
                    case "checkoutWidgetEditBumpMarkup":
                        return '<div class="popup-widget-wrapper">                   <div class="popup-input-wrapper mb-25">                     <div class="info">                       <h5 class="mb-15">' + M.BUMP_PRODUCT + '</h5>                      <h4 class="roboto product-title inline-block">' + M.LOADING_PRODUCT + '</h4>                       <a data-role="selectProduct" class="text-link blue-text" style="display:inline-block;font-size:14px;margin-left:7px;">' + M.EDIT + '</a>                     </div>                   </div>                   <div class="popup-input-wrapper">                     <div class="info">                       <h5>' + M.BUMP_HEADLINE + '</h5>                      <input type="text" name="headline" class="transition-all">                     </div>                   </div>                   <div class="popup-input-wrapper">                     <div class="info">                       <h5>' + M.BUMP_TITLE + '</h5>                      <input type="text" name="title" class="transition-all">                     </div>                   </div>                   <div class="popup-input-wrapper">                     <div class="info">                       <h5>' + M.BUMP_DESCRIPTION + '</h5>                      <input type="text" name="description" class="transition-all">                     </div>                   </div>                   <div class="popup-input-wrapper" data-role="activeByDefaultWrapper">                     <div class="checkbox-wrapper" style="margin-bottom: 0;">                       <input id="activeByDefault" name="activeByDefault" class="css-checkbox" type="checkbox">                       <label for="activeByDefault" class="css-label">' + M.BUMP_ACTIVE_BY_DEFAULT + "                        <span>" + M.BUMP_ACTIVE_BY_DEFAULT_DESC + '</span>                      </label>                     </div>                   </div>                   <div class="popup-input-wrapper">                     <div class="checkbox-wrapper" style="margin-bottom: 0;">                       <input id="showImage" name="showImage" class="css-checkbox" type="checkbox">                       <label for="showImage" class="css-label">' + M.SHOW_PRODUCT_IMAGE + '</label>                     </div>                   </div>                   <div class="popup-input-wrapper">                     <div class="checkbox-wrapper" style="margin-bottom: 0;">                       <input id="showBadge" name="showBadge" class="css-checkbox" type="checkbox">                       <label for="showBadge" class="css-label">' + M.SHOW_BADGE + '</label>                     </div>                   </div>                   <div class="popup-input-wrapper" id="badgeTextWrapper">                     <div class="info">                       <h5>' + M.BADGE_TEXT + '</h5>                      <input type="text" name="badgeText" class="transition-all">                     </div>                     <div class="input-wrapper input-wrapper-small color-pick-wrap-widgets" style="margin-bottom:10px;">                       <div class="color-pick-wrap">                         <div></div>                         <input type="text" value="" class="colorpicker-selected" name="bgColor">                       </div>                       <div class="info">                         <h5>' + M.BACKGROUND_COLOR + '</h5>                       </div>                     </div>                  </div>                   <div class="popup-input-wrapper">                     <div class="info">                       <h5>' + M.BUMP_STYLE + '</h5>                     </div>                     <select class="template-select" name="bumpStyle">                      <option value="with-shadow">' + M.WITH_SHADOW + '</option>                       <option value="with-border">' + M.WITH_DASHED_BORDER + '</option>                     </select>                   </div>                   <div class="input-wrapper col20 f-left">                     <a class="middle-button gray" data-role="tagCustomers">' + M.TAG_CUSTOMERS + "</a>                   </div>                 </div>";
                    case "checkoutWidgetBumpsRowMarkup":
                        return '<div class="bump-row-wrapper col20 f-left">                   <h4 class="roboto f-left col20 mb-10">%headline%</h4>                   <div class="col20 f-left">                     <span class="roboto">%title%</span>                     <a data-role="edit" class="text-link blue-text" style="display:inline-block;">' + M.EDIT + "</a>                   </div>                 </div>";
                    case "checkoutWidgetBumpsEmpty":
                        return '<h4 class="ta-center mt-15 mb-15 roboto">' + M.NO_BUMPS + "</h4>";
                    case "checkoutWidgetCheckoutLayoutStyles":
                        return '<div class="popup-widget-wrapper">                   <div class="input-wrapper color-pick-wrap-widgets">                     <div class="color-pick-wrap">                       <div></div>                       <input type="text" value="" class="colorpicker-selected modify" name="bgColor">                     </div>                     <div class="info">                       <h5>' + M.CHECKOUT_BACKGROUND + '</h5>                     </div>                   </div>                   <div class="popup-input-wrapper f-right mt-15">                     <div class="info input-slider-wrapper">                       <h5 class="ta-left">' + M.PADDING_SIZE + '<span class="slider-val f-right"></span></h5>                       <div id="paddingSlider"></div>                       <input type="text" readonly="readonly" class="slider-val modify">                     </div>                   </div>                   <div class="popup-input-wrapper f-right">                     <div class="info input-slider-wrapper">                       <h5 class="ta-left">' + M.BORDER_RADIUS + '<span class="slider-val f-right"></span></h5>                       <div id="borderRadiusSlider"></div>                       <input type="text" readonly="readonly" class="slider-val modify">                     </div>                   </div>                   <div id="tabHeadingsWrapper" class="none">                     <div class="popup-input-wrapper mt-15">                       <div class="info">                         <h5>' + M.STEP_1_TITLE + '</h5>                        <input type="text" name="step1Title" class="transition-all">                       </div>                     </div>                     <div class="popup-input-wrapper mt-15" data-role="address-title">                       <div class="info">                         <h5>' + M.STEP_2_TITLE + '</h5>                        <input type="text" name="stepAddressTitle" class="transition-all">                       </div>                     </div>                     <div class="popup-input-wrapper mt-15">                       <div class="info">                         <h5>' + M.STEP_3_TITLE + '</h5>                        <input type="text" name="step2Title" class="transition-all">                       </div>                     </div>                   </div>                 </div>';
                    case "checkoutWidgetSummaryStyles":
                        return '<div class="popup-widget-wrapper">                   <div class="input-wrapper color-pick-wrap-widgets">                     <div class="color-pick-wrap">                       <div></div>                       <input type="text" value="" class="colorpicker-selected modify" name="summaryBgColor">                     </div>                     <div class="info">                       <h5>' + M.ORDER_SUMMARY_BG + '</h5>                     </div>                   </div>                   <div class="input-wrapper color-pick-wrap-widgets">                     <div class="color-pick-wrap">                       <div></div>                       <input type="text" value="" class="colorpicker-selected modify" name="summaryTextColor">                     </div>                     <div class="info">                       <h5>' + M.TEXT_COLOR + '</h5>                     </div>                   </div>                   <div class="popup-input-wrapper mt-15" >                     <h5 class="inline">' + M.TEXT_FONT_FAMILY + '</h5>                    <select name="summaryFontFamily"></select>                   </div>                   <div class="popup-input-wrapper mb-10">                     <div class="checkbox-wrapper" style="margin-bottom: 0;">                       <input id="summaryShowShadow" name="summaryShowShadow" class="css-checkbox" type="checkbox">                       <label for="summaryShowShadow" class="css-label">' + M.SHOW_SHADOW + '</label>                     </div>                   </div>                   <div class="popup-input-wrapper mb-10">                     <div class="checkbox-wrapper" style="margin-bottom: 0;">                       <input id="summaryShowImages" name="summaryShowImages" class="css-checkbox" type="checkbox">                       <label for="summaryShowImages" class="css-label">' + M.SHOW_PRODUCT_IMAGES + '</label>                     </div>                   </div>                   <div class="popup-input-wrapper" id="completeButtonsInSummaryWrapper">                     <div class="checkbox-wrapper" style="margin-bottom: 0;">                       <input id="completeButtonsInSummary" name="completeButtonsInSummary" class="css-checkbox" type="checkbox">                       <label for="completeButtonsInSummary" class="css-label">' + M.SHOW_ORDER_BTN_IN_SUMMARY + '</label>                     </div>                   </div>                   <div class="popup-input-wrapper" id="summaryTiltedWrapper">                     <div class="checkbox-wrapper" style="margin-bottom: 0;">                       <input id="summaryTilted" name="summaryTilted" class="css-checkbox" type="checkbox">                       <label for="summaryTilted" class="css-label">' + M.CHECKOUT_TILT_BG + '</label>                     </div>                   </div>                   <div class="popup-input-wrapper f-right mt-15">                     <div class="info input-slider-wrapper">                       <h5 class="ta-left">' + M.PADDING_SIZE + '<span class="slider-val f-right"></span></h5>                       <div id="summaryPaddingSlider"></div>                       <input type="text" readonly="readonly" class="slider-val">                     </div>                   </div>                 </div>';
                    case "checkoutWidgetFormStyles":
                        return '<div class="popup-widget-wrapper">                   <div class="input-wrapper color-pick-wrap-widgets">                     <div class="color-pick-wrap">                       <div></div>                       <input type="text" value="" class="colorpicker-selected modify" name="headingsColor">                     </div>                     <div class="info">                       <h5>' + M.HEADINGS_COLOR + '</h5>                     </div>                   </div>                   <div class="input-wrapper color-pick-wrap-widgets">                     <div class="color-pick-wrap">                       <div></div>                       <input type="text" value="" class="colorpicker-selected modify" name="fieldsBgColor">                     </div>                     <div class="info">                       <h5>' + M.FIELDS_BG + '</h5>                     </div>                   </div>                   <div class="input-wrapper color-pick-wrap-widgets">                     <div class="color-pick-wrap">                       <div></div>                       <input type="text" value="" class="colorpicker-selected modify" name="fieldsTextColor">                     </div>                     <div class="info">                       <h5>' + M.FIELDS_TEXT_COLOR + '</h5>                     </div>                   </div>                   <div class="input-wrapper color-pick-wrap-widgets">                     <div class="color-pick-wrap">                       <div></div>                       <input type="text" value="" class="colorpicker-selected modify" name="fieldsBorderColor">                     </div>                     <div class="info">                       <h5>' + M.FIELDS_BORDER_COLOR + '</h5>                     </div>                   </div>                   <div class="popup-input-wrapper mt-15" >                     <h5 class="inline">' + M.TEXT_FONT_FAMILY + '</h5>                    <select name="fieldsFontFamily"></select>                   </div>                   <div class="input-wrapper color-pick-wrap-widgets">                     <div class="color-pick-wrap">                       <div></div>                       <input type="text" value="" class="colorpicker-selected modify" name="detailsBgColor">                     </div>                     <div class="info">                       <h5>' + M.BACKGROUND_COLOR + '</h5>                     </div>                   </div>                   <div class="popup-input-wrapper f-right mt-15">                     <div class="info input-slider-wrapper">                       <h5 class="ta-left">' + M.PADDING_SIZE + '<span class="slider-val f-right"></span></h5>                       <div id="detailsPaddingSlider"></div>                       <input type="text" readonly="readonly" class="slider-val">                     </div>                   </div>                   <div class="popup-input-wrapper f-right">                     <div class="info input-slider-wrapper">                       <h5 class="ta-left">' + M.BORDER_RADIUS + '<span class="slider-val f-right"></span></h5>                       <div id="detailsBorderRadiusSlider"></div>                       <input type="text" readonly="readonly" class="slider-val modify">                     </div>                   </div>                   <div class="popup-input-wrapper mt-15 mb-0">                     <div class="info">                       <h5>' + M.CUSTOMER_INFORMATION_TITLE + '</h5>                      <input type="text" name="customerInfoTitle" class="transition-all">                     </div>                   </div>                   <div class="popup-input-wrapper mt-15 mb-0">                     <div class="info">                       <h5>' + M.SHIPPING_ADDRESS_TITLE + '</h5>                      <input type="text" name="shippingInfoTitle" class="transition-all">                     </div>                   </div>                   <div class="popup-input-wrapper mt-15 mb-0">                     <div class="info">                       <h5>' + M.BILLING_ADDRESS_TITLE + '</h5>                      <input type="text" name="billingInfoTitle" class="transition-all">                     </div>                   </div>                   <div class="popup-input-wrapper mt-15 mb-0">                     <div class="info">                       <h5>' + M.SHIPPING_METHOD_TITLE + '</h5>                      <input type="text" name="shippingTitle" class="transition-all">                     </div>                   </div>                   <div class="popup-input-wrapper mt-15 mb-0">                     <div class="info">                       <h5>' + M.PAYMENT_METHOD_TITLE + '</h5>                      <input type="text" name="paymentTitle" class="transition-all">                     </div>                   </div>                 </div>';
                    case "checkoutWidgetButtonsStyles":
                        return '<div class="popup-widget-wrapper">                   <div class="input-wrapper color-pick-wrap-widgets">                     <div class="color-pick-wrap">                       <div></div>                       <input type="text" value="" class="colorpicker-selected" name="buttonBgColor">                     </div>                     <div class="info">                       <h5>' + M.BUTTON_BACKGROUND_COLOR + '</h5>                     </div>                   </div>                   <div class="input-wrapper color-pick-wrap-widgets">                     <div class="color-pick-wrap">                       <div></div>                       <input type="text" value="" class="colorpicker-selected" name="buttonTextColor">                     </div>                     <div class="info">                       <h5>' + M.BUTTON_TEXT_COLOR + '</h5>                     </div>                   </div>                   <div class="col20 f-left" data-role="bg-gradient">' + format(Templates.get("gradientMarkup"), "id", "bgGradient", "margin", "mb-15") + '</div>                  <div class="popup-input-wrapper mt-15" >                     <h5 class="inline">' + M.TEXT_FONT_FAMILY + '</h5>                    <select name="buttonFontFamily"></select>                   </div>                   <div class="popup-input-wrapper input-slider-wrapper" >                     <h5 class="inline">' + M.FONT_SIZE + '</h5>                    <div id="buttonTextSizeSlider"></div>                     <input type="text" readonly="readonly" class="slider-val">                   </div>                   <div class="popup-input-wrapper">                     <div class="info">                       <h5>' + M.BUTTON_TEXT_NEXT + '</h5>                      <input type="text" name="buttonNextText" class="transition-all">                     </div>                   </div>                   <div class="popup-input-wrapper">                     <div class="info">                       <h5>' + M.BUTTON_TEXT_COMPLETE + '</h5>                      <input type="text" name="buttonCompleteText" class="transition-all">                     </div>                   </div>                   <div class="popup-input-wrapper mb-0">                     <div class="checkbox-wrapper">                       <input class="css-checkbox" type="checkbox" id="buttonFullWidth" name="buttonFullWidth" />                       <label for="buttonFullWidth" class="css-label">' + M.BUTTON_EXPAND + "</label>                     </div>                   </div>                 </div>";
                    case "checkoutWidgetBadgesStyles":
                        return '<div class="popup-widget-wrapper">                   <div class="input-wrapper color-pick-wrap-widgets">                     <div class="color-pick-wrap">                       <div></div>                       <input type="text" value="" class="colorpicker-selected" name="secureBadgeTextColor">                     </div>                     <div class="info">                       <h5>' + M.TEXT_COLOR + '</h5>                     </div>                   </div>                   <div class="popup-input-wrapper mt-15">                     <div class="info">                       <h5>' + M.LOCK_TEXT + '</h5>                      <input type="text" name="secureLockText" class="transition-all">                     </div>                   </div>                   <div class="popup-input-wrapper">                     <div class="info">                       <h5>' + M.SHIELD_TEXT + '</h5>                      <input type="text" name="secureShieldText" class="transition-all">                     </div>                   </div>                 </div>';
                    case "checkoutWidgetStyleMarkup":
                        return '<div class="popup-widget-wrapper">             <div class="col20 f-left">               <div class="popup-input-wrapper col20 f-left store-layouts">                 <h4 class="col20 f-left mb-10 t-center h4-bigger">' + M.CHECKOUT_DESIGN_TYPE + '</h4>                 <span class="light-gray-text t-center col20 f-left mb-25">' + M.CHECKOUT_DESIGN_TYPE_DESC + '</span>                 <div class="col20 f-left">                   <label class="image-tick-wrapper f-left">                     <input type="radio" name="orderSummaryLocation" value="right">                     <img src="' + resources + '/images/store-layouts/checkout-style-1.png"/>                   </label>                   <label class="image-tick-wrapper f-left">                     <input type="radio" name="orderSummaryLocation" value="bottom">                     <img src="' + resources + '/images/store-layouts/checkout-style-2.png"/>                   </label>                   <label class="image-tick-wrapper f-left">                     <input type="radio" name="orderSummaryLocation" value="right-big">                     <img src="' + resources + '/images/store-layouts/checkout-style-3.png"/>                   </label>                 </div>              </div>              <div class="popup-input-wrapper mt-5 mb-0">                 <h5 class="inline">' + M.CHECKOUT_STEP_PROCESS + '</h5>                 <select name="layout">                   <option value="1-step">' + M.ONE_STEP_CHECKOUT + '</option>                   <option value="2-step">' + M.TWO_STEP_CHECKOUT + '</option>                   <option value="3-step">' + M.THREE_STEP_CHECKOUT + '</option>                 </select>               </div>               <div class="col20 f-left product-select-wrapper">                 <div class="col20 f-left mb-10 ab-step white-ab-step center-vertically">                    <h4 class="roboto">' + M.CUSTOMER_AND_BILLING_DETAILS + '</h4>                    <a class="text-link blue-text" data-role="editFields">' + M.STYLE + '</a>                 </div>                 <div class="col20 f-left mb-10 ab-step white-ab-step center-vertically">                    <h4 class="roboto">' + M.CHECKOUT_WRAPPER + '</h4>                    <a class="text-link blue-text" data-role="editWrapper">' + M.STYLE + '</a>                 </div>                 <div class="col20 f-left mb-10 ab-step white-ab-step center-vertically" data-role="summary">                    <h4 class="roboto">' + M.ORDER_SUMMARY + '</h4>                    <a class="text-link blue-text" data-role="editSummary">' + M.STYLE + '</a>                 </div>                 <div class="col20 f-left mb-10 ab-step white-ab-step center-vertically">                    <h4 class="roboto">' + M.BUTTONS + '</h4>                    <a class="text-link blue-text" data-role="editButtons">' + M.STYLE + '</a>                 </div>                 <div class="col20 f-left mb-10 ab-step white-ab-step center-vertically" data-role="badge">                    <h4 class="roboto">' + M.SECURE_BADGE + '</h4>                    <a class="text-link blue-text" data-role="editSecurityBadges">' + M.STYLE + '</a>                 </div>               </div>               <div class="popup-input-wrapper mt-15 mb-0">                 <div class="checkbox-wrapper">                   <input class="css-checkbox" type="checkbox" id="showOldPrices" name="showOldPrices" />                   <label class="css-label" for="showOldPrices">' + M.SHOW_STRIKETHROUGH_PRICE + '</label>                 </div>               </div>               <div class="popup-input-wrapper mb-0">                 <div class="checkbox-wrapper">                   <input class="css-checkbox" type="checkbox" id="showSecureBadge" name="showSecureBadge" />                   <label class="css-label" for="showSecureBadge">' + M.SHOW_SECURED_CHECKOUT_BADGE + '</label>                 </div>               </div>               <div class="popup-input-wrapper mb-0 none-soft" id="summaryReverseOnMobileWrapper">                 <div class="checkbox-wrapper">                   <input class="css-checkbox" type="checkbox" id="summaryReverseOnMobile" name="summaryReverseOnMobile" />                   <label class="css-label" for="summaryReverseOnMobile">' + M.CHECKOUT_SUMMARY_REVERSED_MOBILE + '</label>                 </div>               </div>               <div class="popup-input-wrapper mb-0">                 <div class="checkbox-wrapper">                   <input class="css-checkbox" type="checkbox" id="expandToFullHeight" name="expandToFullHeight" />                   <label class="css-label" for="expandToFullHeight">' + M.EXPAND_FULL_HEIGHT + '</label>                 </div>               </div>               <div class="popup-input-wrapper mt-15 none" id="pickProductsStyleWrapper">                 <h5 class="inline">' + M.CHECKOUT_PRODUCT_PICK_STYLE_TITLE + '</h5>                 <select name="pickProductsStyle">                   <option value="style-1">' + M.CHECKOUT_PRODUCT_PICK_STYLE_1 + '</option>                   <option value="style-2">' + M.CHECKOUT_PRODUCT_PICK_STYLE_2 + "</option>                 </select>               </div>             </div>           </div>";
                    case "menuWidgetActiveItemStyling":
                        return '<div class="popup-widget-wrapper">               <div class="popup-input-wrapper item-design-wrapper" >                 <h5 class="inline">' + M.ACTIVE_MENU_DESIGN + '</h5>                <select name="activeItemDesign">                   <option value="simple">' + M.CHANGE_TEXT_COLOR + '</option>                   <option value="with-background">' + M.CHANGE_BG_COLOR + '</option>                   <option value="with-border">' + M.SHOW_BORDER + '</option>                   <option value="no-border">' + M.NO_BORDER + '</option>                   <option value="border-at-left">' + M.BORDER_AT_LEFT + '</option>                   <option value="border-below">' + M.BORDER_BELOW + '</option>                 </select>               </div>               <div class="input-wrapper input-wrapper-margin color-pick-wrap-widgets">                 <div class="color-pick-wrap">                   <div></div>                   <input type="text" value="" class="colorpicker-selected" name="activeItemTextColor">                 </div>                 <div class="info">                   <h5>' + M.TEXT_COLOR + '</h5>                 </div>               </div>               <div class="col20 f-left background-color-wrapper">                 <div class="input-wrapper color-pick-wrap-widgets">                   <div class="color-pick-wrap">                     <div></div>                     <input type="text" value="" class="colorpicker-selected" name="activeItemBackgroundColor">                   </div>                   <div class="info">                     <h5>' + M.ITEM_BACKGROUND_COLOR + '</h5>                   </div>                 </div>                 <div class="popup-input-wrapper item-border-rounding-wrapper mt-15 none-soft">                   <h5 class="inline">' + M.BACKGROUND_ROUNDING + '</h5>                  <input type="text" readonly="readonly" class="slider-val">                   <div id="activeItemBorderRadiusSlider"></div>                 </div>               </div>               <div class="input-wrapper color-pick-wrap-widgets border-color-wrapper">                 <div class="color-pick-wrap">                   <div></div>                   <input type="text" value="" class="colorpicker-selected" name="activeItemBorderColor">                 </div>                 <div class="info">                   <h5>' + M.ITEM_BORDER_COLOR + "</h5>                 </div>               </div>           </div>";
                    case "menuWidgetSubmenuStyling":
                        return '<div class="popup-widget-wrapper">               <div class="popup-input-wrapper submenu-position-wrapper none-soft">                 <h5 class="inline">' + M.SUBMENU_POSITION + '</h5>                <select name="submenuPosition">                   <option value="right-submenu">' + M.SUBMENU_RIGHT + '</option>                   <option value="expanded-submenu">' + M.SUBMENU_BELOW + '</option>                 </select>               </div>               <div class="input-wrapper input-wrapper-margin color-pick-wrap-widgets">                 <div class="color-pick-wrap">                   <div></div>                   <input type="text" value="" class="colorpicker-selected" name="submenuBgColor">                 </div>                 <div class="info">                   <h5>' + M.BG_COLOR + '</h5>                 </div>               </div>               <div class="input-wrapper input-wrapper-margin color-pick-wrap-widgets">                 <div class="color-pick-wrap">                   <div></div>                   <input type="text" value="" class="colorpicker-selected" name="submenuTextColor">                 </div>                 <div class="info">                   <h5>' + M.TEXT_COLOR + '</h5>                 </div>               </div>               <div class="input-wrapper input-wrapper-margin color-pick-wrap-widgets">                 <div class="color-pick-wrap">                   <div></div>                   <input type="text" value="" class="colorpicker-selected" name="submenuTextHoverColor">                 </div>                 <div class="info">                   <h5>' + M.HOVER_TEXT_COLOR + '</h5>                 </div>               </div>               <div class="checkbox-wrapper col20 f-left mt-15">                 <input id="submenuHasShadow" class="css-checkbox modify" type="checkbox" name="submenuHasShadow" />                 <label for="submenuHasShadow" class="css-label">' + M.ADD_SHADOW_SUBMENU + '</label>               </div>               <div class="checkbox-wrapper col20 f-left">                 <input id="submenuHasBorder" class="css-checkbox modify" type="checkbox" name="submenuHasBorder" />                 <label for="submenuHasBorder" class="css-label">' + M.ADD_BORDER_SUBMENU + '</label>               </div>               <div class="col20 f-left border-color-wrapper">                 <div class="input-wrapper color-pick-wrap-widgets">                   <div class="color-pick-wrap">                     <div></div>                     <input type="text" value="" class="colorpicker-selected" name="submenuBorderColor">                   </div>                   <div class="info">                     <h5>' + M.BORDER_COLOR + '</h5>                   </div>                 </div>                 <div class="popup-input-wrapper">                   <h5 class="inline">' + M.BORDER_SIZE + '</h5>                  <input type="text" readonly="readonly" class="slider-val">                   <div id="submenuBorderSizeSlider"></div>                 </div>               </div>           </div>';
                    case "menuWidgetStylingOptions":
                        return '<div class="popup-widget-wrapper">           <div class="popup-input-wrapper" >             <ul class="option-select buttons-select nav-menu-styling">              <li data-type="horizontal-menu-styling"><a class="horizontal-menu transition-bg"><span></span>' + M.HORIZONTAL + '</a></li>              <li data-type="vertical-menu-styling"><a class="vertical-menu transition-bg"><span></span>' + M.VERTICAL + '</a></li>              <li data-type="burger-menu-styling"><a class="burger-menu transition-bg"><span></span>' + M.BURGER + '</a></li>            </ul>            <div class="input-wrapper input-wrapper2 input-wrapper-margin color-pick-wrap-widgets" style="width:47%;">               <div class="color-pick-wrap">                 <div></div>                 <input type="text" value="" class="colorpicker-selected" name="textColor">               </div>               <div class="info">                 <h5>' + M.TEXT_COLOR + '</h5>               </div>             </div>             <div class="input-wrapper color-pick-wrap-widgets" style="width:47%;">               <div class="color-pick-wrap">                 <div></div>                 <input type="text" value="" class="colorpicker-selected" name="backgroundColor">               </div>               <div class="info">                 <h5>' + M.BG_COLOR + '</h5>               </div>             </div>             <div class="input-wrapper input-wrapper-margin color-pick-wrap-widgets burger-picker">               <div class="color-pick-wrap">                 <div></div>                 <input type="text" value="" class="colorpicker-selected" name="burgerColor">               </div>               <div class="info">                 <h5>' + M.BURGER_COLOR + '</h5>               </div>             </div>             <div class="col20 f-left mt-15 vertical-style-wrapper">               <div class="input-wrapper input-wrapper2 input-wrapper-margin color-pick-wrap-widgets" style="width:47%;">                 <h5 class="inline">' + M.MENU_STYLE + '</h5>                <select name="verticalMenuDesign">                  <option value="design-4">' + M.NO_BORDER + '</option>                   <option value="design-1">' + M.BORDER_AROUND_EACH_ITEM + '</option>                   <option value="design-3">' + M.BORDER_BELOW_EACH_ITEM + '</option>                 </select>               </div>               <div class="popup-input-wrapper input-wrapper2 f-right color-pick-wrap-widgets" style="width:47%;margin-bottom:0;">                 <h5 class="inline">' + M.TEXT_ALIGNMENT + '</h5>                <select name="verticalMenuAlign">                  <option value="left">' + M.LEFT + '</option>                   <option value="center">' + M.CENTER + '</option>                   <option value="right">' + M.RIGHT + '</option>                 </select>               </div>               <div class="input-wrapper input-wrapper-margin color-pick-wrap-widgets vertical-menu-border-color-wrapper">                 <div class="color-pick-wrap">                   <div></div>                   <input type="text" value="" class="colorpicker-selected" name="verticalMenuBorderColor">                 </div>                 <div class="info">                   <h5>' + M.BORDER_COLOR + '</h5>                 </div>               </div>             </div>             <div class="dividerWrapper col20 f-left">               <div class="checkbox-wrapper col20 f-left">                 <input id="parallaxEffect" class="css-checkbox modify" type="checkbox" name="hasDivider" />                 <label for="parallaxEffect" class="css-label">' + M.SHOW_DIVIDER_MENU + '</label>               </div>               <div class="f20 dividerColorWrapper none-soft displayed-setting">                 <div class="input-wrapper input-wrapper-margin color-pick-wrap-widgets">                   <div class="color-pick-wrap">                     <div></div>                     <input type="text" value="" class="colorpicker-selected" name="dividerColor">                   </div>                   <div class="info">                     <h5>' + M.DIVIDER_COLOR + '</h5>                   </div>                 </div>               </div>             </div>             </div>           <div class="popup-input-wrapper mt-5" >             <h5 class="inline">' + M.TEXT_FONT_FAMILY + '</h5>            <select name="fontFamily"></select>             </div>           <div class="popup-input-wrapper input-slider-wrapper">             <h5 class="inline">' + M.FONT_SIZE + '</h5>            <div id="fontSizeSlider"></div>             <input type="text" readonly="readonly" class="slider-val">           </div>           <div class="popup-input-wrapper input-slider-wrapper" >             <h5 class="inline">' + M.MENU_SPACING + '</h5>            <div id="spacingSlider"></div>             <input type="text" readonly="readonly" class="slider-val">           </div>           <div class="checkbox-wrapper col20 f-left mt-15">             <input id="menuupercase" class="css-checkbox modify" type="checkbox" name="upercase" />             <label for="menuupercase" class="css-label">' + M.ALL_UPPERCASE + '</label>           </div>           <div class="col20 f-left gray-section product-select-wrapper mb-5 mt-15">              <div class="col20 f-left ab-step center-vertically">                 <h4 class="roboto">' + M.HOVER_ACTIVE_SETTINGS + '</h4>                 <a class="text-link blue-text active-color-settings">' + M.CHANGE + '</a>              </div>           </div>           <div class="col20 f-left gray-section product-select-wrapper mb-5">              <div class="col20 f-left ab-step center-vertically">                 <h4 class="roboto">' + M.SUBMENU_SETTINGS + '</h4>                 <a class="text-link blue-text submenu-color-settings">' + M.CHANGE + "</a>              </div>           </div>         </div>";
                    case "menuWidgetItemSettings":
                        return '<div class="popup-widget-wrapper">                 <div class="col20 f-left t-center">                   <a id="menu-add-page" class="blue big-button rounded with-icon transition-bg inline-block">' + M.ADD_MENU_ITEM + '</a>                   <span class="col20 f-left mt-15 help-text">' + M.MENU_ARRANGE_DESC + '</span>                 </div>                 <ol class="tmdp-tree mt-15">                 </ol>               </div>';
                    case "activateStoreMarkup":
                        return '<div class="flex f-left col20 flex-col align-center justify-center store-activation-popup" style="margin: 50px 0 20px;">                   <div class="flex-1"><img src="' + resources + '/images/store-top-icon.png" style="height:90px;"/></div>                   <h3 class="flex-1 mt-35">' + M.STORE_DISABLED + '</h3>                   <h3 class="flex-1 mt-15">' + M.ACTIVATE_NOW + "</h2>                 </div>";
                    case "learnPopup":
                        return '<div class="col20 f-left">                   <div class="col20 f-left funnels-wrapper funnels-header">                     <div class="col20 f-left t-center">                       <h2 class="f-center col20 roboto" style="display: inline-block">Become a Pro Designer & Marketer Today</h2>                       <h3 style="vertical-align: top;">Learn the basics about Simvoly - build pages, funnels and kickstart your business online.</h3>                     </div>                     <div class="col20 f-left t-center" style="margin-top: 28px;">                       <a class="big-button red with-icon inline-block" data-action="createFunnel">Getting Started</a>                     </div>                   </div>                   <div class="learn-navigation-buttons f-left col20 t-center">                     <a class="funnel-navigation-button" data-tab="list">Building Pages</a>                     <a class="funnel-navigation-button" data-tab="stats">Funnels</a>                     <a class="funnel-navigation-button" data-tab="sales">E-Commerce</a>                     <a class="funnel-navigation-button" data-tab="sales">Others</a>                   </div>                   <div class="col20 f-left mt-35">                     <h3 class="col20 f-left t-center">Building Pages</h3>                     <div class="col20 f-left mt-15 videos-wrapper">                       <div class="video-wrapper f-left">                         <div class="img-wrapper col20 f-left"><img class="col20 f-left" src="' + resources + '/images/learn/thumbs/1.jpg"></div>                         <h4 class="f-left roboto t-center col20 mt-15 mb-15">Working With The Drag & Drop Builder</h4>                       </div>                       <div class="video-wrapper f-left">                         <div class="img-wrapper col20 f-left"><img class="col20 f-left" src="' + resources + '/images/learn/thumbs/2.jpg"></div>                         <h4 class="f-left roboto t-center col20 mt-15 mb-15">Create Your First Page</h4>                       </div>                       <div class="video-wrapper f-left">                         <div class="img-wrapper col20 f-left"><img class="col20 f-left" src="' + resources + '/images/learn/thumbs/3.jpg"></div>                         <h4 class="f-left roboto t-center col20 mt-15 mb-15">Build Your First Popup</h4>                       </div>                     </div>                   </div>                   <div class="col20 f-left mt-35">                     <h3 class="col20 f-left t-center">Funnels</h3>                     <div class="col20 f-left mt-15 videos-wrapper">                       <div class="video-wrapper f-left">                         <div class="img-wrapper col20 f-left"><img class="col20 f-left" src="' + resources + '/images/learn/thumbs/FUNNEL-FIRST-FUNNEL.jpg"></div>                         <h4 class="f-left roboto t-center col20 mt-15 mb-15">Building Your First Funnel [In less than 2 minutes]</h4>                       </div>                       <div class="video-wrapper f-left">                         <div class="img-wrapper col20 f-left"><img class="col20 f-left" src="' + resources + '/images/learn/thumbs/FUNNEL-AB.jpg"></div>                         <h4 class="f-left roboto t-center col20 mt-15 mb-15">A/B Test Your Funnel Steps</h4>                       </div>                       <div class="video-wrapper f-left">                         <div class="img-wrapper col20 f-left"><img class="col20 f-left" src="' + resources + '/images/learn/thumbs/FUNNELS-SALES.jpg"></div>                         <h4 class="f-left roboto t-center col20 mt-15 mb-15">Build a Sales Funnel [In less than 5 minutes]</h4>                       </div>                       <div class="video-wrapper f-left">                         <div class="img-wrapper col20 f-left"><img class="col20 f-left" src="' + resources + '/images/learn/thumbs/FUNNELS-IN-A-SITE.jpg"></div>                         <h4 class="f-left roboto t-center col20 mt-15 mb-15">3 Ways to Use a Funnel in a Website</h4>                       </div>                       <div class="video-wrapper f-left">                         <div class="img-wrapper col20 f-left"><img class="col20 f-left" src="' + resources + '/images/learn/thumbs/FUNNEL-SETTINGS.jpg"></div>                         <h4 class="f-left roboto t-center col20 mt-15 mb-15">Funnel Settings</h4>                       </div>                       <div class="video-wrapper f-left">                         <div class="img-wrapper col20 f-left"><img class="col20 f-left" src="' + resources + '/images/learn/thumbs/FUNNELS-PAYMENTS-TAXES.jpg"></div>                         <h4 class="f-left roboto t-center col20 mt-15 mb-15">Add payment processors, taxes, shipping and discounts</h4>                       </div>                     </div>                   </div>                   <div class="col20 f-left mt-35">                     <h3 class="col20 f-left t-center">Others</h3>                     <div class="col20 f-left mt-15 videos-wrapper">                       <div class="video-wrapper f-left">                         <div class="img-wrapper col20 f-left"><img class="col20 f-left" src="' + resources + '/images/learn/thumbs/OTHER-DOMAIN.jpg"></div>                         <h4 class="f-left roboto t-center col20 mt-15 mb-15">Video Title</h4>                       </div>                       <div class="video-wrapper f-left">                         <div class="img-wrapper col20 f-left"><img class="col20 f-left" src="' + resources + '/images/learn/thumbs/OTHER-SCRIPTS.jpg"></div>                         <h4 class="f-left roboto t-center col20 mt-15 mb-15">Video Title</h4>                       </div>                       <div class="video-wrapper f-left">                         <div class="img-wrapper col20 f-left"><img class="col20 f-left" src="' + resources + '/images/learn/thumbs/OTHER-SEO.jpg"></div>                         <h4 class="f-left roboto t-center col20 mt-15 mb-15">Video Title</h4>                       </div>                     </div>                   </div>                 </div>';
                    case "buttonHoverStyles":
                        return '<div class="popup-widget-wrapper">           <div class="popup-input-wrapper f-left">            <div class="info">              <h5>' + M.TYPE_OF_ANIMATION + '</h5>            </div>            <select name="feedback">            <optgroup label="2D Transitions">               <option value="' + M.GROW + '">' + M.GROW + '</option>               <option value="' + M.POP + '">' + M.POP + '</option>             </optgroup>             <optgroup label="Background Transitions">               <option value="' + M.FADE + '">' + M.FADE + 'Fade</option>               <option value="' + M.SWEEP_RIGHT + '">' + M.SWEEP_RIGHT + '</option>               <option value="' + M.RECTANGLE_OUT + '">' + M.RECTANGLE_OUT + '</option>             </optgroup>             <optgroup label="Shadows">               <option value="' + M.GROW_SHADOW + '">' + M.GROW_SHADOW + '</option>               <option value="' + M.FLOAT_SHADOW + '">' + M.FLOAT_SHADOW + "</option>             </optgroup>           </select>         </div>         </div>";
                    case "formLabelStyles":
                        return '<div class="popup-widget-wrapper">                   <div class="input-wrapper color-pick-wrap-widgets">                     <div class="color-pick-wrap">                       <div></div>                       <input type="text" value="" class="colorpicker-selected modify" name="fieldsLabelColor">                     </div>                     <div class="info">                       <h5>' + M.LABEL_COLOR + '</h5>                     </div>                   </div>                   <div class="input-wrapper color-pick-wrap-widgets">                     <div class="color-pick-wrap">                       <div></div>                       <input type="text" value="" class="colorpicker-selected modify" name="fieldsBgColor">                     </div>                     <div class="info">                       <h5>' + M.FIELDS_BG + '</h5>                     </div>                   </div>                   <div class="input-wrapper color-pick-wrap-widgets">                     <div class="color-pick-wrap">                       <div></div>                       <input type="text" value="" class="colorpicker-selected modify" name="fieldsTextColor">                     </div>                     <div class="info">                       <h5>' + M.FIELDS_TEXT_COLOR + '</h5>                     </div>                   </div>                   <div class="input-wrapper color-pick-wrap-widgets">                     <div class="color-pick-wrap">                       <div></div>                       <input type="text" value="" class="colorpicker-selected modify" name="fieldsBorderColor">                     </div>                     <div class="info">                       <h5>' + M.FIELDS_BORDER_COLOR + '</h5>                     </div>                   </div>                   <div class="popup-input-wrapper mt-15 mb-0">                     <h5 class="inline">' + M.FONT_SIZE + '</h5>                    <input type="text" readonly="readonly" class="slider-val">                     <div id="fieldsTitleSizeSlider"></div>                   </div>                   <div class="popup-input-wrapper mt-15">                     <h5 class="inline">' + M.BORDER_RADIUS + '</h5>                    <input type="text" readonly="readonly" class="slider-val">                     <div id="fieldsBorderRadiusSlider"></div>                   </div>                   <div class="popup-input-wrapper mt-15" >                     <h5 class="inline">' + M.TEXT_FONT_FAMILY + '</h5>                    <select name="fieldsFontFamily"></select>                   </div>                 </div>';
                    case "funnelsShareMarkup":
                        return '<div class="popup-widget-wrapper">           <h3 class="f-left col20 t-center roboto mt-15">%title%</h3>           <span class="f-left col20 t-center mt-15 sub-heading">%desc%</span>           <div class="share-link ellipsis col20 f-left mt-25" data-link="%primarylink%">%primarylink%<a class="copy-link button-tooltip" data-tooltip="copy"><i class="fa fa-link"></i></a></div>           <div class="gray-section f-left col20 mt-35 none" data-role="affiliate-links">             <h4 class="mt-15 t-center col20 f-left">' + M.SHARE_FUNNEL_WITH_AFFILIATE_TITLE + '</h4>             <span class="f-left col20 t-center mt-5 sub-heading">%aff_desc%</span>             <div class="col20 f-left mt-15">               <select style="width: 200px; margin: 0 auto; display: block; border-radius: 30px; float: none;"></select>             </div>             <div class="share-link ellipsis col20 f-left mt-15 mb-15"><span></span><a class="copy-link button-tooltip" data-tooltip="copy"><i class="fa fa-link"></i></a></div>           </div>         </div>';
                    case "subscriptionWidgetChargesMarkup":
                        return '<div class="popup-widget-wrapper">                   <div class="col20 f-left product-select-wrapper gray-section">                     <div class="col20 f-left product-bumps mb-15"></div>                     <div class="col20 f-left t-center">                       <a class="big-button f-none blue inline-block" data-role="add-charge">' + M.ADD_CHARGE + "</a>                     </div>                   </div>                 </div>";
                    case "subscriptionWidgetChargesEmpty":
                        return '<h4 class="ta-center mt-15 mb-15 roboto">No extra charges</h4>';
                    case "subscriptionWidgetChargesRowMarkup":
                        return '<div class="bump-row-wrapper col20 f-left">                   <h4 class="roboto f-left col20 mb-10">%title% - %amount%</h4>                   <div class="col20 f-left">                     <span class="roboto">%description%</span>                     <a data-role="edit" class="text-link blue-text" style="display:inline-block; margin-left: 0;">' + M.EDIT + "</a>                   </div>                 </div>";
                    case "subscriptionWidgetEditChargeMarkup":
                        return '<div class="popup-widget-wrapper">                   <div class="popup-input-wrapper">                     <div class="info">                       <h5>' + M.CHARGE_TITLE + '</h5>                      <input type="text" name="title" class="transition-all">                     </div>                   </div>                   <div class="popup-input-wrapper">                     <div class="info">                       <h5>' + M.CHARGE_DESC + '</h5>                      <input type="text" name="description" class="transition-all">                     </div>                   </div>                   <div class="popup-input-wrapper">                     <div class="info">                       <h5>' + M.CHARGE_AMOUNT + '</h5>                      <input type="number" min="1" step="1" name="amount" class="transition-all">                     </div>                   </div>                 </div>';
                    case "subscriptionWidgetStyleMarkup":
                        return '<div class="popup-widget-wrapper">             <div class="col20 f-left gray-section">               <div class="flex col20" data-visible="no-upsell">                 <a class="addon-select half-select">                   <div class="one-step-icon"></div>                   <h4>' + M.ONE_STEP_CHECKOUT + '</h4>                 </a>                 <a class="addon-select half-select">                   <div class="two-step-icon"></div>                   <h4>' + M.TWO_STEP_CHECKOUT + '</h4>                 </a>               </div>               <div class="popup-input-wrapper mb-0 mt-15" data-visible="no-upsell">                 <div class="checkbox-wrapper">                   <input class="css-checkbox" type="checkbox" id="askForPhone" name="askForPhone" />                   <label class="css-label" for="askForPhone">' + M.ASK_PHONE + '</label>                 </div>               </div>               <div class="popup-input-wrapper mb-0" data-visible="no-upsell">                 <div class="checkbox-wrapper">                   <input class="css-checkbox" type="checkbox" id="doNotAskForAddress" name="doNotAskForAddress" />                   <label class="css-label" for="doNotAskForAddress">' + M.DONT_ASK_BILLING_ADDRESS + '</label>                 </div>               </div>               <div class="popup-input-wrapper mb-0" data-visible="no-upsell">                 <div class="checkbox-wrapper">                   <input class="css-checkbox" type="checkbox" id="showSecureBadge" name="showSecureBadge" />                   <label class="css-label" for="showSecureBadge">' + M.SHOW_SECURED_CHECKOUT_BADGE + '</label>                 </div>               </div>               <div class="col20 f-left mt-25 product-select-wrapper">                 <h4 class="col20 roboto f-left mb-25" data-visible="no-upsell">' + M.STYLING_SETTINGS + '</h4>                 <div class="col20 f-left mb-10 ab-step white-ab-step center-vertically" data-visible="no-upsell">                    <h4 class="roboto">' + M.FIELDS_AND_FIELDS + '</h4>                    <a class="text-link blue-text" data-role="editFields">' + M.STYLE + '</a>                 </div>                 <div class="col20 f-left mb-10 ab-step white-ab-step center-vertically" data-visible="no-upsell">                    <h4 class="roboto">' + M.CHECKOUT_WRAPPER + '</h4>                    <a class="text-link blue-text" data-role="editWrapper">' + M.STYLE + '</a>                 </div>                 <div class="col20 f-left mb-10 ab-step white-ab-step center-vertically" data-role="summary" data-visible="no-upsell">                    <h4 class="roboto">' + M.ORDER_SUMMARY + '</h4>                    <a class="text-link blue-text" data-role="editSummary">' + M.STYLE + '</a>                 </div>                 <div class="col20 f-left mb-10 ab-step white-ab-step center-vertically">                    <h4 class="roboto">' + M.BUTTONS + '</h4>                    <a class="text-link blue-text" data-role="editButtons">' + M.STYLE + '</a>                 </div>                 <div class="col20 f-left mb-10 ab-step white-ab-step center-vertically" data-role="badge" data-visible="no-upsell">                    <h4 class="roboto">' + M.SECURE_BADGE + '</h4>                    <a class="text-link blue-text" data-role="editSecurityBadges">' + M.STYLE + "</a>                 </div>               </div>             </div>           </div>";
                    case "subscriptionWidgetLayoutStyles":
                        return '<div class="popup-widget-wrapper">                   <div class="input-wrapper color-pick-wrap-widgets">                     <div class="color-pick-wrap">                       <div></div>                       <input type="text" value="" class="colorpicker-selected modify" name="bgColor">                     </div>                     <div class="info">                       <h5>' + M.CHECKOUT_BACKGROUND + '</h5>                     </div>                   </div>                   <div class="popup-input-wrapper f-right mt-15">                     <div class="info input-slider-wrapper">                       <h5 class="ta-left">' + M.PADDING_SIZE + '<span class="slider-val f-right"></span></h5>                       <div id="paddingSlider"></div>                       <input type="text" readonly="readonly" class="slider-val modify">                     </div>                   </div>                   <div class="popup-input-wrapper f-right">                     <div class="info input-slider-wrapper">                       <h5 class="ta-left">' + M.BORDER_RADIUS + '<span class="slider-val f-right"></span></h5>                       <div id="borderRadiusSlider"></div>                       <input type="text" readonly="readonly" class="slider-val modify">                     </div>                   </div>                   <div class="popup-input-wrapper mt-15">                     <div class="info">                       <h5>' + M.STEP_1_TITLE + '</h5>                      <input type="text" name="step1Title" class="transition-all">                     </div>                   </div>                   <div class="popup-input-wrapper mt-15">                     <div class="info">                       <h5>' + M.STEP_2_TITLE + '</h5>                      <input type="text" name="step2Title" class="transition-all">                     </div>                   </div>                   <div class="popup-input-wrapper mt-15">                     <div class="info">                       <h5>' + M.SUBSCRIPTION_START_TRIAL_MSG_TITLE + '</h5>                      <input type="text" name="trialStartMessage" class="transition-all" placeholder="' + M.SUBSCRIPTION_START_TRIAL_MESSAGE + '">                     </div>                   </div>                   <div class="popup-input-wrapper">                     <div class="info">                       <h5>' + M.DISCLAIMER_TEXT + '</h5>                     </div>                     <div class="text-field-wrapper mt-15" style="font-family: Arial;"><div class="text-field-content"></div></div>                   </div>                 </div>';
                    case "subscriptionWidgetBumpsMarkup":
                        return '<div class="popup-widget-wrapper">                   <div class="col20 f-left product-select-wrapper gray-section">                     <div class="col20 f-left product-bumps mb-15"></div>                     <div class="col20 f-left t-center">                       <a class="big-button f-none blue inline-block" data-role="add-bump">' + M.ADD_BUMP + "</a>                     </div>                   </div>                 </div>";
                    case "dashboardRootMarkupNoTemplate":
                        return '<div class="new-dashboard-wrapper f-left col20">             <div class="f-left col20">               <div class="dashboard-content-wrapper relative">                 <div id="main-container" class="f-left col20"></div>               </div>             </div>           </div>';
                    case "dashboardRootMarkup":
                        return '<div class="new-dashboard-wrapper f-left col20">             <div class="dashboard-header f-left col20">               <span class="upper-title ta-center">' + M.PROJECT + '</span>               <h1 class="pick-template-title ta-center roboto">                <span data-role="project-name"></span>                 <a rel="action" data-action="renameProject" class="rename-icon" style="margin-left: 3px;">                 <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"                    width="528.899px" height="528.899px" viewBox="0 0 528.899 528.899" style="enable-background:new 0 0 528.899 528.899;"                    xml:space="preserve">                 <g>                   <path d="M328.883,89.125l107.59,107.589l-272.34,272.34L56.604,361.465L328.883,89.125z M518.113,63.177l-47.981-47.981                     c-18.543-18.543-48.653-18.543-67.259,0l-45.961,45.961l107.59,107.59l53.611-53.611                     C532.495,100.753,532.495,77.559,518.113,63.177z M0.3,512.69c-1.958,8.812,5.998,16.708,14.811,14.565l119.891-29.069                     L27.473,390.597L0.3,512.69z"/>                 </g>                 </svg>                 </a>               </h1>               <span class="lower-title mt-5 ta-center" data-role="website-count"></span>               <a rel="action" data-action="switchProject" class="blue-text text-link t-center mt-10">' + M.SWITCH_PROJECT + '</a>              <a href="/me/website" rel="tab" class="dashboard-back-btn rounded-effect"><i class="material-icons"> arrow_back </i>' + M.GO_TO_BUILDER + '</a>             </div>             <div class="f-left col20 dashboard-content-outer">               <div class="dashboard-content-wrapper relative">                 <ul class="upper-navigation f-left col20">                   <li><a rel="tab" href="/me/dashboard" data-menu=""><i class="material-icons">bar_chart</i>' + M.OVERVIEW + '</a></li>                   <li><a rel="tab" href="/me/settings/access" data-menu="access"><i class="material-icons">supervised_user_circle</i>' + M.ADMINS + '</a></li>                   <li><a rel="tab" href="/me/settings/billing" data-menu="billing"><i class="material-icons">credit_card</i>' + M.BILLING + '</a></li>                   <li><a rel="tab" href="/me/dashboard/affiliate" data-menu="affiliate"><i class="material-icons">monetization_on</i>' + M.AFFILIATE_REFERAL + '</a></li>                   <li><a rel="tab" href="/me/dashboard/wl" data-menu="wl"><i class="material-icons">settings_system_daydream</i>' + M.WHITE_LABEL + '</a></li>                   <li><a rel="tab" href="/me/settings" data-menu="settings"><i class="material-icons">settings</i>' + M.ACCOUNT + '</a></li>                 </ul>                 <div id="main-container" class="f-left col20"></div>               </div>             </div>           </div>';
                    case "selectProjectWebsite":
                        return '           <div class="switch-popup-wrapper">             <h2 class="col20 f-left ta-center">' + M.SELECT_WEBSITE + '</h2>             <div class="switch-popup-content-wrapper f-left col20">               <div class="col20 f-left">                 <input placeholder="' + M.SEARCH_BY + '" class="popup-search" name="search">               </div>               <div class="col20 f-left funnel-inner-wrapper mb-25" style="padding: 20px; box-sizing: border-box;" data-id="-1">                 <div class="col20 f-left funnels-wrapper vertical-flex">                 <div class="funnel-inner-texts" style="margin-top:0;">                   <h4 class="col20 f-left" data-type="name">' + M.ALL_SITES_FUNNELS + '</h4>                   <span class="col20 f-left mt-10">%projectName%</span>                 </div>                 </div>               </div>               <div class="col20 f-left none" data-role="websites">                 <h3 class="roboto col20 f-left ta-left mb-10">' + M.WEBSITES + '</h3>                 <div class="col20 f-left sites-list"></div>               </div>               <div class="col20 f-left none" data-role="funnels">                 <h3 class="roboto col20 f-left ta-left mb-10 mt-25">' + M.FUNNELS + '</h3>                 <div class="col20 f-left sites-list"></div>               </div>             </div>           </div>';
                    case "selectProjectWebsiteSingle":
                        return '<div class="col20 f-left funnel-inner-wrapper mini-view" data-id="%id%">                   <div class="col20 f-left funnels-wrapper vertical-flex">                     <div class="funnel-list-stats blue">%nameChar%</div>                     <div class="funnel-inner-texts">                       <h4 class="col20 f-left">%name%</h4>                       <span class="col20 f-left mt-5">%domain%</span>                     </div>                   </div>                 </div>';
                    case "noAdminsMarkup":
                        return '         <div class="col20 f-left funnel-inner-wrapper>           <div class="col20 f-left funnels-wrapper vertical-flex">             <div class="col20 f-left flex flex-row align-center">               <div class="admin-row flex-1">                 <span class="col20 f-left mt-10">' + M.NO_ADMINS + "</span>               </div>             </div>           </div>         </div>";
                    case "switchProjectContextMarkup":
                        return '         <div class="switch-popup-wrapper full-size flex flex-col" style="height: 70vh;">           <a class="close-btn close-popup"></a>           <h2 class="col20 ta-center flex-none">' + M.MY_PROJECTS + '</h2>           <div class="switch-popup-content-wrapper col20 flex-1 flex flex-col" style="padding: 0;">             <div class="upper-navigation col20 mb-15 flex-none" data-role="slider-nav">               <ul>                 <li><a>' + M.ACTIVE + "</a></li>                 <li><a>" + M.TRIAL + "</a></li>                 <li><a>" + M.EXPIRED + '</a></li>               </ul>             </div>             <div class="col20 f-left t-center flex-none">               <a class="big-button blue with-icon inline-block" data-action="startNewProject" rel="action" data-target="CPanel">' + M.START_PROJECT + '</a>             </div>             <div class="flex col20 align-center justify-center need-help-text-wrapper" data-key="switchProject"><a class="need-help-text" rel="action" data-action="showHelperVideo" data-target="CPanel">' + M.NEED_HELP + " <span>" + M.PLAY_VIDEO + ' <i class="material-icons"> play_circle_filled </i></span></a></div>             <div class="cpanel-popup-slider flex-1 flex flex-row" style="min-height: 0">               <div class="cpanel-popup-slide overflow" style="padding-top: 25px">                 <div class="col20 f-left" style="box-sizing: border-box; padding: 0px 40px;">                   <div class="col20 f-left" data-type="active"></div>                 </div>               </div>               <div class="cpanel-popup-slide overflow" style="padding-top: 25px">                 <div class="col20 f-left" style="box-sizing: border-box; padding: 0px 40px;">                   <div class="col20 f-left" data-type="trial"></div>                 </div>               </div>               <div class="cpanel-popup-slide overflow" style="padding-top: 25px">                 <div class="col20 f-left" style="box-sizing: border-box; padding: 0px 40px;">                   <div class="col20 f-left" data-type="expired"></div>                 </div>               </div>             </div>           </div>         </div>';
                    case "switchProjectContextItemMarkup":
                        return '          <div class="col20 f-left funnel-inner-wrapper project-view %clz%" data-id="%id%">             <div class="col20 f-left funnels-wrapper vertical-flex">               <div class="funnel-inner-texts" style="margin-top:0;">                 <h4 class="col20 f-left" data-role="name">%name%</h4>               </div>               <div class="funnel-controls"><a class="more-options"></a></div>             </div>           </div>';
                    case "selectFromListMarkup":
                        return '<div class="switch-popup-content-wrapper full-size flex flex-col" data-role="list"></div>';
                    case "selectFromListItemMarkup":
                        return '          <div class="col20 f-left funnel-inner-wrapper project-view" data-id="%id%" data-role="row">             <div class="col20 f-left funnels-wrapper vertical-flex">               <div class="funnel-inner-texts" style="margin-top:0;">                 <h4 class="col20 f-left">%name%</h4>               </div>             </div>           </div>';
                    case "switchWebsiteContext":
                        return '           <div class="switch-popup-wrapper full-size flex flex-col">             <h2 class="col20 ta-center flex-none">' + M.MY_SITES_FUNNELS + '</h2>             <div class="switch-popup-content-wrapper col20 flex-1 flex flex-col" style="padding: 0;">               <div class="upper-navigation col20 mb-15 flex-none" data-role="slider-nav">                 <ul>                   <li><a>' + M.FUNNELS + "</a></li>                   <li><a>" + M.WEBSITES + '</a></li>                 </ul>               </div>               <div class="cpanel-popup-slider flex-1 flex flex-row">                 <div class="cpanel-popup-slide overflow">                   <div class="col20 f-left t-center flex-none none mb-15" style="position: relative;" data-role="new-funnel-wrapper">                     <a class="back-arrow rounded-back-arrow none-soft"></a>                     <a class="middle-button blue with-icon inline-block f-none" rel="action" data-role="createNewFunnel" style="margin-top: 8px;">' + M.CREATE_A_FUNNEL + '</a>                     <div class="flex col20 align-center justify-center need-help-text-wrapper" data-key="funnels"><a class="need-help-text" rel="action" data-action="showHelperVideo" data-target="CPanel">' + M.NEED_HELP + " <span>" + M.PLAY_VIDEO + ' <i class="material-icons"> play_circle_filled </i></span></a></div>                   </div>                   <div class="t-center none" style="box-sizing: border-box;padding: 7px 40px 0px;float:left; width:100%;">                     <div class="col20 f-left mb-35 none">                       <div class="flex align-center justify-center">                         <div class="funnel-search-wrapper">                           <a href=""><i class="material-icons"> search </i></a>                           <input type="text" placeholder="Type to search">                         </div>                         <a href="" class="label-button none"><i class="material-icons"> group_work </i></a>                       </div>                       <div class="funnel-website-tags-wrapper f-left col20 none">                         <ul class="funnel-website-tags tags-wrapper flex align-center justify-center col20 none-soft tagit ui-widget ui-widget-content ui-corner-all mb-10">                             <li class="tagit-choice ui-widget-content ui-state-default ui-corner-all tagit-choice-editable"><span class="tagit-label">Funnel Tag</span><a class="tagit-close"><span class="text-icon">Ã—</span><span class="ui-icon ui-icon-close"></span></a>                                 <input type="hidden" value="stancho" name="tags" class="tagit-hidden-field">                             </li>                             <li class="tagit-choice ui-widget-content ui-state-default ui-corner-all tagit-choice-editable"><span class="tagit-label">Funnel Tag</span><a class="tagit-close"><span class="text-icon">Ã—</span><span class="ui-icon ui-icon-close"></span></a>                                 <input type="hidden" value="stancho" name="tags" class="tagit-hidden-field">                             </li>                             <li class="tagit-choice ui-widget-content ui-state-default ui-corner-all tagit-choice-editable"><span class="tagit-label">Funnel Tag</span><a class="tagit-close"><span class="text-icon">Ã—</span><span class="ui-icon ui-icon-close"></span></a>                                 <input type="hidden" value="stancho" name="tags" class="tagit-hidden-field">                             </li>                         </ul>                         <a href="" class="blue-text text-link f-12 t-center">Clear All Tags</a>                       </div>                     </div>                   </div>                   <div class="col20 f-left funnels-list-inner-wrapper">                     <div class="col20 f-left" data-type="funnels"></div>                     <div class="t-center">                     \t<a rel="action" data-action="restoreDeletedFunnel" data-target="CPanel" class="blue-text" style="position: relative; top: 16px">' + M.RESTORE_DELETED_FUNNEL + '</a>                     </div>                     <div class="col20 f-left" data-type="site-funnels" style="display: none">                       <div class="col20 f-left" data-role="list"></div>                     </div>                   </div>                 </div>                 <div class="cpanel-popup-slide overflow">                   <div class="col20 f-left t-center" style="box-sizing: border-box; padding: 0px 40px 0;">                     <div class="col20 f-left t-center flex-none mb-15" data-role="new-website-wrapper">                       <div style="box-sizing: border-box; float:left; width:100%;">                         <div class="col20 f-left mb-35 none">                           <div class="flex align-center justify-center">                             <div class="funnel-search-wrapper">                               <a href=""><i class="material-icons"> search </i></a>                               <input type="text" placeholder="Type to search">                             </div>                           </div>                         </div>                         <a class="middle-button blue with-icon inline-block f-none" rel="action" data-action="createNewWebsite" data-target="CPanel" style="margin-top: 8px;">' + M.CREATE_A_WEBSITE + '</a>                     </div>                     </div>                     <div class="col20 f-left" data-type="websites"></div>                    <div class="t-center">                     \t<a rel="action" data-action="restoreDeletedWebsite" data-target="CPanel" class="blue-text" style="position: relative; top: 16px">' + M.RESTORE_DELETED_WEBSITE + "</a>                     </div>                   </div>                 </div>               </div>             </div>           </div>";
                    case "noFunnelsMessage":
                        return '<h3 style="text-align: center; padding: 40px 0;">' + M.NO_FUNNELS + "</h3>";
                    case "noSitesMessage":
                        return '<h3 style="text-align: center; padding: 40px 0;">' + M.NO_WEBSITES + "</h3>";
                    case "switchWebsiteItem":
                        return '           <div class="col20 f-left funnel-inner-wrapper">             <div class="col20 f-left funnels-wrapper vertical-flex">               <a class="paused-item-tooltip button-tooltip" data-timeout="10000"><span class="material-icons"> pause </span></a>               <div class="funnel-list-stats blue" data-role="logo"></div>               <div class="funnel-inner-texts">                 <h4 class="col20 f-left" data-role="name"></h4>                 <span class="col20 f-left mt-10" data-role="subtext"></span>               </div>               <div class="funnel-controls">                 <a target="_blank" class="preview-icon button-tooltip" data-tooltip="previewFunnel" data-bottom="true"></a>                 <a class="more-options"></a>               </div>             </div>           </div>';
                    case "websiteSettingsPopup":
                        return '            <div class="global-settings-popup-wrapper full-size flex flex-row">               <div class="flex-none">                 <div class="global-left-nav big" style="overflow: auto; background-color: #fff;">                   <div class="col20 f-left">                     <h3 class="global-title f-left">%title%</h3>                     <ul class="global-nav f-left">                       <li><a class="popup-tab-trigger transition-all vertical-flex" data-open="code"><div class="custom-code-icon"></div>' + M.CUSTOM_CODE + '</a></li>                       <li><a class="popup-tab-trigger transition-all vertical-flex" data-open="seo"><div class="page-seo-icon"></div>' + M.PAGE_SEO + '</a></li>                       <li><a class="popup-tab-trigger transition-all vertical-flex" data-open="files"><div class="file-manager-icon"></div>' + M.FILE_MANAGER + '</a></li>                     </ul>                     <ul class="global-nav f-left mt-25">                       <li><a class="popup-tab-trigger transition-all" data-show="general">' + M.GENERAL + '</a></li>                       <li class="none"><a class="popup-tab-trigger transition-all" data-open="headers">' + M.HEADERS + '</a></li>                       <li><a class="popup-tab-trigger transition-all" data-show="domains">' + M.DOMAINS + '</a></li>                       <li><a class="popup-tab-trigger transition-all" data-show="language">' + M.LANGUAGE_TIME + '</a></li>                       <li><a class="popup-tab-trigger transition-all" data-show="cookies">' + M.COOKIES_GDPR + '</a></li>                       <li><a class="popup-tab-trigger transition-all" data-show="apps">' + M.APPLICATIONS + '</a></li>                       <li><a class="popup-tab-trigger transition-all close-popup" rel="tab" href="/me/crm/marketing/system">' + M.SYSTEM_EMAILS + '</a></li>                       <li><a class="popup-tab-trigger transition-all" data-show="personalization">' + M.PERSONALIZATION + '</a></li>                       <li><a class="popup-tab-trigger transition-all" data-show="301redirects">' + M.URL_REDIRECTS + '</a></li>                    </ul>                   </div>                 </div>               </div>               <div class="flex-1 flex flex-col relative web-settings-content" style="overflow: hidden; background-color: #f5f6fa;">               </div>             </div>';
                    case "websiteSettingsBtnsTemplate":
                        return '            <div class="flex-none" style="padding: 15px 50px;"><a class="blue middle-button f-right" data-role="save">' + M.SAVE + "</a></div>";
                    case "websiteSettings301RedirectFieldTemplate":
                        return '           <div class="f-left col20 gray-section redirect-record flex align-center relative" data-role="rule-field">                 <span class="col10 f-left with-arrow">%from%</span>                 <i class="material-icons redirect-arrow flex-none">arrow_forward</i>                 <span class="col10 f-left">%to%</span>                 <a class="more-options"></a>           </div>';
                    case "websiteSettings301RedirectTemplate":
                        return '            <div class="flex-1 box-with-space">               <div class="f-left col20 mb-25 center-vertically" style="justify-content: space-between;">                 <h2 class="roboto font-24">' + M.URL_REDIRECTS + '</h2>                 <a class="big-button f-right blue with-icon inline-block" data-role="new-redirect">' + M.NEW_REDIRECT + '</a>               </div>               <span class="col20 f-left f-15 gray-text">' + M.URL_REDIRECTS_DESC + '</span>               <div class="col20 f-left mt-35" data-role="rule-fields"></div>            </div>';
                    case "websiteSettingsEdit301RedirectTemplate":
                        return '          <div class="popup-newpage-wrapper">             <div class="popup-input-wrapper">               <h5>' + M.REDIRECT_FROM + "</h5>                <span>" + M.REDIRECT_PATH_DESC + '</span>               <input type="text" name="from" class="required transition-all">             </div>             <div class="popup-input-wrapper mt-15" >               <h5>' + M.REDIRECT_TO + "</h5>                <span>" + M.REDIRECT_PATH_DESC + '</span>               <input type="text" name="to" class="required transition-all">             </div>             <div class="popup-input-wrapper">               <h5>' + M.REDIRECT_TYPE + "</h5>                <span>" + M.REDIRECT_TYPE_DESC + '</span>               <select name="type" class="required transition-all"> \\n                <option value="301">' + M.REDIRECT_TYPE_PERMANENT + '</option>                <option value="302">' + M.REDIRECT_TYPE_TEMP + '</option>              </select>            </div>             <div class="section f-left col20 mt-15">               <div class="info" style="width: 60%">                 <h5>' + M.ENABLE_REGEX + "</h5>                 <span>" + M.ENABLE_REGEX_SUB + '</span>               </div>               <div class="right-side f-right">                 <div class="onoffswitch">                   <input type="checkbox" class="onoffswitch-checkbox modify" id="regex" name="regex">                   <label class="onoffswitch-label" for="regex" id="isRegexTrigger">                     <span class="onoffswitch-inner"></span>                     <span class="onoffswitch-switch"></span>                   </label>                 </div>               </div>             </div>           </div>';
                    case "websiteSettingsGeneralTemplate":
                        return '          <div class="flex-1 box-with-space">             <h2 class="f-left col20 mb-45 roboto font-24">' + M.GENERAL_SETTINGS + '</h2>             <div class="col20 f-left">               <div class="section f-left col20 mb-25">                 <div class="info">                   <h3>' + M.TITLE + '</h3>                   <span class="none">' + M.WEBSITE_TITLE_DESC + '</span>                 </div>                 <input type="text" name="websiteTitle" class="transition-all big-input-settings" placeholder="' + M.WEBSITE_TITLE_DESC + '">               </div>               <div class="section section-logo f-left col10" style="padding-right: 20px; box-sizing: border-box;">                 <a class="add-image transition-all" id="faviconBtn" data-name="favicon">                   <span class="add-button"></span>                 </a>                 <div class="info logo-info">                   <h3>' + M.FAVICON + '</h3>                   <span class="mt-5-important f-left col20">' + M.FAVICON_DESC + '<br>                     <span class="blue-text">' + M.FAVICON_DIMENSIONS + '</span></span>                 </div>               </div>               <div class="section section-logo f-left col10" style="padding-right: 20px; box-sizing: border-box;">                 <a class="add-image transition-all" id="shareImageBtn" data-name="shareImage">                   <span class="add-button"></span>                 </a>                 <div class="info logo-info">                   <h3>' + M.SHARE_IMAGE + '</h3>                   <span class="mt-5-important f-left col20">' + M.SHARE_IMAGE_DESC + '</span>                 </div>               </div>               <div class="col20 f-left none" data-role="funnel-settings">                 <div class="checkbox-wrapper mt-15">                   <input class="css-checkbox" type="checkbox" id="hideProductLinks" name="hideProductLinks" />                   <label class="css-label" for="hideProductLinks">' + M.REMOVE_PRODUCT_LINKS_TITLE + "                    <span>" + M.REMOVE_PRODUCT_LINKS_DESC + '</span>                   </label>                 </div>                 <div class="checkbox-wrapper">                   <input class="css-checkbox" type="checkbox" id="showCheckoutButton" name="showCheckoutButton" />                   <label class="css-label" for="showCheckoutButton">' + M.SHOW_FUNNEL_CHECKOUT_BTN + "                    <span>" + M.SHOW_FUNNEL_CHECKOUT_BTN_DESC + '</span>                   </label>                 </div>                 <div class="popup-input-wrapper" data-role="checkout-button-controls">                   <div class="info mt-5">                     <h5>' + M.CHECKOUT_BUTTON_STYLE + '</h5>                     <span></span>                  </div>                   <select name="checkoutButtonStyle">                    <option value="button">' + M.FLOATING_CHECKOUT_BUTTON + '</option>                    <option value="cart-popup">' + M.POPUP_WITH_ORDER_SUMMARY + '</option>                  </select>                </div>                 <div class="popup-input-wrapper" data-role="checkout-button-controls">                   <div class="info mt-5">                     <h5>' + M.FUNNEL_CHECKOUT_BTN_TARGET_TITLE + "</h5>                     <span>" + M.FUNNEL_CHECKOUT_BTN_TARGET_DESC + '</span>                  </div>                   <input class="select-like" name="checkoutButtonTarget" readonly="readonly">                 </div>               </div>             </div>           </div>' + Templates.get("websiteSettingsBtnsTemplate");
                    case "websiteSettingsDomainsTemplate":
                        return '         <div class="flex-1 box-with-space">           <h2 class="f-left col20 mb-25 roboto font-24" data-role="title">' + M.DOMAINS + '</h2>           <div class="col20 f-left mb-45">             <div class="info mb-15">               <h3>' + M.DOMAIN_TYPE_SYSTEM + '</h3>             </div>             <div class="col20 f-left" data-role="system-domain"></div>             <div>               <div class="info mt-25 mb-15">                <h3>' + M.DOMAIN_TYPE_CUSTOM + '</h3>              </div>              <div class="col20 f-left" data-role="custom-domain"></div>             </div>             <div class="col20 f-left mb-15 mt-25 gray-section new-domain-section none-soft">              <h4 class="t-center col20 f-left mb-15">' + M.ENTER_DOMAIN + '</h4>              <input type="text" name="new-domain" class="col20 big-input" placeholder="yourdomain.com"/>              <div class="col20 f-left mt-15 t-center">                <a class="big-button f-none blue inline-block" data-role="connect">' + M.CONNECT_DOMAIN + '</a>              </div>              <div class="col20 f-left mt-15 t-center">                <a data-role="toggle-new">' + M.CANCEL + '</a>              </div>            </div>            <div class="col20 f-left mt-25 t-center connect-domain-section">              <a data-role="toggle-new" class="big-button with-icon blue">' + M.CONNECT_EXISTING_DOMAIN + '</a>            </div>            <div class="funnels-wrapper f-left col20 none-soft no-domain-section" style="padding: 0 30px;">              <div class="col20 f-left warning-wrapper" style="display: block;">                <span class="col20 f-left t-center warrning-message">                  <span data-role="message">' + M.ERR_NO_CUSTOM_DOMAINS + '</span>                  <a data-action="upgrade" class="f-none inline-block close-popup" style="text-decoration: underline;">' + M.UPGRADE_NOW + "</a></span>              </div>            </div>          </div>         </div>";
                    case "websiteSettingsDomainRowTemplate":
                        return '        <div class="col20 f-left mb-10 white-section box-shadow domain-item %primary% %typeClass%" data-domain="%domain%">           <h5 class="f-left mt-13">             <span class="funnel-system-url">%domain%</span>             <span class="system-tag">%type%</span>           </h5>           <div class="domain-controls">             <a class="domain-settings">               <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"                    viewBox="0 0 478.703 478.703" style="enable-background:new 0 0 478.703 478.703;" xml:space="preserve">                 <path d="M454.2,189.101l-33.6-5.7c-3.5-11.3-8-22.2-13.5-32.6l19.8-27.7c8.4-11.8,7.1-27.9-3.2-38.1l-29.8-29.8                      c-5.6-5.6-13-8.7-20.9-8.7c-6.2,0-12.1,1.9-17.1,5.5l-27.8,19.8c-10.8-5.7-22.1-10.4-33.8-13.9l-5.6-33.2                      c-2.4-14.3-14.7-24.7-29.2-24.7h-42.1c-14.5,0-26.8,10.4-29.2,24.7l-5.8,34c-11.2,3.5-22.1,8.1-32.5,13.7l-27.5-19.8                      c-5-3.6-11-5.5-17.2-5.5c-7.9,0-15.4,3.1-20.9,8.7l-29.9,29.8c-10.2,10.2-11.6,26.3-3.2,38.1l20,28.1                      c-5.5,10.5-9.9,21.4-13.3,32.7l-33.2,5.6c-14.3,2.4-24.7,14.7-24.7,29.2v42.1c0,14.5,10.4,26.8,24.7,29.2l34,5.8                      c3.5,11.2,8.1,22.1,13.7,32.5l-19.7,27.4c-8.4,11.8-7.1,27.9,3.2,38.1l29.8,29.8c5.6,5.6,13,8.7,20.9,8.7c6.2,0,12.1-1.9,17.1-5.5                      l28.1-20c10.1,5.3,20.7,9.6,31.6,13l5.6,33.6c2.4,14.3,14.7,24.7,29.2,24.7h42.2c14.5,0,26.8-10.4,29.2-24.7l5.7-33.6                      c11.3-3.5,22.2-8,32.6-13.5l27.7,19.8c5,3.6,11,5.5,17.2,5.5l0,0c7.9,0,15.3-3.1,20.9-8.7l29.8-29.8c10.2-10.2,11.6-26.3,3.2-38.1                      l-19.8-27.8c5.5-10.5,10.1-21.4,13.5-32.6l33.6-5.6c14.3-2.4,24.7-14.7,24.7-29.2v-42.1                      C478.9,203.801,468.5,191.501,454.2,189.101z M451.9,260.401c0,1.3-0.9,2.4-2.2,2.6l-42,7c-5.3,0.9-9.5,4.8-10.8,9.9                      c-3.8,14.7-9.6,28.8-17.4,41.9c-2.7,4.6-2.5,10.3,0.6,14.7l24.7,34.8c0.7,1,0.6,2.5-0.3,3.4l-29.8,29.8c-0.7,0.7-1.4,0.8-1.9,0.8                      c-0.6,0-1.1-0.2-1.5-0.5l-34.7-24.7c-4.3-3.1-10.1-3.3-14.7-0.6c-13.1,7.8-27.2,13.6-41.9,17.4c-5.2,1.3-9.1,5.6-9.9,10.8l-7.1,42                      c-0.2,1.3-1.3,2.2-2.6,2.2h-42.1c-1.3,0-2.4-0.9-2.6-2.2l-7-42c-0.9-5.3-4.8-9.5-9.9-10.8c-14.3-3.7-28.1-9.4-41-16.8                      c-2.1-1.2-4.5-1.8-6.8-1.8c-2.7,0-5.5,0.8-7.8,2.5l-35,24.9c-0.5,0.3-1,0.5-1.5,0.5c-0.4,0-1.2-0.1-1.9-0.8l-29.8-29.8                      c-0.9-0.9-1-2.3-0.3-3.4l24.6-34.5c3.1-4.4,3.3-10.2,0.6-14.8c-7.8-13-13.8-27.1-17.6-41.8c-1.4-5.1-5.6-9-10.8-9.9l-42.3-7.2                      c-1.3-0.2-2.2-1.3-2.2-2.6v-42.1c0-1.3,0.9-2.4,2.2-2.6l41.7-7c5.3-0.9,9.6-4.8,10.9-10c3.7-14.7,9.4-28.9,17.1-42                      c2.7-4.6,2.4-10.3-0.7-14.6l-24.9-35c-0.7-1-0.6-2.5,0.3-3.4l29.8-29.8c0.7-0.7,1.4-0.8,1.9-0.8c0.6,0,1.1,0.2,1.5,0.5l34.5,24.6                      c4.4,3.1,10.2,3.3,14.8,0.6c13-7.8,27.1-13.8,41.8-17.6c5.1-1.4,9-5.6,9.9-10.8l7.2-42.3c0.2-1.3,1.3-2.2,2.6-2.2h42.1                      c1.3,0,2.4,0.9,2.6,2.2l7,41.7c0.9,5.3,4.8,9.6,10,10.9c15.1,3.8,29.5,9.7,42.9,17.6c4.6,2.7,10.3,2.5,14.7-0.6l34.5-24.8                      c0.5-0.3,1-0.5,1.5-0.5c0.4,0,1.2,0.1,1.9,0.8l29.8,29.8c0.9,0.9,1,2.3,0.3,3.4l-24.7,34.7c-3.1,4.3-3.3,10.1-0.6,14.7                      c7.8,13.1,13.6,27.2,17.4,41.9c1.3,5.2,5.6,9.1,10.8,9.9l42,7.1c1.3,0.2,2.2,1.3,2.2,2.6v42.1H451.9z"/>                <path d="M239.4,136.001c-57,0-103.3,46.3-103.3,103.3s46.3,103.3,103.3,103.3s103.3-46.3,103.3-103.3S296.4,136.001,239.4,136.001                      z M239.4,315.601c-42.1,0-76.3-34.2-76.3-76.3s34.2-76.3,76.3-76.3s76.3,34.2,76.3,76.3S281.5,315.601,239.4,315.601z"/>              </svg>            </a>          </div>          <div class="content none-soft" data-role="information">             <div class="f20"><h1 class="domain-message"></h1></div>             <div class="f20 domain-info">              <span>' + M.DOMAIN_EXPLAIN_TEXT + '</span>            </div>            <div class="domain-table">              <div class="row title">                <span>' + M.HOST_NAME + "</span>                <span>" + M.RECORD_TYPE + "</span>                <span>" + M.VALUE + '</span>              </div>              <div class="row info">                <span>@</span>                <span>A</span>                <span>%ip%</span>              </div>              <div class="row info">                <span>www</span>                <span>CNAME</span>                <span>%domain%</span>              </div>            </div>          </div>           <div class="new-subdomain-wrapper none-soft col20 f-left center-vertically">             <input placeholder="' + M.NEW_SUBDOMAIN + '" type="text" name="custom-subdomain" class="transition-border inline-block f-none" value="">             <span class="root-domain inline-block f-none">.%rootDomain%</span>             <a data-action="changeSubdomain" class="next-button middle-button blue inline-block f-none">' + M.CHANGE + "</a>           </div>         </div>";
                    case "websiteSettingsLanguageTemplate":
                        return '         <div class="flex-1 box-with-space">           <h2 class="f-left col20 mb-45 roboto font-24">' + M.LANGUAGE_TIME + '</h2>           <div class="col20 f-left mb-45">             <div class="section f-left col20 mb-15">               <div class="info">                 <h3>' + M.WEBSITE_LANGUAGE + "</h3>                 <span>" + M.WEBSITE_LANGUAGE_DESC + '</span>               </div>               <select name="websiteLanguage" class="mt-15">                 <option value="en">English</option>                 <option value="de">Deutsch</option>' + (5947 === platformId || 9597 === platformId || window.inTestEnvironment ? '<option value="de_LU">Deutsch (Sie)</option><option value="de_CH">Deutsch (Schweiz)</option>' : "") + '<option value="da">Dansk</option>                 <option value="es">EspaÃ±ol</option>                 <option value="fr">FranÃ§ais</option>                 <option value="el">Î•Î»Î»Î·Î½Î¹ÎºÎ¬</option>                 <option value="it">Italiano</option>                 <option value="nl_NL">Nederlandse</option>                 <option value="nb">Norsk</option>                 <option value="pl">Polski</option>                 <option value="pt_BR">PortuguÃªs (BR)</option>                 <option value="pt_PT">PortuguÃªs (PT)</option>                 <option value="ro">RomÃ¢nÄƒ</option>                 <option value="sv_SE">Svenska</option>                 <option value="hu">Magyar</option>                 <option value="bg">Ð‘ÑŠÐ»Ð³Ð°Ñ€ÑÐºÐ¸</option>                 <option value="ru">Ð ÑƒÑÑÐºÐ¸Ð¹</option>                 <option value="uk">Ð£ÐºÑ€Ð°Ñ—Ð½ÑÑŒÐºÐ°</option>                 <option value="th">à¹„à¸—à¸¢</option>                 <option value="zh">ç®€ä½“ä¸­æ–‡</option>                 <option value="zh_JO">ç¹é«”ä¸­æ–‡</option>                 <option value="iw">×¢Ö´×‘×¨Ö´×™×ª</option>                 <option value="jp">æ—¥æœ¬äºº</option>                 <option value="ka">áƒ¥áƒáƒ áƒ—áƒ£áƒšáƒ˜</option>                 <option value="lt">Lietuvis</option>                 <option value="ar">Ø¹Ø±Ø¨Ù‰</option>                <option value="az">AzÉ™rbaycan</option>                <option value="lv">Latvietis</option>                <option value="vn">Tiáº¿ng Viá»‡t</option>                <option value="sl">SlovenÅ¡Äina</option>                <option value="sk">SlovÃ¡k</option>                <option value="af">Afrikaans</option>                <option value="sr">Ð¡Ñ€Ð¿ÑÐºÐ¸</option>                <option value="tr">TÃ¼rkÃ§e</option>                <option value="cs">ÄeÅ¡tina</option>                <option value="hr">Hrvatski</option>                <option value="et">Eesti keel</option>                <option value="ko">í•œêµ­ì–´</option>                <option value="hi">à¤¹à¤¿à¤‚à¤¦à¥€</option>              </select>             </div>             <div class="section f-left col20 mb-15">               <div class="info">                 <h3>' + M.WEBSITE_TIMEZONE + "</h3>                 <span>" + M.WEBSITE_TIMEZONE_DESC + '</span>               </div>               <span class="websiteTimezone" data-val=""></span>             </div>             <div class="section f-left col20 mb-15">               <div class="info">                 <h3>' + M.DATE_FORMAT + '</h3>               </div>               <select name="dateFormat" class="mt-15">                 <option value="us">02/28/2018 11:09 PM</option>                 <option value="uk">28/02/2018 23:09</option>               </select>             </div>             <div class="section f-left col20 mb-15">               <div class="checkbox-wrapper">                 <input id="rtl" class="css-checkbox modify" type="checkbox" name="rtl" />                 <label for="rtl" class="css-label">' + M.TEXT_DIRECTION + "</label>               </div>             </div>           </div>         </div>" + Templates.get("websiteSettingsBtnsTemplate");
                    case "websiteSettingsCookiesTemplate":
                        return '         <div class="flex-1 box-with-space">           <h2 class="f-left col20 mb-45 roboto font-24">' + M.COOKIES_AND_GDPR + '</h2>           <div class="section f-left col20 mb-25">             <div class="section f-left col20 mb-25">               <div class="info" style="width: 60%">                 <h3>' + M.COOKIE_LAW_TITLE + "</h3>                 <span>" + M.COOKIE_LAW_DESC + '</span>               </div>               <div class="right-side f-right">                 <div class="onoffswitch">                   <input type="checkbox" class="onoffswitch-checkbox modify" id="showCookiesDisclaimer" name="showCookiesDisclaimer">                   <label class="onoffswitch-label" for="showCookiesDisclaimer" id="showCookiesDisclaimerTrigger">                     <span class="onoffswitch-inner"></span>                     <span class="onoffswitch-switch"></span>                   </label>                 </div>               </div>             </div>             <div class="section f-left col20 mb-25 none-soft" id="cookiesDisclaimerTextWrapper">               <div class="info">                 <h3>' + M.DISCLAIMER_TEXT + '</h3>               </div>               <textarea name="cookiesDisclaimerText" rows="4" class="transition-border" placeholder="' + M.WEBSITE_DESCRIPTION + '"></textarea>               <div class="section section4">                 <div class="info">                   <h3>' + M.COOKIES_INFO_LBL + '</h3>                 </div>                 <input type="text" class="transition-all" name="cookieInfoBtnText" placeholder="' + M.COOKIES_INFO_PLACEHOLDER + '">                 <div class="info mt-15">                   <h3>' + M.COOKIES_INFO_URL + '</h3>                 </div>                 <input class="template-select select-like" name="cookieInfoBtnLink" readonly="readonly">                 <div class="info mt-15">                   <h3>' + M.COOKIES_ACCEPT_BTN_LBL + '</h3>                 </div>                 <input type="text" class="transition-all" name="cookieAcceptBtnText" placeholder="OK">               </div>             </div>             <div class="section col20 f-left mb-25">               <div class="info">                 <h3>' + M.DATA_REQUEST_LBL + "</h3>                 <span>" + M.DATA_REQUEST_DESC + '</span>                 <a rel="action" data-action="requestCustomerData" data-target="CPanel" class="middle-button f-left blue transition-all mt-15">' + M.DATA_REQUEST_BTN_TEXT + "</a>               </div>             </div>           </div>         </div>" + Templates.get("websiteSettingsBtnsTemplate");
                    case "websiteSettingsAppsTemplate":
                        return '        <div class="flex-1 box-with-space">           <div class="f-left col20 mb-25 center-vertically" style="justify-content: space-between;">             <h2 class="roboto font-24">' + M.APPLICATIONS + '</h2>             <a class="big-button f-right blue with-icon inline-block" data-role="connect">' + M.ADD_APPLICATION + '</a>           </div>           <div class="col20 f-left mb-45 cpanel-table-listing">             <div class="content" data-role="information">               <div class="domain-table">                <div class="row info big-row">                  <span>' + M.API_KEY + '</span>                  <span><a class="reveal-button relative blue-text">' + M.REVEAL_API_KEY + '</a></span>                </div>              </div>            </div>           </div>           <span class="col20 f-left mb-25">' + M.APPS_HINT + '</span>           <div class="col20 f-left mb-45" data-role="apps-list"></div>         </div>';
                    case "newAppMarkup":
                        return '<div class="app-wrapper" data-type="%type%">                   <div class="col-20 flex align-center space-between">                     <div class="col-20 flex align-center">                       <img src="%image%" class="app-logo">                       <div>                         <h3 class="t-left">%name%</h3>                         <span class="t-left">%description%</span>                       </div>                     </div>                     <a class="middle-button blue flex-none ml-25" data-role="connect" data-type="%type%">' + M.CONNECT + "</a>                   </div>                 </div>";
                    case "connectedAppMarkup":
                        return '        <div class="app-wrapper">           <div class="col-20 flex align-center space-between">             <div class="col-20 flex align-center">               <img src="%image%" class="app-logo">               <div>                 <h3 class="t-left">%name%</h3>                 %desc%              </div>             </div>             <a class="middle-button blue flex-none ml-25" data-role="settings" data-id="%id%" data-type="%type%">%btnLabel%</a>           </div>         </div>';
                    case "noConnectedAppsMarkup":
                        return "<h3>" + M.NO_CONNECTED_APPS + "</h3>";
                    case "noAppsAvailableMarkup":
                        return "<h3>" + M.NO_APPS_AVAILABLE + "</h3>";
                    case "newAppPopup":
                    case "newProcessorAppPopup":
                        return '<div class="col20 f-left app-list" style="padding-bottom: 40px;"></div>';
                    case "crmTagsRow":
                        return '          <tr data-id="%id%">             <td><div class="starting-cell"></div></td>             <td><div class="big-cell fs-15">%tag%</div></td>             <td><div class="small-cell text-btn"><a rel="tab" href="/me/crm?tag=%id%&label=%tagLabel%">' + M.VIEW_USERS + '</a></div></td>             <td>               <div class="small-cell">                 <a class="message-delete" rel="action" data-action="deleteTag"></a>               </div>             </td>           </tr>';
                    case "crmPropertyRow":
                        return '          <tr data-id="%id%">            <td><div class="starting-cell"></div></td>            <td><div class="big-cell fs-15 text-btn"><a rel="action" data-action="editProperty">%label%</a></div></td>            <td><div class="big-cell">%type%</div></td>            <td><div class="small-cell">%created%</div></td>            <td>               <div class="small-cell %btnCls%">                 <a rel="action" data-action="editProperty" class="table-edit-btn">                   <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"                     viewBox="0 0 478.703 478.703" style="enable-background:new 0 0 478.703 478.703;" xml:space="preserve">                    <path d="M454.2,189.101l-33.6-5.7c-3.5-11.3-8-22.2-13.5-32.6l19.8-27.7c8.4-11.8,7.1-27.9-3.2-38.1l-29.8-29.8                      c-5.6-5.6-13-8.7-20.9-8.7c-6.2,0-12.1,1.9-17.1,5.5l-27.8,19.8c-10.8-5.7-22.1-10.4-33.8-13.9l-5.6-33.2                      c-2.4-14.3-14.7-24.7-29.2-24.7h-42.1c-14.5,0-26.8,10.4-29.2,24.7l-5.8,34c-11.2,3.5-22.1,8.1-32.5,13.7l-27.5-19.8                      c-5-3.6-11-5.5-17.2-5.5c-7.9,0-15.4,3.1-20.9,8.7l-29.9,29.8c-10.2,10.2-11.6,26.3-3.2,38.1l20,28.1                      c-5.5,10.5-9.9,21.4-13.3,32.7l-33.2,5.6c-14.3,2.4-24.7,14.7-24.7,29.2v42.1c0,14.5,10.4,26.8,24.7,29.2l34,5.8                      c3.5,11.2,8.1,22.1,13.7,32.5l-19.7,27.4c-8.4,11.8-7.1,27.9,3.2,38.1l29.8,29.8c5.6,5.6,13,8.7,20.9,8.7c6.2,0,12.1-1.9,17.1-5.5                      l28.1-20c10.1,5.3,20.7,9.6,31.6,13l5.6,33.6c2.4,14.3,14.7,24.7,29.2,24.7h42.2c14.5,0,26.8-10.4,29.2-24.7l5.7-33.6                      c11.3-3.5,22.2-8,32.6-13.5l27.7,19.8c5,3.6,11,5.5,17.2,5.5l0,0c7.9,0,15.3-3.1,20.9-8.7l29.8-29.8c10.2-10.2,11.6-26.3,3.2-38.1                      l-19.8-27.8c5.5-10.5,10.1-21.4,13.5-32.6l33.6-5.6c14.3-2.4,24.7-14.7,24.7-29.2v-42.1                      C478.9,203.801,468.5,191.501,454.2,189.101z M451.9,260.401c0,1.3-0.9,2.4-2.2,2.6l-42,7c-5.3,0.9-9.5,4.8-10.8,9.9                      c-3.8,14.7-9.6,28.8-17.4,41.9c-2.7,4.6-2.5,10.3,0.6,14.7l24.7,34.8c0.7,1,0.6,2.5-0.3,3.4l-29.8,29.8c-0.7,0.7-1.4,0.8-1.9,0.8                      c-0.6,0-1.1-0.2-1.5-0.5l-34.7-24.7c-4.3-3.1-10.1-3.3-14.7-0.6c-13.1,7.8-27.2,13.6-41.9,17.4c-5.2,1.3-9.1,5.6-9.9,10.8l-7.1,42                      c-0.2,1.3-1.3,2.2-2.6,2.2h-42.1c-1.3,0-2.4-0.9-2.6-2.2l-7-42c-0.9-5.3-4.8-9.5-9.9-10.8c-14.3-3.7-28.1-9.4-41-16.8                      c-2.1-1.2-4.5-1.8-6.8-1.8c-2.7,0-5.5,0.8-7.8,2.5l-35,24.9c-0.5,0.3-1,0.5-1.5,0.5c-0.4,0-1.2-0.1-1.9-0.8l-29.8-29.8                      c-0.9-0.9-1-2.3-0.3-3.4l24.6-34.5c3.1-4.4,3.3-10.2,0.6-14.8c-7.8-13-13.8-27.1-17.6-41.8c-1.4-5.1-5.6-9-10.8-9.9l-42.3-7.2                      c-1.3-0.2-2.2-1.3-2.2-2.6v-42.1c0-1.3,0.9-2.4,2.2-2.6l41.7-7c5.3-0.9,9.6-4.8,10.9-10c3.7-14.7,9.4-28.9,17.1-42                      c2.7-4.6,2.4-10.3-0.7-14.6l-24.9-35c-0.7-1-0.6-2.5,0.3-3.4l29.8-29.8c0.7-0.7,1.4-0.8,1.9-0.8c0.6,0,1.1,0.2,1.5,0.5l34.5,24.6                      c4.4,3.1,10.2,3.3,14.8,0.6c13-7.8,27.1-13.8,41.8-17.6c5.1-1.4,9-5.6,9.9-10.8l7.2-42.3c0.2-1.3,1.3-2.2,2.6-2.2h42.1                      c1.3,0,2.4,0.9,2.6,2.2l7,41.7c0.9,5.3,4.8,9.6,10,10.9c15.1,3.8,29.5,9.7,42.9,17.6c4.6,2.7,10.3,2.5,14.7-0.6l34.5-24.8                      c0.5-0.3,1-0.5,1.5-0.5c0.4,0,1.2,0.1,1.9,0.8l29.8,29.8c0.9,0.9,1,2.3,0.3,3.4l-24.7,34.7c-3.1,4.3-3.3,10.1-0.6,14.7                      c7.8,13.1,13.6,27.2,17.4,41.9c1.3,5.2,5.6,9.1,10.8,9.9l42,7.1c1.3,0.2,2.2,1.3,2.2,2.6v42.1H451.9z"></path>                    <path d="M239.4,136.001c-57,0-103.3,46.3-103.3,103.3s46.3,103.3,103.3,103.3s103.3-46.3,103.3-103.3S296.4,136.001,239.4,136.001                      z M239.4,315.601c-42.1,0-76.3-34.2-76.3-76.3s34.2-76.3,76.3-76.3s76.3,34.2,76.3,76.3S281.5,315.601,239.4,315.601z"></path>                  </svg>                 </a>               </div>             </td>           </tr>';
                    case "crmFilterOption":
                        return '            <div class="filter-option-wrapper f-left">              <div class="filter-option">                <span role="name" class="option-name"></span>                <span role="filter"></span>                <span role="value"></span>                <span role="suffix"></span>                <a class="filter-delete">                  <svg version="1.1" id="Capa_1"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"                       width="10px" height="10px" viewBox="0 0 357 357" style="enable-background:new 0 0 357 357;" xml:space="preserve">                  <polygon points="357,35.7 321.3,0 178.5,142.8 35.7,0 0,35.7 142.8,178.5 0,321.3 35.7,357 178.5,214.2 321.3,357 357,321.3 214.2,178.5"/>                  </svg>                </a>              </div>               <div class="filter-divider">' + M.AND + "</div>            </div>";
                    case "crmFilterOptionRadioWithInput":
                        return '<div class="col20 f-left func-option" data-role="%func%">           <label>             <input type="radio" name="option" value="%func%" />             <span>%funcName%</span>           </label>           <div class="col20 f-left option-value">             <input type="%type%" name="value" />           </div>         </div>';
                    case "crmColumnOption":
                        return '<div class="col20 f-left func-option">           <label>             <input type="checkbox" %disabled% %checked% />             <span>%name%</span>           </label>         </div>';
                    case "crmFilterOptionRadioNoInput":
                        return '          <div class="col20 f-left func-option" data-role="%func%">             <label>               <input type="radio" name="option" value="%func%" />               <span>%funcName%</span>             </label>           </div>';
                    case "crmFilterOptionRadioWithSelect":
                        return '<div class="col20 f-left func-option" data-role="%func%">           <label>             <input type="radio" name="option" value="%func%" />             <span>%funcName%</span>           </label>           <div class="col20 f-left option-value">             <select name="value">%options%</select>           </div>         </div>';
                    case "crmFilterOptionRadioWithDaysInput":
                        return '<div class="col20 f-left func-option" data-role="%func%">           <label>             <input type="radio" name="option" value="%func%" />             <span>%funcName%</span>           </label>           <div class="col20 f-left option-value">             <input type="%type%" name="value" /> <span>' + M.CRM_DAYS_AGO_RIGHT + "</span>          </div>         </div>";
                    case "crmContactsTableHead":
                        return '        <tr class="flex flex-row align-center" style="padding-bottom: 0;">          <th class="checkbox-table">            <div class="checkbox-wrapper small">              <input id="rowcbx0" class="css-checkbox select-cbx" type="checkbox" name="rowcbx0" />              <label for="rowcbx0" class="css-label">&nbsp;</label>            </div>          </th> %cols%         </tr>';
                    case "crmContactRow":
                        return '          <tr class="flex flex-row align-center" data-id="%id%">            <td class="checkbox-table">               <div class="checkbox-wrapper small">                 <input id="rowcbx%id%" class="css-checkbox select-cbx" type="checkbox" name="rowcbx%id%" %checked% />                 <label for="rowcbx%id%" class="css-label">&nbsp;</label>               </div>             </td>             <td class="flex-1">               <a rel="tab" href="/me/crm/contact/%id%">                <div class="personal-icon" style="background-color: %color%">%initial%</div>%name%              </a>            </td> %cols%          </tr>';
                    case "crmContactRowEmpty":
                        return '          <tr style="display: block; width: 100%;">            <td style="display: block; width: 100%; max-width: 100%;" class="empty">' + M.NO_CONTACTS_MESSAGE + "</td>           </tr>";
                    case "crmContactRowLoading":
                        return '<tr style="display: block; width: 100%;" class="loader-tr"><td style="display: block; width: 100%; max-width: 100%;"><div class="small-centered-loading-icon"></td></tr>';
                    case "crmMessagesListItem":
                        return '        <li class="col20 f-left %readClass%" data-id="%id%">           <div class="col20 f-left flex flex-row">            <div class="personal-icon flex-none" style="background-color: %color%">%initital%</div>             <div class="flex-1">               <h5 class="message-name">%name%</h5>               <h6 class="message-email">%email%</h6>               <span class="f-left col20 message-info flex-text-sides">                 <span class="first">' + M.PHONE + ': %phone%</span><div class="divider"></div><span class="last">%time%</span>                 <div class="message-star"><i class="fa fa-star"></i></div>               </span>             </div>           </div>          <div class="mobile-message-content col20 f-left">          </div>        </li>';
                    case "crmMemberCategoryItem":
                        return '<li data-filter="members-%id%" data-id="%id%" class="member-group"><a rel="action" data-action="showMemberGroup"><span>%name%</span><span data-role="filter-count"></span></a></li>';
                    case "customerTagTemplate":
                        return '          <div class="filter-option" data-id="%id%">             <span>%label%</span>             <a class="filter-delete" rel="action" data-action="removeTag">               <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="10px"              height="10px" viewBox="0 0 357 357" style="enable-background:new 0 0 357 357;" xml:space="preserve">                <polygon points="357,35.7 321.3,0 178.5,142.8 35.7,0 0,35.7 142.8,178.5 0,321.3 35.7,357 178.5,214.2 321.3,357 357,321.3 214.2,178.5"></polygon>              </svg>            </a>          </div>';
                    case "customCheckbox":
                        return '<div class="checkbox-wrapper">                   <input id="%id%" class="css-checkbox select-cbx" type="%type%" name="%name%" value="%value%" %checked% %data%>                   <label for="%id%" class="css-label">&nbsp;%label%</label>                 </div>';
                    case "contactMessageUI":
                        return '              <li class="%clz%" data-id="%id%">                 <h5 class="message-name">%name%</h5>                 <h6 class="message-email">                  %email%                   <span class="message-info">                     <span class="f-right">%time%</span>                   </span>                 </h6>                 <div class="col20 f-left message-content">                   <div class="message-wrapper-outer">                     <div class="message-wrapper-content">%content%</div>                   </div>                 </div>               </li>';
                    case "noMessagesUI":
                        return '<h4 class="no-content col20 ta-center">' + M.THERE_ARE_NO_MESSAGES + "</h4>";
                    case "noOrdersUI":
                        return '<h4 class="no-content col20 ta-center">' + M.THERE_ARE_NO_ORDERS + "</h4>";
                    case "websiteSettingsPersonalizationTemplate":
                        return '           <div class="flex-1 box-with-space">             <h2 class="f-left col20 mb-15 roboto font-24">' + M.PERSONALIZATION + '</h2>             <span class="col20 f-left f-15 gray-text">' + M.PERSONALIZATION_DESC + '</span>             <div class="col20 f-left mt-25 connect-domain-section">               <a role="add-property" class="middle-button with-icon blue">' + M.ADD_PERSONALIZATION_TAG + '</a>             </div>             <div class="flex col20 align-center justify-start need-help-text-wrapper" data-key="personalization"><a class="need-help-text" rel="action" data-action="showHelperVideo" data-target="CPanel">' + M.NEED_HELP + " <span>" + M.PLAY_VIDEO + ' <i class="material-icons"> play_circle_filled </i></span></a></div>             <div class="col20 f-left mt-35" data-role="fields"></div>             <div class="f-left col20 gray-section" style="background:#fff;">               <h3 class="col20 f-left mb-25">' + M.SYSTEM_PROPERTIES + '</h3>               <div class="col20 f-left mb-25">                 <h5>' + M.MEMBERS_FN + ' -                   <span class="dynamic-data">{member.first_name}</span>                   <a data-role="copy" data-val="{member.first_name}" class="copy button-tooltip" data-tooltip="copyTag"><i class="fa fa-copy"></i></a>                </h5>                 <span class="col20 f-left mt-5">' + M.MEMBERS_FN_DESC + '</span>               </div>               <div class="col20 f-left mb-25">                 <h5>' + M.MEMBERS_LN + ' -                   <span class="dynamic-data">{member.last_name}</span>                   <a data-role="copy" data-val="{member.last_name}" class="copy button-tooltip" data-tooltip="copyTag"><i class="fa fa-copy"></i></a>                </h5>                 <span class="col20 f-left mt-5">' + M.MEMBERS_LN_DESC + '</span>               </div>               <div class="col20 f-left mb-25">                 <h5>' + M.MEMBERS_EMAIL + ' -                   <span class="dynamic-data">{member.email}</span>                   <a data-role="copy" data-val="{member.email}" class="copy button-tooltip" data-tooltip="copyTag"><i class="fa fa-copy"></i></a>                </h5>                 <span class="col20 f-left mt-5">' + M.MEMBERS_EMAIL_DESC + '</span>               </div>               <div class="col20 f-left mb-25">                 <h5>' + M.TAGS_URL_PARAMETER + ' -                   <span class="dynamic-data">{param.name}</span>                   <a data-role="copy" data-val="{param.name}" class="copy button-tooltip" data-tooltip="copyTag"><i class="fa fa-copy"></i></a>                </h5>                 <span class="col20 f-left mt-5" style="line-height: 16px">' + M.TAGS_URL_PARAMETER_DESC + '</span>               </div>               <div class="col20 f-left">                 <h5>' + M.CURRENT_YEAR + ' -                   <span class="dynamic-data">{current_year}</span>                   <a data-role="copy" data-val="{current_year}" class="copy button-tooltip" data-tooltip="copyTag"><i class="fa fa-copy"></i></a>                </h5>                 <span class="col20 f-left mt-5">' + M.CURRENT_YEAR_DESC + "</span>               </div>             </div>           </div>" + Templates.get("websiteSettingsBtnsTemplate");
                    case "websiteSettingsPersonalizationFieldTemplate":
                        return '             <label class="f-left col20 mb-15" data-role="field">               <h5>%name% -                 <span class="dynamic-data">{%tag%}</span>                 <a data-role="copy" class="copy button-tooltip" data-tooltip="copyTag"><i class="fa fa-copy"></i></a>                <a data-role="edit" class="ml-10 uppercase f-12 blue-text inline-block">' + M.EDIT + '</a>              </h5>               <input type="text" placeholder="%placeholder%" value="%value%">             </label>';
                    case "websiteSettingsEditPersTagTemplate":
                        return '          <div class="popup-newpage-wrapper">             <div class="popup-input-wrapper">               <h5>' + M.NAME + '</h5>                <input type="text" name="name" class="required transition-all">               <span>tag - <b data-role="tag"></b></span>             </div>             <div class="popup-input-wrapper mt-15" >               <h5>' + M.DESCRIPTION + '</h5>                <input type="text" name="description" class="required transition-all">             </div>           </div>';
                    case "initialPersonalizationValuesTemplate":
                        return '          <div class="dynamic-pop-sidebar horizontal-flex-center flex-none">             <img src="' + resources + '/images/personalize-img.png" class="dynamic-img">             <h2 class="t-center mt-25 col20 f-left">' + M.PERSONALIZATION_TITLE + '</h2>             <span class="f-16 t-center col20 f-left mt-25">' + M.PERSONALIZATION_TITLE_DESC + '</span>             <img src="' + emailLogo + '" class="dynamic-logo">           </div>           <div class="flex flex-col flex-1 height-100 overflow-auto dynamic-popup-content">             <div class="dynamic-content-inner flex-1 flex-col justify-center">               <div class="col20 f-left vertical-flex mb-35 flex-none">                 <div class="color-pick-wrap mr-25">                   <div style="width: 40px; height: 40px;"></div>                   <input type="text" class="colorpicker-selected" name="mainColor">                 </div>                 <div>                   <h5 class="col20 f-left">' + M.BRAND_COLOR + '</h5>                   <span class="col20 f-left mt-5 f-14-normal light-gray-text">' + M.BRAND_COLOR_DESC + '</span>                 </div>               </div>               <div class="col20 f-left vertical-flex flex-none" data-role="logo">                 <div class="logo-preview" style="margin-right: 30px;"></div>                 <div>                   <h5 class="col20 f-left">' + M.BRAND_LOGO + '</h5>                   <span class="col20 f-left mt-5 f-14-normal light-gray-text">' + M.BRAND_LOGO_DESC + '</span>                 </div>               </div>             </div>             <div class="pop-navigation col20 f-left t-center flex-none">               <a class="middle-button transparent" data-role="skip">' + M.SKIP_STEP + '</a>               <a class="middle-button blue" data-role="continue">' + M.GO_TO_MY_PAGES + "  â†’</a>             </div>           </div>";
                    case "productSubscriptionEditDialog":
                        return '        <div class="popup-slider-wrapper">           <div class="popup-input-wrapper">             <span class="box-help-text mb-15 f-left col20">' + M.EDIT_SUBSCRIPTION_DESC + '</span>           </div>           <div class="popup-input-wrapper">             <div class="info">               <h5>' + M.BILLING_CYCLES + '</h5>             </div>             <select name="cycles">               <option value="0">' + M.ONGOING_PAYMENTS + '</option>               <option value="2">2 ' + M.PAYMENTS + '</option>               <option value="3">3 ' + M.PAYMENTS + '</option>               <option value="4">4 ' + M.PAYMENTS + '</option>               <option value="5">5 ' + M.PAYMENTS + '</option>               <option value="6">6 ' + M.PAYMENTS + '</option>               <option value="7">7 ' + M.PAYMENTS + '</option>               <option value="8">8 ' + M.PAYMENTS + '</option>               <option value="9">9 ' + M.PAYMENTS + '</option>               <option value="10">10 ' + M.PAYMENTS + '</option>               <option value="11">11 ' + M.PAYMENTS + '</option>               <option value="12">12 ' + M.PAYMENTS + '</option>               <option value="13">13 ' + M.PAYMENTS + '</option>               <option value="14">14 ' + M.PAYMENTS + '</option>               <option value="15">15 ' + M.PAYMENTS + '</option>               <option value="16">16 ' + M.PAYMENTS + '</option>               <option value="17">17 ' + M.PAYMENTS + '</option>               <option value="18">18 ' + M.PAYMENTS + '</option>               <option value="19">19 ' + M.PAYMENTS + '</option>               <option value="20">20 ' + M.PAYMENTS + '</option>               <option value="21">21 ' + M.PAYMENTS + '</option>               <option value="22">22 ' + M.PAYMENTS + '</option>               <option value="23">23 ' + M.PAYMENTS + '</option>               <option value="24">24 ' + M.PAYMENTS + '</option>               <option value="25">25 ' + M.PAYMENTS + '</option>               <option value="26">26 ' + M.PAYMENTS + '</option>               <option value="27">27 ' + M.PAYMENTS + '</option>               <option value="28">28 ' + M.PAYMENTS + '</option>               <option value="29">29 ' + M.PAYMENTS + '</option>               <option value="30">30 ' + M.PAYMENTS + '</option>               <option value="31">31 ' + M.PAYMENTS + '</option>               <option value="32">32 ' + M.PAYMENTS + '</option>               <option value="33">33 ' + M.PAYMENTS + '</option>               <option value="34">34 ' + M.PAYMENTS + '</option>               <option value="35">35 ' + M.PAYMENTS + '</option>               <option value="36">36 ' + M.PAYMENTS + '</option>               <option value="37">37 ' + M.PAYMENTS + '</option>               <option value="38">38 ' + M.PAYMENTS + '</option>               <option value="39">39 ' + M.PAYMENTS + '</option>               <option value="40">40 ' + M.PAYMENTS + '</option>               <option value="41">41 ' + M.PAYMENTS + '</option>               <option value="42">42 ' + M.PAYMENTS + '</option>               <option value="43">43 ' + M.PAYMENTS + '</option>               <option value="44">44 ' + M.PAYMENTS + '</option>               <option value="45">45 ' + M.PAYMENTS + '</option>               <option value="46">46 ' + M.PAYMENTS + '</option>               <option value="47">47 ' + M.PAYMENTS + '</option>               <option value="48">48 ' + M.PAYMENTS + '</option>               <option value="49">49 ' + M.PAYMENTS + '</option>               <option value="50">50 ' + M.PAYMENTS + '</option>               <option value="51">51 ' + M.PAYMENTS + '</option>               <option value="52">52 ' + M.PAYMENTS + '</option>             </select>           </div>           <div class="popup-input-wrapper">             <div class="popup-input-wrapper">               <h5>' + M.CHARGE_EVERY + '</h5>             </div>             <div class="input-wrapper2 f-left clear-left">               <select class="mt-0" name="period">                 <option value="1">1</option>                 <option value="2">2</option>                 <option value="3">3</option>                 <option value="4">4</option>                 <option value="5">5</option>                 <option value="6">6</option>                 <option value="7">7</option>                 <option value="8">8</option>                 <option value="9">9</option>                 <option value="10">10</option>                 <option value="11">11</option>                 <option value="12">12</option>               </select>             </div>             <div class="input-wrapper2 f-right">               <select class="mt-0" name="periodUnit">                 <option value="0">' + M.WEEKS + '</option>                 <option value="1">' + M.MONTHS + '</option>               </select>             </div>           </div>           <div class="warning-wrapper col20 f-left" style="display: %errorDisplay%;">%error%</div>         </div>';
                    case "introPopup":
                        return '        <div class="video-popup-wrapper">           <a class="close-btn close-popup"></a>           <h2 class="col20 f-left t-center mb-10 roboto %titleclz%">%title%</h2>           <h3 class="col20 f-left t-center mb-25 roboto %textclz%" style="opacity: .8; font-size: 21px;">%text%</h3>           <div class="col20 f-left">%video%</div>          <div class="col20 f-left %clz%">            <div class="col20 f-left t-center mt-25"><a class="start-button close-popup" rel="action" data-action="edit" data-target="Funnels">' + M.OPEN_MY_FUNNEL + '</a></div>             <div class="col20 f-left t-center mt-15 close-popup"><a class="text-button">' + M.CLOSE + "</a></div>           </div>         </div>";
                    case "gridMobileMenuSettings":
                        return '            <div class="grid-mobile-settings" data-key="mobileEditing">               <h3 class="col20 f-left mb-15 roboto">Modify your texts & buttons on mobile</h3>               <span class="col20 f-left mb-10 settings-help-text">The global styling will overwrite the sizes on mobile to have a more unified looks</span>               <div class="col20 f-left mobile-font-sizes mt-25">                 <div class="popup-input-wrapper f-right">                   <div class="info input-slider-wrapper">                     <h5 class="ta-left">H1 heading</h5>                     <div id="headingFontSize1"></div>                     <input class="headingFontSize1 slider-val f-right" type="text" />                   </div>                 </div>                 <div class="popup-input-wrapper f-right">                   <div class="info input-slider-wrapper">                     <h5 class="ta-left">H2 heading</h5>                     <div id="headingFontSize2"></div>                     <input class="headingFontSize2 slider-val f-right" type="text" />                   </div>                 </div>                 <div class="popup-input-wrapper f-right">                   <div class="info input-slider-wrapper">                     <h5 class="ta-left">H3 heading</h5>                     <div id="headingFontSize3"></div>                     <input class="headingFontSize3 slider-val f-right" type="text" />                   </div>                 </div>                 <div class="popup-input-wrapper f-right">                   <div class="info input-slider-wrapper">                     <h5 class="ta-left">H4 heading</h5>                     <div id="headingFontSize4"></div>                     <input class="headingFontSize4 slider-val f-right" type="text" />                   </div>                 </div>                 <div class="popup-input-wrapper f-right">                   <div class="info input-slider-wrapper">                     <h5 class="ta-left">H5 heading</h5>                     <div id="headingFontSize5"></div>                     <input class="headingFontSize5 slider-val f-right" type="text" />                   </div>                 </div>                 <div class="popup-input-wrapper f-right">                   <div class="info input-slider-wrapper">                     <h5 class="ta-left">H6 heading</h5>                     <div id="headingFontSize6"></div>                     <input class="headingFontSize6 slider-val f-right" type="text" />                   </div>                 </div>                 <div class="popup-input-wrapper f-right">                   <div class="info input-slider-wrapper">                     <h5 class="ta-left">Text Paragraph</h5>                     <div id="headingFontSizeP"></div>                     <input class="headingFontSizeP slider-val f-right" type="text" />                   </div>                 </div>                 <div class="popup-input-wrapper f-right">                   <div class="info input-slider-wrapper">                     <h5 class="ta-left">Button Text Size</h5>                     <div id="headingFontSizeB"></div>                     <input class="headingFontSizeB slider-val f-right" type="text" />                   </div>                 </div>                 <div class="popup-input-wrapper f-right">                   <div class="info input-slider-wrapper">                     <h5 class="ta-left">Button Padding</h5>                     <div id="headingFontSizeP"></div>                     <input class="headingFontSizeP slider-val f-right" type="text" />                   </div>                 </div>               </div>               <a class="f-left col20 mobile-styling-button none"><h4 class="f-left col20 roboto flex align-center">Mobile Header Styling <span class="blue-text ml-10">edit</span></h4></a>               <a class="f-left col20 mobile-styling-button none"><h4 class="f-left col20 roboto flex align-center">Mobile Menu Styling <span class="blue-text ml-10">edit</span></h4></a>               <h4 class="col20 f-left mt-25 mb-15 roboto white-text">' + M.MOBILE_EDITING_HEADING + '</h4>               <span class="col20 f-left mb-10 settings-help-text">' + M.MOBILE_EDITING_DESC + '</span>               <div class="col20 f-left mt-10"><a rel="action" data-action="showHelperVideo" data-target="CPanel" class="middle-button blue f-left video-button">' + M.PLAY_VIDEO + '</a></div>               <h4 class="col20 f-left mt-45 mb-15 roboto white-text none">' + M.CHANGE_YOUR_TEXT_SIZE + '</h4>               <span class="col20 f-left mb-10 settings-help-text none">' + M.CHANGE_YOUR_TEXT_SIZE_DESC + '</span>               <div class="col20 f-left mt-10 none"><a class="middle-button blue f-left video-button editing-button">' + M.EDIT_TEXT_STYLING + "</a></div>             </div>";
                    case "webhookSettingsMarkup":
                        return '<div class="popup-widget-wrapper">                   <div class="popup-input-wrapper mt-15">                     <h5>' + M.WEBHOOK_DESTINATION_URL + '</h5>                      <div class="info">                       <span>' + M.WEBHOOK_DESCRIPTION + '</span>                     </div>                     <input type="text" name="target" class="transition-all">                   </div>                   <div class="popup-input-wrapper mt-5">                     <h5>' + M.WEBHOOK_SECRET + ' - <b>%secret%</b></h5>                      <div class="info">                       <span>' + M.WEBHOOK_SECRET_DESC + '</span>                     </div>                   </div>                   <div class="popup-input-wrapper mt-15">                     <h5>' + M.WEBHOOK_EVENTS + '</h5>                      <div class="info">                       <span>' + M.WEBHOOK_EVENTS_DESC + '</span>                     </div>                   </div>                   <div class="checkbox-wrapper mt-15">                     <input id="event1Cbx" class="css-checkbox" type="checkbox" name="order_created" />                     <label for="event1Cbx" class="css-label">' + M.WH_EVENT_NEW_ORDER + "                      <span>" + M.WH_EVENT_NEW_ORDER_DESC + '</span>                    </label>                   </div>                   <div class="checkbox-wrapper">                     <input id="event2Cbx" class="css-checkbox" type="checkbox" name="order_updated" />                     <label for="event2Cbx" class="css-label">' + M.WH_EVENT_ORDER_UPDATED + "                      <span>" + M.WH_EVENT_ORDER_UPDATED_DESC + '</span>                    </label>                   </div>                   <div class="checkbox-wrapper">                     <input id="event3Cbx" class="css-checkbox" type="checkbox" name="product_created" />                     <label for="event3Cbx" class="css-label">' + M.WH_EVENT_NEW_PRODUCT + "                      <span>" + M.WH_EVENT_NEW_PRODUCT_DESC + '</span>                    </label>                   </div>                   <div class="checkbox-wrapper">                     <input id="event4Cbx" class="css-checkbox" type="checkbox" name="product_updated" />                     <label for="event4Cbx" class="css-label">' + M.WH_EVENT_PRODUCT_UPDATED + "                       <span>" + M.WH_EVENT_PRODUCT_UPDATED_DESC + '</span>                    </label>                   </div>                   <div class="checkbox-wrapper">                     <input id="event5Cbx" class="css-checkbox" type="checkbox" name="form_submitted" />                     <label for="event5Cbx" class="css-label">' + M.WH_EVENT_FORM_SUBMIT + "                      <span>" + M.WH_EVENT_FORM_SUBMIT_DESC + '</span>                    </label>                   </div>                   <div class="checkbox-wrapper">                     <input id="event6Cbx" class="css-checkbox" type="checkbox" name="contact_updated" />                     <label for="event6Cbx" class="css-label">' + M.WH_EVENT_CONTACT_ACTIVITY + "                       <span>" + M.WH_EVENT_CONTACT_ACTIVITY_DESC + '</span>                    </label>                   </div>                   <div class="checkbox-wrapper">                     <input id="event7Cbx" class="css-checkbox" type="checkbox" name="booking_created" />                     <label for="event7Cbx" class="css-label">' + M.WH_EVENT_BOOKING_CREATED + "                       <span>" + M.WH_EVENT_BOOKING_CREATED_DESC + "</span>                    </label>                   </div>                 </div>";
                    case "newProcessorAppMarkup":
                        return '<div class="app-wrapper">                   <div class="col-20 flex align-center space-between">                     <div class="col-20 flex align-center">                       %logo%                    </div>                     <a class="middle-button blue flex-none ml-25" data-role="connect" data-type="%type%">' + M.CONNECT + "</a>                   </div>                 </div>";
                    case "checkoutWidgetFieldsMarkup":
                        return '          <div class="popup-widget-wrapper">             <div class="popup-input-wrapper mt-15 mb-0">               <div class="checkbox-wrapper col20 f-left none" id="disableEmailFieldWrapper">                 <input class="css-checkbox" type="checkbox" id="disableEmailField" name="disableEmailField" />                 <label for="disableEmailField" class="css-label">' + M.DISABLE_EMAIL + "<span>" + M.DISABLE_EMAIL_DESC + '</span></label>               </div>                <div class="checkbox-wrapper col20 f-left">                 <input class="css-checkbox" type="checkbox" id="addCompanyField" name="addCompanyField" />                 <label for="addCompanyField" class="css-label">' + M.ASK_COMPANY_INFO + '</label>               </div>                <div class="checkbox-wrapper col20 f-left ml-15" data-role="companyFieldRequired">                 <input class="css-checkbox" type="checkbox" id="companyFieldRequired" name="companyFieldRequired" />                 <label for="companyFieldRequired" class="css-label">' + M.MAKE_REQUIRED + '</label>               </div>                <div class="checkbox-wrapper col20 f-left">                 <input class="css-checkbox" type="checkbox" id="addPhoneField" name="addPhoneField" />                 <label for="addPhoneField" class="css-label">' + M.ASK_PHONE + '</label>               </div>                <div class="checkbox-wrapper col20 f-left ml-15" data-role="phoneFieldRequired">                 <input class="css-checkbox" type="checkbox" id="phoneFieldRequired" name="phoneFieldRequired" />                 <label for="phoneFieldRequired" class="css-label">' + M.MAKE_REQUIRED + '</label>               </div>               <div class="checkbox-wrapper col20 f-left">                 <input class="css-checkbox" type="checkbox" id="addCountryField" name="addCountryField" />                 <label for="addCountryField" class="css-label">' + M.ASK_COUNTRY + '</label>               </div>                <div class="checkbox-wrapper col20 f-left">                 <input class="css-checkbox" type="checkbox" id="addStateField" name="addStateField" />                 <label for="addStateField" class="css-label">' + M.ASK_STATE + '</label>               </div>                <div class="checkbox-wrapper col20 f-left ml-15" data-role="stateRequired">                 <input class="css-checkbox" type="checkbox" id="stateRequired" name="stateRequired" />                 <label for="stateRequired" class="css-label">' + M.MAKE_REQUIRED + '</label>               </div>                <div class="checkbox-wrapper col20 f-left">                 <input class="css-checkbox" type="checkbox" id="addZipField" name="addZipField" />                 <label for="addZipField" class="css-label">' + M.ASK_ZIP + '</label>               </div>                <div class="checkbox-wrapper col20 f-left ml-15" data-role="zipRequired">                 <input class="css-checkbox" type="checkbox" id="zipRequired" name="zipRequired" />                 <label for="zipRequired" class="css-label">' + M.MAKE_REQUIRED + '</label>               </div>                <div class="checkbox-wrapper col20 f-left">                 <input class="css-checkbox" type="checkbox" id="addCityField" name="addCityField" />                 <label for="addCityField" class="css-label">' + M.ASK_CITY + '</label>               </div>                <div class="checkbox-wrapper col20 f-left ml-15" data-role="cityRequired">                 <input class="css-checkbox" type="checkbox" id="cityRequired" name="cityRequired" />                 <label for="cityRequired" class="css-label">' + M.MAKE_REQUIRED + '</label>               </div>                <div class="checkbox-wrapper col20 f-left">                 <input class="css-checkbox" type="checkbox" id="addAddress2Field" name="addAddress2Field" />                 <label for="addAddress2Field" class="css-label">' + M.ADD_SECOND_ADDRESS + '</label>               </div>                <div class="checkbox-wrapper col20 f-left ml-15" data-role="address2Required">                 <input class="css-checkbox" type="checkbox" id="address2Required" name="address2Required" />                 <label for="address2Required" class="css-label">' + M.MAKE_REQUIRED + '</label>               </div>                <div class="checkbox-wrapper col20 f-left">                <input class="css-checkbox" type="checkbox" id="askForAdditionalInfo" name="askForAdditionalInfo" />                 <label for="askForAdditionalInfo" class="css-label">' + M.ASK_FOR_ADDITIONAL_INFO + '</label>               </div>               <div class="col20 f-left none-soft" data-role="additionalField">                 <div class="popup-input-wrapper">                   <div class="col2- f-left info mt-5">                    <h5>' + M.ADDITIONAL_INFO_POSITION + "</h5>                    <span>" + M.ADDITIONAL_INFO_POSITION_INFO + '</span>                     <select name="additionalInfoPosition" class="transition-all">                       <option value="start">' + M.ADDITIONAL_INFO_POS_EMAIL + '</option>                       <option value="middle">' + M.ADDITIONAL_INFO_POS_ADDRESS + '</option>                       <option value="end">' + M.ADDITIONAL_INFO_POS_END + '</option>                     </select>                   </div>                 </div>                 <div class="checkbox-wrapper col20 f-left">                  <a class="middle-button gray" data-role="editAdditionalFields">' + M.ADDITIONAL_FIELDS + "</a>                 </div>               </div>             </div>           </div>";
                    case "editSystemPageDialogMarkup":
                        return '<div class="popup-newpage-wrapper">                   <div class="popup-input-wrapper info" >                     <h5>%name%</h5>                     <span class="info">%description%</span>                  </div>                   <div class="popup-input-wrapper">                     <div class="checkbox-wrapper">                       <input id="useSecondaryHeader" class="css-checkbox modify" type="checkbox" name="useSecondaryHeader" />                       <label for="useSecondaryHeader" class="css-label button-tooltip" data-tooltip="alternativeHeaderTooltip" data-timeout="3000">' + M.USE_ALTERNATIVE_HEADER + "</label>                     </div>                   </div>                 </div>";
                    case "speedyConnectMarkup":
                        return '          <div class="popup-newpage-wrapper">             <div class="info">               <h5>' + M.CONNECT_SPEEDY_TITLE + "</h5>               <span>" + M.SPEEDY_ENTER_CREDENTIALS + '</span>             </div>             <div class="input-wrapper input-wrapper2 mt-15">               <div class="info">                 <h5>' + M.USERNAME + '</h5>               </div>               <input type="text" name="username" autocomplete="off">            </div>             <div class="input-wrapper input-wrapper2 f-right mt-15">               <div class="info">                 <h5>' + M.PASSWORD_TEXT + '</h5>               </div>               <input type="password" name="password" autocomplete="new-password">            </div>         </div>';
                    case "speedySettingsMarkup":
                        return '<div class="popup-newpage-wrapper">           <div class="section f-left col20 mt-15">             <div class="info" style="width: 80%">               <h5>' + M.SPEEDY_ACTIVE + "</h5>               <span>" + M.SPEEDY_ACTIVE_DESC + '</span>            </div>             <div class="right-side f-right">               <div class="onoffswitch">                 <input type="checkbox" class="onoffswitch-checkbox modify" id="active" name="active">                 <label class="onoffswitch-label" for="active">                   <span class="onoffswitch-inner"></span>                   <span class="onoffswitch-switch"></span>                 </label>               </div>             </div>           </div>           <div class="input-wrapper input-wrapper2 mt-15">             <div class="info">               <h5>' + M.DELIVERY_SENDER + '</h5>             </div>             <input type="text" name="senderName" autocomplete="off">          </div>           <div class="input-wrapper input-wrapper2 f-right mt-15">             <div class="info">               <h5>' + M.PHONE + '</h5>             </div>             <input type="text" name="senderPhone">          </div>           <div class="input-wrapper mt-15 f-left">             <div class="info">               <h5>' + M.SPEEDY_ORIGIN + '</h5>             </div>             <select name="senderType" class="transition-border">               <option value="address">' + M.SENDER_ADDRESS + '</option>               <option value="office">' + M.SPEEDY_OFFICE + '</option>             </select>           </div>           <div class="input-wrapper none-soft" id="speedyAddressWrapper">            <select name="senderClientId" class="transition-border"></select>           </div>           <div class="col20 f-left none-soft" id="speedyOfficeWrapper">            <div class="input-wrapper input-wrapper2">               <div class="info">                 <h5>' + M.CITY + '</h5>               </div>               <input type="text" name="speedyCity">            </div>             <div class="input-wrapper input-wrapper2 f-right">               <div class="info">                 <h5>' + M.OFFICE + '</h5>               </div>               <select name="speedyOfficeId" class="transition-border"></select>             </div>           </div>          <div class="input-wrapper mt-15">             <div class="info">               <h5>' + M.DELIVERY_PAYER + '</h5>             </div>             <select name="deliveryPayer" class="transition-border">               <option value="receiver">' + M.RECEIVER + '</option>               <option value="sender">' + M.SENDER + '</option>             </select>           </div>           <div class="info mt-15">             <h5>' + M.OFFERED_SERVICES_TITLE + "</h5>             <span>" + M.OFFERED_SERVICES_DESC + '</span>           </div>           <div class="col20 f-left mt-15 gray-section" id="servicesWrapper"></div>           <div class="info mt-15">             <h5>' + M.ADDITIONAL_SERVICES + '</h5>           </div>           <div class="checkbox-wrapper mt-15 col20 f-left">             <input id="singleParcel" class="css-checkbox" type="checkbox" name="singleParcel" />             <label for="singleParcel" class="css-label">' + M.PRODUCTS_PACKED_TOGETHER + "              <span>" + M.PRODUCTS_PACKED_TOGETHER_DESC + '</span>            </label>           </div>           <div class="checkbox-wrapper col20 f-left">             <input id="preview" class="css-checkbox" type="checkbox" name="preview" />             <label for="preview" class="css-label">' + M.SEND_WITH_PREVIEW + '</label>           </div>           <div class="checkbox-wrapper col20 f-left">             <input id="test" class="css-checkbox" type="checkbox" name="test" />             <label for="test" class="css-label">' + M.SEND_WITH_TEST + '</label>           </div>           <div class="checkbox-wrapper col20 f-left">             <input id="insurance" class="css-checkbox" type="checkbox" name="insurance" />             <label for="insurance" class="css-label">' + M.SEND_WITH_INSURANCE + '</label>           </div>           <div class="checkbox-wrapper col20 f-left">             <input id="fragile" class="css-checkbox" type="checkbox" name="fragile" />             <label for="fragile" class="css-label">' + M.MARK_AS_FRAGILE + '</label>           </div>           <div class="checkbox-wrapper col20 f-left">             <input id="documents" class="css-checkbox" type="checkbox" name="documents" />             <label for="documents" class="css-label">' + M.DOCUMENTS_ONLY + '</label>           </div>           <div class="checkbox-wrapper col20 f-left">             <input id="postalOrder" class="css-checkbox" type="checkbox" name="postalOrder" />             <label for="postalOrder" class="css-label">' + M.USE_POSTAL_MONEY_TRANSFER + '</label>           </div>           <div class="input-wrapper mt-15">             <div class="info">               <h5>' + M.PAYMENT_COVERED_BY + '</h5>             </div>             <select name="returnsPayer" class="transition-border">               <option value="receiver">' + M.RECEIVER + '</option>               <option value="sender">' + M.SENDER + '</option>             </select>           </div>           <div class="col20 f-left gray-section">            <div class="section f-left col20">               <div class="info" style="width: 70%">                 <h5>' + M.ADDRESS_DELIVERY_TITLE + "</h5>                 <span>" + M.ADDRESS_DELIVERY_DESC + '</span>              </div>               <div class="right-side f-right">                 <div class="onoffswitch">                   <input type="checkbox" class="onoffswitch-checkbox" id="address" name="address">                   <label class="onoffswitch-label" for="address">                     <span class="onoffswitch-inner"></span>                     <span class="onoffswitch-switch"></span>                   </label>                 </div>               </div>             </div>             <div class="input-wrapper input-wrapper2 mt-15">               <div class="info">                 <h5>' + M.FREE_DELIVERY_OVER + "</h5>                 <span>" + M.FREE_DELIVERY_OVER_DESC + '</span>              </div>               <div class="symbol-input price-input" style="background: #fff">                 <span class="symbol-sign"></span>                 <input type="number" min="0.00" step="0.01" value="0.00" placeholder="0.00" class="transition-border" name="addressFreeOver" />               </div>             </div>             <div class="input-wrapper input-wrapper2 mt-15 f-right">               <div class="info">                 <h5>' + M.SPEEDY_PRICE_ON_ERROR + "</h5>                 <span>" + M.SPEEDY_PRICE_ON_ERROR_DESC + '</span>              </div>               <div class="symbol-input price-input" style="background: #fff">                 <span class="symbol-sign"></span>                 <input type="number" min="0.00" step="0.01" value="0.00" placeholder="0.00" class="transition-border" name="addressErrorPrice" />               </div>             </div>             <div class="checkbox-wrapper col20 f-left">               <input id="addressUseFixedPrice" class="css-checkbox" type="checkbox" name="addressUseFixedPrice" />               <label for="addressUseFixedPrice" class="css-label">' + M.USE_FIXED_SHIPPING_PRICE + "<span>" + M.USE_FIXED_SHIPPING_PRICE_DESC + '</span></label>             </div>             <div class="input-wrapper input-wrapper flex flex-row align-center" id="addressFixedPriceWrapper">               <div class="info flex-1 mr-10">                 <h5>' + M.FIXED_SHIPPING_TITLE + "</h5>                 <span>" + M.FIXED_SHIPPING_DESC + '</span>              </div>               <div class="symbol-input price-input flex-half" style="background: #fff">                 <span class="symbol-sign"></span>                 <input type="number" min="0.00" step="0.01" value="0.00" placeholder="0.00" class="transition-border" name="addressFixedPrice" />               </div>             </div>           </div>          <div class="col20 f-left gray-section mt-15">            <div class="section f-left col20">               <div class="info" style="width: 70%">                 <h5>' + M.OFFICE_DELIVERY_TITLE + "</h5>                 <span>" + M.OFFICE_DELIVERY_DESC + '</span>              </div>               <div class="right-side f-right">                 <div class="onoffswitch">                   <input type="checkbox" class="onoffswitch-checkbox" id="office" name="office">                   <label class="onoffswitch-label" for="office">                     <span class="onoffswitch-inner"></span>                     <span class="onoffswitch-switch"></span>                   </label>                 </div>               </div>             </div>             <div class="input-wrapper input-wrapper2 mt-15">               <div class="info">                 <h5>' + M.FREE_DELIVERY_OVER + "</h5>                 <span>" + M.FREE_DELIVERY_OVER_DESC + '</span>              </div>               <div class="symbol-input price-input" style="background: #fff">                 <span class="symbol-sign"></span>                 <input type="number" min="0.00" step="0.01" value="0.00" placeholder="0.00" class="transition-border" name="officeFreeOver" />               </div>             </div>             <div class="input-wrapper input-wrapper2 mt-15 f-right">               <div class="info">                 <h5>' + M.SPEEDY_PRICE_ON_ERROR + "</h5>                 <span>" + M.SPEEDY_PRICE_ON_ERROR_DESC + '</span>              </div>               <div class="symbol-input price-input" style="background: #fff">                 <span class="symbol-sign"></span>                 <input type="number" min="0.00" step="0.01" value="0.00" placeholder="0.00" class="transition-border" name="officeErrorPrice" />               </div>             </div>             <div class="checkbox-wrapper col20 f-left">               <input id="officeUseFixedPrice" class="css-checkbox" type="checkbox" name="officeUseFixedPrice" />               <label for="officeUseFixedPrice" class="css-label">' + M.USE_FIXED_SHIPPING_PRICE + "<span>" + M.USE_FIXED_SHIPPING_PRICE_DESC + '</span></label>             </div>             <div class="input-wrapper input-wrapper flex flex-row align-center" id="officeFixedPriceWrapper">               <div class="info flex-1 mr-10">                 <h5>' + M.FIXED_SHIPPING_TITLE + "</h5>                 <span>" + M.FIXED_SHIPPING_DESC + '</span>              </div>               <div class="symbol-input price-input flex-half" style="background: #fff">                 <span class="symbol-sign"></span>                 <input type="number" min="0.00" step="0.01" value="0.00" placeholder="0.00" class="transition-border" name="officeFixedPrice" />               </div>             </div>           </div>        </div>';
                    case "speedyFulfillmentSettingsMarkup":
                        return '          <div class="full-size flex flex-col">            <div class="col20 f-left flex-1 overflow" style="padding: 15px 45px 20px; box-sizing: border-box;">              <div class="info">                 <h5>' + M.SENDER_DETAILS + '</h5>               </div>               <div class="section f-left col20 gray-section mt-15">                 <div class="input-wrapper input-wrapper2">                   <div class="info">                     <h5>' + M.DELIVERY_SENDER + '</h5>                   </div>                   <input type="text" name="senderName" autocomplete="off">                </div>                 <div class="input-wrapper input-wrapper2 f-right">                   <div class="info">                     <h5>' + M.PHONE + '</h5>                   </div>                   <input type="text" name="senderPhone">                </div>                 <div class="input-wrapper mt-15 f-left">                   <div class="info">                     <h5>' + M.SPEEDY_ORIGIN + '</h5>                   </div>                   <select name="senderType" class="transition-border">                     <option value="address">' + M.SENDER_ADDRESS + '</option>                     <option value="office">' + M.SPEEDY_OFFICE + '</option>                   </select>                 </div>                 <div class="input-wrapper" id="speedyAddressWrapper">                  <select name="senderClientId" class="transition-border"></select>                 </div>                 <div class="col20 f-left none-soft" id="speedyOfficeWrapper">                  <div class="input-wrapper input-wrapper2">                     <div class="info">                       <h5>' + M.CITY + '</h5>                     </div>                     <input type="text" name="senderCity">                  </div>                   <div class="input-wrapper input-wrapper2 f-right">                     <div class="info">                       <h5>' + M.OFFICE + '</h5>                     </div>                     <select name="senderOfficeId" class="transition-border"></select>                   </div>                 </div>              </div>               <div class="info mt-15">                 <h5>' + M.RECEIVER_DETAILS + '</h5>               </div>               <div class="section f-left col20 gray-section mt-15">                 <div class="input-wrapper input-wrapper2">                   <div class="info">                     <h5>' + M.NAME + '</h5>                   </div>                   <input type="text" name="receiverName" autocomplete="off">                </div>                 <div class="input-wrapper input-wrapper2 f-right">                   <div class="info">                     <h5>' + M.PHONE + '</h5>                   </div>                   <input type="text" name="receiverPhone">                </div>                 <div class="input-wrapper input-wrapper2 mt-15">                   <div class="info">                     <h5>' + M.CITY + '</h5>                   </div>                   <input type="text" name="receiverCity" autocomplete="off">                </div>                 <div class="input-wrapper input-wrapper2 f-right mt-15">                   <div class="info">                     <h5>' + M.POST_CODE + '</h5>                   </div>                   <input type="text" name="receiverZip">                </div>                 <div class="input-wrapper mt-15 f-left">                   <div class="info">                     <h5>' + M.DELIVERY_RECEIVED_ON + '</h5>                   </div>                   <select name="receiverType" class="transition-border">                     <option value="address">' + M.CUSTOMER_ADDRESS + '</option>                     <option value="office">' + M.SPEEDY_OFFICE + '</option>                   </select>                 </div>                 <h5 class="col20 f-left mt-15">ÐÐ´Ñ€ÐµÑ Ð²ÑŠÐ²ÐµÐ´ÐµÐ½ Ð¾Ñ‚ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð°:</h5>                <div class="col20 f-left mt-5 bold" data-role="client-addr"></div>                <div class="col20 f-left"  id="receiverAddressWrapper">                  <div class="col20 f-left flex flex-row">                    <div class="input-wrapper input-wrapper2 f-left mt-15" style="width: 80%">                       <div class="info">                         <h5>' + M.STREET + '</h5>                       </div>                       <input type="text" name="receiverStreet">                    </div>                     <div class="input-wrapper input-wrapper2 f-right ml-15 mt-15" style="width: 20%">                       <div class="info">                         <h5>' + M.NUMBER + '</h5>                       </div>                       <input type="text" name="receiverStreetNo">                    </div>                   </div>                  <div class="col20 f-left flex flex-row">                    <div class="input-wrapper f-left mt-15 flex-1">                       <div class="info">                         <h5>' + M.COMPLEX + '</h5>                       </div>                       <input type="text" name="receiverQuarter">                    </div>                     <div class="input-wrapper f-left mt-15 ml-15 flex-half">                       <div class="info">                         <h5>' + M.BLOCK + '</h5>                       </div>                       <input type="text" name="receiverBlock">                    </div>                     <div class="input-wrapper f-left mt-15 ml-15 flex-half">                       <div class="info">                         <h5>' + M.ENTRANCE + '</h5>                       </div>                       <input type="text" name="receiverEntr">                    </div>                     <div class="input-wrapper f-left mt-15 ml-15 flex-half">                       <div class="info">                         <h5>' + M.FLOOR + '</h5>                       </div>                       <input type="text" name="receiverFloor">                    </div>                     <div class="input-wrapper f-left mt-15 ml-15 flex-half">                       <div class="info">                         <h5>' + M.APPARTMENT + '</h5>                       </div>                       <input type="text" name="receiverApt">                    </div>                   </div>                </div>                <div class="input-wrapper f-left mt-15" id="receiverOfficeWrapper">                   <div class="info">                     <h5>' + M.SPEEDY_OFFICE + '</h5>                   </div>                   <select name="receiverOfficeId" class="transition-border"></select>                 </div>                 <div class="input-wrapper f-left mt-15">                   <h5>' + M.NOTE + '</h5>                   <textarea name="receiverNote"></textarea>                </div>              </div>              <div class="info mt-15">                 <h5>' + M.SHIPMENT_INFORMATION + '</h5>               </div>               <div class="section f-left col20 gray-section mt-15">                 <div class="col20 f-left flex flex-row">                  <div class="input-wrapper f-left mt-15 flex-1">                     <div class="info">                       <h5>' + M.DELIVERY_PAYER + '</h5>                     </div>                     <select name="payerType" class="transition-border">                       <option value="receiver">' + M.RECEIVER + '</option>                       <option value="sender">' + M.SENDER + '</option>                     </select>                   </div>                   <div class="input-wrapper f-left ml-15 mt-15 flex-1">                     <div class="info">                       <h5>' + M.SERVICE + '</h5>                     </div>                     <select name="service" class="transition-border"></select>                   </div>                   <div class="input-wrapper f-left mt-15 ml-15 flex-1">                     <div class="info">                       <h5>' + M.SPEEDY_PICKUP_DATE + '</h5>                     </div>                     <input name="pickupDate" type="text" class="transition-border">                   </div>                 </div>                <div class="col20 f-left flex flex-row">                  <div class="input-wrapper f-left mt-15 flex-none" style="width: 188px;">                     <div class="info">                       <h5>' + M.PARCELS + '</h5>                     </div>                     <div class="symbol-input right-sign" style="background: #ffffff">                       <span class="symbol-sign">' + M.PCS + '</span>                      <input type="number" min="1" step="1" value="0" placeholder="0" name="parcels">                    </div>                  </div>                   <div class="input-wrapper f-left mt-15 ml-15 flex-none" style="width: 188px;">                     <div class="info">                       <h5>' + M.WEIGHT + '</h5>                     </div>                     <div class="symbol-input right-sign" style="background: #ffffff">                       <span class="symbol-sign">kg</span>                      <input type="number" min="0.01" step="0.1" value="0" placeholder="0" name="weight">                    </div>                  </div>                 </div>                <div class="input-wrapper f-left mt-15">                   <h5>' + M.SHIPMENT_NOTE + "</h5>                  <span>" + M.SHIPMENT_NOTE_DESC + '</span>                  <textarea name="orderNote"></textarea>                </div>                <div class="col20 f-left checkbox-wrapper">                   <input id="insuranceCbx" class="css-checkbox" type="checkbox" name="insurance" />                   <label for="insuranceCbx" class="css-label">                    ' + M.INSURANCE_GOODS + ' <b data-role="insurance"></b>                  </label>                 </div>                 <div class="col20 f-left checkbox-wrapper">                   <input id="codCbx" class="css-checkbox" type="checkbox" name="cod" />                   <label for="codCbx" class="css-label mb-0">                    <div class="f-left">' + M.CASH_ON_DELIVERY + '</div>                    <div data-role="cod-wrapper" class="symbol-input price-input clear-both mb-0" style="background: #ffffff; width: 150px;" id="codValueWrapper">                       <span class="symbol-sign" data-role="cod-sign"></span>                       <input type="number" min="0.01" step="0.01" value="0.00" placeholder="0.00" class="transition-border" name="codValue" />                     </div>                   </label>                 </div>                 <div class="col20 f-left checkbox-wrapper">                   <input id="previewCbx" class="css-checkbox" type="checkbox" name="preview" />                   <label for="previewCbx" class="css-label">' + M.SEND_WITH_PREVIEW + '</label>                 </div>                 <div class="col20 f-left checkbox-wrapper">                   <input id="testCbx" class="css-checkbox" type="checkbox" name="test" />                   <label for="testCbx" class="css-label">' + M.SEND_WITH_TEST + '</label>                 </div>                 <div class="col20 f-left checkbox-wrapper">                   <input id="fragileCbx" class="css-checkbox" type="checkbox" name="fragile" />                   <label for="fragileCbx" class="css-label">' + M.MARK_AS_FRAGILE + '</label>                 </div>                 <div class="col20 f-left checkbox-wrapper">                   <input id="singleParcel" class="css-checkbox" type="checkbox" name="documents" />                   <label for="singleParcel" class="css-label">' + M.DOCUMENTS_ONLY + '</label>                 </div>                 <div class="input-wrapper input-wrapper2 mt-15">                   <div class="info">                     <h5>' + M.RETURN_SERVICE + "</h5>                    <span>" + M.RETURN_SERVICE_DESC + '</span>                  </div>                   <select name="returnService"></select>                 </div>                 <div class="input-wrapper input-wrapper2 f-right mt-15">                   <div class="info">                    <h5>' + M.RETURN_PAYER + "</h5>                    <span>" + M.RETURN_PAYER_DESC + '</span>                  </div>                  <select name="returnPayer">                    <option value="receiver">' + M.RECEIVER + '</option>                    <option value="sender">' + M.SENDER + '</option>                  </select>                </div>              </div>            </div>            <div class="col20 f-left flex-none button-wrapper flex flex-row align-center" style="padding: 15px 45px 20px; box-sizing: border-box;">              <div class="flex-1 delivery-pricing">                 ' + M.SHIPMENT_PRICE_CLIENT + ': <span class="bold" data-role="clientPrice"></span> <br />                 <span class="red-text f-left">' + M.SHIPMENT_PRICE_CALCULATED + ': <span class="bold" data-role="actualPrice"></span> </span>                 <span class="red-text bold f-left none" data-role="priceError"></span>              </div>              <div class="flex-none">                <a class="blue middle-button transition-bg f-ignore disabled" data-role="send">' + M.SEND_ORDER + '</a>                <a class="gray middle-button transition-bg f-ignore close-popup">' + M.CANCEL + "</a>              </div>            </div>          </div>";
                    case "speedyWaybillDetailsMarkup":
                        return '          <div class="popup-newpage-wrapper">             <h4 class="col20 f-left mt-15" data-role="no">' + M.WAYBILL_NO + ': <b data-role="value">-</b></h4>            <h4 class="col20 f-left mt-15" data-role="price">' + M.DELIVERY_COST + ': <b data-role="value">-</b></h4>            <h4 class="col20 f-left mt-15" data-role="deliveryDate">' + M.DELIVERY_DATE + ': <b data-role="value">-</b></h4>            <span class="info mt-15" style="line-height: 19px;">              Ð’Ð°ÑˆÐ°Ñ‚Ð° Ñ‚Ð¾Ð²Ð°Ñ€Ð¸Ñ‚ÐµÐ»Ð½Ð¸Ñ†Ð° Ðµ Ð³Ð¾Ñ‚Ð¾Ð²Ð°. ÐœÐ¾Ð»Ñ ÑÐ²ÑŠÑ€Ð¶ÐµÑ‚Ðµ ÑÐµ Ñ Ð¾Ñ„Ð¸Ñ Ð½Ð° Speedy Ð½Ð° Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½ 070017001 Ð¸Ð»Ð¸ 070020300 Ð·Ð° Ð°Ð±Ð¾Ð½Ð°Ñ‚Ð¸ Ð½Ð° Ñ„Ð¸ÐºÑÐ¸Ñ€Ð°Ð½Ð¸ Ð¼Ñ€ÐµÐ¶Ð¸ Ð½Ð° Ñ†ÐµÐ½Ð°Ñ‚Ð° Ð½Ð° ÐµÐ´Ð¸Ð½ Ð³Ñ€Ð°Ð´ÑÐºÐ¸ Ñ€Ð°Ð·Ð³Ð¾Ð²Ð¾Ñ€, Ð·Ð° Ð´Ð° Ð·Ð°ÑÐ²Ð¸Ñ‚Ðµ Ð¸Ð´Ð²Ð°Ð½Ðµ Ð½Ð° ÐºÑƒÑ€Ð¸ÐµÑ€.            </span>            <div class="col20 f-left mt-25 ta-center">              <a target="_blank" class="f-none close-popup blue middle-button transition-bg" data-role="print">' + M.PRINT_WAYBILL + "</a>            </div>          </div>";
                    case "checkboxTemplate":
                        return '          <div class="checkbox-wrapper col20 f-left">             <input id="%id%" class="css-checkbox" type="checkbox" name="%id%" %checked% />             <label for="%id%" class="css-label">%title%</label>           </div>';
                    case "gradientMarkup":
                        return '        <div class="checkbox-wrapper col20 f-left mb-15">           <input id="%id%" class="css-checkbox" type="checkbox" name="enabled" />           <label for="%id%" class="css-label">' + M.ADD_GRADIENT + '</label>         </div>         <div class="col20 %margin% f-left gray-section product-select-wrapper none-soft" data-role="gradient-wrapper">           <div class="col20 f-left ab-step center-vertically">             <h4 class="roboto">' + M.GRADIENT_SETTINGS + '</h4>             <a class="text-link blue-text" data-role="edit">' + M.CHANGE + "</a>           </div>         </div>";
                    case "gradientEditMarkup":
                        return '          <div class="popup-newpage-wrapper">             <div class="input-wrapper color-pick-wrap-widgets">               <div class="color-pick-wrap">                 <div></div>                 <input type="text" value="" class="colorpicker-selected" name="startColor">               </div>               <div class="info">                 <h5>' + M.COLOR_START + '</h5>               </div>             </div>             <div class="input-wrapper color-pick-wrap-widgets">               <div class="color-pick-wrap">                 <div></div>                 <input type="text" value="" class="colorpicker-selected" name="endColor">               </div>               <div class="info">                 <h5>' + M.COLOR_END + '</h5>               </div>             </div>             <div class="input-wrappers mt-15 f-left col20">               <h5>' + M.GRADIENT_TYPE + '</h5>               <select class="button-size-select" name="type">                 <option value="linear">' + M.LINEAR + '</option>                 <option value="radial">' + M.RADIAL + '</option>               </select>             </div>             <div class="popup-input-wrapper input-slider-wrapper mt-15">               <h5 class="inline">' + M.GRADIENT_ANGLE + '</h5>              <div id="gradientAngleSlider"></div>               <input type="text" readonly="readonly" class="slider-val">             </div>           </div>';
                    case "bookingAvailabilityRow":
                        return '<div class="availability-row f-left col20 flex align-center">                  <select name="weekdays">                    <option value="everyday">' + M.EVERYDAY + '</option>                    <option value="workweek">' + M.MON_FRI + '</option>                    <option value="weekend">' + M.SAT_SUN + '</option>                    <option value="mon">' + M.MONDAY + '</option>                    <option value="tue">' + M.TUESDAY + '</option>                    <option value="wed">' + M.WEDNESDAY + '</option>                    <option value="thu">' + M.THURSDAY + '</option>                    <option value="fri">' + M.FRIDAY + '</option>                    <option value="sat">' + M.SATURDAY + '</option>                    <option value="sun">' + M.SUNDAY + "</option>                  </select>                  <span>" + M.FROM_RANGE + '</span>                  <select class="time-choice" name="availTimeFrom"></select>                  <span>' + M.TO_RANGE + '</span>                  <select class="time-choice" name="availTimeTo"></select>                  <a class="delete"><i class="material-icons-outlined">delete</i></a>                </div>';
                    case "bookingExclusionRow":
                        return '<div class="availability-row f-left col20 flex align-center mb-15">                  <h5>' + M.NOT_AVAILABLE_FROM + '</h5>                  <input type="text" aria-label="excludeFrom" name="excludeDateFrom" class="excludeDateFrom"/>                  <span>' + M.TO_RANGE + '</span>                  <input type="text" aria-label="excludeTo" value="" name="excludeDateTo" class="excludeDateTo"/>                  <a class="delete"><i class="material-icons-outlined">delete</i></a>                </div>';
                    case "bookingAccordionParent":
                        return '<div class="operator-wrapper f-left col20">                  <div class="col20 flex space-between align-center">                    <div>                      <h4>%title%</h4>                      <span>%subtitle%</span>                    </div>                    <div class="flex align-center">                      <a class="middle-button with-icon blue link-services">' + M.LINK_SERVICES + '</a><a class="circle-settings" rel="action"><i class="material-icons-outlined">settings</i></a>                    </div>                  </div>                  <div class="items-wrapper"></div>                </div>';
                    case "bookingAccordionChild":
                        return '<div class="operator-wrapper f-left col20 flex space-between align-center">                  <div>                    <h4>%title%</h4>                    <span>%subtitle%</span>                  </div>                  <a class="gear-settings" rel="action"><i class="material-icons-outlined">settings</i></a>                </div>';
                    case "bookingOperatorPopup":
                        return '<div class="flex-1 box-with-space">                  <div class="f-left col20 mb-25 center-vertically" style="justify-content: space-between;">                    <h2 class="roboto font-24">' + M.OPERATORS + '</h2>                    <a class="big-button f-right blue with-icon inline-block" data-role="new-operator">' + M.NEW_OPERATOR + '</a>                  </div>                  <span class="col20 f-left f-15 gray-text">' + M.NEW_OPERATOR_DESC + '</span>                  <div class="col20 f-left mt-35" data-role="operators-wrapper"></div>                </div>';
                    case "bookingServicePopup":
                        return '<div class="flex-1 box-with-space">                  <div class="f-left col20 mb-25 center-vertically" style="justify-content: space-between;">                    <h2 class="roboto font-24">' + M.SERVICES + '</h2>                    <a class="big-button f-right blue with-icon inline-block" data-role="new-service">' + M.NEW_SERVICE + '</a>                  </div>                  <span class="col20 f-left f-15 gray-text">' + M.NEW_SERVICE_DESC + '</span>                  <div class="col20 f-left mt-35" data-role="services-wrapper"></div>                </div>';
                    case "bookingNewOperator":
                        return '<div class="flex-1 popup-newpage-wrapper">                  <div class="col20 f-left" data-role="add-operators-wrapper">                    <div class="popup-input-wrapper">                      <h5 class="f-15">' + M.NAME + '</h5>                      <span class="light-gray-text">' + M.OPERATOR_NAME_DESC + '</span>                      <input type="text" name="name" id="name">                    </div>                    <div class="popup-input-wrapper">                      <h5 class="f-15">' + M.EMAIL + '</h5>                      <span class="light-gray-text">' + M.OPERATOR_EMAIL_DESC + '</span>                      <input type="email" name="email" id="email">                    </div>                    <div class="popup-input-wrapper">                      <h5 class="f-15">' + M.DESCRIPTION + '</h5>                      <span class="light-gray-text">' + M.OPERATOR_DESCRIPTION + '</span>                      <input type="text" name="description" id="description">                    </div>                    <div class="popup-input-wrapper">                      <h5 class="col20 f-left f-15">' + M.IMAGE + '</h5>                      <span class="light-gray-text">' + M.OPERATOR_IMAGE_DESC + '</span><br/>                      <a id="backgroundSelectImageHolder" class="add-image transition-all f-left" style="margin-top: 9px ;height: 120px; width: 180px;">                      <span class="add-button transition-all"></span>                      </a>                    </div>                    <div class="input-wrapper input-wrapper-small input-wrapper-margin f-right color-pick-wrap-widgets mb-15">                      <div class="color-pick-wrap">                        <div></div>                         <input type="text" value="" class="colorpicker-selected" id="backgroundColor" name="backgroundColor">                      </div>                       <div class="info">                        <h5>' + M.COLOR_OPERATOR + "</h5>                        <span>" + M.COLOR_OPERATOR_DESC + '</span>                       </div>                     </div>                    <div class="popup-input-wrapper">                      <input type="hidden" id="link" name="link">                      <div class="no-calendar-wrapper">                        <div class="connected-email title-text mb-15">' + M.CALENDAR_GOOGLE_SIGNIN_TITLE + '</div>                        <a data-role="link-google"><img src="' + resources + '/images/google-sign-in.svg" style="width: 175px" alt="" /></a>                      </div>                      <div class="connected-calendar-wrapper">                         <div class="connected-email title-text"></div>                        <a class="big-button f-center red circle-effect" data-role="unlink-google">' + M.UNLINK_GOOGLE_CALENDAR + '</a><br/>                        <a class="edit-calendar-settings mb-25 blue-text">' + M.CHANGE_GOOGLE_SETTINGS + '</a>                        <span class="light-gray-text mb-5">' + M.CALENDAR_CREATE_LABEL + '</span>                        <span class="selected-calendar-settings mb-25"></span>                        <span class="light-gray-text mb-5">' + M.CALENDAR_BUSY_LABEL + '</span>                        <span class="busy-calendar-settings"></span>                      </div>                     </div>                  </div>                </div>';
                    case "bookingOperatorRow":
                        return '<div class="f-left col20 gray-section redirect-record flex align-center relative %classes%" data-role="rule-field">                   <span class="col10 f-left">%name%</span>                   <span class="col10 f-left">%email%</span>                   <a class="middle-button blue f-right add-operator">' + M.ADD + "</a>                 </div>";
                    case "bookingServiceRow":
                        return '<div class="f-left col20 gray-section redirect-record flex align-center relative %classes%" data-role="rule-field">                   <span class="col10 f-left">%name%</span>                   <span class="col10 f-left">%duration%</span>                   <a class="middle-button blue f-right add-service">' + M.ADD + "</a>                 </div>";
                    case "bookingNewService":
                        return '<div class="flex-1 popup-newpage-wrapper">                  <div class="col20 f-left" data-role="add-services-wrapper">                    <div class="popup-input-wrapper">                      <h5 class="f-15">' + M.SERVICE_NAME + '</h5>                      <span class="light-gray-text">' + M.SERVICE_NAME_DESCRIPTION + '</span>                      <input type="text" name="name" id="name">                    </div>                    <div class="popup-input-wrapper">                      <h5 class="f-15">' + M.DESCRIPTION + '</h5>                      <span class="light-gray-text">' + M.SERVICE_DESCRIPTION + '</span>                      <input type="text" name="description" id="description">                    </div>                    <div class="popup-input-wrapper">                      <h5 class="f-15">' + M.SERVICE_TYPE + '</h5>                      <span class="light-gray-text">' + M.SERVICE_TYPE_DESC + '</span>                      <select name="type" class="service-type">                        <option value="one-on-one">' + M.ONE_ON_ONE + '</option>                        <option value="group">' + M.GROUP_MEETING + '</option>                      </select>                    </div>                    <div class="popup-input-wrapper service-type-section none-soft">                      <span class="light-gray-text">' + M.MAX_ATTENDEES + '</span>                      <input type="number" name="maxAttendees" step="1" min="2" value="2" class="booking-type-attendees">                    </div>                    <div class="popup-input-wrapper">                      <h5 class="f-15">' + M.DURATION + '</h5>                      <span class="light-gray-text">' + M.SERVICE_DURATION + '</span>                      <div class="duration-wrapper service-duration f-left col20 mt-5" data-role="serviceDuration">                        <div class="duration-item active" data-role="15">15 ' + M.MINUTES_SHORT + '</div>                        <div class="duration-item" data-role="30">30 ' + M.MINUTES_SHORT + '</div>                        <div class="duration-item" data-role="45">45 ' + M.MINUTES_SHORT + '</div>                        <div class="duration-item" data-role="60">60 ' + M.MINUTES_SHORT + '</div>                        <div class="duration-item" data-role="custom">' + M.CUSTOM + '<input type="number" min="1" max="1400" step="1" name="custom-duration"/></div>                      </div>                    </div>                    <div class="popup-input-wrapper">                      <h5 class="col20 f-left f-15">' + M.IMAGE + '</h5>                      <span class="light-gray-text">' + M.SERVICE_IMAGE_DESC + '</span><br/>                      <a id="backgroundSelectImageHolder" class="add-image transition-all f-left" style="margin-top: 9px ;height: 120px; width: 180px;">                        <span class="add-button transition-all"></span>                      </a>                    </div>                    <div class="input-wrapper col20 mb-5 mt-10 f-left tags-ui-wrapper">                       <div class="checkbox-wrapper col20 f-left">                         <input class="css-checkbox" type="checkbox" id="addTags" name="addTags" />                         <label for="addTags" class="css-label">' + M.ADD_TAGS_ON_BOOKING + '</label>                       </div>                       <ul class="tags-wrapper f-left col20 none-soft"></ul>                     </div>                   </div>                </div>';
                    case "bookingTableRow":
                        return '<tr data-id="%id%">                  <td><div class="starting-cell"><span class="material-icons blue-text booking-event-icon"> event </span></div></td>                  <td><div class="big-cell fs-18 text-btn"><a rel="tab" data-tab="booking" href="/me/crm/booking/%id%" class="blue-text">%name%</a></div></td>                  <td><div class="small-cell">%duration%</div></td>                  <td class="none"><div class="small-cell text-btn"><a target="blank_" href="%link%">%link%</a></div></td>                  <td><div class="small-cell"><a class="blue-text operator-schedule schedule mr-10">' + M.VIEW_SCHEDULE + '</a>                  <a class="circle-settings" rel="action"><i class="material-icons-outlined">settings</i></a></div></td>                </tr>';
                    case "bookingScheduledEventWrapper":
                        return '<div class="col20 f-left booked-day-wrapper">                  <h3 class="booked-day">%date%</h3>                  <div class="booked-items-wrapper"></div>                </div>';
                    case "bookingScheduledEvent":
                        return '<div class="booked-event %class%" data-id="%id%">                  <div class="col20 flex align-center booked-event-header">                    <div class="col7 f-16">                      <div class="flex align-center time-wrapper">                        <i class="material-icons mr-10">alarm_on</i>                        <span>%time%</span>                      </div>                      <div class="flex vertical-flex operator-color" style="position:relative; top: 12px">                        <div class="color-pick-wrap ml-10"><div class="none-soft"></div></div>                      </div>                    </div>                    <div class="col7">                      <h4 class="client"></h4>                      <h4><span>' + M.EVENT + '</span> %eventName%</h4>                    </div>                    <div class="col6">                      <span class="middle-button bordered-button f-right circle-effect">' + M.SHOW_DETAILS + '</span>                    </div>                  </div>                  <div class="col20 f-left booked-event-info none-soft">                    <div class="col9 event-basic-info f-left">                      <div class="more-info"></div>                      <div class="col20 f-left mt-25">                        <a rel="action" data-action="cancelEvent" class="middle-button white-btn circle-effect">' + M.CANCEL_EVENT + '</a>                      </div>                    </div>                    <div class="col1 f-left">&nbsp;</div>                    <div class="col10 f-left event-form-answers"></div>                    <h4 class="col20 f-left mt-25 roboto group-table none-soft">' + M.EVENT_ATTENDEES + '</h4>                     <div class="content-wrapper horizontal-flex-table col20 f-left group-table none-soft" style="max-width: none; width: 100%;">                      <div class="sections-wrapper members-wrapper horizontal-flex-table">                       <div class="section-bg members-wrapper products-wrapper crm-table-outer" style="margin-top: 20px;">                        <div class="scrollable-table">                         <table style="margin-top: 0;">                          <thead></thead>                          <tbody></tbody>                         </table>                        </div>                       </div>                      </div>                     </div>                   </div>                </div>';
                    case "bookingCustomerInfo":
                        return '<div class="col20 f-left mb-15">                  <span class="col20 f-left">%label%</span>                  <h4 class="col20 f-left">%value%</h4>                </div>';
                    case "bookingFilterPopup":
                        return '          <div class="popup-newpage-wrapper">             <div class="popup-input-wrapper popup-input-wrapper-half">               <h5>' + M.BOOKING + '</h5>               <select name="eventId" class="required transition-all">              \t<option value="">' + M.SELECT_BOOKING + '</option>              </select>             </div>             <div class="popup-input-wrapper popup-input-wrapper-half f-right">               <h5>' + M.OPERATOR + '</h5>                <select name="operatorId" class="required transition-all">              \t<option value="">' + M.SELECT_OPERATOR + '</option>              </select>             </div>             <div class="popup-input-wrapper" >               <h5>' + M.SERVICE + '</h5>                <select name="serviceId" class="required transition-all">\t\t\t\t        <option value="">' + M.SELECT_SERVICE + '</option>              </select>             </div>             <div class="popup-input-wrapper popup-input-wrapper-half" >               <h5>' + M.START_DATE + '</h5>                <input type="text" name="start" class="required transition-all">             </div>             <div class="popup-input-wrapper popup-input-wrapper-half f-right" >               <h5>' + M.END_DATE + '</h5>                <input type="text" name="end" class="required transition-all">             </div>           </div>';
                    case "bookingServiceOperatorRow":
                        return '<div class="booked-event flex align-center" data-id="%id%">                  <div class="col20 flex align-center booked-event-header">                    <div class="col7 f-16 flex align-center hidden-text">                      <span class="material-icons-outlined mr-10" style="%color%"> %icon% </span>%title%                    </div>                    <div class="col5 upcoming">                      <h4><span>' + M.UPCOMING_BOOKINGS + '</span> %bookings_count%</h4>                    </div>                    <div class="col8 flex align-center justify-end">                      <a class="blue-text operator-schedule schedule mr-10">' + M.VIEW_SCHEDULE + '</a>                      <span class="middle-button bordered-button f-right circle-effect details-btn">' + M.SETTINGS + "</span>                    </div>                  </div>                </div>";
                    case "bookingNoDataRow":
                        return '<h4 class="t-center">' + M.SCHEDULED_NOT_AVAILABLE + "</h4>";
                    case "bookingNoOperatorRow":
                        return '<div class="no-data-image mb-15">             <span class="material-icons-outlined"> account_circle </span>             <h3 class="col20 f-left t-center mt-25">' + M.NO_OPERATORS + '</h3>             <div class="col20 f-left t-center mt-25"><a rel="action" data-action="createOperator" class="big-button blue with-icon inline-block f-none">' + M.CREATE_OPERATOR + "</a></div>           </div>";
                    case "bookingNoServiceRow":
                        return '<div class="no-data-image mb-15">             <span class="material-icons-outlined"> assignment </span>             <h3 class="col20 f-left t-center mt-25">' + M.NO_SERVICES + '</h3>             <div class="col20 f-left t-center mt-25"><a rel="action" data-action="createService" class="big-button blue with-icon inline-block f-none">' + M.CREATE_SERVICE + "</a></div>           </div>";
                    case "bookingNoDataTable":
                        return '<td colspan="20">           <div class="no-data-image">             <span class="material-icons-outlined">bookmark_border</span>             <h3 class="col20 f-left t-center mt-25">' + M.NO_BOOKING_EVENTS + '</h3>             <div class="col20 f-left t-center mt-25"><a rel="tab" href="/me/crm/booking/" class="big-button blue with-icon inline-block f-none">' + M.CREATE_BOOKING + "</a></div>           </div>         </td>";
                    case "bookingSettingsFormFieldMarkup":
                        return '<div class="gray-area col12 f-left mb-5">                  <span>' + M.FIELD + " %no%</span>                  <h4>%name%</h4>                </div>";
                    case "warningPopup":
                        return '<div class="popup-widget-wrapper">           <div class="col20 f-left t-center mt-45">             <span class="material-icons fingerprint-icon"> error_outline </span>           </div>           <h3 class="col20 f-left t-center mt-25">%title%</h3>           <span class="col20 f-left t-center mt-10 light-gray-text f-15">%message%</span>           <div class="buttons-wrapper col20 f-left t-center mt-25">             <a data-role="continue" class="big-button blue inline-block f-none">%button% â†’</a>           </div>           <div class="buttons-wrapper col20 f-left t-center mt-25">             <a class="text-button close-popup" style="font-size: 14px; opacity: .6;">' + M.CANCEL + "</a>           </div>         </div> ";
                    case "bookingStepLabelsMarkup":
                        return '          <div class="popup-newpage-wrapper">             <div class="popup-input-wrapper">               <h5>' + M.OPERATORS_STEP_HEADING_LBL + '</h5>                <input type="text" name="operators" class="required transition-all">             </div>             <div class="popup-input-wrapper">               <h5>' + M.SERVICES_STEP_HEADING_LBL + '</h5>                <input type="text" name="services" class="required transition-all">             </div>             <div class="popup-input-wrapper">               <h5>' + M.TIME_STEP_HEADING_LBL + '</h5>                <input type="text" name="calendar" class="required transition-all">             </div>             <div class="popup-input-wrapper mb-25">               <h5>' + M.DETAILS_STEP_HEADING_LBL + '</h5>                <input type="text" name="details" class="required transition-all">             </div>           </div>';
                    case "bookingGoogleSettings":
                        return '<div class="popup-newpage-wrapper">                   <div class="popup-input-wrapper">                     <h5 class="col20 f-left">' + M.CALENDAR_CREATE_DESC + '</h5>                    <select class="col20 f-left calendar-select mb-25"></select>                    <h5 class="col20 f-left mt-15">' + M.CALENDAR_BUSY_DESC + '</h5>                    <div class="col20 f-left calendar-busy-select mt-15 mb-25"></div>                  </div>                </div>';
                    case "importContactsWelcome":
                        return '<div class="popup-widget-wrapper">                  <div class="col20 f-left t-center mt-45">                    <span class="material-icons fingerprint-icon"> publish </span>                  </div>                  <ul class="col20 f-left t-center steps-wrapper flex justify-center align-center mt-35">                    <li class="active"></li>                    <li></li>                    <li></li>                  </ul>                  <h3 class="col20 f-left t-center mt-25">' + M.CSV_IMPORT_TITLE + '</h3>                  <span class="col20 f-left t-center mt-10 light-gray-text">' + M.CSV_IMPORT_SUBTITLE + '</span>                  <div class="checkbox-wrapper mt-25 f-left">                    <input id="agree" name="agree" value="0" class="css-checkbox" type="checkbox">                    <label for="agree" class="css-label" style="font-size: 13px">' + M.IMPORT_AGREE_MESSAGE + '</label>                  </div>                  <div class="buttons-wrapper col20 f-left t-center mt-35">                    <a class="big-button blue inline-block f-none">' + M.IMPORT_BUTTON + '</a>                  </div>                  <div class="buttons-wrapper col20 f-left t-center mt-25">                    <a class="text-button close-popup" style="font-size: 14px; opacity: .6;">' + M.CLOSE_IMPORT_BUTTON + '</a>                  </div>                  <input name="csv" type="file" accept=".csv" class="none" />                </div>';
                    case "importContactsMain":
                        return '<div class="popup-widget-wrapper">                    <ul class="col20 f-left t-center steps-wrapper flex justify-center align-center mt-35">                      <li></li>                      <li class="active"></li>                      <li></li>                    </ul>                    <h3 class="col20 f-left t-center mt-25">' + M.FIELD_MATCH_TITLE + '</h3>                    <span class="col20 f-left t-center mt-10 light-gray-text col15">' + M.FIELD_MATCH_SUBTITLE + '</span>                    <div id="contactImport" class="table-header-wrapper col20 f-left mt-25" style="box-shadow: none">                      <table class="crm-table universal-table-wrapper" style="margin-top: 0; width: 100%; min-width: 100%;">                        <thead class="table-header">                          <tr style="border-bottom: 0;">                            <th><div class="starting-cell"></div></th>                            <th class="title"><div class="big-cell">' + M.COLUMN_TITLE_FILE + '</div></th>                            <th><div class="small-cell">' + M.COLUMN_PREVIEW + '</div></th>                            <th><div class="small-cell">' + M.COLUMN_CRM_PROPERTY + '</div></th>                          </tr>                        </thead>                        <tbody class="tall-table booking-body" style="height: auto;"></tbody>                      </table>                      <div class="checkbox-wrapper mt-25 f-left">                        <input id="includeHeader" name="includeHeader" value="1" class="css-checkbox" checked="checked" type="checkbox">                        <label for="includeHeader" class="css-label">' + M.CONTAINS_HEADER + "<span>" + M.CONTAINS_HEADER_DESC + "</span></label>                      </div>                    </div>                  </div>";
                    case "importContactsRow":
                        return '<tr data-row="%field%">                  <td>                    <div class="starting-cell"><span data-role="status-icon" class="material-icons none"> check_circle_outline </span></div>                  </td>                  <td class="title"><div class="big-cell">%field%</div></td>                  <td><div class="small-cell sample"></div></td>                  <td>                      <div class="small-cell"><select class="col20 f-left"></select></div>                  </td>                </tr>';
                    case "importContactsStatus":
                        return '<div class="popup-widget-wrapper">                <ul class="col20 f-left t-center steps-wrapper flex justify-center align-center mt-35">                  <li></li>                  <li></li>                  <li class="active"></li>                </ul>                <h3 class="col20 f-left t-center mt-25">' + M.IMPORT_PROGRESS + '</h3>                <span class="col20 f-left t-center mt-10 light-gray-text">' + M.IMPORT_PROGRESS_SUBTITLE + '</span>                <div class="form-progress-wrapper form-progress-wrapper-bottom">                  <span></span>                  <div class="form-progress-bar">                    <div class="success-bar" style="background-color: #3391e1;width:0%;"></div>                  </div>                </div>                <span class="col20 f-left t-center mt-10 light-gray-text">' + M.IMPORTED_CONTACTS + ' - <span class="import-text">0</span></span>            </div>';
                    case "importProductsWelcome":
                        return '<div class="popup-widget-wrapper">                <div class="col20 f-left t-center mt-45">                  <span class="material-icons fingerprint-icon"> publish </span>                </div>                <ul class="col20 f-left t-center steps-wrapper flex justify-center align-center mt-35">                  <li class="active"></li>                  <li></li>                  <li></li>                </ul>                <h3 class="col20 f-left t-center mt-25">' + M.CSV_IMPORT_PRODUCT_TITLE + '</h3>                <span class="col20 f-left t-center mt-10 light-gray-text">' + M.CSV_IMPORT_PRODUCT_SUBTITLE + '</span>                <span class="col20 f-left t-center mt-10 light-gray-text"><a class="underline" href="' + (window.productImportCSVSampleUrl || "https://static.web-repository.com/product_template.csv") + '" target="_blank">' + M.CSV_IMPORT_PRODUCT_SAMPLE + '</span>                <div class="buttons-wrapper col20 f-left t-center mt-35">                  <a class="big-button blue inline-block f-none">' + M.IMPORT_BUTTON + '</a>                </div>                <div class="buttons-wrapper col20 f-left t-center mt-25">                  <a class="text-button close-popup" style="font-size: 14px; opacity: .6;">' + M.CLOSE_IMPORT_PRODUCT_BUTTON + '</a>                </div>                <input name="csv" type="file" accept=".csv" class="none" />              </div>';
                    case "importProductsMain":
                        return '<div class="popup-widget-wrapper">                  <ul class="col20 f-left t-center steps-wrapper flex justify-center align-center mt-35">                    <li></li>                    <li class="active"></li>                    <li></li>                  </ul>                  <h3 class="col20 f-left t-center mt-25">' + M.FIELD_MATCH_TITLE + '</h3>                  <span class="col20 f-left t-center mt-10 light-gray-text col15">' + M.FIELD_MATCH_PRODUCT_SUBTITLE + '</span>                  <div id="productImport" class="table-header-wrapper col20 f-left mt-25" style="box-shadow: none">                    <table class="crm-table universal-table-wrapper" style="margin-top: 0; width: 100%; min-width: 100%;">                      <thead class="table-header">                        <tr style="border-bottom: 0;">                          <th><div class="starting-cell"></div></th>                          <th class="title"><div class="big-cell">' + M.COLUMN_TITLE_FILE + '</div></th>                          <th><div class="small-cell">' + M.COLUMN_PREVIEW + '</div></th>                          <th><div class="small-cell">' + M.COLUMN_CRM_PROPERTY + '</div></th>                        </tr>                      </thead>                      <tbody class="tall-table booking-body" data-role="import-fields"></tbody>                    </table>                    <div class="checkbox-wrapper mt-25 f-left">                      <input id="includeHeader" name="includeHeader" value="1" class="css-checkbox" checked="checked" type="checkbox">                      <label for="includeHeader" class="css-label">' + M.CONTAINS_HEADER + "<span>" + M.CONTAINS_HEADER_DESC + '</span></label>                    </div>                    <div class="input-wrapper input-wrapper2 f-left mt-15">                       <div class="info">                         <h5 class="inline">' + M.CATEGORY_DELIMITER + "</h5>                        <span>" + M.CATEGORY_DELIMITER_DESC + '</span>                        <select name="categoryDelimiter">                          <option value=",">' + M.IMPORT_PRODUCT_DELIMITER_COMMA + '</option>                          <option value=";">' + M.IMPORT_PRODUCT_DELIMITER_SEMICOLON + '</option>                        </select>                       </div>                    </div>                     <div class="input-wrapper input-wrapper2 f-right mt-15">                       <div class="info">                         <h5 class="inline">' + M.SUBCATEGORY_DELIMITER + '</h5>                        <span class="info">' + M.SUBCATEGORY_DELIMITER_DESC + '</span>                        <select name="subcategoryDelimiter">                          <option value=">">' + M.IMPORT_PRODUCT_DELIMITER_GREATER + '</option>                          <option value="/">' + M.IMPORT_PRODUCT_SLASH + '</option>                          <option value="-">' + M.IMPORT_PRODUCT_HIPHEN + "</option>                        </select>                       </div>                    </div>                   </div>                </div>";
                    case "importProductsRow":
                        return '<tr data-row="%field%">                <td>                  <div class="starting-cell"><span data-role="status-icon" class="material-icons none"> check_circle_outline </span></div>                </td>                <td class="title"><div class="big-cell">%field%</div></td>                <td><div class="small-cell sample"></div></td>                <td>                    <div class="small-cell"><select id="import_product_property" class="col20 f-left"></select></div>                </td>              </tr>';
                    case "importProductsStatus":
                        return '<div class="popup-widget-wrapper">              <ul class="col20 f-left t-center steps-wrapper flex justify-center align-center mt-35">                <li></li>                <li></li>                <li class="active"></li>              </ul>              <h3 class="col20 f-left t-center mt-25">' + M.IMPORT_PROGRESS + '</h3>              <span class="col20 f-left t-center mt-10 light-gray-text">' + M.IMPORT_PRODUCT_PROGRESS_SUBTITLE + '</span>              <div class="form-progress-wrapper form-progress-wrapper-bottom">                <span></span>                <div class="form-progress-bar">                  <div class="success-bar" style="background-color: #3391e1;width:0%;"></div>                </div>              </div>              <span class="col20 f-left t-center mt-10 light-gray-text">' + M.IMPORTED_PRODUCTS + ' - <span class="import-text">0</span></span>          </div>';
                    case "containerHiddenMessage":
                        return '<div class="block-hidden-message">                  <a data-role="showBlock">' + M.HIDDEN_BLOCK_MESSAGE + "</a>                </div>";
                    case "elementDelayMarkup":
                        return '        <div class="popup-widget-wrapper">           <div class="input-wrapper mb-10">             <h4>' + M.ELEMENT_DELAY + '</h4>             <span class="f-left light-gray-text mt-15">' + M.ELEMENT_DELAY_DESC + '</span>           </div>          <div class="input-wrapper input-wrapper2 f-left mt-15">             <h5>' + M.MINUTES + '</h5>             <input name="minutes" type="number" min="0" step="1" />           </div>           <div class="input-wrapper input-wrapper2 f-right mt-15">             <h5>' + M.SECONDS + '</h5>             <input name="seconds" type="number" min="0" step="1" />           </div>         </div>';
                    case "blockRowColumnSettings":
                        return '<div class="col20 f-left">                   <div class="col20 f-left" style="padding: 0px 25px; box-sizing: border-box;">                    <h5 class="col20 f-left mb-15 mt-25">' + M.SPLIT_IN_COLS_TITLE + '</h5>                     <div class="col20 f-left mb-25">                       <a class="columns-select rounded-effect">1</a>                       <a class="columns-select rounded-effect">2</a>                       <a class="columns-select rounded-effect">3</a>                       <a class="columns-select rounded-effect">4</a>                       <a class="columns-select rounded-effect">5</a>                     </div>                     <div id="columnsSlider"></div>                  </div>                </div>';
                    case "imageCaptionBoxStyles":
                        return '        <div class="popup-widget-wrapper">             <div class="popup-input-wrapper">              <h5>' + M.POSITION + '</h5>               <select name="captionPosition"></select>            </div>            <div class="input-wrapper input-wrapper-small color-pick-wrap-widgets" style="margin-bottom:10px;">               <div class="color-pick-wrap">                 <div></div>                 <input type="text" value="" class="colorpicker-selected" name="fgColor">               </div>               <div class="info">                 <h5>' + M.TEXT_COLOR + '</h5>               </div>             </div>            <div class="input-wrapper input-wrapper-small color-pick-wrap-widgets" style="margin-bottom:10px;">               <div class="color-pick-wrap">                 <div></div>                 <input type="text" value="" class="colorpicker-selected" name="bgColor">               </div>               <div class="info">                 <h5>' + M.BACKGROUND_COLOR + '</h5>               </div>             </div>            <div class="popup-input-wrapper mb-0">               <h5 class="inline">' + M.HEADING_FONT + '</h5>              <select name="headingFontFamily"></select>             </div>             <div class="popup-input-wrapper input-slider-wrapper" >               <h5 class="inline">' + M.HEADING_FONT_SIZE + '</h5>              <div id="headingSizeSlider"></div>               <input type="text" readonly="readonly" class="slider-val">             </div>             <div class="popup-input-wrapper mb-0">               <h5 class="inline">' + M.CAPTION_FONT + '</h5>              <select name="captionFontFamily"></select>             </div>             <div class="popup-input-wrapper input-slider-wrapper" >               <h5 class="inline">' + M.CAPTION_FONT_SIZE + '</h5>              <div id="captionTextSizeSlider"></div>               <input type="text" readonly="readonly" class="slider-val">             </div>             <div class="col20 f-left gray-section product-select-wrapper">               <div class="col20 f-left ab-step center-vertically">                 <h4 class="roboto">' + M.CAPTION_SHADOW + '</h4>                 <a class="text-link blue-text" data-role="changeCaptionShadowStyles">' + M.CHANGE + "</a>               </div>             </div>         </div>";
                    case "toggleEditTabMarkup":
                        return '          <div class="popup-widget-wrapper">             <div class="popup-input-wrapper" >               <h5>' + M.TAB_NAME + '<a class="label-link" data-role="editStyling">' + M.TAB_STYLING + '</a></h5>              <input type="text" name="label" placeholder="' + M.ADD_LABEL + '"/>             </div>             <div class="popup-input-wrapper" >               <h5>' + M.TAB_PARAGRAPH + '</h5>               <div class="col20 f-left text-field-wrapper mt-15">                <textarea name="text"></textarea>              </div>            </div>             <div class="checkbox-wrapper">               <input id="showButton" class="css-checkbox" type="checkbox" name="showButton">               <label for="showButton" class="css-label">' + M.ADD_CTA + '</label>             </div>             <div class="col20 f-left none-soft" data-role="button-wrapper">              <div class="popup-input-wrapper mt-5" >                 <h5>' + M.BUTTON_TEXT + '<a class="label-link" data-role="changeButtonStyle">' + M.TEXT_STYLING + '</a></h5>                <input type="text" class="modify" name="buttonText" />               </div>               <div class="f-left col20 mt-5">                 <div class="info">                   <h5>' + M.BUTTON_TARGET + '</h5>                 </div>                 <input class="path-select select-like" type="text" placeholder="' + M.FILL_LINK_TITLE + '" />               </div>             </div>          </div>';
                    case "toggleSingleTabMarkup":
                        return '          <div class="form-step-wrapper flex align-center" data-role="single-tab">            <span class="move-icon button-tooltip ui-sortable-handle pointer"></span>            <h3 style="padding: 20px 0px" class="step-title flex-1">%name%</h3>            <div class="buttons-wrapper flex-none">              <a data-tooltip="settings" data-role="edit" class="delete delete-icon modify button-tooltip light-gray-icon circle-effect mr-5">                <i class="material-icons-outlined">settings</i>              </a>              <a data-tooltip="widgetClone" data-role="clone" class="delete delete-icon modify button-tooltip light-gray-icon circle-effect mr-5">                <i class="material-icons-outlined">content_copy</i>              </a>              <a data-tooltip="simpleDelete" data-role="delete" class="delete delete-icon modify button-tooltip light-gray-icon circle-effect">                <i class="material-icons-outlined">delete</i>              </a>            </div>          </div>';
                    case "zzz":
                        return '      <div class="col20 mt-5 f-left gray-section product-select-wrapper" data-role="single-tab">         <div class="col20 f-left ab-step center-vertically">           <span class="move-icon ml-0 pointer" style="position: relative; left: -9px;"></span>          <h4 class="roboto">%name%</h4>           <a data-tooltip="settings" data-role="edit" class="delete delete-icon modify button-tooltip light-gray-icon circle-effect mr-5">            <i class="material-icons-outlined">settings</i>          </a>          <a data-tooltip="simpleDelete" data-role="delete" class="delete delete-icon modify button-tooltip light-gray-icon circle-effect">            <i class="material-icons-outlined">delete</i>          </a>        </div>       </div>';
                    case "toggleWidgetStylingMarkup":
                        return '           <div class="popup-widget-wrapper">             <div class="popup-input-wrapper" >               <div class="input-wrapper">                 <h5>' + M.ACCORDION_STYLE + '</h5>                 <select class="button-size-select" name="style">                   <option value="style-1">' + M.STYLE_1 + '</option>                   <option value="style-2">' + M.STYLE_2 + '</option>                   <option value="style-3">' + M.STYLE_3 + '</option>                   <option value="style-4">' + M.STYLE_4 + '</option>                 </select>               </div>             </div>             <div class="popup-input-wrapper mb-0">               <h5 class="inline">' + M.HEADING_FONT + '</h5>              <select name="headingFontFamily"></select>             </div>             <div class="popup-input-wrapper input-slider-wrapper" >               <h5 class="inline">' + M.HEADING_FONT_SIZE + '</h5>              <div id="headingSizeSlider"></div>               <input type="text" readonly="readonly" class="slider-val">             </div>             <div class="input-wrapper input-wrapper-small color-pick-wrap-widgets" style="margin-bottom:10px;">               <div class="color-pick-wrap">                 <div></div>                 <input type="text" value="" class="colorpicker-selected" name="headingBgColor">               </div>               <div class="info">                 <h5>' + M.HEADING_BACKGROUND_COLOR + '</h5>               </div>             </div>            <div class="input-wrapper input-wrapper-small color-pick-wrap-widgets" style="margin-bottom:10px;">               <div class="color-pick-wrap">                 <div></div>                 <input type="text" value="" class="colorpicker-selected" name="headingColor">               </div>               <div class="info">                 <h5>' + M.HEADING_COLOR + '</h5>               </div>             </div>            <div class="input-wrapper input-wrapper-small color-pick-wrap-widgets" style="margin-bottom:10px;">               <div class="color-pick-wrap">                 <div></div>                 <input type="text" value="" class="colorpicker-selected" name="contentBgColor">               </div>               <div class="info">                 <h5>' + M.CONTENT_AREA_BG + "</h5>               </div>             </div>          </div>";
                    case "reorderItemsMarkup":
                        return '          <div class="popup-widget-wrapper">             <div class="popup-input-wrapper" >               <div class="col20 f-left">                <div class="help-text-wrapper">                  <span class="help-text" style="margin-bottom:15px;">                    ' + M.DRAG_DROP_ARRANGE + '                  </span>                </div>                <div class="col20 f-left" data-role="sortable"></div>              </div>            </div>          </div>';
                    case "reorderItemsSingleMarkup":
                        return '<div class="form-step-wrapper flex align-center" data-id="%id%">                  <span class="move-icon button-tooltip ui-sortable-handle flex-none" data-tooltip="simpleMove" />                  <h3 class="step-title flex-none" style="padding: 15px 0">%name%</h3>                </div>';
                    case "subscriptionWidgetFormStyles":
                        return '<div class="popup-widget-wrapper">                   <div class="input-wrapper color-pick-wrap-widgets">                     <div class="color-pick-wrap">                       <div></div>                       <input type="text" value="" class="colorpicker-selected modify" name="headingsColor">                     </div>                     <div class="info">                       <h5>' + M.HEADINGS_COLOR + '</h5>                     </div>                   </div>                   <div class="input-wrapper color-pick-wrap-widgets">                     <div class="color-pick-wrap">                       <div></div>                       <input type="text" value="" class="colorpicker-selected modify" name="fieldsBgColor">                     </div>                     <div class="info">                       <h5>' + M.FIELDS_BG + '</h5>                     </div>                   </div>                   <div class="input-wrapper color-pick-wrap-widgets">                     <div class="color-pick-wrap">                       <div></div>                       <input type="text" value="" class="colorpicker-selected modify" name="fieldsTextColor">                     </div>                     <div class="info">                       <h5>' + M.FIELDS_TEXT_COLOR + '</h5>                     </div>                   </div>                   <div class="input-wrapper color-pick-wrap-widgets">                     <div class="color-pick-wrap">                       <div></div>                       <input type="text" value="" class="colorpicker-selected modify" name="fieldsBorderColor">                     </div>                     <div class="info">                       <h5>' + M.FIELDS_BORDER_COLOR + '</h5>                     </div>                   </div>                   <div class="popup-input-wrapper mt-15" >                     <h5 class="inline">' + M.TEXT_FONT_FAMILY + '</h5>                    <select name="fieldsFontFamily"></select>                   </div>               </div>';
                    case "changeMarketingLimitsTemplate":
                        return '              <div class="popup-widget-wrapper">                <div class="col20 f-left t-center mt-35">                  <span class="material-icons fingerprint-icon none"> account_circle </span>                </div>                <h3 class="col20 f-left t-center mt-25">' + M.SUBSCRIBERS_ADDON_TITLE + '</h3>                <span class="col20 f-left t-center mt-10 help-text mb-25" style="opacity: .7;">' + M.SUBSCRIBERS_ADDON_DESC + '</span>                <h3 class="col20 t-center f-left mb-5 addon-popup-price"><span data-role="subscribers">1000</span> <span class="smaller">' + M.SUBSCRIBERS2 + '</span></h3>                <div class="popup-input-wrapper input-slider-wrapper email-subs-slider" >                  <div data-role="slider"></div>                </div>                <h2 class="col20 t-center f-left addon-popup-price" data-role="addon-price-wrapper">                  <span data-role="price">...</span><span class="smaller">/' + M.MONTH + '</span>                </h2>                <span class="col20 f-left t-center mt-10 help-text mb-25 none" style="opacity: .7;" data-role="price-clarification"></span>                <div class="buttons-wrapper col20 f-left t-center mt-15">                  <a class="big-button blue inline-block f-none" data-role="set-addon">' + M.PAY_UPGRADE + ' â†’</a>                </div>                <div class="buttons-wrapper col20 f-left t-center mt-15">                  <a class="text-button close-popup" style="font-size: 14px; opacity: .6;">' + M.CLOSE_POPUP + "</a>                </div>              </div>";
                    case "marketingCampaignSentConfirmation":
                        return '<div class="popup-widget-wrapper">          <div class="col20 f-left t-center mt-45">            <span class="material-icons fingerprint-icon"> done </span>          </div>          <h3 class="col20 f-left t-center mt-25">%message%</h3>          <div class="buttons-wrapper col20 f-left t-center mt-25 mb-25">            <a class="big-button blue inline-block f-none close-popup">' + M.BACK_TO_ALL_CAMPAIGNS + " â†’</a>          </div>        </div>";
                    case "confirmationMessage":
                        return '<div class="popup-widget-wrapper">          <div class="col20 f-left t-center mt-45">            <span class="material-icons fingerprint-icon"> done </span>          </div>          <h4 class="col20 f-left t-center mt-25">%message%</h4>          <div class="col20 f-left t-center mt-15 close-popup"><a class="text-button">' + M.CLOSE + "</a></div>         </div>";
                    case "warningWithButtonMarkup":
                        return '<div class="popup-widget-wrapper">          <div class="col20 f-left t-center">            <span class="material-icons fingerprint-icon"> warning </span>          </div>          <span class="col20 f-left t-center mt-25" style="font-size: 16px;">%message%</span>          <div class="buttons-wrapper col20 f-left t-center mt-25 mb-25">            <a class="big-button blue inline-block f-none close-popup" href="%btnLink%" target="_blank">%btnText%</a>          </div>        </div>';
                    case "marketingListsAndDoubleOptInPicker":
                        return '          <div class="input-wrapper marketing-settings-wrapper mb-10 none">             <div class="col20 mb-5 f-left gray-section product-select-wrapper">               <div class="col20 f-left ab-step center-vertically">                 <h4 class="roboto flex-1">' + M.CONNECT_TO_EMAIL_MARKETING + '</h4>                 <a class="text-link blue-text marketing-settings flex-none">' + M.SELECT_LISTS2 + '</a>               </div>             </div>           </div>           <div class="checkbox-wrapper col20 f-left mt-10" data-role="enable-double-opt-in">             <input class="css-checkbox" type="checkbox" id="enableDoubleOptIn" name="enableDoubleOptIn" />             <label for="enableDoubleOptIn" class="css-label">' + M.ENABLE_DOUBLE_OPT_IN + "<span>" + M.ENABLE_DOUBLE_OPT_IN_DESC + "</span></label>           </div>";
                    case "refundDialogMarkup":
                        return '<div class="popup-slider-wrapper">         <div class="input-wrapper input-wrapper2 f-left">           <div class="info">             <h5>Transaction</h5>           </div>           <select class="template-select" name="transactionId"></select>         </div>         <div class="input-wrapper input-wrapper2 f-right">           <div class="info">             <h5>Amount</h5>           </div>           <div class="symbol-input price-input">            <span class="symbol-sign"></span>            <input type="number" min="0.01" step="0.01" value="0.00" placeholder="0.00" name="amount" />          </div>        </div>       </div>';
                    case "pickImagesPopupMarkup":
                        return '        <div class="popup-widget-wrapper">           <div class="input-wrapper"></div>           <div class="galleryContainer">            <div class="items-wrapper col20">              <div class="f-left col20 t-center"><a class="add-button-inline blue">' + M.ADD_IMAGE + '</a></div>              <div class="help-text-wrapper">                 <span class="help-text">' + M.YOU_CAN_ADD + '</span>               </div>               <div class="col20 f-left" data-role="image-target"></div>            </div>          </div>        </div>';
                    case "noImagePreviewBox":
                        return '<div class="no-image-preview" style="width: 240px; height: 160px"></div>';
                    case "storeWidgetImageStyles":
                        return '<div class="popup-widget-wrapper">                  <div class="col20 f-left t-center mt-5">                    <span class="material-icons-outlined fingerprint-icon"> brush </span>                  </div>                  <h4 class="col20 f-left mt-15 mb-10 t-center h4-bigger">' + M.PRODUCT_IMAGE_STYLING + '</h4>                  <div class="popup-input-wrapper mt-25" >                    <h5>' + M.IMAGE_POSITION + '</h5>                     <select name="imageSizeType">                      <option value="">' + M.PLEASE_SELECT + '</option>                      <option value="fit-height">' + M.FILL_CONTAINER_HEIGHT + '</option>                      <option value="fit-image">' + M.FIT_IN_CONTAINER + '</option>                      <option value="cover-image">' + M.FILL_CONTAINER + '</option>                    </select>                  </div>                  <div class="popup-input-wrapper">                    <h5>' + M.IMAGE_SIZE_RATIO + '</h5>                     <select name="imageSize">                      <option value="75">' + M.IMG_STANDARD + '</option>                      <option value="80">' + M.IMG_WIDE_5_4 + '</option>                      <option value="56.25">' + M.IMG_WIDE + '</option>                      <option value="50">' + M.IMG_WIDE_2_1 + '</option>                      <option value="100">' + M.IMG_SQUARE + '</option>                      <option value="125">' + M.IMG_TALL_4_5 + '</option>                      <option value="133.333">' + M.IMG_STANDARD_TALL + '</option>                      <option value="177.7778">' + M.IMG_TALL_9_16 + '</option>                      <option value="200">' + M.IMG_TALL_1_2 + '</option>                    </select>                  </div>                  <div class="input-wrapper mt-15">                    <div class="info">                      <label>' + M.IMAGE_BORDER_RADIUS + '</label>                      <input type="text" readonly="readonly" class="slider-val">                    </div>                    <div id="imageBorderRadiusSlider">                      <div></div>                      <span></span>                    </div>                  </div>                  <div class="input-wrapper color-pick-wrap-widgets mt-10">                    <div class="color-pick-wrap">                      <div style="background-color: #fff;"></div>                      <input type="text" value="" class="colorpicker-selected" name="imageBgColor">                    </div>                    <div class="info">                      <h5>' + M.IMAGE_BACKGROUND_COLOR + "</h5>                    </div>                  </div>                </div>";
                    case "storeWidgetProductBoxStyles":
                        return '<div class="popup-widget-wrapper">                  <div class="col20 f-left t-center mt-5">                    <span class="material-icons-outlined fingerprint-icon"> brush </span>                  </div>                  <h4 class="col20 f-left mt-15 mb-10 t-center h4-bigger">' + M.PRODUCT_BOX_STYLING + '</h4>                  <span class="light-gray-text t-center col20 f-left mb-25 padded-text">' + M.PRODUCT_BOX_STYLING_DESC + '</span>                  <div class="input-wrapper mt-25">                    <div class="info">                      <label>' + M.BOX_PADDING + '</label>                      <input type="text" readonly="readonly" class="slider-val">                    </div>                    <div id="boxPaddingSlider">                      <div></div>                      <span></span>                    </div>                  </div>                  <div class="input-wrapper mt-15">                    <div class="info">                      <label>' + M.BOX_BORDER_RADIUS + '</label>                      <input type="text" readonly="readonly" class="slider-val">                    </div>                    <div id="boxRadiusSlider">                      <div></div>                      <span></span>                    </div>                  </div>                  <div class="input-wrapper color-pick-wrap-widgets mt-10">                    <div class="color-pick-wrap">                      <div style="background-color: #fff;"></div>                      <input type="text" value="" class="colorpicker-selected" name="boxColor">                    </div>                    <div class="info">                      <h5>' + M.BOX_BACKGROUND_COLOR + '</h5>                    </div>                  </div>                  <div class="col20 f-left gray-section product-select-wrapper mt-10">                    <div class="col20 f-left ab-step center-vertically">                      <h4 class="roboto">' + M.SHADOW + '</h4>                      <a class="text-link blue-text" data-role="changeShadowStyles">' + M.CHANGE + "</a>                    </div>                  </div>                </div>";
                    case "storeWidgetStyling":
                        return '        <div class="popup-widget-wrapper">           <h4 class="col20 f-left mt-5 mb-25 t-center h4-bigger">' + M.PRODUCT_FEED_LOOKS + '</h4>           <div class="col20 f-left store-layouts">              <label class="image-tick-wrapper f-left">              <input type="radio" name="productLayout" value="style-1">              <span class="image-tick layout-2">&nbsp;</span>              </label>              <label class="image-tick-wrapper f-left">              <input type="radio" name="productLayout" value="product-list-style-text-over">              <span class="image-tick layout-3">&nbsp;</span>              </label>              <label class="image-tick-wrapper f-left">              <input type="radio" name="productLayout" value="style-2">              <span class="image-tick layout-4">&nbsp;</span>              </label>           </div>           <div class="f-left mt-15 col20 inline-settings vertical-flex">             <h5 class="flex-0">' + M.CONTENT_ALIGNMENT + '</h5>             <div style="margin-left: 20px;" data-role="layout-align">               <a data-role="left" class="store-layout-alignment f-left button-tooltip" data-align="justify-flex-start" data-bottom="true" data-tooltip="contentAlignLeft" data-timeout="5500"><span class="material-icons-outlined"> align_horizontal_left </span></a>               <a data-role="center" class="store-layout-alignment f-left button-tooltip" data-align="justify-center" data-bottom="true" data-tooltip="contentAlignCenter" data-timeout="5500"><span class="material-icons-outlined"> align_horizontal_center </span></a>               <a data-role="right" class="store-layout-alignment f-left button-tooltip" data-align="justify-flex-end" data-bottom="true" data-tooltip="contentAlignRight" data-timeout="5500"><span class="material-icons-outlined"> align_horizontal_right </span></a>             </div>           </div>           <div class="col20 mb-10 f-left gray-section product-select-wrapper mt-25">             <div class="col20 f-left ab-step center-vertically">               <h4 class="roboto">' + M.PRODUCT_BOX_STYLING + '</h4>               <a class="text-link blue-text" data-role="setProductBoxStyles">' + M.CHANGE + '</a>             </div>           </div>           <div class="col20 mb-10 f-left gray-section product-select-wrapper">             <div class="col20 f-left ab-step center-vertically">               <h4 class="roboto">' + M.IMAGE_SIZE_STYLING + '</h4>               <a class="text-link blue-text" data-role="setImageStyles">' + M.CHANGE + '</a>             </div>           </div>           <div class="col20 mb-10 f-left gray-section product-select-wrapper">             <div class="col20 f-left ab-step center-vertically">               <h4 class="roboto">' + M.PRODUCT_TEXT_STYLING + '</h4>               <a class="text-link blue-text" data-role="setTextStyles">' + M.CHANGE + '</a>             </div>           </div>           <div class="input-wrapper">             <div class="info" style="width: 100%; margin-top: 5px">              <h5>' + M.DISCOUNT_BADGE_TYPE + '</h5>            </div>            <select class="col20 f-left" name="discountBadgeType">              <option value="none">' + M.NONE + '</option>              <option value="text">' + M.BADGE_TYPE_SALE + '</option>              <option value="amount">' + M.BADGE_TYPE_AMOUNT + '</option>              <option value="percent">' + M.BADGE_TYPE_PERCENT + '</option>            </select>          </div>           <div class="popup-input-wrapper mt-10" >             <h5>' + M.QUICK_VIEW_BUTTON_STYLE + '</h5>              <select name="quickViewBtnStyle">               <option value="quick-view-1">' + M.REGULAR_BUTTON + '</option>               <option value="quick-view-2">' + M.ICONS + '</option>             </select>           </div>           <div class="input-wrapper none" id="sortWrapper">             <div class="info" style="width: 100%; margin-top: 5px">              <h5>' + M.STORE_DEFAULT_SORT + '</h5>            </div>            <select class="col20 f-left" name="sort">              <option value="new">' + M.SORT_BY_NEW + '</option>              <option value="a-z">' + M.SORT_BY_A_Z + '</option>              <option value="z-a">' + M.SORT_BY_Z_A + '</option>              <option value="price">' + M.SORT_BY_PRICE_LOW + '</option>              <option value="price-desc">' + M.SORT_BY_PRICE_HIGH + '</option>              <option value="sku-asc">' + M.SORT_BY_SKU_ASC + '</option>              <option value="sku">' + M.SORT_BY_SKU_DESC + "</option>            </select>          </div>         </div>";
                    case "storeWidgetSettingsMarkup":
                        return '        <div class="popup-widget-wrapper">           <h4 class="col20 f-left mt-5 mb-25 t-center h4-bigger">' + M.PRODUCT_FEED_LAYOUT + '</h4>           <ul class="option-select">            <li class="active"><a class="grid transition-bg"><span></span>' + M.GRID + '</a></li>            <li><a class="carousel transition-bg"><span></span>' + M.CAROUSEL + '</a></li>          </ul>          <div class="popup-input-wrapper" >            <div class="info">              <label>' + M.PRODUCTS_PER_ROW + '</label>             <input type="text" readonly="readonly" class="slider-val">            </div>            <div id="itemsPerRowSlider"></div>          </div>         <div class="popup-input-wrapper" >            <div class="info">              <label>' + M.PRODUCT_PADDINGS + '</label>             <input type="text" readonly="readonly" class="slider-val">            </div>            <div id="itemGapSlider"></div>          </div>         <div class="checkbox-wrapper popup-input-wrapper mb-5">             <input id="showProductName" name="showProductName" class="css-checkbox" type="checkbox">             <label for="showProductName" class="css-label">' + M.SHOW_PRODUCT_NAME + '</label>          </div>          <div class="checkbox-wrapper popup-input-wrapper mb-5">             <input id="showProductPrice" name="showProductPrice" class="css-checkbox" type="checkbox">             <label for="showProductPrice" class="css-label">' + M.SHOW_PRODUCT_PRICE + '</label>          </div>          <div class="checkbox-wrapper popup-input-wrapper mb-5">             <input id="useProductQuickView" name="useProductQuickView" class="css-checkbox" type="checkbox">             <label for="useProductQuickView" class="css-label">' + M.SHOW_PRODUCT_QUICK_VIEW + '</label>          </div>          <div class="checkbox-wrapper popup-input-wrapper mb-5">             <input id="showAddButton" name="showAddButton" class="css-checkbox" type="checkbox">             <label for="showAddButton" class="css-label">' + M.SHOW_ADD_TO_CART_BUY_BTN + '</label>          </div>          <div class="checkbox-wrapper popup-input-wrapper mb-15">             <input id="showLeftInStock" name="showLeftInStock" class="css-checkbox" type="checkbox">             <label for="showLeftInStock" class="css-label">' + M.SHOW_LEFT_IN_STOCK + '</label>          </div>          <div class="popup-input-wrapper" id="leftInStockThresholdWrapper">             <h5>' + M.SHOW_LEFT_IN_STOCK_ADD + '</h5>              <input type="number" min="1" max="9999999" step="1" name="leftInStockThreshold" />          </div>           <div class="popup-input-wrapper">             <h5>' + M.STORE_PROCESS_LBL + '</h5>              <select name="storeProcess">               <option value="cart">' + M.STORE_PROCESS_ADD_TO_CART + '</option>               <option value="buy">' + M.STORE_PROCESS_BUY_NOW + '</option>             </select>           </div>           <div class="f-left" id="carouselSettings">            <div class="checkbox-wrapper popup-input-wrapper">              <input id="autoChangeSlides" name="autoChangeSlides" class="css-checkbox" type="checkbox">              <label for="autoChangeSlides" class="css-label">' + M.CHANGE_SLIDES_AUTOMATICALLY + '</label>           </div>           <div class="popup-input-wrapper" id="autoChangeSlidesDelay" style="display: none">             <div class="info">                <label>' + M.SLIDE_DELAY + '</label>               <input type="text" readonly="readonly" class="slider-val">              </div>              <div id="autoChangeItemsTimeoutSlider"></div>            </div>         </div>           <div class="col20 mb-5 f-left gray-section product-select-wrapper">             <div class="col20 f-left ab-step center-vertically">               <h4 class="roboto">' + M.PRODUCT_FEED_LOOKS + '</h4>               <a class="text-link blue-text" data-role="editStyling">' + M.STYLE + "</a>             </div>           </div>";
                    case "storeWidgetTextStyleMarkup":
                        return '                 <div class="popup-widget-wrapper">                   <div class="col20 f-left" data-role="textLabel">                    <h4 class="col20 f-left roboto mb-15">' + M.PRODUCT_TITLE_STYLE + '</h4>                     <div class="popup-input-wrapper" >                       <div class="input-wrapper color-pick-wrap-widgets">                         <div class="color-pick-wrap">                           <div></div>                           <input type="text" value="" class="colorpicker-selected" name="textColor">                         </div>                         <div class="info">                           <h5>' + M.TEXT_COLOR + '</h5>                         </div>                       </div>                     </div>                     <div class="popup-input-wrapper" >                       <h5 class="inline">' + M.TEXT_FONT_FAMILY + '</h5>                      <select name="fontFamily"></select>                     </div>                     <div class="popup-input-wrapper input-slider-wrapper" >                       <h5 class="inline">' + M.FONT_SIZE + '</h5>                      <div data-role="textSizeSlider"></div>                       <input type="text" readonly="readonly" class="slider-val">                     </div>                     <div class="popup-input-wrapper input-slider-wrapper" >                       <h5 class="inline">' + M.LETTER_SPACING + '</h5>                      <div data-role="letterSpacingSlider"></div>                       <input type="text" readonly="readonly" class="slider-val">                     </div>                     <div class="f-left mt-15 mb-15 col20 inline-settings vertical-flex">                       <h5 class="flex-1">' + M.FONT_STYLING + '</h5>                       <div style="margin-left: 10px;" data-role="textStyles">                         <a class="column-alignment bold-icon f-left button-tooltip" data-style="bold" data-bottom="true" data-tooltip="bold"></a>                         <a class="column-alignment italic-icon f-left button-tooltip" data-style="italic" data-bottom="true" data-tooltip="italic"></a>                         <a class="column-alignment underline-icon f-left button-tooltip" data-style="underline" data-bottom="true" data-tooltip="underline"></a>                       </div>                     </div>                   </div>                  <div class="col20 f-left mt-15" data-role="priceLabel">                    <h4 class="col20 f-left roboto mb-15">' + M.PRODUCT_PRICE_STYLE + '</h4>                     <div class="popup-input-wrapper" >                       <div class="input-wrapper color-pick-wrap-widgets">                         <div class="color-pick-wrap">                           <div></div>                           <input type="text" value="" class="colorpicker-selected" name="textColor">                         </div>                         <div class="info">                           <h5>' + M.TEXT_COLOR + '</h5>                         </div>                       </div>                     </div>                     <div class="popup-input-wrapper" >                       <h5 class="inline">' + M.TEXT_FONT_FAMILY + '</h5>                      <select name="fontFamily"></select>                     </div>                     <div class="popup-input-wrapper input-slider-wrapper" >                       <h5 class="inline">' + M.FONT_SIZE + '</h5>                      <div data-role="textSizeSlider"></div>                       <input type="text" readonly="readonly" class="slider-val">                     </div>                     <div class="popup-input-wrapper input-slider-wrapper" >                       <h5 class="inline">' + M.LETTER_SPACING + '</h5>                      <div data-role="letterSpacingSlider"></div>                       <input type="text" readonly="readonly" class="slider-val">                     </div>                     <div class="f-left mt-15 mb-15 col20 inline-settings vertical-flex">                       <h5 class="flex-1">' + M.FONT_STYLING + '</h5>                       <div style="margin-left: 10px;" data-role="textStyles">                         <a class="column-alignment bold-icon f-left button-tooltip %priceTextBoldClz%" data-style="bold" data-bottom="true" data-tooltip="bold"></a>                         <a class="column-alignment italic-icon f-left button-tooltip" data-style="italic" data-bottom="true" data-tooltip="italic"></a>                         <a class="column-alignment underline-icon f-left button-tooltip" data-style="underline" data-bottom="true" data-tooltip="underline"></a>                       </div>                     </div>                   </div>                 </div>';
                    case "storeProductImageSettings":
                        return '<div class="popup-widget-wrapper">                  <div class="col20 f-left t-center mt-5">                    <span class="material-icons-outlined fingerprint-icon"> image </span>                  </div>                  <h4 class="col20 f-left mt-15 mb-10 t-center h4-bigger">' + M.PRODUCT_IMAGE_STYLING + '</h4>                  <span class="light-gray-text t-center col20 f-left mb-25 padded-text">' + M.PRODUCT_IMAGE_STYLING_DISCLAIMER + '</span>                  <div class="f-left mb-15 col20 flex flex-col align-center">                    <h5 class="col20 f-left t-center mb-10" style="font-size: 17px;">' + M.IMAGE_ALIGNMENT + '</h5>                    <div class="big-align-buttons" data-role="image-align">                      <a class="column-alignment top-icon f-left button-tooltip" data-align="image-align-start" data-bottom="true" data-tooltip="columnAlignTop" data-timeout="5500"></a>                      <a class="column-alignment middle-icon f-left button-tooltip" data-align="image-align-center" data-bottom="true" data-tooltip="columnAlignMiddle" data-timeout="5500"></a>                      <a class="column-alignment bottom-icon f-left button-tooltip" data-align="image-align-end" data-bottom="true" data-tooltip="columnAlignBottom" data-timeout="5500"></a>                    </div>                  </div>                  <div class="input-wrapper input-wrapper-margin color-pick-wrap-widgets">                    <div class="color-pick-wrap">                      <div></div>                      <input type="text" value="" class="colorpicker-selected" name="imageBgColor">                    </div>                    <div class="info">                      <h5>' + M.BACKGROUND_COLOR + '</h5>                    </div>                  </div>                  <div class="info input-slider-wrapper mt-15">                    <h5 class="ta-left">' + M.PADDING + '<span class="slider-val f-right"></span></h5>                    <div data-role="paddingSlider">                      <div></div>                      <span></span>                    </div>                    <input type="text" readonly="readonly" class="slider-val modify">                  </div>                  <div class="popup-input-wrapper f-left mt-15">                    <div class="info">                      <h5>' + M.IMAGE_THUMB_POSITION + '</h5>                    </div>                    <select class="page-select" name="thumbPosition">                      <option value="left">' + M.LEFT + '</option>                      <option value="right">' + M.RIGHT + '</option>                      <option value="bottom">' + M.BOTTOM + '</option>                    </select>                  </div>                  <div class="col20 f-left">                    <div class="checkbox-wrapper">                      <input id="showLensZoom" class="css-checkbox" type="checkbox" name="showLensZoom" />                      <label for="showLensZoom" class="css-label">' + M.USE_LENS_ZOOM + "</label>                    </div>                  </div>                </div>";
                    case "storeProductInfoSettings":
                        return '<div class="popup-widget-wrapper">                  <div class="col20 f-left t-center mt-5">                    <span class="material-icons-outlined fingerprint-icon"> brush </span>                  </div>                  <h4 class="col20 f-left mt-15 mb-10 t-center h4-bigger">' + M.PRODUCT_DETAILS_STYLING + '</h4>                  <span class="light-gray-text t-center col20 f-left mb-25 padded-text">' + M.PRODUCT_IMAGE_STYLING_DISCLAIMER + '</span>                  <div class="input-wrapper input-wrapper-margin color-pick-wrap-widgets">                    <div class="color-pick-wrap">                      <div></div>                      <input type="text" value="" class="colorpicker-selected" name="bgColor">                    </div>                    <div class="info">                      <h5>' + M.BACKGROUND_COLOR + "</h5>                      <span>" + M.PRODUCT_BG_COLOR_DESC + '</span>                    </div>                  </div>                  <div class="input-wrapper input-wrapper-margin color-pick-wrap-widgets">                    <div class="color-pick-wrap">                      <div></div>                      <input type="text" value="" class="colorpicker-selected" name="activeColor">                    </div>                    <div class="info">                      <h5>' + M.ACTIVE_COLOR + "</h5>                      <span>" + M.ACTIVE_COLOR_DESC + '</span>                    </div>                  </div>                  <div class="info input-slider-wrapper input-slider-wrapper-bigger mt-15">                    <h5 class="ta-left">' + M.PRODUCT_DETAILS_PADDING + '<span class="slider-val f-right"></span></h5>                    <div data-role="paddingSlider">                      <div></div>                      <span tabindex="0"></span>                    </div>                    <input type="text" readonly="readonly" class="slider-val modify">                  </div>                  <div class="info input-slider-wrapper input-slider-wrapper-bigger">                    <h5 class="ta-left">' + M.BORDER_RADIUS + '<span class="slider-val f-right"></span></h5>                    <div data-role="radiusSlider">                      <div></div>                      <span tabindex="0"></span>                    </div>                    <input type="text" readonly="readonly" class="slider-val modify">                  </div>                  <div class="col20 mt-15 mb-10 f-left gray-section product-select-wrapper">                    <div class="col20 f-left ab-step center-vertically">                      <h4 class="roboto">' + M.PRODUCT_TEXT_STYLING + '</h4>                      <a class="text-link blue-text" data-role="setTextStyles">' + M.STYLE + '</a>                    </div>                  </div>                  <div class="col20 mb-10 f-left gray-section product-select-wrapper" data-role="margins-wrapper">                    <div class="col20 f-left ab-step center-vertically">                      <h4 class="roboto">' + M.PRODUCT_DESCRIPTION_MARGINS + '</h4>                      <a class="text-link blue-text" data-role="setMarginStyles">' + M.CHANGE + '</a>                    </div>                  </div>                  <div class="col20 f-left gray-section product-select-wrapper">                    <div class="col20 f-left ab-step center-vertically">                      <h4 class="roboto">' + M.SHADOW + '</h4>                      <a class="text-link blue-text" data-role="changeShadowStyles">' + M.CHANGE + "</a>                    </div>                  </div>                </div>";
                    case "storeWidgetInfoMarginsMarkup":
                        return '                 <div class="popup-widget-wrapper">                  <div class="col20 f-left t-center mt-5">                    <span class="material-icons-outlined fingerprint-icon"> brush </span>                  </div>                  <h4 class="col20 f-left mt-15 mb-10 t-center h4-bigger">' + M.PRODUCT_DESCRIPTION_MARGINS + '</h4>                  <span class="light-gray-text t-center col20 f-left mb-25 padded-text">' + M.PRODUCT_DESCRIPTION_MARGINS_DESC + '</span>                  <div class="popup-input-wrapper input-slider-wrapper" >                     <h5 class="inline">' + M.TOP + '</h5>                    <div data-role="margin-top"></div>                     <input type="text" readonly="readonly" class="slider-val">                   </div>                   <div class="popup-input-wrapper input-slider-wrapper" >                     <h5 class="inline">' + M.BOTTOM + '</h5>                    <div data-role="margin-bottom"></div>                     <input type="text" readonly="readonly" class="slider-val">                   </div>                   <div class="popup-input-wrapper input-slider-wrapper" >                     <h5 class="inline">' + M.LEFT_RIGHT + '</h5>                    <div data-role="margin-left"></div>                     <input type="text" readonly="readonly" class="slider-val">                   </div>                 </div>';
                    case "columnSettingsBgEffectMarkup":
                        return '<div class="popup-widget-wrapper">                   <div class="f20 noParallaxWrapper">                    <div class="input-wrapper input-wrapper-margin color-pick-wrap-widgets">                       <div class="color-pick-wrap">                         <div></div>                         <input type="text" value="" class="colorpicker-selected" name="color">                       </div>                       <div class="info">                         <h5>' + M.COLOR + '</h5>                       </div>                     </div>                     <div class="popup-input-wrapper f-left mt-10">                      <div class="info">                        <h5>' + M.TILT_POSITION + '</h5>                      </div>                      <select class="page-select" name="position">                        <option value="left">' + M.POS_AT_LEFT + '</option>                        <option value="right">' + M.POS_AT_RIGHT + '</option>                      </select>                    </div>                    <div class="popup-input-wrapper f-left">                      <div class="info">                        <h5>' + M.TILT_DIRECTION + '</h5>                      </div>                      <select class="page-select" name="direction">                        <option value="wide-top">' + M.START_FROM_TOP + '</option>                        <option value="wide-bottom">' + M.START_FROM_BOTTOM + "</option>                      </select>                    </div>                  </div>                </div>";
                    case "columnDividerMarkup":
                        return '<div class="column-divider %clz%">                  <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="none" x="0px" y="0px" viewBox="0 0 1921 273" xml:space="preserve">                  <polygon points="0,273 1921,273 1921,0 " fill="%color%"></polygon>                  </svg>                </div>';
                    case "widgetContainerBoxStyling":
                        return "";
                    case "aiIcon":
                        return '<svg xmlns="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.0" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 48 48"><path d="M19.25 42q-2.55 0-4.325-1.9-1.775-1.9-2.025-4.3-2.95-.25-4.925-2.475Q6 31.1 6 27.9q0-1.1.275-2.125T7.1 23.8q-.55-.9-.825-1.9Q6 20.9 6 19.75q0-3 2.075-5.15Q10.15 12.45 13 12.1q.1-2.55 1.925-4.325Q16.75 6 19.3 6q1.45 0 2.575.525Q23 7.05 24 8.05q1-1 2.1-1.525Q27.2 6 28.65 6q2.5 0 4.3 1.775 1.8 1.775 1.95 4.325 2.9.25 5 2.425T42 19.75q0 1.15-.3 2.175t-.85 1.925q.55 1 .85 2.1.3 1.1.3 2.15 0 3.2-1.975 5.325T35.1 35.8q-.25 2.4-2.05 4.3-1.8 1.9-4.3 1.9-1.5 0-2.6-.5T24 40q-1.05 1-2.15 1.5-1.1.5-2.6.5Zm6.25-30v24q0 1.25.975 2.125T28.8 39q1.3 0 2.25-1.15t1.05-2.35q-1.15-.4-2.15-1.075-1-.675-1.7-1.675-.4-.55-.3-1.125.1-.575.65-.975t1.125-.3q.575.1.975.65.65.9 1.6 1.375.95.475 2.1.475 1.9 0 3.25-1.3T39 28.1q0-.45-.1-.925-.1-.475-.2-.975-.9.65-1.975.975-1.075.325-2.225.325-.65 0-1.075-.425Q33 26.65 33 26q0-.65.425-1.075.425-.425 1.075-.425 1.9 0 3.2-1.4 1.3-1.4 1.3-3.35 0-1.9-1.4-3.25t-3.2-1.45q-.5 1.2-1.425 2.125T30.85 18.55q-.6.25-1.15-.025-.55-.275-.75-.875-.2-.6.05-1.175.25-.575.85-.775.9-.3 1.475-1.2.575-.9.575-2.05 0-1.45-.95-2.45Q30 9 28.7 9t-2.25.875q-.95.875-.95 2.125Zm-3 24V12q0-1.25-.925-2.125T19.3 9q-1.3 0-2.275 1-.975 1-.975 2.45 0 1.15.55 2.025t1.45 1.175q.6.2.875.775T19 17.55q-.25.6-.825.9-.575.3-1.175.05-1.2-.4-2.1-1.325-.9-.925-1.4-2.125-1.75.15-3.125 1.475Q9 17.85 9 19.75q0 1.95 1.3 3.35 1.3 1.4 3.2 1.4.65 0 1.075.425Q15 25.35 15 26q0 .65-.425 1.075-.425.425-1.075.425-1.15 0-2.225-.35Q10.2 26.8 9.3 26.2q-.15.4-.225.85-.075.45-.075.9 0 2.15 1.325 3.525t3.225 1.375q1.1 0 2.075-.5.975-.5 1.625-1.35.4-.5 1-.625t1.1.275q.5.4.625 1t-.275 1.1q-.7 1-1.675 1.675-.975.675-2.125 1.075.1 1.2 1.05 2.35.95 1.15 2.3 1.15 1.35 0 2.3-.875.95-.875.95-2.125ZM24 24Z"/></svg>';
                    case "textEditorTextAssistBtn":
                        return '<div class="flex align-center">' + Templates.get("aiIcon") + " AI</span></div>"
                }
            }(t), e[t] = i, i)
        }
    }
}();
/*!
 * jQuery JavaScript Library http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 */
if (window.jQuery ? ((console || {}).warn || function () { })("jQuery imported from third-party sources. Will not include it second time!") : function (e, t) {
    "object" == typeof module && "object" == typeof module.exports ? module.exports = e.document ? t(e, !0) : function (e) {
        if (!e.document) throw new Error("jQuery requires a window with a document");
        return t(e)
    } : t(e)
}("undefined" != typeof window ? window : this, (function (e, t) {
    var i = [],
        n = e.document,
        a = i.slice,
        s = i.concat,
        o = i.push,
        r = i.indexOf,
        l = {},
        c = l.toString,
        d = l.hasOwnProperty,
        p = {},
        u = "3.6.0",
        h = function (e, t) {
            return new h.fn.init(e, t)
        },
        f = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
        m = /^-ms-/,
        g = /-([\da-z])/gi,
        v = function (e, t) {
            return t.toUpperCase()
        };

    function b(e) {
        var t = !!e && "length" in e && e.length,
            i = h.type(e);
        return "function" !== i && !h.isWindow(e) && ("array" === i || 0 === t || "number" == typeof t && t > 0 && t - 1 in e)
    }
    h.fn = h.prototype = {
        jquery: u,
        constructor: h,
        selector: "",
        length: 0,
        toArray: function () {
            return a.call(this)
        },
        get: function (e) {
            return null != e ? e < 0 ? this[e + this.length] : this[e] : a.call(this)
        },
        pushStack: function (e) {
            var t = h.merge(this.constructor(), e);
            return t.prevObject = this, t.context = this.context, t
        },
        each: function (e) {
            return h.each(this, e)
        },
        map: function (e) {
            return this.pushStack(h.map(this, (function (t, i) {
                return e.call(t, i, t)
            })))
        },
        slice: function () {
            return this.pushStack(a.apply(this, arguments))
        },
        first: function () {
            return this.eq(0)
        },
        last: function () {
            return this.eq(-1)
        },
        eq: function (e) {
            var t = this.length,
                i = +e + (e < 0 ? t : 0);
            return this.pushStack(i >= 0 && i < t ? [this[i]] : [])
        },
        end: function () {
            return this.prevObject || this.constructor()
        },
        push: o,
        sort: i.sort,
        splice: i.splice
    }, h.extend = h.fn.extend = function () {
        var e, t, i, n, a, s, o = arguments[0] || {},
            r = 1,
            l = arguments.length,
            c = !1;
        for ("boolean" == typeof o && (c = o, o = arguments[r] || {}, r++), "object" == typeof o || h.isFunction(o) || (o = {}), r === l && (o = this, r--); r < l; r++)
            if (null != (e = arguments[r]))
                for (t in e) i = o[t], o !== (n = e[t]) && (c && n && (h.isPlainObject(n) || (a = h.isArray(n))) ? (a ? (a = !1, s = i && h.isArray(i) ? i : []) : s = i && h.isPlainObject(i) ? i : {}, o[t] = h.extend(c, s, n)) : void 0 !== n && (o[t] = n));
        return o
    }, h.extend({
        expando: "jQuery" + (u + Math.random()).replace(/\D/g, ""),
        isReady: !0,
        error: function (e) {
            throw new Error(e)
        },
        noop: function () { },
        isFunction: function (e) {
            return "function" === h.type(e)
        },
        isArray: Array.isArray,
        isWindow: function (e) {
            return null != e && e === e.window
        },
        isNumeric: function (e) {
            var t = e && e.toString();
            return !h.isArray(e) && t - parseFloat(t) + 1 >= 0
        },
        isPlainObject: function (e) {
            var t;
            if ("object" !== h.type(e) || e.nodeType || h.isWindow(e)) return !1;
            if (e.constructor && !d.call(e, "constructor") && !d.call(e.constructor.prototype || {}, "isPrototypeOf")) return !1;
            for (t in e);
            return void 0 === t || d.call(e, t)
        },
        isEmptyObject: function (e) {
            var t;
            for (t in e) return !1;
            return !0
        },
        type: function (e) {
            return null == e ? e + "" : "object" == typeof e || "function" == typeof e ? l[c.call(e)] || "object" : typeof e
        },
        globalEval: function (e) {
            var t, i = eval;
            (e = h.trim(e)) && (1 === e.indexOf("use strict") ? ((t = n.createElement("script")).text = e, n.head.appendChild(t).parentNode.removeChild(t)) : i(e))
        },
        camelCase: function (e) {
            return e.replace(m, "ms-").replace(g, v)
        },
        nodeName: function (e, t) {
            return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase()
        },
        each: function (e, t) {
            var i, n = 0;
            if (b(e))
                for (i = e.length; n < i && !1 !== t.call(e[n], n, e[n]); n++);
            else
                for (n in e)
                    if (!1 === t.call(e[n], n, e[n])) break;
            return e
        },
        trim: function (e) {
            return null == e ? "" : (e + "").replace(f, "")
        },
        makeArray: function (e, t) {
            var i = t || [];
            return null != e && (b(Object(e)) ? h.merge(i, "string" == typeof e ? [e] : e) : o.call(i, e)), i
        },
        inArray: function (e, t, i) {
            return null == t ? -1 : r.call(t, e, i)
        },
        merge: function (e, t) {
            for (var i = +t.length, n = 0, a = e.length; n < i; n++) e[a++] = t[n];
            return e.length = a, e
        },
        grep: function (e, t, i) {
            for (var n = [], a = 0, s = e.length, o = !i; a < s; a++) !t(e[a], a) !== o && n.push(e[a]);
            return n
        },
        map: function (e, t, i) {
            var n, a, o = 0,
                r = [];
            if (b(e))
                for (n = e.length; o < n; o++) null != (a = t(e[o], o, i)) && r.push(a);
            else
                for (o in e) null != (a = t(e[o], o, i)) && r.push(a);
            return s.apply([], r)
        },
        guid: 1,
        proxy: function (e, t) {
            var i, n, s;
            if ("string" == typeof t && (i = e[t], t = e, e = i), h.isFunction(e)) return n = a.call(arguments, 2), s = function () {
                return e.apply(t || this, n.concat(a.call(arguments)))
            }, s.guid = e.guid = e.guid || h.guid++, s
        },
        now: Date.now,
        support: p
    }), "function" == typeof Symbol && (h.fn[Symbol.iterator] = i[Symbol.iterator]), h.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "), (function (e, t) {
        l["[object " + t + "]"] = t.toLowerCase()
    }));
    var y =
        /*!
         * Sizzle CSS Selector Engine v2.2.1
         * http://sizzlejs.com/
         *
         * Copyright jQuery Foundation and other contributors
         * Released under the MIT license
         * http://jquery.org/license
         *
         * Date: 2015-10-17
         */
        function (e) {
            var t, i, n, a, s, o, r, l, c, d, p, u, h, f, m, g, v, b, y, w = "sizzle" + 1 * new Date,
                _ = e.document,
                T = 0,
                C = 0,
                k = se(),
                E = se(),
                x = se(),
                S = function (e, t) {
                    return e === t && (p = !0), 0
                },
                M = 1 << 31,
                P = {}.hasOwnProperty,
                I = [],
                O = I.pop,
                A = I.push,
                L = I.push,
                D = I.slice,
                N = function (e, t) {
                    for (var i = 0, n = e.length; i < n; i++)
                        if (e[i] === t) return i;
                    return -1
                },
                R = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
                W = "[\\x20\\t\\r\\n\\f]",
                F = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",
                B = "\\[" + W + "*(" + F + ")(?:" + W + "*([*^$|!~]?=)" + W + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + F + "))|)" + W + "*\\]",
                U = ":(" + F + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + B + ")*)|.*)\\)|)",
                H = new RegExp(W + "+", "g"),
                z = new RegExp("^" + W + "+|((?:^|[^\\\\])(?:\\\\.)*)" + W + "+$", "g"),
                G = new RegExp("^" + W + "*," + W + "*"),
                $ = new RegExp("^" + W + "*([>+~]|" + W + ")" + W + "*"),
                q = new RegExp("=" + W + "*([^\\]'\"]*?)" + W + "*\\]", "g"),
                j = new RegExp(U),
                V = new RegExp("^" + F + "$"),
                Y = {
                    ID: new RegExp("^#(" + F + ")"),
                    CLASS: new RegExp("^\\.(" + F + ")"),
                    TAG: new RegExp("^(" + F + "|[*])"),
                    ATTR: new RegExp("^" + B),
                    PSEUDO: new RegExp("^" + U),
                    CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + W + "*(even|odd|(([+-]|)(\\d*)n|)" + W + "*(?:([+-]|)" + W + "*(\\d+)|))" + W + "*\\)|)", "i"),
                    bool: new RegExp("^(?:" + R + ")$", "i"),
                    needsContext: new RegExp("^" + W + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + W + "*((?:-\\d)?\\d*)" + W + "*\\)|)(?=[^-]|$)", "i")
                },
                K = /^(?:input|select|textarea|button)$/i,
                X = /^h\d$/i,
                Q = /^[^{]+\{\s*\[native \w/,
                J = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
                Z = /[+~]/,
                ee = /'|\\/g,
                te = new RegExp("\\\\([\\da-f]{1,6}" + W + "?|(" + W + ")|.)", "ig"),
                ie = function (e, t, i) {
                    var n = "0x" + t - 65536;
                    return n != n || i ? t : n < 0 ? String.fromCharCode(n + 65536) : String.fromCharCode(n >> 10 | 55296, 1023 & n | 56320)
                },
                ne = function () {
                    u()
                };
            try {
                L.apply(I = D.call(_.childNodes), _.childNodes), I[_.childNodes.length].nodeType
            } catch (e) {
                L = {
                    apply: I.length ? function (e, t) {
                        A.apply(e, D.call(t))
                    } : function (e, t) {
                        for (var i = e.length, n = 0; e[i++] = t[n++];);
                        e.length = i - 1
                    }
                }
            }

            function ae(e, t, n, a) {
                var s, r, c, d, p, f, v, b, T = t && t.ownerDocument,
                    C = t ? t.nodeType : 9;
                if (n = n || [], "string" != typeof e || !e || 1 !== C && 9 !== C && 11 !== C) return n;
                if (!a && ((t ? t.ownerDocument || t : _) !== h && u(t), t = t || h, m)) {
                    if (11 !== C && (f = J.exec(e)))
                        if (s = f[1]) {
                            if (9 === C) {
                                if (!(c = t.getElementById(s))) return n;
                                if (c.id === s) return n.push(c), n
                            } else if (T && (c = T.getElementById(s)) && y(t, c) && c.id === s) return n.push(c), n
                        } else {
                            if (f[2]) return L.apply(n, t.getElementsByTagName(e)), n;
                            if ((s = f[3]) && i.getElementsByClassName && t.getElementsByClassName) return L.apply(n, t.getElementsByClassName(s)), n
                        } if (i.qsa && !x[e + " "] && (!g || !g.test(e))) {
                            if (1 !== C) T = t, b = e;
                            else if ("object" !== t.nodeName.toLowerCase()) {
                                for ((d = t.getAttribute("id")) ? d = d.replace(ee, "\\$&") : t.setAttribute("id", d = w), r = (v = o(e)).length, p = V.test(d) ? "#" + d : "[id='" + d + "']"; r--;) v[r] = p + " " + me(v[r]);
                                b = v.join(","), T = Z.test(e) && he(t.parentNode) || t
                            }
                            if (b) try {
                                return L.apply(n, T.querySelectorAll(b)), n
                            } catch (e) { } finally {
                                    d === w && t.removeAttribute("id")
                                }
                        }
                }
                return l(e.replace(z, "$1"), t, n, a)
            }

            function se() {
                var e = [];
                return function t(i, a) {
                    return e.push(i + " ") > n.cacheLength && delete t[e.shift()], t[i + " "] = a
                }
            }

            function oe(e) {
                return e[w] = !0, e
            }

            function re(e) {
                var t = h.createElement("div");
                try {
                    return !!e(t)
                } catch (e) {
                    return !1
                } finally {
                    t.parentNode && t.parentNode.removeChild(t), t = null
                }
            }

            function le(e, t) {
                for (var i = e.split("|"), a = i.length; a--;) n.attrHandle[i[a]] = t
            }

            function ce(e, t) {
                var i = t && e,
                    n = i && 1 === e.nodeType && 1 === t.nodeType && (~t.sourceIndex || M) - (~e.sourceIndex || M);
                if (n) return n;
                if (i)
                    for (; i = i.nextSibling;)
                        if (i === t) return -1;
                return e ? 1 : -1
            }

            function de(e) {
                return function (t) {
                    return "input" === t.nodeName.toLowerCase() && t.type === e
                }
            }

            function pe(e) {
                return function (t) {
                    var i = t.nodeName.toLowerCase();
                    return ("input" === i || "button" === i) && t.type === e
                }
            }

            function ue(e) {
                return oe((function (t) {
                    return t = +t, oe((function (i, n) {
                        for (var a, s = e([], i.length, t), o = s.length; o--;) i[a = s[o]] && (i[a] = !(n[a] = i[a]))
                    }))
                }))
            }

            function he(e) {
                return e && void 0 !== e.getElementsByTagName && e
            }
            for (t in i = ae.support = {}, s = ae.isXML = function (e) {
                var t = e && (e.ownerDocument || e).documentElement;
                return !!t && "HTML" !== t.nodeName
            }, u = ae.setDocument = function (e) {
                var t, a, o = e ? e.ownerDocument || e : _;
                return o !== h && 9 === o.nodeType && o.documentElement ? (f = (h = o).documentElement, m = !s(h), (a = h.defaultView) && a.top !== a && (a.addEventListener ? a.addEventListener("unload", ne, !1) : a.attachEvent && a.attachEvent("onunload", ne)), i.attributes = re((function (e) {
                    return e.className = "i", !e.getAttribute("className")
                })), i.getElementsByTagName = re((function (e) {
                    return e.appendChild(h.createComment("")), !e.getElementsByTagName("*").length
                })), i.getElementsByClassName = Q.test(h.getElementsByClassName), i.getById = re((function (e) {
                    return f.appendChild(e).id = w, !h.getElementsByName || !h.getElementsByName(w).length
                })), i.getById ? (n.find.ID = function (e, t) {
                    if (void 0 !== t.getElementById && m) {
                        var i = t.getElementById(e);
                        return i ? [i] : []
                    }
                }, n.filter.ID = function (e) {
                    var t = e.replace(te, ie);
                    return function (e) {
                        return e.getAttribute("id") === t
                    }
                }) : (delete n.find.ID, n.filter.ID = function (e) {
                    var t = e.replace(te, ie);
                    return function (e) {
                        var i = void 0 !== e.getAttributeNode && e.getAttributeNode("id");
                        return i && i.value === t
                    }
                }), n.find.TAG = i.getElementsByTagName ? function (e, t) {
                    return void 0 !== t.getElementsByTagName ? t.getElementsByTagName(e) : i.qsa ? t.querySelectorAll(e) : void 0
                } : function (e, t) {
                    var i, n = [],
                        a = 0,
                        s = t.getElementsByTagName(e);
                    if ("*" === e) {
                        for (; i = s[a++];) 1 === i.nodeType && n.push(i);
                        return n
                    }
                    return s
                }, n.find.CLASS = i.getElementsByClassName && function (e, t) {
                    if (void 0 !== t.getElementsByClassName && m) return t.getElementsByClassName(e)
                }, v = [], g = [], (i.qsa = Q.test(h.querySelectorAll)) && (re((function (e) {
                    f.appendChild(e).innerHTML = "<a id='" + w + "'></a><select id='" + w + "-\r\\' msallowcapture=''><option selected=''></option></select>", e.querySelectorAll("[msallowcapture^='']").length && g.push("[*^$]=" + W + "*(?:''|\"\")"), e.querySelectorAll("[selected]").length || g.push("\\[" + W + "*(?:value|" + R + ")"), e.querySelectorAll("[id~=" + w + "-]").length || g.push("~="), e.querySelectorAll(":checked").length || g.push(":checked"), e.querySelectorAll("a#" + w + "+*").length || g.push(".#.+[+~]")
                })), re((function (e) {
                    var t = h.createElement("input");
                    t.setAttribute("type", "hidden"), e.appendChild(t).setAttribute("name", "D"), e.querySelectorAll("[name=d]").length && g.push("name" + W + "*[*^$|!~]?="), e.querySelectorAll(":enabled").length || g.push(":enabled", ":disabled"), e.querySelectorAll("*,:x"), g.push(",.*:")
                }))), (i.matchesSelector = Q.test(b = f.matches || f.webkitMatchesSelector || f.mozMatchesSelector || f.oMatchesSelector || f.msMatchesSelector)) && re((function (e) {
                    i.disconnectedMatch = b.call(e, "div"), b.call(e, "[s!='']:x"), v.push("!=", U)
                })), g = g.length && new RegExp(g.join("|")), v = v.length && new RegExp(v.join("|")), t = Q.test(f.compareDocumentPosition), y = t || Q.test(f.contains) ? function (e, t) {
                    var i = 9 === e.nodeType ? e.documentElement : e,
                        n = t && t.parentNode;
                    return e === n || !(!n || 1 !== n.nodeType || !(i.contains ? i.contains(n) : e.compareDocumentPosition && 16 & e.compareDocumentPosition(n)))
                } : function (e, t) {
                    if (t)
                        for (; t = t.parentNode;)
                            if (t === e) return !0;
                    return !1
                }, S = t ? function (e, t) {
                    if (e === t) return p = !0, 0;
                    var n = !e.compareDocumentPosition - !t.compareDocumentPosition;
                    return n || (1 & (n = (e.ownerDocument || e) === (t.ownerDocument || t) ? e.compareDocumentPosition(t) : 1) || !i.sortDetached && t.compareDocumentPosition(e) === n ? e === h || e.ownerDocument === _ && y(_, e) ? -1 : t === h || t.ownerDocument === _ && y(_, t) ? 1 : d ? N(d, e) - N(d, t) : 0 : 4 & n ? -1 : 1)
                } : function (e, t) {
                    if (e === t) return p = !0, 0;
                    var i, n = 0,
                        a = e.parentNode,
                        s = t.parentNode,
                        o = [e],
                        r = [t];
                    if (!a || !s) return e === h ? -1 : t === h ? 1 : a ? -1 : s ? 1 : d ? N(d, e) - N(d, t) : 0;
                    if (a === s) return ce(e, t);
                    for (i = e; i = i.parentNode;) o.unshift(i);
                    for (i = t; i = i.parentNode;) r.unshift(i);
                    for (; o[n] === r[n];) n++;
                    return n ? ce(o[n], r[n]) : o[n] === _ ? -1 : r[n] === _ ? 1 : 0
                }, h) : h
            }, ae.matches = function (e, t) {
                return ae(e, null, null, t)
            }, ae.matchesSelector = function (e, t) {
                if ((e.ownerDocument || e) !== h && u(e), t = t.replace(q, "='$1']"), i.matchesSelector && m && !x[t + " "] && (!v || !v.test(t)) && (!g || !g.test(t))) try {
                    var n = b.call(e, t);
                    if (n || i.disconnectedMatch || e.document && 11 !== e.document.nodeType) return n
                } catch (e) { }
                return ae(t, h, null, [e]).length > 0
            }, ae.contains = function (e, t) {
                return (e.ownerDocument || e) !== h && u(e), y(e, t)
            }, ae.attr = function (e, t) {
                (e.ownerDocument || e) !== h && u(e);
                var a = n.attrHandle[t.toLowerCase()],
                    s = a && P.call(n.attrHandle, t.toLowerCase()) ? a(e, t, !m) : void 0;
                return void 0 !== s ? s : i.attributes || !m ? e.getAttribute(t) : (s = e.getAttributeNode(t)) && s.specified ? s.value : null
            }, ae.error = function (e) {
                throw new Error("Syntax error, unrecognized expression: " + e)
            }, ae.uniqueSort = function (e) {
                var t, n = [],
                    a = 0,
                    s = 0;
                if (p = !i.detectDuplicates, d = !i.sortStable && e.slice(0), e.sort(S), p) {
                    for (; t = e[s++];) t === e[s] && (a = n.push(s));
                    for (; a--;) e.splice(n[a], 1)
                }
                return d = null, e
            }, a = ae.getText = function (e) {
                var t, i = "",
                    n = 0,
                    s = e.nodeType;
                if (s) {
                    if (1 === s || 9 === s || 11 === s) {
                        if ("string" == typeof e.textContent) return e.textContent;
                        for (e = e.firstChild; e; e = e.nextSibling) i += a(e)
                    } else if (3 === s || 4 === s) return e.nodeValue
                } else
                    for (; t = e[n++];) i += a(t);
                return i
            }, n = ae.selectors = {
                cacheLength: 50,
                createPseudo: oe,
                match: Y,
                attrHandle: {},
                find: {},
                relative: {
                    ">": {
                        dir: "parentNode",
                        first: !0
                    },
                    " ": {
                        dir: "parentNode"
                    },
                    "+": {
                        dir: "previousSibling",
                        first: !0
                    },
                    "~": {
                        dir: "previousSibling"
                    }
                },
                preFilter: {
                    ATTR: function (e) {
                        return e[1] = e[1].replace(te, ie), e[3] = (e[3] || e[4] || e[5] || "").replace(te, ie), "~=" === e[2] && (e[3] = " " + e[3] + " "), e.slice(0, 4)
                    },
                    CHILD: function (e) {
                        return e[1] = e[1].toLowerCase(), "nth" === e[1].slice(0, 3) ? (e[3] || ae.error(e[0]), e[4] = +(e[4] ? e[5] + (e[6] || 1) : 2 * ("even" === e[3] || "odd" === e[3])), e[5] = +(e[7] + e[8] || "odd" === e[3])) : e[3] && ae.error(e[0]), e
                    },
                    PSEUDO: function (e) {
                        var t, i = !e[6] && e[2];
                        return Y.CHILD.test(e[0]) ? null : (e[3] ? e[2] = e[4] || e[5] || "" : i && j.test(i) && (t = o(i, !0)) && (t = i.indexOf(")", i.length - t) - i.length) && (e[0] = e[0].slice(0, t), e[2] = i.slice(0, t)), e.slice(0, 3))
                    }
                },
                filter: {
                    TAG: function (e) {
                        var t = e.replace(te, ie).toLowerCase();
                        return "*" === e ? function () {
                            return !0
                        } : function (e) {
                            return e.nodeName && e.nodeName.toLowerCase() === t
                        }
                    },
                    CLASS: function (e) {
                        var t = k[e + " "];
                        return t || (t = new RegExp("(^|" + W + ")" + e + "(" + W + "|$)")) && k(e, (function (e) {
                            return t.test("string" == typeof e.className && e.className || void 0 !== e.getAttribute && e.getAttribute("class") || "")
                        }))
                    },
                    ATTR: function (e, t, i) {
                        return function (n) {
                            var a = ae.attr(n, e);
                            return null == a ? "!=" === t : !t || (a += "", "=" === t ? a === i : "!=" === t ? a !== i : "^=" === t ? i && 0 === a.indexOf(i) : "*=" === t ? i && a.indexOf(i) > -1 : "$=" === t ? i && a.slice(-i.length) === i : "~=" === t ? (" " + a.replace(H, " ") + " ").indexOf(i) > -1 : "|=" === t && (a === i || a.slice(0, i.length + 1) === i + "-"))
                        }
                    },
                    CHILD: function (e, t, i, n, a) {
                        var s = "nth" !== e.slice(0, 3),
                            o = "last" !== e.slice(-4),
                            r = "of-type" === t;
                        return 1 === n && 0 === a ? function (e) {
                            return !!e.parentNode
                        } : function (t, i, l) {
                            var c, d, p, u, h, f, m = s !== o ? "nextSibling" : "previousSibling",
                                g = t.parentNode,
                                v = r && t.nodeName.toLowerCase(),
                                b = !l && !r,
                                y = !1;
                            if (g) {
                                if (s) {
                                    for (; m;) {
                                        for (u = t; u = u[m];)
                                            if (r ? u.nodeName.toLowerCase() === v : 1 === u.nodeType) return !1;
                                        f = m = "only" === e && !f && "nextSibling"
                                    }
                                    return !0
                                }
                                if (f = [o ? g.firstChild : g.lastChild], o && b) {
                                    for (y = (h = (c = (d = (p = (u = g)[w] || (u[w] = {}))[u.uniqueID] || (p[u.uniqueID] = {}))[e] || [])[0] === T && c[1]) && c[2], u = h && g.childNodes[h]; u = ++h && u && u[m] || (y = h = 0) || f.pop();)
                                        if (1 === u.nodeType && ++y && u === t) {
                                            d[e] = [T, h, y];
                                            break
                                        }
                                } else if (b && (y = h = (c = (d = (p = (u = t)[w] || (u[w] = {}))[u.uniqueID] || (p[u.uniqueID] = {}))[e] || [])[0] === T && c[1]), !1 === y)
                                    for (;
                                        (u = ++h && u && u[m] || (y = h = 0) || f.pop()) && ((r ? u.nodeName.toLowerCase() !== v : 1 !== u.nodeType) || !++y || (b && ((d = (p = u[w] || (u[w] = {}))[u.uniqueID] || (p[u.uniqueID] = {}))[e] = [T, y]), u !== t)););
                                return (y -= a) === n || y % n == 0 && y / n >= 0
                            }
                        }
                    },
                    PSEUDO: function (e, t) {
                        var i, a = n.pseudos[e] || n.setFilters[e.toLowerCase()] || ae.error("unsupported pseudo: " + e);
                        return a[w] ? a(t) : a.length > 1 ? (i = [e, e, "", t], n.setFilters.hasOwnProperty(e.toLowerCase()) ? oe((function (e, i) {
                            for (var n, s = a(e, t), o = s.length; o--;) e[n = N(e, s[o])] = !(i[n] = s[o])
                        })) : function (e) {
                            return a(e, 0, i)
                        }) : a
                    }
                },
                pseudos: {
                    not: oe((function (e) {
                        var t = [],
                            i = [],
                            n = r(e.replace(z, "$1"));
                        return n[w] ? oe((function (e, t, i, a) {
                            for (var s, o = n(e, null, a, []), r = e.length; r--;)(s = o[r]) && (e[r] = !(t[r] = s))
                        })) : function (e, a, s) {
                            return t[0] = e, n(t, null, s, i), t[0] = null, !i.pop()
                        }
                    })),
                    has: oe((function (e) {
                        return function (t) {
                            return ae(e, t).length > 0
                        }
                    })),
                    contains: oe((function (e) {
                        return e = e.replace(te, ie),
                            function (t) {
                                return (t.textContent || t.innerText || a(t)).indexOf(e) > -1
                            }
                    })),
                    lang: oe((function (e) {
                        return V.test(e || "") || ae.error("unsupported lang: " + e), e = e.replace(te, ie).toLowerCase(),
                            function (t) {
                                var i;
                                do {
                                    if (i = m ? t.lang : t.getAttribute("xml:lang") || t.getAttribute("lang")) return (i = i.toLowerCase()) === e || 0 === i.indexOf(e + "-")
                                } while ((t = t.parentNode) && 1 === t.nodeType);
                                return !1
                            }
                    })),
                    target: function (t) {
                        var i = e.location && e.location.hash;
                        return i && i.slice(1) === t.id
                    },
                    root: function (e) {
                        return e === f
                    },
                    focus: function (e) {
                        return e === h.activeElement && (!h.hasFocus || h.hasFocus()) && !!(e.type || e.href || ~e.tabIndex)
                    },
                    enabled: function (e) {
                        return !1 === e.disabled
                    },
                    disabled: function (e) {
                        return !0 === e.disabled
                    },
                    checked: function (e) {
                        var t = e.nodeName.toLowerCase();
                        return "input" === t && !!e.checked || "option" === t && !!e.selected
                    },
                    selected: function (e) {
                        return e.parentNode && e.parentNode.selectedIndex, !0 === e.selected
                    },
                    empty: function (e) {
                        for (e = e.firstChild; e; e = e.nextSibling)
                            if (e.nodeType < 6) return !1;
                        return !0
                    },
                    parent: function (e) {
                        return !n.pseudos.empty(e)
                    },
                    header: function (e) {
                        return X.test(e.nodeName)
                    },
                    input: function (e) {
                        return K.test(e.nodeName)
                    },
                    button: function (e) {
                        var t = e.nodeName.toLowerCase();
                        return "input" === t && "button" === e.type || "button" === t
                    },
                    text: function (e) {
                        var t;
                        return "input" === e.nodeName.toLowerCase() && "text" === e.type && (null == (t = e.getAttribute("type")) || "text" === t.toLowerCase())
                    },
                    first: ue((function () {
                        return [0]
                    })),
                    last: ue((function (e, t) {
                        return [t - 1]
                    })),
                    eq: ue((function (e, t, i) {
                        return [i < 0 ? i + t : i]
                    })),
                    even: ue((function (e, t) {
                        for (var i = 0; i < t; i += 2) e.push(i);
                        return e
                    })),
                    odd: ue((function (e, t) {
                        for (var i = 1; i < t; i += 2) e.push(i);
                        return e
                    })),
                    lt: ue((function (e, t, i) {
                        for (var n = i < 0 ? i + t : i; --n >= 0;) e.push(n);
                        return e
                    })),
                    gt: ue((function (e, t, i) {
                        for (var n = i < 0 ? i + t : i; ++n < t;) e.push(n);
                        return e
                    }))
                }
            }, n.pseudos.nth = n.pseudos.eq, {
                radio: !0,
                checkbox: !0,
                file: !0,
                password: !0,
                image: !0
            }) n.pseudos[t] = de(t);
            for (t in {
                submit: !0,
                reset: !0
            }) n.pseudos[t] = pe(t);

            function fe() { }

            function me(e) {
                for (var t = 0, i = e.length, n = ""; t < i; t++) n += e[t].value;
                return n
            }

            function ge(e, t, i) {
                var n = t.dir,
                    a = i && "parentNode" === n,
                    s = C++;
                return t.first ? function (t, i, s) {
                    for (; t = t[n];)
                        if (1 === t.nodeType || a) return e(t, i, s)
                } : function (t, i, o) {
                    var r, l, c, d = [T, s];
                    if (o) {
                        for (; t = t[n];)
                            if ((1 === t.nodeType || a) && e(t, i, o)) return !0
                    } else
                        for (; t = t[n];)
                            if (1 === t.nodeType || a) {
                                if ((r = (l = (c = t[w] || (t[w] = {}))[t.uniqueID] || (c[t.uniqueID] = {}))[n]) && r[0] === T && r[1] === s) return d[2] = r[2];
                                if (l[n] = d, d[2] = e(t, i, o)) return !0
                            }
                }
            }

            function ve(e) {
                return e.length > 1 ? function (t, i, n) {
                    for (var a = e.length; a--;)
                        if (!e[a](t, i, n)) return !1;
                    return !0
                } : e[0]
            }

            function be(e, t, i, n, a) {
                for (var s, o = [], r = 0, l = e.length, c = null != t; r < l; r++)(s = e[r]) && (i && !i(s, n, a) || (o.push(s), c && t.push(r)));
                return o
            }

            function ye(e, t, i, n, a, s) {
                return n && !n[w] && (n = ye(n)), a && !a[w] && (a = ye(a, s)), oe((function (s, o, r, l) {
                    var c, d, p, u = [],
                        h = [],
                        f = o.length,
                        m = s || function (e, t, i) {
                            for (var n = 0, a = t.length; n < a; n++) ae(e, t[n], i);
                            return i
                        }(t || "*", r.nodeType ? [r] : r, []),
                        g = !e || !s && t ? m : be(m, u, e, r, l),
                        v = i ? a || (s ? e : f || n) ? [] : o : g;
                    if (i && i(g, v, r, l), n)
                        for (c = be(v, h), n(c, [], r, l), d = c.length; d--;)(p = c[d]) && (v[h[d]] = !(g[h[d]] = p));
                    if (s) {
                        if (a || e) {
                            if (a) {
                                for (c = [], d = v.length; d--;)(p = v[d]) && c.push(g[d] = p);
                                a(null, v = [], c, l)
                            }
                            for (d = v.length; d--;)(p = v[d]) && (c = a ? N(s, p) : u[d]) > -1 && (s[c] = !(o[c] = p))
                        }
                    } else v = be(v === o ? v.splice(f, v.length) : v), a ? a(null, o, v, l) : L.apply(o, v)
                }))
            }

            function we(e) {
                for (var t, i, a, s = e.length, o = n.relative[e[0].type], r = o || n.relative[" "], l = o ? 1 : 0, d = ge((function (e) {
                    return e === t
                }), r, !0), p = ge((function (e) {
                    return N(t, e) > -1
                }), r, !0), u = [function (e, i, n) {
                    var a = !o && (n || i !== c) || ((t = i).nodeType ? d(e, i, n) : p(e, i, n));
                    return t = null, a
                }]; l < s; l++)
                    if (i = n.relative[e[l].type]) u = [ge(ve(u), i)];
                    else {
                        if ((i = n.filter[e[l].type].apply(null, e[l].matches))[w]) {
                            for (a = ++l; a < s && !n.relative[e[a].type]; a++);
                            return ye(l > 1 && ve(u), l > 1 && me(e.slice(0, l - 1).concat({
                                value: " " === e[l - 2].type ? "*" : ""
                            })).replace(z, "$1"), i, l < a && we(e.slice(l, a)), a < s && we(e = e.slice(a)), a < s && me(e))
                        }
                        u.push(i)
                    } return ve(u)
            }
            return fe.prototype = n.filters = n.pseudos, n.setFilters = new fe, o = ae.tokenize = function (e, t) {
                var i, a, s, o, r, l, c, d = E[e + " "];
                if (d) return t ? 0 : d.slice(0);
                for (r = e, l = [], c = n.preFilter; r;) {
                    for (o in i && !(a = G.exec(r)) || (a && (r = r.slice(a[0].length) || r), l.push(s = [])), i = !1, (a = $.exec(r)) && (i = a.shift(), s.push({
                        value: i,
                        type: a[0].replace(z, " ")
                    }), r = r.slice(i.length)), n.filter) !(a = Y[o].exec(r)) || c[o] && !(a = c[o](a)) || (i = a.shift(), s.push({
                        value: i,
                        type: o,
                        matches: a
                    }), r = r.slice(i.length));
                    if (!i) break
                }
                return t ? r.length : r ? ae.error(e) : E(e, l).slice(0)
            }, r = ae.compile = function (e, t) {
                var i, a = [],
                    s = [],
                    r = x[e + " "];
                if (!r) {
                    for (t || (t = o(e)), i = t.length; i--;)(r = we(t[i]))[w] ? a.push(r) : s.push(r);
                    r = x(e, function (e, t) {
                        var i = t.length > 0,
                            a = e.length > 0,
                            s = function (s, o, r, l, d) {
                                var p, f, g, v = 0,
                                    b = "0",
                                    y = s && [],
                                    w = [],
                                    _ = c,
                                    C = s || a && n.find.TAG("*", d),
                                    k = T += null == _ ? 1 : Math.random() || .1,
                                    E = C.length;
                                for (d && (c = o === h || o || d); b !== E && null != (p = C[b]); b++) {
                                    if (a && p) {
                                        for (f = 0, o || p.ownerDocument === h || (u(p), r = !m); g = e[f++];)
                                            if (g(p, o || h, r)) {
                                                l.push(p);
                                                break
                                            } d && (T = k)
                                    }
                                    i && ((p = !g && p) && v--, s && y.push(p))
                                }
                                if (v += b, i && b !== v) {
                                    for (f = 0; g = t[f++];) g(y, w, o, r);
                                    if (s) {
                                        if (v > 0)
                                            for (; b--;) y[b] || w[b] || (w[b] = O.call(l));
                                        w = be(w)
                                    }
                                    L.apply(l, w), d && !s && w.length > 0 && v + t.length > 1 && ae.uniqueSort(l)
                                }
                                return d && (T = k, c = _), y
                            };
                        return i ? oe(s) : s
                    }(s, a)), r.selector = e
                }
                return r
            }, l = ae.select = function (e, t, a, s) {
                var l, c, d, p, u, h = "function" == typeof e && e,
                    f = !s && o(e = h.selector || e);
                if (a = a || [], 1 === f.length) {
                    if ((c = f[0] = f[0].slice(0)).length > 2 && "ID" === (d = c[0]).type && i.getById && 9 === t.nodeType && m && n.relative[c[1].type]) {
                        if (!(t = (n.find.ID(d.matches[0].replace(te, ie), t) || [])[0])) return a;
                        h && (t = t.parentNode), e = e.slice(c.shift().value.length)
                    }
                    for (l = Y.needsContext.test(e) ? 0 : c.length; l-- && (d = c[l], !n.relative[p = d.type]);)
                        if ((u = n.find[p]) && (s = u(d.matches[0].replace(te, ie), Z.test(c[0].type) && he(t.parentNode) || t))) {
                            if (c.splice(l, 1), !(e = s.length && me(c))) return L.apply(a, s), a;
                            break
                        }
                }
                return (h || r(e, f))(s, t, !m, a, !t || Z.test(e) && he(t.parentNode) || t), a
            }, i.sortStable = w.split("").sort(S).join("") === w, i.detectDuplicates = !!p, u(), i.sortDetached = re((function (e) {
                return 1 & e.compareDocumentPosition(h.createElement("div"))
            })), re((function (e) {
                return e.innerHTML = "<a href='#'></a>", "#" === e.firstChild.getAttribute("href")
            })) || le("type|href|height|width", (function (e, t, i) {
                if (!i) return e.getAttribute(t, "type" === t.toLowerCase() ? 1 : 2)
            })), i.attributes && re((function (e) {
                return e.innerHTML = "<input/>", e.firstChild.setAttribute("value", ""), "" === e.firstChild.getAttribute("value")
            })) || le("value", (function (e, t, i) {
                if (!i && "input" === e.nodeName.toLowerCase()) return e.defaultValue
            })), re((function (e) {
                return null == e.getAttribute("disabled")
            })) || le(R, (function (e, t, i) {
                var n;
                if (!i) return !0 === e[t] ? t.toLowerCase() : (n = e.getAttributeNode(t)) && n.specified ? n.value : null
            })), ae
        }(e);
    h.find = y, h.expr = y.selectors, h.expr[":"] = h.expr.pseudos, h.uniqueSort = h.unique = y.uniqueSort, h.text = y.getText, h.isXMLDoc = y.isXML, h.contains = y.contains;
    var w = function (e, t, i) {
        for (var n = [], a = void 0 !== i;
            (e = e[t]) && 9 !== e.nodeType;)
            if (1 === e.nodeType) {
                if (a && h(e).is(i)) break;
                n.push(e)
            } return n
    },
        _ = function (e, t) {
            for (var i = []; e; e = e.nextSibling) 1 === e.nodeType && e !== t && i.push(e);
            return i
        },
        T = h.expr.match.needsContext,
        C = /^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,
        k = /^.[^:#\[\.,]*$/;

    function E(e, t, i) {
        if (h.isFunction(t)) return h.grep(e, (function (e, n) {
            return !!t.call(e, n, e) !== i
        }));
        if (t.nodeType) return h.grep(e, (function (e) {
            return e === t !== i
        }));
        if ("string" == typeof t) {
            if (k.test(t)) return h.filter(t, e, i);
            t = h.filter(t, e)
        }
        return h.grep(e, (function (e) {
            return r.call(t, e) > -1 !== i
        }))
    }
    h.filter = function (e, t, i) {
        var n = t[0];
        return i && (e = ":not(" + e + ")"), 1 === t.length && 1 === n.nodeType ? h.find.matchesSelector(n, e) ? [n] : [] : h.find.matches(e, h.grep(t, (function (e) {
            return 1 === e.nodeType
        })))
    }, h.fn.extend({
        find: function (e) {
            var t, i = this.length,
                n = [],
                a = this;
            if ("string" != typeof e) return this.pushStack(h(e).filter((function () {
                for (t = 0; t < i; t++)
                    if (h.contains(a[t], this)) return !0
            })));
            for (t = 0; t < i; t++) h.find(e, a[t], n);
            return (n = this.pushStack(i > 1 ? h.unique(n) : n)).selector = this.selector ? this.selector + " " + e : e, n
        },
        filter: function (e) {
            return this.pushStack(E(this, e || [], !1))
        },
        not: function (e) {
            return this.pushStack(E(this, e || [], !0))
        },
        is: function (e) {
            return !!E(this, "string" == typeof e && T.test(e) ? h(e) : e || [], !1).length
        }
    });
    var x, S = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;
    (h.fn.init = function (e, t, i) {
        var a, s;
        if (!e) return this;
        if (i = i || x, "string" == typeof e) {
            if (!(a = "<" === e[0] && ">" === e[e.length - 1] && e.length >= 3 ? [null, e, null] : S.exec(e)) || !a[1] && t) return !t || t.jquery ? (t || i).find(e) : this.constructor(t).find(e);
            if (a[1]) {
                if (t = t instanceof h ? t[0] : t, h.merge(this, h.parseHTML(a[1], t && t.nodeType ? t.ownerDocument || t : n, !0)), C.test(a[1]) && h.isPlainObject(t))
                    for (a in t) h.isFunction(this[a]) ? this[a](t[a]) : this.attr(a, t[a]);
                return this
            }
            return (s = n.getElementById(a[2])) && s.parentNode && (this.length = 1, this[0] = s), this.context = n, this.selector = e, this
        }
        return e.nodeType ? (this.context = this[0] = e, this.length = 1, this) : h.isFunction(e) ? void 0 !== i.ready ? i.ready(e) : e(h) : (void 0 !== e.selector && (this.selector = e.selector, this.context = e.context), h.makeArray(e, this))
    }).prototype = h.fn, x = h(n);
    var M = /^(?:parents|prev(?:Until|All))/,
        P = {
            children: !0,
            contents: !0,
            next: !0,
            prev: !0
        };

    function I(e, t) {
        for (;
            (e = e[t]) && 1 !== e.nodeType;);
        return e
    }
    h.fn.extend({
        has: function (e) {
            var t = h(e, this),
                i = t.length;
            return this.filter((function () {
                for (var e = 0; e < i; e++)
                    if (h.contains(this, t[e])) return !0
            }))
        },
        closest: function (e, t) {
            for (var i, n = 0, a = this.length, s = [], o = T.test(e) || "string" != typeof e ? h(e, t || this.context) : 0; n < a; n++)
                for (i = this[n]; i && i !== t; i = i.parentNode)
                    if (i.nodeType < 11 && (o ? o.index(i) > -1 : 1 === i.nodeType && h.find.matchesSelector(i, e))) {
                        s.push(i);
                        break
                    } return this.pushStack(s.length > 1 ? h.uniqueSort(s) : s)
        },
        index: function (e) {
            return e ? "string" == typeof e ? r.call(h(e), this[0]) : r.call(this, e.jquery ? e[0] : e) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1
        },
        add: function (e, t) {
            return this.pushStack(h.uniqueSort(h.merge(this.get(), h(e, t))))
        },
        addBack: function (e) {
            return this.add(null == e ? this.prevObject : this.prevObject.filter(e))
        }
    }), h.each({
        parent: function (e) {
            var t = e.parentNode;
            return t && 11 !== t.nodeType ? t : null
        },
        parents: function (e) {
            return w(e, "parentNode")
        },
        parentsUntil: function (e, t, i) {
            return w(e, "parentNode", i)
        },
        next: function (e) {
            return I(e, "nextSibling")
        },
        prev: function (e) {
            return I(e, "previousSibling")
        },
        nextAll: function (e) {
            return w(e, "nextSibling")
        },
        prevAll: function (e) {
            return w(e, "previousSibling")
        },
        nextUntil: function (e, t, i) {
            return w(e, "nextSibling", i)
        },
        prevUntil: function (e, t, i) {
            return w(e, "previousSibling", i)
        },
        siblings: function (e) {
            return _((e.parentNode || {}).firstChild, e)
        },
        children: function (e) {
            return _(e.firstChild)
        },
        contents: function (e) {
            return e.contentDocument || h.merge([], e.childNodes)
        }
    }, (function (e, t) {
        h.fn[e] = function (i, n) {
            var a = h.map(this, t, i);
            return "Until" !== e.slice(-5) && (n = i), n && "string" == typeof n && (a = h.filter(n, a)), this.length > 1 && (P[e] || h.uniqueSort(a), M.test(e) && a.reverse()), this.pushStack(a)
        }
    }));
    var O, A = /\S+/g;

    function L() {
        n.removeEventListener("DOMContentLoaded", L), e.removeEventListener("load", L), h.ready()
    }
    h.Callbacks = function (e) {
        e = "string" == typeof e ? function (e) {
            var t = {};
            return h.each(e.match(A) || [], (function (e, i) {
                t[i] = !0
            })), t
        }(e) : h.extend({}, e);
        var t, i, n, a, s = [],
            o = [],
            r = -1,
            l = function () {
                for (a = e.once, n = t = !0; o.length; r = -1)
                    for (i = o.shift(); ++r < s.length;) !1 === s[r].apply(i[0], i[1]) && e.stopOnFalse && (r = s.length, i = !1);
                e.memory || (i = !1), t = !1, a && (s = i ? [] : "")
            },
            c = {
                add: function () {
                    return s && (i && !t && (r = s.length - 1, o.push(i)), function t(i) {
                        h.each(i, (function (i, n) {
                            h.isFunction(n) ? e.unique && c.has(n) || s.push(n) : n && n.length && "string" !== h.type(n) && t(n)
                        }))
                    }(arguments), i && !t && l()), this
                },
                remove: function () {
                    return h.each(arguments, (function (e, t) {
                        for (var i;
                            (i = h.inArray(t, s, i)) > -1;) s.splice(i, 1), i <= r && r--
                    })), this
                },
                has: function (e) {
                    return e ? h.inArray(e, s) > -1 : s.length > 0
                },
                empty: function () {
                    return s && (s = []), this
                },
                disable: function () {
                    return a = o = [], s = i = "", this
                },
                disabled: function () {
                    return !s
                },
                lock: function () {
                    return a = o = [], i || (s = i = ""), this
                },
                locked: function () {
                    return !!a
                },
                fireWith: function (e, i) {
                    return a || (i = [e, (i = i || []).slice ? i.slice() : i], o.push(i), t || l()), this
                },
                fire: function () {
                    return c.fireWith(this, arguments), this
                },
                fired: function () {
                    return !!n
                }
            };
        return c
    }, h.extend({
        Deferred: function (e) {
            var t = [
                ["resolve", "done", h.Callbacks("once memory"), "resolved"],
                ["reject", "fail", h.Callbacks("once memory"), "rejected"],
                ["notify", "progress", h.Callbacks("memory")]
            ],
                i = "pending",
                n = {
                    state: function () {
                        return i
                    },
                    always: function () {
                        return a.done(arguments).fail(arguments), this
                    },
                    then: function () {
                        var e = arguments;
                        return h.Deferred((function (i) {
                            h.each(t, (function (t, s) {
                                var o = h.isFunction(e[t]) && e[t];
                                a[s[1]]((function () {
                                    var e = o && o.apply(this, arguments);
                                    e && h.isFunction(e.promise) ? e.promise().progress(i.notify).done(i.resolve).fail(i.reject) : i[s[0] + "With"](this === n ? i.promise() : this, o ? [e] : arguments)
                                }))
                            })), e = null
                        })).promise()
                    },
                    promise: function (e) {
                        return null != e ? h.extend(e, n) : n
                    }
                },
                a = {};
            return n.pipe = n.then, h.each(t, (function (e, s) {
                var o = s[2],
                    r = s[3];
                n[s[1]] = o.add, r && o.add((function () {
                    i = r
                }), t[1 ^ e][2].disable, t[2][2].lock), a[s[0]] = function () {
                    return a[s[0] + "With"](this === a ? n : this, arguments), this
                }, a[s[0] + "With"] = o.fireWith
            })), n.promise(a), e && e.call(a, a), a
        },
        when: function (e) {
            var t, i, n, s = 0,
                o = a.call(arguments),
                r = o.length,
                l = 1 !== r || e && h.isFunction(e.promise) ? r : 0,
                c = 1 === l ? e : h.Deferred(),
                d = function (e, i, n) {
                    return function (s) {
                        i[e] = this, n[e] = arguments.length > 1 ? a.call(arguments) : s, n === t ? c.notifyWith(i, n) : --l || c.resolveWith(i, n)
                    }
                };
            if (r > 1)
                for (t = new Array(r), i = new Array(r), n = new Array(r); s < r; s++) o[s] && h.isFunction(o[s].promise) ? o[s].promise().progress(d(s, i, t)).done(d(s, n, o)).fail(c.reject) : --l;
            return l || c.resolveWith(n, o), c.promise()
        }
    }), h.fn.ready = function (e) {
        return h.ready.promise().done(e), this
    }, h.extend({
        isReady: !1,
        readyWait: 1,
        holdReady: function (e) {
            e ? h.readyWait++ : h.ready(!0)
        },
        ready: function (e) {
            (!0 === e ? --h.readyWait : h.isReady) || (h.isReady = !0, !0 !== e && --h.readyWait > 0 || (O.resolveWith(n, [h]), h.fn.triggerHandler && (h(n).triggerHandler("ready"), h(n).off("ready"))))
        }
    }), h.ready.promise = function (t) {
        return O || (O = h.Deferred(), "complete" === n.readyState || "loading" !== n.readyState && !n.documentElement.doScroll ? e.setTimeout(h.ready) : (n.addEventListener("DOMContentLoaded", L), e.addEventListener("load", L))), O.promise(t)
    }, h.ready.promise();
    var D = function (e, t, i, n, a, s, o) {
        var r = 0,
            l = e.length,
            c = null == i;
        if ("object" === h.type(i))
            for (r in a = !0, i) D(e, t, r, i[r], !0, s, o);
        else if (void 0 !== n && (a = !0, h.isFunction(n) || (o = !0), c && (o ? (t.call(e, n), t = null) : (c = t, t = function (e, t, i) {
            return c.call(h(e), i)
        })), t))
            for (; r < l; r++) t(e[r], i, o ? n : n.call(e[r], r, t(e[r], i)));
        return a ? e : c ? t.call(e) : l ? t(e[0], i) : s
    },
        N = function (e) {
            return 1 === e.nodeType || 9 === e.nodeType || !+e.nodeType
        };

    function R() {
        this.expando = h.expando + R.uid++
    }
    R.uid = 1, R.prototype = {
        register: function (e, t) {
            var i = t || {};
            return e.nodeType ? e[this.expando] = i : Object.defineProperty(e, this.expando, {
                value: i,
                writable: !0,
                configurable: !0
            }), e[this.expando]
        },
        cache: function (e) {
            if (!N(e)) return {};
            var t = e[this.expando];
            return t || (t = {}, N(e) && (e.nodeType ? e[this.expando] = t : Object.defineProperty(e, this.expando, {
                value: t,
                configurable: !0
            }))), t
        },
        set: function (e, t, i) {
            var n, a = this.cache(e);
            if ("string" == typeof t) a[t] = i;
            else
                for (n in t) a[n] = t[n];
            return a
        },
        get: function (e, t) {
            return void 0 === t ? this.cache(e) : e[this.expando] && e[this.expando][t]
        },
        access: function (e, t, i) {
            var n;
            return void 0 === t || t && "string" == typeof t && void 0 === i ? void 0 !== (n = this.get(e, t)) ? n : this.get(e, h.camelCase(t)) : (this.set(e, t, i), void 0 !== i ? i : t)
        },
        remove: function (e, t) {
            var i, n, a, s = e[this.expando];
            if (void 0 !== s) {
                if (void 0 === t) this.register(e);
                else {
                    h.isArray(t) ? n = t.concat(t.map(h.camelCase)) : (a = h.camelCase(t), n = t in s ? [t, a] : (n = a) in s ? [n] : n.match(A) || []), i = n.length;
                    for (; i--;) delete s[n[i]]
                } (void 0 === t || h.isEmptyObject(s)) && (e.nodeType ? e[this.expando] = void 0 : delete e[this.expando])
            }
        },
        hasData: function (e) {
            var t = e[this.expando];
            return void 0 !== t && !h.isEmptyObject(t)
        }
    };
    var W = new R,
        F = new R,
        B = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
        U = /[A-Z]/g;

    function H(e, t, i) {
        var n;
        if (void 0 === i && 1 === e.nodeType)
            if (n = "data-" + t.replace(U, "-$&").toLowerCase(), "string" == typeof (i = e.getAttribute(n))) {
                try {
                    i = "true" === i || "false" !== i && ("null" === i ? null : +i + "" === i ? +i : B.test(i) ? h.parseJSON(i) : i)
                } catch (e) { }
                F.set(e, t, i)
            } else i = void 0;
        return i
    }
    h.extend({
        hasData: function (e) {
            return F.hasData(e) || W.hasData(e)
        },
        data: function (e, t, i) {
            return F.access(e, t, i)
        },
        removeData: function (e, t) {
            F.remove(e, t)
        },
        _data: function (e, t, i) {
            return W.access(e, t, i)
        },
        _removeData: function (e, t) {
            W.remove(e, t)
        }
    }), h.fn.extend({
        data: function (e, t) {
            var i, n, a, s = this[0],
                o = s && s.attributes;
            if (void 0 === e) {
                if (this.length && (a = F.get(s), 1 === s.nodeType && !W.get(s, "hasDataAttrs"))) {
                    for (i = o.length; i--;) o[i] && 0 === (n = o[i].name).indexOf("data-") && (n = h.camelCase(n.slice(5)), H(s, n, a[n]));
                    W.set(s, "hasDataAttrs", !0)
                }
                return a
            }
            return "object" == typeof e ? this.each((function () {
                F.set(this, e)
            })) : D(this, (function (t) {
                var i, n;
                if (s && void 0 === t) return void 0 !== (i = F.get(s, e) || F.get(s, e.replace(U, "-$&").toLowerCase())) ? i : (n = h.camelCase(e), void 0 !== (i = F.get(s, n)) || void 0 !== (i = H(s, n, void 0)) ? i : void 0);
                n = h.camelCase(e), this.each((function () {
                    var i = F.get(this, n);
                    F.set(this, n, t), e.indexOf("-") > -1 && void 0 !== i && F.set(this, e, t)
                }))
            }), null, t, arguments.length > 1, null, !0)
        },
        removeData: function (e) {
            return this.each((function () {
                F.remove(this, e)
            }))
        }
    }), h.extend({
        queue: function (e, t, i) {
            var n;
            if (e) return t = (t || "fx") + "queue", n = W.get(e, t), i && (!n || h.isArray(i) ? n = W.access(e, t, h.makeArray(i)) : n.push(i)), n || []
        },
        dequeue: function (e, t) {
            t = t || "fx";
            var i = h.queue(e, t),
                n = i.length,
                a = i.shift(),
                s = h._queueHooks(e, t);
            "inprogress" === a && (a = i.shift(), n--), a && ("fx" === t && i.unshift("inprogress"), delete s.stop, a.call(e, (function () {
                h.dequeue(e, t)
            }), s)), !n && s && s.empty.fire()
        },
        _queueHooks: function (e, t) {
            var i = t + "queueHooks";
            return W.get(e, i) || W.access(e, i, {
                empty: h.Callbacks("once memory").add((function () {
                    W.remove(e, [t + "queue", i])
                }))
            })
        }
    }), h.fn.extend({
        queue: function (e, t) {
            var i = 2;
            return "string" != typeof e && (t = e, e = "fx", i--), arguments.length < i ? h.queue(this[0], e) : void 0 === t ? this : this.each((function () {
                var i = h.queue(this, e, t);
                h._queueHooks(this, e), "fx" === e && "inprogress" !== i[0] && h.dequeue(this, e)
            }))
        },
        dequeue: function (e) {
            return this.each((function () {
                h.dequeue(this, e)
            }))
        },
        clearQueue: function (e) {
            return this.queue(e || "fx", [])
        },
        promise: function (e, t) {
            var i, n = 1,
                a = h.Deferred(),
                s = this,
                o = this.length,
                r = function () {
                    --n || a.resolveWith(s, [s])
                };
            for ("string" != typeof e && (t = e, e = void 0), e = e || "fx"; o--;)(i = W.get(s[o], e + "queueHooks")) && i.empty && (n++, i.empty.add(r));
            return r(), a.promise(t)
        }
    });
    var z = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
        G = new RegExp("^(?:([+-])=|)(" + z + ")([a-z%]*)$", "i"),
        $ = ["Top", "Right", "Bottom", "Left"],
        q = function (e, t) {
            return e = t || e, "none" === h.css(e, "display") || !h.contains(e.ownerDocument, e)
        };

    function j(e, t, i, n) {
        var a, s = 1,
            o = 20,
            r = n ? function () {
                return n.cur()
            } : function () {
                return h.css(e, t, "")
            },
            l = r(),
            c = i && i[3] || (h.cssNumber[t] ? "" : "px"),
            d = (h.cssNumber[t] || "px" !== c && +l) && G.exec(h.css(e, t));
        if (d && d[3] !== c) {
            c = c || d[3], i = i || [], d = +l || 1;
            do {
                d /= s = s || ".5", h.style(e, t, d + c)
            } while (s !== (s = r() / l) && 1 !== s && --o)
        }
        return i && (d = +d || +l || 0, a = i[1] ? d + (i[1] + 1) * i[2] : +i[2], n && (n.unit = c, n.start = d, n.end = a)), a
    }
    var V = /^(?:checkbox|radio)$/i,
        Y = /<([\w:-]+)/,
        K = /^$|\/(?:java|ecma)script/i,
        X = {
            option: [1, "<select multiple='multiple'>", "</select>"],
            thead: [1, "<table>", "</table>"],
            col: [2, "<table><colgroup>", "</colgroup></table>"],
            tr: [2, "<table><tbody>", "</tbody></table>"],
            td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
            _default: [0, "", ""]
        };

    function Q(e, t) {
        var i = void 0 !== e.getElementsByTagName ? e.getElementsByTagName(t || "*") : void 0 !== e.querySelectorAll ? e.querySelectorAll(t || "*") : [];
        return void 0 === t || t && h.nodeName(e, t) ? h.merge([e], i) : i
    }

    function J(e, t) {
        for (var i = 0, n = e.length; i < n; i++) W.set(e[i], "globalEval", !t || W.get(t[i], "globalEval"))
    }
    X.optgroup = X.option, X.tbody = X.tfoot = X.colgroup = X.caption = X.thead, X.th = X.td;
    var Z, ee, te = /<|&#?\w+;/;

    function ie(e, t, i, n, a) {
        for (var s, o, r, l, c, d, p = t.createDocumentFragment(), u = [], f = 0, m = e.length; f < m; f++)
            if ((s = e[f]) || 0 === s)
                if ("object" === h.type(s)) h.merge(u, s.nodeType ? [s] : s);
                else if (te.test(s)) {
                    for (o = o || p.appendChild(t.createElement("div")), r = (Y.exec(s) || ["", ""])[1].toLowerCase(), l = X[r] || X._default, o.innerHTML = l[1] + h.htmlPrefilter(s) + l[2], d = l[0]; d--;) o = o.lastChild;
                    h.merge(u, o.childNodes), (o = p.firstChild).textContent = ""
                } else u.push(t.createTextNode(s));
        for (p.textContent = "", f = 0; s = u[f++];)
            if (n && h.inArray(s, n) > -1) a && a.push(s);
            else if (c = h.contains(s.ownerDocument, s), o = Q(p.appendChild(s), "script"), c && J(o), i)
                for (d = 0; s = o[d++];) K.test(s.type || "") && i.push(s);
        return p
    }
    Z = n.createDocumentFragment().appendChild(n.createElement("div")), (ee = n.createElement("input")).setAttribute("type", "radio"), ee.setAttribute("checked", "checked"), ee.setAttribute("name", "t"), Z.appendChild(ee), p.checkClone = Z.cloneNode(!0).cloneNode(!0).lastChild.checked, Z.innerHTML = "<textarea>x</textarea>", p.noCloneChecked = !!Z.cloneNode(!0).lastChild.defaultValue;
    var ne = /^key/,
        ae = /^(?:mouse|pointer|contextmenu|drag|drop)|click/,
        se = /^([^.]*)(?:\.(.+)|)/;

    function oe() {
        return !0
    }

    function re() {
        return !1
    }

    function le() {
        try {
            return n.activeElement
        } catch (e) { }
    }

    function ce(e, t, i, n, a, s) {
        var o, r;
        if ("object" == typeof t) {
            for (r in "string" != typeof i && (n = n || i, i = void 0), t) ce(e, r, i, n, t[r], s);
            return e
        }
        if (null == n && null == a ? (a = i, n = i = void 0) : null == a && ("string" == typeof i ? (a = n, n = void 0) : (a = n, n = i, i = void 0)), !1 === a) a = re;
        else if (!a) return e;
        return 1 === s && (o = a, a = function (e) {
            return h().off(e), o.apply(this, arguments)
        }, a.guid = o.guid || (o.guid = h.guid++)), e.each((function () {
            h.event.add(this, t, a, n, i)
        }))
    }
    h.event = {
        global: {},
        add: function (e, t, i, n, a) {
            var s, o, r, l, c, d, p, u, f, m, g, v = W.get(e);
            if (v)
                for (i.handler && (i = (s = i).handler, a = s.selector), i.guid || (i.guid = h.guid++), (l = v.events) || (l = v.events = {}), (o = v.handle) || (o = v.handle = function (t) {
                    return void 0 !== h && h.event.triggered !== t.type ? h.event.dispatch.apply(e, arguments) : void 0
                }), c = (t = (t || "").match(A) || [""]).length; c--;) f = g = (r = se.exec(t[c]) || [])[1], m = (r[2] || "").split(".").sort(), f && (p = h.event.special[f] || {}, f = (a ? p.delegateType : p.bindType) || f, p = h.event.special[f] || {}, d = h.extend({
                    type: f,
                    origType: g,
                    data: n,
                    handler: i,
                    guid: i.guid,
                    selector: a,
                    needsContext: a && h.expr.match.needsContext.test(a),
                    namespace: m.join(".")
                }, s), (u = l[f]) || ((u = l[f] = []).delegateCount = 0, p.setup && !1 !== p.setup.call(e, n, m, o) || e.addEventListener && e.addEventListener(f, o)), p.add && (p.add.call(e, d), d.handler.guid || (d.handler.guid = i.guid)), a ? u.splice(u.delegateCount++, 0, d) : u.push(d), h.event.global[f] = !0)
        },
        remove: function (e, t, i, n, a) {
            var s, o, r, l, c, d, p, u, f, m, g, v = W.hasData(e) && W.get(e);
            if (v && (l = v.events)) {
                for (c = (t = (t || "").match(A) || [""]).length; c--;)
                    if (f = g = (r = se.exec(t[c]) || [])[1], m = (r[2] || "").split(".").sort(), f) {
                        for (p = h.event.special[f] || {}, u = l[f = (n ? p.delegateType : p.bindType) || f] || [], r = r[2] && new RegExp("(^|\\.)" + m.join("\\.(?:.*\\.|)") + "(\\.|$)"), o = s = u.length; s--;) d = u[s], !a && g !== d.origType || i && i.guid !== d.guid || r && !r.test(d.namespace) || n && n !== d.selector && ("**" !== n || !d.selector) || (u.splice(s, 1), d.selector && u.delegateCount--, p.remove && p.remove.call(e, d));
                        o && !u.length && (p.teardown && !1 !== p.teardown.call(e, m, v.handle) || h.removeEvent(e, f, v.handle), delete l[f])
                    } else
                        for (f in l) h.event.remove(e, f + t[c], i, n, !0);
                h.isEmptyObject(l) && W.remove(e, "handle events")
            }
        },
        dispatch: function (e) {
            e = h.event.fix(e);
            var t, i, n, s, o, r, l = a.call(arguments),
                c = (W.get(this, "events") || {})[e.type] || [],
                d = h.event.special[e.type] || {};
            if (l[0] = e, e.delegateTarget = this, !d.preDispatch || !1 !== d.preDispatch.call(this, e)) {
                for (r = h.event.handlers.call(this, e, c), t = 0;
                    (s = r[t++]) && !e.isPropagationStopped();)
                    for (e.currentTarget = s.elem, i = 0;
                        (o = s.handlers[i++]) && !e.isImmediatePropagationStopped();) e.rnamespace && !e.rnamespace.test(o.namespace) || (e.handleObj = o, e.data = o.data, void 0 !== (n = ((h.event.special[o.origType] || {}).handle || o.handler).apply(s.elem, l)) && !1 === (e.result = n) && (e.preventDefault(), e.stopPropagation()));
                return d.postDispatch && d.postDispatch.call(this, e), e.result
            }
        },
        handlers: function (e, t) {
            var i, n, a, s, o = [],
                r = t.delegateCount,
                l = e.target;
            if (r && l.nodeType && ("click" !== e.type || isNaN(e.button) || e.button < 1))
                for (; l !== this; l = l.parentNode || this)
                    if (1 === l.nodeType && (!0 !== l.disabled || "click" !== e.type)) {
                        for (n = [], i = 0; i < r; i++) void 0 === n[a = (s = t[i]).selector + " "] && (n[a] = s.needsContext ? h(a, this).index(l) > -1 : h.find(a, this, null, [l]).length), n[a] && n.push(s);
                        n.length && o.push({
                            elem: l,
                            handlers: n
                        })
                    } return r < t.length && o.push({
                        elem: this,
                        handlers: t.slice(r)
                    }), o
        },
        props: "altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
        fixHooks: {},
        keyHooks: {
            props: "char charCode key keyCode".split(" "),
            filter: function (e, t) {
                return null == e.which && (e.which = null != t.charCode ? t.charCode : t.keyCode), e
            }
        },
        mouseHooks: {
            props: "button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
            filter: function (e, t) {
                var i, a, s, o = t.button;
                return null == e.pageX && null != t.clientX && (a = (i = e.target.ownerDocument || n).documentElement, s = i.body, e.pageX = t.clientX + (a && a.scrollLeft || s && s.scrollLeft || 0) - (a && a.clientLeft || s && s.clientLeft || 0), e.pageY = t.clientY + (a && a.scrollTop || s && s.scrollTop || 0) - (a && a.clientTop || s && s.clientTop || 0)), e.which || void 0 === o || (e.which = 1 & o ? 1 : 2 & o ? 3 : 4 & o ? 2 : 0), e
            }
        },
        fix: function (e) {
            if (e[h.expando]) return e;
            var t, i, a, s = e.type,
                o = e,
                r = this.fixHooks[s];
            for (r || (this.fixHooks[s] = r = ae.test(s) ? this.mouseHooks : ne.test(s) ? this.keyHooks : {}), a = r.props ? this.props.concat(r.props) : this.props, e = new h.Event(o), t = a.length; t--;) e[i = a[t]] = o[i];
            return e.target || (e.target = n), 3 === e.target.nodeType && (e.target = e.target.parentNode), r.filter ? r.filter(e, o) : e
        },
        special: {
            load: {
                noBubble: !0
            },
            focus: {
                trigger: function () {
                    if (this !== le() && this.focus) return this.focus(), !1
                },
                delegateType: "focusin"
            },
            blur: {
                trigger: function () {
                    if (this === le() && this.blur) return this.blur(), !1
                },
                delegateType: "focusout"
            },
            click: {
                trigger: function () {
                    if ("checkbox" === this.type && this.click && h.nodeName(this, "input")) return this.click(), !1
                },
                _default: function (e) {
                    return h.nodeName(e.target, "a")
                }
            },
            beforeunload: {
                postDispatch: function (e) {
                    void 0 !== e.result && e.originalEvent && (e.originalEvent.returnValue = e.result)
                }
            }
        }
    }, h.removeEvent = function (e, t, i) {
        e.removeEventListener && e.removeEventListener(t, i)
    }, h.Event = function (e, t) {
        if (!(this instanceof h.Event)) return new h.Event(e, t);
        e && e.type ? (this.originalEvent = e, this.type = e.type, this.isDefaultPrevented = e.defaultPrevented || void 0 === e.defaultPrevented && !1 === e.returnValue ? oe : re) : this.type = e, t && h.extend(this, t), this.timeStamp = e && e.timeStamp || h.now(), this[h.expando] = !0
    }, h.Event.prototype = {
        constructor: h.Event,
        isDefaultPrevented: re,
        isPropagationStopped: re,
        isImmediatePropagationStopped: re,
        isSimulated: !1,
        preventDefault: function () {
            var e = this.originalEvent;
            this.isDefaultPrevented = oe, e && !this.isSimulated && e.preventDefault()
        },
        stopPropagation: function () {
            var e = this.originalEvent;
            this.isPropagationStopped = oe, e && !this.isSimulated && e.stopPropagation()
        },
        stopImmediatePropagation: function () {
            var e = this.originalEvent;
            this.isImmediatePropagationStopped = oe, e && !this.isSimulated && e.stopImmediatePropagation(), this.stopPropagation()
        }
    }, h.each({
        mouseenter: "mouseover",
        mouseleave: "mouseout",
        pointerenter: "pointerover",
        pointerleave: "pointerout"
    }, (function (e, t) {
        h.event.special[e] = {
            delegateType: t,
            bindType: t,
            handle: function (e) {
                var i, n = e.relatedTarget,
                    a = e.handleObj;
                return n && (n === this || h.contains(this, n)) || (e.type = a.origType, i = a.handler.apply(this, arguments), e.type = t), i
            }
        }
    })), h.fn.extend({
        on: function (e, t, i, n) {
            return ce(this, e, t, i, n)
        },
        one: function (e, t, i, n) {
            return ce(this, e, t, i, n, 1)
        },
        off: function (e, t, i) {
            var n, a;
            if (e && e.preventDefault && e.handleObj) return n = e.handleObj, h(e.delegateTarget).off(n.namespace ? n.origType + "." + n.namespace : n.origType, n.selector, n.handler), this;
            if ("object" == typeof e) {
                for (a in e) this.off(a, t, e[a]);
                return this
            }
            return !1 !== t && "function" != typeof t || (i = t, t = void 0), !1 === i && (i = re), this.each((function () {
                h.event.remove(this, e, i, t)
            }))
        }
    });
    var de = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,
        pe = /<script|<style|<link/i,
        ue = /checked\s*(?:[^=]|=\s*.checked.)/i,
        he = /^true\/(.*)/,
        fe = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;

    function me(e, t) {
        return h.nodeName(e, "table") && h.nodeName(11 !== t.nodeType ? t : t.firstChild, "tr") ? e.getElementsByTagName("tbody")[0] || e.appendChild(e.ownerDocument.createElement("tbody")) : e
    }

    function ge(e) {
        return e.type = (null !== e.getAttribute("type")) + "/" + e.type, e
    }

    function ve(e) {
        var t = he.exec(e.type);
        return t ? e.type = t[1] : e.removeAttribute("type"), e
    }

    function be(e, t) {
        var i, n, a, s, o, r, l, c;
        if (1 === t.nodeType) {
            if (W.hasData(e) && (s = W.access(e), o = W.set(t, s), c = s.events))
                for (a in delete o.handle, o.events = {}, c)
                    for (i = 0, n = c[a].length; i < n; i++) h.event.add(t, a, c[a][i]);
            F.hasData(e) && (r = F.access(e), l = h.extend({}, r), F.set(t, l))
        }
    }

    function ye(e, t, i, n) {
        t = s.apply([], t);
        var a, o, r, l, c, d, u = 0,
            f = e.length,
            m = f - 1,
            g = t[0],
            v = h.isFunction(g);
        if (v || f > 1 && "string" == typeof g && !p.checkClone && ue.test(g)) return e.each((function (a) {
            var s = e.eq(a);
            v && (t[0] = g.call(this, a, s.html())), ye(s, t, i, n)
        }));
        if (f && (o = (a = ie(t, e[0].ownerDocument, !1, e, n)).firstChild, 1 === a.childNodes.length && (a = o), o || n)) {
            for (l = (r = h.map(Q(a, "script"), ge)).length; u < f; u++) c = a, u !== m && (c = h.clone(c, !0, !0), l && h.merge(r, Q(c, "script"))), i.call(e[u], c, u);
            if (l)
                for (d = r[r.length - 1].ownerDocument, h.map(r, ve), u = 0; u < l; u++) c = r[u], K.test(c.type || "") && !W.access(c, "globalEval") && h.contains(d, c) && (c.src ? h._evalUrl && h._evalUrl(c.src) : h.globalEval(c.textContent.replace(fe, "")))
        }
        return e
    }

    function we(e, t, i) {
        for (var n, a = t ? h.filter(t, e) : e, s = 0; null != (n = a[s]); s++) i || 1 !== n.nodeType || h.cleanData(Q(n)), n.parentNode && (i && h.contains(n.ownerDocument, n) && J(Q(n, "script")), n.parentNode.removeChild(n));
        return e
    }
    h.extend({
        htmlPrefilter: function (e) {
            return e.replace(de, "<$1></$2>")
        },
        clone: function (e, t, i) {
            var n, a, s, o, r, l, c, d = e.cloneNode(!0),
                u = h.contains(e.ownerDocument, e);
            if (!(p.noCloneChecked || 1 !== e.nodeType && 11 !== e.nodeType || h.isXMLDoc(e)))
                for (o = Q(d), n = 0, a = (s = Q(e)).length; n < a; n++) r = s[n], l = o[n], c = void 0, "input" === (c = l.nodeName.toLowerCase()) && V.test(r.type) ? l.checked = r.checked : "input" !== c && "textarea" !== c || (l.defaultValue = r.defaultValue);
            if (t)
                if (i)
                    for (s = s || Q(e), o = o || Q(d), n = 0, a = s.length; n < a; n++) be(s[n], o[n]);
                else be(e, d);
            return (o = Q(d, "script")).length > 0 && J(o, !u && Q(e, "script")), d
        },
        cleanData: function (e) {
            for (var t, i, n, a = h.event.special, s = 0; void 0 !== (i = e[s]); s++)
                if (N(i)) {
                    if (t = i[W.expando]) {
                        if (t.events)
                            for (n in t.events) a[n] ? h.event.remove(i, n) : h.removeEvent(i, n, t.handle);
                        i[W.expando] = void 0
                    }
                    i[F.expando] && (i[F.expando] = void 0)
                }
        }
    }), h.fn.extend({
        domManip: ye,
        detach: function (e) {
            return we(this, e, !0)
        },
        remove: function (e) {
            return we(this, e)
        },
        text: function (e) {
            return D(this, (function (e) {
                return void 0 === e ? h.text(this) : this.empty().each((function () {
                    1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || (this.textContent = e)
                }))
            }), null, e, arguments.length)
        },
        append: function () {
            return ye(this, arguments, (function (e) {
                1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || me(this, e).appendChild(e)
            }))
        },
        prepend: function () {
            return ye(this, arguments, (function (e) {
                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                    var t = me(this, e);
                    t.insertBefore(e, t.firstChild)
                }
            }))
        },
        before: function () {
            return ye(this, arguments, (function (e) {
                this.parentNode && this.parentNode.insertBefore(e, this)
            }))
        },
        after: function () {
            return ye(this, arguments, (function (e) {
                this.parentNode && this.parentNode.insertBefore(e, this.nextSibling)
            }))
        },
        empty: function () {
            for (var e, t = 0; null != (e = this[t]); t++) 1 === e.nodeType && (h.cleanData(Q(e, !1)), e.textContent = "");
            return this
        },
        clone: function (e, t) {
            return e = null != e && e, t = null == t ? e : t, this.map((function () {
                return h.clone(this, e, t)
            }))
        },
        html: function (e) {
            return D(this, (function (e) {
                var t = this[0] || {},
                    i = 0,
                    n = this.length;
                if (void 0 === e && 1 === t.nodeType) return t.innerHTML;
                if ("string" == typeof e && !pe.test(e) && !X[(Y.exec(e) || ["", ""])[1].toLowerCase()]) {
                    e = h.htmlPrefilter(e);
                    try {
                        for (; i < n; i++) 1 === (t = this[i] || {}).nodeType && (h.cleanData(Q(t, !1)), t.innerHTML = e);
                        t = 0
                    } catch (e) { }
                }
                t && this.empty().append(e)
            }), null, e, arguments.length)
        },
        replaceWith: function () {
            var e = [];
            return ye(this, arguments, (function (t) {
                var i = this.parentNode;
                h.inArray(this, e) < 0 && (h.cleanData(Q(this)), i && i.replaceChild(t, this))
            }), e)
        }
    }), h.each({
        appendTo: "append",
        prependTo: "prepend",
        insertBefore: "before",
        insertAfter: "after",
        replaceAll: "replaceWith"
    }, (function (e, t) {
        h.fn[e] = function (e) {
            for (var i, n = [], a = h(e), s = a.length - 1, r = 0; r <= s; r++) i = r === s ? this : this.clone(!0), h(a[r])[t](i), o.apply(n, i.get());
            return this.pushStack(n)
        }
    }));
    var _e, Te = {
        HTML: "block",
        BODY: "block"
    };

    function Ce(e, t) {
        var i = h(t.createElement(e)).appendTo(t.body),
            n = h.css(i[0], "display");
        return i.detach(), n
    }

    function ke(e) {
        var t = n,
            i = Te[e];
        return i || ("none" !== (i = Ce(e, t)) && i || ((t = (_e = (_e || h("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentDocument).write(), t.close(), i = Ce(e, t), _e.detach()), Te[e] = i), i
    }
    var Ee = /^margin/,
        xe = new RegExp("^(" + z + ")(?!px)[a-z%]+$", "i"),
        Se = function (t) {
            var i = t.ownerDocument.defaultView;
            return i && i.opener || (i = e), i.getComputedStyle(t)
        },
        Me = function (e, t, i, n) {
            var a, s, o = {};
            for (s in t) o[s] = e.style[s], e.style[s] = t[s];
            for (s in a = i.apply(e, n || []), t) e.style[s] = o[s];
            return a
        },
        Pe = n.documentElement;

    function Ie(e, t, i) {
        var n, a, s, o, r = e.style;
        return "" !== (o = (i = i || Se(e)) ? i.getPropertyValue(t) || i[t] : void 0) && void 0 !== o || h.contains(e.ownerDocument, e) || (o = h.style(e, t)), i && !p.pixelMarginRight() && xe.test(o) && Ee.test(t) && (n = r.width, a = r.minWidth, s = r.maxWidth, r.minWidth = r.maxWidth = r.width = o, o = i.width, r.width = n, r.minWidth = a, r.maxWidth = s), void 0 !== o ? o + "" : o
    }

    function Oe(e, t) {
        return {
            get: function () {
                if (!e()) return (this.get = t).apply(this, arguments);
                delete this.get
            }
        }
    } ! function () {
        var t, i, a, s, o = n.createElement("div"),
            r = n.createElement("div");

        function l() {
            r.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%", r.innerHTML = "", Pe.appendChild(o);
            var n = e.getComputedStyle(r);
            t = "1%" !== n.top, s = "2px" === n.marginLeft, i = "4px" === n.width, r.style.marginRight = "50%", a = "4px" === n.marginRight, Pe.removeChild(o)
        }
        r.style && (r.style.backgroundClip = "content-box", r.cloneNode(!0).style.backgroundClip = "", p.clearCloneStyle = "content-box" === r.style.backgroundClip, o.style.cssText = "border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute", o.appendChild(r), h.extend(p, {
            pixelPosition: function () {
                return l(), t
            },
            boxSizingReliable: function () {
                return null == i && l(), i
            },
            pixelMarginRight: function () {
                return null == i && l(), a
            },
            reliableMarginLeft: function () {
                return null == i && l(), s
            },
            reliableMarginRight: function () {
                var t, i = r.appendChild(n.createElement("div"));
                return i.style.cssText = r.style.cssText = "-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0", i.style.marginRight = i.style.width = "0", r.style.width = "1px", Pe.appendChild(o), t = !parseFloat(e.getComputedStyle(i).marginRight), Pe.removeChild(o), r.removeChild(i), t
            }
        }))
    }();
    var Ae = /^(none|table(?!-c[ea]).+)/,
        Le = {
            position: "absolute",
            visibility: "hidden",
            display: "block"
        },
        De = {
            letterSpacing: "0",
            fontWeight: "400"
        },
        Ne = ["Webkit", "O", "Moz", "ms"],
        Re = n.createElement("div").style;

    function We(e) {
        if (e in Re) return e;
        for (var t = e[0].toUpperCase() + e.slice(1), i = Ne.length; i--;)
            if ((e = Ne[i] + t) in Re) return e
    }

    function Fe(e, t, i) {
        var n = G.exec(t);
        return n ? Math.max(0, n[2] - (i || 0)) + (n[3] || "px") : t
    }

    function Be(e, t, i, n, a) {
        for (var s = i === (n ? "border" : "content") ? 4 : "width" === t ? 1 : 0, o = 0; s < 4; s += 2) "margin" === i && (o += h.css(e, i + $[s], !0, a)), n ? ("content" === i && (o -= h.css(e, "padding" + $[s], !0, a)), "margin" !== i && (o -= h.css(e, "border" + $[s] + "Width", !0, a))) : (o += h.css(e, "padding" + $[s], !0, a), "padding" !== i && (o += h.css(e, "border" + $[s] + "Width", !0, a)));
        return o
    }

    function Ue(e, t, i) {
        var n = !0,
            a = "width" === t ? e.offsetWidth : e.offsetHeight,
            s = Se(e),
            o = "border-box" === h.css(e, "boxSizing", !1, s);
        if (a <= 0 || null == a) {
            if (((a = Ie(e, t, s)) < 0 || null == a) && (a = e.style[t]), xe.test(a)) return a;
            n = o && (p.boxSizingReliable() || a === e.style[t]), a = parseFloat(a) || 0
        }
        return a + Be(e, t, i || (o ? "border" : "content"), n, s) + "px"
    }

    function He(e, t) {
        for (var i, n, a, s = [], o = 0, r = e.length; o < r; o++)(n = e[o]).style && (s[o] = W.get(n, "olddisplay"), i = n.style.display, t ? (s[o] || "none" !== i || (n.style.display = ""), "" === n.style.display && q(n) && (s[o] = W.access(n, "olddisplay", ke(n.nodeName)))) : (a = q(n), "none" === i && a || W.set(n, "olddisplay", a ? i : h.css(n, "display"))));
        for (o = 0; o < r; o++)(n = e[o]).style && (t && "none" !== n.style.display && "" !== n.style.display || (n.style.display = t ? s[o] || "" : "none"));
        return e
    }

    function ze(e, t, i, n, a) {
        return new ze.prototype.init(e, t, i, n, a)
    }
    h.extend({
        cssHooks: {
            opacity: {
                get: function (e, t) {
                    if (t) {
                        var i = Ie(e, "opacity");
                        return "" === i ? "1" : i
                    }
                }
            }
        },
        cssNumber: {
            animationIterationCount: !0,
            columnCount: !0,
            fillOpacity: !0,
            flexGrow: !0,
            flexShrink: !0,
            fontWeight: !0,
            lineHeight: !0,
            opacity: !0,
            order: !0,
            orphans: !0,
            widows: !0,
            zIndex: !0,
            zoom: !0
        },
        cssProps: {
            float: "cssFloat"
        },
        style: function (e, t, i, n) {
            if (e && 3 !== e.nodeType && 8 !== e.nodeType && e.style) {
                var a, s, o, r = h.camelCase(t),
                    l = e.style;
                if (t = h.cssProps[r] || (h.cssProps[r] = We(r) || r), o = h.cssHooks[t] || h.cssHooks[r], void 0 === i) return o && "get" in o && void 0 !== (a = o.get(e, !1, n)) ? a : l[t];
                "string" === (s = typeof i) && (a = G.exec(i)) && a[1] && (i = j(e, t, a), s = "number"), null != i && i == i && ("number" === s && (i += a && a[3] || (h.cssNumber[r] ? "" : "px")), p.clearCloneStyle || "" !== i || 0 !== t.indexOf("background") || (l[t] = "inherit"), o && "set" in o && void 0 === (i = o.set(e, i, n)) || (l[t] = i))
            }
        },
        css: function (e, t, i, n) {
            var a, s, o, r = h.camelCase(t);
            return t = h.cssProps[r] || (h.cssProps[r] = We(r) || r), (o = h.cssHooks[t] || h.cssHooks[r]) && "get" in o && (a = o.get(e, !0, i)), void 0 === a && (a = Ie(e, t, n)), "normal" === a && t in De && (a = De[t]), "" === i || i ? (s = parseFloat(a), !0 === i || isFinite(s) ? s || 0 : a) : a
        }
    }), h.each(["height", "width"], (function (e, t) {
        h.cssHooks[t] = {
            get: function (e, i, n) {
                if (i) return Ae.test(h.css(e, "display")) && 0 === e.offsetWidth ? Me(e, Le, (function () {
                    return Ue(e, t, n)
                })) : Ue(e, t, n)
            },
            set: function (e, i, n) {
                var a, s = n && Se(e),
                    o = n && Be(e, t, n, "border-box" === h.css(e, "boxSizing", !1, s), s);
                return o && (a = G.exec(i)) && "px" !== (a[3] || "px") && (e.style[t] = i, i = h.css(e, t)), Fe(0, i, o)
            }
        }
    })), h.cssHooks.marginLeft = Oe(p.reliableMarginLeft, (function (e, t) {
        if (t) return (parseFloat(Ie(e, "marginLeft")) || e.getBoundingClientRect().left - Me(e, {
            marginLeft: 0
        }, (function () {
            return e.getBoundingClientRect().left
        }))) + "px"
    })), h.cssHooks.marginRight = Oe(p.reliableMarginRight, (function (e, t) {
        if (t) return Me(e, {
            display: "inline-block"
        }, Ie, [e, "marginRight"])
    })), h.each({
        margin: "",
        padding: "",
        border: "Width"
    }, (function (e, t) {
        h.cssHooks[e + t] = {
            expand: function (i) {
                for (var n = 0, a = {}, s = "string" == typeof i ? i.split(" ") : [i]; n < 4; n++) a[e + $[n] + t] = s[n] || s[n - 2] || s[0];
                return a
            }
        }, Ee.test(e) || (h.cssHooks[e + t].set = Fe)
    })), h.fn.extend({
        css: function (e, t) {
            return D(this, (function (e, t, i) {
                var n, a, s = {},
                    o = 0;
                if (h.isArray(t)) {
                    for (n = Se(e), a = t.length; o < a; o++) s[t[o]] = h.css(e, t[o], !1, n);
                    return s
                }
                return void 0 !== i ? h.style(e, t, i) : h.css(e, t)
            }), e, t, arguments.length > 1)
        },
        show: function () {
            return He(this, !0)
        },
        hide: function () {
            return He(this)
        },
        toggle: function (e) {
            return "boolean" == typeof e ? e ? this.show() : this.hide() : this.each((function () {
                q(this) ? h(this).show() : h(this).hide()
            }))
        }
    }), h.Tween = ze, ze.prototype = {
        constructor: ze,
        init: function (e, t, i, n, a, s) {
            this.elem = e, this.prop = i, this.easing = a || h.easing._default, this.options = t, this.start = this.now = this.cur(), this.end = n, this.unit = s || (h.cssNumber[i] ? "" : "px")
        },
        cur: function () {
            var e = ze.propHooks[this.prop];
            return e && e.get ? e.get(this) : ze.propHooks._default.get(this)
        },
        run: function (e) {
            var t, i = ze.propHooks[this.prop];
            return this.options.duration ? this.pos = t = h.easing[this.easing](e, this.options.duration * e, 0, 1, this.options.duration) : this.pos = t = e, this.now = (this.end - this.start) * t + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), i && i.set ? i.set(this) : ze.propHooks._default.set(this), this
        }
    }, ze.prototype.init.prototype = ze.prototype, ze.propHooks = {
        _default: {
            get: function (e) {
                var t;
                return 1 !== e.elem.nodeType || null != e.elem[e.prop] && null == e.elem.style[e.prop] ? e.elem[e.prop] : (t = h.css(e.elem, e.prop, "")) && "auto" !== t ? t : 0
            },
            set: function (e) {
                h.fx.step[e.prop] ? h.fx.step[e.prop](e) : 1 !== e.elem.nodeType || null == e.elem.style[h.cssProps[e.prop]] && !h.cssHooks[e.prop] ? e.elem[e.prop] = e.now : h.style(e.elem, e.prop, e.now + e.unit)
            }
        }
    }, ze.propHooks.scrollTop = ze.propHooks.scrollLeft = {
        set: function (e) {
            e.elem.nodeType && e.elem.parentNode && (e.elem[e.prop] = e.now)
        }
    }, h.easing = {
        linear: function (e) {
            return e
        },
        swing: function (e) {
            return .5 - Math.cos(e * Math.PI) / 2
        },
        _default: "swing"
    }, h.fx = ze.prototype.init, h.fx.step = {};
    var Ge, $e, qe = /^(?:toggle|show|hide)$/,
        je = /queueHooks$/;

    function Ve() {
        return e.setTimeout((function () {
            Ge = void 0
        })), Ge = h.now()
    }

    function Ye(e, t) {
        var i, n = 0,
            a = {
                height: e
            };
        for (t = t ? 1 : 0; n < 4; n += 2 - t) a["margin" + (i = $[n])] = a["padding" + i] = e;
        return t && (a.opacity = a.width = e), a
    }

    function Ke(e, t, i) {
        for (var n, a = (Xe.tweeners[t] || []).concat(Xe.tweeners["*"]), s = 0, o = a.length; s < o; s++)
            if (n = a[s].call(i, t, e)) return n
    }

    function Xe(e, t, i) {
        var n, a, s = 0,
            o = Xe.prefilters.length,
            r = h.Deferred().always((function () {
                delete l.elem
            })),
            l = function () {
                if (a) return !1;
                for (var t = Ge || Ve(), i = Math.max(0, c.startTime + c.duration - t), n = 1 - (i / c.duration || 0), s = 0, o = c.tweens.length; s < o; s++) c.tweens[s].run(n);
                return r.notifyWith(e, [c, n, i]), n < 1 && o ? i : (r.resolveWith(e, [c]), !1)
            },
            c = r.promise({
                elem: e,
                props: h.extend({}, t),
                opts: h.extend(!0, {
                    specialEasing: {},
                    easing: h.easing._default
                }, i),
                originalProperties: t,
                originalOptions: i,
                startTime: Ge || Ve(),
                duration: i.duration,
                tweens: [],
                createTween: function (t, i) {
                    var n = h.Tween(e, c.opts, t, i, c.opts.specialEasing[t] || c.opts.easing);
                    return c.tweens.push(n), n
                },
                stop: function (t) {
                    var i = 0,
                        n = t ? c.tweens.length : 0;
                    if (a) return this;
                    for (a = !0; i < n; i++) c.tweens[i].run(1);
                    return t ? (r.notifyWith(e, [c, 1, 0]), r.resolveWith(e, [c, t])) : r.rejectWith(e, [c, t]), this
                }
            }),
            d = c.props;
        for (! function (e, t) {
            var i, n, a, s, o;
            for (i in e)
                if (a = t[n = h.camelCase(i)], s = e[i], h.isArray(s) && (a = s[1], s = e[i] = s[0]), i !== n && (e[n] = s, delete e[i]), (o = h.cssHooks[n]) && "expand" in o)
                    for (i in s = o.expand(s), delete e[n], s) i in e || (e[i] = s[i], t[i] = a);
                else t[n] = a
        }(d, c.opts.specialEasing); s < o; s++)
            if (n = Xe.prefilters[s].call(c, e, d, c.opts)) return h.isFunction(n.stop) && (h._queueHooks(c.elem, c.opts.queue).stop = h.proxy(n.stop, n)), n;
        return h.map(d, Ke, c), h.isFunction(c.opts.start) && c.opts.start.call(e, c), h.fx.timer(h.extend(l, {
            elem: e,
            anim: c,
            queue: c.opts.queue
        })), c.progress(c.opts.progress).done(c.opts.done, c.opts.complete).fail(c.opts.fail).always(c.opts.always)
    }
    h.Animation = h.extend(Xe, {
        tweeners: {
            "*": [function (e, t) {
                var i = this.createTween(e, t);
                return j(i.elem, e, G.exec(t), i), i
            }]
        },
        tweener: function (e, t) {
            h.isFunction(e) ? (t = e, e = ["*"]) : e = e.match(A);
            for (var i, n = 0, a = e.length; n < a; n++) i = e[n], Xe.tweeners[i] = Xe.tweeners[i] || [], Xe.tweeners[i].unshift(t)
        },
        prefilters: [function (e, t, i) {
            var n, a, s, o, r, l, c, d = this,
                p = {},
                u = e.style,
                f = e.nodeType && q(e),
                m = W.get(e, "fxshow");
            for (n in i.queue || (null == (r = h._queueHooks(e, "fx")).unqueued && (r.unqueued = 0, l = r.empty.fire, r.empty.fire = function () {
                r.unqueued || l()
            }), r.unqueued++, d.always((function () {
                d.always((function () {
                    r.unqueued--, h.queue(e, "fx").length || r.empty.fire()
                }))
            }))), 1 === e.nodeType && ("height" in t || "width" in t) && (i.overflow = [u.overflow, u.overflowX, u.overflowY], "inline" === ("none" === (c = h.css(e, "display")) ? W.get(e, "olddisplay") || ke(e.nodeName) : c) && "none" === h.css(e, "float") && (u.display = "inline-block")), i.overflow && (u.overflow = "hidden", d.always((function () {
                u.overflow = i.overflow[0], u.overflowX = i.overflow[1], u.overflowY = i.overflow[2]
            }))), t)
                if (a = t[n], qe.exec(a)) {
                    if (delete t[n], s = s || "toggle" === a, a === (f ? "hide" : "show")) {
                        if ("show" !== a || !m || void 0 === m[n]) continue;
                        f = !0
                    }
                    p[n] = m && m[n] || h.style(e, n)
                } else c = void 0;
            if (h.isEmptyObject(p)) "inline" === ("none" === c ? ke(e.nodeName) : c) && (u.display = c);
            else
                for (n in m ? "hidden" in m && (f = m.hidden) : m = W.access(e, "fxshow", {}), s && (m.hidden = !f), f ? h(e).show() : d.done((function () {
                    h(e).hide()
                })), d.done((function () {
                    var t;
                    for (t in W.remove(e, "fxshow"), p) h.style(e, t, p[t])
                })), p) o = Ke(f ? m[n] : 0, n, d), n in m || (m[n] = o.start, f && (o.end = o.start, o.start = "width" === n || "height" === n ? 1 : 0))
        }],
        prefilter: function (e, t) {
            t ? Xe.prefilters.unshift(e) : Xe.prefilters.push(e)
        }
    }), h.speed = function (e, t, i) {
        var n = e && "object" == typeof e ? h.extend({}, e) : {
            complete: i || !i && t || h.isFunction(e) && e,
            duration: e,
            easing: i && t || t && !h.isFunction(t) && t
        };
        return n.duration = h.fx.off ? 0 : "number" == typeof n.duration ? n.duration : n.duration in h.fx.speeds ? h.fx.speeds[n.duration] : h.fx.speeds._default, null != n.queue && !0 !== n.queue || (n.queue = "fx"), n.old = n.complete, n.complete = function () {
            h.isFunction(n.old) && n.old.call(this), n.queue && h.dequeue(this, n.queue)
        }, n
    }, h.fn.extend({
        fadeTo: function (e, t, i, n) {
            return this.filter(q).css("opacity", 0).show().end().animate({
                opacity: t
            }, e, i, n)
        },
        animate: function (e, t, i, n) {
            var a = h.isEmptyObject(e),
                s = h.speed(t, i, n),
                o = function () {
                    var t = Xe(this, h.extend({}, e), s);
                    (a || W.get(this, "finish")) && t.stop(!0)
                };
            return o.finish = o, a || !1 === s.queue ? this.each(o) : this.queue(s.queue, o)
        },
        stop: function (e, t, i) {
            var n = function (e) {
                var t = e.stop;
                delete e.stop, t(i)
            };
            return "string" != typeof e && (i = t, t = e, e = void 0), t && !1 !== e && this.queue(e || "fx", []), this.each((function () {
                var t = !0,
                    a = null != e && e + "queueHooks",
                    s = h.timers,
                    o = W.get(this);
                if (a) o[a] && o[a].stop && n(o[a]);
                else
                    for (a in o) o[a] && o[a].stop && je.test(a) && n(o[a]);
                for (a = s.length; a--;) s[a].elem !== this || null != e && s[a].queue !== e || (s[a].anim.stop(i), t = !1, s.splice(a, 1));
                !t && i || h.dequeue(this, e)
            }))
        },
        finish: function (e) {
            return !1 !== e && (e = e || "fx"), this.each((function () {
                var t, i = W.get(this),
                    n = i[e + "queue"],
                    a = i[e + "queueHooks"],
                    s = h.timers,
                    o = n ? n.length : 0;
                for (i.finish = !0, h.queue(this, e, []), a && a.stop && a.stop.call(this, !0), t = s.length; t--;) s[t].elem === this && s[t].queue === e && (s[t].anim.stop(!0), s.splice(t, 1));
                for (t = 0; t < o; t++) n[t] && n[t].finish && n[t].finish.call(this);
                delete i.finish
            }))
        }
    }), h.each(["toggle", "show", "hide"], (function (e, t) {
        var i = h.fn[t];
        h.fn[t] = function (e, n, a) {
            return null == e || "boolean" == typeof e ? i.apply(this, arguments) : this.animate(Ye(t, !0), e, n, a)
        }
    })), h.each({
        slideDown: Ye("show"),
        slideUp: Ye("hide"),
        slideToggle: Ye("toggle"),
        fadeIn: {
            opacity: "show"
        },
        fadeOut: {
            opacity: "hide"
        },
        fadeToggle: {
            opacity: "toggle"
        }
    }, (function (e, t) {
        h.fn[e] = function (e, i, n) {
            return this.animate(t, e, i, n)
        }
    })), h.timers = [], h.fx.tick = function () {
        var e, t = 0,
            i = h.timers;
        for (Ge = h.now(); t < i.length; t++)(e = i[t])() || i[t] !== e || i.splice(t--, 1);
        i.length || h.fx.stop(), Ge = void 0
    }, h.fx.timer = function (e) {
        h.timers.push(e), e() ? h.fx.start() : h.timers.pop()
    }, h.fx.interval = 13, h.fx.start = function () {
        $e || ($e = e.setInterval(h.fx.tick, h.fx.interval))
    }, h.fx.stop = function () {
        e.clearInterval($e), $e = null
    }, h.fx.speeds = {
        slow: 600,
        fast: 200,
        _default: 400
    }, h.fn.delay = function (t, i) {
        return t = h.fx && h.fx.speeds[t] || t, i = i || "fx", this.queue(i, (function (i, n) {
            var a = e.setTimeout(i, t);
            n.stop = function () {
                e.clearTimeout(a)
            }
        }))
    },
        function () {
            var e = n.createElement("input"),
                t = n.createElement("select"),
                i = t.appendChild(n.createElement("option"));
            e.type = "checkbox", p.checkOn = "" !== e.value, p.optSelected = i.selected, t.disabled = !0, p.optDisabled = !i.disabled, (e = n.createElement("input")).value = "t", e.type = "radio", p.radioValue = "t" === e.value
        }();
    var Qe, Je = h.expr.attrHandle;
    h.fn.extend({
        attr: function (e, t) {
            return D(this, h.attr, e, t, arguments.length > 1)
        },
        removeAttr: function (e) {
            return this.each((function () {
                h.removeAttr(this, e)
            }))
        }
    }), h.extend({
        attr: function (e, t, i) {
            var n, a, s = e.nodeType;
            if (3 !== s && 8 !== s && 2 !== s) return void 0 === e.getAttribute ? h.prop(e, t, i) : (1 === s && h.isXMLDoc(e) || (t = t.toLowerCase(), a = h.attrHooks[t] || (h.expr.match.bool.test(t) ? Qe : void 0)), void 0 !== i ? null === i ? void h.removeAttr(e, t) : a && "set" in a && void 0 !== (n = a.set(e, i, t)) ? n : (e.setAttribute(t, i + ""), i) : a && "get" in a && null !== (n = a.get(e, t)) ? n : null == (n = h.find.attr(e, t)) ? void 0 : n)
        },
        attrHooks: {
            type: {
                set: function (e, t) {
                    if (!p.radioValue && "radio" === t && h.nodeName(e, "input")) {
                        var i = e.value;
                        return e.setAttribute("type", t), i && (e.value = i), t
                    }
                }
            }
        },
        removeAttr: function (e, t) {
            var i, n, a = 0,
                s = t && t.match(A);
            if (s && 1 === e.nodeType)
                for (; i = s[a++];) n = h.propFix[i] || i, h.expr.match.bool.test(i) && (e[n] = !1), e.removeAttribute(i)
        }
    }), Qe = {
        set: function (e, t, i) {
            return !1 === t ? h.removeAttr(e, i) : e.setAttribute(i, i), i
        }
    }, h.each(h.expr.match.bool.source.match(/\w+/g), (function (e, t) {
        var i = Je[t] || h.find.attr;
        Je[t] = function (e, t, n) {
            var a, s;
            return n || (s = Je[t], Je[t] = a, a = null != i(e, t, n) ? t.toLowerCase() : null, Je[t] = s), a
        }
    }));
    var Ze = /^(?:input|select|textarea|button)$/i,
        et = /^(?:a|area)$/i;
    h.fn.extend({
        prop: function (e, t) {
            return D(this, h.prop, e, t, arguments.length > 1)
        },
        removeProp: function (e) {
            return this.each((function () {
                delete this[h.propFix[e] || e]
            }))
        }
    }), h.extend({
        prop: function (e, t, i) {
            var n, a, s = e.nodeType;
            if (3 !== s && 8 !== s && 2 !== s) return 1 === s && h.isXMLDoc(e) || (t = h.propFix[t] || t, a = h.propHooks[t]), void 0 !== i ? a && "set" in a && void 0 !== (n = a.set(e, i, t)) ? n : e[t] = i : a && "get" in a && null !== (n = a.get(e, t)) ? n : e[t]
        },
        propHooks: {
            tabIndex: {
                get: function (e) {
                    var t = h.find.attr(e, "tabindex");
                    return t ? parseInt(t, 10) : Ze.test(e.nodeName) || et.test(e.nodeName) && e.href ? 0 : -1
                }
            }
        },
        propFix: {
            for: "htmlFor",
            class: "className"
        }
    }), p.optSelected || (h.propHooks.selected = {
        get: function (e) {
            var t = e.parentNode;
            return t && t.parentNode && t.parentNode.selectedIndex, null
        },
        set: function (e) {
            var t = e.parentNode;
            t && (t.selectedIndex, t.parentNode && t.parentNode.selectedIndex)
        }
    }), h.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], (function () {
        h.propFix[this.toLowerCase()] = this
    }));
    var tt = /[\t\r\n\f]/g;

    function it(e) {
        return e.getAttribute && e.getAttribute("class") || ""
    }
    h.fn.extend({
        addClass: function (e) {
            var t, i, n, a, s, o, r, l = 0;
            if (h.isFunction(e)) return this.each((function (t) {
                h(this).addClass(e.call(this, t, it(this)))
            }));
            if ("string" == typeof e && e)
                for (t = e.match(A) || []; i = this[l++];)
                    if (a = it(i), n = 1 === i.nodeType && (" " + a + " ").replace(tt, " ")) {
                        for (o = 0; s = t[o++];) n.indexOf(" " + s + " ") < 0 && (n += s + " ");
                        a !== (r = h.trim(n)) && i.setAttribute("class", r)
                    } return this
        },
        removeClass: function (e) {
            var t, i, n, a, s, o, r, l = 0;
            if (h.isFunction(e)) return this.each((function (t) {
                h(this).removeClass(e.call(this, t, it(this)))
            }));
            if (!arguments.length) return this.attr("class", "");
            if ("string" == typeof e && e)
                for (t = e.match(A) || []; i = this[l++];)
                    if (a = it(i), n = 1 === i.nodeType && (" " + a + " ").replace(tt, " ")) {
                        for (o = 0; s = t[o++];)
                            for (; n.indexOf(" " + s + " ") > -1;) n = n.replace(" " + s + " ", " ");
                        a !== (r = h.trim(n)) && i.setAttribute("class", r)
                    } return this
        },
        toggleClass: function (e, t) {
            var i = typeof e;
            return "boolean" == typeof t && "string" === i ? t ? this.addClass(e) : this.removeClass(e) : h.isFunction(e) ? this.each((function (i) {
                h(this).toggleClass(e.call(this, i, it(this), t), t)
            })) : this.each((function () {
                var t, n, a, s;
                if ("string" === i)
                    for (n = 0, a = h(this), s = e.match(A) || []; t = s[n++];) a.hasClass(t) ? a.removeClass(t) : a.addClass(t);
                else void 0 !== e && "boolean" !== i || ((t = it(this)) && W.set(this, "__className__", t), this.setAttribute && this.setAttribute("class", t || !1 === e ? "" : W.get(this, "__className__") || ""))
            }))
        },
        hasClass: function (e) {
            var t, i, n = 0;
            for (t = " " + e + " "; i = this[n++];)
                if (1 === i.nodeType && (" " + it(i) + " ").replace(tt, " ").indexOf(t) > -1) return !0;
            return !1
        }
    });
    var nt = /\r/g,
        at = /[\x20\t\r\n\f]+/g;
    h.fn.extend({
        val: function (e) {
            var t, i, n, a = this[0];
            return arguments.length ? (n = h.isFunction(e), this.each((function (i) {
                var a;
                1 === this.nodeType && (null == (a = n ? e.call(this, i, h(this).val()) : e) ? a = "" : "number" == typeof a ? a += "" : h.isArray(a) && (a = h.map(a, (function (e) {
                    return null == e ? "" : e + ""
                }))), (t = h.valHooks[this.type] || h.valHooks[this.nodeName.toLowerCase()]) && "set" in t && void 0 !== t.set(this, a, "value") || (this.value = a))
            }))) : a ? (t = h.valHooks[a.type] || h.valHooks[a.nodeName.toLowerCase()]) && "get" in t && void 0 !== (i = t.get(a, "value")) ? i : "string" == typeof (i = a.value) ? i.replace(nt, "") : null == i ? "" : i : void 0
        }
    }), h.extend({
        valHooks: {
            option: {
                get: function (e) {
                    var t = h.find.attr(e, "value");
                    return null != t ? t : h.trim(h.text(e)).replace(at, " ")
                }
            },
            select: {
                get: function (e) {
                    for (var t, i, n = e.options, a = e.selectedIndex, s = "select-one" === e.type || a < 0, o = s ? null : [], r = s ? a + 1 : n.length, l = a < 0 ? r : s ? a : 0; l < r; l++)
                        if (((i = n[l]).selected || l === a) && (p.optDisabled ? !i.disabled : null === i.getAttribute("disabled")) && (!i.parentNode.disabled || !h.nodeName(i.parentNode, "optgroup"))) {
                            if (t = h(i).val(), s) return t;
                            o.push(t)
                        } return o
                },
                set: function (e, t) {
                    for (var i, n, a = e.options, s = h.makeArray(t), o = a.length; o--;)((n = a[o]).selected = h.inArray(h.valHooks.option.get(n), s) > -1) && (i = !0);
                    return i || (e.selectedIndex = -1), s
                }
            }
        }
    }), h.each(["radio", "checkbox"], (function () {
        h.valHooks[this] = {
            set: function (e, t) {
                if (h.isArray(t)) return e.checked = h.inArray(h(e).val(), t) > -1
            }
        }, p.checkOn || (h.valHooks[this].get = function (e) {
            return null === e.getAttribute("value") ? "on" : e.value
        })
    }));
    var st = /^(?:focusinfocus|focusoutblur)$/;
    h.extend(h.event, {
        trigger: function (t, i, a, s) {
            var o, r, l, c, p, u, f, m = [a || n],
                g = d.call(t, "type") ? t.type : t,
                v = d.call(t, "namespace") ? t.namespace.split(".") : [];
            if (r = l = a = a || n, 3 !== a.nodeType && 8 !== a.nodeType && !st.test(g + h.event.triggered) && (g.indexOf(".") > -1 && (v = g.split("."), g = v.shift(), v.sort()), p = g.indexOf(":") < 0 && "on" + g, (t = t[h.expando] ? t : new h.Event(g, "object" == typeof t && t)).isTrigger = s ? 2 : 3, t.namespace = v.join("."), t.rnamespace = t.namespace ? new RegExp("(^|\\.)" + v.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, t.result = void 0, t.target || (t.target = a), i = null == i ? [t] : h.makeArray(i, [t]), f = h.event.special[g] || {}, s || !f.trigger || !1 !== f.trigger.apply(a, i))) {
                if (!s && !f.noBubble && !h.isWindow(a)) {
                    for (c = f.delegateType || g, st.test(c + g) || (r = r.parentNode); r; r = r.parentNode) m.push(r), l = r;
                    l === (a.ownerDocument || n) && m.push(l.defaultView || l.parentWindow || e)
                }
                for (o = 0;
                    (r = m[o++]) && !t.isPropagationStopped();) t.type = o > 1 ? c : f.bindType || g, (u = (W.get(r, "events") || {})[t.type] && W.get(r, "handle")) && u.apply(r, i), (u = p && r[p]) && u.apply && N(r) && (t.result = u.apply(r, i), !1 === t.result && t.preventDefault());
                return t.type = g, s || t.isDefaultPrevented() || f._default && !1 !== f._default.apply(m.pop(), i) || !N(a) || p && h.isFunction(a[g]) && !h.isWindow(a) && ((l = a[p]) && (a[p] = null), h.event.triggered = g, a[g](), h.event.triggered = void 0, l && (a[p] = l)), t.result
            }
        },
        simulate: function (e, t, i) {
            var n = h.extend(new h.Event, i, {
                type: e,
                isSimulated: !0
            });
            h.event.trigger(n, null, t)
        }
    }), h.fn.extend({
        trigger: function (e, t) {
            return this.each((function () {
                h.event.trigger(e, t, this)
            }))
        },
        triggerHandler: function (e, t) {
            var i = this[0];
            if (i) return h.event.trigger(e, t, i, !0)
        }
    }), h.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), (function (e, t) {
        h.fn[t] = function (e, i) {
            return arguments.length > 0 ? this.on(t, null, e, i) : this.trigger(t)
        }
    })), h.fn.extend({
        hover: function (e, t) {
            return this.mouseenter(e).mouseleave(t || e)
        }
    }), p.focusin = "onfocusin" in e, p.focusin || h.each({
        focus: "focusin",
        blur: "focusout"
    }, (function (e, t) {
        var i = function (e) {
            h.event.simulate(t, e.target, h.event.fix(e))
        };
        h.event.special[t] = {
            setup: function () {
                var n = this.ownerDocument || this,
                    a = W.access(n, t);
                a || n.addEventListener(e, i, !0), W.access(n, t, (a || 0) + 1)
            },
            teardown: function () {
                var n = this.ownerDocument || this,
                    a = W.access(n, t) - 1;
                a ? W.access(n, t, a) : (n.removeEventListener(e, i, !0), W.remove(n, t))
            }
        }
    }));
    var ot = e.location,
        rt = h.now(),
        lt = /\?/;
    h.parseJSON = function (e) {
        return JSON.parse(e + "")
    }, h.parseXML = function (t) {
        var i;
        if (!t || "string" != typeof t) return null;
        try {
            i = (new e.DOMParser).parseFromString(t, "text/xml")
        } catch (e) {
            i = void 0
        }
        return i && !i.getElementsByTagName("parsererror").length || h.error("Invalid XML: " + t), i
    };
    var ct = /#.*$/,
        dt = /([?&])_=[^&]*/,
        pt = /^(.*?):[ \t]*([^\r\n]*)$/gm,
        ut = /^(?:GET|HEAD)$/,
        ht = /^\/\//,
        ft = {},
        mt = {},
        gt = "*/".concat("*"),
        vt = n.createElement("a");

    function bt(e) {
        return function (t, i) {
            "string" != typeof t && (i = t, t = "*");
            var n, a = 0,
                s = t.toLowerCase().match(A) || [];
            if (h.isFunction(i))
                for (; n = s[a++];) "+" === n[0] ? (n = n.slice(1) || "*", (e[n] = e[n] || []).unshift(i)) : (e[n] = e[n] || []).push(i)
        }
    }

    function yt(e, t, i, n) {
        var a = {},
            s = e === mt;

        function o(r) {
            var l;
            return a[r] = !0, h.each(e[r] || [], (function (e, r) {
                var c = r(t, i, n);
                return "string" != typeof c || s || a[c] ? s ? !(l = c) : void 0 : (t.dataTypes.unshift(c), o(c), !1)
            })), l
        }
        return o(t.dataTypes[0]) || !a["*"] && o("*")
    }

    function wt(e, t) {
        var i, n, a = h.ajaxSettings.flatOptions || {};
        for (i in t) void 0 !== t[i] && ((a[i] ? e : n || (n = {}))[i] = t[i]);
        return n && h.extend(!0, e, n), e
    }
    vt.href = ot.href, h.extend({
        active: 0,
        lastModified: {},
        etag: {},
        ajaxSettings: {
            url: ot.href,
            type: "GET",
            isLocal: /^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ot.protocol),
            global: !0,
            processData: !0,
            async: !0,
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            accepts: {
                "*": gt,
                text: "text/plain",
                html: "text/html",
                xml: "application/xml, text/xml",
                json: "application/json, text/javascript"
            },
            contents: {
                xml: /\bxml\b/,
                html: /\bhtml/,
                json: /\bjson\b/
            },
            responseFields: {
                xml: "responseXML",
                text: "responseText",
                json: "responseJSON"
            },
            converters: {
                "* text": String,
                "text html": !0,
                "text json": h.parseJSON,
                "text xml": h.parseXML
            },
            flatOptions: {
                url: !0,
                context: !0
            }
        },
        ajaxSetup: function (e, t) {
            return t ? wt(wt(e, h.ajaxSettings), t) : wt(h.ajaxSettings, e)
        },
        ajaxPrefilter: bt(ft),
        ajaxTransport: bt(mt),
        ajax: function (t, i) {
            "object" == typeof t && (i = t, t = void 0), i = i || {};
            var a, s, o, r, l, c, d, p, u = h.ajaxSetup({}, i),
                f = u.context || u,
                m = u.context && (f.nodeType || f.jquery) ? h(f) : h.event,
                g = h.Deferred(),
                v = h.Callbacks("once memory"),
                b = u.statusCode || {},
                y = {},
                w = {},
                _ = 0,
                T = "canceled",
                C = {
                    readyState: 0,
                    getResponseHeader: function (e) {
                        var t;
                        if (2 === _) {
                            if (!r)
                                for (r = {}; t = pt.exec(o);) r[t[1].toLowerCase()] = t[2];
                            t = r[e.toLowerCase()]
                        }
                        return null == t ? null : t
                    },
                    getAllResponseHeaders: function () {
                        return 2 === _ ? o : null
                    },
                    setRequestHeader: function (e, t) {
                        var i = e.toLowerCase();
                        return _ || (e = w[i] = w[i] || e, y[e] = t), this
                    },
                    overrideMimeType: function (e) {
                        return _ || (u.mimeType = e), this
                    },
                    statusCode: function (e) {
                        var t;
                        if (e)
                            if (_ < 2)
                                for (t in e) b[t] = [b[t], e[t]];
                            else C.always(e[C.status]);
                        return this
                    },
                    abort: function (e) {
                        var t = e || T;
                        return a && a.abort(t), k(0, t), this
                    }
                };
            if (g.promise(C).complete = v.add, C.success = C.done, C.error = C.fail, u.url = ((t || u.url || ot.href) + "").replace(ct, "").replace(ht, ot.protocol + "//"), u.type = i.method || i.type || u.method || u.type, u.dataTypes = h.trim(u.dataType || "*").toLowerCase().match(A) || [""], null == u.crossDomain) {
                c = n.createElement("a");
                try {
                    c.href = u.url, c.href = c.href, u.crossDomain = vt.protocol + "//" + vt.host != c.protocol + "//" + c.host
                } catch (e) {
                    u.crossDomain = !0
                }
            }
            if (u.data && u.processData && "string" != typeof u.data && (u.data = h.param(u.data, u.traditional)), yt(ft, u, i, C), 2 === _) return C;
            for (p in (d = h.event && u.global) && 0 == h.active++ && h.event.trigger("ajaxStart"), u.type = u.type.toUpperCase(), u.hasContent = !ut.test(u.type), s = u.url, u.hasContent || (u.data && (s = u.url += (lt.test(s) ? "&" : "?") + u.data, delete u.data), !1 === u.cache && (u.url = dt.test(s) ? s.replace(dt, "$1_=" + rt++) : s + (lt.test(s) ? "&" : "?") + "_=" + rt++)), u.ifModified && (h.lastModified[s] && C.setRequestHeader("If-Modified-Since", h.lastModified[s]), h.etag[s] && C.setRequestHeader("If-None-Match", h.etag[s])), (u.data && u.hasContent && !1 !== u.contentType || i.contentType) && C.setRequestHeader("Content-Type", u.contentType), C.setRequestHeader("Accept", u.dataTypes[0] && u.accepts[u.dataTypes[0]] ? u.accepts[u.dataTypes[0]] + ("*" !== u.dataTypes[0] ? ", " + gt + "; q=0.01" : "") : u.accepts["*"]), u.headers) C.setRequestHeader(p, u.headers[p]);
            if (u.beforeSend && (!1 === u.beforeSend.call(f, C, u) || 2 === _)) return C.abort();
            for (p in T = "abort", {
                success: 1,
                error: 1,
                complete: 1
            }) C[p](u[p]);
            if (a = yt(mt, u, i, C)) {
                if (C.readyState = 1, d && m.trigger("ajaxSend", [C, u]), 2 === _) return C;
                u.async && u.timeout > 0 && (l = e.setTimeout((function () {
                    C.abort("timeout")
                }), u.timeout));
                try {
                    _ = 1, a.send(y, k)
                } catch (e) {
                    if (!(_ < 2)) throw e;
                    k(-1, e)
                }
            } else k(-1, "No Transport");

            function k(t, i, n, r) {
                var c, p, y, w, T, k = i;
                2 !== _ && (_ = 2, l && e.clearTimeout(l), a = void 0, o = r || "", C.readyState = t > 0 ? 4 : 0, c = t >= 200 && t < 300 || 304 === t, n && (w = function (e, t, i) {
                    for (var n, a, s, o, r = e.contents, l = e.dataTypes;
                        "*" === l[0];) l.shift(), void 0 === n && (n = e.mimeType || t.getResponseHeader("Content-Type"));
                    if (n)
                        for (a in r)
                            if (r[a] && r[a].test(n)) {
                                l.unshift(a);
                                break
                            } if (l[0] in i) s = l[0];
                    else {
                        for (a in i) {
                            if (!l[0] || e.converters[a + " " + l[0]]) {
                                s = a;
                                break
                            }
                            o || (o = a)
                        }
                        s = s || o
                    }
                    if (s) return s !== l[0] && l.unshift(s), i[s]
                }(u, C, n)), w = function (e, t, i, n) {
                    var a, s, o, r, l, c = {},
                        d = e.dataTypes.slice();
                    if (d[1])
                        for (o in e.converters) c[o.toLowerCase()] = e.converters[o];
                    for (s = d.shift(); s;)
                        if (e.responseFields[s] && (i[e.responseFields[s]] = t), !l && n && e.dataFilter && (t = e.dataFilter(t, e.dataType)), l = s, s = d.shift())
                            if ("*" === s) s = l;
                            else if ("*" !== l && l !== s) {
                                if (!(o = c[l + " " + s] || c["* " + s]))
                                    for (a in c)
                                        if ((r = a.split(" "))[1] === s && (o = c[l + " " + r[0]] || c["* " + r[0]])) {
                                            !0 === o ? o = c[a] : !0 !== c[a] && (s = r[0], d.unshift(r[1]));
                                            break
                                        } if (!0 !== o)
                                    if (o && e.throws) t = o(t);
                                    else try {
                                        t = o(t)
                                    } catch (e) {
                                        return {
                                            state: "parsererror",
                                            error: o ? e : "No conversion from " + l + " to " + s
                                        }
                                    }
                            }
                    return {
                        state: "success",
                        data: t
                    }
                }(u, w, C, c), c ? (u.ifModified && ((T = C.getResponseHeader("Last-Modified")) && (h.lastModified[s] = T), (T = C.getResponseHeader("etag")) && (h.etag[s] = T)), 204 === t || "HEAD" === u.type ? k = "nocontent" : 304 === t ? k = "notmodified" : (k = w.state, p = w.data, c = !(y = w.error))) : (y = k, !t && k || (k = "error", t < 0 && (t = 0))), C.status = t, C.statusText = (i || k) + "", c ? g.resolveWith(f, [p, k, C]) : g.rejectWith(f, [C, k, y]), C.statusCode(b), b = void 0, d && m.trigger(c ? "ajaxSuccess" : "ajaxError", [C, u, c ? p : y]), v.fireWith(f, [C, k]), d && (m.trigger("ajaxComplete", [C, u]), --h.active || h.event.trigger("ajaxStop")))
            }
            return C
        },
        getJSON: function (e, t, i) {
            return h.get(e, t, i, "json")
        },
        getScript: function (e, t) {
            return h.get(e, void 0, t, "script")
        }
    }), h.each(["get", "post"], (function (e, t) {
        h[t] = function (e, i, n, a) {
            return h.isFunction(i) && (a = a || n, n = i, i = void 0), h.ajax(h.extend({
                url: e,
                type: t,
                dataType: a,
                data: i,
                success: n
            }, h.isPlainObject(e) && e))
        }
    })), h._evalUrl = function (e) {
        return h.ajax({
            url: e,
            type: "GET",
            dataType: "script",
            async: !1,
            global: !1,
            throws: !0
        })
    }, h.fn.extend({
        wrapAll: function (e) {
            var t;
            return h.isFunction(e) ? this.each((function (t) {
                h(this).wrapAll(e.call(this, t))
            })) : (this[0] && (t = h(e, this[0].ownerDocument).eq(0).clone(!0), this[0].parentNode && t.insertBefore(this[0]), t.map((function () {
                for (var e = this; e.firstElementChild;) e = e.firstElementChild;
                return e
            })).append(this)), this)
        },
        wrapInner: function (e) {
            return h.isFunction(e) ? this.each((function (t) {
                h(this).wrapInner(e.call(this, t))
            })) : this.each((function () {
                var t = h(this),
                    i = t.contents();
                i.length ? i.wrapAll(e) : t.append(e)
            }))
        },
        wrap: function (e) {
            var t = h.isFunction(e);
            return this.each((function (i) {
                h(this).wrapAll(t ? e.call(this, i) : e)
            }))
        },
        unwrap: function () {
            return this.parent().each((function () {
                h.nodeName(this, "body") || h(this).replaceWith(this.childNodes)
            })).end()
        }
    }), h.expr.filters.hidden = function (e) {
        return !h.expr.filters.visible(e)
    }, h.expr.filters.visible = function (e) {
        return e.offsetWidth > 0 || e.offsetHeight > 0 || e.getClientRects().length > 0
    };
    var _t = /%20/g,
        Tt = /\[\]$/,
        Ct = /\r?\n/g,
        kt = /^(?:submit|button|image|reset|file)$/i,
        Et = /^(?:input|select|textarea|keygen)/i;

    function xt(e, t, i, n) {
        var a;
        if (h.isArray(t)) h.each(t, (function (t, a) {
            i || Tt.test(e) ? n(e, a) : xt(e + "[" + ("object" == typeof a && null != a ? t : "") + "]", a, i, n)
        }));
        else if (i || "object" !== h.type(t)) n(e, t);
        else
            for (a in t) xt(e + "[" + a + "]", t[a], i, n)
    }
    h.param = function (e, t) {
        var i, n = [],
            a = function (e, t) {
                t = h.isFunction(t) ? t() : null == t ? "" : t, n[n.length] = encodeURIComponent(e) + "=" + encodeURIComponent(t)
            };
        if (void 0 === t && (t = h.ajaxSettings && h.ajaxSettings.traditional), h.isArray(e) || e.jquery && !h.isPlainObject(e)) h.each(e, (function () {
            a(this.name, this.value)
        }));
        else
            for (i in e) xt(i, e[i], t, a);
        return n.join("&").replace(_t, "+")
    }, h.fn.extend({
        serialize: function () {
            return h.param(this.serializeArray())
        },
        serializeArray: function () {
            return this.map((function () {
                var e = h.prop(this, "elements");
                return e ? h.makeArray(e) : this
            })).filter((function () {
                var e = this.type;
                return this.name && !h(this).is(":disabled") && Et.test(this.nodeName) && !kt.test(e) && (this.checked || !V.test(e))
            })).map((function (e, t) {
                var i = h(this).val();
                return null == i ? null : h.isArray(i) ? h.map(i, (function (e) {
                    return {
                        name: t.name,
                        value: e.replace(Ct, "\r\n")
                    }
                })) : {
                    name: t.name,
                    value: i.replace(Ct, "\r\n")
                }
            })).get()
        }
    }), h.ajaxSettings.xhr = function () {
        try {
            return new e.XMLHttpRequest
        } catch (e) { }
    };
    var St = {
        0: 200,
        1223: 204
    },
        Mt = h.ajaxSettings.xhr();
    p.cors = !!Mt && "withCredentials" in Mt, p.ajax = Mt = !!Mt, h.ajaxTransport((function (t) {
        var i, n;
        if (p.cors || Mt && !t.crossDomain) return {
            send: function (a, s) {
                var o, r = t.xhr();
                if (r.open(t.type, t.url, t.async, t.username, t.password), t.xhrFields)
                    for (o in t.xhrFields) r[o] = t.xhrFields[o];
                for (o in t.mimeType && r.overrideMimeType && r.overrideMimeType(t.mimeType), t.crossDomain || a["X-Requested-With"] || (a["X-Requested-With"] = "XMLHttpRequest"), a) r.setRequestHeader(o, a[o]);
                i = function (e) {
                    return function () {
                        i && (i = n = r.onload = r.onerror = r.onabort = r.onreadystatechange = null, "abort" === e ? r.abort() : "error" === e ? "number" != typeof r.status ? s(0, "error") : s(r.status, r.statusText) : s(St[r.status] || r.status, r.statusText, "text" !== (r.responseType || "text") || "string" != typeof r.responseText ? {
                            binary: r.response
                        } : {
                            text: r.responseText
                        }, r.getAllResponseHeaders()))
                    }
                }, r.onload = i(), n = r.onerror = i("error"), void 0 !== r.onabort ? r.onabort = n : r.onreadystatechange = function () {
                    4 === r.readyState && e.setTimeout((function () {
                        i && n()
                    }))
                }, i = i("abort");
                try {
                    r.send(t.hasContent && t.data || null)
                } catch (e) {
                    if (i) throw e
                }
            },
            abort: function () {
                i && i()
            }
        }
    })), h.ajaxSetup({
        accepts: {
            script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
        },
        contents: {
            script: /\b(?:java|ecma)script\b/
        },
        converters: {
            "text script": function (e) {
                return h.globalEval(e), e
            }
        }
    }), h.ajaxPrefilter("script", (function (e) {
        void 0 === e.cache && (e.cache = !1), e.crossDomain && (e.type = "GET")
    })), h.ajaxTransport("script", (function (e) {
        var t, i;
        if (e.crossDomain) return {
            send: function (a, s) {
                t = h("<script>").prop({
                    charset: e.scriptCharset,
                    src: e.url
                }).on("load error", i = function (e) {
                    t.remove(), i = null, e && s("error" === e.type ? 404 : 200, e.type)
                }), n.head.appendChild(t[0])
            },
            abort: function () {
                i && i()
            }
        }
    }));
    var Pt = [],
        It = /(=)\?(?=&|$)|\?\?/;
    h.ajaxSetup({
        jsonp: "callback",
        jsonpCallback: function () {
            var e = Pt.pop() || h.expando + "_" + rt++;
            return this[e] = !0, e
        }
    }), h.ajaxPrefilter("json jsonp", (function (t, i, n) {
        var a, s, o, r = !1 !== t.jsonp && (It.test(t.url) ? "url" : "string" == typeof t.data && 0 === (t.contentType || "").indexOf("application/x-www-form-urlencoded") && It.test(t.data) && "data");
        if (r || "jsonp" === t.dataTypes[0]) return a = t.jsonpCallback = h.isFunction(t.jsonpCallback) ? t.jsonpCallback() : t.jsonpCallback, r ? t[r] = t[r].replace(It, "$1" + a) : !1 !== t.jsonp && (t.url += (lt.test(t.url) ? "&" : "?") + t.jsonp + "=" + a), t.converters["script json"] = function () {
            return o || h.error(a + " was not called"), o[0]
        }, t.dataTypes[0] = "json", s = e[a], e[a] = function () {
            o = arguments
        }, n.always((function () {
            void 0 === s ? h(e).removeProp(a) : e[a] = s, t[a] && (t.jsonpCallback = i.jsonpCallback, Pt.push(a)), o && h.isFunction(s) && s(o[0]), o = s = void 0
        })), "script"
    })), h.parseHTML = function (e, t, i) {
        if (!e || "string" != typeof e) return null;
        "boolean" == typeof t && (i = t, t = !1), t = t || n;
        var a = C.exec(e),
            s = !i && [];
        return a ? [t.createElement(a[1])] : (a = ie([e], t, s), s && s.length && h(s).remove(), h.merge([], a.childNodes))
    };
    var Ot = h.fn.load;

    function At(e) {
        return h.isWindow(e) ? e : 9 === e.nodeType && e.defaultView
    }
    h.fn.load = function (e, t, i) {
        if ("string" != typeof e && Ot) return Ot.apply(this, arguments);
        var n, a, s, o = this,
            r = e.indexOf(" ");
        return r > -1 && (n = h.trim(e.slice(r)), e = e.slice(0, r)), h.isFunction(t) ? (i = t, t = void 0) : t && "object" == typeof t && (a = "POST"), o.length > 0 && h.ajax({
            url: e,
            type: a || "GET",
            dataType: "html",
            data: t
        }).done((function (e) {
            s = arguments, o.html(n ? h("<div>").append(h.parseHTML(e)).find(n) : e)
        })).always(i && function (e, t) {
            o.each((function () {
                i.apply(this, s || [e.responseText, t, e])
            }))
        }), this
    }, h.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], (function (e, t) {
        h.fn[t] = function (e) {
            return this.on(t, e)
        }
    })), h.expr.filters.animated = function (e) {
        return h.grep(h.timers, (function (t) {
            return e === t.elem
        })).length
    }, h.offset = {
        setOffset: function (e, t, i) {
            var n, a, s, o, r, l, c = h.css(e, "position"),
                d = h(e),
                p = {};
            "static" === c && (e.style.position = "relative"), r = d.offset(), s = h.css(e, "top"), l = h.css(e, "left"), ("absolute" === c || "fixed" === c) && (s + l).indexOf("auto") > -1 ? (o = (n = d.position()).top, a = n.left) : (o = parseFloat(s) || 0, a = parseFloat(l) || 0), h.isFunction(t) && (t = t.call(e, i, h.extend({}, r))), null != t.top && (p.top = t.top - r.top + o), null != t.left && (p.left = t.left - r.left + a), "using" in t ? t.using.call(e, p) : d.css(p)
        }
    }, h.fn.extend({
        offset: function (e) {
            if (arguments.length) return void 0 === e ? this : this.each((function (t) {
                h.offset.setOffset(this, e, t)
            }));
            var t, i, n = this[0],
                a = {
                    top: 0,
                    left: 0
                },
                s = n && n.ownerDocument;
            return s ? (t = s.documentElement, h.contains(t, n) ? (a = n.getBoundingClientRect(), i = At(s), {
                top: a.top + i.pageYOffset - t.clientTop,
                left: a.left + i.pageXOffset - t.clientLeft
            }) : a) : void 0
        },
        position: function () {
            if (this[0]) {
                var e, t, i = this[0],
                    n = {
                        top: 0,
                        left: 0
                    };
                return "fixed" === h.css(i, "position") ? t = i.getBoundingClientRect() : (e = this.offsetParent(), t = this.offset(), h.nodeName(e[0], "html") || (n = e.offset()), n.top += h.css(e[0], "borderTopWidth", !0), n.left += h.css(e[0], "borderLeftWidth", !0)), {
                    top: t.top - n.top - h.css(i, "marginTop", !0),
                    left: t.left - n.left - h.css(i, "marginLeft", !0)
                }
            }
        },
        offsetParent: function () {
            return this.map((function () {
                for (var e = this.offsetParent; e && "static" === h.css(e, "position");) e = e.offsetParent;
                return e || Pe
            }))
        }
    }), h.each({
        scrollLeft: "pageXOffset",
        scrollTop: "pageYOffset"
    }, (function (e, t) {
        var i = "pageYOffset" === t;
        h.fn[e] = function (n) {
            return D(this, (function (e, n, a) {
                var s = At(e);
                if (void 0 === a) return s ? s[t] : e[n];
                s ? s.scrollTo(i ? s.pageXOffset : a, i ? a : s.pageYOffset) : e[n] = a
            }), e, n, arguments.length)
        }
    })), h.each(["top", "left"], (function (e, t) {
        h.cssHooks[t] = Oe(p.pixelPosition, (function (e, i) {
            if (i) return i = Ie(e, t), xe.test(i) ? h(e).position()[t] + "px" : i
        }))
    })), h.each({
        Height: "height",
        Width: "width"
    }, (function (e, t) {
        h.each({
            padding: "inner" + e,
            content: t,
            "": "outer" + e
        }, (function (i, n) {
            h.fn[n] = function (n, a) {
                var s = arguments.length && (i || "boolean" != typeof n),
                    o = i || (!0 === n || !0 === a ? "margin" : "border");
                return D(this, (function (t, i, n) {
                    var a;
                    return h.isWindow(t) ? t.document.documentElement["client" + e] : 9 === t.nodeType ? (a = t.documentElement, Math.max(t.body["scroll" + e], a["scroll" + e], t.body["offset" + e], a["offset" + e], a["client" + e])) : void 0 === n ? h.css(t, i, o) : h.style(t, i, n, o)
                }), t, s ? n : void 0, s, null)
            }
        }))
    })), h.fn.extend({
        bind: function (e, t, i) {
            return this.on(e, null, t, i)
        },
        unbind: function (e, t) {
            return this.off(e, null, t)
        },
        delegate: function (e, t, i, n) {
            return this.on(t, e, i, n)
        },
        undelegate: function (e, t, i) {
            return 1 === arguments.length ? this.off(e, "**") : this.off(t, e || "**", i)
        },
        size: function () {
            return this.length
        }
    }), h.fn.andSelf = h.fn.addBack, "function" == typeof define && define.amd && define("jquery", [], (function () {
        return h
    }));
    var Lt = e.jQuery,
        Dt = e.$;
    return h.noConflict = function (t) {
        return e.$ === h && (e.$ = Dt), t && e.jQuery === h && (e.jQuery = Lt), h
    }, t || (e.jQuery = e.$ = h), h
}))
    /*! jQuery UI - v1.12.1 - 2016-09-14
     * http://jqueryui.com
     * Includes: widget.js, position.js, data.js, disable-selection.js, effect.js, effects/effect-blind.js, effects/effect-bounce.js, effects/effect-clip.js, effects/effect-drop.js, effects/effect-explode.js, effects/effect-fade.js, effects/effect-fold.js, effects/effect-highlight.js, effects/effect-puff.js, effects/effect-pulsate.js, effects/effect-scale.js, effects/effect-shake.js, effects/effect-size.js, effects/effect-slide.js, effects/effect-transfer.js, focusable.js, form-reset-mixin.js, jquery-1-7.js, keycode.js, labels.js, scroll-parent.js, tabbable.js, unique-id.js, widgets/accordion.js, widgets/autocomplete.js, widgets/button.js, widgets/checkboxradio.js, widgets/controlgroup.js, widgets/datepicker.js, widgets/dialog.js, widgets/draggable.js, widgets/droppable.js, widgets/menu.js, widgets/mouse.js, widgets/progressbar.js, widgets/resizable.js, widgets/selectable.js, widgets/selectmenu.js, widgets/slider.js, widgets/sortable.js, widgets/spinner.js, widgets/tabs.js, widgets/tooltip.js
     * Copyright jQuery Foundation and other contributors; Licensed MIT */
    ,
    function (e) {
        "function" == typeof define && define.amd ? define(["jquery"], e) : e(jQuery)
    }((function (e) {
        e.ui = e.ui || {};
        e.ui.version = "1.12.1";
        /*!
         * jQuery UI Widget 1.12.1
         * http://jqueryui.com
         *
         * Copyright jQuery Foundation and other contributors
         * Released under the MIT license.
         * http://jquery.org/license
         */
        var t, i = 0,
            n = Array.prototype.slice;
        e.cleanData = (t = e.cleanData, function (i) {
            var n, a, s;
            for (s = 0; null != (a = i[s]); s++) try {
                (n = e._data(a, "events")) && n.remove && e(a).triggerHandler("remove")
            } catch (e) { }
            t(i)
        }), e.widget = function (t, i, n) {
            var a, s, o, r = {},
                l = t.split(".")[0],
                c = l + "-" + (t = t.split(".")[1]);
            return n || (n = i, i = e.Widget), e.isArray(n) && (n = e.extend.apply(null, [{}].concat(n))), e.expr[":"][c.toLowerCase()] = function (t) {
                return !!e.data(t, c)
            }, e[l] = e[l] || {}, a = e[l][t], s = e[l][t] = function (e, t) {
                if (!this._createWidget) return new s(e, t);
                arguments.length && this._createWidget(e, t)
            }, e.extend(s, a, {
                version: n.version,
                _proto: e.extend({}, n),
                _childConstructors: []
            }), (o = new i).options = e.widget.extend({}, o.options), e.each(n, (function (t, n) {
                e.isFunction(n) ? r[t] = function () {
                    function e() {
                        return i.prototype[t].apply(this, arguments)
                    }

                    function a(e) {
                        return i.prototype[t].apply(this, e)
                    }
                    return function () {
                        var t, i = this._super,
                            s = this._superApply;
                        return this._super = e, this._superApply = a, t = n.apply(this, arguments), this._super = i, this._superApply = s, t
                    }
                }() : r[t] = n
            })), s.prototype = e.widget.extend(o, {
                widgetEventPrefix: a && o.widgetEventPrefix || t
            }, r, {
                constructor: s,
                namespace: l,
                widgetName: t,
                widgetFullName: c
            }), a ? (e.each(a._childConstructors, (function (t, i) {
                var n = i.prototype;
                e.widget(n.namespace + "." + n.widgetName, s, i._proto)
            })), delete a._childConstructors) : i._childConstructors.push(s), e.widget.bridge(t, s), s
        }, e.widget.extend = function (t) {
            for (var i, a, s = n.call(arguments, 1), o = 0, r = s.length; o < r; o++)
                for (i in s[o]) a = s[o][i], s[o].hasOwnProperty(i) && void 0 !== a && (e.isPlainObject(a) ? t[i] = e.isPlainObject(t[i]) ? e.widget.extend({}, t[i], a) : e.widget.extend({}, a) : t[i] = a);
            return t
        }, e.widget.bridge = function (t, i) {
            var a = i.prototype.widgetFullName || t;
            e.fn[t] = function (s) {
                var o = "string" == typeof s,
                    r = n.call(arguments, 1),
                    l = this;
                return o ? this.length || "instance" !== s ? this.each((function () {
                    var i, n = e.data(this, a);
                    return "instance" === s ? (l = n, !1) : n ? e.isFunction(n[s]) && "_" !== s.charAt(0) ? (i = n[s].apply(n, r)) !== n && void 0 !== i ? (l = i && i.jquery ? l.pushStack(i.get()) : i, !1) : void 0 : e.error("no such method '" + s + "' for " + t + " widget instance") : e.error("cannot call methods on " + t + " prior to initialization; attempted to call method '" + s + "'")
                })) : l = void 0 : (r.length && (s = e.widget.extend.apply(null, [s].concat(r))), this.each((function () {
                    var t = e.data(this, a);
                    t ? (t.option(s || {}), t._init && t._init()) : e.data(this, a, new i(s, this))
                }))), l
            }
        }, e.Widget = function () { }, e.Widget._childConstructors = [], e.Widget.prototype = {
            widgetName: "widget",
            widgetEventPrefix: "",
            defaultElement: "<div>",
            options: {
                classes: {},
                disabled: !1,
                create: null
            },
            _createWidget: function (t, n) {
                n = e(n || this.defaultElement || this)[0], this.element = e(n), this.uuid = i++, this.eventNamespace = "." + this.widgetName + this.uuid, this.bindings = e(), this.hoverable = e(), this.focusable = e(), this.classesElementLookup = {}, n !== this && (e.data(n, this.widgetFullName, this), this._on(!0, this.element, {
                    remove: function (e) {
                        e.target === n && this.destroy()
                    }
                }), this.document = e(n.style ? n.ownerDocument : n.document || n), this.window = e(this.document[0].defaultView || this.document[0].parentWindow)), this.options = e.widget.extend({}, this.options, this._getCreateOptions(), t), this._create(), this.options.disabled && this._setOptionDisabled(this.options.disabled), this._trigger("create", null, this._getCreateEventData()), this._init()
            },
            _getCreateOptions: function () {
                return {}
            },
            _getCreateEventData: e.noop,
            _create: e.noop,
            _init: e.noop,
            destroy: function () {
                var t = this;
                this._destroy(), e.each(this.classesElementLookup, (function (e, i) {
                    t._removeClass(i, e)
                })), this.element.off(this.eventNamespace).removeData(this.widgetFullName), this.widget().off(this.eventNamespace).removeAttr("aria-disabled"), this.bindings.off(this.eventNamespace)
            },
            _destroy: e.noop,
            widget: function () {
                return this.element
            },
            option: function (t, i) {
                var n, a, s, o = t;
                if (0 === arguments.length) return e.widget.extend({}, this.options);
                if ("string" == typeof t)
                    if (o = {}, n = t.split("."), t = n.shift(), n.length) {
                        for (a = o[t] = e.widget.extend({}, this.options[t]), s = 0; s < n.length - 1; s++) a[n[s]] = a[n[s]] || {}, a = a[n[s]];
                        if (t = n.pop(), 1 === arguments.length) return void 0 === a[t] ? null : a[t];
                        a[t] = i
                    } else {
                        if (1 === arguments.length) return void 0 === this.options[t] ? null : this.options[t];
                        o[t] = i
                    } return this._setOptions(o), this
            },
            _setOptions: function (e) {
                var t;
                for (t in e) this._setOption(t, e[t]);
                return this
            },
            _setOption: function (e, t) {
                return "classes" === e && this._setOptionClasses(t), this.options[e] = t, "disabled" === e && this._setOptionDisabled(t), this
            },
            _setOptionClasses: function (t) {
                var i, n, a;
                for (i in t) a = this.classesElementLookup[i], t[i] !== this.options.classes[i] && a && a.length && (n = e(a.get()), this._removeClass(a, i), n.addClass(this._classes({
                    element: n,
                    keys: i,
                    classes: t,
                    add: !0
                })))
            },
            _setOptionDisabled: function (e) {
                this._toggleClass(this.widget(), this.widgetFullName + "-disabled", null, !!e), e && (this._removeClass(this.hoverable, null, "ui-state-hover"), this._removeClass(this.focusable, null, "ui-state-focus"))
            },
            enable: function () {
                return this._setOptions({
                    disabled: !1
                })
            },
            disable: function () {
                return this._setOptions({
                    disabled: !0
                })
            },
            _classes: function (t) {
                var i = [],
                    n = this;

                function a(a, s) {
                    var o, r;
                    for (r = 0; r < a.length; r++) o = n.classesElementLookup[a[r]] || e(), o = t.add ? e(e.unique(o.get().concat(t.element.get()))) : e(o.not(t.element).get()), n.classesElementLookup[a[r]] = o, i.push(a[r]), s && t.classes[a[r]] && i.push(t.classes[a[r]])
                }
                return t = e.extend({
                    element: this.element,
                    classes: this.options.classes || {}
                }, t), this._on(t.element, {
                    remove: "_untrackClassesElement"
                }), t.keys && a(t.keys.match(/\S+/g) || [], !0), t.extra && a(t.extra.match(/\S+/g) || []), i.join(" ")
            },
            _untrackClassesElement: function (t) {
                var i = this;
                e.each(i.classesElementLookup, (function (n, a) {
                    -1 !== e.inArray(t.target, a) && (i.classesElementLookup[n] = e(a.not(t.target).get()))
                }))
            },
            _removeClass: function (e, t, i) {
                return this._toggleClass(e, t, i, !1)
            },
            _addClass: function (e, t, i) {
                return this._toggleClass(e, t, i, !0)
            },
            _toggleClass: function (e, t, i, n) {
                n = "boolean" == typeof n ? n : i;
                var a = "string" == typeof e || null === e,
                    s = {
                        extra: a ? t : i,
                        keys: a ? e : t,
                        element: a ? this.element : e,
                        add: n
                    };
                return s.element.toggleClass(this._classes(s), n), this
            },
            _on: function (t, i, n) {
                var a, s = this;
                "boolean" != typeof t && (n = i, i = t, t = !1), n ? (i = a = e(i), this.bindings = this.bindings.add(i)) : (n = i, i = this.element, a = this.widget()), e.each(n, (function (n, o) {
                    function r() {
                        if (t || !0 !== s.options.disabled && !e(this).hasClass("ui-state-disabled")) return ("string" == typeof o ? s[o] : o).apply(s, arguments)
                    }
                    "string" != typeof o && (r.guid = o.guid = o.guid || r.guid || e.guid++);
                    var l = n.match(/^([\w:-]*)\s*(.*)$/),
                        c = l[1] + s.eventNamespace,
                        d = l[2];
                    d ? a.on(c, d, r) : i.on(c, r)
                }))
            },
            _off: function (t, i) {
                i = (i || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace, t.off(i).off(i), this.bindings = e(this.bindings.not(t).get()), this.focusable = e(this.focusable.not(t).get()), this.hoverable = e(this.hoverable.not(t).get())
            },
            _delay: function (e, t) {
                var i = this;
                return setTimeout((function () {
                    return ("string" == typeof e ? i[e] : e).apply(i, arguments)
                }), t || 0)
            },
            _hoverable: function (t) {
                this.hoverable = this.hoverable.add(t), this._on(t, {
                    mouseenter: function (t) {
                        this._addClass(e(t.currentTarget), null, "ui-state-hover")
                    },
                    mouseleave: function (t) {
                        this._removeClass(e(t.currentTarget), null, "ui-state-hover")
                    }
                })
            },
            _focusable: function (t) {
                this.focusable = this.focusable.add(t), this._on(t, {
                    focusin: function (t) {
                        this._addClass(e(t.currentTarget), null, "ui-state-focus")
                    },
                    focusout: function (t) {
                        this._removeClass(e(t.currentTarget), null, "ui-state-focus")
                    }
                })
            },
            _trigger: function (t, i, n) {
                var a, s, o = this.options[t];
                if (n = n || {}, (i = e.Event(i)).type = (t === this.widgetEventPrefix ? t : this.widgetEventPrefix + t).toLowerCase(), i.target = this.element[0], s = i.originalEvent)
                    for (a in s) a in i || (i[a] = s[a]);
                return this.element.trigger(i, n), !(e.isFunction(o) && !1 === o.apply(this.element[0], [i].concat(n)) || i.isDefaultPrevented())
            }
        }, e.each({
            show: "fadeIn",
            hide: "fadeOut"
        }, (function (t, i) {
            e.Widget.prototype["_" + t] = function (n, a, s) {
                var o;
                "string" == typeof a && (a = {
                    effect: a
                });
                var r = a ? !0 === a || "number" == typeof a ? i : a.effect || i : t;
                "number" == typeof (a = a || {}) && (a = {
                    duration: a
                }), o = !e.isEmptyObject(a), a.complete = s, a.delay && n.delay(a.delay), o && e.effects && e.effects.effect[r] ? n[t](a) : r !== t && n[r] ? n[r](a.duration, a.easing, s) : n.queue((function (i) {
                    e(this)[t](), s && s.call(n[0]), i()
                }))
            }
        }));
        e.widget;
        /*!
         * jQuery UI Position 1.12.1
         * http://jqueryui.com
         *
         * Copyright jQuery Foundation and other contributors
         * Released under the MIT license.
         * http://jquery.org/license
         *
         * http://api.jqueryui.com/position/
         */
        ! function () {
            var t, i = Math.max,
                n = Math.abs,
                a = /left|center|right/,
                s = /top|center|bottom/,
                o = /[\+\-]\d+(\.[\d]+)?%?/,
                r = /^\w+/,
                l = /%$/,
                c = e.fn.position;

            function d(e, t, i) {
                return [parseFloat(e[0]) * (l.test(e[0]) ? t / 100 : 1), parseFloat(e[1]) * (l.test(e[1]) ? i / 100 : 1)]
            }

            function p(t, i) {
                return parseInt(e.css(t, i), 10) || 0
            }
            e.position = {
                scrollbarWidth: function () {
                    if (void 0 !== t) return t;
                    var i, n, a = e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),
                        s = a.children()[0];
                    return e("body").append(a), i = s.offsetWidth, a.css("overflow", "scroll"), i === (n = s.offsetWidth) && (n = a[0].clientWidth), a.remove(), t = i - n
                },
                getScrollInfo: function (t) {
                    var i = t.isWindow || t.isDocument ? "" : t.element.css("overflow-x"),
                        n = t.isWindow || t.isDocument ? "" : t.element.css("overflow-y"),
                        a = "scroll" === i || "auto" === i && t.width < t.element[0].scrollWidth;
                    return {
                        width: "scroll" === n || "auto" === n && t.height < t.element[0].scrollHeight ? e.position.scrollbarWidth() : 0,
                        height: a ? e.position.scrollbarWidth() : 0
                    }
                },
                getWithinInfo: function (t) {
                    var i = e(t || window),
                        n = e.isWindow(i[0]),
                        a = !!i[0] && 9 === i[0].nodeType;
                    return {
                        element: i,
                        isWindow: n,
                        isDocument: a,
                        offset: !n && !a ? e(t).offset() : {
                            left: 0,
                            top: 0
                        },
                        scrollLeft: i.scrollLeft(),
                        scrollTop: i.scrollTop(),
                        width: i.outerWidth(),
                        height: i.outerHeight()
                    }
                }
            }, e.fn.position = function (t) {
                if (!t || !t.of) return c.apply(this, arguments);
                t = e.extend({}, t);
                var l, u, h, f, m, g, v, b, y = e(t.of),
                    w = e.position.getWithinInfo(t.within),
                    _ = e.position.getScrollInfo(w),
                    T = (t.collision || "flip").split(" "),
                    C = {};
                return g = 9 === (b = (v = y)[0]).nodeType ? {
                    width: v.width(),
                    height: v.height(),
                    offset: {
                        top: 0,
                        left: 0
                    }
                } : e.isWindow(b) ? {
                    width: v.width(),
                    height: v.height(),
                    offset: {
                        top: v.scrollTop(),
                        left: v.scrollLeft()
                    }
                } : b.preventDefault ? {
                    width: 0,
                    height: 0,
                    offset: {
                        top: b.pageY,
                        left: b.pageX
                    }
                } : {
                    width: v.outerWidth(),
                    height: v.outerHeight(),
                    offset: v.offset()
                }, y[0].preventDefault && (t.at = "left top"), u = g.width, h = g.height, f = g.offset, m = e.extend({}, f), e.each(["my", "at"], (function () {
                    var e, i, n = (t[this] || "").split(" ");
                    1 === n.length && (n = a.test(n[0]) ? n.concat(["center"]) : s.test(n[0]) ? ["center"].concat(n) : ["center", "center"]), n[0] = a.test(n[0]) ? n[0] : "center", n[1] = s.test(n[1]) ? n[1] : "center", e = o.exec(n[0]), i = o.exec(n[1]), C[this] = [e ? e[0] : 0, i ? i[0] : 0], t[this] = [r.exec(n[0])[0], r.exec(n[1])[0]]
                })), 1 === T.length && (T[1] = T[0]), "right" === t.at[0] ? m.left += u : "center" === t.at[0] && (m.left += u / 2), "bottom" === t.at[1] ? m.top += h : "center" === t.at[1] && (m.top += h / 2), l = d(C.at, u, h), m.left += l[0], m.top += l[1], this.each((function () {
                    var a, s, o = e(this),
                        r = o.outerWidth(),
                        c = o.outerHeight(),
                        g = p(this, "marginLeft"),
                        v = p(this, "marginTop"),
                        b = r + g + p(this, "marginRight") + _.width,
                        k = c + v + p(this, "marginBottom") + _.height,
                        E = e.extend({}, m),
                        x = d(C.my, o.outerWidth(), o.outerHeight());
                    "right" === t.my[0] ? E.left -= r : "center" === t.my[0] && (E.left -= r / 2), "bottom" === t.my[1] ? E.top -= c : "center" === t.my[1] && (E.top -= c / 2), E.left += x[0], E.top += x[1], a = {
                        marginLeft: g,
                        marginTop: v
                    }, e.each(["left", "top"], (function (i, n) {
                        e.ui.position[T[i]] && e.ui.position[T[i]][n](E, {
                            targetWidth: u,
                            targetHeight: h,
                            elemWidth: r,
                            elemHeight: c,
                            collisionPosition: a,
                            collisionWidth: b,
                            collisionHeight: k,
                            offset: [l[0] + x[0], l[1] + x[1]],
                            my: t.my,
                            at: t.at,
                            within: w,
                            elem: o
                        })
                    })), t.using && (s = function (e) {
                        var a = f.left - E.left,
                            s = a + u - r,
                            l = f.top - E.top,
                            d = l + h - c,
                            p = {
                                target: {
                                    element: y,
                                    left: f.left,
                                    top: f.top,
                                    width: u,
                                    height: h
                                },
                                element: {
                                    element: o,
                                    left: E.left,
                                    top: E.top,
                                    width: r,
                                    height: c
                                },
                                horizontal: s < 0 ? "left" : a > 0 ? "right" : "center",
                                vertical: d < 0 ? "top" : l > 0 ? "bottom" : "middle"
                            };
                        u < r && n(a + s) < u && (p.horizontal = "center"), h < c && n(l + d) < h && (p.vertical = "middle"), i(n(a), n(s)) > i(n(l), n(d)) ? p.important = "horizontal" : p.important = "vertical", t.using.call(this, e, p)
                    }), o.offset(e.extend(E, {
                        using: s
                    }))
                }))
            }, e.ui.position = {
                fit: {
                    left: function (e, t) {
                        var n, a = t.within,
                            s = a.isWindow ? a.scrollLeft : a.offset.left,
                            o = a.width,
                            r = e.left - t.collisionPosition.marginLeft,
                            l = s - r,
                            c = r + t.collisionWidth - o - s;
                        t.collisionWidth > o ? l > 0 && c <= 0 ? (n = e.left + l + t.collisionWidth - o - s, e.left += l - n) : e.left = c > 0 && l <= 0 ? s : l > c ? s + o - t.collisionWidth : s : l > 0 ? e.left += l : c > 0 ? e.left -= c : e.left = i(e.left - r, e.left)
                    },
                    top: function (e, t) {
                        var n, a = t.within,
                            s = a.isWindow ? a.scrollTop : a.offset.top,
                            o = t.within.height,
                            r = e.top - t.collisionPosition.marginTop,
                            l = s - r,
                            c = r + t.collisionHeight - o - s;
                        t.collisionHeight > o ? l > 0 && c <= 0 ? (n = e.top + l + t.collisionHeight - o - s, e.top += l - n) : e.top = c > 0 && l <= 0 ? s : l > c ? s + o - t.collisionHeight : s : l > 0 ? e.top += l : c > 0 ? e.top -= c : e.top = i(e.top - r, e.top)
                    }
                },
                flip: {
                    left: function (e, t) {
                        var i, a, s = t.within,
                            o = s.offset.left + s.scrollLeft,
                            r = s.width,
                            l = s.isWindow ? s.scrollLeft : s.offset.left,
                            c = e.left - t.collisionPosition.marginLeft,
                            d = c - l,
                            p = c + t.collisionWidth - r - l,
                            u = "left" === t.my[0] ? -t.elemWidth : "right" === t.my[0] ? t.elemWidth : 0,
                            h = "left" === t.at[0] ? t.targetWidth : "right" === t.at[0] ? -t.targetWidth : 0,
                            f = -2 * t.offset[0];
                        d < 0 ? ((i = e.left + u + h + f + t.collisionWidth - r - o) < 0 || i < n(d)) && (e.left += u + h + f) : p > 0 && ((a = e.left - t.collisionPosition.marginLeft + u + h + f - l) > 0 || n(a) < p) && (e.left += u + h + f)
                    },
                    top: function (e, t) {
                        var i, a, s = t.within,
                            o = s.offset.top + s.scrollTop,
                            r = s.height,
                            l = s.isWindow ? s.scrollTop : s.offset.top,
                            c = e.top - t.collisionPosition.marginTop,
                            d = c - l,
                            p = c + t.collisionHeight - r - l,
                            u = "top" === t.my[1] ? -t.elemHeight : "bottom" === t.my[1] ? t.elemHeight : 0,
                            h = "top" === t.at[1] ? t.targetHeight : "bottom" === t.at[1] ? -t.targetHeight : 0,
                            f = -2 * t.offset[1];
                        d < 0 ? ((a = e.top + u + h + f + t.collisionHeight - r - o) < 0 || a < n(d)) && (e.top += u + h + f) : p > 0 && ((i = e.top - t.collisionPosition.marginTop + u + h + f - l) > 0 || n(i) < p) && (e.top += u + h + f)
                    }
                },
                flipfit: {
                    left: function () {
                        e.ui.position.flip.left.apply(this, arguments), e.ui.position.fit.left.apply(this, arguments)
                    },
                    top: function () {
                        e.ui.position.flip.top.apply(this, arguments), e.ui.position.fit.top.apply(this, arguments)
                    }
                }
            }
        }();
        e.ui.position, e.extend(e.expr[":"], {
            data: e.expr.createPseudo ? e.expr.createPseudo((function (t) {
                return function (i) {
                    return !!e.data(i, t)
                }
            })) : function (t, i, n) {
                return !!e.data(t, n[3])
            }
        }), e.fn.extend({
            disableSelection: (a = "onselectstart" in document.createElement("div") ? "selectstart" : "mousedown", function () {
                return this.on(a + ".ui-disableSelection", (function (e) {
                    e.preventDefault()
                }))
            }),
            enableSelection: function () {
                return this.off(".ui-disableSelection")
            }
        });
        /*!
         * jQuery UI :data 1.12.1
         * http://jqueryui.com
         *
         * Copyright jQuery Foundation and other contributors
         * Released under the MIT license.
         * http://jquery.org/license
         */
        var a, s, o = "ui-effects-",
            r = "ui-effects-style",
            l = "ui-effects-animated",
            c = e;
        e.effects = {
            effect: {}
        },
            /*!
             * jQuery Color Animations v2.1.2
             * https://github.com/jquery/jquery-color
             *
             * Copyright 2014 jQuery Foundation and other contributors
             * Released under the MIT license.
             * http://jquery.org/license
             *
             * Date: Wed Jan 16 08:47:09 2013 -0600
             */
            function (e, t) {
                var i, n = /^([\-+])=\s*(\d+\.?\d*)/,
                    a = [{
                        re: /rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
                        parse: function (e) {
                            return [e[1], e[2], e[3], e[4]]
                        }
                    }, {
                        re: /rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
                        parse: function (e) {
                            return [2.55 * e[1], 2.55 * e[2], 2.55 * e[3], e[4]]
                        }
                    }, {
                        re: /#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,
                        parse: function (e) {
                            return [parseInt(e[1], 16), parseInt(e[2], 16), parseInt(e[3], 16)]
                        }
                    }, {
                        re: /#([a-f0-9])([a-f0-9])([a-f0-9])/,
                        parse: function (e) {
                            return [parseInt(e[1] + e[1], 16), parseInt(e[2] + e[2], 16), parseInt(e[3] + e[3], 16)]
                        }
                    }, {
                        re: /hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
                        space: "hsla",
                        parse: function (e) {
                            return [e[1], e[2] / 100, e[3] / 100, e[4]]
                        }
                    }],
                    s = e.Color = function (t, i, n, a) {
                        return new e.Color.fn.parse(t, i, n, a)
                    },
                    o = {
                        rgba: {
                            props: {
                                red: {
                                    idx: 0,
                                    type: "byte"
                                },
                                green: {
                                    idx: 1,
                                    type: "byte"
                                },
                                blue: {
                                    idx: 2,
                                    type: "byte"
                                }
                            }
                        },
                        hsla: {
                            props: {
                                hue: {
                                    idx: 0,
                                    type: "degrees"
                                },
                                saturation: {
                                    idx: 1,
                                    type: "percent"
                                },
                                lightness: {
                                    idx: 2,
                                    type: "percent"
                                }
                            }
                        }
                    },
                    r = {
                        byte: {
                            floor: !0,
                            max: 255
                        },
                        percent: {
                            max: 1
                        },
                        degrees: {
                            mod: 360,
                            floor: !0
                        }
                    },
                    l = s.support = {},
                    c = e("<p>")[0],
                    d = e.each;

                function p(e, t, i) {
                    var n = r[t.type] || {};
                    return null == e ? i || !t.def ? null : t.def : (e = n.floor ? ~~e : parseFloat(e), isNaN(e) ? t.def : n.mod ? (e + n.mod) % n.mod : 0 > e ? 0 : n.max < e ? n.max : e)
                }

                function u(t) {
                    var n = s(),
                        r = n._rgba = [];
                    return t = t.toLowerCase(), d(a, (function (e, i) {
                        var a, s = i.re.exec(t),
                            l = s && i.parse(s),
                            c = i.space || "rgba";
                        if (l) return a = n[c](l), n[o[c].cache] = a[o[c].cache], r = n._rgba = a._rgba, !1
                    })), r.length ? ("0,0,0,0" === r.join() && e.extend(r, i.transparent), n) : i[t]
                }

                function h(e, t, i) {
                    return 6 * (i = (i + 1) % 1) < 1 ? e + (t - e) * i * 6 : 2 * i < 1 ? t : 3 * i < 2 ? e + (t - e) * (2 / 3 - i) * 6 : e
                }
                c.style.cssText = "background-color:rgba(1,1,1,.5)", l.rgba = c.style.backgroundColor.indexOf("rgba") > -1, d(o, (function (e, t) {
                    t.cache = "_" + e, t.props.alpha = {
                        idx: 3,
                        type: "percent",
                        def: 1
                    }
                })), s.fn = e.extend(s.prototype, {
                    parse: function (n, a, r, l) {
                        if (n === t) return this._rgba = [null, null, null, null], this;
                        (n.jquery || n.nodeType) && (n = e(n).css(a), a = t);
                        var c = this,
                            h = e.type(n),
                            f = this._rgba = [];
                        return a !== t && (n = [n, a, r, l], h = "array"), "string" === h ? this.parse(u(n) || i._default) : "array" === h ? (d(o.rgba.props, (function (e, t) {
                            f[t.idx] = p(n[t.idx], t)
                        })), this) : "object" === h ? (d(o, n instanceof s ? function (e, t) {
                            n[t.cache] && (c[t.cache] = n[t.cache].slice())
                        } : function (t, i) {
                            var a = i.cache;
                            d(i.props, (function (e, t) {
                                if (!c[a] && i.to) {
                                    if ("alpha" === e || null == n[e]) return;
                                    c[a] = i.to(c._rgba)
                                }
                                c[a][t.idx] = p(n[e], t, !0)
                            })), c[a] && e.inArray(null, c[a].slice(0, 3)) < 0 && (c[a][3] = 1, i.from && (c._rgba = i.from(c[a])))
                        }), this) : void 0
                    },
                    is: function (e) {
                        var t = s(e),
                            i = !0,
                            n = this;
                        return d(o, (function (e, a) {
                            var s, o = t[a.cache];
                            return o && (s = n[a.cache] || a.to && a.to(n._rgba) || [], d(a.props, (function (e, t) {
                                if (null != o[t.idx]) return i = o[t.idx] === s[t.idx]
                            }))), i
                        })), i
                    },
                    _space: function () {
                        var e = [],
                            t = this;
                        return d(o, (function (i, n) {
                            t[n.cache] && e.push(i)
                        })), e.pop()
                    },
                    transition: function (e, t) {
                        var i = s(e),
                            n = i._space(),
                            a = o[n],
                            l = 0 === this.alpha() ? s("transparent") : this,
                            c = l[a.cache] || a.to(l._rgba),
                            u = c.slice();
                        return i = i[a.cache], d(a.props, (function (e, n) {
                            var a = n.idx,
                                s = c[a],
                                o = i[a],
                                l = r[n.type] || {};
                            null !== o && (null === s ? u[a] = o : (l.mod && (o - s > l.mod / 2 ? s += l.mod : s - o > l.mod / 2 && (s -= l.mod)), u[a] = p((o - s) * t + s, n)))
                        })), this[n](u)
                    },
                    blend: function (t) {
                        if (1 === this._rgba[3]) return this;
                        var i = this._rgba.slice(),
                            n = i.pop(),
                            a = s(t)._rgba;
                        return s(e.map(i, (function (e, t) {
                            return (1 - n) * a[t] + n * e
                        })))
                    },
                    toRgbaString: function () {
                        var t = "rgba(",
                            i = e.map(this._rgba, (function (e, t) {
                                return null == e ? t > 2 ? 1 : 0 : e
                            }));
                        return 1 === i[3] && (i.pop(), t = "rgb("), t + i.join() + ")"
                    },
                    toHslaString: function () {
                        var t = "hsla(",
                            i = e.map(this.hsla(), (function (e, t) {
                                return null == e && (e = t > 2 ? 1 : 0), t && t < 3 && (e = Math.round(100 * e) + "%"), e
                            }));
                        return 1 === i[3] && (i.pop(), t = "hsl("), t + i.join() + ")"
                    },
                    toHexString: function (t) {
                        var i = this._rgba.slice(),
                            n = i.pop();
                        return t && i.push(~~(255 * n)), "#" + e.map(i, (function (e) {
                            return 1 === (e = (e || 0).toString(16)).length ? "0" + e : e
                        })).join("")
                    },
                    toString: function () {
                        return 0 === this._rgba[3] ? "transparent" : this.toRgbaString()
                    }
                }), s.fn.parse.prototype = s.fn, o.hsla.to = function (e) {
                    if (null == e[0] || null == e[1] || null == e[2]) return [null, null, null, e[3]];
                    var t, i, n = e[0] / 255,
                        a = e[1] / 255,
                        s = e[2] / 255,
                        o = e[3],
                        r = Math.max(n, a, s),
                        l = Math.min(n, a, s),
                        c = r - l,
                        d = r + l,
                        p = .5 * d;
                    return t = l === r ? 0 : n === r ? 60 * (a - s) / c + 360 : a === r ? 60 * (s - n) / c + 120 : 60 * (n - a) / c + 240, i = 0 === c ? 0 : p <= .5 ? c / d : c / (2 - d), [Math.round(t) % 360, i, p, null == o ? 1 : o]
                }, o.hsla.from = function (e) {
                    if (null == e[0] || null == e[1] || null == e[2]) return [null, null, null, e[3]];
                    var t = e[0] / 360,
                        i = e[1],
                        n = e[2],
                        a = e[3],
                        s = n <= .5 ? n * (1 + i) : n + i - n * i,
                        o = 2 * n - s;
                    return [Math.round(255 * h(o, s, t + 1 / 3)), Math.round(255 * h(o, s, t)), Math.round(255 * h(o, s, t - 1 / 3)), a]
                }, d(o, (function (i, a) {
                    var o = a.props,
                        r = a.cache,
                        l = a.to,
                        c = a.from;
                    s.fn[i] = function (i) {
                        if (l && !this[r] && (this[r] = l(this._rgba)), i === t) return this[r].slice();
                        var n, a = e.type(i),
                            u = "array" === a || "object" === a ? i : arguments,
                            h = this[r].slice();
                        return d(o, (function (e, t) {
                            var i = u["object" === a ? e : t.idx];
                            null == i && (i = h[t.idx]), h[t.idx] = p(i, t)
                        })), c ? ((n = s(c(h)))[r] = h, n) : s(h)
                    }, d(o, (function (t, a) {
                        s.fn[t] || (s.fn[t] = function (s) {
                            var o, r = e.type(s),
                                l = "alpha" === t ? this._hsla ? "hsla" : "rgba" : i,
                                c = this[l](),
                                d = c[a.idx];
                            return "undefined" === r ? d : ("function" === r && (s = s.call(this, d), r = e.type(s)), null == s && a.empty ? this : ("string" === r && (o = n.exec(s)) && (s = d + parseFloat(o[2]) * ("+" === o[1] ? 1 : -1)), c[a.idx] = s, this[l](c)))
                        })
                    }))
                })), s.hook = function (t) {
                    var i = t.split(" ");
                    d(i, (function (t, i) {
                        e.cssHooks[i] = {
                            set: function (t, n) {
                                var a, o, r = "";
                                if ("transparent" !== n && ("string" !== e.type(n) || (a = u(n)))) {
                                    if (n = s(a || n), !l.rgba && 1 !== n._rgba[3]) {
                                        for (o = "backgroundColor" === i ? t.parentNode : t;
                                            ("" === r || "transparent" === r) && o && o.style;) try {
                                                r = e.css(o, "backgroundColor"), o = o.parentNode
                                            } catch (e) { }
                                        n = n.blend(r && "transparent" !== r ? r : "_default")
                                    }
                                    n = n.toRgbaString()
                                }
                                try {
                                    t.style[i] = n
                                } catch (e) { }
                            }
                        }, e.fx.step[i] = function (t) {
                            t.colorInit || (t.start = s(t.elem, i), t.end = s(t.end), t.colorInit = !0), e.cssHooks[i].set(t.elem, t.start.transition(t.end, t.pos))
                        }
                    }))
                }, s.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"), e.cssHooks.borderColor = {
                    expand: function (e) {
                        var t = {};
                        return d(["Top", "Right", "Bottom", "Left"], (function (i, n) {
                            t["border" + n + "Color"] = e
                        })), t
                    }
                }, i = e.Color.names = {
                    aqua: "#00ffff",
                    black: "#000000",
                    blue: "#0000ff",
                    fuchsia: "#ff00ff",
                    gray: "#808080",
                    green: "#008000",
                    lime: "#00ff00",
                    maroon: "#800000",
                    navy: "#000080",
                    olive: "#808000",
                    purple: "#800080",
                    red: "#ff0000",
                    silver: "#c0c0c0",
                    teal: "#008080",
                    white: "#ffffff",
                    yellow: "#ffff00",
                    transparent: [null, null, null, 0],
                    _default: "#ffffff"
                }
            }(c),
            function () {
                var t = ["add", "remove", "toggle"],
                    i = {
                        border: 1,
                        borderBottom: 1,
                        borderColor: 1,
                        borderLeft: 1,
                        borderRight: 1,
                        borderTop: 1,
                        borderWidth: 1,
                        margin: 1,
                        padding: 1
                    };

                function n(t) {
                    var i, n, a = t.ownerDocument.defaultView ? t.ownerDocument.defaultView.getComputedStyle(t, null) : t.currentStyle,
                        s = {};
                    if (a && a.length && a[0] && a[a[0]])
                        for (n = a.length; n--;) "string" == typeof a[i = a[n]] && (s[e.camelCase(i)] = a[i]);
                    else
                        for (i in a) "string" == typeof a[i] && (s[i] = a[i]);
                    return s
                }
                e.each(["borderLeftStyle", "borderRightStyle", "borderBottomStyle", "borderTopStyle"], (function (t, i) {
                    e.fx.step[i] = function (e) {
                        ("none" !== e.end && !e.setAttr || 1 === e.pos && !e.setAttr) && (c.style(e.elem, i, e.end), e.setAttr = !0)
                    }
                })), e.fn.addBack || (e.fn.addBack = function (e) {
                    return this.add(null == e ? this.prevObject : this.prevObject.filter(e))
                }), e.effects.animateClass = function (a, s, o, r) {
                    var l = e.speed(s, o, r);
                    return this.queue((function () {
                        var s, o = e(this),
                            r = o.attr("class") || "",
                            c = l.children ? o.find("*").addBack() : o;
                        c = c.map((function () {
                            return {
                                el: e(this),
                                start: n(this)
                            }
                        })), (s = function () {
                            e.each(t, (function (e, t) {
                                a[t] && o[t + "Class"](a[t])
                            }))
                        })(), c = c.map((function () {
                            return this.end = n(this.el[0]), this.diff = function (t, n) {
                                var a, s, o = {};
                                for (a in n) s = n[a], t[a] !== s && (i[a] || !e.fx.step[a] && isNaN(parseFloat(s)) || (o[a] = s));
                                return o
                            }(this.start, this.end), this
                        })), o.attr("class", r), c = c.map((function () {
                            var t = this,
                                i = e.Deferred(),
                                n = e.extend({}, l, {
                                    queue: !1,
                                    complete: function () {
                                        i.resolve(t)
                                    }
                                });
                            return this.el.animate(this.diff, n), i.promise()
                        })), e.when.apply(e, c.get()).done((function () {
                            s(), e.each(arguments, (function () {
                                var t = this.el;
                                e.each(this.diff, (function (e) {
                                    t.css(e, "")
                                }))
                            })), l.complete.call(o[0])
                        }))
                    }))
                }, e.fn.extend({
                    addClass: function (t) {
                        return function (i, n, a, s) {
                            return n ? e.effects.animateClass.call(this, {
                                add: i
                            }, n, a, s) : t.apply(this, arguments)
                        }
                    }(e.fn.addClass),
                    removeClass: function (t) {
                        return function (i, n, a, s) {
                            return arguments.length > 1 ? e.effects.animateClass.call(this, {
                                remove: i
                            }, n, a, s) : t.apply(this, arguments)
                        }
                    }(e.fn.removeClass),
                    toggleClass: function (t) {
                        return function (i, n, a, s, o) {
                            return "boolean" == typeof n || void 0 === n ? a ? e.effects.animateClass.call(this, n ? {
                                add: i
                            } : {
                                remove: i
                            }, a, s, o) : t.apply(this, arguments) : e.effects.animateClass.call(this, {
                                toggle: i
                            }, n, a, s)
                        }
                    }(e.fn.toggleClass),
                    switchClass: function (t, i, n, a, s) {
                        return e.effects.animateClass.call(this, {
                            add: i,
                            remove: t
                        }, n, a, s)
                    }
                })
            }(),
            function () {
                function t(t, i, n, a) {
                    return e.isPlainObject(t) && (i = t, t = t.effect), t = {
                        effect: t
                    }, null == i && (i = {}), e.isFunction(i) && (a = i, n = null, i = {}), ("number" == typeof i || e.fx.speeds[i]) && (a = n, n = i, i = {}), e.isFunction(n) && (a = n, n = null), i && e.extend(t, i), n = n || i.duration, t.duration = e.fx.off ? 0 : "number" == typeof n ? n : n in e.fx.speeds ? e.fx.speeds[n] : e.fx.speeds._default, t.complete = a || i.complete, t
                }

                function i(t) {
                    return !(t && "number" != typeof t && !e.fx.speeds[t]) || ("string" == typeof t && !e.effects.effect[t] || (!!e.isFunction(t) || "object" == typeof t && !t.effect))
                }

                function n(e, t) {
                    var i = t.outerWidth(),
                        n = t.outerHeight(),
                        a = /^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(e) || ["", 0, i, n, 0];
                    return {
                        top: parseFloat(a[1]) || 0,
                        right: "auto" === a[2] ? i : parseFloat(a[2]),
                        bottom: "auto" === a[3] ? n : parseFloat(a[3]),
                        left: parseFloat(a[4]) || 0
                    }
                }
                e.expr && e.expr.filters && e.expr.filters.animated && (e.expr.filters.animated = function (t) {
                    return function (i) {
                        return !!e(i).data(l) || t(i)
                    }
                }(e.expr.filters.animated)), !1 !== e.uiBackCompat && e.extend(e.effects, {
                    save: function (e, t) {
                        for (var i = 0, n = t.length; i < n; i++) null !== t[i] && e.data(o + t[i], e[0].style[t[i]])
                    },
                    restore: function (e, t) {
                        for (var i, n = 0, a = t.length; n < a; n++) null !== t[n] && (i = e.data(o + t[n]), e.css(t[n], i))
                    },
                    setMode: function (e, t) {
                        return "toggle" === t && (t = e.is(":hidden") ? "show" : "hide"), t
                    },
                    createWrapper: function (t) {
                        if (t.parent().is(".ui-effects-wrapper")) return t.parent();
                        var i = {
                            width: t.outerWidth(!0),
                            height: t.outerHeight(!0),
                            float: t.css("float")
                        },
                            n = e("<div></div>").addClass("ui-effects-wrapper").css({
                                fontSize: "100%",
                                background: "transparent",
                                border: "none",
                                margin: 0,
                                padding: 0
                            }),
                            a = {
                                width: t.width(),
                                height: t.height()
                            },
                            s = document.activeElement;
                        try {
                            s.id
                        } catch (e) {
                            s = document.body
                        }
                        return t.wrap(n), (t[0] === s || e.contains(t[0], s)) && e(s).trigger("focus"), n = t.parent(), "static" === t.css("position") ? (n.css({
                            position: "relative"
                        }), t.css({
                            position: "relative"
                        })) : (e.extend(i, {
                            position: t.css("position"),
                            zIndex: t.css("z-index")
                        }), e.each(["top", "left", "bottom", "right"], (function (e, n) {
                            i[n] = t.css(n), isNaN(parseInt(i[n], 10)) && (i[n] = "auto")
                        })), t.css({
                            position: "relative",
                            top: 0,
                            left: 0,
                            right: "auto",
                            bottom: "auto"
                        })), t.css(a), n.css(i).show()
                    },
                    removeWrapper: function (t) {
                        var i = document.activeElement;
                        return t.parent().is(".ui-effects-wrapper") && (t.parent().replaceWith(t), (t[0] === i || e.contains(t[0], i)) && e(i).trigger("focus")), t
                    }
                }), e.extend(e.effects, {
                    version: "1.12.1",
                    define: function (t, i, n) {
                        return n || (n = i, i = "effect"), e.effects.effect[t] = n, e.effects.effect[t].mode = i, n
                    },
                    scaledDimensions: function (e, t, i) {
                        if (0 === t) return {
                            height: 0,
                            width: 0,
                            outerHeight: 0,
                            outerWidth: 0
                        };
                        var n = "horizontal" !== i ? (t || 100) / 100 : 1,
                            a = "vertical" !== i ? (t || 100) / 100 : 1;
                        return {
                            height: e.height() * a,
                            width: e.width() * n,
                            outerHeight: e.outerHeight() * a,
                            outerWidth: e.outerWidth() * n
                        }
                    },
                    clipToBox: function (e) {
                        return {
                            width: e.clip.right - e.clip.left,
                            height: e.clip.bottom - e.clip.top,
                            left: e.clip.left,
                            top: e.clip.top
                        }
                    },
                    unshift: function (e, t, i) {
                        var n = e.queue();
                        t > 1 && n.splice.apply(n, [1, 0].concat(n.splice(t, i))), e.dequeue()
                    },
                    saveStyle: function (e) {
                        e.data(r, e[0].style.cssText)
                    },
                    restoreStyle: function (e) {
                        e[0].style.cssText = e.data(r) || "", e.removeData(r)
                    },
                    mode: function (e, t) {
                        var i = e.is(":hidden");
                        return "toggle" === t && (t = i ? "show" : "hide"), (i ? "hide" === t : "show" === t) && (t = "none"), t
                    },
                    getBaseline: function (e, t) {
                        var i, n;
                        switch (e[0]) {
                            case "top":
                                i = 0;
                                break;
                            case "middle":
                                i = .5;
                                break;
                            case "bottom":
                                i = 1;
                                break;
                            default:
                                i = e[0] / t.height
                        }
                        switch (e[1]) {
                            case "left":
                                n = 0;
                                break;
                            case "center":
                                n = .5;
                                break;
                            case "right":
                                n = 1;
                                break;
                            default:
                                n = e[1] / t.width
                        }
                        return {
                            x: n,
                            y: i
                        }
                    },
                    createPlaceholder: function (t) {
                        var i, n = t.css("position"),
                            a = t.position();
                        return t.css({
                            marginTop: t.css("marginTop"),
                            marginBottom: t.css("marginBottom"),
                            marginLeft: t.css("marginLeft"),
                            marginRight: t.css("marginRight")
                        }).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()), /^(static|relative)/.test(n) && (n = "absolute", i = e("<" + t[0].nodeName + ">").insertAfter(t).css({
                            display: /^(inline|ruby)/.test(t.css("display")) ? "inline-block" : "block",
                            visibility: "hidden",
                            marginTop: t.css("marginTop"),
                            marginBottom: t.css("marginBottom"),
                            marginLeft: t.css("marginLeft"),
                            marginRight: t.css("marginRight"),
                            float: t.css("float")
                        }).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).addClass("ui-effects-placeholder"), t.data(o + "placeholder", i)), t.css({
                            position: n,
                            left: a.left,
                            top: a.top
                        }), i
                    },
                    removePlaceholder: function (e) {
                        var t = o + "placeholder",
                            i = e.data(t);
                        i && (i.remove(), e.removeData(t))
                    },
                    cleanUp: function (t) {
                        e.effects.restoreStyle(t), e.effects.removePlaceholder(t)
                    },
                    setTransition: function (t, i, n, a) {
                        return a = a || {}, e.each(i, (function (e, i) {
                            var s = t.cssUnit(i);
                            s[0] > 0 && (a[i] = s[0] * n + s[1])
                        })), a
                    }
                }), e.fn.extend({
                    effect: function () {
                        var i = t.apply(this, arguments),
                            n = e.effects.effect[i.effect],
                            a = n.mode,
                            s = i.queue,
                            o = s || "fx",
                            r = i.complete,
                            c = i.mode,
                            d = [],
                            p = function (t) {
                                var i = e(this),
                                    n = e.effects.mode(i, c) || a;
                                i.data(l, !0), d.push(n), a && ("show" === n || n === a && "hide" === n) && i.show(), a && "none" === n || e.effects.saveStyle(i), e.isFunction(t) && t()
                            };
                        if (e.fx.off || !n) return c ? this[c](i.duration, r) : this.each((function () {
                            r && r.call(this)
                        }));

                        function u(t) {
                            var s = e(this);

                            function o() {
                                e.isFunction(r) && r.call(s[0]), e.isFunction(t) && t()
                            }
                            i.mode = d.shift(), !1 === e.uiBackCompat || a ? "none" === i.mode ? (s[c](), o()) : n.call(s[0], i, (function () {
                                s.removeData(l), e.effects.cleanUp(s), "hide" === i.mode && s.hide(), o()
                            })) : (s.is(":hidden") ? "hide" === c : "show" === c) ? (s[c](), o()) : n.call(s[0], i, o)
                        }
                        return !1 === s ? this.each(p).each(u) : this.queue(o, p).queue(o, u)
                    },
                    show: function (e) {
                        return function (n) {
                            if (i(n)) return e.apply(this, arguments);
                            var a = t.apply(this, arguments);
                            return a.mode = "show", this.effect.call(this, a)
                        }
                    }(e.fn.show),
                    hide: function (e) {
                        return function (n) {
                            if (i(n)) return e.apply(this, arguments);
                            var a = t.apply(this, arguments);
                            return a.mode = "hide", this.effect.call(this, a)
                        }
                    }(e.fn.hide),
                    toggle: function (e) {
                        return function (n) {
                            if (i(n) || "boolean" == typeof n) return e.apply(this, arguments);
                            var a = t.apply(this, arguments);
                            return a.mode = "toggle", this.effect.call(this, a)
                        }
                    }(e.fn.toggle),
                    cssUnit: function (t) {
                        var i = this.css(t),
                            n = [];
                        return e.each(["em", "px", "%", "pt"], (function (e, t) {
                            i.indexOf(t) > 0 && (n = [parseFloat(i), t])
                        })), n
                    },
                    cssClip: function (e) {
                        return e ? this.css("clip", "rect(" + e.top + "px " + e.right + "px " + e.bottom + "px " + e.left + "px)") : n(this.css("clip"), this)
                    },
                    transfer: function (t, i) {
                        var n = e(this),
                            a = e(t.to),
                            s = "fixed" === a.css("position"),
                            o = e("body"),
                            r = s ? o.scrollTop() : 0,
                            l = s ? o.scrollLeft() : 0,
                            c = a.offset(),
                            d = {
                                top: c.top - r,
                                left: c.left - l,
                                height: a.innerHeight(),
                                width: a.innerWidth()
                            },
                            p = n.offset(),
                            u = e("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(t.className).css({
                                top: p.top - r,
                                left: p.left - l,
                                height: n.innerHeight(),
                                width: n.innerWidth(),
                                position: s ? "fixed" : "absolute"
                            }).animate(d, t.duration, t.easing, (function () {
                                u.remove(), e.isFunction(i) && i()
                            }))
                    }
                }), e.fx.step.clip = function (t) {
                    t.clipInit || (t.start = e(t.elem).cssClip(), "string" == typeof t.end && (t.end = n(t.end, t.elem)), t.clipInit = !0), e(t.elem).cssClip({
                        top: t.pos * (t.end.top - t.start.top) + t.start.top,
                        right: t.pos * (t.end.right - t.start.right) + t.start.right,
                        bottom: t.pos * (t.end.bottom - t.start.bottom) + t.start.bottom,
                        left: t.pos * (t.end.left - t.start.left) + t.start.left
                    })
                }
            }(), s = {}, e.each(["Quad", "Cubic", "Quart", "Quint", "Expo"], (function (e, t) {
                s[t] = function (t) {
                    return Math.pow(t, e + 2)
                }
            })), e.extend(s, {
                Sine: function (e) {
                    return 1 - Math.cos(e * Math.PI / 2)
                },
                Circ: function (e) {
                    return 1 - Math.sqrt(1 - e * e)
                },
                Elastic: function (e) {
                    return 0 === e || 1 === e ? e : -Math.pow(2, 8 * (e - 1)) * Math.sin((80 * (e - 1) - 7.5) * Math.PI / 15)
                },
                Back: function (e) {
                    return e * e * (3 * e - 2)
                },
                Bounce: function (e) {
                    for (var t, i = 4; e < ((t = Math.pow(2, --i)) - 1) / 11;);
                    return 1 / Math.pow(4, 3 - i) - 7.5625 * Math.pow((3 * t - 2) / 22 - e, 2)
                }
            }), e.each(s, (function (t, i) {
                e.easing["easeIn" + t] = i, e.easing["easeOut" + t] = function (e) {
                    return 1 - i(1 - e)
                }, e.easing["easeInOut" + t] = function (e) {
                    return e < .5 ? i(2 * e) / 2 : 1 - i(-2 * e + 2) / 2
                }
            }));
        e.effects, e.effects.define("blind", "hide", (function (t, i) {
            var n = {
                up: ["bottom", "top"],
                vertical: ["bottom", "top"],
                down: ["top", "bottom"],
                left: ["right", "left"],
                horizontal: ["right", "left"],
                right: ["left", "right"]
            },
                a = e(this),
                s = t.direction || "up",
                o = a.cssClip(),
                r = {
                    clip: e.extend({}, o)
                },
                l = e.effects.createPlaceholder(a);
            r.clip[n[s][0]] = r.clip[n[s][1]], "show" === t.mode && (a.cssClip(r.clip), l && l.css(e.effects.clipToBox(r)), r.clip = o), l && l.animate(e.effects.clipToBox(r), t.duration, t.easing), a.animate(r, {
                queue: !1,
                duration: t.duration,
                easing: t.easing,
                complete: i
            })
        })), e.effects.define("bounce", (function (t, i) {
            var n, a, s, o = e(this),
                r = t.mode,
                l = "hide" === r,
                c = "show" === r,
                d = t.direction || "up",
                p = t.distance,
                u = t.times || 5,
                h = 2 * u + (c || l ? 1 : 0),
                f = t.duration / h,
                m = t.easing,
                g = "up" === d || "down" === d ? "top" : "left",
                v = "up" === d || "left" === d,
                b = 0,
                y = o.queue().length;
            for (e.effects.createPlaceholder(o), s = o.css(g), p || (p = o["top" === g ? "outerHeight" : "outerWidth"]() / 3), c && ((a = {
                opacity: 1
            })[g] = s, o.css("opacity", 0).css(g, v ? 2 * -p : 2 * p).animate(a, f, m)), l && (p /= Math.pow(2, u - 1)), (a = {})[g] = s; b < u; b++)(n = {})[g] = (v ? "-=" : "+=") + p, o.animate(n, f, m).animate(a, f, m), p = l ? 2 * p : p / 2;
            l && ((n = {
                opacity: 0
            })[g] = (v ? "-=" : "+=") + p, o.animate(n, f, m)), o.queue(i), e.effects.unshift(o, y, h + 1)
        })), e.effects.define("clip", "hide", (function (t, i) {
            var n, a = {},
                s = e(this),
                o = t.direction || "vertical",
                r = "both" === o,
                l = r || "horizontal" === o,
                c = r || "vertical" === o;
            n = s.cssClip(), a.clip = {
                top: c ? (n.bottom - n.top) / 2 : n.top,
                right: l ? (n.right - n.left) / 2 : n.right,
                bottom: c ? (n.bottom - n.top) / 2 : n.bottom,
                left: l ? (n.right - n.left) / 2 : n.left
            }, e.effects.createPlaceholder(s), "show" === t.mode && (s.cssClip(a.clip), a.clip = n), s.animate(a, {
                queue: !1,
                duration: t.duration,
                easing: t.easing,
                complete: i
            })
        })), e.effects.define("drop", "hide", (function (t, i) {
            var n, a = e(this),
                s = "show" === t.mode,
                o = t.direction || "left",
                r = "up" === o || "down" === o ? "top" : "left",
                l = "up" === o || "left" === o ? "-=" : "+=",
                c = "+=" === l ? "-=" : "+=",
                d = {
                    opacity: 0
                };
            e.effects.createPlaceholder(a), n = t.distance || a["top" === r ? "outerHeight" : "outerWidth"](!0) / 2, d[r] = l + n, s && (a.css(d), d[r] = c + n, d.opacity = 1), a.animate(d, {
                queue: !1,
                duration: t.duration,
                easing: t.easing,
                complete: i
            })
        })), e.effects.define("explode", "hide", (function (t, i) {
            var n, a, s, o, r, l, c = t.pieces ? Math.round(Math.sqrt(t.pieces)) : 3,
                d = c,
                p = e(this),
                u = "show" === t.mode,
                h = p.show().css("visibility", "hidden").offset(),
                f = Math.ceil(p.outerWidth() / d),
                m = Math.ceil(p.outerHeight() / c),
                g = [];

            function v() {
                g.push(this), g.length === c * d && (p.css({
                    visibility: "visible"
                }), e(g).remove(), i())
            }
            for (n = 0; n < c; n++)
                for (o = h.top + n * m, l = n - (c - 1) / 2, a = 0; a < d; a++) s = h.left + a * f, r = a - (d - 1) / 2, p.clone().appendTo("body").wrap("<div></div>").css({
                    position: "absolute",
                    visibility: "visible",
                    left: -a * f,
                    top: -n * m
                }).parent().addClass("ui-effects-explode").css({
                    position: "absolute",
                    overflow: "hidden",
                    width: f,
                    height: m,
                    left: s + (u ? r * f : 0),
                    top: o + (u ? l * m : 0),
                    opacity: u ? 0 : 1
                }).animate({
                    left: s + (u ? 0 : r * f),
                    top: o + (u ? 0 : l * m),
                    opacity: u ? 1 : 0
                }, t.duration || 500, t.easing, v)
        })), e.effects.define("fade", "toggle", (function (t, i) {
            var n = "show" === t.mode;
            e(this).css("opacity", n ? 0 : 1).animate({
                opacity: n ? 1 : 0
            }, {
                queue: !1,
                duration: t.duration,
                easing: t.easing,
                complete: i
            })
        })), e.effects.define("fold", "hide", (function (t, i) {
            var n = e(this),
                a = t.mode,
                s = "show" === a,
                o = "hide" === a,
                r = t.size || 15,
                l = /([0-9]+)%/.exec(r),
                c = !!t.horizFirst ? ["right", "bottom"] : ["bottom", "right"],
                d = t.duration / 2,
                p = e.effects.createPlaceholder(n),
                u = n.cssClip(),
                h = {
                    clip: e.extend({}, u)
                },
                f = {
                    clip: e.extend({}, u)
                },
                m = [u[c[0]], u[c[1]]],
                g = n.queue().length;
            l && (r = parseInt(l[1], 10) / 100 * m[o ? 0 : 1]), h.clip[c[0]] = r, f.clip[c[0]] = r, f.clip[c[1]] = 0, s && (n.cssClip(f.clip), p && p.css(e.effects.clipToBox(f)), f.clip = u), n.queue((function (i) {
                p && p.animate(e.effects.clipToBox(h), d, t.easing).animate(e.effects.clipToBox(f), d, t.easing), i()
            })).animate(h, d, t.easing).animate(f, d, t.easing).queue(i), e.effects.unshift(n, g, 4)
        })), e.effects.define("highlight", "show", (function (t, i) {
            var n = e(this),
                a = {
                    backgroundColor: n.css("backgroundColor")
                };
            "hide" === t.mode && (a.opacity = 0), e.effects.saveStyle(n), n.css({
                backgroundImage: "none",
                backgroundColor: t.color || "#ffff99"
            }).animate(a, {
                queue: !1,
                duration: t.duration,
                easing: t.easing,
                complete: i
            })
        })), e.effects.define("size", (function (t, i) {
            var n, a, s, o = e(this),
                r = ["fontSize"],
                l = ["borderTopWidth", "borderBottomWidth", "paddingTop", "paddingBottom"],
                c = ["borderLeftWidth", "borderRightWidth", "paddingLeft", "paddingRight"],
                d = t.mode,
                p = "effect" !== d,
                u = t.scale || "both",
                h = t.origin || ["middle", "center"],
                f = o.css("position"),
                m = o.position(),
                g = e.effects.scaledDimensions(o),
                v = t.from || g,
                b = t.to || e.effects.scaledDimensions(o, 0);
            e.effects.createPlaceholder(o), "show" === d && (s = v, v = b, b = s), a = {
                from: {
                    y: v.height / g.height,
                    x: v.width / g.width
                },
                to: {
                    y: b.height / g.height,
                    x: b.width / g.width
                }
            }, "box" !== u && "both" !== u || (a.from.y !== a.to.y && (v = e.effects.setTransition(o, l, a.from.y, v), b = e.effects.setTransition(o, l, a.to.y, b)), a.from.x !== a.to.x && (v = e.effects.setTransition(o, c, a.from.x, v), b = e.effects.setTransition(o, c, a.to.x, b))), "content" !== u && "both" !== u || a.from.y !== a.to.y && (v = e.effects.setTransition(o, r, a.from.y, v), b = e.effects.setTransition(o, r, a.to.y, b)), h && (n = e.effects.getBaseline(h, g), v.top = (g.outerHeight - v.outerHeight) * n.y + m.top, v.left = (g.outerWidth - v.outerWidth) * n.x + m.left, b.top = (g.outerHeight - b.outerHeight) * n.y + m.top, b.left = (g.outerWidth - b.outerWidth) * n.x + m.left), o.css(v), "content" !== u && "both" !== u || (l = l.concat(["marginTop", "marginBottom"]).concat(r), c = c.concat(["marginLeft", "marginRight"]), o.find("*[width]").each((function () {
                var i = e(this),
                    n = e.effects.scaledDimensions(i),
                    s = {
                        height: n.height * a.from.y,
                        width: n.width * a.from.x,
                        outerHeight: n.outerHeight * a.from.y,
                        outerWidth: n.outerWidth * a.from.x
                    },
                    o = {
                        height: n.height * a.to.y,
                        width: n.width * a.to.x,
                        outerHeight: n.height * a.to.y,
                        outerWidth: n.width * a.to.x
                    };
                a.from.y !== a.to.y && (s = e.effects.setTransition(i, l, a.from.y, s), o = e.effects.setTransition(i, l, a.to.y, o)), a.from.x !== a.to.x && (s = e.effects.setTransition(i, c, a.from.x, s), o = e.effects.setTransition(i, c, a.to.x, o)), p && e.effects.saveStyle(i), i.css(s), i.animate(o, t.duration, t.easing, (function () {
                    p && e.effects.restoreStyle(i)
                }))
            }))), o.animate(b, {
                queue: !1,
                duration: t.duration,
                easing: t.easing,
                complete: function () {
                    var t = o.offset();
                    0 === b.opacity && o.css("opacity", v.opacity), p || (o.css("position", "static" === f ? "relative" : f).offset(t), e.effects.saveStyle(o)), i()
                }
            })
        })), e.effects.define("scale", (function (t, i) {
            var n = e(this),
                a = t.mode,
                s = parseInt(t.percent, 10) || (0 === parseInt(t.percent, 10) || "effect" !== a ? 0 : 100),
                o = e.extend(!0, {
                    from: e.effects.scaledDimensions(n),
                    to: e.effects.scaledDimensions(n, s, t.direction || "both"),
                    origin: t.origin || ["middle", "center"]
                }, t);
            t.fade && (o.from.opacity = 1, o.to.opacity = 0), e.effects.effect.size.call(this, o, i)
        })), e.effects.define("puff", "hide", (function (t, i) {
            var n = e.extend(!0, {}, t, {
                fade: !0,
                percent: parseInt(t.percent, 10) || 150
            });
            e.effects.effect.scale.call(this, n, i)
        })), e.effects.define("pulsate", "show", (function (t, i) {
            var n = e(this),
                a = t.mode,
                s = "show" === a,
                o = s || "hide" === a,
                r = 2 * (t.times || 5) + (o ? 1 : 0),
                l = t.duration / r,
                c = 0,
                d = 1,
                p = n.queue().length;
            for (!s && n.is(":visible") || (n.css("opacity", 0).show(), c = 1); d < r; d++) n.animate({
                opacity: c
            }, l, t.easing), c = 1 - c;
            n.animate({
                opacity: c
            }, l, t.easing), n.queue(i), e.effects.unshift(n, p, r + 1)
        })), e.effects.define("shake", (function (t, i) {
            var n = 1,
                a = e(this),
                s = t.direction || "left",
                o = t.distance || 20,
                r = t.times || 3,
                l = 2 * r + 1,
                c = Math.round(t.duration / l),
                d = "up" === s || "down" === s ? "top" : "left",
                p = "up" === s || "left" === s,
                u = {},
                h = {},
                f = {},
                m = a.queue().length;
            for (e.effects.createPlaceholder(a), u[d] = (p ? "-=" : "+=") + o, h[d] = (p ? "+=" : "-=") + 2 * o, f[d] = (p ? "-=" : "+=") + 2 * o, a.animate(u, c, t.easing); n < r; n++) a.animate(h, c, t.easing).animate(f, c, t.easing);
            a.animate(h, c, t.easing).animate(u, c / 2, t.easing).queue(i), e.effects.unshift(a, m, l + 1)
        })), e.effects.define("slide", "show", (function (t, i) {
            var n, a, s = e(this),
                o = {
                    up: ["bottom", "top"],
                    down: ["top", "bottom"],
                    left: ["right", "left"],
                    right: ["left", "right"]
                },
                r = t.mode,
                l = t.direction || "left",
                c = "up" === l || "down" === l ? "top" : "left",
                d = "up" === l || "left" === l,
                p = t.distance || s["top" === c ? "outerHeight" : "outerWidth"](!0),
                u = {};
            e.effects.createPlaceholder(s), n = s.cssClip(), a = s.position()[c], u[c] = (d ? -1 : 1) * p + a, u.clip = s.cssClip(), u.clip[o[l][1]] = u.clip[o[l][0]], "show" === r && (s.cssClip(u.clip), s.css(c, u[c]), u.clip = n, u[c] = a), s.animate(u, {
                queue: !1,
                duration: t.duration,
                easing: t.easing,
                complete: i
            })
        }));
        /*!
         * jQuery UI Effects Blind 1.12.1
         * http://jqueryui.com
         *
         * Copyright jQuery Foundation and other contributors
         * Released under the MIT license.
         * http://jquery.org/license
         */
        !1 !== e.uiBackCompat && e.effects.define("transfer", (function (t, i) {
            e(this).transfer(t, i)
        }));
        /*!
         * jQuery UI Focusable 1.12.1
         * http://jqueryui.com
         *
         * Copyright jQuery Foundation and other contributors
         * Released under the MIT license.
         * http://jquery.org/license
         */
        e.ui.focusable = function (t, i) {
            var n, a, s, o, r, l = t.nodeName.toLowerCase();
            return "area" === l ? (a = (n = t.parentNode).name, !(!t.href || !a || "map" !== n.nodeName.toLowerCase()) && ((s = e("img[usemap='#" + a + "']")).length > 0 && s.is(":visible"))) : (/^(input|select|textarea|button|object)$/.test(l) ? (o = !t.disabled) && (r = e(t).closest("fieldset")[0]) && (o = !r.disabled) : o = "a" === l && t.href || i, o && e(t).is(":visible") && function (e) {
                var t = e.css("visibility");
                for (;
                    "inherit" === t;) t = (e = e.parent()).css("visibility");
                return "hidden" !== t
            }(e(t)))
        }, e.extend(e.expr[":"], {
            focusable: function (t) {
                return e.ui.focusable(t, null != e.attr(t, "tabindex"))
            }
        });
        e.ui.focusable, e.fn.form = function () {
            return "string" == typeof this[0].form ? this.closest("form") : e(this[0].form)
        }, e.ui.formResetMixin = {
            _formResetHandler: function () {
                var t = e(this);
                setTimeout((function () {
                    var i = t.data("ui-form-reset-instances");
                    e.each(i, (function () {
                        this.refresh()
                    }))
                }))
            },
            _bindFormResetHandler: function () {
                if (this.form = this.element.form(), this.form.length) {
                    var e = this.form.data("ui-form-reset-instances") || [];
                    e.length || this.form.on("reset.ui-form-reset", this._formResetHandler), e.push(this), this.form.data("ui-form-reset-instances", e)
                }
            },
            _unbindFormResetHandler: function () {
                if (this.form.length) {
                    var t = this.form.data("ui-form-reset-instances");
                    t.splice(e.inArray(this, t), 1), t.length ? this.form.data("ui-form-reset-instances", t) : this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")
                }
            }
        };
        /*!
         * jQuery UI Support for jQuery core 1.7.x 1.12.1
         * http://jqueryui.com
         *
         * Copyright jQuery Foundation and other contributors
         * Released under the MIT license.
         * http://jquery.org/license
         *
         */
        "1.7" === e.fn.jquery.substring(0, 3) && (e.each(["Width", "Height"], (function (t, i) {
            var n = "Width" === i ? ["Left", "Right"] : ["Top", "Bottom"],
                a = i.toLowerCase(),
                s = {
                    innerWidth: e.fn.innerWidth,
                    innerHeight: e.fn.innerHeight,
                    outerWidth: e.fn.outerWidth,
                    outerHeight: e.fn.outerHeight
                };

            function o(t, i, a, s) {
                return e.each(n, (function () {
                    i -= parseFloat(e.css(t, "padding" + this)) || 0, a && (i -= parseFloat(e.css(t, "border" + this + "Width")) || 0), s && (i -= parseFloat(e.css(t, "margin" + this)) || 0)
                })), i
            }
            e.fn["inner" + i] = function (t) {
                return void 0 === t ? s["inner" + i].call(this) : this.each((function () {
                    e(this).css(a, o(this, t) + "px")
                }))
            }, e.fn["outer" + i] = function (t, n) {
                return "number" != typeof t ? s["outer" + i].call(this, t) : this.each((function () {
                    e(this).css(a, o(this, t, !0, n) + "px")
                }))
            }
        })), e.fn.addBack = function (e) {
            return this.add(null == e ? this.prevObject : this.prevObject.filter(e))
        });
        /*!
         * jQuery UI Keycode 1.12.1
         * http://jqueryui.com
         *
         * Copyright jQuery Foundation and other contributors
         * Released under the MIT license.
         * http://jquery.org/license
         */
        var d, p;
        e.ui.keyCode = {
            BACKSPACE: 8,
            COMMA: 188,
            DELETE: 46,
            DOWN: 40,
            END: 35,
            ENTER: 13,
            ESCAPE: 27,
            HOME: 36,
            LEFT: 37,
            PAGE_DOWN: 34,
            PAGE_UP: 33,
            PERIOD: 190,
            RIGHT: 39,
            SPACE: 32,
            TAB: 9,
            UP: 38
        }, e.ui.escapeSelector = (d = /([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g, function (e) {
            return e.replace(d, "\\$1")
        }), e.fn.labels = function () {
            var t, i, n, a, s;
            return this[0].labels && this[0].labels.length ? this.pushStack(this[0].labels) : (a = this.eq(0).parents("label"), (n = this.attr("id")) && (s = (t = this.eq(0).parents().last()).add(t.length ? t.siblings() : this.siblings()), i = "label[for='" + e.ui.escapeSelector(n) + "']", a = a.add(s.find(i).addBack(i))), this.pushStack(a))
        }, e.fn.scrollParent = function (t) {
            var i = this.css("position"),
                n = "absolute" === i,
                a = t ? /(auto|scroll|hidden)/ : /(auto|scroll)/,
                s = this.parents().filter((function () {
                    var t = e(this);
                    return (!n || "static" !== t.css("position")) && a.test(t.css("overflow") + t.css("overflow-y") + t.css("overflow-x"))
                })).eq(0);
            return "fixed" !== i && s.length ? s : e(this[0].ownerDocument || document)
        }, e.extend(e.expr[":"], {
            tabbable: function (t) {
                var i = e.attr(t, "tabindex"),
                    n = null != i;
                return (!n || i >= 0) && e.ui.focusable(t, n)
            }
        }), e.fn.extend({
            uniqueId: (p = 0, function () {
                return this.each((function () {
                    this.id || (this.id = "ui-id-" + ++p)
                }))
            }),
            removeUniqueId: function () {
                return this.each((function () {
                    /^ui-id-\d+$/.test(this.id) && e(this).removeAttr("id")
                }))
            }
        }), e.widget("ui.accordion", {
            version: "1.12.1",
            options: {
                active: 0,
                animate: {},
                classes: {
                    "ui-accordion-header": "ui-corner-top",
                    "ui-accordion-header-collapsed": "ui-corner-all",
                    "ui-accordion-content": "ui-corner-bottom"
                },
                collapsible: !1,
                event: "click",
                header: "> li > :first-child, > :not(li):even",
                heightStyle: "auto",
                icons: {
                    activeHeader: "ui-icon-triangle-1-s",
                    header: "ui-icon-triangle-1-e"
                },
                activate: null,
                beforeActivate: null
            },
            hideProps: {
                borderTopWidth: "hide",
                borderBottomWidth: "hide",
                paddingTop: "hide",
                paddingBottom: "hide",
                height: "hide"
            },
            showProps: {
                borderTopWidth: "show",
                borderBottomWidth: "show",
                paddingTop: "show",
                paddingBottom: "show",
                height: "show"
            },
            _create: function () {
                var t = this.options;
                this.prevShow = this.prevHide = e(), this._addClass("ui-accordion", "ui-widget ui-helper-reset"), this.element.attr("role", "tablist"), t.collapsible || !1 !== t.active && null != t.active || (t.active = 0), this._processPanels(), t.active < 0 && (t.active += this.headers.length), this._refresh()
            },
            _getCreateEventData: function () {
                return {
                    header: this.active,
                    panel: this.active.length ? this.active.next() : e()
                }
            },
            _createIcons: function () {
                var t, i, n = this.options.icons;
                n && (t = e("<span>"), this._addClass(t, "ui-accordion-header-icon", "ui-icon " + n.header), t.prependTo(this.headers), i = this.active.children(".ui-accordion-header-icon"), this._removeClass(i, n.header)._addClass(i, null, n.activeHeader)._addClass(this.headers, "ui-accordion-icons"))
            },
            _destroyIcons: function () {
                this._removeClass(this.headers, "ui-accordion-icons"), this.headers.children(".ui-accordion-header-icon").remove()
            },
            _destroy: function () {
                var e;
                this.element.removeAttr("role"), this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(), this._destroyIcons(), e = this.headers.next().css("display", "").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(), "content" !== this.options.heightStyle && e.css("height", "")
            },
            _setOption: function (e, t) {
                "active" !== e ? ("event" === e && (this.options.event && this._off(this.headers, this.options.event), this._setupEvents(t)), this._super(e, t), "collapsible" !== e || t || !1 !== this.options.active || this._activate(0), "icons" === e && (this._destroyIcons(), t && this._createIcons())) : this._activate(t)
            },
            _setOptionDisabled: function (e) {
                this._super(e), this.element.attr("aria-disabled", e), this._toggleClass(null, "ui-state-disabled", !!e), this._toggleClass(this.headers.add(this.headers.next()), null, "ui-state-disabled", !!e)
            },
            _keydown: function (t) {
                if (!t.altKey && !t.ctrlKey) {
                    var i = e.ui.keyCode,
                        n = this.headers.length,
                        a = this.headers.index(t.target),
                        s = !1;
                    switch (t.keyCode) {
                        case i.RIGHT:
                        case i.DOWN:
                            s = this.headers[(a + 1) % n];
                            break;
                        case i.LEFT:
                        case i.UP:
                            s = this.headers[(a - 1 + n) % n];
                            break;
                        case i.SPACE:
                        case i.ENTER:
                            this._eventHandler(t);
                            break;
                        case i.HOME:
                            s = this.headers[0];
                            break;
                        case i.END:
                            s = this.headers[n - 1]
                    }
                    s && (e(t.target).attr("tabIndex", -1), e(s).attr("tabIndex", 0), e(s).trigger("focus"), t.preventDefault())
                }
            },
            _panelKeyDown: function (t) {
                t.keyCode === e.ui.keyCode.UP && t.ctrlKey && e(t.currentTarget).prev().trigger("focus")
            },
            refresh: function () {
                var t = this.options;
                this._processPanels(), !1 === t.active && !0 === t.collapsible || !this.headers.length ? (t.active = !1, this.active = e()) : !1 === t.active ? this._activate(0) : this.active.length && !e.contains(this.element[0], this.active[0]) ? this.headers.length === this.headers.find(".ui-state-disabled").length ? (t.active = !1, this.active = e()) : this._activate(Math.max(0, t.active - 1)) : t.active = this.headers.index(this.active), this._destroyIcons(), this._refresh()
            },
            _processPanels: function () {
                var e = this.headers,
                    t = this.panels;
                this.headers = this.element.find(this.options.header), this._addClass(this.headers, "ui-accordion-header ui-accordion-header-collapsed", "ui-state-default"), this.panels = this.headers.next().filter(":not(.ui-accordion-content-active)").hide(), this._addClass(this.panels, "ui-accordion-content", "ui-helper-reset ui-widget-content"), t && (this._off(e.not(this.headers)), this._off(t.not(this.panels)))
            },
            _refresh: function () {
                var t, i = this.options,
                    n = i.heightStyle,
                    a = this.element.parent();
                this.active = this._findActive(i.active), this._addClass(this.active, "ui-accordion-header-active", "ui-state-active")._removeClass(this.active, "ui-accordion-header-collapsed"), this._addClass(this.active.next(), "ui-accordion-content-active"), this.active.next().show(), this.headers.attr("role", "tab").each((function () {
                    var t = e(this),
                        i = t.uniqueId().attr("id"),
                        n = t.next(),
                        a = n.uniqueId().attr("id");
                    t.attr("aria-controls", a), n.attr("aria-labelledby", i)
                })).next().attr("role", "tabpanel"), this.headers.not(this.active).attr({
                    "aria-selected": "false",
                    "aria-expanded": "false",
                    tabIndex: -1
                }).next().attr({
                    "aria-hidden": "true"
                }).hide(), this.active.length ? this.active.attr({
                    "aria-selected": "true",
                    "aria-expanded": "true",
                    tabIndex: 0
                }).next().attr({
                    "aria-hidden": "false"
                }) : this.headers.eq(0).attr("tabIndex", 0), this._createIcons(), this._setupEvents(i.event), "fill" === n ? (t = a.height(), this.element.siblings(":visible").each((function () {
                    var i = e(this),
                        n = i.css("position");
                    "absolute" !== n && "fixed" !== n && (t -= i.outerHeight(!0))
                })), this.headers.each((function () {
                    t -= e(this).outerHeight(!0)
                })), this.headers.next().each((function () {
                    e(this).height(Math.max(0, t - e(this).innerHeight() + e(this).height()))
                })).css("overflow", "auto")) : "auto" === n && (t = 0, this.headers.next().each((function () {
                    var i = e(this).is(":visible");
                    i || e(this).show(), t = Math.max(t, e(this).css("height", "").height()), i || e(this).hide()
                })).height(t))
            },
            _activate: function (t) {
                var i = this._findActive(t)[0];
                i !== this.active[0] && (i = i || this.active[0], this._eventHandler({
                    target: i,
                    currentTarget: i,
                    preventDefault: e.noop
                }))
            },
            _findActive: function (t) {
                return "number" == typeof t ? this.headers.eq(t) : e()
            },
            _setupEvents: function (t) {
                var i = {
                    keydown: "_keydown"
                };
                t && e.each(t.split(" "), (function (e, t) {
                    i[t] = "_eventHandler"
                })), this._off(this.headers.add(this.headers.next())), this._on(this.headers, i), this._on(this.headers.next(), {
                    keydown: "_panelKeyDown"
                }), this._hoverable(this.headers), this._focusable(this.headers)
            },
            _eventHandler: function (t) {
                var i, n, a = this.options,
                    s = this.active,
                    o = e(t.currentTarget),
                    r = o[0] === s[0],
                    l = r && a.collapsible,
                    c = l ? e() : o.next(),
                    d = s.next(),
                    p = {
                        oldHeader: s,
                        oldPanel: d,
                        newHeader: l ? e() : o,
                        newPanel: c
                    };
                t.preventDefault(), r && !a.collapsible || !1 === this._trigger("beforeActivate", t, p) || (a.active = !l && this.headers.index(o), this.active = r ? e() : o, this._toggle(p), this._removeClass(s, "ui-accordion-header-active", "ui-state-active"), a.icons && (i = s.children(".ui-accordion-header-icon"), this._removeClass(i, null, a.icons.activeHeader)._addClass(i, null, a.icons.header)), r || (this._removeClass(o, "ui-accordion-header-collapsed")._addClass(o, "ui-accordion-header-active", "ui-state-active"), a.icons && (n = o.children(".ui-accordion-header-icon"), this._removeClass(n, null, a.icons.header)._addClass(n, null, a.icons.activeHeader)), this._addClass(o.next(), "ui-accordion-content-active")))
            },
            _toggle: function (t) {
                var i = t.newPanel,
                    n = this.prevShow.length ? this.prevShow : t.oldPanel;
                this.prevShow.add(this.prevHide).stop(!0, !0), this.prevShow = i, this.prevHide = n, this.options.animate ? this._animate(i, n, t) : (n.hide(), i.show(), this._toggleComplete(t)), n.attr({
                    "aria-hidden": "true"
                }), n.prev().attr({
                    "aria-selected": "false",
                    "aria-expanded": "false"
                }), i.length && n.length ? n.prev().attr({
                    tabIndex: -1,
                    "aria-expanded": "false"
                }) : i.length && this.headers.filter((function () {
                    return 0 === parseInt(e(this).attr("tabIndex"), 10)
                })).attr("tabIndex", -1), i.attr("aria-hidden", "false").prev().attr({
                    "aria-selected": "true",
                    "aria-expanded": "true",
                    tabIndex: 0
                })
            },
            _animate: function (e, t, i) {
                var n, a, s, o = this,
                    r = 0,
                    l = e.css("box-sizing"),
                    c = e.length && (!t.length || e.index() < t.index()),
                    d = this.options.animate || {},
                    p = c && d.down || d,
                    u = function () {
                        o._toggleComplete(i)
                    };
                return "number" == typeof p && (s = p), "string" == typeof p && (a = p), a = a || p.easing || d.easing, s = s || p.duration || d.duration, t.length ? e.length ? (n = e.show().outerHeight(), t.animate(this.hideProps, {
                    duration: s,
                    easing: a,
                    step: function (e, t) {
                        t.now = Math.round(e)
                    }
                }), void e.hide().animate(this.showProps, {
                    duration: s,
                    easing: a,
                    complete: u,
                    step: function (e, i) {
                        i.now = Math.round(e), "height" !== i.prop ? "content-box" === l && (r += i.now) : "content" !== o.options.heightStyle && (i.now = Math.round(n - t.outerHeight() - r), r = 0)
                    }
                })) : t.animate(this.hideProps, s, a, u) : e.animate(this.showProps, s, a, u)
            },
            _toggleComplete: function (e) {
                var t = e.oldPanel,
                    i = t.prev();
                this._removeClass(t, "ui-accordion-content-active"), this._removeClass(i, "ui-accordion-header-active")._addClass(i, "ui-accordion-header-collapsed"), t.length && (t.parent()[0].className = t.parent()[0].className), this._trigger("activate", null, e)
            }
        }), e.ui.safeActiveElement = function (e) {
            var t;
            try {
                t = e.activeElement
            } catch (i) {
                t = e.body
            }
            return t || (t = e.body), t.nodeName || (t = e.body), t
        }, e.widget("ui.menu", {
            version: "1.12.1",
            defaultElement: "<ul>",
            delay: 300,
            options: {
                icons: {
                    submenu: "ui-icon-caret-1-e"
                },
                items: "> *",
                menus: "ul",
                position: {
                    my: "left top",
                    at: "right top"
                },
                role: "menu",
                blur: null,
                focus: null,
                select: null
            },
            _create: function () {
                this.activeMenu = this.element, this.mouseHandled = !1, this.element.uniqueId().attr({
                    role: this.options.role,
                    tabIndex: 0
                }), this._addClass("ui-menu", "ui-widget ui-widget-content"), this._on({
                    "mousedown .ui-menu-item": function (e) {
                        e.preventDefault()
                    },
                    "click .ui-menu-item": function (t) {
                        var i = e(t.target),
                            n = e(e.ui.safeActiveElement(this.document[0]));
                        !this.mouseHandled && i.not(".ui-state-disabled").length && (this.select(t), t.isPropagationStopped() || (this.mouseHandled = !0), i.has(".ui-menu").length ? this.expand(t) : !this.element.is(":focus") && n.closest(".ui-menu").length && (this.element.trigger("focus", [!0]), this.active && 1 === this.active.parents(".ui-menu").length && clearTimeout(this.timer)))
                    },
                    "mouseenter .ui-menu-item": function (t) {
                        if (!this.previousFilter) {
                            var i = e(t.target).closest(".ui-menu-item"),
                                n = e(t.currentTarget);
                            i[0] === n[0] && (this._removeClass(n.siblings().children(".ui-state-active"), null, "ui-state-active"), this.focus(t, n))
                        }
                    },
                    mouseleave: "collapseAll",
                    "mouseleave .ui-menu": "collapseAll",
                    focus: function (e, t) {
                        var i = this.active || this.element.find(this.options.items).eq(0);
                        t || this.focus(e, i)
                    },
                    blur: function (t) {
                        this._delay((function () {
                            !e.contains(this.element[0], e.ui.safeActiveElement(this.document[0])) && this.collapseAll(t)
                        }))
                    },
                    keydown: "_keydown"
                }), this.refresh(), this._on(this.document, {
                    click: function (e) {
                        this._closeOnDocumentClick(e) && this.collapseAll(e), this.mouseHandled = !1
                    }
                })
            },
            _destroy: function () {
                var t = this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");
                this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(), t.children().each((function () {
                    var t = e(this);
                    t.data("ui-menu-submenu-caret") && t.remove()
                }))
            },
            _keydown: function (t) {
                var i, n, a, s, o = !0;
                switch (t.keyCode) {
                    case e.ui.keyCode.PAGE_UP:
                        this.previousPage(t);
                        break;
                    case e.ui.keyCode.PAGE_DOWN:
                        this.nextPage(t);
                        break;
                    case e.ui.keyCode.HOME:
                        this._move("first", "first", t);
                        break;
                    case e.ui.keyCode.END:
                        this._move("last", "last", t);
                        break;
                    case e.ui.keyCode.UP:
                        this.previous(t);
                        break;
                    case e.ui.keyCode.DOWN:
                        this.next(t);
                        break;
                    case e.ui.keyCode.LEFT:
                        this.collapse(t);
                        break;
                    case e.ui.keyCode.RIGHT:
                        this.active && !this.active.is(".ui-state-disabled") && this.expand(t);
                        break;
                    case e.ui.keyCode.ENTER:
                    case e.ui.keyCode.SPACE:
                        this._activate(t);
                        break;
                    case e.ui.keyCode.ESCAPE:
                        this.collapse(t);
                        break;
                    default:
                        o = !1, n = this.previousFilter || "", s = !1, a = t.keyCode >= 96 && t.keyCode <= 105 ? (t.keyCode - 96).toString() : String.fromCharCode(t.keyCode), clearTimeout(this.filterTimer), a === n ? s = !0 : a = n + a, i = this._filterMenuItems(a), (i = s && -1 !== i.index(this.active.next()) ? this.active.nextAll(".ui-menu-item") : i).length || (a = String.fromCharCode(t.keyCode), i = this._filterMenuItems(a)), i.length ? (this.focus(t, i), this.previousFilter = a, this.filterTimer = this._delay((function () {
                            delete this.previousFilter
                        }), 1e3)) : delete this.previousFilter
                }
                o && t.preventDefault()
            },
            _activate: function (e) {
                this.active && !this.active.is(".ui-state-disabled") && (this.active.children("[aria-haspopup='true']").length ? this.expand(e) : this.select(e))
            },
            refresh: function () {
                var t, i, n, a, s = this,
                    o = this.options.icons.submenu,
                    r = this.element.find(this.options.menus);
                this._toggleClass("ui-menu-icons", null, !!this.element.find(".ui-icon").length), i = r.filter(":not(.ui-menu)").hide().attr({
                    role: this.options.role,
                    "aria-hidden": "true",
                    "aria-expanded": "false"
                }).each((function () {
                    var t = e(this),
                        i = t.prev(),
                        n = e("<span>").data("ui-menu-submenu-caret", !0);
                    s._addClass(n, "ui-menu-icon", "ui-icon " + o), i.attr("aria-haspopup", "true").prepend(n), t.attr("aria-labelledby", i.attr("id"))
                })), this._addClass(i, "ui-menu", "ui-widget ui-widget-content ui-front"), (t = r.add(this.element).find(this.options.items)).not(".ui-menu-item").each((function () {
                    var t = e(this);
                    s._isDivider(t) && s._addClass(t, "ui-menu-divider", "ui-widget-content")
                })), a = (n = t.not(".ui-menu-item, .ui-menu-divider")).children().not(".ui-menu").uniqueId().attr({
                    tabIndex: -1,
                    role: this._itemRole()
                }), this._addClass(n, "ui-menu-item")._addClass(a, "ui-menu-item-wrapper"), t.filter(".ui-state-disabled").attr("aria-disabled", "true"), this.active && !e.contains(this.element[0], this.active[0]) && this.blur()
            },
            _itemRole: function () {
                return {
                    menu: "menuitem",
                    listbox: "option"
                }[this.options.role]
            },
            _setOption: function (e, t) {
                if ("icons" === e) {
                    var i = this.element.find(".ui-menu-icon");
                    this._removeClass(i, null, this.options.icons.submenu)._addClass(i, null, t.submenu)
                }
                this._super(e, t)
            },
            _setOptionDisabled: function (e) {
                this._super(e), this.element.attr("aria-disabled", String(e)), this._toggleClass(null, "ui-state-disabled", !!e)
            },
            focus: function (e, t) {
                var i, n, a;
                this.blur(e, e && "focus" === e.type), this._scrollIntoView(t), this.active = t.first(), n = this.active.children(".ui-menu-item-wrapper"), this._addClass(n, null, "ui-state-active"), this.options.role && this.element.attr("aria-activedescendant", n.attr("id")), a = this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"), this._addClass(a, null, "ui-state-active"), e && "keydown" === e.type ? this._close() : this.timer = this._delay((function () {
                    this._close()
                }), this.delay), (i = t.children(".ui-menu")).length && e && /^mouse/.test(e.type) && this._startOpening(i), this.activeMenu = t.parent(), this._trigger("focus", e, {
                    item: t
                })
            },
            _scrollIntoView: function (t) {
                var i, n, a, s, o, r;
                this._hasScroll() && (i = parseFloat(e.css(this.activeMenu[0], "borderTopWidth")) || 0, n = parseFloat(e.css(this.activeMenu[0], "paddingTop")) || 0, a = t.offset().top - this.activeMenu.offset().top - i - n, s = this.activeMenu.scrollTop(), o = this.activeMenu.height(), r = t.outerHeight(), a < 0 ? this.activeMenu.scrollTop(s + a) : a + r > o && this.activeMenu.scrollTop(s + a - o + r))
            },
            blur: function (e, t) {
                t || clearTimeout(this.timer), this.active && (this._removeClass(this.active.children(".ui-menu-item-wrapper"), null, "ui-state-active"), this._trigger("blur", e, {
                    item: this.active
                }), this.active = null)
            },
            _startOpening: function (e) {
                clearTimeout(this.timer), "true" === e.attr("aria-hidden") && (this.timer = this._delay((function () {
                    this._close(), this._open(e)
                }), this.delay))
            },
            _open: function (t) {
                var i = e.extend({
                    of: this.active
                }, this.options.position);
                clearTimeout(this.timer), this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden", "true"), t.show().removeAttr("aria-hidden").attr("aria-expanded", "true").position(i)
            },
            collapseAll: function (t, i) {
                clearTimeout(this.timer), this.timer = this._delay((function () {
                    var n = i ? this.element : e(t && t.target).closest(this.element.find(".ui-menu"));
                    n.length || (n = this.element), this._close(n), this.blur(t), this._removeClass(n.find(".ui-state-active"), null, "ui-state-active"), this.activeMenu = n
                }), this.delay)
            },
            _close: function (e) {
                e || (e = this.active ? this.active.parent() : this.element), e.find(".ui-menu").hide().attr("aria-hidden", "true").attr("aria-expanded", "false")
            },
            _closeOnDocumentClick: function (t) {
                return !e(t.target).closest(".ui-menu").length
            },
            _isDivider: function (e) {
                return !/[^\-\u2014\u2013\s]/.test(e.text())
            },
            collapse: function (e) {
                var t = this.active && this.active.parent().closest(".ui-menu-item", this.element);
                t && t.length && (this._close(), this.focus(e, t))
            },
            expand: function (e) {
                var t = this.active && this.active.children(".ui-menu ").find(this.options.items).first();
                t && t.length && (this._open(t.parent()), this._delay((function () {
                    this.focus(e, t)
                })))
            },
            next: function (e) {
                this._move("next", "first", e)
            },
            previous: function (e) {
                this._move("prev", "last", e)
            },
            isFirstItem: function () {
                return this.active && !this.active.prevAll(".ui-menu-item").length
            },
            isLastItem: function () {
                return this.active && !this.active.nextAll(".ui-menu-item").length
            },
            _move: function (e, t, i) {
                var n;
                this.active && (n = "first" === e || "last" === e ? this.active["first" === e ? "prevAll" : "nextAll"](".ui-menu-item").eq(-1) : this.active[e + "All"](".ui-menu-item").eq(0)), n && n.length && this.active || (n = this.activeMenu.find(this.options.items)[t]()), this.focus(i, n)
            },
            nextPage: function (t) {
                var i, n, a;
                this.active ? this.isLastItem() || (this._hasScroll() ? (n = this.active.offset().top, a = this.element.height(), this.active.nextAll(".ui-menu-item").each((function () {
                    return (i = e(this)).offset().top - n - a < 0
                })), this.focus(t, i)) : this.focus(t, this.activeMenu.find(this.options.items)[this.active ? "last" : "first"]())) : this.next(t)
            },
            previousPage: function (t) {
                var i, n, a;
                this.active ? this.isFirstItem() || (this._hasScroll() ? (n = this.active.offset().top, a = this.element.height(), this.active.prevAll(".ui-menu-item").each((function () {
                    return (i = e(this)).offset().top - n + a > 0
                })), this.focus(t, i)) : this.focus(t, this.activeMenu.find(this.options.items).first())) : this.next(t)
            },
            _hasScroll: function () {
                return this.element.outerHeight() < this.element.prop("scrollHeight")
            },
            select: function (t) {
                this.active = this.active || e(t.target).closest(".ui-menu-item");
                var i = {
                    item: this.active
                };
                this.active.has(".ui-menu").length || this.collapseAll(t, !0), this._trigger("select", t, i)
            },
            _filterMenuItems: function (t) {
                var i = t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&"),
                    n = new RegExp("^" + i, "i");
                return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter((function () {
                    return n.test(e.trim(e(this).children(".ui-menu-item-wrapper").text()))
                }))
            }
        });
        /*!
         * jQuery UI Autocomplete 1.12.1
         * http://jqueryui.com
         *
         * Copyright jQuery Foundation and other contributors
         * Released under the MIT license.
         * http://jquery.org/license
         */
        e.widget("ui.autocomplete", {
            version: "1.12.1",
            defaultElement: "<input>",
            options: {
                appendTo: null,
                autoFocus: !1,
                delay: 300,
                minLength: 1,
                position: {
                    my: "left top",
                    at: "left bottom",
                    collision: "none"
                },
                source: null,
                change: null,
                close: null,
                focus: null,
                open: null,
                response: null,
                search: null,
                select: null
            },
            requestIndex: 0,
            pending: 0,
            _create: function () {
                var t, i, n, a = this.element[0].nodeName.toLowerCase(),
                    s = "textarea" === a,
                    o = "input" === a;
                this.isMultiLine = s || !o && this._isContentEditable(this.element), this.valueMethod = this.element[s || o ? "val" : "text"], this.isNewMenu = !0, this._addClass("ui-autocomplete-input"), this.element.attr("autocomplete", "off"), this._on(this.element, {
                    keydown: function (a) {
                        if (this.element.prop("readOnly")) return t = !0, n = !0, void (i = !0);
                        t = !1, n = !1, i = !1;
                        var s = e.ui.keyCode;
                        switch (a.keyCode) {
                            case s.PAGE_UP:
                                t = !0, this._move("previousPage", a);
                                break;
                            case s.PAGE_DOWN:
                                t = !0, this._move("nextPage", a);
                                break;
                            case s.UP:
                                t = !0, this._keyEvent("previous", a);
                                break;
                            case s.DOWN:
                                t = !0, this._keyEvent("next", a);
                                break;
                            case s.ENTER:
                                this.menu.active && (t = !0, a.preventDefault(), this.menu.select(a));
                                break;
                            case s.TAB:
                                this.menu.active && this.menu.select(a);
                                break;
                            case s.ESCAPE:
                                this.menu.element.is(":visible") && (this.isMultiLine || this._value(this.term), this.close(a), a.preventDefault());
                                break;
                            default:
                                i = !0, this._searchTimeout(a)
                        }
                    },
                    keypress: function (n) {
                        if (t) return t = !1, void (this.isMultiLine && !this.menu.element.is(":visible") || n.preventDefault());
                        if (!i) {
                            var a = e.ui.keyCode;
                            switch (n.keyCode) {
                                case a.PAGE_UP:
                                    this._move("previousPage", n);
                                    break;
                                case a.PAGE_DOWN:
                                    this._move("nextPage", n);
                                    break;
                                case a.UP:
                                    this._keyEvent("previous", n);
                                    break;
                                case a.DOWN:
                                    this._keyEvent("next", n)
                            }
                        }
                    },
                    input: function (e) {
                        if (n) return n = !1, void e.preventDefault();
                        this._searchTimeout(e)
                    },
                    focus: function () {
                        this.selectedItem = null, this.previous = this._value()
                    },
                    blur: function (e) {
                        this.cancelBlur ? delete this.cancelBlur : (clearTimeout(this.searching), this.close(e), this._change(e))
                    }
                }), this._initSource(), this.menu = e("<ul>").appendTo(this._appendTo()).menu({
                    role: null
                }).hide().menu("instance"), this._addClass(this.menu.element, "ui-autocomplete", "ui-front"), this._on(this.menu.element, {
                    mousedown: function (t) {
                        t.preventDefault(), this.cancelBlur = !0, this._delay((function () {
                            delete this.cancelBlur, this.element[0] !== e.ui.safeActiveElement(this.document[0]) && this.element.trigger("focus")
                        }))
                    },
                    menufocus: function (t, i) {
                        var n, a;
                        if (this.isNewMenu && (this.isNewMenu = !1, t.originalEvent && /^mouse/.test(t.originalEvent.type))) return this.menu.blur(), void this.document.one("mousemove", (function () {
                            e(t.target).trigger(t.originalEvent)
                        }));
                        a = i.item.data("ui-autocomplete-item"), !1 !== this._trigger("focus", t, {
                            item: a
                        }) && t.originalEvent && /^key/.test(t.originalEvent.type) && this._value(a.value), (n = i.item.attr("aria-label") || a.value) && e.trim(n).length && (this.liveRegion.children().hide(), e("<div>").text(n).appendTo(this.liveRegion))
                    },
                    menuselect: function (t, i) {
                        var n = i.item.data("ui-autocomplete-item"),
                            a = this.previous;
                        this.element[0] !== e.ui.safeActiveElement(this.document[0]) && (this.element.trigger("focus"), this.previous = a, this._delay((function () {
                            this.previous = a, this.selectedItem = n
                        }))), !1 !== this._trigger("select", t, {
                            item: n
                        }) && this._value(n.value), this.term = this._value(), this.close(t), this.selectedItem = n
                    }
                }), this.liveRegion = e("<div>", {
                    role: "status",
                    "aria-live": "assertive",
                    "aria-relevant": "additions"
                }).appendTo(this.document[0].body), this._addClass(this.liveRegion, null, "ui-helper-hidden-accessible"), this._on(this.window, {
                    beforeunload: function () {
                        this.element.removeAttr("autocomplete")
                    }
                })
            },
            _destroy: function () {
                clearTimeout(this.searching), this.element.removeAttr("autocomplete"), this.menu.element.remove(), this.liveRegion.remove()
            },
            _setOption: function (e, t) {
                this._super(e, t), "source" === e && this._initSource(), "appendTo" === e && this.menu.element.appendTo(this._appendTo()), "disabled" === e && t && this.xhr && this.xhr.abort()
            },
            _isEventTargetInWidget: function (t) {
                var i = this.menu.element[0];
                return t.target === this.element[0] || t.target === i || e.contains(i, t.target)
            },
            _closeOnClickOutside: function (e) {
                this._isEventTargetInWidget(e) || this.close()
            },
            _appendTo: function () {
                var t = this.options.appendTo;
                return t && (t = t.jquery || t.nodeType ? e(t) : this.document.find(t).eq(0)), t && t[0] || (t = this.element.closest(".ui-front, dialog")), t.length || (t = this.document[0].body), t
            },
            _initSource: function () {
                var t, i, n = this;
                e.isArray(this.options.source) ? (t = this.options.source, this.source = function (i, n) {
                    n(e.ui.autocomplete.filter(t, i.term))
                }) : "string" == typeof this.options.source ? (i = this.options.source, this.source = function (t, a) {
                    n.xhr && n.xhr.abort(), n.xhr = e.ajax({
                        url: i,
                        data: t,
                        dataType: "json",
                        success: function (e) {
                            a(e)
                        },
                        error: function () {
                            a([])
                        }
                    })
                }) : this.source = this.options.source
            },
            _searchTimeout: function (e) {
                clearTimeout(this.searching), this.searching = this._delay((function () {
                    var t = this.term === this._value(),
                        i = this.menu.element.is(":visible"),
                        n = e.altKey || e.ctrlKey || e.metaKey || e.shiftKey;
                    t && (!t || i || n) || (this.selectedItem = null, this.search(null, e))
                }), this.options.delay)
            },
            search: function (e, t) {
                return e = null != e ? e : this._value(), this.term = this._value(), e.length < this.options.minLength ? this.close(t) : !1 !== this._trigger("search", t) ? this._search(e) : void 0
            },
            _search: function (e) {
                this.pending++, this._addClass("ui-autocomplete-loading"), this.cancelSearch = !1, this.source({
                    term: e
                }, this._response())
            },
            _response: function () {
                var t = ++this.requestIndex;
                return e.proxy((function (e) {
                    t === this.requestIndex && this.__response(e), this.pending--, this.pending || this._removeClass("ui-autocomplete-loading")
                }), this)
            },
            __response: function (e) {
                e && (e = this._normalize(e)), this._trigger("response", null, {
                    content: e
                }), !this.options.disabled && e && e.length && !this.cancelSearch ? (this._suggest(e), this._trigger("open")) : this._close()
            },
            close: function (e) {
                this.cancelSearch = !0, this._close(e)
            },
            _close: function (e) {
                this._off(this.document, "mousedown"), this.menu.element.is(":visible") && (this.menu.element.hide(), this.menu.blur(), this.isNewMenu = !0, this._trigger("close", e))
            },
            _change: function (e) {
                this.previous !== this._value() && this._trigger("change", e, {
                    item: this.selectedItem
                })
            },
            _normalize: function (t) {
                return t.length && t[0].label && t[0].value ? t : e.map(t, (function (t) {
                    return "string" == typeof t ? {
                        label: t,
                        value: t
                    } : e.extend({}, t, {
                        label: t.label || t.value,
                        value: t.value || t.label
                    })
                }))
            },
            _suggest: function (t) {
                var i = this.menu.element.empty();
                this._renderMenu(i, t), this.isNewMenu = !0, this.menu.refresh(), i.show(), this._resizeMenu(), i.position(e.extend({
                    of: this.element
                }, this.options.position)), this.options.autoFocus && this.menu.next(), this._on(this.document, {
                    mousedown: "_closeOnClickOutside"
                })
            },
            _resizeMenu: function () {
                var e = this.menu.element;
                e.outerWidth(Math.max(e.width("").outerWidth() + 1, this.element.outerWidth()))
            },
            _renderMenu: function (t, i) {
                var n = this;
                e.each(i, (function (e, i) {
                    n._renderItemData(t, i)
                }))
            },
            _renderItemData: function (e, t) {
                return this._renderItem(e, t).data("ui-autocomplete-item", t)
            },
            _renderItem: function (t, i) {
                return e("<li>").append(e("<div>").text(i.label)).appendTo(t)
            },
            _move: function (e, t) {
                if (this.menu.element.is(":visible")) return this.menu.isFirstItem() && /^previous/.test(e) || this.menu.isLastItem() && /^next/.test(e) ? (this.isMultiLine || this._value(this.term), void this.menu.blur()) : void this.menu[e](t);
                this.search(null, t)
            },
            widget: function () {
                return this.menu.element
            },
            _value: function () {
                return this.valueMethod.apply(this.element, arguments)
            },
            _keyEvent: function (e, t) {
                this.isMultiLine && !this.menu.element.is(":visible") || (this._move(e, t), t.preventDefault())
            },
            _isContentEditable: function (e) {
                if (!e.length) return !1;
                var t = e.prop("contentEditable");
                return "inherit" === t ? this._isContentEditable(e.parent()) : "true" === t
            }
        }), e.extend(e.ui.autocomplete, {
            escapeRegex: function (e) {
                return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&")
            },
            filter: function (t, i) {
                var n = new RegExp(e.ui.autocomplete.escapeRegex(i), "i");
                return e.grep(t, (function (e) {
                    return n.test(e.label || e.value || e)
                }))
            }
        }), e.widget("ui.autocomplete", e.ui.autocomplete, {
            options: {
                messages: {
                    noResults: "No search results.",
                    results: function (e) {
                        return e + (e > 1 ? " results are" : " result is") + " available, use up and down arrow keys to navigate."
                    }
                }
            },
            __response: function (t) {
                var i;
                this._superApply(arguments), this.options.disabled || this.cancelSearch || (i = t && t.length ? this.options.messages.results(t.length) : this.options.messages.noResults, this.liveRegion.children().hide(), e("<div>").text(i).appendTo(this.liveRegion))
            }
        });
        e.ui.autocomplete;
        /*!
         * jQuery UI Controlgroup 1.12.1
         * http://jqueryui.com
         *
         * Copyright jQuery Foundation and other contributors
         * Released under the MIT license.
         * http://jquery.org/license
         */
        var u = /ui-corner-([a-z]){2,6}/g;
        e.widget("ui.controlgroup", {
            version: "1.12.1",
            defaultElement: "<div>",
            options: {
                direction: "horizontal",
                disabled: null,
                onlyVisible: !0,
                items: {
                    button: "input[type=button], input[type=submit], input[type=reset], button, a",
                    controlgroupLabel: ".ui-controlgroup-label",
                    checkboxradio: "input[type='checkbox'], input[type='radio']",
                    selectmenu: "select",
                    spinner: ".ui-spinner-input"
                }
            },
            _create: function () {
                this._enhance()
            },
            _enhance: function () {
                this.element.attr("role", "toolbar"), this.refresh()
            },
            _destroy: function () {
                this._callChildMethod("destroy"), this.childWidgets.removeData("ui-controlgroup-data"), this.element.removeAttr("role"), this.options.items.controlgroupLabel && this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()
            },
            _initWidgets: function () {
                var t = this,
                    i = [];
                e.each(this.options.items, (function (n, a) {
                    var s, o = {};
                    if (a) return "controlgroupLabel" === n ? ((s = t.element.find(a)).each((function () {
                        var t = e(this);
                        t.children(".ui-controlgroup-label-contents").length || t.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")
                    })), t._addClass(s, null, "ui-widget ui-widget-content ui-state-default"), void (i = i.concat(s.get()))) : void (e.fn[n] && (o = t["_" + n + "Options"] ? t["_" + n + "Options"]("middle") : {
                        classes: {}
                    }, t.element.find(a).each((function () {
                        var a = e(this),
                            s = a[n]("instance"),
                            r = e.widget.extend({}, o);
                        if ("button" !== n || !a.parent(".ui-spinner").length) {
                            s || (s = a[n]()[n]("instance")), s && (r.classes = t._resolveClassesValues(r.classes, s)), a[n](r);
                            var l = a[n]("widget");
                            e.data(l[0], "ui-controlgroup-data", s || a[n]("instance")), i.push(l[0])
                        }
                    }))))
                })), this.childWidgets = e(e.unique(i)), this._addClass(this.childWidgets, "ui-controlgroup-item")
            },
            _callChildMethod: function (t) {
                this.childWidgets.each((function () {
                    var i = e(this).data("ui-controlgroup-data");
                    i && i[t] && i[t]()
                }))
            },
            _updateCornerClass: function (e, t) {
                var i = this._buildSimpleOptions(t, "label").classes.label;
                this._removeClass(e, null, "ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all"), this._addClass(e, null, i)
            },
            _buildSimpleOptions: function (e, t) {
                var i = "vertical" === this.options.direction,
                    n = {
                        classes: {}
                    };
                return n.classes[t] = {
                    middle: "",
                    first: "ui-corner-" + (i ? "top" : "left"),
                    last: "ui-corner-" + (i ? "bottom" : "right"),
                    only: "ui-corner-all"
                }[e], n
            },
            _spinnerOptions: function (e) {
                var t = this._buildSimpleOptions(e, "ui-spinner");
                return t.classes["ui-spinner-up"] = "", t.classes["ui-spinner-down"] = "", t
            },
            _buttonOptions: function (e) {
                return this._buildSimpleOptions(e, "ui-button")
            },
            _checkboxradioOptions: function (e) {
                return this._buildSimpleOptions(e, "ui-checkboxradio-label")
            },
            _selectmenuOptions: function (e) {
                var t = "vertical" === this.options.direction;
                return {
                    width: !!t && "auto",
                    classes: {
                        middle: {
                            "ui-selectmenu-button-open": "",
                            "ui-selectmenu-button-closed": ""
                        },
                        first: {
                            "ui-selectmenu-button-open": "ui-corner-" + (t ? "top" : "tl"),
                            "ui-selectmenu-button-closed": "ui-corner-" + (t ? "top" : "left")
                        },
                        last: {
                            "ui-selectmenu-button-open": t ? "" : "ui-corner-tr",
                            "ui-selectmenu-button-closed": "ui-corner-" + (t ? "bottom" : "right")
                        },
                        only: {
                            "ui-selectmenu-button-open": "ui-corner-top",
                            "ui-selectmenu-button-closed": "ui-corner-all"
                        }
                    }[e]
                }
            },
            _resolveClassesValues: function (t, i) {
                var n = {};
                return e.each(t, (function (a) {
                    var s = i.options.classes[a] || "";
                    s = e.trim(s.replace(u, "")), n[a] = (s + " " + t[a]).replace(/\s+/g, " ")
                })), n
            },
            _setOption: function (e, t) {
                "direction" === e && this._removeClass("ui-controlgroup-" + this.options.direction), this._super(e, t), "disabled" !== e ? this.refresh() : this._callChildMethod(t ? "disable" : "enable")
            },
            refresh: function () {
                var t, i = this;
                this._addClass("ui-controlgroup ui-controlgroup-" + this.options.direction), "horizontal" === this.options.direction && this._addClass(null, "ui-helper-clearfix"), this._initWidgets(), t = this.childWidgets, this.options.onlyVisible && (t = t.filter(":visible")), t.length && (e.each(["first", "last"], (function (e, n) {
                    var a = t[n]().data("ui-controlgroup-data");
                    if (a && i["_" + a.widgetName + "Options"]) {
                        var s = i["_" + a.widgetName + "Options"](1 === t.length ? "only" : n);
                        s.classes = i._resolveClassesValues(s.classes, a), a.element[a.widgetName](s)
                    } else i._updateCornerClass(t[n](), n)
                })), this._callChildMethod("refresh"))
            }
        });
        /*!
         * jQuery UI Checkboxradio 1.12.1
         * http://jqueryui.com
         *
         * Copyright jQuery Foundation and other contributors
         * Released under the MIT license.
         * http://jquery.org/license
         */
        e.widget("ui.checkboxradio", [e.ui.formResetMixin, {
            version: "1.12.1",
            options: {
                disabled: null,
                label: null,
                icon: !0,
                classes: {
                    "ui-checkboxradio-label": "ui-corner-all",
                    "ui-checkboxradio-icon": "ui-corner-all"
                }
            },
            _getCreateOptions: function () {
                var t, i, n = this,
                    a = this._super() || {};
                return this._readType(), i = this.element.labels(), this.label = e(i[i.length - 1]), this.label.length || e.error("No label found for checkboxradio widget"), this.originalLabel = "", this.label.contents().not(this.element[0]).each((function () {
                    n.originalLabel += 3 === this.nodeType ? e(this).text() : this.outerHTML
                })), this.originalLabel && (a.label = this.originalLabel), null != (t = this.element[0].disabled) && (a.disabled = t), a
            },
            _create: function () {
                var e = this.element[0].checked;
                this._bindFormResetHandler(), null == this.options.disabled && (this.options.disabled = this.element[0].disabled), this._setOption("disabled", this.options.disabled), this._addClass("ui-checkboxradio", "ui-helper-hidden-accessible"), this._addClass(this.label, "ui-checkboxradio-label", "ui-button ui-widget"), "radio" === this.type && this._addClass(this.label, "ui-checkboxradio-radio-label"), this.options.label && this.options.label !== this.originalLabel ? this._updateLabel() : this.originalLabel && (this.options.label = this.originalLabel), this._enhance(), e && (this._addClass(this.label, "ui-checkboxradio-checked", "ui-state-active"), this.icon && this._addClass(this.icon, null, "ui-state-hover")), this._on({
                    change: "_toggleClasses",
                    focus: function () {
                        this._addClass(this.label, null, "ui-state-focus ui-visual-focus")
                    },
                    blur: function () {
                        this._removeClass(this.label, null, "ui-state-focus ui-visual-focus")
                    }
                })
            },
            _readType: function () {
                var t = this.element[0].nodeName.toLowerCase();
                this.type = this.element[0].type, "input" === t && /radio|checkbox/.test(this.type) || e.error("Can't create checkboxradio on element.nodeName=" + t + " and element.type=" + this.type)
            },
            _enhance: function () {
                this._updateIcon(this.element[0].checked)
            },
            widget: function () {
                return this.label
            },
            _getRadioGroup: function () {
                var t = this.element[0].name,
                    i = "input[name='" + e.ui.escapeSelector(t) + "']";
                return t ? (this.form.length ? e(this.form[0].elements).filter(i) : e(i).filter((function () {
                    return 0 === e(this).form().length
                }))).not(this.element) : e([])
            },
            _toggleClasses: function () {
                var t = this.element[0].checked;
                this._toggleClass(this.label, "ui-checkboxradio-checked", "ui-state-active", t), this.options.icon && "checkbox" === this.type && this._toggleClass(this.icon, null, "ui-icon-check ui-state-checked", t)._toggleClass(this.icon, null, "ui-icon-blank", !t), "radio" === this.type && this._getRadioGroup().each((function () {
                    var t = e(this).checkboxradio("instance");
                    t && t._removeClass(t.label, "ui-checkboxradio-checked", "ui-state-active")
                }))
            },
            _destroy: function () {
                this._unbindFormResetHandler(), this.icon && (this.icon.remove(), this.iconSpace.remove())
            },
            _setOption: function (e, t) {
                if ("label" !== e || t) {
                    if (this._super(e, t), "disabled" === e) return this._toggleClass(this.label, null, "ui-state-disabled", t), void (this.element[0].disabled = t);
                    this.refresh()
                }
            },
            _updateIcon: function (t) {
                var i = "ui-icon ui-icon-background ";
                this.options.icon ? (this.icon || (this.icon = e("<span>"), this.iconSpace = e("<span> </span>"), this._addClass(this.iconSpace, "ui-checkboxradio-icon-space")), "checkbox" === this.type ? (i += t ? "ui-icon-check ui-state-checked" : "ui-icon-blank", this._removeClass(this.icon, null, t ? "ui-icon-blank" : "ui-icon-check")) : i += "ui-icon-blank", this._addClass(this.icon, "ui-checkboxradio-icon", i), t || this._removeClass(this.icon, null, "ui-icon-check ui-state-checked"), this.icon.prependTo(this.label).after(this.iconSpace)) : void 0 !== this.icon && (this.icon.remove(), this.iconSpace.remove(), delete this.icon)
            },
            _updateLabel: function () {
                var e = this.label.contents().not(this.element[0]);
                this.icon && (e = e.not(this.icon[0])), this.iconSpace && (e = e.not(this.iconSpace[0])), e.remove(), this.label.append(this.options.label)
            },
            refresh: function () {
                var e = this.element[0].checked,
                    t = this.element[0].disabled;
                this._updateIcon(e), this._toggleClass(this.label, "ui-checkboxradio-checked", "ui-state-active", e), null !== this.options.label && this._updateLabel(), t !== this.options.disabled && this._setOptions({
                    disabled: t
                })
            }
        }]);
        e.ui.checkboxradio;
        /*!
         * jQuery UI Button 1.12.1
         * http://jqueryui.com
         *
         * Copyright jQuery Foundation and other contributors
         * Released under the MIT license.
         * http://jquery.org/license
         */
        e.widget("ui.button", {
            version: "1.12.1",
            defaultElement: "<button>",
            options: {
                classes: {
                    "ui-button": "ui-corner-all"
                },
                disabled: null,
                icon: null,
                iconPosition: "beginning",
                label: null,
                showLabel: !0
            },
            _getCreateOptions: function () {
                var e, t = this._super() || {};
                return this.isInput = this.element.is("input"), null != (e = this.element[0].disabled) && (t.disabled = e), this.originalLabel = this.isInput ? this.element.val() : this.element.html(), this.originalLabel && (t.label = this.originalLabel), t
            },
            _create: function () {
                !this.option.showLabel & !this.options.icon && (this.options.showLabel = !0), null == this.options.disabled && (this.options.disabled = this.element[0].disabled || !1), this.hasTitle = !!this.element.attr("title"), this.options.label && this.options.label !== this.originalLabel && (this.isInput ? this.element.val(this.options.label) : this.element.html(this.options.label)), this._addClass("ui-button", "ui-widget"), this._setOption("disabled", this.options.disabled), this._enhance(), this.element.is("a") && this._on({
                    keyup: function (t) {
                        t.keyCode === e.ui.keyCode.SPACE && (t.preventDefault(), this.element[0].click ? this.element[0].click() : this.element.trigger("click"))
                    }
                })
            },
            _enhance: function () {
                this.element.is("button") || this.element.attr("role", "button"), this.options.icon && (this._updateIcon("icon", this.options.icon), this._updateTooltip())
            },
            _updateTooltip: function () {
                this.title = this.element.attr("title"), this.options.showLabel || this.title || this.element.attr("title", this.options.label)
            },
            _updateIcon: function (t, i) {
                var n = "iconPosition" !== t,
                    a = n ? this.options.iconPosition : i,
                    s = "top" === a || "bottom" === a;
                this.icon ? n && this._removeClass(this.icon, null, this.options.icon) : (this.icon = e("<span>"), this._addClass(this.icon, "ui-button-icon", "ui-icon"), this.options.showLabel || this._addClass("ui-button-icon-only")), n && this._addClass(this.icon, null, i), this._attachIcon(a), s ? (this._addClass(this.icon, null, "ui-widget-icon-block"), this.iconSpace && this.iconSpace.remove()) : (this.iconSpace || (this.iconSpace = e("<span> </span>"), this._addClass(this.iconSpace, "ui-button-icon-space")), this._removeClass(this.icon, null, "ui-wiget-icon-block"), this._attachIconSpace(a))
            },
            _destroy: function () {
                this.element.removeAttr("role"), this.icon && this.icon.remove(), this.iconSpace && this.iconSpace.remove(), this.hasTitle || this.element.removeAttr("title")
            },
            _attachIconSpace: function (e) {
                this.icon[/^(?:end|bottom)/.test(e) ? "before" : "after"](this.iconSpace)
            },
            _attachIcon: function (e) {
                this.element[/^(?:end|bottom)/.test(e) ? "append" : "prepend"](this.icon)
            },
            _setOptions: function (e) {
                var t = void 0 === e.showLabel ? this.options.showLabel : e.showLabel,
                    i = void 0 === e.icon ? this.options.icon : e.icon;
                t || i || (e.showLabel = !0), this._super(e)
            },
            _setOption: function (e, t) {
                "icon" === e && (t ? this._updateIcon(e, t) : this.icon && (this.icon.remove(), this.iconSpace && this.iconSpace.remove())), "iconPosition" === e && this._updateIcon(e, t), "showLabel" === e && (this._toggleClass("ui-button-icon-only", null, !t), this._updateTooltip()), "label" === e && (this.isInput ? this.element.val(t) : (this.element.html(t), this.icon && (this._attachIcon(this.options.iconPosition), this._attachIconSpace(this.options.iconPosition)))), this._super(e, t), "disabled" === e && (this._toggleClass(null, "ui-state-disabled", t), this.element[0].disabled = t, t && this.element.blur())
            },
            refresh: function () {
                var e = this.element.is("input, button") ? this.element[0].disabled : this.element.hasClass("ui-button-disabled");
                e !== this.options.disabled && this._setOptions({
                    disabled: e
                }), this._updateTooltip()
            }
        }), !1 !== e.uiBackCompat && (e.widget("ui.button", e.ui.button, {
            options: {
                text: !0,
                icons: {
                    primary: null,
                    secondary: null
                }
            },
            _create: function () {
                this.options.showLabel && !this.options.text && (this.options.showLabel = this.options.text), !this.options.showLabel && this.options.text && (this.options.text = this.options.showLabel), this.options.icon || !this.options.icons.primary && !this.options.icons.secondary ? this.options.icon && (this.options.icons.primary = this.options.icon) : this.options.icons.primary ? this.options.icon = this.options.icons.primary : (this.options.icon = this.options.icons.secondary, this.options.iconPosition = "end"), this._super()
            },
            _setOption: function (e, t) {
                "text" !== e ? ("showLabel" === e && (this.options.text = t), "icon" === e && (this.options.icons.primary = t), "icons" === e && (t.primary ? (this._super("icon", t.primary), this._super("iconPosition", "beginning")) : t.secondary && (this._super("icon", t.secondary), this._super("iconPosition", "end"))), this._superApply(arguments)) : this._super("showLabel", t)
            }
        }), e.fn.button = function (t) {
            return function () {
                return !this.length || this.length && "INPUT" !== this[0].tagName || this.length && "INPUT" === this[0].tagName && "checkbox" !== this.attr("type") && "radio" !== this.attr("type") ? t.apply(this, arguments) : (e.ui.checkboxradio || e.error("Checkboxradio widget missing"), 0 === arguments.length ? this.checkboxradio({
                    icon: !1
                }) : this.checkboxradio.apply(this, arguments))
            }
        }(e.fn.button), e.fn.buttonset = function () {
            return e.ui.controlgroup || e.error("Controlgroup widget missing"), "option" === arguments[0] && "items" === arguments[1] && arguments[2] ? this.controlgroup.apply(this, [arguments[0], "items.button", arguments[2]]) : "option" === arguments[0] && "items" === arguments[1] ? this.controlgroup.apply(this, [arguments[0], "items.button"]) : ("object" == typeof arguments[0] && arguments[0].items && (arguments[0].items = {
                button: arguments[0].items
            }), this.controlgroup.apply(this, arguments))
        });
        var h;
        /*!
         * jQuery UI Datepicker 1.12.1
         * http://jqueryui.com
         *
         * Copyright jQuery Foundation and other contributors
         * Released under the MIT license.
         * http://jquery.org/license
         */
        e.ui.button;

        function f() {
            this._curInst = null, this._keyEvent = !1, this._disabledInputs = [], this._datepickerShowing = !1, this._inDialog = !1, this._mainDivId = "ui-datepicker-div", this._inlineClass = "ui-datepicker-inline", this._appendClass = "ui-datepicker-append", this._triggerClass = "ui-datepicker-trigger", this._dialogClass = "ui-datepicker-dialog", this._disableClass = "ui-datepicker-disabled", this._unselectableClass = "ui-datepicker-unselectable", this._currentClass = "ui-datepicker-current-day", this._dayOverClass = "ui-datepicker-days-cell-over", this.regional = [], this.regional[""] = {
                closeText: "Done",
                prevText: "Prev",
                nextText: "Next",
                currentText: "Today",
                monthNames: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
                monthNamesShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
                dayNames: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
                dayNamesShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
                dayNamesMin: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
                weekHeader: "Wk",
                dateFormat: "mm/dd/yy",
                firstDay: 0,
                isRTL: !1,
                showMonthAfterYear: !1,
                yearSuffix: ""
            }, this._defaults = {
                showOn: "focus",
                showAnim: "fadeIn",
                showOptions: {},
                defaultDate: null,
                appendText: "",
                buttonText: "...",
                buttonImage: "",
                buttonImageOnly: !1,
                hideIfNoPrevNext: !1,
                navigationAsDateFormat: !1,
                gotoCurrent: !1,
                changeMonth: !1,
                changeYear: !1,
                yearRange: "c-10:c+10",
                showOtherMonths: !1,
                selectOtherMonths: !1,
                showWeek: !1,
                calculateWeek: this.iso8601Week,
                shortYearCutoff: "+10",
                minDate: null,
                maxDate: null,
                duration: "fast",
                beforeShowDay: null,
                beforeShow: null,
                onSelect: null,
                onChangeMonthYear: null,
                onClose: null,
                numberOfMonths: 1,
                showCurrentAtPos: 0,
                stepMonths: 1,
                stepBigMonths: 12,
                altField: "",
                altFormat: "",
                constrainInput: !0,
                showButtonPanel: !1,
                autoSize: !1,
                disabled: !1
            }, e.extend(this._defaults, this.regional[""]), this.regional.en = e.extend(!0, {}, this.regional[""]), this.regional["en-US"] = e.extend(!0, {}, this.regional.en), this.dpDiv = m(e("<div id='" + this._mainDivId + "' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))
        }

        function m(t) {
            var i = "button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";
            return t.on("mouseout", i, (function () {
                e(this).removeClass("ui-state-hover"), -1 !== this.className.indexOf("ui-datepicker-prev") && e(this).removeClass("ui-datepicker-prev-hover"), -1 !== this.className.indexOf("ui-datepicker-next") && e(this).removeClass("ui-datepicker-next-hover")
            })).on("mouseover", i, g)
        }

        function g() {
            e.datepicker._isDisabledDatepicker(h.inline ? h.dpDiv.parent()[0] : h.input[0]) || (e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"), e(this).addClass("ui-state-hover"), -1 !== this.className.indexOf("ui-datepicker-prev") && e(this).addClass("ui-datepicker-prev-hover"), -1 !== this.className.indexOf("ui-datepicker-next") && e(this).addClass("ui-datepicker-next-hover"))
        }

        function v(t, i) {
            for (var n in e.extend(t, i), i) null == i[n] && (t[n] = i[n]);
            return t
        }
        e.extend(e.ui, {
            datepicker: {
                version: "1.12.1"
            }
        }), e.extend(f.prototype, {
            markerClassName: "hasDatepicker",
            maxRows: 4,
            _widgetDatepicker: function () {
                return this.dpDiv
            },
            setDefaults: function (e) {
                return v(this._defaults, e || {}), this
            },
            _attachDatepicker: function (t, i) {
                var n, a, s;
                a = "div" === (n = t.nodeName.toLowerCase()) || "span" === n, t.id || (this.uuid += 1, t.id = "dp" + this.uuid), (s = this._newInst(e(t), a)).settings = e.extend({}, i || {}), "input" === n ? this._connectDatepicker(t, s) : a && this._inlineDatepicker(t, s)
            },
            _newInst: function (t, i) {
                return {
                    id: t[0].id.replace(/([^A-Za-z0-9_\-])/g, "\\\\$1"),
                    input: t,
                    selectedDay: 0,
                    selectedMonth: 0,
                    selectedYear: 0,
                    drawMonth: 0,
                    drawYear: 0,
                    inline: i,
                    dpDiv: i ? m(e("<div class='" + this._inlineClass + " ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")) : this.dpDiv
                }
            },
            _connectDatepicker: function (t, i) {
                var n = e(t);
                i.append = e([]), i.trigger = e([]), n.hasClass(this.markerClassName) || (this._attachments(n, i), n.addClass(this.markerClassName).on("keydown", this._doKeyDown).on("keypress", this._doKeyPress).on("keyup", this._doKeyUp), this._autoSize(i), e.data(t, "datepicker", i), i.settings.disabled && this._disableDatepicker(t))
            },
            _attachments: function (t, i) {
                var n, a, s, o = this._get(i, "appendText"),
                    r = this._get(i, "isRTL");
                i.append && i.append.remove(), o && (i.append = e("<span class='" + this._appendClass + "'>" + o + "</span>"), t[r ? "before" : "after"](i.append)), t.off("focus", this._showDatepicker), i.trigger && i.trigger.remove(), "focus" !== (n = this._get(i, "showOn")) && "both" !== n || t.on("focus", this._showDatepicker), "button" !== n && "both" !== n || (a = this._get(i, "buttonText"), s = this._get(i, "buttonImage"), i.trigger = e(this._get(i, "buttonImageOnly") ? e("<img/>").addClass(this._triggerClass).attr({
                    src: s,
                    alt: a,
                    title: a
                }) : e("<button type='button'></button>").addClass(this._triggerClass).html(s ? e("<img/>").attr({
                    src: s,
                    alt: a,
                    title: a
                }) : a)), t[r ? "before" : "after"](i.trigger), i.trigger.on("click", (function () {
                    return e.datepicker._datepickerShowing && e.datepicker._lastInput === t[0] ? e.datepicker._hideDatepicker() : e.datepicker._datepickerShowing && e.datepicker._lastInput !== t[0] ? (e.datepicker._hideDatepicker(), e.datepicker._showDatepicker(t[0])) : e.datepicker._showDatepicker(t[0]), !1
                })))
            },
            _autoSize: function (e) {
                if (this._get(e, "autoSize") && !e.inline) {
                    var t, i, n, a, s = new Date(2009, 11, 20),
                        o = this._get(e, "dateFormat");
                    o.match(/[DM]/) && (t = function (e) {
                        for (i = 0, n = 0, a = 0; a < e.length; a++) e[a].length > i && (i = e[a].length, n = a);
                        return n
                    }, s.setMonth(t(this._get(e, o.match(/MM/) ? "monthNames" : "monthNamesShort"))), s.setDate(t(this._get(e, o.match(/DD/) ? "dayNames" : "dayNamesShort")) + 20 - s.getDay())), e.input.attr("size", this._formatDate(e, s).length)
                }
            },
            _inlineDatepicker: function (t, i) {
                var n = e(t);
                n.hasClass(this.markerClassName) || (n.addClass(this.markerClassName).append(i.dpDiv), e.data(t, "datepicker", i), this._setDate(i, this._getDefaultDate(i), !0), this._updateDatepicker(i), this._updateAlternate(i), i.settings.disabled && this._disableDatepicker(t), i.dpDiv.css("display", "block"))
            },
            _dialogDatepicker: function (t, i, n, a, s) {
                var o, r, l, c, d, p = this._dialogInst;
                return p || (this.uuid += 1, o = "dp" + this.uuid, this._dialogInput = e("<input type='text' id='" + o + "' style='position: absolute; top: -100px; width: 0px;'/>"), this._dialogInput.on("keydown", this._doKeyDown), e("body").append(this._dialogInput), (p = this._dialogInst = this._newInst(this._dialogInput, !1)).settings = {}, e.data(this._dialogInput[0], "datepicker", p)), v(p.settings, a || {}), i = i && i.constructor === Date ? this._formatDate(p, i) : i, this._dialogInput.val(i), this._pos = s ? s.length ? s : [s.pageX, s.pageY] : null, this._pos || (r = document.documentElement.clientWidth, l = document.documentElement.clientHeight, c = document.documentElement.scrollLeft || document.body.scrollLeft, d = document.documentElement.scrollTop || document.body.scrollTop, this._pos = [r / 2 - 100 + c, l / 2 - 150 + d]), this._dialogInput.css("left", this._pos[0] + 20 + "px").css("top", this._pos[1] + "px"), p.settings.onSelect = n, this._inDialog = !0, this.dpDiv.addClass(this._dialogClass), this._showDatepicker(this._dialogInput[0]), e.blockUI && e.blockUI(this.dpDiv), e.data(this._dialogInput[0], "datepicker", p), this
            },
            _destroyDatepicker: function (t) {
                var i, n = e(t),
                    a = e.data(t, "datepicker");
                n.hasClass(this.markerClassName) && (i = t.nodeName.toLowerCase(), e.removeData(t, "datepicker"), "input" === i ? (a.append.remove(), a.trigger.remove(), n.removeClass(this.markerClassName).off("focus", this._showDatepicker).off("keydown", this._doKeyDown).off("keypress", this._doKeyPress).off("keyup", this._doKeyUp)) : "div" !== i && "span" !== i || n.removeClass(this.markerClassName).empty(), h === a && (h = null))
            },
            _enableDatepicker: function (t) {
                var i, n, a = e(t),
                    s = e.data(t, "datepicker");
                a.hasClass(this.markerClassName) && ("input" === (i = t.nodeName.toLowerCase()) ? (t.disabled = !1, s.trigger.filter("button").each((function () {
                    this.disabled = !1
                })).end().filter("img").css({
                    opacity: "1.0",
                    cursor: ""
                })) : "div" !== i && "span" !== i || ((n = a.children("." + this._inlineClass)).children().removeClass("ui-state-disabled"), n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled", !1)), this._disabledInputs = e.map(this._disabledInputs, (function (e) {
                    return e === t ? null : e
                })))
            },
            _disableDatepicker: function (t) {
                var i, n, a = e(t),
                    s = e.data(t, "datepicker");
                a.hasClass(this.markerClassName) && ("input" === (i = t.nodeName.toLowerCase()) ? (t.disabled = !0, s.trigger.filter("button").each((function () {
                    this.disabled = !0
                })).end().filter("img").css({
                    opacity: "0.5",
                    cursor: "default"
                })) : "div" !== i && "span" !== i || ((n = a.children("." + this._inlineClass)).children().addClass("ui-state-disabled"), n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled", !0)), this._disabledInputs = e.map(this._disabledInputs, (function (e) {
                    return e === t ? null : e
                })), this._disabledInputs[this._disabledInputs.length] = t)
            },
            _isDisabledDatepicker: function (e) {
                if (!e) return !1;
                for (var t = 0; t < this._disabledInputs.length; t++)
                    if (this._disabledInputs[t] === e) return !0;
                return !1
            },
            _getInst: function (t) {
                try {
                    return e.data(t, "datepicker")
                } catch (e) {
                    throw "Missing instance data for this datepicker"
                }
            },
            _optionDatepicker: function (t, i, n) {
                var a, s, o, r, l = this._getInst(t);
                if (2 === arguments.length && "string" == typeof i) return "defaults" === i ? e.extend({}, e.datepicker._defaults) : l ? "all" === i ? e.extend({}, l.settings) : this._get(l, i) : null;
                a = i || {}, "string" == typeof i && ((a = {})[i] = n), l && (this._curInst === l && this._hideDatepicker(), s = this._getDateDatepicker(t, !0), o = this._getMinMaxDate(l, "min"), r = this._getMinMaxDate(l, "max"), v(l.settings, a), null !== o && void 0 !== a.dateFormat && void 0 === a.minDate && (l.settings.minDate = this._formatDate(l, o)), null !== r && void 0 !== a.dateFormat && void 0 === a.maxDate && (l.settings.maxDate = this._formatDate(l, r)), "disabled" in a && (a.disabled ? this._disableDatepicker(t) : this._enableDatepicker(t)), this._attachments(e(t), l), this._autoSize(l), this._setDate(l, s), this._updateAlternate(l), this._updateDatepicker(l))
            },
            _changeDatepicker: function (e, t, i) {
                this._optionDatepicker(e, t, i)
            },
            _refreshDatepicker: function (e) {
                var t = this._getInst(e);
                t && this._updateDatepicker(t)
            },
            _setDateDatepicker: function (e, t) {
                var i = this._getInst(e);
                i && (this._setDate(i, t), this._updateDatepicker(i), this._updateAlternate(i))
            },
            _getDateDatepicker: function (e, t) {
                var i = this._getInst(e);
                return i && !i.inline && this._setDateFromField(i, t), i ? this._getDate(i) : null
            },
            _doKeyDown: function (t) {
                var i, n, a, s = e.datepicker._getInst(t.target),
                    o = !0,
                    r = s.dpDiv.is(".ui-datepicker-rtl");
                if (s._keyEvent = !0, e.datepicker._datepickerShowing) switch (t.keyCode) {
                    case 9:
                        e.datepicker._hideDatepicker(), o = !1;
                        break;
                    case 13:
                        return (a = e("td." + e.datepicker._dayOverClass + ":not(." + e.datepicker._currentClass + ")", s.dpDiv))[0] && e.datepicker._selectDay(t.target, s.selectedMonth, s.selectedYear, a[0]), (i = e.datepicker._get(s, "onSelect")) ? (n = e.datepicker._formatDate(s), i.apply(s.input ? s.input[0] : null, [n, s])) : e.datepicker._hideDatepicker(), !1;
                    case 27:
                        e.datepicker._hideDatepicker();
                        break;
                    case 33:
                        e.datepicker._adjustDate(t.target, t.ctrlKey ? -e.datepicker._get(s, "stepBigMonths") : -e.datepicker._get(s, "stepMonths"), "M");
                        break;
                    case 34:
                        e.datepicker._adjustDate(t.target, t.ctrlKey ? +e.datepicker._get(s, "stepBigMonths") : +e.datepicker._get(s, "stepMonths"), "M");
                        break;
                    case 35:
                        (t.ctrlKey || t.metaKey) && e.datepicker._clearDate(t.target), o = t.ctrlKey || t.metaKey;
                        break;
                    case 36:
                        (t.ctrlKey || t.metaKey) && e.datepicker._gotoToday(t.target), o = t.ctrlKey || t.metaKey;
                        break;
                    case 37:
                        (t.ctrlKey || t.metaKey) && e.datepicker._adjustDate(t.target, r ? 1 : -1, "D"), o = t.ctrlKey || t.metaKey, t.originalEvent.altKey && e.datepicker._adjustDate(t.target, t.ctrlKey ? -e.datepicker._get(s, "stepBigMonths") : -e.datepicker._get(s, "stepMonths"), "M");
                        break;
                    case 38:
                        (t.ctrlKey || t.metaKey) && e.datepicker._adjustDate(t.target, -7, "D"), o = t.ctrlKey || t.metaKey;
                        break;
                    case 39:
                        (t.ctrlKey || t.metaKey) && e.datepicker._adjustDate(t.target, r ? -1 : 1, "D"), o = t.ctrlKey || t.metaKey, t.originalEvent.altKey && e.datepicker._adjustDate(t.target, t.ctrlKey ? +e.datepicker._get(s, "stepBigMonths") : +e.datepicker._get(s, "stepMonths"), "M");
                        break;
                    case 40:
                        (t.ctrlKey || t.metaKey) && e.datepicker._adjustDate(t.target, 7, "D"), o = t.ctrlKey || t.metaKey;
                        break;
                    default:
                        o = !1
                } else 36 === t.keyCode && t.ctrlKey ? e.datepicker._showDatepicker(this) : o = !1;
                o && (t.preventDefault(), t.stopPropagation())
            },
            _doKeyPress: function (t) {
                var i, n, a = e.datepicker._getInst(t.target);
                if (e.datepicker._get(a, "constrainInput")) return i = e.datepicker._possibleChars(e.datepicker._get(a, "dateFormat")), n = String.fromCharCode(null == t.charCode ? t.keyCode : t.charCode), t.ctrlKey || t.metaKey || n < " " || !i || i.indexOf(n) > -1
            },
            _doKeyUp: function (t) {
                var i = e.datepicker._getInst(t.target);
                if (i.input.val() !== i.lastVal) try {
                    e.datepicker.parseDate(e.datepicker._get(i, "dateFormat"), i.input ? i.input.val() : null, e.datepicker._getFormatConfig(i)) && (e.datepicker._setDateFromField(i), e.datepicker._updateAlternate(i), e.datepicker._updateDatepicker(i))
                } catch (e) { }
                return !0
            },
            _showDatepicker: function (t) {
                var i, n, a, s, o, r, l;
                ("input" !== (t = t.target || t).nodeName.toLowerCase() && (t = e("input", t.parentNode)[0]), e.datepicker._isDisabledDatepicker(t) || e.datepicker._lastInput === t) || (i = e.datepicker._getInst(t), e.datepicker._curInst && e.datepicker._curInst !== i && (e.datepicker._curInst.dpDiv.stop(!0, !0), i && e.datepicker._datepickerShowing && e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])), !1 !== (a = (n = e.datepicker._get(i, "beforeShow")) ? n.apply(t, [t, i]) : {}) && (v(i.settings, a), i.lastVal = null, e.datepicker._lastInput = t, e.datepicker._setDateFromField(i), e.datepicker._inDialog && (t.value = ""), e.datepicker._pos || (e.datepicker._pos = e.datepicker._findPos(t), e.datepicker._pos[1] += t.offsetHeight), s = !1, e(t).parents().each((function () {
                    return !(s |= "fixed" === e(this).css("position"))
                })), o = {
                    left: e.datepicker._pos[0],
                    top: e.datepicker._pos[1]
                }, e.datepicker._pos = null, i.dpDiv.empty(), i.dpDiv.css({
                    position: "absolute",
                    display: "block",
                    top: "-1000px"
                }), e.datepicker._updateDatepicker(i), o = e.datepicker._checkOffset(i, o, s), i.dpDiv.css({
                    position: e.datepicker._inDialog && e.blockUI ? "static" : s ? "fixed" : "absolute",
                    display: "none",
                    left: o.left + "px",
                    top: o.top + "px"
                }), i.inline || (r = e.datepicker._get(i, "showAnim"), l = e.datepicker._get(i, "duration"), i.dpDiv.css("z-index", function (e) {
                    for (var t, i; e.length && e[0] !== document;) {
                        if (("absolute" === (t = e.css("position")) || "relative" === t || "fixed" === t) && (i = parseInt(e.css("zIndex"), 10), !isNaN(i) && 0 !== i)) return i;
                        e = e.parent()
                    }
                    return 0
                }(e(t)) + 1), e.datepicker._datepickerShowing = !0, e.effects && e.effects.effect[r] ? i.dpDiv.show(r, e.datepicker._get(i, "showOptions"), l) : i.dpDiv[r || "show"](r ? l : null), e.datepicker._shouldFocusInput(i) && i.input.trigger("focus"), e.datepicker._curInst = i)))
            },
            _updateDatepicker: function (t) {
                this.maxRows = 4, h = t, t.dpDiv.empty().append(this._generateHTML(t)), this._attachHandlers(t);
                var i, n = this._getNumberOfMonths(t),
                    a = n[1],
                    s = t.dpDiv.find("." + this._dayOverClass + " a");
                s.length > 0 && g.apply(s.get(0)), t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""), a > 1 && t.dpDiv.addClass("ui-datepicker-multi-" + a).css("width", 17 * a + "em"), t.dpDiv[(1 !== n[0] || 1 !== n[1] ? "add" : "remove") + "Class"]("ui-datepicker-multi"), t.dpDiv[(this._get(t, "isRTL") ? "add" : "remove") + "Class"]("ui-datepicker-rtl"), t === e.datepicker._curInst && e.datepicker._datepickerShowing && e.datepicker._shouldFocusInput(t) && t.input.trigger("focus"), t.yearshtml && (i = t.yearshtml, setTimeout((function () {
                    i === t.yearshtml && t.yearshtml && t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml), i = t.yearshtml = null
                }), 0))
            },
            _shouldFocusInput: function (e) {
                return e.input && e.input.is(":visible") && !e.input.is(":disabled") && !e.input.is(":focus")
            },
            _checkOffset: function (t, i, n) {
                var a = t.dpDiv.outerWidth(),
                    s = t.dpDiv.outerHeight(),
                    o = t.input ? t.input.outerWidth() : 0,
                    r = t.input ? t.input.outerHeight() : 0,
                    l = document.documentElement.clientWidth + (n ? 0 : e(document).scrollLeft()),
                    c = document.documentElement.clientHeight + (n ? 0 : e(document).scrollTop());
                return i.left -= this._get(t, "isRTL") ? a - o : 0, i.left -= n && i.left === t.input.offset().left ? e(document).scrollLeft() : 0, i.top -= n && i.top === t.input.offset().top + r ? e(document).scrollTop() : 0, i.left -= Math.min(i.left, i.left + a > l && l > a ? Math.abs(i.left + a - l) : 0), i.top -= Math.min(i.top, i.top + s > c && c > s ? Math.abs(s + r) : 0), i
            },
            _findPos: function (t) {
                for (var i, n = this._getInst(t), a = this._get(n, "isRTL"); t && ("hidden" === t.type || 1 !== t.nodeType || e.expr.filters.hidden(t));) t = t[a ? "previousSibling" : "nextSibling"];
                return [(i = e(t).offset()).left, i.top]
            },
            _hideDatepicker: function (t) {
                var i, n, a, s, o = this._curInst;
                !o || t && o !== e.data(t, "datepicker") || this._datepickerShowing && (i = this._get(o, "showAnim"), n = this._get(o, "duration"), a = function () {
                    e.datepicker._tidyDialog(o)
                }, e.effects && (e.effects.effect[i] || e.effects[i]) ? o.dpDiv.hide(i, e.datepicker._get(o, "showOptions"), n, a) : o.dpDiv["slideDown" === i ? "slideUp" : "fadeIn" === i ? "fadeOut" : "hide"](i ? n : null, a), i || a(), this._datepickerShowing = !1, (s = this._get(o, "onClose")) && s.apply(o.input ? o.input[0] : null, [o.input ? o.input.val() : "", o]), this._lastInput = null, this._inDialog && (this._dialogInput.css({
                    position: "absolute",
                    left: "0",
                    top: "-100px"
                }), e.blockUI && (e.unblockUI(), e("body").append(this.dpDiv))), this._inDialog = !1)
            },
            _tidyDialog: function (e) {
                e.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")
            },
            _checkExternalClick: function (t) {
                if (e.datepicker._curInst) {
                    var i = e(t.target),
                        n = e.datepicker._getInst(i[0]);
                    (i[0].id === e.datepicker._mainDivId || 0 !== i.parents("#" + e.datepicker._mainDivId).length || i.hasClass(e.datepicker.markerClassName) || i.closest("." + e.datepicker._triggerClass).length || !e.datepicker._datepickerShowing || e.datepicker._inDialog && e.blockUI) && (!i.hasClass(e.datepicker.markerClassName) || e.datepicker._curInst === n) || e.datepicker._hideDatepicker()
                }
            },
            _adjustDate: function (t, i, n) {
                var a = e(t),
                    s = this._getInst(a[0]);
                this._isDisabledDatepicker(a[0]) || (this._adjustInstDate(s, i + ("M" === n ? this._get(s, "showCurrentAtPos") : 0), n), this._updateDatepicker(s))
            },
            _gotoToday: function (t) {
                var i, n = e(t),
                    a = this._getInst(n[0]);
                this._get(a, "gotoCurrent") && a.currentDay ? (a.selectedDay = a.currentDay, a.drawMonth = a.selectedMonth = a.currentMonth, a.drawYear = a.selectedYear = a.currentYear) : (i = new Date, a.selectedDay = i.getDate(), a.drawMonth = a.selectedMonth = i.getMonth(), a.drawYear = a.selectedYear = i.getFullYear()), this._notifyChange(a), this._adjustDate(n)
            },
            _selectMonthYear: function (t, i, n) {
                var a = e(t),
                    s = this._getInst(a[0]);
                s["selected" + ("M" === n ? "Month" : "Year")] = s["draw" + ("M" === n ? "Month" : "Year")] = parseInt(i.options[i.selectedIndex].value, 10), this._notifyChange(s), this._adjustDate(a)
            },
            _selectDay: function (t, i, n, a) {
                var s, o = e(t);
                e(a).hasClass(this._unselectableClass) || this._isDisabledDatepicker(o[0]) || ((s = this._getInst(o[0])).selectedDay = s.currentDay = e("a", a).html(), s.selectedMonth = s.currentMonth = i, s.selectedYear = s.currentYear = n, this._selectDate(t, this._formatDate(s, s.currentDay, s.currentMonth, s.currentYear)))
            },
            _clearDate: function (t) {
                var i = e(t);
                this._selectDate(i, "")
            },
            _selectDate: function (t, i) {
                var n, a = e(t),
                    s = this._getInst(a[0]);
                i = null != i ? i : this._formatDate(s), s.input && s.input.val(i), this._updateAlternate(s), (n = this._get(s, "onSelect")) ? n.apply(s.input ? s.input[0] : null, [i, s]) : s.input && s.input.trigger("change"), s.inline ? this._updateDatepicker(s) : (this._hideDatepicker(), this._lastInput = s.input[0], "object" != typeof s.input[0] && s.input.trigger("focus"), this._lastInput = null)
            },
            _updateAlternate: function (t) {
                var i, n, a, s = this._get(t, "altField");
                s && (i = this._get(t, "altFormat") || this._get(t, "dateFormat"), n = this._getDate(t), a = this.formatDate(i, n, this._getFormatConfig(t)), e(s).val(a))
            },
            noWeekends: function (e) {
                var t = e.getDay();
                return [t > 0 && t < 6, ""]
            },
            iso8601Week: function (e) {
                var t, i = new Date(e.getTime());
                return i.setDate(i.getDate() + 4 - (i.getDay() || 7)), t = i.getTime(), i.setMonth(0), i.setDate(1), Math.floor(Math.round((t - i) / 864e5) / 7) + 1
            },
            parseDate: function (t, i, n) {
                if (null == t || null == i) throw "Invalid arguments";
                if ("" === (i = "object" == typeof i ? i.toString() : i + "")) return null;
                var a, s, o, r, l = 0,
                    c = (n ? n.shortYearCutoff : null) || this._defaults.shortYearCutoff,
                    d = "string" != typeof c ? c : (new Date).getFullYear() % 100 + parseInt(c, 10),
                    p = (n ? n.dayNamesShort : null) || this._defaults.dayNamesShort,
                    u = (n ? n.dayNames : null) || this._defaults.dayNames,
                    h = (n ? n.monthNamesShort : null) || this._defaults.monthNamesShort,
                    f = (n ? n.monthNames : null) || this._defaults.monthNames,
                    m = -1,
                    g = -1,
                    v = -1,
                    b = -1,
                    y = !1,
                    w = function (e) {
                        var i = a + 1 < t.length && t.charAt(a + 1) === e;
                        return i && a++, i
                    },
                    _ = function (e) {
                        var t = w(e),
                            n = "@" === e ? 14 : "!" === e ? 20 : "y" === e && t ? 4 : "o" === e ? 3 : 2,
                            a = new RegExp("^\\d{" + ("y" === e ? n : 1) + "," + n + "}"),
                            s = i.substring(l).match(a);
                        if (!s) throw "Missing number at position " + l;
                        return l += s[0].length, parseInt(s[0], 10)
                    },
                    T = function (t, n, a) {
                        var s = -1,
                            o = e.map(w(t) ? a : n, (function (e, t) {
                                return [
                                    [t, e]
                                ]
                            })).sort((function (e, t) {
                                return -(e[1].length - t[1].length)
                            }));
                        if (e.each(o, (function (e, t) {
                            var n = t[1];
                            if (i.substr(l, n.length).toLowerCase() === n.toLowerCase()) return s = t[0], l += n.length, !1
                        })), -1 !== s) return s + 1;
                        throw "Unknown name at position " + l
                    },
                    C = function () {
                        if (i.charAt(l) !== t.charAt(a)) throw "Unexpected literal at position " + l;
                        l++
                    };
                for (a = 0; a < t.length; a++)
                    if (y) "'" !== t.charAt(a) || w("'") ? C() : y = !1;
                    else switch (t.charAt(a)) {
                        case "d":
                            v = _("d");
                            break;
                        case "D":
                            T("D", p, u);
                            break;
                        case "o":
                            b = _("o");
                            break;
                        case "m":
                            g = _("m");
                            break;
                        case "M":
                            g = T("M", h, f);
                            break;
                        case "y":
                            m = _("y");
                            break;
                        case "@":
                            m = (r = new Date(_("@"))).getFullYear(), g = r.getMonth() + 1, v = r.getDate();
                            break;
                        case "!":
                            m = (r = new Date((_("!") - this._ticksTo1970) / 1e4)).getFullYear(), g = r.getMonth() + 1, v = r.getDate();
                            break;
                        case "'":
                            w("'") ? C() : y = !0;
                            break;
                        default:
                            C()
                    }
                if (l < i.length && (o = i.substr(l), !/^\s+/.test(o))) throw "Extra/unparsed characters found in date: " + o;
                if (-1 === m ? m = (new Date).getFullYear() : m < 100 && (m += (new Date).getFullYear() - (new Date).getFullYear() % 100 + (m <= d ? 0 : -100)), b > -1)
                    for (g = 1, v = b; ;) {
                        if (v <= (s = this._getDaysInMonth(m, g - 1))) break;
                        g++, v -= s
                    }
                if ((r = this._daylightSavingAdjust(new Date(m, g - 1, v))).getFullYear() !== m || r.getMonth() + 1 !== g || r.getDate() !== v) throw "Invalid date";
                return r
            },
            ATOM: "yy-mm-dd",
            COOKIE: "D, dd M yy",
            ISO_8601: "yy-mm-dd",
            RFC_822: "D, d M y",
            RFC_850: "DD, dd-M-y",
            RFC_1036: "D, d M y",
            RFC_1123: "D, d M yy",
            RFC_2822: "D, d M yy",
            RSS: "D, d M y",
            TICKS: "!",
            TIMESTAMP: "@",
            W3C: "yy-mm-dd",
            _ticksTo1970: 24 * (718685 + Math.floor(492.5) - Math.floor(19.7) + Math.floor(4.925)) * 60 * 60 * 1e7,
            formatDate: function (e, t, i) {
                if (!t) return "";
                var n, a = (i ? i.dayNamesShort : null) || this._defaults.dayNamesShort,
                    s = (i ? i.dayNames : null) || this._defaults.dayNames,
                    o = (i ? i.monthNamesShort : null) || this._defaults.monthNamesShort,
                    r = (i ? i.monthNames : null) || this._defaults.monthNames,
                    l = function (t) {
                        var i = n + 1 < e.length && e.charAt(n + 1) === t;
                        return i && n++, i
                    },
                    c = function (e, t, i) {
                        var n = "" + t;
                        if (l(e))
                            for (; n.length < i;) n = "0" + n;
                        return n
                    },
                    d = function (e, t, i, n) {
                        return l(e) ? n[t] : i[t]
                    },
                    p = "",
                    u = !1;
                if (t)
                    for (n = 0; n < e.length; n++)
                        if (u) "'" !== e.charAt(n) || l("'") ? p += e.charAt(n) : u = !1;
                        else switch (e.charAt(n)) {
                            case "d":
                                p += c("d", t.getDate(), 2);
                                break;
                            case "D":
                                p += d("D", t.getDay(), a, s);
                                break;
                            case "o":
                                p += c("o", Math.round((new Date(t.getFullYear(), t.getMonth(), t.getDate()).getTime() - new Date(t.getFullYear(), 0, 0).getTime()) / 864e5), 3);
                                break;
                            case "m":
                                p += c("m", t.getMonth() + 1, 2);
                                break;
                            case "M":
                                p += d("M", t.getMonth(), o, r);
                                break;
                            case "y":
                                p += l("y") ? t.getFullYear() : (t.getFullYear() % 100 < 10 ? "0" : "") + t.getFullYear() % 100;
                                break;
                            case "@":
                                p += t.getTime();
                                break;
                            case "!":
                                p += 1e4 * t.getTime() + this._ticksTo1970;
                                break;
                            case "'":
                                l("'") ? p += "'" : u = !0;
                                break;
                            default:
                                p += e.charAt(n)
                        }
                return p
            },
            _possibleChars: function (e) {
                var t, i = "",
                    n = !1,
                    a = function (i) {
                        var n = t + 1 < e.length && e.charAt(t + 1) === i;
                        return n && t++, n
                    };
                for (t = 0; t < e.length; t++)
                    if (n) "'" !== e.charAt(t) || a("'") ? i += e.charAt(t) : n = !1;
                    else switch (e.charAt(t)) {
                        case "d":
                        case "m":
                        case "y":
                        case "@":
                            i += "0123456789";
                            break;
                        case "D":
                        case "M":
                            return null;
                        case "'":
                            a("'") ? i += "'" : n = !0;
                            break;
                        default:
                            i += e.charAt(t)
                    }
                return i
            },
            _get: function (e, t) {
                return void 0 !== e.settings[t] ? e.settings[t] : this._defaults[t]
            },
            _setDateFromField: function (e, t) {
                if (e.input.val() !== e.lastVal) {
                    var i = this._get(e, "dateFormat"),
                        n = e.lastVal = e.input ? e.input.val() : null,
                        a = this._getDefaultDate(e),
                        s = a,
                        o = this._getFormatConfig(e);
                    try {
                        s = this.parseDate(i, n, o) || a
                    } catch (e) {
                        n = t ? "" : n
                    }
                    e.selectedDay = s.getDate(), e.drawMonth = e.selectedMonth = s.getMonth(), e.drawYear = e.selectedYear = s.getFullYear(), e.currentDay = n ? s.getDate() : 0, e.currentMonth = n ? s.getMonth() : 0, e.currentYear = n ? s.getFullYear() : 0, this._adjustInstDate(e)
                }
            },
            _getDefaultDate: function (e) {
                return this._restrictMinMax(e, this._determineDate(e, this._get(e, "defaultDate"), new Date))
            },
            _determineDate: function (t, i, n) {
                var a = null == i || "" === i ? n : "string" == typeof i ? function (i) {
                    try {
                        return e.datepicker.parseDate(e.datepicker._get(t, "dateFormat"), i, e.datepicker._getFormatConfig(t))
                    } catch (e) { }
                    for (var n = (i.toLowerCase().match(/^c/) ? e.datepicker._getDate(t) : null) || new Date, a = n.getFullYear(), s = n.getMonth(), o = n.getDate(), r = /([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g, l = r.exec(i); l;) {
                        switch (l[2] || "d") {
                            case "d":
                            case "D":
                                o += parseInt(l[1], 10);
                                break;
                            case "w":
                            case "W":
                                o += 7 * parseInt(l[1], 10);
                                break;
                            case "m":
                            case "M":
                                s += parseInt(l[1], 10), o = Math.min(o, e.datepicker._getDaysInMonth(a, s));
                                break;
                            case "y":
                            case "Y":
                                a += parseInt(l[1], 10), o = Math.min(o, e.datepicker._getDaysInMonth(a, s))
                        }
                        l = r.exec(i)
                    }
                    return new Date(a, s, o)
                }(i) : "number" == typeof i ? isNaN(i) ? n : function (e) {
                    var t = new Date;
                    return t.setDate(t.getDate() + e), t
                }(i) : new Date(i.getTime());
                return (a = a && "Invalid Date" === a.toString() ? n : a) && (a.setHours(0), a.setMinutes(0), a.setSeconds(0), a.setMilliseconds(0)), this._daylightSavingAdjust(a)
            },
            _daylightSavingAdjust: function (e) {
                return e ? (e.setHours(e.getHours() > 12 ? e.getHours() + 2 : 0), e) : null
            },
            _setDate: function (e, t, i) {
                var n = !t,
                    a = e.selectedMonth,
                    s = e.selectedYear,
                    o = this._restrictMinMax(e, this._determineDate(e, t, new Date));
                e.selectedDay = e.currentDay = o.getDate(), e.drawMonth = e.selectedMonth = e.currentMonth = o.getMonth(), e.drawYear = e.selectedYear = e.currentYear = o.getFullYear(), a === e.selectedMonth && s === e.selectedYear || i || this._notifyChange(e), this._adjustInstDate(e), e.input && e.input.val(n ? "" : this._formatDate(e))
            },
            _getDate: function (e) {
                return !e.currentYear || e.input && "" === e.input.val() ? null : this._daylightSavingAdjust(new Date(e.currentYear, e.currentMonth, e.currentDay))
            },
            _attachHandlers: function (t) {
                var i = this._get(t, "stepMonths"),
                    n = "#" + t.id.replace(/\\\\/g, "\\");
                t.dpDiv.find("[data-handler]").map((function () {
                    var t = {
                        prev: function () {
                            e.datepicker._adjustDate(n, -i, "M")
                        },
                        next: function () {
                            e.datepicker._adjustDate(n, +i, "M")
                        },
                        hide: function () {
                            e.datepicker._hideDatepicker()
                        },
                        today: function () {
                            e.datepicker._gotoToday(n)
                        },
                        selectDay: function () {
                            return e.datepicker._selectDay(n, +this.getAttribute("data-month"), +this.getAttribute("data-year"), this), !1
                        },
                        selectMonth: function () {
                            return e.datepicker._selectMonthYear(n, this, "M"), !1
                        },
                        selectYear: function () {
                            return e.datepicker._selectMonthYear(n, this, "Y"), !1
                        }
                    };
                    e(this).on(this.getAttribute("data-event"), t[this.getAttribute("data-handler")])
                }))
            },
            _generateHTML: function (e) {
                var t, i, n, a, s, o, r, l, c, d, p, u, h, f, m, g, v, b, y, w, _, T, C, k, E, x, S, M, P, I, O, A, L, D, N, R, W, F, B, U = new Date,
                    H = this._daylightSavingAdjust(new Date(U.getFullYear(), U.getMonth(), U.getDate())),
                    z = this._get(e, "isRTL"),
                    G = this._get(e, "showButtonPanel"),
                    $ = this._get(e, "hideIfNoPrevNext"),
                    q = this._get(e, "navigationAsDateFormat"),
                    j = this._getNumberOfMonths(e),
                    V = this._get(e, "showCurrentAtPos"),
                    Y = this._get(e, "stepMonths"),
                    K = 1 !== j[0] || 1 !== j[1],
                    X = this._daylightSavingAdjust(e.currentDay ? new Date(e.currentYear, e.currentMonth, e.currentDay) : new Date(9999, 9, 9)),
                    Q = this._getMinMaxDate(e, "min"),
                    J = this._getMinMaxDate(e, "max"),
                    Z = e.drawMonth - V,
                    ee = e.drawYear;
                if (Z < 0 && (Z += 12, ee--), J)
                    for (t = this._daylightSavingAdjust(new Date(J.getFullYear(), J.getMonth() - j[0] * j[1] + 1, J.getDate())), t = Q && t < Q ? Q : t; this._daylightSavingAdjust(new Date(ee, Z, 1)) > t;) --Z < 0 && (Z = 11, ee--);
                for (e.drawMonth = Z, e.drawYear = ee, i = this._get(e, "prevText"), i = q ? this.formatDate(i, this._daylightSavingAdjust(new Date(ee, Z - Y, 1)), this._getFormatConfig(e)) : i, n = this._canAdjustMonth(e, -1, ee, Z) ? "<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='" + i + "'><span class='ui-icon ui-icon-circle-triangle-" + (z ? "e" : "w") + "'>" + i + "</span></a>" : $ ? "" : "<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='" + i + "'><span class='ui-icon ui-icon-circle-triangle-" + (z ? "e" : "w") + "'>" + i + "</span></a>", a = this._get(e, "nextText"), a = q ? this.formatDate(a, this._daylightSavingAdjust(new Date(ee, Z + Y, 1)), this._getFormatConfig(e)) : a, s = this._canAdjustMonth(e, 1, ee, Z) ? "<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='" + a + "'><span class='ui-icon ui-icon-circle-triangle-" + (z ? "w" : "e") + "'>" + a + "</span></a>" : $ ? "" : "<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='" + a + "'><span class='ui-icon ui-icon-circle-triangle-" + (z ? "w" : "e") + "'>" + a + "</span></a>", o = this._get(e, "currentText"), r = this._get(e, "gotoCurrent") && e.currentDay ? X : H, o = q ? this.formatDate(o, r, this._getFormatConfig(e)) : o, l = e.inline ? "" : "<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>" + this._get(e, "closeText") + "</button>", c = G ? "<div class='ui-datepicker-buttonpane ui-widget-content'>" + (z ? l : "") + (this._isInRange(e, r) ? "<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>" + o + "</button>" : "") + (z ? "" : l) + "</div>" : "", d = parseInt(this._get(e, "firstDay"), 10), d = isNaN(d) ? 0 : d, p = this._get(e, "showWeek"), u = this._get(e, "dayNames"), h = this._get(e, "dayNamesMin"), f = this._get(e, "monthNames"), m = this._get(e, "monthNamesShort"), g = this._get(e, "beforeShowDay"), v = this._get(e, "showOtherMonths"), b = this._get(e, "selectOtherMonths"), y = this._getDefaultDate(e), w = "", T = 0; T < j[0]; T++) {
                    for (C = "", this.maxRows = 4, k = 0; k < j[1]; k++) {
                        if (E = this._daylightSavingAdjust(new Date(ee, Z, e.selectedDay)), x = " ui-corner-all", S = "", K) {
                            if (S += "<div class='ui-datepicker-group", j[1] > 1) switch (k) {
                                case 0:
                                    S += " ui-datepicker-group-first", x = " ui-corner-" + (z ? "right" : "left");
                                    break;
                                case j[1] - 1:
                                    S += " ui-datepicker-group-last", x = " ui-corner-" + (z ? "left" : "right");
                                    break;
                                default:
                                    S += " ui-datepicker-group-middle", x = ""
                            }
                            S += "'>"
                        }
                        for (S += "<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix" + x + "'>" + (/all|left/.test(x) && 0 === T ? z ? s : n : "") + (/all|right/.test(x) && 0 === T ? z ? n : s : "") + this._generateMonthYearHeader(e, Z, ee, Q, J, T > 0 || k > 0, f, m) + "</div><table class='ui-datepicker-calendar'><thead><tr>", M = p ? "<th class='ui-datepicker-week-col'>" + this._get(e, "weekHeader") + "</th>" : "", _ = 0; _ < 7; _++) M += "<th scope='col'" + ((_ + d + 6) % 7 >= 5 ? " class='ui-datepicker-week-end'" : "") + "><span title='" + u[P = (_ + d) % 7] + "'>" + h[P] + "</span></th>";
                        for (S += M + "</tr></thead><tbody>", I = this._getDaysInMonth(ee, Z), ee === e.selectedYear && Z === e.selectedMonth && (e.selectedDay = Math.min(e.selectedDay, I)), O = (this._getFirstDayOfMonth(ee, Z) - d + 7) % 7, A = Math.ceil((O + I) / 7), L = K && this.maxRows > A ? this.maxRows : A, this.maxRows = L, D = this._daylightSavingAdjust(new Date(ee, Z, 1 - O)), N = 0; N < L; N++) {
                            for (S += "<tr>", R = p ? "<td class='ui-datepicker-week-col'>" + this._get(e, "calculateWeek")(D) + "</td>" : "", _ = 0; _ < 7; _++) W = g ? g.apply(e.input ? e.input[0] : null, [D]) : [!0, ""], B = (F = D.getMonth() !== Z) && !b || !W[0] || Q && D < Q || J && D > J, R += "<td class='" + ((_ + d + 6) % 7 >= 5 ? " ui-datepicker-week-end" : "") + (F ? " ui-datepicker-other-month" : "") + (D.getTime() === E.getTime() && Z === e.selectedMonth && e._keyEvent || y.getTime() === D.getTime() && y.getTime() === E.getTime() ? " " + this._dayOverClass : "") + (B ? " " + this._unselectableClass + " ui-state-disabled" : "") + (F && !v ? "" : " " + W[1] + (D.getTime() === X.getTime() ? " " + this._currentClass : "") + (D.getTime() === H.getTime() ? " ui-datepicker-today" : "")) + "'" + (F && !v || !W[2] ? "" : " title='" + W[2].replace(/'/g, "&#39;") + "'") + (B ? "" : " data-handler='selectDay' data-event='click' data-month='" + D.getMonth() + "' data-year='" + D.getFullYear() + "'") + ">" + (F && !v ? "&#xa0;" : B ? "<span class='ui-state-default'>" + D.getDate() + "</span>" : "<a class='ui-state-default" + (D.getTime() === H.getTime() ? " ui-state-highlight" : "") + (D.getTime() === X.getTime() ? " ui-state-active" : "") + (F ? " ui-priority-secondary" : "") + "' href='#'>" + D.getDate() + "</a>") + "</td>", D.setDate(D.getDate() + 1), D = this._daylightSavingAdjust(D);
                            S += R + "</tr>"
                        } ++Z > 11 && (Z = 0, ee++), C += S += "</tbody></table>" + (K ? "</div>" + (j[0] > 0 && k === j[1] - 1 ? "<div class='ui-datepicker-row-break'></div>" : "") : "")
                    }
                    w += C
                }
                return w += c, e._keyEvent = !1, w
            },
            _generateMonthYearHeader: function (e, t, i, n, a, s, o, r) {
                var l, c, d, p, u, h, f, m, g = this._get(e, "changeMonth"),
                    v = this._get(e, "changeYear"),
                    b = this._get(e, "showMonthAfterYear"),
                    y = "<div class='ui-datepicker-title'>",
                    w = "";
                if (s || !g) w += "<span class='ui-datepicker-month'>" + o[t] + "</span>";
                else {
                    for (l = n && n.getFullYear() === i, c = a && a.getFullYear() === i, w += "<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>", d = 0; d < 12; d++)(!l || d >= n.getMonth()) && (!c || d <= a.getMonth()) && (w += "<option value='" + d + "'" + (d === t ? " selected='selected'" : "") + ">" + r[d] + "</option>");
                    w += "</select>"
                }
                if (b || (y += w + (!s && g && v ? "" : "&#xa0;")), !e.yearshtml)
                    if (e.yearshtml = "", s || !v) y += "<span class='ui-datepicker-year'>" + i + "</span>";
                    else {
                        for (p = this._get(e, "yearRange").split(":"), u = (new Date).getFullYear(), h = function (e) {
                            var t = e.match(/c[+\-].*/) ? i + parseInt(e.substring(1), 10) : e.match(/[+\-].*/) ? u + parseInt(e, 10) : parseInt(e, 10);
                            return isNaN(t) ? u : t
                        }, f = h(p[0]), m = Math.max(f, h(p[1] || "")), f = n ? Math.max(f, n.getFullYear()) : f, m = a ? Math.min(m, a.getFullYear()) : m, e.yearshtml += "<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>"; f <= m; f++) e.yearshtml += "<option value='" + f + "'" + (f === i ? " selected='selected'" : "") + ">" + f + "</option>";
                        e.yearshtml += "</select>", y += e.yearshtml, e.yearshtml = null
                    } return y += this._get(e, "yearSuffix"), b && (y += (!s && g && v ? "" : "&#xa0;") + w), y += "</div>"
            },
            _adjustInstDate: function (e, t, i) {
                var n = e.selectedYear + ("Y" === i ? t : 0),
                    a = e.selectedMonth + ("M" === i ? t : 0),
                    s = Math.min(e.selectedDay, this._getDaysInMonth(n, a)) + ("D" === i ? t : 0),
                    o = this._restrictMinMax(e, this._daylightSavingAdjust(new Date(n, a, s)));
                e.selectedDay = o.getDate(), e.drawMonth = e.selectedMonth = o.getMonth(), e.drawYear = e.selectedYear = o.getFullYear(), "M" !== i && "Y" !== i || this._notifyChange(e)
            },
            _restrictMinMax: function (e, t) {
                var i = this._getMinMaxDate(e, "min"),
                    n = this._getMinMaxDate(e, "max"),
                    a = i && t < i ? i : t;
                return n && a > n ? n : a
            },
            _notifyChange: function (e) {
                var t = this._get(e, "onChangeMonthYear");
                t && t.apply(e.input ? e.input[0] : null, [e.selectedYear, e.selectedMonth + 1, e])
            },
            _getNumberOfMonths: function (e) {
                var t = this._get(e, "numberOfMonths");
                return null == t ? [1, 1] : "number" == typeof t ? [1, t] : t
            },
            _getMinMaxDate: function (e, t) {
                return this._determineDate(e, this._get(e, t + "Date"), null)
            },
            _getDaysInMonth: function (e, t) {
                return 32 - this._daylightSavingAdjust(new Date(e, t, 32)).getDate()
            },
            _getFirstDayOfMonth: function (e, t) {
                return new Date(e, t, 1).getDay()
            },
            _canAdjustMonth: function (e, t, i, n) {
                var a = this._getNumberOfMonths(e),
                    s = this._daylightSavingAdjust(new Date(i, n + (t < 0 ? t : a[0] * a[1]), 1));
                return t < 0 && s.setDate(this._getDaysInMonth(s.getFullYear(), s.getMonth())), this._isInRange(e, s)
            },
            _isInRange: function (e, t) {
                var i, n, a = this._getMinMaxDate(e, "min"),
                    s = this._getMinMaxDate(e, "max"),
                    o = null,
                    r = null,
                    l = this._get(e, "yearRange");
                return l && (i = l.split(":"), n = (new Date).getFullYear(), o = parseInt(i[0], 10), r = parseInt(i[1], 10), i[0].match(/[+\-].*/) && (o += n), i[1].match(/[+\-].*/) && (r += n)), (!a || t.getTime() >= a.getTime()) && (!s || t.getTime() <= s.getTime()) && (!o || t.getFullYear() >= o) && (!r || t.getFullYear() <= r)
            },
            _getFormatConfig: function (e) {
                var t = this._get(e, "shortYearCutoff");
                return {
                    shortYearCutoff: t = "string" != typeof t ? t : (new Date).getFullYear() % 100 + parseInt(t, 10),
                    dayNamesShort: this._get(e, "dayNamesShort"),
                    dayNames: this._get(e, "dayNames"),
                    monthNamesShort: this._get(e, "monthNamesShort"),
                    monthNames: this._get(e, "monthNames")
                }
            },
            _formatDate: function (e, t, i, n) {
                t || (e.currentDay = e.selectedDay, e.currentMonth = e.selectedMonth, e.currentYear = e.selectedYear);
                var a = t ? "object" == typeof t ? t : this._daylightSavingAdjust(new Date(n, i, t)) : this._daylightSavingAdjust(new Date(e.currentYear, e.currentMonth, e.currentDay));
                return this.formatDate(this._get(e, "dateFormat"), a, this._getFormatConfig(e))
            }
        }), e.fn.datepicker = function (t) {
            if (!this.length) return this;
            e.datepicker.initialized || (e(document).on("mousedown", e.datepicker._checkExternalClick), e.datepicker.initialized = !0), 0 === e("#" + e.datepicker._mainDivId).length && e("body").append(e.datepicker.dpDiv);
            var i = Array.prototype.slice.call(arguments, 1);
            return "string" != typeof t || "isDisabled" !== t && "getDate" !== t && "widget" !== t ? "option" === t && 2 === arguments.length && "string" == typeof arguments[1] ? e.datepicker["_" + t + "Datepicker"].apply(e.datepicker, [this[0]].concat(i)) : this.each((function () {
                "string" == typeof t ? e.datepicker["_" + t + "Datepicker"].apply(e.datepicker, [this].concat(i)) : e.datepicker._attachDatepicker(this, t)
            })) : e.datepicker["_" + t + "Datepicker"].apply(e.datepicker, [this[0]].concat(i))
        }, e.datepicker = new f, e.datepicker.initialized = !1, e.datepicker.uuid = (new Date).getTime(), e.datepicker.version = "1.12.1";
        e.datepicker, e.ui.ie = !!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());
        var b = !1;
        e(document).on("mouseup", (function () {
            b = !1
        }));
        e.widget("ui.mouse", {
            version: "1.12.1",
            options: {
                cancel: "input, textarea, button, select, option",
                distance: 1,
                delay: 0
            },
            _mouseInit: function () {
                var t = this;
                this.element.on("mousedown." + this.widgetName, (function (e) {
                    return t._mouseDown(e)
                })).on("click." + this.widgetName, (function (i) {
                    if (!0 === e.data(i.target, t.widgetName + ".preventClickEvent")) return e.removeData(i.target, t.widgetName + ".preventClickEvent"), i.stopImmediatePropagation(), !1
                })), this.started = !1
            },
            _mouseDestroy: function () {
                this.element.off("." + this.widgetName), this._mouseMoveDelegate && this.document.off("mousemove." + this.widgetName, this._mouseMoveDelegate).off("mouseup." + this.widgetName, this._mouseUpDelegate)
            },
            _mouseDown: function (t) {
                if (!b) {
                    this._mouseMoved = !1, this._mouseStarted && this._mouseUp(t), this._mouseDownEvent = t;
                    var i = this,
                        n = 1 === t.which,
                        a = !("string" != typeof this.options.cancel || !t.target.nodeName) && e(t.target).closest(this.options.cancel).length;
                    return !(n && !a && this._mouseCapture(t)) || (this.mouseDelayMet = !this.options.delay, this.mouseDelayMet || (this._mouseDelayTimer = setTimeout((function () {
                        i.mouseDelayMet = !0
                    }), this.options.delay)), this._mouseDistanceMet(t) && this._mouseDelayMet(t) && (this._mouseStarted = !1 !== this._mouseStart(t), !this._mouseStarted) ? (t.preventDefault(), !0) : (!0 === e.data(t.target, this.widgetName + ".preventClickEvent") && e.removeData(t.target, this.widgetName + ".preventClickEvent"), this._mouseMoveDelegate = function (e) {
                        return i._mouseMove(e)
                    }, this._mouseUpDelegate = function (e) {
                        return i._mouseUp(e)
                    }, this.document.on("mousemove." + this.widgetName, this._mouseMoveDelegate).on("mouseup." + this.widgetName, this._mouseUpDelegate), t.preventDefault(), b = !0, !0))
                }
            },
            _mouseMove: function (t) {
                if (this._mouseMoved) {
                    if (e.ui.ie && (!document.documentMode || document.documentMode < 9) && !t.button) return this._mouseUp(t);
                    if (!t.which)
                        if (t.originalEvent.altKey || t.originalEvent.ctrlKey || t.originalEvent.metaKey || t.originalEvent.shiftKey) this.ignoreMissingWhich = !0;
                        else if (!this.ignoreMissingWhich) return this._mouseUp(t)
                }
                return (t.which || t.button) && (this._mouseMoved = !0), this._mouseStarted ? (this._mouseDrag(t), t.preventDefault()) : (this._mouseDistanceMet(t) && this._mouseDelayMet(t) && (this._mouseStarted = !1 !== this._mouseStart(this._mouseDownEvent, t), this._mouseStarted ? this._mouseDrag(t) : this._mouseUp(t)), !this._mouseStarted)
            },
            _mouseUp: function (t) {
                this.document.off("mousemove." + this.widgetName, this._mouseMoveDelegate).off("mouseup." + this.widgetName, this._mouseUpDelegate), this._mouseStarted && (this._mouseStarted = !1, t.target === this._mouseDownEvent.target && e.data(t.target, this.widgetName + ".preventClickEvent", !0), this._mouseStop(t)), this._mouseDelayTimer && (clearTimeout(this._mouseDelayTimer), delete this._mouseDelayTimer), this.ignoreMissingWhich = !1, b = !1, t.preventDefault()
            },
            _mouseDistanceMet: function (e) {
                return Math.max(Math.abs(this._mouseDownEvent.pageX - e.pageX), Math.abs(this._mouseDownEvent.pageY - e.pageY)) >= this.options.distance
            },
            _mouseDelayMet: function () {
                return this.mouseDelayMet
            },
            _mouseStart: function () { },
            _mouseDrag: function () { },
            _mouseStop: function () { },
            _mouseCapture: function () {
                return !0
            }
        }), e.ui.plugin = {
            add: function (t, i, n) {
                var a, s = e.ui[t].prototype;
                for (a in n) s.plugins[a] = s.plugins[a] || [], s.plugins[a].push([i, n[a]])
            },
            call: function (e, t, i, n) {
                var a, s = e.plugins[t];
                if (s && (n || e.element[0].parentNode && 11 !== e.element[0].parentNode.nodeType))
                    for (a = 0; a < s.length; a++) e.options[s[a][0]] && s[a][1].apply(e.element, i)
            }
        }, e.ui.safeBlur = function (t) {
            t && "body" !== t.nodeName.toLowerCase() && e(t).trigger("blur")
        };
        /*!
         * jQuery UI Draggable 1.12.1
         * http://jqueryui.com
         *
         * Copyright jQuery Foundation and other contributors
         * Released under the MIT license.
         * http://jquery.org/license
         */
        e.widget("ui.draggable", e.ui.mouse, {
            version: "1.12.1",
            widgetEventPrefix: "drag",
            options: {
                addClasses: !0,
                appendTo: "parent",
                axis: !1,
                connectToSortable: !1,
                containment: !1,
                cursor: "auto",
                cursorAt: !1,
                grid: !1,
                handle: !1,
                helper: "original",
                iframeFix: !1,
                opacity: !1,
                refreshPositions: !1,
                revert: !1,
                revertDuration: 500,
                scope: "default",
                scroll: !0,
                scrollSensitivity: 20,
                scrollSpeed: 20,
                snap: !1,
                snapMode: "both",
                snapTolerance: 20,
                stack: !1,
                zIndex: !1,
                drag: null,
                start: null,
                stop: null
            },
            _create: function () {
                "original" === this.options.helper && this._setPositionRelative(), this.options.addClasses && this._addClass("ui-draggable"), this._setHandleClassName(), this._mouseInit()
            },
            _setOption: function (e, t) {
                this._super(e, t), "handle" === e && (this._removeHandleClassName(), this._setHandleClassName())
            },
            _destroy: function () {
                (this.helper || this.element).is(".ui-draggable-dragging") ? this.destroyOnClear = !0 : (this._removeHandleClassName(), this._mouseDestroy())
            },
            _mouseCapture: function (t) {
                var i = this.options;
                return !(this.helper || i.disabled || e(t.target).closest(".ui-resizable-handle").length > 0) && (this.handle = this._getHandle(t), !!this.handle && (this._blurActiveElement(t), this._blockFrames(!0 === i.iframeFix ? "iframe" : i.iframeFix), !0))
            },
            _blockFrames: function (t) {
                this.iframeBlocks = this.document.find(t).map((function () {
                    var t = e(this);
                    return e("<div>").css("position", "absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]
                }))
            },
            _unblockFrames: function () {
                this.iframeBlocks && (this.iframeBlocks.remove(), delete this.iframeBlocks)
            },
            _blurActiveElement: function (t) {
                var i = e.ui.safeActiveElement(this.document[0]);
                e(t.target).closest(i).length || e.ui.safeBlur(i)
            },
            _mouseStart: function (t) {
                var i = this.options;
                return this.helper = this._createHelper(t), this._addClass(this.helper, "ui-draggable-dragging"), this._cacheHelperProportions(), e.ui.ddmanager && (e.ui.ddmanager.current = this), this._cacheMargins(), this.cssPosition = this.helper.css("position"), this.scrollParent = this.helper.scrollParent(!0), this.offsetParent = this.helper.offsetParent(), this.hasFixedAncestor = this.helper.parents().filter((function () {
                    return "fixed" === e(this).css("position")
                })).length > 0, this.positionAbs = this.element.offset(), this._refreshOffsets(t), this.originalPosition = this.position = this._generatePosition(t, !1), this.originalPageX = t.pageX, this.originalPageY = t.pageY, i.cursorAt && this._adjustOffsetFromHelper(i.cursorAt), this._setContainment(), !1 === this._trigger("start", t) ? (this._clear(), !1) : (this._cacheHelperProportions(), e.ui.ddmanager && !i.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t), this._mouseDrag(t, !0), e.ui.ddmanager && e.ui.ddmanager.dragStart(this, t), !0)
            },
            _refreshOffsets: function (e) {
                this.offset = {
                    top: this.positionAbs.top - this.margins.top,
                    left: this.positionAbs.left - this.margins.left,
                    scroll: !1,
                    parent: this._getParentOffset(),
                    relative: this._getRelativeOffset()
                }, this.offset.click = {
                    left: e.pageX - this.offset.left,
                    top: e.pageY - this.offset.top
                }
            },
            _mouseDrag: function (t, i) {
                if (this.hasFixedAncestor && (this.offset.parent = this._getParentOffset()), this.position = this._generatePosition(t, !0), this.positionAbs = this._convertPositionTo("absolute"), !i) {
                    var n = this._uiHash();
                    if (!1 === this._trigger("drag", t, n)) return this._mouseUp(new e.Event("mouseup", t)), !1;
                    this.position = n.position
                }
                return this.helper[0].style.left = this.position.left + "px", this.helper[0].style.top = this.position.top + "px", e.ui.ddmanager && e.ui.ddmanager.drag(this, t), !1
            },
            _mouseStop: function (t) {
                var i = this,
                    n = !1;
                return e.ui.ddmanager && !this.options.dropBehaviour && (n = e.ui.ddmanager.drop(this, t)), this.dropped && (n = this.dropped, this.dropped = !1), "invalid" === this.options.revert && !n || "valid" === this.options.revert && n || !0 === this.options.revert || e.isFunction(this.options.revert) && this.options.revert.call(this.element, n) ? e(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), (function () {
                    !1 !== i._trigger("stop", t) && i._clear()
                })) : !1 !== this._trigger("stop", t) && this._clear(), !1
            },
            _mouseUp: function (t) {
                return this._unblockFrames(), e.ui.ddmanager && e.ui.ddmanager.dragStop(this, t), this.handleElement.is(t.target) && this.element.trigger("focus"), e.ui.mouse.prototype._mouseUp.call(this, t)
            },
            cancel: function () {
                return this.helper.is(".ui-draggable-dragging") ? this._mouseUp(new e.Event("mouseup", {
                    target: this.element[0]
                })) : this._clear(), this
            },
            _getHandle: function (t) {
                return !this.options.handle || !!e(t.target).closest(this.element.find(this.options.handle)).length
            },
            _setHandleClassName: function () {
                this.handleElement = this.options.handle ? this.element.find(this.options.handle) : this.element, this._addClass(this.handleElement, "ui-draggable-handle")
            },
            _removeHandleClassName: function () {
                this._removeClass(this.handleElement, "ui-draggable-handle")
            },
            _createHelper: function (t) {
                var i = this.options,
                    n = e.isFunction(i.helper),
                    a = n ? e(i.helper.apply(this.element[0], [t])) : "clone" === i.helper ? this.element.clone().removeAttr("id") : this.element;
                return a.parents("body").length || a.appendTo("parent" === i.appendTo ? this.element[0].parentNode : i.appendTo), n && a[0] === this.element[0] && this._setPositionRelative(), a[0] === this.element[0] || /(fixed|absolute)/.test(a.css("position")) || a.css("position", "absolute"), a
            },
            _setPositionRelative: function () {
                /^(?:r|a|f)/.test(this.element.css("position")) || (this.element[0].style.position = "relative")
            },
            _adjustOffsetFromHelper: function (t) {
                "string" == typeof t && (t = t.split(" ")), e.isArray(t) && (t = {
                    left: +t[0],
                    top: +t[1] || 0
                }), "left" in t && (this.offset.click.left = t.left + this.margins.left), "right" in t && (this.offset.click.left = this.helperProportions.width - t.right + this.margins.left), "top" in t && (this.offset.click.top = t.top + this.margins.top), "bottom" in t && (this.offset.click.top = this.helperProportions.height - t.bottom + this.margins.top)
            },
            _isRootNode: function (e) {
                return /(html|body)/i.test(e.tagName) || e === this.document[0]
            },
            _getParentOffset: function () {
                var t = this.offsetParent.offset(),
                    i = this.document[0];
                return "absolute" === this.cssPosition && this.scrollParent[0] !== i && e.contains(this.scrollParent[0], this.offsetParent[0]) && (t.left += this.scrollParent.scrollLeft(), t.top += this.scrollParent.scrollTop()), this._isRootNode(this.offsetParent[0]) && (t = {
                    top: 0,
                    left: 0
                }), {
                    top: t.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                    left: t.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
                }
            },
            _getRelativeOffset: function () {
                if ("relative" !== this.cssPosition) return {
                    top: 0,
                    left: 0
                };
                var e = this.element.position(),
                    t = this._isRootNode(this.scrollParent[0]);
                return {
                    top: e.top - (parseInt(this.helper.css("top"), 10) || 0) + (t ? 0 : this.scrollParent.scrollTop()),
                    left: e.left - (parseInt(this.helper.css("left"), 10) || 0) + (t ? 0 : this.scrollParent.scrollLeft())
                }
            },
            _cacheMargins: function () {
                this.margins = {
                    left: parseInt(this.element.css("marginLeft"), 10) || 0,
                    top: parseInt(this.element.css("marginTop"), 10) || 0,
                    right: parseInt(this.element.css("marginRight"), 10) || 0,
                    bottom: parseInt(this.element.css("marginBottom"), 10) || 0
                }
            },
            _cacheHelperProportions: function () {
                this.helperProportions = {
                    width: this.helper.outerWidth(),
                    height: this.helper.outerHeight()
                }
            },
            _setContainment: function () {
                var t, i, n, a = this.options,
                    s = this.document[0];
                this.relativeContainer = null, a.containment ? "window" !== a.containment ? "document" !== a.containment ? a.containment.constructor !== Array ? ("parent" === a.containment && (a.containment = this.helper[0].parentNode), (n = (i = e(a.containment))[0]) && (t = /(scroll|auto)/.test(i.css("overflow")), this.containment = [(parseInt(i.css("borderLeftWidth"), 10) || 0) + (parseInt(i.css("paddingLeft"), 10) || 0), (parseInt(i.css("borderTopWidth"), 10) || 0) + (parseInt(i.css("paddingTop"), 10) || 0), (t ? Math.max(n.scrollWidth, n.offsetWidth) : n.offsetWidth) - (parseInt(i.css("borderRightWidth"), 10) || 0) - (parseInt(i.css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left - this.margins.right, (t ? Math.max(n.scrollHeight, n.offsetHeight) : n.offsetHeight) - (parseInt(i.css("borderBottomWidth"), 10) || 0) - (parseInt(i.css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top - this.margins.bottom], this.relativeContainer = i)) : this.containment = a.containment : this.containment = [0, 0, e(s).width() - this.helperProportions.width - this.margins.left, (e(s).height() || s.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top] : this.containment = [e(window).scrollLeft() - this.offset.relative.left - this.offset.parent.left, e(window).scrollTop() - this.offset.relative.top - this.offset.parent.top, e(window).scrollLeft() + e(window).width() - this.helperProportions.width - this.margins.left, e(window).scrollTop() + (e(window).height() || s.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top] : this.containment = null
            },
            _convertPositionTo: function (e, t) {
                t || (t = this.position);
                var i = "absolute" === e ? 1 : -1,
                    n = this._isRootNode(this.scrollParent[0]);
                return {
                    top: t.top + this.offset.relative.top * i + this.offset.parent.top * i - ("fixed" === this.cssPosition ? -this.offset.scroll.top : n ? 0 : this.offset.scroll.top) * i,
                    left: t.left + this.offset.relative.left * i + this.offset.parent.left * i - ("fixed" === this.cssPosition ? -this.offset.scroll.left : n ? 0 : this.offset.scroll.left) * i
                }
            },
            _generatePosition: function (e, t) {
                var i, n, a, s, o = this.options,
                    r = this._isRootNode(this.scrollParent[0]),
                    l = e.pageX,
                    c = e.pageY;
                return r && this.offset.scroll || (this.offset.scroll = {
                    top: this.scrollParent.scrollTop(),
                    left: this.scrollParent.scrollLeft()
                }), t && (this.containment && (this.relativeContainer ? (n = this.relativeContainer.offset(), i = [this.containment[0] + n.left, this.containment[1] + n.top, this.containment[2] + n.left, this.containment[3] + n.top]) : i = this.containment, e.pageX - this.offset.click.left < i[0] && (l = i[0] + this.offset.click.left), e.pageY - this.offset.click.top < i[1] && (c = i[1] + this.offset.click.top), e.pageX - this.offset.click.left > i[2] && (l = i[2] + this.offset.click.left), e.pageY - this.offset.click.top > i[3] && (c = i[3] + this.offset.click.top)), o.grid && (a = o.grid[1] ? this.originalPageY + Math.round((c - this.originalPageY) / o.grid[1]) * o.grid[1] : this.originalPageY, c = i ? a - this.offset.click.top >= i[1] || a - this.offset.click.top > i[3] ? a : a - this.offset.click.top >= i[1] ? a - o.grid[1] : a + o.grid[1] : a, s = o.grid[0] ? this.originalPageX + Math.round((l - this.originalPageX) / o.grid[0]) * o.grid[0] : this.originalPageX, l = i ? s - this.offset.click.left >= i[0] || s - this.offset.click.left > i[2] ? s : s - this.offset.click.left >= i[0] ? s - o.grid[0] : s + o.grid[0] : s), "y" === o.axis && (l = this.originalPageX), "x" === o.axis && (c = this.originalPageY)), {
                    top: c - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ("fixed" === this.cssPosition ? -this.offset.scroll.top : r ? 0 : this.offset.scroll.top),
                    left: l - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ("fixed" === this.cssPosition ? -this.offset.scroll.left : r ? 0 : this.offset.scroll.left)
                }
            },
            _clear: function () {
                this._removeClass(this.helper, "ui-draggable-dragging"), this.helper[0] === this.element[0] || this.cancelHelperRemoval || this.helper.remove(), this.helper = null, this.cancelHelperRemoval = !1, this.destroyOnClear && this.destroy()
            },
            _trigger: function (t, i, n) {
                return n = n || this._uiHash(), e.ui.plugin.call(this, t, [i, n, this], !0), /^(drag|start|stop)/.test(t) && (this.positionAbs = this._convertPositionTo("absolute"), n.offset = this.positionAbs), e.Widget.prototype._trigger.call(this, t, i, n)
            },
            plugins: {},
            _uiHash: function () {
                return {
                    helper: this.helper,
                    position: this.position,
                    originalPosition: this.originalPosition,
                    offset: this.positionAbs
                }
            }
        }), e.ui.plugin.add("draggable", "connectToSortable", {
            start: function (t, i, n) {
                var a = e.extend({}, i, {
                    item: n.element
                });
                n.sortables = [], e(n.options.connectToSortable).each((function () {
                    var i = e(this).sortable("instance");
                    i && !i.options.disabled && (n.sortables.push(i), i.refreshPositions(), i._trigger("activate", t, a))
                }))
            },
            stop: function (t, i, n) {
                var a = e.extend({}, i, {
                    item: n.element
                });
                n.cancelHelperRemoval = !1, e.each(n.sortables, (function () {
                    var e = this;
                    e.isOver ? (e.isOver = 0, n.cancelHelperRemoval = !0, e.cancelHelperRemoval = !1, e._storedCSS = {
                        position: e.placeholder.css("position"),
                        top: e.placeholder.css("top"),
                        left: e.placeholder.css("left")
                    }, e._mouseStop(t), e.options.helper = e.options._helper) : (e.cancelHelperRemoval = !0, e._trigger("deactivate", t, a))
                }))
            },
            drag: function (t, i, n) {
                e.each(n.sortables, (function () {
                    var a = !1,
                        s = this;
                    s.positionAbs = n.positionAbs, s.helperProportions = n.helperProportions, s.offset.click = n.offset.click, s._intersectsWith(s.containerCache) && (a = !0, e.each(n.sortables, (function () {
                        return this.positionAbs = n.positionAbs, this.helperProportions = n.helperProportions, this.offset.click = n.offset.click, this !== s && this._intersectsWith(this.containerCache) && e.contains(s.element[0], this.element[0]) && (a = !1), a
                    }))), a ? (s.isOver || (s.isOver = 1, n._parent = i.helper.parent(), s.currentItem = i.helper.appendTo(s.element).data("ui-sortable-item", !0), s.options._helper = s.options.helper, s.options.helper = function () {
                        return i.helper[0]
                    }, t.target = s.currentItem[0], s._mouseCapture(t, !0), s._mouseStart(t, !0, !0), s.offset.click.top = n.offset.click.top, s.offset.click.left = n.offset.click.left, s.offset.parent.left -= n.offset.parent.left - s.offset.parent.left, s.offset.parent.top -= n.offset.parent.top - s.offset.parent.top, n._trigger("toSortable", t), n.dropped = s.element, e.each(n.sortables, (function () {
                        this.refreshPositions()
                    })), n.currentItem = n.element, s.fromOutside = n), s.currentItem && (s._mouseDrag(t), i.position = s.position)) : s.isOver && (s.isOver = 0, s.cancelHelperRemoval = !0, s.options._revert = s.options.revert, s.options.revert = !1, s._trigger("out", t, s._uiHash(s)), s._mouseStop(t, !0), s.options.revert = s.options._revert, s.options.helper = s.options._helper, s.placeholder && s.placeholder.remove(), i.helper.appendTo(n._parent), n._refreshOffsets(t), i.position = n._generatePosition(t, !0), n._trigger("fromSortable", t), n.dropped = !1, e.each(n.sortables, (function () {
                        this.refreshPositions()
                    })))
                }))
            }
        }), e.ui.plugin.add("draggable", "cursor", {
            start: function (t, i, n) {
                var a = e("body"),
                    s = n.options;
                a.css("cursor") && (s._cursor = a.css("cursor")), a.css("cursor", s.cursor)
            },
            stop: function (t, i, n) {
                var a = n.options;
                a._cursor && e("body").css("cursor", a._cursor)
            }
        }), e.ui.plugin.add("draggable", "opacity", {
            start: function (t, i, n) {
                var a = e(i.helper),
                    s = n.options;
                a.css("opacity") && (s._opacity = a.css("opacity")), a.css("opacity", s.opacity)
            },
            stop: function (t, i, n) {
                var a = n.options;
                a._opacity && e(i.helper).css("opacity", a._opacity)
            }
        }), e.ui.plugin.add("draggable", "scroll", {
            start: function (e, t, i) {
                i.scrollParentNotHidden || (i.scrollParentNotHidden = i.helper.scrollParent(!1)), i.scrollParentNotHidden[0] !== i.document[0] && "HTML" !== i.scrollParentNotHidden[0].tagName && (i.overflowOffset = i.scrollParentNotHidden.offset())
            },
            drag: function (t, i, n) {
                var a = n.options,
                    s = !1,
                    o = n.scrollParentNotHidden[0],
                    r = n.document[0];
                o !== r && "HTML" !== o.tagName ? (a.axis && "x" === a.axis || (n.overflowOffset.top + o.offsetHeight - t.pageY < a.scrollSensitivity ? o.scrollTop = s = o.scrollTop + a.scrollSpeed : t.pageY - n.overflowOffset.top < a.scrollSensitivity && (o.scrollTop = s = o.scrollTop - a.scrollSpeed)), a.axis && "y" === a.axis || (n.overflowOffset.left + o.offsetWidth - t.pageX < a.scrollSensitivity ? o.scrollLeft = s = o.scrollLeft + a.scrollSpeed : t.pageX - n.overflowOffset.left < a.scrollSensitivity && (o.scrollLeft = s = o.scrollLeft - a.scrollSpeed))) : (a.axis && "x" === a.axis || (t.pageY - e(r).scrollTop() < a.scrollSensitivity ? s = e(r).scrollTop(e(r).scrollTop() - a.scrollSpeed) : e(window).height() - (t.pageY - e(r).scrollTop()) < a.scrollSensitivity && (s = e(r).scrollTop(e(r).scrollTop() + a.scrollSpeed))), a.axis && "y" === a.axis || (t.pageX - e(r).scrollLeft() < a.scrollSensitivity ? s = e(r).scrollLeft(e(r).scrollLeft() - a.scrollSpeed) : e(window).width() - (t.pageX - e(r).scrollLeft()) < a.scrollSensitivity && (s = e(r).scrollLeft(e(r).scrollLeft() + a.scrollSpeed)))), !1 !== s && e.ui.ddmanager && !a.dropBehaviour && e.ui.ddmanager.prepareOffsets(n, t)
            }
        }), e.ui.plugin.add("draggable", "snap", {
            start: function (t, i, n) {
                var a = n.options;
                n.snapElements = [], e(a.snap.constructor !== String ? a.snap.items || ":data(ui-draggable)" : a.snap).each((function () {
                    var t = e(this),
                        i = t.offset();
                    this !== n.element[0] && n.snapElements.push({
                        item: this,
                        width: t.outerWidth(),
                        height: t.outerHeight(),
                        top: i.top,
                        left: i.left
                    })
                }))
            },
            drag: function (t, i, n) {
                var a, s, o, r, l, c, d, p, u, h, f = n.options,
                    m = f.snapTolerance,
                    g = i.offset.left,
                    v = g + n.helperProportions.width,
                    b = i.offset.top,
                    y = b + n.helperProportions.height;
                for (u = n.snapElements.length - 1; u >= 0; u--) c = (l = n.snapElements[u].left - n.margins.left) + n.snapElements[u].width, p = (d = n.snapElements[u].top - n.margins.top) + n.snapElements[u].height, v < l - m || g > c + m || y < d - m || b > p + m || !e.contains(n.snapElements[u].item.ownerDocument, n.snapElements[u].item) ? (n.snapElements[u].snapping && n.options.snap.release && n.options.snap.release.call(n.element, t, e.extend(n._uiHash(), {
                    snapItem: n.snapElements[u].item
                })), n.snapElements[u].snapping = !1) : ("inner" !== f.snapMode && (a = Math.abs(d - y) <= m, s = Math.abs(p - b) <= m, o = Math.abs(l - v) <= m, r = Math.abs(c - g) <= m, a && (i.position.top = n._convertPositionTo("relative", {
                    top: d - n.helperProportions.height,
                    left: 0
                }).top), s && (i.position.top = n._convertPositionTo("relative", {
                    top: p,
                    left: 0
                }).top), o && (i.position.left = n._convertPositionTo("relative", {
                    top: 0,
                    left: l - n.helperProportions.width
                }).left), r && (i.position.left = n._convertPositionTo("relative", {
                    top: 0,
                    left: c
                }).left)), h = a || s || o || r, "outer" !== f.snapMode && (a = Math.abs(d - b) <= m, s = Math.abs(p - y) <= m, o = Math.abs(l - g) <= m, r = Math.abs(c - v) <= m, a && (i.position.top = n._convertPositionTo("relative", {
                    top: d,
                    left: 0
                }).top), s && (i.position.top = n._convertPositionTo("relative", {
                    top: p - n.helperProportions.height,
                    left: 0
                }).top), o && (i.position.left = n._convertPositionTo("relative", {
                    top: 0,
                    left: l
                }).left), r && (i.position.left = n._convertPositionTo("relative", {
                    top: 0,
                    left: c - n.helperProportions.width
                }).left)), !n.snapElements[u].snapping && (a || s || o || r || h) && n.options.snap.snap && n.options.snap.snap.call(n.element, t, e.extend(n._uiHash(), {
                    snapItem: n.snapElements[u].item
                })), n.snapElements[u].snapping = a || s || o || r || h)
            }
        }), e.ui.plugin.add("draggable", "stack", {
            start: function (t, i, n) {
                var a, s = n.options,
                    o = e.makeArray(e(s.stack)).sort((function (t, i) {
                        return (parseInt(e(t).css("zIndex"), 10) || 0) - (parseInt(e(i).css("zIndex"), 10) || 0)
                    }));
                o.length && (a = parseInt(e(o[0]).css("zIndex"), 10) || 0, e(o).each((function (t) {
                    e(this).css("zIndex", a + t)
                })), this.css("zIndex", a + o.length))
            }
        }), e.ui.plugin.add("draggable", "zIndex", {
            start: function (t, i, n) {
                var a = e(i.helper),
                    s = n.options;
                a.css("zIndex") && (s._zIndex = a.css("zIndex")), a.css("zIndex", s.zIndex)
            },
            stop: function (t, i, n) {
                var a = n.options;
                a._zIndex && e(i.helper).css("zIndex", a._zIndex)
            }
        });
        e.ui.draggable;
        /*!
         * jQuery UI Resizable 1.12.1
         * http://jqueryui.com
         *
         * Copyright jQuery Foundation and other contributors
         * Released under the MIT license.
         * http://jquery.org/license
         */
        e.widget("ui.resizable", e.ui.mouse, {
            version: "1.12.1",
            widgetEventPrefix: "resize",
            options: {
                alsoResize: !1,
                animate: !1,
                animateDuration: "slow",
                animateEasing: "swing",
                aspectRatio: !1,
                autoHide: !1,
                classes: {
                    "ui-resizable-se": "ui-icon ui-icon-gripsmall-diagonal-se"
                },
                containment: !1,
                ghost: !1,
                grid: !1,
                handles: "e,s,se",
                helper: !1,
                maxHeight: null,
                maxWidth: null,
                minHeight: 10,
                minWidth: 10,
                zIndex: 90,
                resize: null,
                start: null,
                stop: null
            },
            _num: function (e) {
                return parseFloat(e) || 0
            },
            _isNumber: function (e) {
                return !isNaN(parseFloat(e))
            },
            _hasScroll: function (t, i) {
                if ("hidden" === e(t).css("overflow")) return !1;
                var n, a = i && "left" === i ? "scrollLeft" : "scrollTop";
                return t[a] > 0 || (t[a] = 1, n = t[a] > 0, t[a] = 0, n)
            },
            _create: function () {
                var t, i = this.options,
                    n = this;
                this._addClass("ui-resizable"), e.extend(this, {
                    _aspectRatio: !!i.aspectRatio,
                    aspectRatio: i.aspectRatio,
                    originalElement: this.element,
                    _proportionallyResizeElements: [],
                    _helper: i.helper || i.ghost || i.animate ? i.helper || "ui-resizable-helper" : null
                }), this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i) && (this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({
                    position: this.element.css("position"),
                    width: this.element.outerWidth(),
                    height: this.element.outerHeight(),
                    top: this.element.css("top"),
                    left: this.element.css("left")
                })), this.element = this.element.parent().data("ui-resizable", this.element.resizable("instance")), this.elementIsWrapper = !0, t = {
                    marginTop: this.originalElement.css("marginTop"),
                    marginRight: this.originalElement.css("marginRight"),
                    marginBottom: this.originalElement.css("marginBottom"),
                    marginLeft: this.originalElement.css("marginLeft")
                }, this.element.css(t), this.originalElement.css("margin", 0), this.originalResizeStyle = this.originalElement.css("resize"), this.originalElement.css("resize", "none"), this._proportionallyResizeElements.push(this.originalElement.css({
                    position: "static",
                    zoom: 1,
                    display: "block"
                })), this.originalElement.css(t), this._proportionallyResize()), this._setupHandles(), i.autoHide && e(this.element).on("mouseenter", (function () {
                    i.disabled || (n._removeClass("ui-resizable-autohide"), n._handles.show())
                })).on("mouseleave", (function () {
                    i.disabled || n.resizing || (n._addClass("ui-resizable-autohide"), n._handles.hide())
                })), this._mouseInit()
            },
            _destroy: function () {
                this._mouseDestroy();
                var t, i = function (t) {
                    e(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()
                };
                return this.elementIsWrapper && (i(this.element), t = this.element, this.originalElement.css({
                    position: t.css("position"),
                    width: t.outerWidth(),
                    height: t.outerHeight(),
                    top: t.css("top"),
                    left: t.css("left")
                }).insertAfter(t), t.remove()), this.originalElement.css("resize", this.originalResizeStyle), i(this.originalElement), this
            },
            _setOption: function (e, t) {
                if (this._super(e, t), "handles" === e) this._removeHandles(), this._setupHandles()
            },
            _setupHandles: function () {
                var t, i, n, a, s, o = this.options,
                    r = this;
                if (this.handles = o.handles || (e(".ui-resizable-handle", this.element).length ? {
                    n: ".ui-resizable-n",
                    e: ".ui-resizable-e",
                    s: ".ui-resizable-s",
                    w: ".ui-resizable-w",
                    se: ".ui-resizable-se",
                    sw: ".ui-resizable-sw",
                    ne: ".ui-resizable-ne",
                    nw: ".ui-resizable-nw"
                } : "e,s,se"), this._handles = e(), this.handles.constructor === String)
                    for ("all" === this.handles && (this.handles = "n,e,s,w,se,sw,ne,nw"), n = this.handles.split(","), this.handles = {}, i = 0; i < n.length; i++) a = "ui-resizable-" + (t = e.trim(n[i])), s = e("<div>"), this._addClass(s, "ui-resizable-handle " + a), s.css({
                        zIndex: o.zIndex
                    }), this.handles[t] = ".ui-resizable-" + t, this.element.append(s);
                this._renderAxis = function (t) {
                    var i, n, a, s;
                    for (i in t = t || this.element, this.handles) this.handles[i].constructor === String ? this.handles[i] = this.element.children(this.handles[i]).first().show() : (this.handles[i].jquery || this.handles[i].nodeType) && (this.handles[i] = e(this.handles[i]), this._on(this.handles[i], {
                        mousedown: r._mouseDown
                    })), this.elementIsWrapper && this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i) && (n = e(this.handles[i], this.element), s = /sw|ne|nw|se|n|s/.test(i) ? n.outerHeight() : n.outerWidth(), a = ["padding", /ne|nw|n/.test(i) ? "Top" : /se|sw|s/.test(i) ? "Bottom" : /^e$/.test(i) ? "Right" : "Left"].join(""), t.css(a, s), this._proportionallyResize()), this._handles = this._handles.add(this.handles[i])
                }, this._renderAxis(this.element), this._handles = this._handles.add(this.element.find(".ui-resizable-handle")), this._handles.disableSelection(), this._handles.on("mouseover", (function () {
                    r.resizing || (this.className && (s = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)), r.axis = s && s[1] ? s[1] : "se")
                })), o.autoHide && (this._handles.hide(), this._addClass("ui-resizable-autohide"))
            },
            _removeHandles: function () {
                this._handles.remove()
            },
            _mouseCapture: function (t) {
                var i, n, a = !1;
                for (i in this.handles) ((n = e(this.handles[i])[0]) === t.target || e.contains(n, t.target)) && (a = !0);
                return !this.options.disabled && a
            },
            _mouseStart: function (t) {
                var i, n, a, s = this.options,
                    o = this.element;
                return this.resizing = !0, this._renderProxy(), i = this._num(this.helper.css("left")), n = this._num(this.helper.css("top")), s.containment && (i += e(s.containment).scrollLeft() || 0, n += e(s.containment).scrollTop() || 0), this.offset = this.helper.offset(), this.position = {
                    left: i,
                    top: n
                }, this.size = this._helper ? {
                    width: this.helper.width(),
                    height: this.helper.height()
                } : {
                    width: o.width(),
                    height: o.height()
                }, this.originalSize = this._helper ? {
                    width: o.outerWidth(),
                    height: o.outerHeight()
                } : {
                    width: o.width(),
                    height: o.height()
                }, this.sizeDiff = {
                    width: o.outerWidth() - o.width(),
                    height: o.outerHeight() - o.height()
                }, this.originalPosition = {
                    left: i,
                    top: n
                }, this.originalMousePosition = {
                    left: t.pageX,
                    top: t.pageY
                }, this.aspectRatio = "number" == typeof s.aspectRatio ? s.aspectRatio : this.originalSize.width / this.originalSize.height || 1, a = e(".ui-resizable-" + this.axis).css("cursor"), e("body").css("cursor", "auto" === a ? this.axis + "-resize" : a), this._addClass("ui-resizable-resizing"), this._propagate("start", t), !0
            },
            _mouseDrag: function (t) {
                var i, n, a = this.originalMousePosition,
                    s = this.axis,
                    o = t.pageX - a.left || 0,
                    r = t.pageY - a.top || 0,
                    l = this._change[s];
                return this._updatePrevProperties(), !!l && (i = l.apply(this, [t, o, r]), this._updateVirtualBoundaries(t.shiftKey), (this._aspectRatio || t.shiftKey) && (i = this._updateRatio(i, t)), i = this._respectSize(i, t), this._updateCache(i), this._propagate("resize", t), n = this._applyChanges(), !this._helper && this._proportionallyResizeElements.length && this._proportionallyResize(), e.isEmptyObject(n) || (this._updatePrevProperties(), this._trigger("resize", t, this.ui()), this._applyChanges()), !1)
            },
            _mouseStop: function (t) {
                this.resizing = !1;
                var i, n, a, s, o, r, l, c = this.options,
                    d = this;
                return this._helper && (a = (n = (i = this._proportionallyResizeElements).length && /textarea/i.test(i[0].nodeName)) && this._hasScroll(i[0], "left") ? 0 : d.sizeDiff.height, s = n ? 0 : d.sizeDiff.width, o = {
                    width: d.helper.width() - s,
                    height: d.helper.height() - a
                }, r = parseFloat(d.element.css("left")) + (d.position.left - d.originalPosition.left) || null, l = parseFloat(d.element.css("top")) + (d.position.top - d.originalPosition.top) || null, c.animate || this.element.css(e.extend(o, {
                    top: l,
                    left: r
                })), d.helper.height(d.size.height), d.helper.width(d.size.width), this._helper && !c.animate && this._proportionallyResize()), e("body").css("cursor", "auto"), this._removeClass("ui-resizable-resizing"), this._propagate("stop", t), this._helper && this.helper.remove(), !1
            },
            _updatePrevProperties: function () {
                this.prevPosition = {
                    top: this.position.top,
                    left: this.position.left
                }, this.prevSize = {
                    width: this.size.width,
                    height: this.size.height
                }
            },
            _applyChanges: function () {
                var e = {};
                return this.position.top !== this.prevPosition.top && (e.top = this.position.top + "px"), this.position.left !== this.prevPosition.left && (e.left = this.position.left + "px"), this.size.width !== this.prevSize.width && (e.width = this.size.width + "px"), this.size.height !== this.prevSize.height && (e.height = this.size.height + "px"), this.helper.css(e), e
            },
            _updateVirtualBoundaries: function (e) {
                var t, i, n, a, s, o = this.options;
                s = {
                    minWidth: this._isNumber(o.minWidth) ? o.minWidth : 0,
                    maxWidth: this._isNumber(o.maxWidth) ? o.maxWidth : 1 / 0,
                    minHeight: this._isNumber(o.minHeight) ? o.minHeight : 0,
                    maxHeight: this._isNumber(o.maxHeight) ? o.maxHeight : 1 / 0
                }, (this._aspectRatio || e) && (t = s.minHeight * this.aspectRatio, n = s.minWidth / this.aspectRatio, i = s.maxHeight * this.aspectRatio, a = s.maxWidth / this.aspectRatio, t > s.minWidth && (s.minWidth = t), n > s.minHeight && (s.minHeight = n), i < s.maxWidth && (s.maxWidth = i), a < s.maxHeight && (s.maxHeight = a)), this._vBoundaries = s
            },
            _updateCache: function (e) {
                this.offset = this.helper.offset(), this._isNumber(e.left) && (this.position.left = e.left), this._isNumber(e.top) && (this.position.top = e.top), this._isNumber(e.height) && (this.size.height = e.height), this._isNumber(e.width) && (this.size.width = e.width)
            },
            _updateRatio: function (e) {
                var t = this.position,
                    i = this.size,
                    n = this.axis;
                return this._isNumber(e.height) ? e.width = e.height * this.aspectRatio : this._isNumber(e.width) && (e.height = e.width / this.aspectRatio), "sw" === n && (e.left = t.left + (i.width - e.width), e.top = null), "nw" === n && (e.top = t.top + (i.height - e.height), e.left = t.left + (i.width - e.width)), e
            },
            _respectSize: function (e) {
                var t = this._vBoundaries,
                    i = this.axis,
                    n = this._isNumber(e.width) && t.maxWidth && t.maxWidth < e.width,
                    a = this._isNumber(e.height) && t.maxHeight && t.maxHeight < e.height,
                    s = this._isNumber(e.width) && t.minWidth && t.minWidth > e.width,
                    o = this._isNumber(e.height) && t.minHeight && t.minHeight > e.height,
                    r = this.originalPosition.left + this.originalSize.width,
                    l = this.originalPosition.top + this.originalSize.height,
                    c = /sw|nw|w/.test(i),
                    d = /nw|ne|n/.test(i);
                return s && (e.width = t.minWidth), o && (e.height = t.minHeight), n && (e.width = t.maxWidth), a && (e.height = t.maxHeight), s && c && (e.left = r - t.minWidth), n && c && (e.left = r - t.maxWidth), o && d && (e.top = l - t.minHeight), a && d && (e.top = l - t.maxHeight), e.width || e.height || e.left || !e.top ? e.width || e.height || e.top || !e.left || (e.left = null) : e.top = null, e
            },
            _getPaddingPlusBorderDimensions: function (e) {
                for (var t = 0, i = [], n = [e.css("borderTopWidth"), e.css("borderRightWidth"), e.css("borderBottomWidth"), e.css("borderLeftWidth")], a = [e.css("paddingTop"), e.css("paddingRight"), e.css("paddingBottom"), e.css("paddingLeft")]; t < 4; t++) i[t] = parseFloat(n[t]) || 0, i[t] += parseFloat(a[t]) || 0;
                return {
                    height: i[0] + i[2],
                    width: i[1] + i[3]
                }
            },
            _proportionallyResize: function () {
                if (this._proportionallyResizeElements.length)
                    for (var e, t = 0, i = this.helper || this.element; t < this._proportionallyResizeElements.length; t++) e = this._proportionallyResizeElements[t], this.outerDimensions || (this.outerDimensions = this._getPaddingPlusBorderDimensions(e)), e.css({
                        height: i.height() - this.outerDimensions.height || 0,
                        width: i.width() - this.outerDimensions.width || 0
                    })
            },
            _renderProxy: function () {
                var t = this.element,
                    i = this.options;
                this.elementOffset = t.offset(), this._helper ? (this.helper = this.helper || e("<div style='overflow:hidden;'></div>"), this._addClass(this.helper, this._helper), this.helper.css({
                    width: this.element.outerWidth(),
                    height: this.element.outerHeight(),
                    position: "absolute",
                    left: this.elementOffset.left + "px",
                    top: this.elementOffset.top + "px",
                    zIndex: ++i.zIndex
                }), this.helper.appendTo("body").disableSelection()) : this.helper = this.element
            },
            _change: {
                e: function (e, t) {
                    return {
                        width: this.originalSize.width + t
                    }
                },
                w: function (e, t) {
                    var i = this.originalSize;
                    return {
                        left: this.originalPosition.left + t,
                        width: i.width - t
                    }
                },
                n: function (e, t, i) {
                    var n = this.originalSize;
                    return {
                        top: this.originalPosition.top + i,
                        height: n.height - i
                    }
                },
                s: function (e, t, i) {
                    return {
                        height: this.originalSize.height + i
                    }
                },
                se: function (t, i, n) {
                    return e.extend(this._change.s.apply(this, arguments), this._change.e.apply(this, [t, i, n]))
                },
                sw: function (t, i, n) {
                    return e.extend(this._change.s.apply(this, arguments), this._change.w.apply(this, [t, i, n]))
                },
                ne: function (t, i, n) {
                    return e.extend(this._change.n.apply(this, arguments), this._change.e.apply(this, [t, i, n]))
                },
                nw: function (t, i, n) {
                    return e.extend(this._change.n.apply(this, arguments), this._change.w.apply(this, [t, i, n]))
                }
            },
            _propagate: function (t, i) {
                e.ui.plugin.call(this, t, [i, this.ui()]), "resize" !== t && this._trigger(t, i, this.ui())
            },
            plugins: {},
            ui: function () {
                return {
                    originalElement: this.originalElement,
                    element: this.element,
                    helper: this.helper,
                    position: this.position,
                    size: this.size,
                    originalSize: this.originalSize,
                    originalPosition: this.originalPosition
                }
            }
        }), e.ui.plugin.add("resizable", "animate", {
            stop: function (t) {
                var i = e(this).resizable("instance"),
                    n = i.options,
                    a = i._proportionallyResizeElements,
                    s = a.length && /textarea/i.test(a[0].nodeName),
                    o = s && i._hasScroll(a[0], "left") ? 0 : i.sizeDiff.height,
                    r = s ? 0 : i.sizeDiff.width,
                    l = {
                        width: i.size.width - r,
                        height: i.size.height - o
                    },
                    c = parseFloat(i.element.css("left")) + (i.position.left - i.originalPosition.left) || null,
                    d = parseFloat(i.element.css("top")) + (i.position.top - i.originalPosition.top) || null;
                i.element.animate(e.extend(l, d && c ? {
                    top: d,
                    left: c
                } : {}), {
                    duration: n.animateDuration,
                    easing: n.animateEasing,
                    step: function () {
                        var n = {
                            width: parseFloat(i.element.css("width")),
                            height: parseFloat(i.element.css("height")),
                            top: parseFloat(i.element.css("top")),
                            left: parseFloat(i.element.css("left"))
                        };
                        a && a.length && e(a[0]).css({
                            width: n.width,
                            height: n.height
                        }), i._updateCache(n), i._propagate("resize", t)
                    }
                })
            }
        }), e.ui.plugin.add("resizable", "containment", {
            start: function () {
                var t, i, n, a, s, o, r, l = e(this).resizable("instance"),
                    c = l.options,
                    d = l.element,
                    p = c.containment,
                    u = p instanceof e ? p.get(0) : /parent/.test(p) ? d.parent().get(0) : p;
                u && (l.containerElement = e(u), /document/.test(p) || p === document ? (l.containerOffset = {
                    left: 0,
                    top: 0
                }, l.containerPosition = {
                    left: 0,
                    top: 0
                }, l.parentData = {
                    element: e(document),
                    left: 0,
                    top: 0,
                    width: e(document).width(),
                    height: e(document).height() || document.body.parentNode.scrollHeight
                }) : (t = e(u), i = [], e(["Top", "Right", "Left", "Bottom"]).each((function (e, n) {
                    i[e] = l._num(t.css("padding" + n))
                })), l.containerOffset = t.offset(), l.containerPosition = t.position(), l.containerSize = {
                    height: t.innerHeight() - i[3],
                    width: t.innerWidth() - i[1]
                }, n = l.containerOffset, a = l.containerSize.height, s = l.containerSize.width, o = l._hasScroll(u, "left") ? u.scrollWidth : s, r = l._hasScroll(u) ? u.scrollHeight : a, l.parentData = {
                    element: u,
                    left: n.left,
                    top: n.top,
                    width: o,
                    height: r
                }))
            },
            resize: function (t) {
                var i, n, a, s, o = e(this).resizable("instance"),
                    r = o.options,
                    l = o.containerOffset,
                    c = o.position,
                    d = o._aspectRatio || t.shiftKey,
                    p = {
                        top: 0,
                        left: 0
                    },
                    u = o.containerElement,
                    h = !0;
                u[0] !== document && /static/.test(u.css("position")) && (p = l), c.left < (o._helper ? l.left : 0) && (o.size.width = o.size.width + (o._helper ? o.position.left - l.left : o.position.left - p.left), d && (o.size.height = o.size.width / o.aspectRatio, h = !1), o.position.left = r.helper ? l.left : 0), c.top < (o._helper ? l.top : 0) && (o.size.height = o.size.height + (o._helper ? o.position.top - l.top : o.position.top), d && (o.size.width = o.size.height * o.aspectRatio, h = !1), o.position.top = o._helper ? l.top : 0), a = o.containerElement.get(0) === o.element.parent().get(0), s = /relative|absolute/.test(o.containerElement.css("position")), a && s ? (o.offset.left = o.parentData.left + o.position.left, o.offset.top = o.parentData.top + o.position.top) : (o.offset.left = o.element.offset().left, o.offset.top = o.element.offset().top), i = Math.abs(o.sizeDiff.width + (o._helper ? o.offset.left - p.left : o.offset.left - l.left)), n = Math.abs(o.sizeDiff.height + (o._helper ? o.offset.top - p.top : o.offset.top - l.top)), i + o.size.width >= o.parentData.width && (o.size.width = o.parentData.width - i, d && (o.size.height = o.size.width / o.aspectRatio, h = !1)), n + o.size.height >= o.parentData.height && (o.size.height = o.parentData.height - n, d && (o.size.width = o.size.height * o.aspectRatio, h = !1)), h || (o.position.left = o.prevPosition.left, o.position.top = o.prevPosition.top, o.size.width = o.prevSize.width, o.size.height = o.prevSize.height)
            },
            stop: function () {
                var t = e(this).resizable("instance"),
                    i = t.options,
                    n = t.containerOffset,
                    a = t.containerPosition,
                    s = t.containerElement,
                    o = e(t.helper),
                    r = o.offset(),
                    l = o.outerWidth() - t.sizeDiff.width,
                    c = o.outerHeight() - t.sizeDiff.height;
                t._helper && !i.animate && /relative/.test(s.css("position")) && e(this).css({
                    left: r.left - a.left - n.left,
                    width: l,
                    height: c
                }), t._helper && !i.animate && /static/.test(s.css("position")) && e(this).css({
                    left: r.left - a.left - n.left,
                    width: l,
                    height: c
                })
            }
        }), e.ui.plugin.add("resizable", "alsoResize", {
            start: function () {
                var t = e(this).resizable("instance").options;
                e(t.alsoResize).each((function () {
                    var t = e(this);
                    t.data("ui-resizable-alsoresize", {
                        width: parseFloat(t.width()),
                        height: parseFloat(t.height()),
                        left: parseFloat(t.css("left")),
                        top: parseFloat(t.css("top"))
                    })
                }))
            },
            resize: function (t, i) {
                var n = e(this).resizable("instance"),
                    a = n.options,
                    s = n.originalSize,
                    o = n.originalPosition,
                    r = {
                        height: n.size.height - s.height || 0,
                        width: n.size.width - s.width || 0,
                        top: n.position.top - o.top || 0,
                        left: n.position.left - o.left || 0
                    };
                e(a.alsoResize).each((function () {
                    var t = e(this),
                        n = e(this).data("ui-resizable-alsoresize"),
                        a = {},
                        s = t.parents(i.originalElement[0]).length ? ["width", "height"] : ["width", "height", "top", "left"];
                    e.each(s, (function (e, t) {
                        var i = (n[t] || 0) + (r[t] || 0);
                        i && i >= 0 && (a[t] = i || null)
                    })), t.css(a)
                }))
            },
            stop: function () {
                e(this).removeData("ui-resizable-alsoresize")
            }
        }), e.ui.plugin.add("resizable", "ghost", {
            start: function () {
                var t = e(this).resizable("instance"),
                    i = t.size;
                t.ghost = t.originalElement.clone(), t.ghost.css({
                    opacity: .25,
                    display: "block",
                    position: "relative",
                    height: i.height,
                    width: i.width,
                    margin: 0,
                    left: 0,
                    top: 0
                }), t._addClass(t.ghost, "ui-resizable-ghost"), !1 !== e.uiBackCompat && "string" == typeof t.options.ghost && t.ghost.addClass(this.options.ghost), t.ghost.appendTo(t.helper)
            },
            resize: function () {
                var t = e(this).resizable("instance");
                t.ghost && t.ghost.css({
                    position: "relative",
                    height: t.size.height,
                    width: t.size.width
                })
            },
            stop: function () {
                var t = e(this).resizable("instance");
                t.ghost && t.helper && t.helper.get(0).removeChild(t.ghost.get(0))
            }
        }), e.ui.plugin.add("resizable", "grid", {
            resize: function () {
                var t, i = e(this).resizable("instance"),
                    n = i.options,
                    a = i.size,
                    s = i.originalSize,
                    o = i.originalPosition,
                    r = i.axis,
                    l = "number" == typeof n.grid ? [n.grid, n.grid] : n.grid,
                    c = l[0] || 1,
                    d = l[1] || 1,
                    p = Math.round((a.width - s.width) / c) * c,
                    u = Math.round((a.height - s.height) / d) * d,
                    h = s.width + p,
                    f = s.height + u,
                    m = n.maxWidth && n.maxWidth < h,
                    g = n.maxHeight && n.maxHeight < f,
                    v = n.minWidth && n.minWidth > h,
                    b = n.minHeight && n.minHeight > f;
                n.grid = l, v && (h += c), b && (f += d), m && (h -= c), g && (f -= d), /^(se|s|e)$/.test(r) ? (i.size.width = h, i.size.height = f) : /^(ne)$/.test(r) ? (i.size.width = h, i.size.height = f, i.position.top = o.top - u) : /^(sw)$/.test(r) ? (i.size.width = h, i.size.height = f, i.position.left = o.left - p) : ((f - d <= 0 || h - c <= 0) && (t = i._getPaddingPlusBorderDimensions(this)), f - d > 0 ? (i.size.height = f, i.position.top = o.top - u) : (f = d - t.height, i.size.height = f, i.position.top = o.top + s.height - f), h - c > 0 ? (i.size.width = h, i.position.left = o.left - p) : (h = c - t.width, i.size.width = h, i.position.left = o.left + s.width - h))
            }
        });
        e.ui.resizable;
        /*!
         * jQuery UI Dialog 1.12.1
         * http://jqueryui.com
         *
         * Copyright jQuery Foundation and other contributors
         * Released under the MIT license.
         * http://jquery.org/license
         */
        e.widget("ui.dialog", {
            version: "1.12.1",
            options: {
                appendTo: "body",
                autoOpen: !0,
                buttons: [],
                classes: {
                    "ui-dialog": "ui-corner-all",
                    "ui-dialog-titlebar": "ui-corner-all"
                },
                closeOnEscape: !0,
                closeText: "Close",
                draggable: !0,
                hide: null,
                height: "auto",
                maxHeight: null,
                maxWidth: null,
                minHeight: 150,
                minWidth: 150,
                modal: !1,
                position: {
                    my: "center",
                    at: "center",
                    of: window,
                    collision: "fit",
                    using: function (t) {
                        var i = e(this).css(t).offset().top;
                        i < 0 && e(this).css("top", t.top - i)
                    }
                },
                resizable: !0,
                show: null,
                title: null,
                width: 300,
                beforeClose: null,
                close: null,
                drag: null,
                dragStart: null,
                dragStop: null,
                focus: null,
                open: null,
                resize: null,
                resizeStart: null,
                resizeStop: null
            },
            sizeRelatedOptions: {
                buttons: !0,
                height: !0,
                maxHeight: !0,
                maxWidth: !0,
                minHeight: !0,
                minWidth: !0,
                width: !0
            },
            resizableRelatedOptions: {
                maxHeight: !0,
                maxWidth: !0,
                minHeight: !0,
                minWidth: !0
            },
            _create: function () {
                this.originalCss = {
                    display: this.element[0].style.display,
                    width: this.element[0].style.width,
                    minHeight: this.element[0].style.minHeight,
                    maxHeight: this.element[0].style.maxHeight,
                    height: this.element[0].style.height
                }, this.originalPosition = {
                    parent: this.element.parent(),
                    index: this.element.parent().children().index(this.element)
                }, this.originalTitle = this.element.attr("title"), null == this.options.title && null != this.originalTitle && (this.options.title = this.originalTitle), this.options.disabled && (this.options.disabled = !1), this._createWrapper(), this.element.show().removeAttr("title").appendTo(this.uiDialog), this._addClass("ui-dialog-content", "ui-widget-content"), this._createTitlebar(), this._createButtonPane(), this.options.draggable && e.fn.draggable && this._makeDraggable(), this.options.resizable && e.fn.resizable && this._makeResizable(), this._isOpen = !1, this._trackFocus()
            },
            _init: function () {
                this.options.autoOpen && this.open()
            },
            _appendTo: function () {
                var t = this.options.appendTo;
                return t && (t.jquery || t.nodeType) ? e(t) : this.document.find(t || "body").eq(0)
            },
            _destroy: function () {
                var e, t = this.originalPosition;
                this._untrackInstance(), this._destroyOverlay(), this.element.removeUniqueId().css(this.originalCss).detach(), this.uiDialog.remove(), this.originalTitle && this.element.attr("title", this.originalTitle), (e = t.parent.children().eq(t.index)).length && e[0] !== this.element[0] ? e.before(this.element) : t.parent.append(this.element)
            },
            widget: function () {
                return this.uiDialog
            },
            disable: e.noop,
            enable: e.noop,
            close: function (t) {
                var i = this;
                this._isOpen && !1 !== this._trigger("beforeClose", t) && (this._isOpen = !1, this._focusedElement = null, this._destroyOverlay(), this._untrackInstance(), this.opener.filter(":focusable").trigger("focus").length || e.ui.safeBlur(e.ui.safeActiveElement(this.document[0])), this._hide(this.uiDialog, this.options.hide, (function () {
                    i._trigger("close", t)
                })))
            },
            isOpen: function () {
                return this._isOpen
            },
            moveToTop: function () {
                this._moveToTop()
            },
            _moveToTop: function (t, i) {
                var n = !1,
                    a = this.uiDialog.siblings(".ui-front:visible").map((function () {
                        return +e(this).css("z-index")
                    })).get(),
                    s = Math.max.apply(null, a);
                return s >= +this.uiDialog.css("z-index") && (this.uiDialog.css("z-index", s + 1), n = !0), n && !i && this._trigger("focus", t), n
            },
            open: function () {
                var t = this;
                this._isOpen ? this._moveToTop() && this._focusTabbable() : (this._isOpen = !0, this.opener = e(e.ui.safeActiveElement(this.document[0])), this._size(), this._position(), this._createOverlay(), this._moveToTop(null, !0), this.overlay && this.overlay.css("z-index", this.uiDialog.css("z-index") - 1), this._show(this.uiDialog, this.options.show, (function () {
                    t._focusTabbable(), t._trigger("focus")
                })), this._makeFocusTarget(), this._trigger("open"))
            },
            _focusTabbable: function () {
                var e = this._focusedElement;
                e || (e = this.element.find("[autofocus]")), e.length || (e = this.element.find(":tabbable")), e.length || (e = this.uiDialogButtonPane.find(":tabbable")), e.length || (e = this.uiDialogTitlebarClose.filter(":tabbable")), e.length || (e = this.uiDialog), e.eq(0).trigger("focus")
            },
            _keepFocus: function (t) {
                function i() {
                    var t = e.ui.safeActiveElement(this.document[0]);
                    this.uiDialog[0] === t || e.contains(this.uiDialog[0], t) || this._focusTabbable()
                }
                t.preventDefault(), i.call(this), this._delay(i)
            },
            _createWrapper: function () {
                this.uiDialog = e("<div>").hide().attr({
                    tabIndex: -1,
                    role: "dialog"
                }).appendTo(this._appendTo()), this._addClass(this.uiDialog, "ui-dialog", "ui-widget ui-widget-content ui-front"), this._on(this.uiDialog, {
                    keydown: function (t) {
                        if (this.options.closeOnEscape && !t.isDefaultPrevented() && t.keyCode && t.keyCode === e.ui.keyCode.ESCAPE) return t.preventDefault(), void this.close(t);
                        if (t.keyCode === e.ui.keyCode.TAB && !t.isDefaultPrevented()) {
                            var i = this.uiDialog.find(":tabbable"),
                                n = i.filter(":first"),
                                a = i.filter(":last");
                            t.target !== a[0] && t.target !== this.uiDialog[0] || t.shiftKey ? t.target !== n[0] && t.target !== this.uiDialog[0] || !t.shiftKey || (this._delay((function () {
                                a.trigger("focus")
                            })), t.preventDefault()) : (this._delay((function () {
                                n.trigger("focus")
                            })), t.preventDefault())
                        }
                    },
                    mousedown: function (e) {
                        this._moveToTop(e) && this._focusTabbable()
                    }
                }), this.element.find("[aria-describedby]").length || this.uiDialog.attr({
                    "aria-describedby": this.element.uniqueId().attr("id")
                })
            },
            _createTitlebar: function () {
                var t;
                this.uiDialogTitlebar = e("<div>"), this._addClass(this.uiDialogTitlebar, "ui-dialog-titlebar", "ui-widget-header ui-helper-clearfix"), this._on(this.uiDialogTitlebar, {
                    mousedown: function (t) {
                        e(t.target).closest(".ui-dialog-titlebar-close") || this.uiDialog.trigger("focus")
                    }
                }), this.uiDialogTitlebarClose = e("<button type='button'></button>").button({
                    label: e("<a>").text(this.options.closeText).html(),
                    icon: "ui-icon-closethick",
                    showLabel: !1
                }).appendTo(this.uiDialogTitlebar), this._addClass(this.uiDialogTitlebarClose, "ui-dialog-titlebar-close"), this._on(this.uiDialogTitlebarClose, {
                    click: function (e) {
                        e.preventDefault(), this.close(e)
                    }
                }), t = e("<span>").uniqueId().prependTo(this.uiDialogTitlebar), this._addClass(t, "ui-dialog-title"), this._title(t), this.uiDialogTitlebar.prependTo(this.uiDialog), this.uiDialog.attr({
                    "aria-labelledby": t.attr("id")
                })
            },
            _title: function (e) {
                this.options.title ? e.text(this.options.title) : e.html("&#160;")
            },
            _createButtonPane: function () {
                this.uiDialogButtonPane = e("<div>"), this._addClass(this.uiDialogButtonPane, "ui-dialog-buttonpane", "ui-widget-content ui-helper-clearfix"), this.uiButtonSet = e("<div>").appendTo(this.uiDialogButtonPane), this._addClass(this.uiButtonSet, "ui-dialog-buttonset"), this._createButtons()
            },
            _createButtons: function () {
                var t = this,
                    i = this.options.buttons;
                this.uiDialogButtonPane.remove(), this.uiButtonSet.empty(), e.isEmptyObject(i) || e.isArray(i) && !i.length ? this._removeClass(this.uiDialog, "ui-dialog-buttons") : (e.each(i, (function (i, n) {
                    var a, s;
                    n = e.isFunction(n) ? {
                        click: n,
                        text: i
                    } : n, n = e.extend({
                        type: "button"
                    }, n), a = n.click, s = {
                        icon: n.icon,
                        iconPosition: n.iconPosition,
                        showLabel: n.showLabel,
                        icons: n.icons,
                        text: n.text
                    }, delete n.click, delete n.icon, delete n.iconPosition, delete n.showLabel, delete n.icons, "boolean" == typeof n.text && delete n.text, e("<button></button>", n).button(s).appendTo(t.uiButtonSet).on("click", (function () {
                        a.apply(t.element[0], arguments)
                    }))
                })), this._addClass(this.uiDialog, "ui-dialog-buttons"), this.uiDialogButtonPane.appendTo(this.uiDialog))
            },
            _makeDraggable: function () {
                var t = this,
                    i = this.options;

                function n(e) {
                    return {
                        position: e.position,
                        offset: e.offset
                    }
                }
                this.uiDialog.draggable({
                    cancel: ".ui-dialog-content, .ui-dialog-titlebar-close",
                    handle: ".ui-dialog-titlebar",
                    containment: "document",
                    start: function (i, a) {
                        t._addClass(e(this), "ui-dialog-dragging"), t._blockFrames(), t._trigger("dragStart", i, n(a))
                    },
                    drag: function (e, i) {
                        t._trigger("drag", e, n(i))
                    },
                    stop: function (a, s) {
                        var o = s.offset.left - t.document.scrollLeft(),
                            r = s.offset.top - t.document.scrollTop();
                        i.position = {
                            my: "left top",
                            at: "left" + (o >= 0 ? "+" : "") + o + " top" + (r >= 0 ? "+" : "") + r,
                            of: t.window
                        }, t._removeClass(e(this), "ui-dialog-dragging"), t._unblockFrames(), t._trigger("dragStop", a, n(s))
                    }
                })
            },
            _makeResizable: function () {
                var t = this,
                    i = this.options,
                    n = i.resizable,
                    a = this.uiDialog.css("position"),
                    s = "string" == typeof n ? n : "n,e,s,w,se,sw,ne,nw";

                function o(e) {
                    return {
                        originalPosition: e.originalPosition,
                        originalSize: e.originalSize,
                        position: e.position,
                        size: e.size
                    }
                }
                this.uiDialog.resizable({
                    cancel: ".ui-dialog-content",
                    containment: "document",
                    alsoResize: this.element,
                    maxWidth: i.maxWidth,
                    maxHeight: i.maxHeight,
                    minWidth: i.minWidth,
                    minHeight: this._minHeight(),
                    handles: s,
                    start: function (i, n) {
                        t._addClass(e(this), "ui-dialog-resizing"), t._blockFrames(), t._trigger("resizeStart", i, o(n))
                    },
                    resize: function (e, i) {
                        t._trigger("resize", e, o(i))
                    },
                    stop: function (n, a) {
                        var s = t.uiDialog.offset(),
                            r = s.left - t.document.scrollLeft(),
                            l = s.top - t.document.scrollTop();
                        i.height = t.uiDialog.height(), i.width = t.uiDialog.width(), i.position = {
                            my: "left top",
                            at: "left" + (r >= 0 ? "+" : "") + r + " top" + (l >= 0 ? "+" : "") + l,
                            of: t.window
                        }, t._removeClass(e(this), "ui-dialog-resizing"), t._unblockFrames(), t._trigger("resizeStop", n, o(a))
                    }
                }).css("position", a)
            },
            _trackFocus: function () {
                this._on(this.widget(), {
                    focusin: function (t) {
                        this._makeFocusTarget(), this._focusedElement = e(t.target)
                    }
                })
            },
            _makeFocusTarget: function () {
                this._untrackInstance(), this._trackingInstances().unshift(this)
            },
            _untrackInstance: function () {
                var t = this._trackingInstances(),
                    i = e.inArray(this, t); - 1 !== i && t.splice(i, 1)
            },
            _trackingInstances: function () {
                var e = this.document.data("ui-dialog-instances");
                return e || (e = [], this.document.data("ui-dialog-instances", e)), e
            },
            _minHeight: function () {
                var e = this.options;
                return "auto" === e.height ? e.minHeight : Math.min(e.minHeight, e.height)
            },
            _position: function () {
                var e = this.uiDialog.is(":visible");
                e || this.uiDialog.show(), this.uiDialog.position(this.options.position), e || this.uiDialog.hide()
            },
            _setOptions: function (t) {
                var i = this,
                    n = !1,
                    a = {};
                e.each(t, (function (e, t) {
                    i._setOption(e, t), e in i.sizeRelatedOptions && (n = !0), e in i.resizableRelatedOptions && (a[e] = t)
                })), n && (this._size(), this._position()), this.uiDialog.is(":data(ui-resizable)") && this.uiDialog.resizable("option", a)
            },
            _setOption: function (t, i) {
                var n, a, s = this.uiDialog;
                "disabled" !== t && (this._super(t, i), "appendTo" === t && this.uiDialog.appendTo(this._appendTo()), "buttons" === t && this._createButtons(), "closeText" === t && this.uiDialogTitlebarClose.button({
                    label: e("<a>").text("" + this.options.closeText).html()
                }), "draggable" === t && ((n = s.is(":data(ui-draggable)")) && !i && s.draggable("destroy"), !n && i && this._makeDraggable()), "position" === t && this._position(), "resizable" === t && ((a = s.is(":data(ui-resizable)")) && !i && s.resizable("destroy"), a && "string" == typeof i && s.resizable("option", "handles", i), a || !1 === i || this._makeResizable()), "title" === t && this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))
            },
            _size: function () {
                var e, t, i, n = this.options;
                this.element.show().css({
                    width: "auto",
                    minHeight: 0,
                    maxHeight: "none",
                    height: 0
                }), n.minWidth > n.width && (n.width = n.minWidth), e = this.uiDialog.css({
                    height: "auto",
                    width: n.width
                }).outerHeight(), t = Math.max(0, n.minHeight - e), i = "number" == typeof n.maxHeight ? Math.max(0, n.maxHeight - e) : "none", "auto" === n.height ? this.element.css({
                    minHeight: t,
                    maxHeight: i,
                    height: "auto"
                }) : this.element.height(Math.max(0, n.height - e)), this.uiDialog.is(":data(ui-resizable)") && this.uiDialog.resizable("option", "minHeight", this._minHeight())
            },
            _blockFrames: function () {
                this.iframeBlocks = this.document.find("iframe").map((function () {
                    var t = e(this);
                    return e("<div>").css({
                        position: "absolute",
                        width: t.outerWidth(),
                        height: t.outerHeight()
                    }).appendTo(t.parent()).offset(t.offset())[0]
                }))
            },
            _unblockFrames: function () {
                this.iframeBlocks && (this.iframeBlocks.remove(), delete this.iframeBlocks)
            },
            _allowInteraction: function (t) {
                return !!e(t.target).closest(".ui-dialog").length || !!e(t.target).closest(".ui-datepicker").length
            },
            _createOverlay: function () {
                if (this.options.modal) {
                    var t = !0;
                    this._delay((function () {
                        t = !1
                    })), this.document.data("ui-dialog-overlays") || this._on(this.document, {
                        focusin: function (e) {
                            t || this._allowInteraction(e) || (e.preventDefault(), this._trackingInstances()[0]._focusTabbable())
                        }
                    }), this.overlay = e("<div>").appendTo(this._appendTo()), this._addClass(this.overlay, null, "ui-widget-overlay ui-front"), this._on(this.overlay, {
                        mousedown: "_keepFocus"
                    }), this.document.data("ui-dialog-overlays", (this.document.data("ui-dialog-overlays") || 0) + 1)
                }
            },
            _destroyOverlay: function () {
                if (this.options.modal && this.overlay) {
                    var e = this.document.data("ui-dialog-overlays") - 1;
                    e ? this.document.data("ui-dialog-overlays", e) : (this._off(this.document, "focusin"), this.document.removeData("ui-dialog-overlays")), this.overlay.remove(), this.overlay = null
                }
            }
        }), !1 !== e.uiBackCompat && e.widget("ui.dialog", e.ui.dialog, {
            options: {
                dialogClass: ""
            },
            _createWrapper: function () {
                this._super(), this.uiDialog.addClass(this.options.dialogClass)
            },
            _setOption: function (e, t) {
                "dialogClass" === e && this.uiDialog.removeClass(this.options.dialogClass).addClass(t), this._superApply(arguments)
            }
        });
        e.ui.dialog;
        /*!
         * jQuery UI Droppable 1.12.1
         * http://jqueryui.com
         *
         * Copyright jQuery Foundation and other contributors
         * Released under the MIT license.
         * http://jquery.org/license
         */
        e.widget("ui.droppable", {
            version: "1.12.1",
            widgetEventPrefix: "drop",
            options: {
                accept: "*",
                addClasses: !0,
                greedy: !1,
                scope: "default",
                tolerance: "intersect",
                activate: null,
                deactivate: null,
                drop: null,
                out: null,
                over: null
            },
            _create: function () {
                var t, i = this.options,
                    n = i.accept;
                this.isover = !1, this.isout = !0, this.accept = e.isFunction(n) ? n : function (e) {
                    return e.is(n)
                }, this.proportions = function () {
                    if (!arguments.length) return t || (t = {
                        width: this.element[0].offsetWidth,
                        height: this.element[0].offsetHeight
                    });
                    t = arguments[0]
                }, this._addToManager(i.scope), i.addClasses && this._addClass("ui-droppable")
            },
            _addToManager: function (t) {
                e.ui.ddmanager.droppables[t] = e.ui.ddmanager.droppables[t] || [], e.ui.ddmanager.droppables[t].push(this)
            },
            _splice: function (e) {
                for (var t = 0; t < e.length; t++) e[t] === this && e.splice(t, 1)
            },
            _destroy: function () {
                var t = e.ui.ddmanager.droppables[this.options.scope];
                this._splice(t)
            },
            _setOption: function (t, i) {
                if ("accept" === t) this.accept = e.isFunction(i) ? i : function (e) {
                    return e.is(i)
                };
                else if ("scope" === t) {
                    var n = e.ui.ddmanager.droppables[this.options.scope];
                    this._splice(n), this._addToManager(i)
                }
                this._super(t, i)
            },
            _activate: function (t) {
                var i = e.ui.ddmanager.current;
                this._addActiveClass(), i && this._trigger("activate", t, this.ui(i))
            },
            _deactivate: function (t) {
                var i = e.ui.ddmanager.current;
                this._removeActiveClass(), i && this._trigger("deactivate", t, this.ui(i))
            },
            _over: function (t) {
                var i = e.ui.ddmanager.current;
                i && (i.currentItem || i.element)[0] !== this.element[0] && this.accept.call(this.element[0], i.currentItem || i.element) && (this._addHoverClass(), this._trigger("over", t, this.ui(i)))
            },
            _out: function (t) {
                var i = e.ui.ddmanager.current;
                i && (i.currentItem || i.element)[0] !== this.element[0] && this.accept.call(this.element[0], i.currentItem || i.element) && (this._removeHoverClass(), this._trigger("out", t, this.ui(i)))
            },
            _drop: function (t, i) {
                var n = i || e.ui.ddmanager.current,
                    a = !1;
                return !(!n || (n.currentItem || n.element)[0] === this.element[0]) && (this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each((function () {
                    var i = e(this).droppable("instance");
                    if (i.options.greedy && !i.options.disabled && i.options.scope === n.options.scope && i.accept.call(i.element[0], n.currentItem || n.element) && y(n, e.extend(i, {
                        offset: i.element.offset()
                    }), i.options.tolerance, t)) return a = !0, !1
                })), !a && (!!this.accept.call(this.element[0], n.currentItem || n.element) && (this._removeActiveClass(), this._removeHoverClass(), this._trigger("drop", t, this.ui(n)), this.element)))
            },
            ui: function (e) {
                return {
                    draggable: e.currentItem || e.element,
                    helper: e.helper,
                    position: e.position,
                    offset: e.positionAbs
                }
            },
            _addHoverClass: function () {
                this._addClass("ui-droppable-hover")
            },
            _removeHoverClass: function () {
                this._removeClass("ui-droppable-hover")
            },
            _addActiveClass: function () {
                this._addClass("ui-droppable-active")
            },
            _removeActiveClass: function () {
                this._removeClass("ui-droppable-active")
            }
        });
        var y = e.ui.intersect = function () {
            function e(e, t, i) {
                return e >= t && e < t + i
            }
            return function (t, i, n, a) {
                if (!i.offset) return !1;
                var s = (t.positionAbs || t.position.absolute).left + t.margins.left,
                    o = (t.positionAbs || t.position.absolute).top + t.margins.top,
                    r = s + t.helperProportions.width,
                    l = o + t.helperProportions.height,
                    c = i.offset.left,
                    d = i.offset.top,
                    p = c + i.proportions().width,
                    u = d + i.proportions().height;
                switch (n) {
                    case "fit":
                        return c <= s && r <= p && d <= o && l <= u;
                    case "intersect":
                        return c < s + t.helperProportions.width / 2 && r - t.helperProportions.width / 2 < p && d < o + t.helperProportions.height / 2 && l - t.helperProportions.height / 2 < u;
                    case "pointer":
                        return e(a.pageY, d, i.proportions().height) && e(a.pageX, c, i.proportions().width);
                    case "touch":
                        return (o >= d && o <= u || l >= d && l <= u || o < d && l > u) && (s >= c && s <= p || r >= c && r <= p || s < c && r > p);
                    default:
                        return !1
                }
            }
        }();
        e.ui.ddmanager = {
            current: null,
            droppables: {
                default: []
            },
            prepareOffsets: function (t, i) {
                var n, a, s = e.ui.ddmanager.droppables[t.options.scope] || [],
                    o = i ? i.type : null,
                    r = (t.currentItem || t.element).find(":data(ui-droppable)").addBack();
                e: for (n = 0; n < s.length; n++)
                    if (!(s[n].options.disabled || t && !s[n].accept.call(s[n].element[0], t.currentItem || t.element))) {
                        for (a = 0; a < r.length; a++)
                            if (r[a] === s[n].element[0]) {
                                s[n].proportions().height = 0;
                                continue e
                            } s[n].visible = "none" !== s[n].element.css("display"), s[n].visible && ("mousedown" === o && s[n]._activate.call(s[n], i), s[n].offset = s[n].element.offset(), s[n].proportions({
                                width: s[n].element[0].offsetWidth,
                                height: s[n].element[0].offsetHeight
                            }))
                    }
            },
            drop: function (t, i) {
                var n = !1;
                return e.each((e.ui.ddmanager.droppables[t.options.scope] || []).slice(), (function () {
                    this.options && (!this.options.disabled && this.visible && y(t, this, this.options.tolerance, i) && (n = this._drop.call(this, i) || n), !this.options.disabled && this.visible && this.accept.call(this.element[0], t.currentItem || t.element) && (this.isout = !0, this.isover = !1, this._deactivate.call(this, i)))
                })), n
            },
            dragStart: function (t, i) {
                t.element.parentsUntil("body").on("scroll.droppable", (function () {
                    t.options.refreshPositions || e.ui.ddmanager.prepareOffsets(t, i)
                }))
            },
            drag: function (t, i) {
                t.options.refreshPositions && e.ui.ddmanager.prepareOffsets(t, i), e.each(e.ui.ddmanager.droppables[t.options.scope] || [], (function () {
                    if (!this.options.disabled && !this.greedyChild && this.visible) {
                        var n, a, s, o = y(t, this, this.options.tolerance, i),
                            r = !o && this.isover ? "isout" : o && !this.isover ? "isover" : null;
                        r && (this.options.greedy && (a = this.options.scope, (s = this.element.parents(":data(ui-droppable)").filter((function () {
                            return e(this).droppable("instance").options.scope === a
                        }))).length && ((n = e(s[0]).droppable("instance")).greedyChild = "isover" === r)), n && "isover" === r && (n.isover = !1, n.isout = !0, n._out.call(n, i)), this[r] = !0, this["isout" === r ? "isover" : "isout"] = !1, this["isover" === r ? "_over" : "_out"].call(this, i), n && "isout" === r && (n.isout = !1, n.isover = !0, n._over.call(n, i)))
                    }
                }))
            },
            dragStop: function (t, i) {
                t.element.parentsUntil("body").off("scroll.droppable"), t.options.refreshPositions || e.ui.ddmanager.prepareOffsets(t, i)
            }
        }, !1 !== e.uiBackCompat && e.widget("ui.droppable", e.ui.droppable, {
            options: {
                hoverClass: !1,
                activeClass: !1
            },
            _addActiveClass: function () {
                this._super(), this.options.activeClass && this.element.addClass(this.options.activeClass)
            },
            _removeActiveClass: function () {
                this._super(), this.options.activeClass && this.element.removeClass(this.options.activeClass)
            },
            _addHoverClass: function () {
                this._super(), this.options.hoverClass && this.element.addClass(this.options.hoverClass)
            },
            _removeHoverClass: function () {
                this._super(), this.options.hoverClass && this.element.removeClass(this.options.hoverClass)
            }
        });
        e.ui.droppable, e.widget("ui.progressbar", {
            version: "1.12.1",
            options: {
                classes: {
                    "ui-progressbar": "ui-corner-all",
                    "ui-progressbar-value": "ui-corner-left",
                    "ui-progressbar-complete": "ui-corner-right"
                },
                max: 100,
                value: 0,
                change: null,
                complete: null
            },
            min: 0,
            _create: function () {
                this.oldValue = this.options.value = this._constrainedValue(), this.element.attr({
                    role: "progressbar",
                    "aria-valuemin": this.min
                }), this._addClass("ui-progressbar", "ui-widget ui-widget-content"), this.valueDiv = e("<div>").appendTo(this.element), this._addClass(this.valueDiv, "ui-progressbar-value", "ui-widget-header"), this._refreshValue()
            },
            _destroy: function () {
                this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"), this.valueDiv.remove()
            },
            value: function (e) {
                if (void 0 === e) return this.options.value;
                this.options.value = this._constrainedValue(e), this._refreshValue()
            },
            _constrainedValue: function (e) {
                return void 0 === e && (e = this.options.value), this.indeterminate = !1 === e, "number" != typeof e && (e = 0), !this.indeterminate && Math.min(this.options.max, Math.max(this.min, e))
            },
            _setOptions: function (e) {
                var t = e.value;
                delete e.value, this._super(e), this.options.value = this._constrainedValue(t), this._refreshValue()
            },
            _setOption: function (e, t) {
                "max" === e && (t = Math.max(this.min, t)), this._super(e, t)
            },
            _setOptionDisabled: function (e) {
                this._super(e), this.element.attr("aria-disabled", e), this._toggleClass(null, "ui-state-disabled", !!e)
            },
            _percentage: function () {
                return this.indeterminate ? 100 : 100 * (this.options.value - this.min) / (this.options.max - this.min)
            },
            _refreshValue: function () {
                var t = this.options.value,
                    i = this._percentage();
                this.valueDiv.toggle(this.indeterminate || t > this.min).width(i.toFixed(0) + "%"), this._toggleClass(this.valueDiv, "ui-progressbar-complete", null, t === this.options.max)._toggleClass("ui-progressbar-indeterminate", null, this.indeterminate), this.indeterminate ? (this.element.removeAttr("aria-valuenow"), this.overlayDiv || (this.overlayDiv = e("<div>").appendTo(this.valueDiv), this._addClass(this.overlayDiv, "ui-progressbar-overlay"))) : (this.element.attr({
                    "aria-valuemax": this.options.max,
                    "aria-valuenow": t
                }), this.overlayDiv && (this.overlayDiv.remove(), this.overlayDiv = null)), this.oldValue !== t && (this.oldValue = t, this._trigger("change")), t === this.options.max && this._trigger("complete")
            }
        }), e.widget("ui.selectable", e.ui.mouse, {
            version: "1.12.1",
            options: {
                appendTo: "body",
                autoRefresh: !0,
                distance: 0,
                filter: "*",
                tolerance: "touch",
                selected: null,
                selecting: null,
                start: null,
                stop: null,
                unselected: null,
                unselecting: null
            },
            _create: function () {
                var t = this;
                this._addClass("ui-selectable"), this.dragged = !1, this.refresh = function () {
                    t.elementPos = e(t.element[0]).offset(), t.selectees = e(t.options.filter, t.element[0]), t._addClass(t.selectees, "ui-selectee"), t.selectees.each((function () {
                        var i = e(this),
                            n = i.offset(),
                            a = {
                                left: n.left - t.elementPos.left,
                                top: n.top - t.elementPos.top
                            };
                        e.data(this, "selectable-item", {
                            element: this,
                            $element: i,
                            left: a.left,
                            top: a.top,
                            right: a.left + i.outerWidth(),
                            bottom: a.top + i.outerHeight(),
                            startselected: !1,
                            selected: i.hasClass("ui-selected"),
                            selecting: i.hasClass("ui-selecting"),
                            unselecting: i.hasClass("ui-unselecting")
                        })
                    }))
                }, this.refresh(), this._mouseInit(), this.helper = e("<div>"), this._addClass(this.helper, "ui-selectable-helper")
            },
            _destroy: function () {
                this.selectees.removeData("selectable-item"), this._mouseDestroy()
            },
            _mouseStart: function (t) {
                var i = this,
                    n = this.options;
                this.opos = [t.pageX, t.pageY], this.elementPos = e(this.element[0]).offset(), this.options.disabled || (this.selectees = e(n.filter, this.element[0]), this._trigger("start", t), e(n.appendTo).append(this.helper), this.helper.css({
                    left: t.pageX,
                    top: t.pageY,
                    width: 0,
                    height: 0
                }), n.autoRefresh && this.refresh(), this.selectees.filter(".ui-selected").each((function () {
                    var n = e.data(this, "selectable-item");
                    n.startselected = !0, t.metaKey || t.ctrlKey || (i._removeClass(n.$element, "ui-selected"), n.selected = !1, i._addClass(n.$element, "ui-unselecting"), n.unselecting = !0, i._trigger("unselecting", t, {
                        unselecting: n.element
                    }))
                })), e(t.target).parents().addBack().each((function () {
                    var n, a = e.data(this, "selectable-item");
                    if (a) return n = !t.metaKey && !t.ctrlKey || !a.$element.hasClass("ui-selected"), i._removeClass(a.$element, n ? "ui-unselecting" : "ui-selected")._addClass(a.$element, n ? "ui-selecting" : "ui-unselecting"), a.unselecting = !n, a.selecting = n, a.selected = n, n ? i._trigger("selecting", t, {
                        selecting: a.element
                    }) : i._trigger("unselecting", t, {
                        unselecting: a.element
                    }), !1
                })))
            },
            _mouseDrag: function (t) {
                if (this.dragged = !0, !this.options.disabled) {
                    var i, n = this,
                        a = this.options,
                        s = this.opos[0],
                        o = this.opos[1],
                        r = t.pageX,
                        l = t.pageY;
                    return s > r && (i = r, r = s, s = i), o > l && (i = l, l = o, o = i), this.helper.css({
                        left: s,
                        top: o,
                        width: r - s,
                        height: l - o
                    }), this.selectees.each((function () {
                        var i = e.data(this, "selectable-item"),
                            c = !1,
                            d = {};
                        i && i.element !== n.element[0] && (d.left = i.left + n.elementPos.left, d.right = i.right + n.elementPos.left, d.top = i.top + n.elementPos.top, d.bottom = i.bottom + n.elementPos.top, "touch" === a.tolerance ? c = !(d.left > r || d.right < s || d.top > l || d.bottom < o) : "fit" === a.tolerance && (c = d.left > s && d.right < r && d.top > o && d.bottom < l), c ? (i.selected && (n._removeClass(i.$element, "ui-selected"), i.selected = !1), i.unselecting && (n._removeClass(i.$element, "ui-unselecting"), i.unselecting = !1), i.selecting || (n._addClass(i.$element, "ui-selecting"), i.selecting = !0, n._trigger("selecting", t, {
                            selecting: i.element
                        }))) : (i.selecting && ((t.metaKey || t.ctrlKey) && i.startselected ? (n._removeClass(i.$element, "ui-selecting"), i.selecting = !1, n._addClass(i.$element, "ui-selected"), i.selected = !0) : (n._removeClass(i.$element, "ui-selecting"), i.selecting = !1, i.startselected && (n._addClass(i.$element, "ui-unselecting"), i.unselecting = !0), n._trigger("unselecting", t, {
                            unselecting: i.element
                        }))), i.selected && (t.metaKey || t.ctrlKey || i.startselected || (n._removeClass(i.$element, "ui-selected"), i.selected = !1, n._addClass(i.$element, "ui-unselecting"), i.unselecting = !0, n._trigger("unselecting", t, {
                            unselecting: i.element
                        })))))
                    })), !1
                }
            },
            _mouseStop: function (t) {
                var i = this;
                return this.dragged = !1, e(".ui-unselecting", this.element[0]).each((function () {
                    var n = e.data(this, "selectable-item");
                    i._removeClass(n.$element, "ui-unselecting"), n.unselecting = !1, n.startselected = !1, i._trigger("unselected", t, {
                        unselected: n.element
                    })
                })), e(".ui-selecting", this.element[0]).each((function () {
                    var n = e.data(this, "selectable-item");
                    i._removeClass(n.$element, "ui-selecting")._addClass(n.$element, "ui-selected"), n.selecting = !1, n.selected = !0, n.startselected = !0, i._trigger("selected", t, {
                        selected: n.element
                    })
                })), this._trigger("stop", t), this.helper.remove(), !1
            }
        }), e.widget("ui.selectmenu", [e.ui.formResetMixin, {
            version: "1.12.1",
            defaultElement: "<select>",
            options: {
                appendTo: null,
                classes: {
                    "ui-selectmenu-button-open": "ui-corner-top",
                    "ui-selectmenu-button-closed": "ui-corner-all"
                },
                disabled: null,
                icons: {
                    button: "ui-icon-triangle-1-s"
                },
                position: {
                    my: "left top",
                    at: "left bottom",
                    collision: "none"
                },
                width: !1,
                change: null,
                close: null,
                focus: null,
                open: null,
                select: null
            },
            _create: function () {
                var t = this.element.uniqueId().attr("id");
                this.ids = {
                    element: t,
                    button: t + "-button",
                    menu: t + "-menu"
                }, this._drawButton(), this._drawMenu(), this._bindFormResetHandler(), this._rendered = !1, this.menuItems = e()
            },
            _drawButton: function () {
                var t, i = this,
                    n = this._parseOption(this.element.find("option:selected"), this.element[0].selectedIndex);
                this.labels = this.element.labels().attr("for", this.ids.button), this._on(this.labels, {
                    click: function (e) {
                        this.button.focus(), e.preventDefault()
                    }
                }), this.element.hide(), this.button = e("<span>", {
                    tabindex: this.options.disabled ? -1 : 0,
                    id: this.ids.button,
                    role: "combobox",
                    "aria-expanded": "false",
                    "aria-autocomplete": "list",
                    "aria-owns": this.ids.menu,
                    "aria-haspopup": "true",
                    title: this.element.attr("title")
                }).insertAfter(this.element), this._addClass(this.button, "ui-selectmenu-button ui-selectmenu-button-closed", "ui-button ui-widget"), t = e("<span>").appendTo(this.button), this._addClass(t, "ui-selectmenu-icon", "ui-icon " + this.options.icons.button), this.buttonItem = this._renderButtonItem(n).appendTo(this.button), !1 !== this.options.width && this._resizeButton(), this._on(this.button, this._buttonEvents), this.button.one("focusin", (function () {
                    i._rendered || i._refreshMenu()
                }))
            },
            _drawMenu: function () {
                var t = this;
                this.menu = e("<ul>", {
                    "aria-hidden": "true",
                    "aria-labelledby": this.ids.button,
                    id: this.ids.menu
                }), this.menuWrap = e("<div>").append(this.menu), this._addClass(this.menuWrap, "ui-selectmenu-menu", "ui-front"), this.menuWrap.appendTo(this._appendTo()), this.menuInstance = this.menu.menu({
                    classes: {
                        "ui-menu": "ui-corner-bottom"
                    },
                    role: "listbox",
                    select: function (e, i) {
                        e.preventDefault(), t._setSelection(), t._select(i.item.data("ui-selectmenu-item"), e)
                    },
                    focus: function (e, i) {
                        var n = i.item.data("ui-selectmenu-item");
                        null != t.focusIndex && n.index !== t.focusIndex && (t._trigger("focus", e, {
                            item: n
                        }), t.isOpen || t._select(n, e)), t.focusIndex = n.index, t.button.attr("aria-activedescendant", t.menuItems.eq(n.index).attr("id"))
                    }
                }).menu("instance"), this.menuInstance._off(this.menu, "mouseleave"), this.menuInstance._closeOnDocumentClick = function () {
                    return !1
                }, this.menuInstance._isDivider = function () {
                    return !1
                }
            },
            refresh: function () {
                this._refreshMenu(), this.buttonItem.replaceWith(this.buttonItem = this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item") || {})), null === this.options.width && this._resizeButton()
            },
            _refreshMenu: function () {
                var e, t = this.element.find("option");
                this.menu.empty(), this._parseOptions(t), this._renderMenu(this.menu, this.items), this.menuInstance.refresh(), this.menuItems = this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"), this._rendered = !0, t.length && (e = this._getSelectedItem(), this.menuInstance.focus(null, e), this._setAria(e.data("ui-selectmenu-item")), this._setOption("disabled", this.element.prop("disabled")))
            },
            open: function (e) {
                this.options.disabled || (this._rendered ? (this._removeClass(this.menu.find(".ui-state-active"), null, "ui-state-active"), this.menuInstance.focus(null, this._getSelectedItem())) : this._refreshMenu(), this.menuItems.length && (this.isOpen = !0, this._toggleAttr(), this._resizeMenu(), this._position(), this._on(this.document, this._documentClick), this._trigger("open", e)))
            },
            _position: function () {
                this.menuWrap.position(e.extend({
                    of: this.button
                }, this.options.position))
            },
            close: function (e) {
                this.isOpen && (this.isOpen = !1, this._toggleAttr(), this.range = null, this._off(this.document), this._trigger("close", e))
            },
            widget: function () {
                return this.button
            },
            menuWidget: function () {
                return this.menu
            },
            _renderButtonItem: function (t) {
                var i = e("<span>");
                return this._setText(i, t.label), this._addClass(i, "ui-selectmenu-text"), i
            },
            _renderMenu: function (t, i) {
                var n = this,
                    a = "";
                e.each(i, (function (i, s) {
                    var o;
                    s.optgroup !== a && (o = e("<li>", {
                        text: s.optgroup
                    }), n._addClass(o, "ui-selectmenu-optgroup", "ui-menu-divider" + (s.element.parent("optgroup").prop("disabled") ? " ui-state-disabled" : "")), o.appendTo(t), a = s.optgroup), n._renderItemData(t, s)
                }))
            },
            _renderItemData: function (e, t) {
                return this._renderItem(e, t).data("ui-selectmenu-item", t)
            },
            _renderItem: function (t, i) {
                var n = e("<li>"),
                    a = e("<div>", {
                        title: i.element.attr("title")
                    });
                return i.disabled && this._addClass(n, null, "ui-state-disabled"), this._setText(a, i.label), n.append(a).appendTo(t)
            },
            _setText: function (e, t) {
                t ? e.text(t) : e.html("&#160;")
            },
            _move: function (e, t) {
                var i, n, a = ".ui-menu-item";
                this.isOpen ? i = this.menuItems.eq(this.focusIndex).parent("li") : (i = this.menuItems.eq(this.element[0].selectedIndex).parent("li"), a += ":not(.ui-state-disabled)"), (n = "first" === e || "last" === e ? i["first" === e ? "prevAll" : "nextAll"](a).eq(-1) : i[e + "All"](a).eq(0)).length && this.menuInstance.focus(t, n)
            },
            _getSelectedItem: function () {
                return this.menuItems.eq(this.element[0].selectedIndex).parent("li")
            },
            _toggle: function (e) {
                this[this.isOpen ? "close" : "open"](e)
            },
            _setSelection: function () {
                var e;
                this.range && (window.getSelection ? ((e = window.getSelection()).removeAllRanges(), e.addRange(this.range)) : this.range.select(), this.button.focus())
            },
            _documentClick: {
                mousedown: function (t) {
                    this.isOpen && (e(t.target).closest(".ui-selectmenu-menu, #" + e.ui.escapeSelector(this.ids.button)).length || this.close(t))
                }
            },
            _buttonEvents: {
                mousedown: function () {
                    var e;
                    window.getSelection ? (e = window.getSelection()).rangeCount && (this.range = e.getRangeAt(0)) : this.range = document.selection.createRange()
                },
                click: function (e) {
                    this._setSelection(), this._toggle(e)
                },
                keydown: function (t) {
                    var i = !0;
                    switch (t.keyCode) {
                        case e.ui.keyCode.TAB:
                        case e.ui.keyCode.ESCAPE:
                            this.close(t), i = !1;
                            break;
                        case e.ui.keyCode.ENTER:
                            this.isOpen && this._selectFocusedItem(t);
                            break;
                        case e.ui.keyCode.UP:
                            t.altKey ? this._toggle(t) : this._move("prev", t);
                            break;
                        case e.ui.keyCode.DOWN:
                            t.altKey ? this._toggle(t) : this._move("next", t);
                            break;
                        case e.ui.keyCode.SPACE:
                            this.isOpen ? this._selectFocusedItem(t) : this._toggle(t);
                            break;
                        case e.ui.keyCode.LEFT:
                            this._move("prev", t);
                            break;
                        case e.ui.keyCode.RIGHT:
                            this._move("next", t);
                            break;
                        case e.ui.keyCode.HOME:
                        case e.ui.keyCode.PAGE_UP:
                            this._move("first", t);
                            break;
                        case e.ui.keyCode.END:
                        case e.ui.keyCode.PAGE_DOWN:
                            this._move("last", t);
                            break;
                        default:
                            this.menu.trigger(t), i = !1
                    }
                    i && t.preventDefault()
                }
            },
            _selectFocusedItem: function (e) {
                var t = this.menuItems.eq(this.focusIndex).parent("li");
                t.hasClass("ui-state-disabled") || this._select(t.data("ui-selectmenu-item"), e)
            },
            _select: function (e, t) {
                var i = this.element[0].selectedIndex;
                this.element[0].selectedIndex = e.index, this.buttonItem.replaceWith(this.buttonItem = this._renderButtonItem(e)), this._setAria(e), this._trigger("select", t, {
                    item: e
                }), e.index !== i && this._trigger("change", t, {
                    item: e
                }), this.close(t)
            },
            _setAria: function (e) {
                var t = this.menuItems.eq(e.index).attr("id");
                this.button.attr({
                    "aria-labelledby": t,
                    "aria-activedescendant": t
                }), this.menu.attr("aria-activedescendant", t)
            },
            _setOption: function (e, t) {
                if ("icons" === e) {
                    var i = this.button.find("span.ui-icon");
                    this._removeClass(i, null, this.options.icons.button)._addClass(i, null, t.button)
                }
                this._super(e, t), "appendTo" === e && this.menuWrap.appendTo(this._appendTo()), "width" === e && this._resizeButton()
            },
            _setOptionDisabled: function (e) {
                this._super(e), this.menuInstance.option("disabled", e), this.button.attr("aria-disabled", e), this._toggleClass(this.button, null, "ui-state-disabled", e), this.element.prop("disabled", e), e ? (this.button.attr("tabindex", -1), this.close()) : this.button.attr("tabindex", 0)
            },
            _appendTo: function () {
                var t = this.options.appendTo;
                return t && (t = t.jquery || t.nodeType ? e(t) : this.document.find(t).eq(0)), t && t[0] || (t = this.element.closest(".ui-front, dialog")), t.length || (t = this.document[0].body), t
            },
            _toggleAttr: function () {
                this.button.attr("aria-expanded", this.isOpen), this._removeClass(this.button, "ui-selectmenu-button-" + (this.isOpen ? "closed" : "open"))._addClass(this.button, "ui-selectmenu-button-" + (this.isOpen ? "open" : "closed"))._toggleClass(this.menuWrap, "ui-selectmenu-open", null, this.isOpen), this.menu.attr("aria-hidden", !this.isOpen)
            },
            _resizeButton: function () {
                var e = this.options.width;
                !1 !== e ? (null === e && (e = this.element.show().outerWidth(), this.element.hide()), this.button.outerWidth(e)) : this.button.css("width", "")
            },
            _resizeMenu: function () {
                this.menu.outerWidth(Math.max(this.button.outerWidth(), this.menu.width("").outerWidth() + 1))
            },
            _getCreateOptions: function () {
                var e = this._super();
                return e.disabled = this.element.prop("disabled"), e
            },
            _parseOptions: function (t) {
                var i = this,
                    n = [];
                t.each((function (t, a) {
                    n.push(i._parseOption(e(a), t))
                })), this.items = n
            },
            _parseOption: function (e, t) {
                var i = e.parent("optgroup");
                return {
                    element: e,
                    index: t,
                    value: e.val(),
                    label: e.text(),
                    optgroup: i.attr("label") || "",
                    disabled: i.prop("disabled") || e.prop("disabled")
                }
            },
            _destroy: function () {
                this._unbindFormResetHandler(), this.menuWrap.remove(), this.button.remove(), this.element.show(), this.element.removeUniqueId(), this.labels.attr("for", this.ids.element)
            }
        }]), e.widget("ui.slider", e.ui.mouse, {
            version: "1.12.1",
            widgetEventPrefix: "slide",
            options: {
                animate: !1,
                classes: {
                    "ui-slider": "ui-corner-all",
                    "ui-slider-handle": "ui-corner-all",
                    "ui-slider-range": "ui-corner-all ui-widget-header"
                },
                distance: 0,
                max: 100,
                min: 0,
                orientation: "horizontal",
                range: !1,
                step: 1,
                value: 0,
                values: null,
                change: null,
                slide: null,
                start: null,
                stop: null
            },
            numPages: 5,
            _create: function () {
                this._keySliding = !1, this._mouseSliding = !1, this._animateOff = !0, this._handleIndex = null, this._detectOrientation(), this._mouseInit(), this._calculateNewMax(), this._addClass("ui-slider ui-slider-" + this.orientation, "ui-widget ui-widget-content"), this._refresh(), this._animateOff = !1
            },
            _refresh: function () {
                this._createRange(), this._createHandles(), this._setupEvents(), this._refreshValue()
            },
            _createHandles: function () {
                var t, i, n = this.options,
                    a = this.element.find(".ui-slider-handle"),
                    s = [];
                for (i = n.values && n.values.length || 1, a.length > i && (a.slice(i).remove(), a = a.slice(0, i)), t = a.length; t < i; t++) s.push("<span tabindex='0'></span>");
                this.handles = a.add(e(s.join("")).appendTo(this.element)), this._addClass(this.handles, "ui-slider-handle", "ui-state-default"), this.handle = this.handles.eq(0), this.handles.each((function (t) {
                    e(this).data("ui-slider-handle-index", t).attr("tabIndex", 0)
                }))
            },
            _createRange: function () {
                var t = this.options;
                t.range ? (!0 === t.range && (t.values ? t.values.length && 2 !== t.values.length ? t.values = [t.values[0], t.values[0]] : e.isArray(t.values) && (t.values = t.values.slice(0)) : t.values = [this._valueMin(), this._valueMin()]), this.range && this.range.length ? (this._removeClass(this.range, "ui-slider-range-min ui-slider-range-max"), this.range.css({
                    left: "",
                    bottom: ""
                })) : (this.range = e("<div>").appendTo(this.element), this._addClass(this.range, "ui-slider-range")), "min" !== t.range && "max" !== t.range || this._addClass(this.range, "ui-slider-range-" + t.range)) : (this.range && this.range.remove(), this.range = null)
            },
            _setupEvents: function () {
                this._off(this.handles), this._on(this.handles, this._handleEvents), this._hoverable(this.handles), this._focusable(this.handles)
            },
            _destroy: function () {
                this.handles.remove(), this.range && this.range.remove(), this._mouseDestroy()
            },
            _mouseCapture: function (t) {
                var i, n, a, s, o, r, l, c = this,
                    d = this.options;
                return !d.disabled && (this.elementSize = {
                    width: this.element.outerWidth(),
                    height: this.element.outerHeight()
                }, this.elementOffset = this.element.offset(), i = {
                    x: t.pageX,
                    y: t.pageY
                }, n = this._normValueFromMouse(i), a = this._valueMax() - this._valueMin() + 1, this.handles.each((function (t) {
                    var i = Math.abs(n - c.values(t));
                    (a > i || a === i && (t === c._lastChangedValue || c.values(t) === d.min)) && (a = i, s = e(this), o = t)
                })), !1 !== this._start(t, o) && (this._mouseSliding = !0, this._handleIndex = o, this._addClass(s, null, "ui-state-active"), s.trigger("focus"), r = s.offset(), l = !e(t.target).parents().addBack().is(".ui-slider-handle"), this._clickOffset = l ? {
                    left: 0,
                    top: 0
                } : {
                    left: t.pageX - r.left - s.width() / 2,
                    top: t.pageY - r.top - s.height() / 2 - (parseInt(s.css("borderTopWidth"), 10) || 0) - (parseInt(s.css("borderBottomWidth"), 10) || 0) + (parseInt(s.css("marginTop"), 10) || 0)
                }, this.handles.hasClass("ui-state-hover") || this._slide(t, o, n), this._animateOff = !0, !0))
            },
            _mouseStart: function () {
                return !0
            },
            _mouseDrag: function (e) {
                var t = {
                    x: e.pageX,
                    y: e.pageY
                },
                    i = this._normValueFromMouse(t);
                return this._slide(e, this._handleIndex, i), !1
            },
            _mouseStop: function (e) {
                return this._removeClass(this.handles, null, "ui-state-active"), this._mouseSliding = !1, this._stop(e, this._handleIndex), this._change(e, this._handleIndex), this._handleIndex = null, this._clickOffset = null, this._animateOff = !1, !1
            },
            _detectOrientation: function () {
                this.orientation = "vertical" === this.options.orientation ? "vertical" : "horizontal"
            },
            _normValueFromMouse: function (e) {
                var t, i, n, a, s;
                return "horizontal" === this.orientation ? (t = this.elementSize.width, i = e.x - this.elementOffset.left - (this._clickOffset ? this._clickOffset.left : 0)) : (t = this.elementSize.height, i = e.y - this.elementOffset.top - (this._clickOffset ? this._clickOffset.top : 0)), (n = i / t) > 1 && (n = 1), n < 0 && (n = 0), "vertical" === this.orientation && (n = 1 - n), a = this._valueMax() - this._valueMin(), s = this._valueMin() + n * a, this._trimAlignValue(s)
            },
            _uiHash: function (e, t, i) {
                var n = {
                    handle: this.handles[e],
                    handleIndex: e,
                    value: void 0 !== t ? t : this.value()
                };
                return this._hasMultipleValues() && (n.value = void 0 !== t ? t : this.values(e), n.values = i || this.values()), n
            },
            _hasMultipleValues: function () {
                return this.options.values && this.options.values.length
            },
            _start: function (e, t) {
                return this._trigger("start", e, this._uiHash(t))
            },
            _slide: function (e, t, i) {
                var n, a = this.value(),
                    s = this.values();
                this._hasMultipleValues() && (n = this.values(t ? 0 : 1), a = this.values(t), 2 === this.options.values.length && !0 === this.options.range && (i = 0 === t ? Math.min(n, i) : Math.max(n, i)), s[t] = i), i !== a && !1 !== this._trigger("slide", e, this._uiHash(t, i, s)) && (this._hasMultipleValues() ? this.values(t, i) : this.value(i))
            },
            _stop: function (e, t) {
                this._trigger("stop", e, this._uiHash(t))
            },
            _change: function (e, t) {
                this._keySliding || this._mouseSliding || (this._lastChangedValue = t, this._trigger("change", e, this._uiHash(t)))
            },
            value: function (e) {
                return arguments.length ? (this.options.value = this._trimAlignValue(e), this._refreshValue(), void this._change(null, 0)) : this._value()
            },
            values: function (t, i) {
                var n, a, s;
                if (arguments.length > 1) return this.options.values[t] = this._trimAlignValue(i), this._refreshValue(), void this._change(null, t);
                if (!arguments.length) return this._values();
                if (!e.isArray(arguments[0])) return this._hasMultipleValues() ? this._values(t) : this.value();
                for (n = this.options.values, a = arguments[0], s = 0; s < n.length; s += 1) n[s] = this._trimAlignValue(a[s]), this._change(null, s);
                this._refreshValue()
            },
            _setOption: function (t, i) {
                var n, a = 0;
                switch ("range" === t && !0 === this.options.range && ("min" === i ? (this.options.value = this._values(0), this.options.values = null) : "max" === i && (this.options.value = this._values(this.options.values.length - 1), this.options.values = null)), e.isArray(this.options.values) && (a = this.options.values.length), this._super(t, i), t) {
                    case "orientation":
                        this._detectOrientation(), this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-" + this.orientation), this._refreshValue(), this.options.range && this._refreshRange(i), this.handles.css("horizontal" === i ? "bottom" : "left", "");
                        break;
                    case "value":
                        this._animateOff = !0, this._refreshValue(), this._change(null, 0), this._animateOff = !1;
                        break;
                    case "values":
                        for (this._animateOff = !0, this._refreshValue(), n = a - 1; n >= 0; n--) this._change(null, n);
                        this._animateOff = !1;
                        break;
                    case "step":
                    case "min":
                    case "max":
                        this._animateOff = !0, this._calculateNewMax(), this._refreshValue(), this._animateOff = !1;
                        break;
                    case "range":
                        this._animateOff = !0, this._refresh(), this._animateOff = !1
                }
            },
            _setOptionDisabled: function (e) {
                this._super(e), this._toggleClass(null, "ui-state-disabled", !!e)
            },
            _value: function () {
                var e = this.options.value;
                return e = this._trimAlignValue(e)
            },
            _values: function (e) {
                var t, i, n;
                if (arguments.length) return t = this.options.values[e], t = this._trimAlignValue(t);
                if (this._hasMultipleValues()) {
                    for (i = this.options.values.slice(), n = 0; n < i.length; n += 1) i[n] = this._trimAlignValue(i[n]);
                    return i
                }
                return []
            },
            _trimAlignValue: function (e) {
                if (e <= this._valueMin()) return this._valueMin();
                if (e >= this._valueMax()) return this._valueMax();
                var t = this.options.step > 0 ? this.options.step : 1,
                    i = (e - this._valueMin()) % t,
                    n = e - i;
                return 2 * Math.abs(i) >= t && (n += i > 0 ? t : -t), parseFloat(n.toFixed(5))
            },
            _calculateNewMax: function () {
                var e = this.options.max,
                    t = this._valueMin(),
                    i = this.options.step;
                (e = Math.round((e - t) / i) * i + t) > this.options.max && (e -= i), this.max = parseFloat(e.toFixed(this._precision()))
            },
            _precision: function () {
                var e = this._precisionOf(this.options.step);
                return null !== this.options.min && (e = Math.max(e, this._precisionOf(this.options.min))), e
            },
            _precisionOf: function (e) {
                var t = e.toString(),
                    i = t.indexOf(".");
                return -1 === i ? 0 : t.length - i - 1
            },
            _valueMin: function () {
                return this.options.min
            },
            _valueMax: function () {
                return this.max
            },
            _refreshRange: function (e) {
                "vertical" === e && this.range.css({
                    width: "",
                    left: ""
                }), "horizontal" === e && this.range.css({
                    height: "",
                    bottom: ""
                })
            },
            _refreshValue: function () {
                var t, i, n, a, s, o = this.options.range,
                    r = this.options,
                    l = this,
                    c = !this._animateOff && r.animate,
                    d = {};
                this._hasMultipleValues() ? this.handles.each((function (n) {
                    i = (l.values(n) - l._valueMin()) / (l._valueMax() - l._valueMin()) * 100, d["horizontal" === l.orientation ? "left" : "bottom"] = i + "%", e(this).stop(1, 1)[c ? "animate" : "css"](d, r.animate), !0 === l.options.range && ("horizontal" === l.orientation ? (0 === n && l.range.stop(1, 1)[c ? "animate" : "css"]({
                        left: i + "%"
                    }, r.animate), 1 === n && l.range[c ? "animate" : "css"]({
                        width: i - t + "%"
                    }, {
                        queue: !1,
                        duration: r.animate
                    })) : (0 === n && l.range.stop(1, 1)[c ? "animate" : "css"]({
                        bottom: i + "%"
                    }, r.animate), 1 === n && l.range[c ? "animate" : "css"]({
                        height: i - t + "%"
                    }, {
                        queue: !1,
                        duration: r.animate
                    }))), t = i
                })) : (n = this.value(), a = this._valueMin(), s = this._valueMax(), i = s !== a ? (n - a) / (s - a) * 100 : 0, d["horizontal" === this.orientation ? "left" : "bottom"] = i + "%", this.handle.stop(1, 1)[c ? "animate" : "css"](d, r.animate), "min" === o && "horizontal" === this.orientation && this.range.stop(1, 1)[c ? "animate" : "css"]({
                    width: i + "%"
                }, r.animate), "max" === o && "horizontal" === this.orientation && this.range.stop(1, 1)[c ? "animate" : "css"]({
                    width: 100 - i + "%"
                }, r.animate), "min" === o && "vertical" === this.orientation && this.range.stop(1, 1)[c ? "animate" : "css"]({
                    height: i + "%"
                }, r.animate), "max" === o && "vertical" === this.orientation && this.range.stop(1, 1)[c ? "animate" : "css"]({
                    height: 100 - i + "%"
                }, r.animate))
            },
            _handleEvents: {
                keydown: function (t) {
                    var i, n, a, s = e(t.target).data("ui-slider-handle-index");
                    switch (t.keyCode) {
                        case e.ui.keyCode.HOME:
                        case e.ui.keyCode.END:
                        case e.ui.keyCode.PAGE_UP:
                        case e.ui.keyCode.PAGE_DOWN:
                        case e.ui.keyCode.UP:
                        case e.ui.keyCode.RIGHT:
                        case e.ui.keyCode.DOWN:
                        case e.ui.keyCode.LEFT:
                            if (t.preventDefault(), !this._keySliding && (this._keySliding = !0, this._addClass(e(t.target), null, "ui-state-active"), !1 === this._start(t, s))) return
                    }
                    switch (a = this.options.step, i = n = this._hasMultipleValues() ? this.values(s) : this.value(), t.keyCode) {
                        case e.ui.keyCode.HOME:
                            n = this._valueMin();
                            break;
                        case e.ui.keyCode.END:
                            n = this._valueMax();
                            break;
                        case e.ui.keyCode.PAGE_UP:
                            n = this._trimAlignValue(i + (this._valueMax() - this._valueMin()) / this.numPages);
                            break;
                        case e.ui.keyCode.PAGE_DOWN:
                            n = this._trimAlignValue(i - (this._valueMax() - this._valueMin()) / this.numPages);
                            break;
                        case e.ui.keyCode.UP:
                        case e.ui.keyCode.RIGHT:
                            if (i === this._valueMax()) return;
                            n = this._trimAlignValue(i + a);
                            break;
                        case e.ui.keyCode.DOWN:
                        case e.ui.keyCode.LEFT:
                            if (i === this._valueMin()) return;
                            n = this._trimAlignValue(i - a)
                    }
                    this._slide(t, s, n)
                },
                keyup: function (t) {
                    var i = e(t.target).data("ui-slider-handle-index");
                    this._keySliding && (this._keySliding = !1, this._stop(t, i), this._change(t, i), this._removeClass(e(t.target), null, "ui-state-active"))
                }
            }
        }), e.widget("ui.sortable", e.ui.mouse, {
            version: "1.12.1",
            widgetEventPrefix: "sort",
            ready: !1,
            options: {
                appendTo: "parent",
                axis: !1,
                connectWith: !1,
                containment: !1,
                cursor: "auto",
                cursorAt: !1,
                dropOnEmpty: !0,
                forcePlaceholderSize: !1,
                forceHelperSize: !1,
                grid: !1,
                handle: !1,
                helper: "original",
                items: "> *",
                opacity: !1,
                placeholder: !1,
                revert: !1,
                scroll: !0,
                scrollSensitivity: 20,
                scrollSpeed: 20,
                scope: "default",
                tolerance: "intersect",
                zIndex: 1e3,
                activate: null,
                beforeStop: null,
                change: null,
                deactivate: null,
                out: null,
                over: null,
                receive: null,
                remove: null,
                sort: null,
                start: null,
                stop: null,
                update: null
            },
            _isOverAxis: function (e, t, i) {
                return e >= t && e < t + i
            },
            _isFloating: function (e) {
                return /left|right/.test(e.css("float")) || /inline|table-cell/.test(e.css("display"))
            },
            _create: function () {
                this.containerCache = {}, this._addClass("ui-sortable"), this.refresh(), this.offset = this.element.offset(), this._mouseInit(), this._setHandleClassName(), this.ready = !0
            },
            _setOption: function (e, t) {
                this._super(e, t), "handle" === e && this._setHandleClassName()
            },
            _setHandleClassName: function () {
                var t = this;
                this._removeClass(this.element.find(".ui-sortable-handle"), "ui-sortable-handle"), e.each(this.items, (function () {
                    t._addClass(this.instance.options.handle ? this.item.find(this.instance.options.handle) : this.item, "ui-sortable-handle")
                }))
            },
            _destroy: function () {
                this._mouseDestroy();
                for (var e = this.items.length - 1; e >= 0; e--) this.items[e].item.removeData(this.widgetName + "-item");
                return this
            },
            _mouseCapture: function (t, i) {
                var n = null,
                    a = !1,
                    s = this;
                return !this.reverting && (!this.options.disabled && "static" !== this.options.type && (this._refreshItems(t), e(t.target).parents().each((function () {
                    if (e.data(this, s.widgetName + "-item") === s) return n = e(this), !1
                })), e.data(t.target, s.widgetName + "-item") === s && (n = e(t.target)), !!n && (!(this.options.handle && !i && (e(this.options.handle, n).find("*").addBack().each((function () {
                    this === t.target && (a = !0)
                })), !a)) && (this.currentItem = n, this._removeCurrentsFromItems(), !0))))
            },
            _mouseStart: function (t, i, n) {
                var a, s, o = this.options;
                if (this.currentContainer = this, this.refreshPositions(), this.helper = this._createHelper(t), this._cacheHelperProportions(), this._cacheMargins(), this.scrollParent = this.helper.scrollParent(), this.offset = this.currentItem.offset(), this.offset = {
                    top: this.offset.top - this.margins.top,
                    left: this.offset.left - this.margins.left
                }, e.extend(this.offset, {
                    click: {
                        left: t.pageX - this.offset.left,
                        top: t.pageY - this.offset.top
                    },
                    parent: this._getParentOffset(),
                    relative: this._getRelativeOffset()
                }), this.helper.css("position", "absolute"), this.cssPosition = this.helper.css("position"), this.originalPosition = this._generatePosition(t), this.originalPageX = t.pageX, this.originalPageY = t.pageY, o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt), this.domPosition = {
                    prev: this.currentItem.prev()[0],
                    parent: this.currentItem.parent()[0]
                }, this.helper[0] !== this.currentItem[0] && this.currentItem.hide(), this._createPlaceholder(), o.containment && this._setContainment(), o.cursor && "auto" !== o.cursor && (s = this.document.find("body"), this.storedCursor = s.css("cursor"), s.css("cursor", o.cursor), this.storedStylesheet = e("<style>*{ cursor: " + o.cursor + " !important; }</style>").appendTo(s)), o.opacity && (this.helper.css("opacity") && (this._storedOpacity = this.helper.css("opacity")), this.helper.css("opacity", o.opacity)), o.zIndex && (this.helper.css("zIndex") && (this._storedZIndex = this.helper.css("zIndex")), this.helper.css("zIndex", o.zIndex)), this.scrollParent[0] !== this.document[0] && "HTML" !== this.scrollParent[0].tagName && (this.overflowOffset = this.scrollParent.offset()), this._trigger("start", t, this._uiHash()), this._preserveHelperProportions || this._cacheHelperProportions(), !n)
                    for (a = this.containers.length - 1; a >= 0; a--) this.containers[a]._trigger("activate", t, this._uiHash(this));
                return e.ui.ddmanager && (e.ui.ddmanager.current = this), e.ui.ddmanager && !o.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t), this.dragging = !0, this._addClass(this.helper, "ui-sortable-helper"), this._mouseDrag(t), !0
            },
            _mouseDrag: function (t) {
                var i, n, a, s, o = this.options,
                    r = !1;
                for (this.position = this._generatePosition(t), this.positionAbs = this._convertPositionTo("absolute"), this.lastPositionAbs || (this.lastPositionAbs = this.positionAbs), this.options.scroll && (this.scrollParent[0] !== this.document[0] && "HTML" !== this.scrollParent[0].tagName ? (this.overflowOffset.top + this.scrollParent[0].offsetHeight - t.pageY < o.scrollSensitivity ? this.scrollParent[0].scrollTop = r = this.scrollParent[0].scrollTop + o.scrollSpeed : t.pageY - this.overflowOffset.top < o.scrollSensitivity && (this.scrollParent[0].scrollTop = r = this.scrollParent[0].scrollTop - o.scrollSpeed), this.overflowOffset.left + this.scrollParent[0].offsetWidth - t.pageX < o.scrollSensitivity ? this.scrollParent[0].scrollLeft = r = this.scrollParent[0].scrollLeft + o.scrollSpeed : t.pageX - this.overflowOffset.left < o.scrollSensitivity && (this.scrollParent[0].scrollLeft = r = this.scrollParent[0].scrollLeft - o.scrollSpeed)) : (t.pageY - this.document.scrollTop() < o.scrollSensitivity ? r = this.document.scrollTop(this.document.scrollTop() - o.scrollSpeed) : this.window.height() - (t.pageY - this.document.scrollTop()) < o.scrollSensitivity && (r = this.document.scrollTop(this.document.scrollTop() + o.scrollSpeed)), t.pageX - this.document.scrollLeft() < o.scrollSensitivity ? r = this.document.scrollLeft(this.document.scrollLeft() - o.scrollSpeed) : this.window.width() - (t.pageX - this.document.scrollLeft()) < o.scrollSensitivity && (r = this.document.scrollLeft(this.document.scrollLeft() + o.scrollSpeed))), !1 !== r && e.ui.ddmanager && !o.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t)), this.positionAbs = this._convertPositionTo("absolute"), this.options.axis && "y" === this.options.axis || (this.helper[0].style.left = this.position.left + "px"), this.options.axis && "x" === this.options.axis || (this.helper[0].style.top = this.position.top + "px"), i = this.items.length - 1; i >= 0; i--)
                    if (a = (n = this.items[i]).item[0], (s = this._intersectsWithPointer(n)) && n.instance === this.currentContainer && !(a === this.currentItem[0] || this.placeholder[1 === s ? "next" : "prev"]()[0] === a || e.contains(this.placeholder[0], a) || "semi-dynamic" === this.options.type && e.contains(this.element[0], a))) {
                        if (this.direction = 1 === s ? "down" : "up", "pointer" !== this.options.tolerance && !this._intersectsWithSides(n)) break;
                        this._rearrange(t, n), this._trigger("change", t, this._uiHash());
                        break
                    } return this._contactContainers(t), e.ui.ddmanager && e.ui.ddmanager.drag(this, t), this._trigger("sort", t, this._uiHash()), this.lastPositionAbs = this.positionAbs, !1
            },
            _mouseStop: function (t, i) {
                if (t) {
                    if (e.ui.ddmanager && !this.options.dropBehaviour && e.ui.ddmanager.drop(this, t), this.options.revert) {
                        var n = this,
                            a = this.placeholder.offset(),
                            s = this.options.axis,
                            o = {};
                        s && "x" !== s || (o.left = a.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] === this.document[0].body ? 0 : this.offsetParent[0].scrollLeft)), s && "y" !== s || (o.top = a.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] === this.document[0].body ? 0 : this.offsetParent[0].scrollTop)), this.reverting = !0, e(this.helper).animate(o, parseInt(this.options.revert, 10) || 500, (function () {
                            n._clear(t)
                        }))
                    } else this._clear(t, i);
                    return !1
                }
            },
            cancel: function () {
                if (this.dragging) {
                    this._mouseUp(new e.Event("mouseup", {
                        target: null
                    })), "original" === this.options.helper ? (this.currentItem.css(this._storedCSS), this._removeClass(this.currentItem, "ui-sortable-helper")) : this.currentItem.show();
                    for (var t = this.containers.length - 1; t >= 0; t--) this.containers[t]._trigger("deactivate", null, this._uiHash(this)), this.containers[t].containerCache.over && (this.containers[t]._trigger("out", null, this._uiHash(this)), this.containers[t].containerCache.over = 0)
                }
                return this.placeholder && (this.placeholder[0].parentNode && this.placeholder[0].parentNode.removeChild(this.placeholder[0]), "original" !== this.options.helper && this.helper && this.helper[0].parentNode && this.helper.remove(), e.extend(this, {
                    helper: null,
                    dragging: !1,
                    reverting: !1,
                    _noFinalSort: null
                }), this.domPosition.prev ? e(this.domPosition.prev).after(this.currentItem) : e(this.domPosition.parent).prepend(this.currentItem)), this
            },
            serialize: function (t) {
                var i = this._getItemsAsjQuery(t && t.connected),
                    n = [];
                return t = t || {}, e(i).each((function () {
                    var i = (e(t.item || this).attr(t.attribute || "id") || "").match(t.expression || /(.+)[\-=_](.+)/);
                    i && n.push((t.key || i[1] + "[]") + "=" + (t.key && t.expression ? i[1] : i[2]))
                })), !n.length && t.key && n.push(t.key + "="), n.join("&")
            },
            toArray: function (t) {
                var i = this._getItemsAsjQuery(t && t.connected),
                    n = [];
                return t = t || {}, i.each((function () {
                    n.push(e(t.item || this).attr(t.attribute || "id") || "")
                })), n
            },
            _intersectsWith: function (e) {
                var t = this.positionAbs.left,
                    i = t + this.helperProportions.width,
                    n = this.positionAbs.top,
                    a = n + this.helperProportions.height,
                    s = e.left,
                    o = s + e.width,
                    r = e.top,
                    l = r + e.height,
                    c = this.offset.click.top,
                    d = this.offset.click.left,
                    p = "x" === this.options.axis || n + c > r && n + c < l,
                    u = "y" === this.options.axis || t + d > s && t + d < o,
                    h = p && u;
                return "pointer" === this.options.tolerance || this.options.forcePointerForContainers || "pointer" !== this.options.tolerance && this.helperProportions[this.floating ? "width" : "height"] > e[this.floating ? "width" : "height"] ? h : s < t + this.helperProportions.width / 2 && i - this.helperProportions.width / 2 < o && r < n + this.helperProportions.height / 2 && a - this.helperProportions.height / 2 < l
            },
            _intersectsWithPointer: function (e) {
                var t, i, n = "x" === this.options.axis || this._isOverAxis(this.positionAbs.top + this.offset.click.top, e.top, e.height),
                    a = "y" === this.options.axis || this._isOverAxis(this.positionAbs.left + this.offset.click.left, e.left, e.width);
                return !(!n || !a) && (t = this._getDragVerticalDirection(), i = this._getDragHorizontalDirection(), this.floating ? "right" === i || "down" === t ? 2 : 1 : t && ("down" === t ? 2 : 1))
            },
            _intersectsWithSides: function (e) {
                var t = this._isOverAxis(this.positionAbs.top + this.offset.click.top, e.top + e.height / 2, e.height),
                    i = this._isOverAxis(this.positionAbs.left + this.offset.click.left, e.left + e.width / 2, e.width),
                    n = this._getDragVerticalDirection(),
                    a = this._getDragHorizontalDirection();
                return this.floating && a ? "right" === a && i || "left" === a && !i : n && ("down" === n && t || "up" === n && !t)
            },
            _getDragVerticalDirection: function () {
                var e = this.positionAbs.top - this.lastPositionAbs.top;
                return 0 !== e && (e > 0 ? "down" : "up")
            },
            _getDragHorizontalDirection: function () {
                var e = this.positionAbs.left - this.lastPositionAbs.left;
                return 0 !== e && (e > 0 ? "right" : "left")
            },
            refresh: function (e) {
                return this._refreshItems(e), this._setHandleClassName(), this.refreshPositions(), this
            },
            _connectWith: function () {
                var e = this.options;
                return e.connectWith.constructor === String ? [e.connectWith] : e.connectWith
            },
            _getItemsAsjQuery: function (t) {
                var i, n, a, s, o = [],
                    r = [],
                    l = this._connectWith();
                if (l && t)
                    for (i = l.length - 1; i >= 0; i--)
                        for (n = (a = e(l[i], this.document[0])).length - 1; n >= 0; n--)(s = e.data(a[n], this.widgetFullName)) && s !== this && !s.options.disabled && r.push([e.isFunction(s.options.items) ? s.options.items.call(s.element) : e(s.options.items, s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), s]);

                function c() {
                    o.push(this)
                }
                for (r.push([e.isFunction(this.options.items) ? this.options.items.call(this.element, null, {
                    options: this.options,
                    item: this.currentItem
                }) : e(this.options.items, this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), this]), i = r.length - 1; i >= 0; i--) r[i][0].each(c);
                return e(o)
            },
            _removeCurrentsFromItems: function () {
                var t = this.currentItem.find(":data(" + this.widgetName + "-item)");
                this.items = e.grep(this.items, (function (e) {
                    for (var i = 0; i < t.length; i++)
                        if (t[i] === e.item[0]) return !1;
                    return !0
                }))
            },
            _refreshItems: function (t) {
                this.items = [], this.containers = [this];
                var i, n, a, s, o, r, l, c, d = this.items,
                    p = [
                        [e.isFunction(this.options.items) ? this.options.items.call(this.element[0], t, {
                            item: this.currentItem
                        }) : e(this.options.items, this.element), this]
                    ],
                    u = this._connectWith();
                if (u && this.ready)
                    for (i = u.length - 1; i >= 0; i--)
                        for (n = (a = e(u[i], this.document[0])).length - 1; n >= 0; n--)(s = e.data(a[n], this.widgetFullName)) && s !== this && !s.options.disabled && (p.push([e.isFunction(s.options.items) ? s.options.items.call(s.element[0], t, {
                            item: this.currentItem
                        }) : e(s.options.items, s.element), s]), this.containers.push(s));
                for (i = p.length - 1; i >= 0; i--)
                    for (o = p[i][1], n = 0, c = (r = p[i][0]).length; n < c; n++)(l = e(r[n])).data(this.widgetName + "-item", o), d.push({
                        item: l,
                        instance: o,
                        width: 0,
                        height: 0,
                        left: 0,
                        top: 0
                    })
            },
            refreshPositions: function (t) {
                var i, n, a, s;
                for (this.floating = !!this.items.length && ("x" === this.options.axis || this._isFloating(this.items[0].item)), this.offsetParent && this.helper && (this.offset.parent = this._getParentOffset()), i = this.items.length - 1; i >= 0; i--)(n = this.items[i]).instance !== this.currentContainer && this.currentContainer && n.item[0] !== this.currentItem[0] || (a = this.options.toleranceElement ? e(this.options.toleranceElement, n.item) : n.item, t || (n.width = a.outerWidth(), n.height = a.outerHeight()), s = a.offset(), n.left = s.left, n.top = s.top);
                if (this.options.custom && this.options.custom.refreshContainers) this.options.custom.refreshContainers.call(this);
                else
                    for (i = this.containers.length - 1; i >= 0; i--) s = this.containers[i].element.offset(), this.containers[i].containerCache.left = s.left, this.containers[i].containerCache.top = s.top, this.containers[i].containerCache.width = this.containers[i].element.outerWidth(), this.containers[i].containerCache.height = this.containers[i].element.outerHeight();
                return this
            },
            _createPlaceholder: function (t) {
                var i, n = (t = t || this).options;
                n.placeholder && n.placeholder.constructor !== String || (i = n.placeholder, n.placeholder = {
                    element: function () {
                        var n = t.currentItem[0].nodeName.toLowerCase(),
                            a = e("<" + n + ">", t.document[0]);
                        return t._addClass(a, "ui-sortable-placeholder", i || t.currentItem[0].className)._removeClass(a, "ui-sortable-helper"), "tbody" === n ? t._createTrPlaceholder(t.currentItem.find("tr").eq(0), e("<tr>", t.document[0]).appendTo(a)) : "tr" === n ? t._createTrPlaceholder(t.currentItem, a) : "img" === n && a.attr("src", t.currentItem.attr("src")), i || a.css("visibility", "hidden"), a
                    },
                    update: function (e, a) {
                        i && !n.forcePlaceholderSize || (a.height() || a.height(t.currentItem.innerHeight() - parseInt(t.currentItem.css("paddingTop") || 0, 10) - parseInt(t.currentItem.css("paddingBottom") || 0, 10)), a.width() || a.width(t.currentItem.innerWidth() - parseInt(t.currentItem.css("paddingLeft") || 0, 10) - parseInt(t.currentItem.css("paddingRight") || 0, 10)))
                    }
                }), t.placeholder = e(n.placeholder.element.call(t.element, t.currentItem)), t.currentItem.after(t.placeholder), n.placeholder.update(t, t.placeholder)
            },
            _createTrPlaceholder: function (t, i) {
                var n = this;
                t.children().each((function () {
                    e("<td>&#160;</td>", n.document[0]).attr("colspan", e(this).attr("colspan") || 1).appendTo(i)
                }))
            },
            _contactContainers: function (t) {
                var i, n, a, s, o, r, l, c, d, p, u = null,
                    h = null;
                for (i = this.containers.length - 1; i >= 0; i--)
                    if (!e.contains(this.currentItem[0], this.containers[i].element[0]))
                        if (this._intersectsWith(this.containers[i].containerCache)) {
                            if (u && e.contains(this.containers[i].element[0], u.element[0])) continue;
                            u = this.containers[i], h = i
                        } else this.containers[i].containerCache.over && (this.containers[i]._trigger("out", t, this._uiHash(this)), this.containers[i].containerCache.over = 0);
                if (u)
                    if (1 === this.containers.length) this.containers[h].containerCache.over || (this.containers[h]._trigger("over", t, this._uiHash(this)), this.containers[h].containerCache.over = 1);
                    else {
                        for (a = 1e4, s = null, o = (d = u.floating || this._isFloating(this.currentItem)) ? "left" : "top", r = d ? "width" : "height", p = d ? "pageX" : "pageY", n = this.items.length - 1; n >= 0; n--) e.contains(this.containers[h].element[0], this.items[n].item[0]) && this.items[n].item[0] !== this.currentItem[0] && (l = this.items[n].item.offset()[o], c = !1, t[p] - l > this.items[n][r] / 2 && (c = !0), Math.abs(t[p] - l) < a && (a = Math.abs(t[p] - l), s = this.items[n], this.direction = c ? "up" : "down"));
                        if (!s && !this.options.dropOnEmpty) return;
                        if (this.currentContainer === this.containers[h]) return void (this.currentContainer.containerCache.over || (this.containers[h]._trigger("over", t, this._uiHash()), this.currentContainer.containerCache.over = 1));
                        s ? this._rearrange(t, s, null, !0) : this._rearrange(t, null, this.containers[h].element, !0), this._trigger("change", t, this._uiHash()), this.containers[h]._trigger("change", t, this._uiHash(this)), this.currentContainer = this.containers[h], this.options.placeholder.update(this.currentContainer, this.placeholder), this.containers[h]._trigger("over", t, this._uiHash(this)), this.containers[h].containerCache.over = 1
                    }
            },
            _createHelper: function (t) {
                var i = this.options,
                    n = e.isFunction(i.helper) ? e(i.helper.apply(this.element[0], [t, this.currentItem])) : "clone" === i.helper ? this.currentItem.clone() : this.currentItem;
                return n.parents("body").length || e("parent" !== i.appendTo ? i.appendTo : this.currentItem[0].parentNode)[0].appendChild(n[0]), n[0] === this.currentItem[0] && (this._storedCSS = {
                    width: this.currentItem[0].style.width,
                    height: this.currentItem[0].style.height,
                    position: this.currentItem.css("position"),
                    top: this.currentItem.css("top"),
                    left: this.currentItem.css("left")
                }), n[0].style.width && !i.forceHelperSize || n.width(this.currentItem.width()), n[0].style.height && !i.forceHelperSize || n.height(this.currentItem.height()), n
            },
            _adjustOffsetFromHelper: function (t) {
                "string" == typeof t && (t = t.split(" ")), e.isArray(t) && (t = {
                    left: +t[0],
                    top: +t[1] || 0
                }), "left" in t && (this.offset.click.left = t.left + this.margins.left), "right" in t && (this.offset.click.left = this.helperProportions.width - t.right + this.margins.left), "top" in t && (this.offset.click.top = t.top + this.margins.top), "bottom" in t && (this.offset.click.top = this.helperProportions.height - t.bottom + this.margins.top)
            },
            _getParentOffset: function () {
                this.offsetParent = this.helper.offsetParent();
                var t = this.offsetParent.offset();
                return "absolute" === this.cssPosition && this.scrollParent[0] !== this.document[0] && e.contains(this.scrollParent[0], this.offsetParent[0]) && (t.left += this.scrollParent.scrollLeft(), t.top += this.scrollParent.scrollTop()), (this.offsetParent[0] === this.document[0].body || this.offsetParent[0].tagName && "html" === this.offsetParent[0].tagName.toLowerCase() && e.ui.ie) && (t = {
                    top: 0,
                    left: 0
                }), {
                    top: t.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                    left: t.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
                }
            },
            _getRelativeOffset: function () {
                if ("relative" === this.cssPosition) {
                    var e = this.currentItem.position();
                    return {
                        top: e.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(),
                        left: e.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()
                    }
                }
                return {
                    top: 0,
                    left: 0
                }
            },
            _cacheMargins: function () {
                this.margins = {
                    left: parseInt(this.currentItem.css("marginLeft"), 10) || 0,
                    top: parseInt(this.currentItem.css("marginTop"), 10) || 0
                }
            },
            _cacheHelperProportions: function () {
                this.helperProportions = {
                    width: this.helper.outerWidth(),
                    height: this.helper.outerHeight()
                }
            },
            _setContainment: function () {
                var t, i, n, a = this.options;
                "parent" === a.containment && (a.containment = this.helper[0].parentNode), "document" !== a.containment && "window" !== a.containment || (this.containment = [0 - this.offset.relative.left - this.offset.parent.left, 0 - this.offset.relative.top - this.offset.parent.top, "document" === a.containment ? this.document.width() : this.window.width() - this.helperProportions.width - this.margins.left, ("document" === a.containment ? this.document.height() || document.body.parentNode.scrollHeight : this.window.height() || this.document[0].body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top]), /^(document|window|parent)$/.test(a.containment) || (t = e(a.containment)[0], i = e(a.containment).offset(), n = "hidden" !== e(t).css("overflow"), this.containment = [i.left + (parseInt(e(t).css("borderLeftWidth"), 10) || 0) + (parseInt(e(t).css("paddingLeft"), 10) || 0) - this.margins.left, i.top + (parseInt(e(t).css("borderTopWidth"), 10) || 0) + (parseInt(e(t).css("paddingTop"), 10) || 0) - this.margins.top, i.left + (n ? Math.max(t.scrollWidth, t.offsetWidth) : t.offsetWidth) - (parseInt(e(t).css("borderLeftWidth"), 10) || 0) - (parseInt(e(t).css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left, i.top + (n ? Math.max(t.scrollHeight, t.offsetHeight) : t.offsetHeight) - (parseInt(e(t).css("borderTopWidth"), 10) || 0) - (parseInt(e(t).css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top])
            },
            _convertPositionTo: function (t, i) {
                i || (i = this.position);
                var n = "absolute" === t ? 1 : -1,
                    a = "absolute" !== this.cssPosition || this.scrollParent[0] !== this.document[0] && e.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent,
                    s = /(html|body)/i.test(a[0].tagName);
                return {
                    top: i.top + this.offset.relative.top * n + this.offset.parent.top * n - ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : s ? 0 : a.scrollTop()) * n,
                    left: i.left + this.offset.relative.left * n + this.offset.parent.left * n - ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : s ? 0 : a.scrollLeft()) * n
                }
            },
            _generatePosition: function (t) {
                var i, n, a = this.options,
                    s = t.pageX,
                    o = t.pageY,
                    r = "absolute" !== this.cssPosition || this.scrollParent[0] !== this.document[0] && e.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent,
                    l = /(html|body)/i.test(r[0].tagName);
                return "relative" !== this.cssPosition || this.scrollParent[0] !== this.document[0] && this.scrollParent[0] !== this.offsetParent[0] || (this.offset.relative = this._getRelativeOffset()), this.originalPosition && (this.containment && (t.pageX - this.offset.click.left < this.containment[0] && (s = this.containment[0] + this.offset.click.left), t.pageY - this.offset.click.top < this.containment[1] && (o = this.containment[1] + this.offset.click.top), t.pageX - this.offset.click.left > this.containment[2] && (s = this.containment[2] + this.offset.click.left), t.pageY - this.offset.click.top > this.containment[3] && (o = this.containment[3] + this.offset.click.top)), a.grid && (i = this.originalPageY + Math.round((o - this.originalPageY) / a.grid[1]) * a.grid[1], o = this.containment ? i - this.offset.click.top >= this.containment[1] && i - this.offset.click.top <= this.containment[3] ? i : i - this.offset.click.top >= this.containment[1] ? i - a.grid[1] : i + a.grid[1] : i, n = this.originalPageX + Math.round((s - this.originalPageX) / a.grid[0]) * a.grid[0], s = this.containment ? n - this.offset.click.left >= this.containment[0] && n - this.offset.click.left <= this.containment[2] ? n : n - this.offset.click.left >= this.containment[0] ? n - a.grid[0] : n + a.grid[0] : n)), {
                    top: o - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : l ? 0 : r.scrollTop()),
                    left: s - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : l ? 0 : r.scrollLeft())
                }
            },
            _rearrange: function (e, t, i, n) {
                i ? i[0].appendChild(this.placeholder[0]) : t.item[0].parentNode.insertBefore(this.placeholder[0], "down" === this.direction ? t.item[0] : t.item[0].nextSibling), this.counter = this.counter ? ++this.counter : 1;
                var a = this.counter;
                this._delay((function () {
                    a === this.counter && this.refreshPositions(!n)
                }))
            },
            _clear: function (e, t) {
                this.reverting = !1;
                var i, n = [];
                if (!this._noFinalSort && this.currentItem.parent().length && this.placeholder.before(this.currentItem), this._noFinalSort = null, this.helper[0] === this.currentItem[0]) {
                    for (i in this._storedCSS) "auto" !== this._storedCSS[i] && "static" !== this._storedCSS[i] || (this._storedCSS[i] = "");
                    this.currentItem.css(this._storedCSS), this._removeClass(this.currentItem, "ui-sortable-helper")
                } else this.currentItem.show();

                function a(e, t, i) {
                    return function (n) {
                        i._trigger(e, n, t._uiHash(t))
                    }
                }
                for (this.fromOutside && !t && n.push((function (e) {
                    this._trigger("receive", e, this._uiHash(this.fromOutside))
                })), !this.fromOutside && this.domPosition.prev === this.currentItem.prev().not(".ui-sortable-helper")[0] && this.domPosition.parent === this.currentItem.parent()[0] || t || n.push((function (e) {
                    this._trigger("update", e, this._uiHash())
                })), this !== this.currentContainer && (t || (n.push((function (e) {
                    this._trigger("remove", e, this._uiHash())
                })), n.push(function (e) {
                    return function (t) {
                        e._trigger("receive", t, this._uiHash(this))
                    }
                }.call(this, this.currentContainer)), n.push(function (e) {
                    return function (t) {
                        e._trigger("update", t, this._uiHash(this))
                    }
                }.call(this, this.currentContainer)))), i = this.containers.length - 1; i >= 0; i--) t || n.push(a("deactivate", this, this.containers[i])), this.containers[i].containerCache.over && (n.push(a("out", this, this.containers[i])), this.containers[i].containerCache.over = 0);
                if (this.storedCursor && (this.document.find("body").css("cursor", this.storedCursor), this.storedStylesheet.remove()), this._storedOpacity && this.helper.css("opacity", this._storedOpacity), this._storedZIndex && this.helper.css("zIndex", "auto" === this._storedZIndex ? "" : this._storedZIndex), this.dragging = !1, t || this._trigger("beforeStop", e, this._uiHash()), this.placeholder[0].parentNode.removeChild(this.placeholder[0]), this.cancelHelperRemoval || (this.helper[0] !== this.currentItem[0] && this.helper.remove(), this.helper = null), !t) {
                    for (i = 0; i < n.length; i++) n[i].call(this, e);
                    this._trigger("stop", e, this._uiHash())
                }
                return this.fromOutside = !1, !this.cancelHelperRemoval
            },
            _trigger: function () {
                !1 === e.Widget.prototype._trigger.apply(this, arguments) && this.cancel()
            },
            _uiHash: function (t) {
                var i = t || this;
                return {
                    helper: i.helper,
                    placeholder: i.placeholder || e([]),
                    position: i.position,
                    originalPosition: i.originalPosition,
                    offset: i.positionAbs,
                    item: i.currentItem,
                    sender: t ? t.element : null
                }
            }
        });
        /*!
         * jQuery UI Progressbar 1.12.1
         * http://jqueryui.com
         *
         * Copyright jQuery Foundation and other contributors
         * Released under the MIT license.
         * http://jquery.org/license
         */
        /*!
         * jQuery UI Spinner 1.12.1
         * http://jqueryui.com
         *
         * Copyright jQuery Foundation and other contributors
         * Released under the MIT license.
         * http://jquery.org/license
         */
        function w(e) {
            return function () {
                var t = this.element.val();
                e.apply(this, arguments), this._refresh(), t !== this.element.val() && this._trigger("change")
            }
        }
        e.widget("ui.spinner", {
            version: "1.12.1",
            defaultElement: "<input>",
            widgetEventPrefix: "spin",
            options: {
                classes: {
                    "ui-spinner": "ui-corner-all",
                    "ui-spinner-down": "ui-corner-br",
                    "ui-spinner-up": "ui-corner-tr"
                },
                culture: null,
                icons: {
                    down: "ui-icon-triangle-1-s",
                    up: "ui-icon-triangle-1-n"
                },
                incremental: !0,
                max: null,
                min: null,
                numberFormat: null,
                page: 10,
                step: 1,
                change: null,
                spin: null,
                start: null,
                stop: null
            },
            _create: function () {
                this._setOption("max", this.options.max), this._setOption("min", this.options.min), this._setOption("step", this.options.step), "" !== this.value() && this._value(this.element.val(), !0), this._draw(), this._on(this._events), this._refresh(), this._on(this.window, {
                    beforeunload: function () {
                        this.element.removeAttr("autocomplete")
                    }
                })
            },
            _getCreateOptions: function () {
                var t = this._super(),
                    i = this.element;
                return e.each(["min", "max", "step"], (function (e, n) {
                    var a = i.attr(n);
                    null != a && a.length && (t[n] = a)
                })), t
            },
            _events: {
                keydown: function (e) {
                    this._start(e) && this._keydown(e) && e.preventDefault()
                },
                keyup: "_stop",
                focus: function () {
                    this.previous = this.element.val()
                },
                blur: function (e) {
                    this.cancelBlur ? delete this.cancelBlur : (this._stop(), this._refresh(), this.previous !== this.element.val() && this._trigger("change", e))
                },
                mousewheel: function (e, t) {
                    if (t) {
                        if (!this.spinning && !this._start(e)) return !1;
                        this._spin((t > 0 ? 1 : -1) * this.options.step, e), clearTimeout(this.mousewheelTimer), this.mousewheelTimer = this._delay((function () {
                            this.spinning && this._stop(e)
                        }), 100), e.preventDefault()
                    }
                },
                "mousedown .ui-spinner-button": function (t) {
                    var i;

                    function n() {
                        this.element[0] === e.ui.safeActiveElement(this.document[0]) || (this.element.trigger("focus"), this.previous = i, this._delay((function () {
                            this.previous = i
                        })))
                    }
                    i = this.element[0] === e.ui.safeActiveElement(this.document[0]) ? this.previous : this.element.val(), t.preventDefault(), n.call(this), this.cancelBlur = !0, this._delay((function () {
                        delete this.cancelBlur, n.call(this)
                    })), !1 !== this._start(t) && this._repeat(null, e(t.currentTarget).hasClass("ui-spinner-up") ? 1 : -1, t)
                },
                "mouseup .ui-spinner-button": "_stop",
                "mouseenter .ui-spinner-button": function (t) {
                    if (e(t.currentTarget).hasClass("ui-state-active")) return !1 !== this._start(t) && void this._repeat(null, e(t.currentTarget).hasClass("ui-spinner-up") ? 1 : -1, t)
                },
                "mouseleave .ui-spinner-button": "_stop"
            },
            _enhance: function () {
                this.uiSpinner = this.element.attr("autocomplete", "off").wrap("<span>").parent().append("<a></a><a></a>")
            },
            _draw: function () {
                this._enhance(), this._addClass(this.uiSpinner, "ui-spinner", "ui-widget ui-widget-content"), this._addClass("ui-spinner-input"), this.element.attr("role", "spinbutton"), this.buttons = this.uiSpinner.children("a").attr("tabIndex", -1).attr("aria-hidden", !0).button({
                    classes: {
                        "ui-button": ""
                    }
                }), this._removeClass(this.buttons, "ui-corner-all"), this._addClass(this.buttons.first(), "ui-spinner-button ui-spinner-up"), this._addClass(this.buttons.last(), "ui-spinner-button ui-spinner-down"), this.buttons.first().button({
                    icon: this.options.icons.up,
                    showLabel: !1
                }), this.buttons.last().button({
                    icon: this.options.icons.down,
                    showLabel: !1
                }), this.buttons.height() > Math.ceil(.5 * this.uiSpinner.height()) && this.uiSpinner.height() > 0 && this.uiSpinner.height(this.uiSpinner.height())
            },
            _keydown: function (t) {
                var i = this.options,
                    n = e.ui.keyCode;
                switch (t.keyCode) {
                    case n.UP:
                        return this._repeat(null, 1, t), !0;
                    case n.DOWN:
                        return this._repeat(null, -1, t), !0;
                    case n.PAGE_UP:
                        return this._repeat(null, i.page, t), !0;
                    case n.PAGE_DOWN:
                        return this._repeat(null, -i.page, t), !0
                }
                return !1
            },
            _start: function (e) {
                return !(!this.spinning && !1 === this._trigger("start", e)) && (this.counter || (this.counter = 1), this.spinning = !0, !0)
            },
            _repeat: function (e, t, i) {
                e = e || 500, clearTimeout(this.timer), this.timer = this._delay((function () {
                    this._repeat(40, t, i)
                }), e), this._spin(t * this.options.step, i)
            },
            _spin: function (e, t) {
                var i = this.value() || 0;
                this.counter || (this.counter = 1), i = this._adjustValue(i + e * this._increment(this.counter)), this.spinning && !1 === this._trigger("spin", t, {
                    value: i
                }) || (this._value(i), this.counter++)
            },
            _increment: function (t) {
                var i = this.options.incremental;
                return i ? e.isFunction(i) ? i(t) : Math.floor(t * t * t / 5e4 - t * t / 500 + 17 * t / 200 + 1) : 1
            },
            _precision: function () {
                var e = this._precisionOf(this.options.step);
                return null !== this.options.min && (e = Math.max(e, this._precisionOf(this.options.min))), e
            },
            _precisionOf: function (e) {
                var t = e.toString(),
                    i = t.indexOf(".");
                return -1 === i ? 0 : t.length - i - 1
            },
            _adjustValue: function (e) {
                var t, i, n = this.options;
                return i = e - (t = null !== n.min ? n.min : 0), e = t + (i = Math.round(i / n.step) * n.step), e = parseFloat(e.toFixed(this._precision())), null !== n.max && e > n.max ? n.max : null !== n.min && e < n.min ? n.min : e
            },
            _stop: function (e) {
                this.spinning && (clearTimeout(this.timer), clearTimeout(this.mousewheelTimer), this.counter = 0, this.spinning = !1, this._trigger("stop", e))
            },
            _setOption: function (e, t) {
                var i, n, a;
                if ("culture" === e || "numberFormat" === e) return i = this._parse(this.element.val()), this.options[e] = t, void this.element.val(this._format(i));
                "max" !== e && "min" !== e && "step" !== e || "string" == typeof t && (t = this._parse(t)), "icons" === e && (n = this.buttons.first().find(".ui-icon"), this._removeClass(n, null, this.options.icons.up), this._addClass(n, null, t.up), a = this.buttons.last().find(".ui-icon"), this._removeClass(a, null, this.options.icons.down), this._addClass(a, null, t.down)), this._super(e, t)
            },
            _setOptionDisabled: function (e) {
                this._super(e), this._toggleClass(this.uiSpinner, null, "ui-state-disabled", !!e), this.element.prop("disabled", !!e), this.buttons.button(e ? "disable" : "enable")
            },
            _setOptions: w((function (e) {
                this._super(e)
            })),
            _parse: function (e) {
                return "string" == typeof e && "" !== e && (e = window.Globalize && this.options.numberFormat ? Globalize.parseFloat(e, 10, this.options.culture) : +e), "" === e || isNaN(e) ? null : e
            },
            _format: function (e) {
                return "" === e ? "" : window.Globalize && this.options.numberFormat ? Globalize.format(e, this.options.numberFormat, this.options.culture) : e
            },
            _refresh: function () {
                this.element.attr({
                    "aria-valuemin": this.options.min,
                    "aria-valuemax": this.options.max,
                    "aria-valuenow": this._parse(this.element.val())
                })
            },
            isValid: function () {
                var e = this.value();
                return null !== e && e === this._adjustValue(e)
            },
            _value: function (e, t) {
                var i;
                "" !== e && null !== (i = this._parse(e)) && (t || (i = this._adjustValue(i)), e = this._format(i)), this.element.val(e), this._refresh()
            },
            _destroy: function () {
                this.element.prop("disabled", !1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"), this.uiSpinner.replaceWith(this.element)
            },
            stepUp: w((function (e) {
                this._stepUp(e)
            })),
            _stepUp: function (e) {
                this._start() && (this._spin((e || 1) * this.options.step), this._stop())
            },
            stepDown: w((function (e) {
                this._stepDown(e)
            })),
            _stepDown: function (e) {
                this._start() && (this._spin((e || 1) * -this.options.step), this._stop())
            },
            pageUp: w((function (e) {
                this._stepUp((e || 1) * this.options.page)
            })),
            pageDown: w((function (e) {
                this._stepDown((e || 1) * this.options.page)
            })),
            value: function (e) {
                if (!arguments.length) return this._parse(this.element.val());
                w(this._value).call(this, e)
            },
            widget: function () {
                return this.uiSpinner
            }
        }), !1 !== e.uiBackCompat && e.widget("ui.spinner", e.ui.spinner, {
            _enhance: function () {
                this.uiSpinner = this.element.attr("autocomplete", "off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())
            },
            _uiSpinnerHtml: function () {
                return "<span>"
            },
            _buttonHtml: function () {
                return "<a></a><a></a>"
            }
        });
        var _;
        /*!
         * jQuery UI Tabs 1.12.1
         * http://jqueryui.com
         *
         * Copyright jQuery Foundation and other contributors
         * Released under the MIT license.
         * http://jquery.org/license
         */
        e.ui.spinner;
        e.widget("ui.tabs", {
            version: "1.12.1",
            delay: 300,
            options: {
                active: null,
                classes: {
                    "ui-tabs": "ui-corner-all",
                    "ui-tabs-nav": "ui-corner-all",
                    "ui-tabs-panel": "ui-corner-bottom",
                    "ui-tabs-tab": "ui-corner-top"
                },
                collapsible: !1,
                event: "click",
                heightStyle: "content",
                hide: null,
                show: null,
                activate: null,
                beforeActivate: null,
                beforeLoad: null,
                load: null
            },
            _isLocal: (_ = /#.*$/, function (e) {
                var t, i;
                t = e.href.replace(_, ""), i = location.href.replace(_, "");
                try {
                    t = decodeURIComponent(t)
                } catch (e) { }
                try {
                    i = decodeURIComponent(i)
                } catch (e) { }
                return e.hash.length > 1 && t === i
            }),
            _create: function () {
                var t = this,
                    i = this.options;
                this.running = !1, this._addClass("ui-tabs", "ui-widget ui-widget-content"), this._toggleClass("ui-tabs-collapsible", null, i.collapsible), this._processTabs(), i.active = this._initialActive(), e.isArray(i.disabled) && (i.disabled = e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"), (function (e) {
                    return t.tabs.index(e)
                })))).sort()), !1 !== this.options.active && this.anchors.length ? this.active = this._findActive(i.active) : this.active = e(), this._refresh(), this.active.length && this.load(i.active)
            },
            _initialActive: function () {
                var t = this.options.active,
                    i = this.options.collapsible,
                    n = location.hash.substring(1);
                return null === t && (n && this.tabs.each((function (i, a) {
                    if (e(a).attr("aria-controls") === n) return t = i, !1
                })), null === t && (t = this.tabs.index(this.tabs.filter(".ui-tabs-active"))), null !== t && -1 !== t || (t = !!this.tabs.length && 0)), !1 !== t && -1 === (t = this.tabs.index(this.tabs.eq(t))) && (t = !i && 0), !i && !1 === t && this.anchors.length && (t = 0), t
            },
            _getCreateEventData: function () {
                return {
                    tab: this.active,
                    panel: this.active.length ? this._getPanelForTab(this.active) : e()
                }
            },
            _tabKeydown: function (t) {
                var i = e(e.ui.safeActiveElement(this.document[0])).closest("li"),
                    n = this.tabs.index(i),
                    a = !0;
                if (!this._handlePageNav(t)) {
                    switch (t.keyCode) {
                        case e.ui.keyCode.RIGHT:
                        case e.ui.keyCode.DOWN:
                            n++;
                            break;
                        case e.ui.keyCode.UP:
                        case e.ui.keyCode.LEFT:
                            a = !1, n--;
                            break;
                        case e.ui.keyCode.END:
                            n = this.anchors.length - 1;
                            break;
                        case e.ui.keyCode.HOME:
                            n = 0;
                            break;
                        case e.ui.keyCode.SPACE:
                            return t.preventDefault(), clearTimeout(this.activating), void this._activate(n);
                        case e.ui.keyCode.ENTER:
                            return t.preventDefault(), clearTimeout(this.activating), void this._activate(n !== this.options.active && n);
                        default:
                            return
                    }
                    t.preventDefault(), clearTimeout(this.activating), n = this._focusNextTab(n, a), t.ctrlKey || t.metaKey || (i.attr("aria-selected", "false"), this.tabs.eq(n).attr("aria-selected", "true"), this.activating = this._delay((function () {
                        this.option("active", n)
                    }), this.delay))
                }
            },
            _panelKeydown: function (t) {
                this._handlePageNav(t) || t.ctrlKey && t.keyCode === e.ui.keyCode.UP && (t.preventDefault(), this.active.trigger("focus"))
            },
            _handlePageNav: function (t) {
                return t.altKey && t.keyCode === e.ui.keyCode.PAGE_UP ? (this._activate(this._focusNextTab(this.options.active - 1, !1)), !0) : t.altKey && t.keyCode === e.ui.keyCode.PAGE_DOWN ? (this._activate(this._focusNextTab(this.options.active + 1, !0)), !0) : void 0
            },
            _findNextTab: function (t, i) {
                var n = this.tabs.length - 1;
                for (; - 1 !== e.inArray((t > n && (t = 0), t < 0 && (t = n), t), this.options.disabled);) t = i ? t + 1 : t - 1;
                return t
            },
            _focusNextTab: function (e, t) {
                return e = this._findNextTab(e, t), this.tabs.eq(e).trigger("focus"), e
            },
            _setOption: function (e, t) {
                "active" !== e ? (this._super(e, t), "collapsible" === e && (this._toggleClass("ui-tabs-collapsible", null, t), t || !1 !== this.options.active || this._activate(0)), "event" === e && this._setupEvents(t), "heightStyle" === e && this._setupHeightStyle(t)) : this._activate(t)
            },
            _sanitizeSelector: function (e) {
                return e ? e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g, "\\$&") : ""
            },
            refresh: function () {
                var t = this.options,
                    i = this.tablist.children(":has(a[href])");
                t.disabled = e.map(i.filter(".ui-state-disabled"), (function (e) {
                    return i.index(e)
                })), this._processTabs(), !1 !== t.active && this.anchors.length ? this.active.length && !e.contains(this.tablist[0], this.active[0]) ? this.tabs.length === t.disabled.length ? (t.active = !1, this.active = e()) : this._activate(this._findNextTab(Math.max(0, t.active - 1), !1)) : t.active = this.tabs.index(this.active) : (t.active = !1, this.active = e()), this._refresh()
            },
            _refresh: function () {
                this._setOptionDisabled(this.options.disabled), this._setupEvents(this.options.event), this._setupHeightStyle(this.options.heightStyle), this.tabs.not(this.active).attr({
                    "aria-selected": "false",
                    "aria-expanded": "false",
                    tabIndex: -1
                }), this.panels.not(this._getPanelForTab(this.active)).hide().attr({
                    "aria-hidden": "true"
                }), this.active.length ? (this.active.attr({
                    "aria-selected": "true",
                    "aria-expanded": "true",
                    tabIndex: 0
                }), this._addClass(this.active, "ui-tabs-active", "ui-state-active"), this._getPanelForTab(this.active).show().attr({
                    "aria-hidden": "false"
                })) : this.tabs.eq(0).attr("tabIndex", 0)
            },
            _processTabs: function () {
                var t = this,
                    i = this.tabs,
                    n = this.anchors,
                    a = this.panels;
                this.tablist = this._getList().attr("role", "tablist"), this._addClass(this.tablist, "ui-tabs-nav", "ui-helper-reset ui-helper-clearfix ui-widget-header"), this.tablist.on("mousedown" + this.eventNamespace, "> li", (function (t) {
                    e(this).is(".ui-state-disabled") && t.preventDefault()
                })).on("focus" + this.eventNamespace, ".ui-tabs-anchor", (function () {
                    e(this).closest("li").is(".ui-state-disabled") && this.blur()
                })), this.tabs = this.tablist.find("> li:has(a[href])").attr({
                    role: "tab",
                    tabIndex: -1
                }), this._addClass(this.tabs, "ui-tabs-tab", "ui-state-default"), this.anchors = this.tabs.map((function () {
                    return e("a", this)[0]
                })).attr({
                    role: "presentation",
                    tabIndex: -1
                }), this._addClass(this.anchors, "ui-tabs-anchor"), this.panels = e(), this.anchors.each((function (i, n) {
                    var a, s, o, r = e(n).uniqueId().attr("id"),
                        l = e(n).closest("li"),
                        c = l.attr("aria-controls");
                    t._isLocal(n) ? (o = (a = n.hash).substring(1), s = t.element.find(t._sanitizeSelector(a))) : (a = "#" + (o = l.attr("aria-controls") || e({}).uniqueId()[0].id), (s = t.element.find(a)).length || (s = t._createPanel(o)).insertAfter(t.panels[i - 1] || t.tablist), s.attr("aria-live", "polite")), s.length && (t.panels = t.panels.add(s)), c && l.data("ui-tabs-aria-controls", c), l.attr({
                        "aria-controls": o,
                        "aria-labelledby": r
                    }), s.attr("aria-labelledby", r)
                })), this.panels.attr("role", "tabpanel"), this._addClass(this.panels, "ui-tabs-panel", "ui-widget-content"), i && (this._off(i.not(this.tabs)), this._off(n.not(this.anchors)), this._off(a.not(this.panels)))
            },
            _getList: function () {
                return this.tablist || this.element.find("ol, ul").eq(0)
            },
            _createPanel: function (t) {
                return e("<div>").attr("id", t).data("ui-tabs-destroy", !0)
            },
            _setOptionDisabled: function (t) {
                var i, n, a;
                for (e.isArray(t) && (t.length ? t.length === this.anchors.length && (t = !0) : t = !1), a = 0; n = this.tabs[a]; a++) i = e(n), !0 === t || -1 !== e.inArray(a, t) ? (i.attr("aria-disabled", "true"), this._addClass(i, null, "ui-state-disabled")) : (i.removeAttr("aria-disabled"), this._removeClass(i, null, "ui-state-disabled"));
                this.options.disabled = t, this._toggleClass(this.widget(), this.widgetFullName + "-disabled", null, !0 === t)
            },
            _setupEvents: function (t) {
                var i = {};
                t && e.each(t.split(" "), (function (e, t) {
                    i[t] = "_eventHandler"
                })), this._off(this.anchors.add(this.tabs).add(this.panels)), this._on(!0, this.anchors, {
                    click: function (e) {
                        e.preventDefault()
                    }
                }), this._on(this.anchors, i), this._on(this.tabs, {
                    keydown: "_tabKeydown"
                }), this._on(this.panels, {
                    keydown: "_panelKeydown"
                }), this._focusable(this.tabs), this._hoverable(this.tabs)
            },
            _setupHeightStyle: function (t) {
                var i, n = this.element.parent();
                "fill" === t ? (i = n.height(), i -= this.element.outerHeight() - this.element.height(), this.element.siblings(":visible").each((function () {
                    var t = e(this),
                        n = t.css("position");
                    "absolute" !== n && "fixed" !== n && (i -= t.outerHeight(!0))
                })), this.element.children().not(this.panels).each((function () {
                    i -= e(this).outerHeight(!0)
                })), this.panels.each((function () {
                    e(this).height(Math.max(0, i - e(this).innerHeight() + e(this).height()))
                })).css("overflow", "auto")) : "auto" === t && (i = 0, this.panels.each((function () {
                    i = Math.max(i, e(this).height("").height())
                })).height(i))
            },
            _eventHandler: function (t) {
                var i = this.options,
                    n = this.active,
                    a = e(t.currentTarget).closest("li"),
                    s = a[0] === n[0],
                    o = s && i.collapsible,
                    r = o ? e() : this._getPanelForTab(a),
                    l = n.length ? this._getPanelForTab(n) : e(),
                    c = {
                        oldTab: n,
                        oldPanel: l,
                        newTab: o ? e() : a,
                        newPanel: r
                    };
                t.preventDefault(), a.hasClass("ui-state-disabled") || a.hasClass("ui-tabs-loading") || this.running || s && !i.collapsible || !1 === this._trigger("beforeActivate", t, c) || (i.active = !o && this.tabs.index(a), this.active = s ? e() : a, this.xhr && this.xhr.abort(), l.length || r.length || e.error("jQuery UI Tabs: Mismatching fragment identifier."), r.length && this.load(this.tabs.index(a), t), this._toggle(t, c))
            },
            _toggle: function (t, i) {
                var n = this,
                    a = i.newPanel,
                    s = i.oldPanel;

                function o() {
                    n.running = !1, n._trigger("activate", t, i)
                }

                function r() {
                    n._addClass(i.newTab.closest("li"), "ui-tabs-active", "ui-state-active"), a.length && n.options.show ? n._show(a, n.options.show, o) : (a.show(), o())
                }
                this.running = !0, s.length && this.options.hide ? this._hide(s, this.options.hide, (function () {
                    n._removeClass(i.oldTab.closest("li"), "ui-tabs-active", "ui-state-active"), r()
                })) : (this._removeClass(i.oldTab.closest("li"), "ui-tabs-active", "ui-state-active"), s.hide(), r()), s.attr("aria-hidden", "true"), i.oldTab.attr({
                    "aria-selected": "false",
                    "aria-expanded": "false"
                }), a.length && s.length ? i.oldTab.attr("tabIndex", -1) : a.length && this.tabs.filter((function () {
                    return 0 === e(this).attr("tabIndex")
                })).attr("tabIndex", -1), a.attr("aria-hidden", "false"), i.newTab.attr({
                    "aria-selected": "true",
                    "aria-expanded": "true",
                    tabIndex: 0
                })
            },
            _activate: function (t) {
                var i, n = this._findActive(t);
                n[0] !== this.active[0] && (n.length || (n = this.active), i = n.find(".ui-tabs-anchor")[0], this._eventHandler({
                    target: i,
                    currentTarget: i,
                    preventDefault: e.noop
                }))
            },
            _findActive: function (t) {
                return !1 === t ? e() : this.tabs.eq(t)
            },
            _getIndex: function (t) {
                return "string" == typeof t && (t = this.anchors.index(this.anchors.filter("[href$='" + e.ui.escapeSelector(t) + "']"))), t
            },
            _destroy: function () {
                this.xhr && this.xhr.abort(), this.tablist.removeAttr("role").off(this.eventNamespace), this.anchors.removeAttr("role tabIndex").removeUniqueId(), this.tabs.add(this.panels).each((function () {
                    e.data(this, "ui-tabs-destroy") ? e(this).remove() : e(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")
                })), this.tabs.each((function () {
                    var t = e(this),
                        i = t.data("ui-tabs-aria-controls");
                    i ? t.attr("aria-controls", i).removeData("ui-tabs-aria-controls") : t.removeAttr("aria-controls")
                })), this.panels.show(), "content" !== this.options.heightStyle && this.panels.css("height", "")
            },
            enable: function (t) {
                var i = this.options.disabled;
                !1 !== i && (void 0 === t ? i = !1 : (t = this._getIndex(t), i = e.isArray(i) ? e.map(i, (function (e) {
                    return e !== t ? e : null
                })) : e.map(this.tabs, (function (e, i) {
                    return i !== t ? i : null
                }))), this._setOptionDisabled(i))
            },
            disable: function (t) {
                var i = this.options.disabled;
                if (!0 !== i) {
                    if (void 0 === t) i = !0;
                    else {
                        if (t = this._getIndex(t), -1 !== e.inArray(t, i)) return;
                        i = e.isArray(i) ? e.merge([t], i).sort() : [t]
                    }
                    this._setOptionDisabled(i)
                }
            },
            load: function (t, i) {
                t = this._getIndex(t);
                var n = this,
                    a = this.tabs.eq(t),
                    s = a.find(".ui-tabs-anchor"),
                    o = this._getPanelForTab(a),
                    r = {
                        tab: a,
                        panel: o
                    },
                    l = function (e, t) {
                        "abort" === t && n.panels.stop(!1, !0), n._removeClass(a, "ui-tabs-loading"), o.removeAttr("aria-busy"), e === n.xhr && delete n.xhr
                    };
                this._isLocal(s[0]) || (this.xhr = e.ajax(this._ajaxSettings(s, i, r)), this.xhr && "canceled" !== this.xhr.statusText && (this._addClass(a, "ui-tabs-loading"), o.attr("aria-busy", "true"), this.xhr.done((function (e, t, a) {
                    setTimeout((function () {
                        o.html(e), n._trigger("load", i, r), l(a, t)
                    }), 1)
                })).fail((function (e, t) {
                    setTimeout((function () {
                        l(e, t)
                    }), 1)
                }))))
            },
            _ajaxSettings: function (t, i, n) {
                var a = this;
                return {
                    url: t.attr("href").replace(/#.*$/, ""),
                    beforeSend: function (t, s) {
                        return a._trigger("beforeLoad", i, e.extend({
                            jqXHR: t,
                            ajaxSettings: s
                        }, n))
                    }
                }
            },
            _getPanelForTab: function (t) {
                var i = e(t).attr("aria-controls");
                return this.element.find(this._sanitizeSelector("#" + i))
            }
        }), !1 !== e.uiBackCompat && e.widget("ui.tabs", e.ui.tabs, {
            _processTabs: function () {
                this._superApply(arguments), this._addClass(this.tabs, "ui-tab")
            }
        });
        e.ui.tabs;
        /*!
         * jQuery UI Tooltip 1.12.1
         * http://jqueryui.com
         *
         * Copyright jQuery Foundation and other contributors
         * Released under the MIT license.
         * http://jquery.org/license
         */
        e.widget("ui.tooltip", {
            version: "1.12.1",
            options: {
                classes: {
                    "ui-tooltip": "ui-corner-all ui-widget-shadow"
                },
                content: function () {
                    var t = e(this).attr("title") || "";
                    return e("<a>").text(t).html()
                },
                hide: !0,
                items: "[title]:not([disabled])",
                position: {
                    my: "left top+15",
                    at: "left bottom",
                    collision: "flipfit flip"
                },
                show: !0,
                track: !1,
                close: null,
                open: null
            },
            _addDescribedBy: function (t, i) {
                var n = (t.attr("aria-describedby") || "").split(/\s+/);
                n.push(i), t.data("ui-tooltip-id", i).attr("aria-describedby", e.trim(n.join(" ")))
            },
            _removeDescribedBy: function (t) {
                var i = t.data("ui-tooltip-id"),
                    n = (t.attr("aria-describedby") || "").split(/\s+/),
                    a = e.inArray(i, n); - 1 !== a && n.splice(a, 1), t.removeData("ui-tooltip-id"), (n = e.trim(n.join(" "))) ? t.attr("aria-describedby", n) : t.removeAttr("aria-describedby")
            },
            _create: function () {
                this._on({
                    mouseover: "open",
                    focusin: "open"
                }), this.tooltips = {}, this.parents = {}, this.liveRegion = e("<div>").attr({
                    role: "log",
                    "aria-live": "assertive",
                    "aria-relevant": "additions"
                }).appendTo(this.document[0].body), this._addClass(this.liveRegion, null, "ui-helper-hidden-accessible"), this.disabledTitles = e([])
            },
            _setOption: function (t, i) {
                var n = this;
                this._super(t, i), "content" === t && e.each(this.tooltips, (function (e, t) {
                    n._updateContent(t.element)
                }))
            },
            _setOptionDisabled: function (e) {
                this[e ? "_disable" : "_enable"]()
            },
            _disable: function () {
                var t = this;
                e.each(this.tooltips, (function (i, n) {
                    var a = e.Event("blur");
                    a.target = a.currentTarget = n.element[0], t.close(a, !0)
                })), this.disabledTitles = this.disabledTitles.add(this.element.find(this.options.items).addBack().filter((function () {
                    var t = e(this);
                    if (t.is("[title]")) return t.data("ui-tooltip-title", t.attr("title")).removeAttr("title")
                })))
            },
            _enable: function () {
                this.disabledTitles.each((function () {
                    var t = e(this);
                    t.data("ui-tooltip-title") && t.attr("title", t.data("ui-tooltip-title"))
                })), this.disabledTitles = e([])
            },
            open: function (t) {
                var i = this,
                    n = e(t ? t.target : this.element).closest(this.options.items);
                n.length && !n.data("ui-tooltip-id") && (n.attr("title") && n.data("ui-tooltip-title", n.attr("title")), n.data("ui-tooltip-open", !0), t && "mouseover" === t.type && n.parents().each((function () {
                    var t, n = e(this);
                    n.data("ui-tooltip-open") && ((t = e.Event("blur")).target = t.currentTarget = this, i.close(t, !0)), n.attr("title") && (n.uniqueId(), i.parents[this.id] = {
                        element: this,
                        title: n.attr("title")
                    }, n.attr("title", ""))
                })), this._registerCloseHandlers(t, n), this._updateContent(n, t))
            },
            _updateContent: function (e, t) {
                var i, n = this.options.content,
                    a = this,
                    s = t ? t.type : null;
                if ("string" == typeof n || n.nodeType || n.jquery) return this._open(t, e, n);
                (i = n.call(e[0], (function (i) {
                    a._delay((function () {
                        e.data("ui-tooltip-open") && (t && (t.type = s), this._open(t, e, i))
                    }))
                }))) && this._open(t, e, i)
            },
            _open: function (t, i, n) {
                var a, s, o, r, l = e.extend({}, this.options.position);

                function c(e) {
                    l.of = e, s.is(":hidden") || s.position(l)
                }
                n && ((a = this._find(i)) ? a.tooltip.find(".ui-tooltip-content").html(n) : (i.is("[title]") && (t && "mouseover" === t.type ? i.attr("title", "") : i.removeAttr("title")), a = this._tooltip(i), s = a.tooltip, this._addDescribedBy(i, s.attr("id")), s.find(".ui-tooltip-content").html(n), this.liveRegion.children().hide(), (r = e("<div>").html(s.find(".ui-tooltip-content").html())).removeAttr("name").find("[name]").removeAttr("name"), r.removeAttr("id").find("[id]").removeAttr("id"), r.appendTo(this.liveRegion), this.options.track && t && /^mouse/.test(t.type) ? (this._on(this.document, {
                    mousemove: c
                }), c(t)) : s.position(e.extend({
                    of: i
                }, this.options.position)), s.hide(), this._show(s, this.options.show), this.options.track && this.options.show && this.options.show.delay && (o = this.delayedShow = setInterval((function () {
                    s.is(":visible") && (c(l.of), clearInterval(o))
                }), e.fx.interval)), this._trigger("open", t, {
                    tooltip: s
                })))
            },
            _registerCloseHandlers: function (t, i) {
                var n = {
                    keyup: function (t) {
                        if (t.keyCode === e.ui.keyCode.ESCAPE) {
                            var n = e.Event(t);
                            n.currentTarget = i[0], this.close(n, !0)
                        }
                    }
                };
                i[0] !== this.element[0] && (n.remove = function () {
                    this._removeTooltip(this._find(i).tooltip)
                }), t && "mouseover" !== t.type || (n.mouseleave = "close"), t && "focusin" !== t.type || (n.focusout = "close"), this._on(!0, i, n)
            },
            close: function (t) {
                var i, n = this,
                    a = e(t ? t.currentTarget : this.element),
                    s = this._find(a);
                s ? (i = s.tooltip, s.closing || (clearInterval(this.delayedShow), a.data("ui-tooltip-title") && !a.attr("title") && a.attr("title", a.data("ui-tooltip-title")), this._removeDescribedBy(a), s.hiding = !0, i.stop(!0), this._hide(i, this.options.hide, (function () {
                    n._removeTooltip(e(this))
                })), a.removeData("ui-tooltip-open"), this._off(a, "mouseleave focusout keyup"), a[0] !== this.element[0] && this._off(a, "remove"), this._off(this.document, "mousemove"), t && "mouseleave" === t.type && e.each(this.parents, (function (t, i) {
                    e(i.element).attr("title", i.title), delete n.parents[t]
                })), s.closing = !0, this._trigger("close", t, {
                    tooltip: i
                }), s.hiding || (s.closing = !1))) : a.removeData("ui-tooltip-open")
            },
            _tooltip: function (t) {
                var i = e("<div>").attr("role", "tooltip"),
                    n = e("<div>").appendTo(i),
                    a = i.uniqueId().attr("id");
                return this._addClass(n, "ui-tooltip-content"), this._addClass(i, "ui-tooltip", "ui-widget ui-widget-content"), i.appendTo(this._appendTo(t)), this.tooltips[a] = {
                    element: t,
                    tooltip: i
                }
            },
            _find: function (e) {
                var t = e.data("ui-tooltip-id");
                return t ? this.tooltips[t] : null
            },
            _removeTooltip: function (e) {
                e.remove(), delete this.tooltips[e.attr("id")]
            },
            _appendTo: function (e) {
                var t = e.closest(".ui-front, dialog");
                return t.length || (t = this.document[0].body), t
            },
            _destroy: function () {
                var t = this;
                e.each(this.tooltips, (function (i, n) {
                    var a = e.Event("blur"),
                        s = n.element;
                    a.target = a.currentTarget = s[0], t.close(a, !0), e("#" + i).remove(), s.data("ui-tooltip-title") && (s.attr("title") || s.attr("title", s.data("ui-tooltip-title")), s.removeData("ui-tooltip-title"))
                })), this.liveRegion.remove()
            }
        }), !1 !== e.uiBackCompat && e.widget("ui.tooltip", e.ui.tooltip, {
            options: {
                tooltipClass: null
            },
            _tooltip: function () {
                var e = this._superApply(arguments);
                return this.options.tooltipClass && e.tooltip.addClass(this.options.tooltipClass), e
            }
        });
        e.ui.tooltip
    })),
    /*!
     * jQuery UI Touch Punch Fork 0.4.0
     *
     * Copyright 2011â€“2014, Dave Furfero
     * Dual licensed under the MIT or GPL Version 2 licenses.
     *
     * Depends:
     *  jquery.ui.widget.js
     *  jquery.ui.mouse.js
     */
    function (e) {
        "function" == typeof define && define.amd ? define(["jquery", "jquery-ui/mouse"], e) : e(jQuery)
    }((function (e) {
        if (e.support.touch = "ontouchend" in document || "onpointerdown" in document || "onMSPointerDown" in document, e.support.touch) {
            var t, i, n = e.ui.mouse.prototype,
                a = n._mouseInit,
                s = n._mouseDestroy;
            return n._touchStart = function (e) {
                var n = this,
                    a = e.originalEvent.changedTouches[0];
                n._touchMoved = !1, n._touchStartTime = (new Date).getTime(), n._touchStartX = a.clientX, n._touchStartY = a.clientY, !t && n._mouseCapture(a) && (t = !0, o(e, "mouseover"), o(e, "mousemove"), o(e, "mousedown"), i = setTimeout((function () {
                    n._touchMoved || (e.longTap = !0, n._touchEnd(e))
                }), 750))
            }, n._touchMove = function (e) {
                if (t) {
                    var i = e.originalEvent.changedTouches[0],
                        n = (new Date).getTime() - this._touchStartTime,
                        a = Math.abs(i.clientX - this._touchStartX),
                        s = Math.abs(i.clientY - this._touchStartY);
                    (n > 150 || a > 5 || s > 5) && (this._touchMoved = !0), o(e, "mousemove")
                }
            }, n._touchEnd = function (e) {
                t && (o(e, "mouseup"), o(e, "mouseout"), this._touchMoved || (e.longTap ? o(e, "contextmenu") : o(e, "click")), clearTimeout(i), t = !1)
            }, n._mouseInit = function () {
                var t = this;
                t.element.on({
                    touchstart: e.proxy(t, "_touchStart"),
                    touchmove: e.proxy(t, "_touchMove"),
                    touchend: e.proxy(t, "_touchEnd")
                }), navigator.userAgent.match("MSIE") && t.element.css("-ms-touch-action", "none"), a.call(t)
            }, n._mouseDestroy = function () {
                var t = this;
                t.element.off({
                    touchstart: e.proxy(t, "_touchStart"),
                    touchmove: e.proxy(t, "_touchMove"),
                    touchend: e.proxy(t, "_touchEnd")
                }), s.call(t)
            }, e
        }

        function o(t, i) {
            if (!(t.originalEvent.touches.length > 1)) {
                var n = t.originalEvent.changedTouches[0],
                    a = document.createEvent("MouseEvents");
                e(n.target).is("input") || e(n.target).is("textarea") ? t.stopPropagation() : t.preventDefault(), a.initMouseEvent(i, !0, !0, window, 1, n.screenX, n.screenY, n.clientX + e(window).scrollLeft(), n.clientY + e(window).scrollTop(), !1, !1, !1, !1, 0, null), t.target.dispatchEvent(a)
            }
        }
    })),
    function (e) {
        var t;
        if ("function" == typeof define && define.amd && (define(e), t = !0), "object" == typeof exports && (module.exports = e(), t = !0), !t) {
            var i = window.Cookies,
                n = window.Cookies = e();
            n.noConflict = function () {
                return window.Cookies = i, n
            }
        }
    }((function () {
        function e() {
            for (var e = 0, t = {}; e < arguments.length; e++) {
                var i = arguments[e];
                for (var n in i) t[n] = i[n]
            }
            return t
        }
        return function t(i) {
            function n(t, a, s) {
                if ("undefined" != typeof document) {
                    if (arguments.length > 1) {
                        "number" == typeof (s = e({
                            path: "/"
                        }, n.defaults, s)).expires && (s.expires = new Date(1 * new Date + 864e5 * s.expires)), s.expires = s.expires ? s.expires.toUTCString() : "";
                        try {
                            var o = JSON.stringify(a);
                            /^[\{\[]/.test(o) && (a = o)
                        } catch (e) { }
                        a = i.write ? i.write(a, t) : encodeURIComponent(String(a)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent), t = encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent).replace(/[\(\)]/g, escape);
                        var r = "";
                        for (var l in s) s[l] && (r += "; " + l, !0 !== s[l] && (r += "=" + s[l].split(";")[0]));
                        return document.cookie = t + "=" + a + r
                    }
                    for (var c = {}, d = function (e) {
                        return e.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent)
                    }, p = document.cookie ? document.cookie.split("; ") : [], u = 0; u < p.length; u++) {
                        var h = p[u].split("="),
                            f = h.slice(1).join("=");
                        this.json || '"' !== f.charAt(0) || (f = f.slice(1, -1));
                        try {
                            var m = d(h[0]);
                            if (f = (i.read || i)(f, m) || d(f), this.json) try {
                                f = JSON.parse(f)
                            } catch (e) { }
                            if (c[m] = f, t === m) break
                        } catch (e) { }
                    }
                    return t ? c[t] : c
                }
            }
            return n.set = n, n.get = function (e) {
                return n.call(n, e)
            }, n.getJSON = function (e) {
                return n.call({
                    json: !0
                }, e)
            }, n.remove = function (t, i) {
                n(t, "", e(i, {
                    expires: -1
                }))
            }, n.defaults = {}, n.withConverter = t, n
        }((function () { }))
    })), jQuery.uaMatch = function (e) {
        e = e.toLowerCase();
        var t = /(chrome)[ \/]([\w.]+)/.exec(e) || /(webkit)[ \/]([\w.]+)/.exec(e) || /(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e) || /(msie) ([\w.]+)/.exec(e) || e.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e) || [];
        return {
            browser: t[1] || "",
            version: t[2] || "0"
        }
    }, !jQuery.browser) {
    var matched = jQuery.uaMatch(navigator.userAgent),
        browser = {};
    matched.browser && (browser[matched.browser] = !0, browser.version = matched.version), browser.chrome ? browser.webkit = !0 : browser.webkit && (browser.safari = !0), jQuery.browser = browser
}
/*!
 * jQuery Transit - CSS3 transitions and transformations
 * Copyright(c) 2011 Rico Sta. Cruz <rico@ricostacruz.com>
 * MIT Licensed.
 *
 * http://ricostacruz.com/jquery.transit
 * http://github.com/rstacruz/jquery.transit
 */
/*!
jQuery WaitForImages

Copyright (c) 2012 Alex Dickson

Permission is hereby granted, free of charge, to any person
obtaining a copy of this software and associated documentation
files (the "Software"), to deal in the Software without
restriction, including without limitation the rights to use,
copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following
conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.

https://github.com/alexanderdickson/waitForImages
*/
function b64EncodeUnicode(e) {
    return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g, (function (e, t) {
        return String.fromCharCode("0x" + t)
    })))
}

function b64DecodeUnicode(e) {
    return decodeURIComponent(atob(e).split("").map((function (e) {
        return "%" + ("00" + e.charCodeAt(0).toString(16)).slice(-2)
    })).join(""))
} ! function (e) {
    function t(e) {
        if (e in r.style) return e;
        var t = ["Moz", "Webkit", "O", "ms"],
            i = e.charAt(0).toUpperCase() + e.substr(1);
        if (e in r.style) return e;
        for (e = 0; e < t.length; ++e) {
            var n = t[e] + i;
            if (n in r.style) return n
        }
    }

    function i(e) {
        return "string" == typeof e && this.parse(e), this
    }

    function n(t, i, n, a) {
        var s = [];
        e.each(t, (function (t) {
            t = e.camelCase(t), t = (t = e.transit.propertyMap[t] || e.cssProps[t] || t).replace(/([A-Z])/g, (function (e) {
                return "-" + e.toLowerCase()
            })), -1 === e.inArray(t, s) && s.push(t)
        })), e.cssEase[n] && (n = e.cssEase[n]);
        var r = o(i) + " " + n;
        0 < parseInt(a, 10) && (r += " " + o(a));
        var l = [];
        return e.each(s, (function (e, t) {
            l.push(t + " " + r)
        })), l.join(", ")
    }

    function a(t, i) {
        i || (e.cssNumber[t] = !0), e.transit.propertyMap[t] = l.transform, e.cssHooks[t] = {
            get: function (i) {
                return e(i).css("transit:transform").get(t)
            },
            set: function (i, n) {
                var a = e(i).css("transit:transform");
                a.setFromString(t, n), e(i).css({
                    "transit:transform": a
                })
            }
        }
    }

    function s(e, t) {
        return "string" != typeof e || e.match(/^[\-0-9\.]+$/) ? "" + e + t : e
    }

    function o(t) {
        return e.fx.speeds[t] && (t = e.fx.speeds[t]), s(t, "ms")
    }
    e.transit = {
        version: "0.9.9",
        propertyMap: {
            marginLeft: "margin",
            marginRight: "margin",
            marginBottom: "margin",
            marginTop: "margin",
            paddingLeft: "padding",
            paddingRight: "padding",
            paddingBottom: "padding",
            paddingTop: "padding"
        },
        enabled: !0,
        useTransitionEnd: !1
    };
    var r = document.createElement("div"),
        l = {},
        c = -1 < navigator.userAgent.toLowerCase().indexOf("chrome");
    l.transition = t("transition"), l.transitionDelay = t("transitionDelay"), l.transform = t("transform"), l.transformOrigin = t("transformOrigin"), r.style[l.transform] = "", r.style[l.transform] = "rotateY(90deg)", l.transform3d = "" !== r.style[l.transform];
    var d, p = l.transitionEnd = {
        transition: "transitionEnd",
        MozTransition: "transitionend",
        OTransition: "oTransitionEnd",
        WebkitTransition: "webkitTransitionEnd",
        msTransition: "MSTransitionEnd"
    }[l.transition] || null;
    for (d in l) l.hasOwnProperty(d) && void 0 === e.support[d] && (e.support[d] = l[d]);
    r = null, e.cssEase = {
        _default: "ease",
        in: "ease-in",
        out: "ease-out",
        "in-out": "ease-in-out",
        snap: "cubic-bezier(0,1,.5,1)",
        easeOutCubic: "cubic-bezier(.215,.61,.355,1)",
        easeInOutCubic: "cubic-bezier(.645,.045,.355,1)",
        easeInCirc: "cubic-bezier(.6,.04,.98,.335)",
        easeOutCirc: "cubic-bezier(.075,.82,.165,1)",
        easeInOutCirc: "cubic-bezier(.785,.135,.15,.86)",
        easeInExpo: "cubic-bezier(.95,.05,.795,.035)",
        easeOutExpo: "cubic-bezier(.19,1,.22,1)",
        easeInOutExpo: "cubic-bezier(1,0,0,1)",
        easeInQuad: "cubic-bezier(.55,.085,.68,.53)",
        easeOutQuad: "cubic-bezier(.25,.46,.45,.94)",
        easeInOutQuad: "cubic-bezier(.455,.03,.515,.955)",
        easeInQuart: "cubic-bezier(.895,.03,.685,.22)",
        easeOutQuart: "cubic-bezier(.165,.84,.44,1)",
        easeInOutQuart: "cubic-bezier(.77,0,.175,1)",
        easeInQuint: "cubic-bezier(.755,.05,.855,.06)",
        easeOutQuint: "cubic-bezier(.23,1,.32,1)",
        easeInOutQuint: "cubic-bezier(.86,0,.07,1)",
        easeInSine: "cubic-bezier(.47,0,.745,.715)",
        easeOutSine: "cubic-bezier(.39,.575,.565,1)",
        easeInOutSine: "cubic-bezier(.445,.05,.55,.95)",
        easeInBack: "cubic-bezier(.6,-.28,.735,.045)",
        easeOutBack: "cubic-bezier(.175, .885,.32,1.275)",
        easeInOutBack: "cubic-bezier(.68,-.55,.265,1.55)"
    }, e.cssHooks["transit:transform"] = {
        get: function (t) {
            return e(t).data("transform") || new i
        },
        set: function (t, n) {
            var a = n;
            a instanceof i || (a = new i(a)), t.style[l.transform] = "WebkitTransform" !== l.transform || c ? a.toString() : a.toString(!0), e(t).data("transform", a)
        }
    }, e.cssHooks.transform = {
        set: e.cssHooks["transit:transform"].set
    }, "1.8" > e.fn.jquery && (e.cssHooks.transformOrigin = {
        get: function (e) {
            return e.style[l.transformOrigin]
        },
        set: function (e, t) {
            e.style[l.transformOrigin] = t
        }
    }, e.cssHooks.transition = {
        get: function (e) {
            return e.style[l.transition]
        },
        set: function (e, t) {
            e.style[l.transition] = t
        }
    }), a("scale"), a("translate"), a("rotate"), a("rotateX"), a("rotateY"), a("rotate3d"), a("perspective"), a("skewX"), a("skewY"), a("x", !0), a("y", !0), i.prototype = {
        setFromString: function (e, t) {
            var n = "string" == typeof t ? t.split(",") : t.constructor === Array ? t : [t];
            n.unshift(e), i.prototype.set.apply(this, n)
        },
        set: function (e) {
            var t = Array.prototype.slice.apply(arguments, [1]);
            this.setter[e] ? this.setter[e].apply(this, t) : this[e] = t.join(",")
        },
        get: function (e) {
            return this.getter[e] ? this.getter[e].apply(this) : this[e] || 0
        },
        setter: {
            rotate: function (e) {
                this.rotate = s(e, "deg")
            },
            rotateX: function (e) {
                this.rotateX = s(e, "deg")
            },
            rotateY: function (e) {
                this.rotateY = s(e, "deg")
            },
            scale: function (e, t) {
                void 0 === t && (t = e), this.scale = e + "," + t
            },
            skewX: function (e) {
                this.skewX = s(e, "deg")
            },
            skewY: function (e) {
                this.skewY = s(e, "deg")
            },
            perspective: function (e) {
                this.perspective = s(e, "px")
            },
            x: function (e) {
                this.set("translate", e, null)
            },
            y: function (e) {
                this.set("translate", null, e)
            },
            translate: function (e, t) {
                void 0 === this._translateX && (this._translateX = 0), void 0 === this._translateY && (this._translateY = 0), null != e && (this._translateX = s(e, "px")), null != t && (this._translateY = s(t, "px")), this.translate = this._translateX + "," + this._translateY
            }
        },
        getter: {
            x: function () {
                return this._translateX || 0
            },
            y: function () {
                return this._translateY || 0
            },
            scale: function () {
                var e = (this.scale || "1,1").split(",");
                return e[0] && (e[0] = parseFloat(e[0])), e[1] && (e[1] = parseFloat(e[1])), e[0] === e[1] ? e[0] : e
            },
            rotate3d: function () {
                for (var e = (this.rotate3d || "0,0,0,0deg").split(","), t = 0; 3 >= t; ++t) e[t] && (e[t] = parseFloat(e[t]));
                return e[3] && (e[3] = s(e[3], "deg")), e
            }
        },
        parse: function (e) {
            var t = this;
            e.replace(/([a-zA-Z0-9]+)\((.*?)\)/g, (function (e, i, n) {
                t.setFromString(i, n)
            }))
        },
        toString: function (e) {
            var t, i = [];
            for (t in this) this.hasOwnProperty(t) && (l.transform3d || "rotateX" !== t && "rotateY" !== t && "perspective" !== t && "transformOrigin" !== t) && "_" !== t[0] && (e && "scale" === t ? i.push(t + "3d(" + this[t] + ",1)") : e && "translate" === t ? i.push(t + "3d(" + this[t] + ",0)") : i.push(t + "(" + this[t] + ")"));
            return i.join(" ")
        }
    }, e.fn.transition = e.fn.transit = function (t, i, a, s) {
        var r = this,
            c = 0,
            d = !0;
        "function" == typeof i && (s = i, i = void 0), "function" == typeof a && (s = a, a = void 0), void 0 !== t.easing && (a = t.easing, delete t.easing), void 0 !== t.duration && (i = t.duration, delete t.duration), void 0 !== t.complete && (s = t.complete, delete t.complete), void 0 !== t.queue && (d = t.queue, delete t.queue), void 0 !== t.delay && (c = t.delay, delete t.delay), void 0 === i && (i = e.fx.speeds._default), void 0 === a && (a = e.cssEase._default), i = o(i);
        var u = n(t, i, a, c),
            h = e.transit.enabled && l.transition ? parseInt(i, 10) + parseInt(c, 10) : 0;
        if (0 === h) return a = function (e) {
            r.css(t), s && s.apply(r), e && e()
        }, !0 === (i = d) ? r.queue(a) : i ? r.queue(i, a) : a(), r;
        var f = {};
        return a = function (i) {
            var n = 0;
            "MozTransition" === l.transition && 25 > n && (n = 25), window.setTimeout((function () {
                var n = !1,
                    a = function () {
                        n && r.unbind(p, a), 0 < h && r.each((function () {
                            this.style[l.transition] = f[this] || null
                        })), "function" == typeof s && s.apply(r), "function" == typeof i && i()
                    };
                0 < h && p && e.transit.useTransitionEnd ? (n = !0, r.bind(p, a)) : window.setTimeout(a, h), r.each((function () {
                    0 < h && (this.style[l.transition] = u), e(this).css(t)
                }))
            }), n)
        }, !0 === (i = d) ? r.queue(a) : i ? r.queue(i, a) : a(), this
    }, e.transit.getTransitionValue = n
}(jQuery),
    function (e, t) {
        jQuery.easing.jswing = jQuery.easing.swing, jQuery.extend(jQuery.easing, {
            def: "easeOutQuad",
            swing: function (e, t, i, n, a) {
                return jQuery.easing[jQuery.easing.def](e, t, i, n, a)
            },
            easeInQuad: function (e, t, i, n, a) {
                return n * (t /= a) * t + i
            },
            easeOutQuad: function (e, t, i, n, a) {
                return -n * (t /= a) * (t - 2) + i
            },
            easeInOutQuad: function (e, t, i, n, a) {
                return (t /= a / 2) < 1 ? n / 2 * t * t + i : -n / 2 * (--t * (t - 2) - 1) + i
            },
            easeInCubic: function (e, t, i, n, a) {
                return n * (t /= a) * t * t + i
            },
            easeOutCubic: function (e, t, i, n, a) {
                return n * ((t = t / a - 1) * t * t + 1) + i
            },
            easeInOutCubic: function (e, t, i, n, a) {
                return (t /= a / 2) < 1 ? n / 2 * t * t * t + i : n / 2 * ((t -= 2) * t * t + 2) + i
            },
            easeInQuart: function (e, t, i, n, a) {
                return n * (t /= a) * t * t * t + i
            },
            easeOutQuart: function (e, t, i, n, a) {
                return -n * ((t = t / a - 1) * t * t * t - 1) + i
            },
            easeInOutQuart: function (e, t, i, n, a) {
                return (t /= a / 2) < 1 ? n / 2 * t * t * t * t + i : -n / 2 * ((t -= 2) * t * t * t - 2) + i
            },
            easeInQuint: function (e, t, i, n, a) {
                return n * (t /= a) * t * t * t * t + i
            },
            easeOutQuint: function (e, t, i, n, a) {
                return n * ((t = t / a - 1) * t * t * t * t + 1) + i
            },
            easeInOutQuint: function (e, t, i, n, a) {
                return (t /= a / 2) < 1 ? n / 2 * t * t * t * t * t + i : n / 2 * ((t -= 2) * t * t * t * t + 2) + i
            },
            easeInSine: function (e, t, i, n, a) {
                return -n * Math.cos(t / a * (Math.PI / 2)) + n + i
            },
            easeOutSine: function (e, t, i, n, a) {
                return n * Math.sin(t / a * (Math.PI / 2)) + i
            },
            easeInOutSine: function (e, t, i, n, a) {
                return -n / 2 * (Math.cos(Math.PI * t / a) - 1) + i
            },
            easeInExpo: function (e, t, i, n, a) {
                return 0 == t ? i : n * Math.pow(2, 10 * (t / a - 1)) + i
            },
            easeOutExpo: function (e, t, i, n, a) {
                return t == a ? i + n : n * (1 - Math.pow(2, -10 * t / a)) + i
            },
            easeInOutExpo: function (e, t, i, n, a) {
                return 0 == t ? i : t == a ? i + n : (t /= a / 2) < 1 ? n / 2 * Math.pow(2, 10 * (t - 1)) + i : n / 2 * (2 - Math.pow(2, -10 * --t)) + i
            },
            easeInCirc: function (e, t, i, n, a) {
                return -n * (Math.sqrt(1 - (t /= a) * t) - 1) + i
            },
            easeOutCirc: function (e, t, i, n, a) {
                return n * Math.sqrt(1 - (t = t / a - 1) * t) + i
            },
            easeInOutCirc: function (e, t, i, n, a) {
                return (t /= a / 2) < 1 ? -n / 2 * (Math.sqrt(1 - t * t) - 1) + i : n / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + i
            },
            easeInElastic: function (e, t, i, n, a) {
                var s = 1.70158,
                    o = 0,
                    r = n;
                if (0 == t) return i;
                if (1 == (t /= a)) return i + n;
                if (o || (o = .3 * a), r < Math.abs(n)) {
                    r = n;
                    s = o / 4
                } else s = o / (2 * Math.PI) * Math.asin(n / r);
                return -r * Math.pow(2, 10 * (t -= 1)) * Math.sin(2 * (t * a - s) * Math.PI / o) + i
            },
            easeOutElastic: function (e, t, i, n, a) {
                var s = 1.70158,
                    o = 0,
                    r = n;
                if (0 == t) return i;
                if (1 == (t /= a)) return i + n;
                if (o || (o = .3 * a), r < Math.abs(n)) {
                    r = n;
                    s = o / 4
                } else s = o / (2 * Math.PI) * Math.asin(n / r);
                return r * Math.pow(2, -10 * t) * Math.sin(2 * (t * a - s) * Math.PI / o) + n + i
            },
            easeInOutElastic: function (e, t, i, n, a) {
                var s = 1.70158,
                    o = 0,
                    r = n;
                if (0 == t) return i;
                if (2 == (t /= a / 2)) return i + n;
                if (o || (o = .3 * a * 1.5), r < Math.abs(n)) {
                    r = n;
                    s = o / 4
                } else s = o / (2 * Math.PI) * Math.asin(n / r);
                return t < 1 ? -.5 * r * Math.pow(2, 10 * (t -= 1)) * Math.sin(2 * (t * a - s) * Math.PI / o) + i : r * Math.pow(2, -10 * (t -= 1)) * Math.sin(2 * (t * a - s) * Math.PI / o) * .5 + n + i
            },
            easeInBack: function (e, t, i, n, a, s) {
                return null == s && (s = 1.70158), n * (t /= a) * t * ((s + 1) * t - s) + i
            },
            easeOutBack: function (e, t, i, n, a, s) {
                return null == s && (s = 1.70158), n * ((t = t / a - 1) * t * ((s + 1) * t + s) + 1) + i
            },
            easeInOutBack: function (e, t, i, n, a, s) {
                return null == s && (s = 1.70158), (t /= a / 2) < 1 ? n / 2 * t * t * ((1 + (s *= 1.525)) * t - s) + i : n / 2 * ((t -= 2) * t * ((1 + (s *= 1.525)) * t + s) + 2) + i
            },
            easeInBounce: function (e, t, i, n, a) {
                return n - jQuery.easing.easeOutBounce(e, a - t, 0, n, a) + i
            },
            easeOutBounce: function (e, t, i, n, a) {
                return (t /= a) < 1 / 2.75 ? 7.5625 * n * t * t + i : t < 2 / 2.75 ? n * (7.5625 * (t -= 1.5 / 2.75) * t + .75) + i : t < 2.5 / 2.75 ? n * (7.5625 * (t -= 2.25 / 2.75) * t + .9375) + i : n * (7.5625 * (t -= 2.625 / 2.75) * t + .984375) + i
            },
            easeInOutBounce: function (e, t, i, n, a) {
                return t < a / 2 ? .5 * jQuery.easing.easeInBounce(e, 2 * t, 0, n, a) + i : .5 * jQuery.easing.easeOutBounce(e, 2 * t - a, 0, n, a) + .5 * n + i
            }
        }), e.waitForImages = {
            hasImageProperties: ["backgroundImage", "listStyleImage", "borderImage", "borderCornerImage"]
        }, e.expr[":"].uncached = function (t) {
            var i = document.createElement("img");
            return i.src = t.src, e(t).is('img[src!=""]') && !i.complete
        }, e.fn.waitForImages = function (t, i, n) {
            if (e.isPlainObject(arguments[0]) && (i = t.each, n = t.waitForAll, t = t.finished), t = t || e.noop, i = i || e.noop, n = !!n, !e.isFunction(t) || !e.isFunction(i)) throw new TypeError("An invalid callback was supplied.");
            return this.each((function () {
                var a = e(this),
                    s = [];
                if (n) {
                    var o = e.waitForImages.hasImageProperties || [],
                        r = /url\((['"]?)(.*?)\1\)/g;
                    a.find("*").each((function () {
                        var t = e(this);
                        t.is("img:uncached") && s.push({
                            src: t.attr("src"),
                            element: t[0]
                        }), e.each(o, (function (e, i) {
                            var n, a = t.css(i);
                            if (!a) return !0;
                            for (; n = r.exec(a);) s.push({
                                src: n[2],
                                element: t[0]
                            })
                        }))
                    }))
                } else a.find("img:uncached").each((function () {
                    s.push({
                        src: this.src,
                        element: this
                    })
                }));
                var l = s.length,
                    c = 0;
                0 == l && t.call(a[0]), e.each(s, (function (n, s) {
                    var o = new Image;
                    e(o).bind("load error", (function (e) {
                        if (c++, i.call(s.element, c, l, "load" == e.type), c == l) return t.call(a[0]), !1
                    })), o.src = s.src
                }))
            }))
        }, e.fn.swipe = function (t) {
            if (!this) return !1;
            var i = {
                fingers: 1,
                threshold: 75,
                swipe: null,
                swipeLeft: null,
                swipeRight: null,
                swipeUp: null,
                swipeDown: null,
                swipeStatus: null,
                click: null,
                triggerOnTouchEnd: !0,
                allowPageScroll: "auto"
            },
                n = "left",
                a = "right",
                s = "up",
                o = "down",
                r = "none",
                l = "horizontal",
                c = "vertical",
                d = "move",
                p = "end",
                u = "cancel",
                h = "ontouchstart" in window,
                f = h ? "touchstart" : "mousedown",
                m = h ? "touchmove" : "mousemove",
                g = h ? "touchend" : "mouseup",
                v = "start";
            return null != t.allowPageScroll || null == t.swipe && null == t.swipeStatus || (t.allowPageScroll = r), t && e.extend(i, t), this.each((function () {
                function t() {
                    var e = function () {
                        var e = S.x - M.x,
                            t = M.y - S.y,
                            i = Math.atan2(t, e),
                            n = Math.round(180 * i / Math.PI);
                        n < 0 && (n = 360 - Math.abs(n));
                        return n
                    }();
                    return e <= 45 && e >= 0 || e <= 360 && e >= 315 ? n : e >= 135 && e <= 225 ? a : e > 45 && e < 135 ? o : s
                }

                function b() {
                    return Math.round(Math.sqrt(Math.pow(M.x - S.x, 2) + Math.pow(M.y - S.y, 2)))
                }

                function y(e, t) {
                    if (i.allowPageScroll == r) e.preventDefault();
                    else {
                        var d = "auto" == i.allowPageScroll;
                        switch (t) {
                            case n:
                                (i.swipeLeft && d || !d && i.allowPageScroll != l) && e.preventDefault();
                                break;
                            case a:
                                (i.swipeRight && d || !d && i.allowPageScroll != l) && e.preventDefault();
                                break;
                            case s:
                                (i.swipeUp && d || !d && i.allowPageScroll != c) && e.preventDefault();
                                break;
                            case o:
                                (i.swipeDown && d || !d && i.allowPageScroll != c) && e.preventDefault()
                        }
                    }
                }

                function w(e, t) {
                    if (i.swipeStatus && i.swipeStatus.call(E, e, t, direction || null, distance || 0), t == u && (!i.click || 1 != x && h || !isNaN(distance) && 0 != distance || i.click.call(E, e, e.target)), t == p) switch (i.swipe && i.swipe.call(E, e, direction, distance), direction) {
                        case n:
                            i.swipeLeft && i.swipeLeft.call(E, e, direction, distance);
                            break;
                        case a:
                            i.swipeRight && i.swipeRight.call(E, e, direction, distance);
                            break;
                        case s:
                            i.swipeUp && i.swipeUp.call(E, e, direction, distance);
                            break;
                        case o:
                            i.swipeDown && i.swipeDown.call(E, e, direction, distance)
                    }
                }

                function _(e) {
                    x = 0, S.x = 0, S.y = 0, M.x = 0, M.y = 0, P.x = 0, P.y = 0
                }

                function T(e) {
                    e.preventDefault(), distance = b(), direction = t(), i.triggerOnTouchEnd ? (v = p, x != i.fingers && h || 0 == M.x ? (w(e, v = u), _()) : distance >= i.threshold ? (w(e, v), _()) : (w(e, v = u), _())) : v == d && (w(e, v = u), _()), k.removeEventListener(m, C, !1), k.removeEventListener(g, T, !1)
                }

                function C(e) {
                    if (v != p && v != u) {
                        var n = h ? e.touches[0] : e;
                        M.x = n.pageX, M.y = n.pageY, direction = t(), h && (x = e.touches.length), v = d, y(e, direction), x != i.fingers && h ? (w(e, v = u), _()) : (distance = b(), i.swipeStatus && w(e, v, direction, distance), i.triggerOnTouchEnd || distance >= i.threshold && (w(e, v = p), _()))
                    }
                }
                var k = this,
                    E = e(this),
                    x = 0,
                    S = {
                        x: 0,
                        y: 0
                    },
                    M = {
                        x: 0,
                        y: 0
                    },
                    P = {
                        x: 0,
                        y: 0
                    };
                try {
                    this.addEventListener(f, (function (e) {
                        var t = h ? e.touches[0] : e;
                        v = "start", h && (x = e.touches.length), distance = 0, direction = null, x != i.fingers && h ? _() : (S.x = M.x = t.pageX, S.y = M.y = t.pageY, i.swipeStatus && w(e, v)), k.addEventListener(m, C, !1), k.addEventListener(g, T, !1)
                    }), !1), this.addEventListener("touchcancel", _)
                } catch (e) { }
            }))
        }
    }(jQuery),
    function (e, t) {
        var i, n = e.jQuery || e.Cowboy || (e.Cowboy = {});
        n.throttle = i = function (e, i, a, s) {
            var o, r = 0;

            function l() {
                var n = this,
                    l = +new Date - r,
                    c = arguments;

                function d() {
                    r = +new Date, a.apply(n, c)
                }
                s && !o && d(), o && clearTimeout(o), s === t && l > e ? d() : !0 !== i && (o = setTimeout(s ? function () {
                    o = t
                } : d, s === t ? e - l : e))
            }
            return "boolean" != typeof i && (s = a, a = i, i = t), n.guid && (l.guid = a.guid = a.guid || n.guid++), l
        }, n.debounce = function (e, n, a) {
            return a === t ? i(e, n, !1) : i(e, a, !1 !== n)
        }
    }(this),
    function () {
        for (var e = 0, t = ["ms", "moz", "webkit", "o"], i = 0; i < t.length && !window.requestAnimationFrame; ++i) window.requestAnimationFrame = window[t[i] + "RequestAnimationFrame"], window.cancelAnimationFrame = window[t[i] + "CancelAnimationFrame"] || window[t[i] + "CancelRequestAnimationFrame"];
        window.requestAnimationFrame || (window.requestAnimationFrame = function (t, i) {
            var n = (new Date).getTime(),
                a = Math.max(0, 16 - (n - e)),
                s = window.setTimeout((function () {
                    t(n + a)
                }), a);
            return e = n + a, s
        }), window.cancelAnimationFrame || (window.cancelAnimationFrame = function (e) {
            clearTimeout(e)
        })
    }(), window.Modernizr = function (e, t, i) {
        function n(e) {
            m.cssText = e
        }

        function a(e, t) {
            return typeof e === t
        }

        function s(e, t) {
            return !!~("" + e).indexOf(t)
        }

        function o(e, t) {
            for (var n in e) {
                var a = e[n];
                if (!s(a, "-") && m[a] !== i) return "pfx" != t || a
            }
            return !1
        }

        function r(e, t, n) {
            for (var s in e) {
                var o = t[e[s]];
                if (o !== i) return !1 === n ? e[s] : a(o, "function") ? o.bind(n || t) : o
            }
            return !1
        }

        function l(e, t, i) {
            var n = e.charAt(0).toUpperCase() + e.slice(1),
                s = (e + " " + b.join(n + " ") + n).split(" ");
            return a(t, "string") || a(t, "undefined") ? o(s, t) : r(s = (e + " " + y.join(n + " ") + n).split(" "), t, i)
        }
        var c, d, p = {},
            u = t.documentElement,
            h = "modernizr",
            f = t.createElement(h),
            m = f.style,
            g = " -webkit- -moz- -o- -ms- ".split(" "),
            v = "Webkit Moz O ms",
            b = v.split(" "),
            y = v.toLowerCase().split(" "),
            w = {},
            _ = [],
            T = _.slice,
            C = function (e, i, n, a) {
                var s, o, r, l, c = t.createElement("div"),
                    d = t.body,
                    p = d || t.createElement("body");
                if (parseInt(n, 10))
                    for (; n--;)(r = t.createElement("div")).id = a ? a[n] : h + (n + 1), c.appendChild(r);
                return s = ["&#173;", '<style id="s', h, '">', e, "</style>"].join(""), c.id = h, (d ? c : p).innerHTML += s, p.appendChild(c), d || (p.style.background = "", p.style.overflow = "hidden", l = u.style.overflow, u.style.overflow = "hidden", u.appendChild(p)), o = i(c, e), d ? c.parentNode.removeChild(c) : (p.parentNode.removeChild(p), u.style.overflow = l), !!o
            },
            k = {}.hasOwnProperty;
        for (var E in d = a(k, "undefined") || a(k.call, "undefined") ? function (e, t) {
            return t in e && a(e.constructor.prototype[t], "undefined")
        } : function (e, t) {
            return k.call(e, t)
        }, Function.prototype.bind || (Function.prototype.bind = function (e) {
            var t = this;
            if ("function" != typeof t) throw new TypeError;
            var i = T.call(arguments, 1),
                n = function () {
                    if (this instanceof n) {
                        var a = function () { };
                        a.prototype = t.prototype;
                        var s = new a,
                            o = t.apply(s, i.concat(T.call(arguments)));
                        return Object(o) === o ? o : s
                    }
                    return t.apply(e, i.concat(T.call(arguments)))
                };
            return n
        }), w.csstransforms = function () {
            return !!l("transform")
        }, w.csstransforms3d = function () {
            var e = !!l("perspective");
            return e && "webkitPerspective" in u.style && C("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}", (function (t, i) {
                e = 9 === t.offsetLeft && 3 === t.offsetHeight
            })), e
        }, w.csstransitions = function () {
            return l("transition")
        }, w) d(w, E) && (c = E.toLowerCase(), p[c] = w[E](), _.push((p[c] ? "" : "no-") + c));
        return p.addTest = function (e, t) {
            if ("object" == typeof e)
                for (var n in e) d(e, n) && p.addTest(n, e[n]);
            else {
                if (e = e.toLowerCase(), p[e] !== i) return p;
                t = "function" == typeof t ? t() : t, u.className += " " + (t ? "" : "no-") + e, p[e] = t
            }
            return p
        }, n(""), f = null, p._version = "2.6.2", p._prefixes = g, p._domPrefixes = y, p._cssomPrefixes = b, p.testProp = function (e) {
            return o([e])
        }, p.testAllProps = l, p.testStyles = C, p.prefixed = function (e, t, i) {
            return t ? l(e, t, i) : l(e, "pfx")
        }, u.className = u.className.replace(/(^|\s)no-js(\s|$)/, "$1$2") + " js " + _.join(" "), p
    }(0, this.document),
    function (e, t) {
        "function" == typeof define && define.amd ? define(t) : "object" == typeof exports ? module.exports = t() : e.__customEventPolyfill = t()
    }(this, (function () {
        "use strict";

        function e(e, t) {
            var i;
            t = t || {
                bubbles: !1,
                cancelable: !1,
                detail: void 0
            };
            try {
                (i = document.createEvent("CustomEvent")).initCustomEvent(e, t.bubbles, t.cancelable, t.detail)
            } catch (a) {
                for (var n in i = document.createEvent("Event"), t) i[n] = t[n];
                i.initEvent(e, t.bubbles, t.cancelable)
            }
            return i
        }
        void 0 !== window.CustomEvent && (e.prototype = window.CustomEvent.prototype), window.CustomEvent = e
    })),
    function (e) {
        "function" == typeof define && define.amd ? define(["jquery", "jquery-ui"], e) : e(jQuery)
    }((function ($) {
        if ($.ui.timepicker = $.ui.timepicker || {}, !$.ui.timepicker.version) {
            $.extend($.ui, {
                timepicker: {
                    version: "1.6.3"
                }
            });
            var Timepicker = function () {
                this.regional = [], this.regional[""] = {
                    currentText: "Now",
                    closeText: "Done",
                    amNames: ["AM", "A"],
                    pmNames: ["PM", "P"],
                    timeFormat: "HH:mm",
                    timeSuffix: "",
                    timeOnlyTitle: "Choose Time",
                    timeText: "Time",
                    hourText: "Hour",
                    minuteText: "Minute",
                    secondText: "Second",
                    millisecText: "Millisecond",
                    microsecText: "Microsecond",
                    timezoneText: "Time Zone",
                    isRTL: !1
                }, this._defaults = {
                    showButtonPanel: !0,
                    timeOnly: !1,
                    timeOnlyShowDate: !1,
                    showHour: null,
                    showMinute: null,
                    showSecond: null,
                    showMillisec: null,
                    showMicrosec: null,
                    showTimezone: null,
                    showTime: !0,
                    stepHour: 1,
                    stepMinute: 1,
                    stepSecond: 1,
                    stepMillisec: 1,
                    stepMicrosec: 1,
                    hour: 0,
                    minute: 0,
                    second: 0,
                    millisec: 0,
                    microsec: 0,
                    timezone: null,
                    hourMin: 0,
                    minuteMin: 0,
                    secondMin: 0,
                    millisecMin: 0,
                    microsecMin: 0,
                    hourMax: 23,
                    minuteMax: 59,
                    secondMax: 59,
                    millisecMax: 999,
                    microsecMax: 999,
                    minDateTime: null,
                    maxDateTime: null,
                    maxTime: null,
                    minTime: null,
                    onSelect: null,
                    hourGrid: 0,
                    minuteGrid: 0,
                    secondGrid: 0,
                    millisecGrid: 0,
                    microsecGrid: 0,
                    alwaysSetTime: !0,
                    separator: " ",
                    altFieldTimeOnly: !0,
                    altTimeFormat: null,
                    altSeparator: null,
                    altTimeSuffix: null,
                    altRedirectFocus: !0,
                    pickerTimeFormat: null,
                    pickerTimeSuffix: null,
                    showTimepicker: !0,
                    timezoneList: null,
                    addSliderAccess: !1,
                    sliderAccessArgs: null,
                    controlType: "slider",
                    oneLine: !1,
                    defaultValue: null,
                    parse: "strict",
                    afterInject: null
                }, $.extend(this._defaults, this.regional[""])
            };
            $.extend(Timepicker.prototype, {
                $input: null,
                $altInput: null,
                $timeObj: null,
                inst: null,
                hour_slider: null,
                minute_slider: null,
                second_slider: null,
                millisec_slider: null,
                microsec_slider: null,
                timezone_select: null,
                maxTime: null,
                minTime: null,
                hour: 0,
                minute: 0,
                second: 0,
                millisec: 0,
                microsec: 0,
                timezone: null,
                hourMinOriginal: null,
                minuteMinOriginal: null,
                secondMinOriginal: null,
                millisecMinOriginal: null,
                microsecMinOriginal: null,
                hourMaxOriginal: null,
                minuteMaxOriginal: null,
                secondMaxOriginal: null,
                millisecMaxOriginal: null,
                microsecMaxOriginal: null,
                ampm: "",
                formattedDate: "",
                formattedTime: "",
                formattedDateTime: "",
                timezoneList: null,
                units: ["hour", "minute", "second", "millisec", "microsec"],
                support: {},
                control: null,
                setDefaults: function (e) {
                    return extendRemove(this._defaults, e || {}), this
                },
                _newInst: function ($input, opts) {
                    var tp_inst = new Timepicker,
                        inlineSettings = {},
                        fns = {},
                        overrides, i;
                    for (var attrName in this._defaults)
                        if (this._defaults.hasOwnProperty(attrName)) {
                            var attrValue = $input.attr("time:" + attrName);
                            if (attrValue) try {
                                inlineSettings[attrName] = eval(attrValue)
                            } catch (e) {
                                inlineSettings[attrName] = attrValue
                            }
                        } for (i in overrides = {
                            beforeShow: function (e, t) {
                                return $.isFunction(tp_inst._defaults.evnts.beforeShow) ? tp_inst._defaults.evnts.beforeShow.call($input[0], e, t, tp_inst) : void 0
                            },
                            onChangeMonthYear: function (e, t, i) {
                                $.isFunction(tp_inst._defaults.evnts.onChangeMonthYear) && tp_inst._defaults.evnts.onChangeMonthYear.call($input[0], e, t, i, tp_inst)
                            },
                            onClose: function (e, t) {
                                !0 === tp_inst.timeDefined && "" !== $input.val() && tp_inst._updateDateTime(t), $.isFunction(tp_inst._defaults.evnts.onClose) && tp_inst._defaults.evnts.onClose.call($input[0], e, t, tp_inst)
                            }
                        }, overrides) overrides.hasOwnProperty(i) && (fns[i] = opts[i] || this._defaults[i] || null);
                    tp_inst._defaults = $.extend({}, this._defaults, inlineSettings, opts, overrides, {
                        evnts: fns,
                        timepicker: tp_inst
                    }), tp_inst.amNames = $.map(tp_inst._defaults.amNames, (function (e) {
                        return e.toUpperCase()
                    })), tp_inst.pmNames = $.map(tp_inst._defaults.pmNames, (function (e) {
                        return e.toUpperCase()
                    })), tp_inst.support = detectSupport(tp_inst._defaults.timeFormat + (tp_inst._defaults.pickerTimeFormat ? tp_inst._defaults.pickerTimeFormat : "") + (tp_inst._defaults.altTimeFormat ? tp_inst._defaults.altTimeFormat : "")), "string" == typeof tp_inst._defaults.controlType ? ("slider" === tp_inst._defaults.controlType && void 0 === $.ui.slider && (tp_inst._defaults.controlType = "select"), tp_inst.control = tp_inst._controls[tp_inst._defaults.controlType]) : tp_inst.control = tp_inst._defaults.controlType;
                    var timezoneList = [-720, -660, -600, -570, -540, -480, -420, -360, -300, -270, -240, -210, -180, -120, -60, 0, 60, 120, 180, 210, 240, 270, 300, 330, 345, 360, 390, 420, 480, 525, 540, 570, 600, 630, 660, 690, 720, 765, 780, 840];
                    null !== tp_inst._defaults.timezoneList && (timezoneList = tp_inst._defaults.timezoneList);
                    var tzl = timezoneList.length,
                        tzi = 0,
                        tzv = null;
                    if (tzl > 0 && "object" != typeof timezoneList[0])
                        for (; tzl > tzi; tzi++) tzv = timezoneList[tzi], timezoneList[tzi] = {
                            value: tzv,
                            label: $.timepicker.timezoneOffsetString(tzv, tp_inst.support.iso8601)
                        };
                    return tp_inst._defaults.timezoneList = timezoneList, tp_inst.timezone = null !== tp_inst._defaults.timezone ? $.timepicker.timezoneOffsetNumber(tp_inst._defaults.timezone) : -1 * (new Date).getTimezoneOffset(), tp_inst.hour = tp_inst._defaults.hour < tp_inst._defaults.hourMin ? tp_inst._defaults.hourMin : tp_inst._defaults.hour > tp_inst._defaults.hourMax ? tp_inst._defaults.hourMax : tp_inst._defaults.hour, tp_inst.minute = tp_inst._defaults.minute < tp_inst._defaults.minuteMin ? tp_inst._defaults.minuteMin : tp_inst._defaults.minute > tp_inst._defaults.minuteMax ? tp_inst._defaults.minuteMax : tp_inst._defaults.minute, tp_inst.second = tp_inst._defaults.second < tp_inst._defaults.secondMin ? tp_inst._defaults.secondMin : tp_inst._defaults.second > tp_inst._defaults.secondMax ? tp_inst._defaults.secondMax : tp_inst._defaults.second, tp_inst.millisec = tp_inst._defaults.millisec < tp_inst._defaults.millisecMin ? tp_inst._defaults.millisecMin : tp_inst._defaults.millisec > tp_inst._defaults.millisecMax ? tp_inst._defaults.millisecMax : tp_inst._defaults.millisec, tp_inst.microsec = tp_inst._defaults.microsec < tp_inst._defaults.microsecMin ? tp_inst._defaults.microsecMin : tp_inst._defaults.microsec > tp_inst._defaults.microsecMax ? tp_inst._defaults.microsecMax : tp_inst._defaults.microsec, tp_inst.ampm = "", tp_inst.$input = $input, tp_inst._defaults.altField && (tp_inst.$altInput = $(tp_inst._defaults.altField), !0 === tp_inst._defaults.altRedirectFocus && tp_inst.$altInput.css({
                        cursor: "pointer"
                    }).focus((function () {
                        $input.trigger("focus")
                    }))), (0 === tp_inst._defaults.minDate || 0 === tp_inst._defaults.minDateTime) && (tp_inst._defaults.minDate = new Date), (0 === tp_inst._defaults.maxDate || 0 === tp_inst._defaults.maxDateTime) && (tp_inst._defaults.maxDate = new Date), void 0 !== tp_inst._defaults.minDate && tp_inst._defaults.minDate instanceof Date && (tp_inst._defaults.minDateTime = new Date(tp_inst._defaults.minDate.getTime())), void 0 !== tp_inst._defaults.minDateTime && tp_inst._defaults.minDateTime instanceof Date && (tp_inst._defaults.minDate = new Date(tp_inst._defaults.minDateTime.getTime())), void 0 !== tp_inst._defaults.maxDate && tp_inst._defaults.maxDate instanceof Date && (tp_inst._defaults.maxDateTime = new Date(tp_inst._defaults.maxDate.getTime())), void 0 !== tp_inst._defaults.maxDateTime && tp_inst._defaults.maxDateTime instanceof Date && (tp_inst._defaults.maxDate = new Date(tp_inst._defaults.maxDateTime.getTime())), tp_inst.$input.bind("focus", (function () {
                        tp_inst._onFocus()
                    })), tp_inst
                },
                _addTimePicker: function (e) {
                    var t = $.trim(this.$altInput && this._defaults.altFieldTimeOnly ? this.$input.val() + " " + this.$altInput.val() : this.$input.val());
                    this.timeDefined = this._parseTime(t), this._limitMinMaxDateTime(e, !1), this._injectTimePicker(), this._afterInject()
                },
                _parseTime: function (e, t) {
                    if (this.inst || (this.inst = $.datepicker._getInst(this.$input[0])), t || !this._defaults.timeOnly) {
                        var i = $.datepicker._get(this.inst, "dateFormat");
                        try {
                            var n = parseDateTimeInternal(i, this._defaults.timeFormat, e, $.datepicker._getFormatConfig(this.inst), this._defaults);
                            if (!n.timeObj) return !1;
                            $.extend(this, n.timeObj)
                        } catch (t) {
                            return $.timepicker.log("Error parsing the date/time string: " + t + "\ndate/time string = " + e + "\ntimeFormat = " + this._defaults.timeFormat + "\ndateFormat = " + i), !1
                        }
                        return !0
                    }
                    var a = $.datepicker.parseTime(this._defaults.timeFormat, e, this._defaults);
                    return !!a && ($.extend(this, a), !0)
                },
                _afterInject: function () {
                    var e = this.inst.settings;
                    $.isFunction(e.afterInject) && e.afterInject.call(this)
                },
                _injectTimePicker: function () {
                    var e = this.inst.dpDiv,
                        t = this.inst.settings,
                        i = this,
                        n = "",
                        a = "",
                        s = null,
                        o = {},
                        r = {},
                        l = null,
                        c = 0,
                        d = 0;
                    if (0 === e.find("div.ui-timepicker-div").length && t.showTimepicker) {
                        var p = " ui_tpicker_unit_hide",
                            u = '<div class="ui-timepicker-div' + (t.isRTL ? " ui-timepicker-rtl" : "") + (t.oneLine && "select" === t.controlType ? " ui-timepicker-oneLine" : "") + '"><dl><dt class="ui_tpicker_time_label' + (t.showTime ? "" : p) + '">' + t.timeText + '</dt><dd class="ui_tpicker_time ' + (t.showTime ? "" : p) + '"><input class="ui_tpicker_time_input" ' + (t.timeInput ? "" : "disabled") + "/></dd>";
                        for (c = 0, d = this.units.length; d > c; c++) {
                            if (s = null !== t["show" + (a = (n = this.units[c]).substr(0, 1).toUpperCase() + n.substr(1))] ? t["show" + a] : this.support[n], o[n] = parseInt(t[n + "Max"] - (t[n + "Max"] - t[n + "Min"]) % t["step" + a], 10), r[n] = 0, u += '<dt class="ui_tpicker_' + n + "_label" + (s ? "" : p) + '">' + t[n + "Text"] + '</dt><dd class="ui_tpicker_' + n + (s ? "" : p) + '"><div class="ui_tpicker_' + n + "_slider" + (s ? "" : p) + '"></div>', s && t[n + "Grid"] > 0) {
                                if (u += '<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>', "hour" === n)
                                    for (var h = t[n + "Min"]; h <= o[n]; h += parseInt(t[n + "Grid"], 10)) {
                                        r[n]++;
                                        var f = $.datepicker.formatTime(this.support.ampm ? "hht" : "HH", {
                                            hour: h
                                        }, t);
                                        u += '<td data-for="' + n + '">' + f + "</td>"
                                    } else
                                    for (var m = t[n + "Min"]; m <= o[n]; m += parseInt(t[n + "Grid"], 10)) r[n]++, u += '<td data-for="' + n + '">' + (10 > m ? "0" : "") + m + "</td>";
                                u += "</tr></table></div>"
                            }
                            u += "</dd>"
                        }
                        var g = null !== t.showTimezone ? t.showTimezone : this.support.timezone;
                        u += '<dt class="ui_tpicker_timezone_label' + (g ? "" : p) + '">' + t.timezoneText + "</dt>", u += '<dd class="ui_tpicker_timezone' + (g ? "" : p) + '"></dd>';
                        var v = $(u += "</dl></div>");
                        for (!0 === t.timeOnly && (v.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all"><div class="ui-datepicker-title">' + t.timeOnlyTitle + "</div></div>"), e.find(".ui-datepicker-header, .ui-datepicker-calendar").hide()), c = 0, d = i.units.length; d > c; c++) s = null !== t["show" + (a = (n = i.units[c]).substr(0, 1).toUpperCase() + n.substr(1))] ? t["show" + a] : this.support[n], i[n + "_slider"] = i.control.create(i, v.find(".ui_tpicker_" + n + "_slider"), n, i[n], t[n + "Min"], o[n], t["step" + a]), s && t[n + "Grid"] > 0 && (l = 100 * r[n] * t[n + "Grid"] / (o[n] - t[n + "Min"]), v.find(".ui_tpicker_" + n + " table").css({
                            width: l + "%",
                            marginLeft: t.isRTL ? "0" : l / (-2 * r[n]) + "%",
                            marginRight: t.isRTL ? l / (-2 * r[n]) + "%" : "0",
                            borderCollapse: "collapse"
                        }).find("td").click((function (e) {
                            var t = $(this),
                                a = t.html(),
                                s = parseInt(a.replace(/[^0-9]/g), 10),
                                o = a.replace(/[^apm]/gi),
                                r = t.data("for");
                            "hour" === r && (-1 !== o.indexOf("p") && 12 > s ? s += 12 : -1 !== o.indexOf("a") && 12 === s && (s = 0)), i.control.value(i, i[r + "_slider"], n, s), i._onTimeChange(), i._onSelectHandler()
                        })).css({
                            cursor: "pointer",
                            width: 100 / r[n] + "%",
                            textAlign: "center",
                            overflow: "hidden"
                        }));
                        if (this.timezone_select = v.find(".ui_tpicker_timezone").append("<select></select>").find("select"), $.fn.append.apply(this.timezone_select, $.map(t.timezoneList, (function (e, t) {
                            return $("<option />").val("object" == typeof e ? e.value : e).text("object" == typeof e ? e.label : e)
                        }))), void 0 !== this.timezone && null !== this.timezone && "" !== this.timezone) - 1 * new Date(this.inst.selectedYear, this.inst.selectedMonth, this.inst.selectedDay, 12).getTimezoneOffset() === this.timezone ? selectLocalTimezone(i) : this.timezone_select.val(this.timezone);
                        else void 0 !== this.hour && null !== this.hour && "" !== this.hour ? this.timezone_select.val(t.timezone) : selectLocalTimezone(i);
                        this.timezone_select.change((function () {
                            i._onTimeChange(), i._onSelectHandler(), i._afterInject()
                        }));
                        var b = e.find(".ui-datepicker-buttonpane");
                        if (b.length ? b.before(v) : e.append(v), this.$timeObj = v.find(".ui_tpicker_time_input"), this.$timeObj.change((function () {
                            var e = i.inst.settings.timeFormat,
                                t = $.datepicker.parseTime(e, this.value),
                                n = new Date;
                            t ? (n.setHours(t.hour), n.setMinutes(t.minute), n.setSeconds(t.second), $.datepicker._setTime(i.inst, n)) : (this.value = i.formattedTime, this.blur())
                        })), null !== this.inst) {
                            var y = this.timeDefined;
                            this._onTimeChange(), this.timeDefined = y
                        }
                        if (this._defaults.addSliderAccess) {
                            var w = this._defaults.sliderAccessArgs,
                                _ = this._defaults.isRTL;
                            w.isRTL = _, setTimeout((function () {
                                if (0 === v.find(".ui-slider-access").length) {
                                    v.find(".ui-slider:visible").sliderAccess(w);
                                    var e = v.find(".ui-slider-access:eq(0)").outerWidth(!0);
                                    e && v.find("table:visible").each((function () {
                                        var t = $(this),
                                            i = t.outerWidth(),
                                            n = t.css(_ ? "marginRight" : "marginLeft").toString().replace("%", ""),
                                            a = i - e,
                                            s = n * a / i + "%",
                                            o = {
                                                width: a,
                                                marginRight: 0,
                                                marginLeft: 0
                                            };
                                        o[_ ? "marginRight" : "marginLeft"] = s, t.css(o)
                                    }))
                                }
                            }), 10)
                        }
                        i._limitMinMaxDateTime(this.inst, !0)
                    }
                },
                _limitMinMaxDateTime: function (e, t) {
                    var i = this._defaults,
                        n = new Date(e.selectedYear, e.selectedMonth, e.selectedDay);
                    if (this._defaults.showTimepicker) {
                        if (null !== $.datepicker._get(e, "minDateTime") && void 0 !== $.datepicker._get(e, "minDateTime") && n) {
                            var a = $.datepicker._get(e, "minDateTime"),
                                s = new Date(a.getFullYear(), a.getMonth(), a.getDate(), 0, 0, 0, 0);
                            (null === this.hourMinOriginal || null === this.minuteMinOriginal || null === this.secondMinOriginal || null === this.millisecMinOriginal || null === this.microsecMinOriginal) && (this.hourMinOriginal = i.hourMin, this.minuteMinOriginal = i.minuteMin, this.secondMinOriginal = i.secondMin, this.millisecMinOriginal = i.millisecMin, this.microsecMinOriginal = i.microsecMin), e.settings.timeOnly || s.getTime() === n.getTime() ? (this._defaults.hourMin = a.getHours(), this.hour <= this._defaults.hourMin ? (this.hour = this._defaults.hourMin, this._defaults.minuteMin = a.getMinutes(), this.minute <= this._defaults.minuteMin ? (this.minute = this._defaults.minuteMin, this._defaults.secondMin = a.getSeconds(), this.second <= this._defaults.secondMin ? (this.second = this._defaults.secondMin, this._defaults.millisecMin = a.getMilliseconds(), this.millisec <= this._defaults.millisecMin ? (this.millisec = this._defaults.millisecMin, this._defaults.microsecMin = a.getMicroseconds()) : (this.microsec < this._defaults.microsecMin && (this.microsec = this._defaults.microsecMin), this._defaults.microsecMin = this.microsecMinOriginal)) : (this._defaults.millisecMin = this.millisecMinOriginal, this._defaults.microsecMin = this.microsecMinOriginal)) : (this._defaults.secondMin = this.secondMinOriginal, this._defaults.millisecMin = this.millisecMinOriginal, this._defaults.microsecMin = this.microsecMinOriginal)) : (this._defaults.minuteMin = this.minuteMinOriginal, this._defaults.secondMin = this.secondMinOriginal, this._defaults.millisecMin = this.millisecMinOriginal, this._defaults.microsecMin = this.microsecMinOriginal)) : (this._defaults.hourMin = this.hourMinOriginal, this._defaults.minuteMin = this.minuteMinOriginal, this._defaults.secondMin = this.secondMinOriginal, this._defaults.millisecMin = this.millisecMinOriginal, this._defaults.microsecMin = this.microsecMinOriginal)
                        }
                        if (null !== $.datepicker._get(e, "maxDateTime") && void 0 !== $.datepicker._get(e, "maxDateTime") && n) {
                            var o = $.datepicker._get(e, "maxDateTime"),
                                r = new Date(o.getFullYear(), o.getMonth(), o.getDate(), 0, 0, 0, 0);
                            (null === this.hourMaxOriginal || null === this.minuteMaxOriginal || null === this.secondMaxOriginal || null === this.millisecMaxOriginal) && (this.hourMaxOriginal = i.hourMax, this.minuteMaxOriginal = i.minuteMax, this.secondMaxOriginal = i.secondMax, this.millisecMaxOriginal = i.millisecMax, this.microsecMaxOriginal = i.microsecMax), e.settings.timeOnly || r.getTime() === n.getTime() ? (this._defaults.hourMax = o.getHours(), this.hour >= this._defaults.hourMax ? (this.hour = this._defaults.hourMax, this._defaults.minuteMax = o.getMinutes(), this.minute >= this._defaults.minuteMax ? (this.minute = this._defaults.minuteMax, this._defaults.secondMax = o.getSeconds(), this.second >= this._defaults.secondMax ? (this.second = this._defaults.secondMax, this._defaults.millisecMax = o.getMilliseconds(), this.millisec >= this._defaults.millisecMax ? (this.millisec = this._defaults.millisecMax, this._defaults.microsecMax = o.getMicroseconds()) : (this.microsec > this._defaults.microsecMax && (this.microsec = this._defaults.microsecMax), this._defaults.microsecMax = this.microsecMaxOriginal)) : (this._defaults.millisecMax = this.millisecMaxOriginal, this._defaults.microsecMax = this.microsecMaxOriginal)) : (this._defaults.secondMax = this.secondMaxOriginal, this._defaults.millisecMax = this.millisecMaxOriginal, this._defaults.microsecMax = this.microsecMaxOriginal)) : (this._defaults.minuteMax = this.minuteMaxOriginal, this._defaults.secondMax = this.secondMaxOriginal, this._defaults.millisecMax = this.millisecMaxOriginal, this._defaults.microsecMax = this.microsecMaxOriginal)) : (this._defaults.hourMax = this.hourMaxOriginal, this._defaults.minuteMax = this.minuteMaxOriginal, this._defaults.secondMax = this.secondMaxOriginal, this._defaults.millisecMax = this.millisecMaxOriginal, this._defaults.microsecMax = this.microsecMaxOriginal)
                        }
                        if (null !== e.settings.minTime) {
                            var l = new Date("01/01/1970 " + e.settings.minTime);
                            this.hour < l.getHours() ? (this.hour = this._defaults.hourMin = l.getHours(), this.minute = this._defaults.minuteMin = l.getMinutes()) : this.hour === l.getHours() && this.minute < l.getMinutes() ? this.minute = this._defaults.minuteMin = l.getMinutes() : this._defaults.hourMin < l.getHours() ? (this._defaults.hourMin = l.getHours(), this._defaults.minuteMin = l.getMinutes()) : this._defaults.hourMin === l.getHours() === this.hour && this._defaults.minuteMin < l.getMinutes() ? this._defaults.minuteMin = l.getMinutes() : this._defaults.minuteMin = 0
                        }
                        if (null !== e.settings.maxTime) {
                            var c = new Date("01/01/1970 " + e.settings.maxTime);
                            this.hour > c.getHours() ? (this.hour = this._defaults.hourMax = c.getHours(), this.minute = this._defaults.minuteMax = c.getMinutes()) : this.hour === c.getHours() && this.minute > c.getMinutes() ? this.minute = this._defaults.minuteMax = c.getMinutes() : this._defaults.hourMax > c.getHours() ? (this._defaults.hourMax = c.getHours(), this._defaults.minuteMax = c.getMinutes()) : this._defaults.hourMax === c.getHours() === this.hour && this._defaults.minuteMax > c.getMinutes() ? this._defaults.minuteMax = c.getMinutes() : this._defaults.minuteMax = 59
                        }
                        if (void 0 !== t && !0 === t) {
                            var d = parseInt(this._defaults.hourMax - (this._defaults.hourMax - this._defaults.hourMin) % this._defaults.stepHour, 10),
                                p = parseInt(this._defaults.minuteMax - (this._defaults.minuteMax - this._defaults.minuteMin) % this._defaults.stepMinute, 10),
                                u = parseInt(this._defaults.secondMax - (this._defaults.secondMax - this._defaults.secondMin) % this._defaults.stepSecond, 10),
                                h = parseInt(this._defaults.millisecMax - (this._defaults.millisecMax - this._defaults.millisecMin) % this._defaults.stepMillisec, 10),
                                f = parseInt(this._defaults.microsecMax - (this._defaults.microsecMax - this._defaults.microsecMin) % this._defaults.stepMicrosec, 10);
                            this.hour_slider && (this.control.options(this, this.hour_slider, "hour", {
                                min: this._defaults.hourMin,
                                max: d,
                                step: this._defaults.stepHour
                            }), this.control.value(this, this.hour_slider, "hour", this.hour - this.hour % this._defaults.stepHour)), this.minute_slider && (this.control.options(this, this.minute_slider, "minute", {
                                min: this._defaults.minuteMin,
                                max: p,
                                step: this._defaults.stepMinute
                            }), this.control.value(this, this.minute_slider, "minute", this.minute - this.minute % this._defaults.stepMinute)), this.second_slider && (this.control.options(this, this.second_slider, "second", {
                                min: this._defaults.secondMin,
                                max: u,
                                step: this._defaults.stepSecond
                            }), this.control.value(this, this.second_slider, "second", this.second - this.second % this._defaults.stepSecond)), this.millisec_slider && (this.control.options(this, this.millisec_slider, "millisec", {
                                min: this._defaults.millisecMin,
                                max: h,
                                step: this._defaults.stepMillisec
                            }), this.control.value(this, this.millisec_slider, "millisec", this.millisec - this.millisec % this._defaults.stepMillisec)), this.microsec_slider && (this.control.options(this, this.microsec_slider, "microsec", {
                                min: this._defaults.microsecMin,
                                max: f,
                                step: this._defaults.stepMicrosec
                            }), this.control.value(this, this.microsec_slider, "microsec", this.microsec - this.microsec % this._defaults.stepMicrosec))
                        }
                    }
                },
                _onTimeChange: function () {
                    if (this._defaults.showTimepicker) {
                        var e = !!this.hour_slider && this.control.value(this, this.hour_slider, "hour"),
                            t = !!this.minute_slider && this.control.value(this, this.minute_slider, "minute"),
                            i = !!this.second_slider && this.control.value(this, this.second_slider, "second"),
                            n = !!this.millisec_slider && this.control.value(this, this.millisec_slider, "millisec"),
                            a = !!this.microsec_slider && this.control.value(this, this.microsec_slider, "microsec"),
                            s = !!this.timezone_select && this.timezone_select.val(),
                            o = this._defaults,
                            r = o.pickerTimeFormat || o.timeFormat,
                            l = o.pickerTimeSuffix || o.timeSuffix;
                        "object" == typeof e && (e = !1), "object" == typeof t && (t = !1), "object" == typeof i && (i = !1), "object" == typeof n && (n = !1), "object" == typeof a && (a = !1), "object" == typeof s && (s = !1), !1 !== e && (e = parseInt(e, 10)), !1 !== t && (t = parseInt(t, 10)), !1 !== i && (i = parseInt(i, 10)), !1 !== n && (n = parseInt(n, 10)), !1 !== a && (a = parseInt(a, 10)), !1 !== s && (s = s.toString());
                        var c = o[12 > e ? "amNames" : "pmNames"][0],
                            d = e !== parseInt(this.hour, 10) || t !== parseInt(this.minute, 10) || i !== parseInt(this.second, 10) || n !== parseInt(this.millisec, 10) || a !== parseInt(this.microsec, 10) || this.ampm.length > 0 && 12 > e != (-1 !== $.inArray(this.ampm.toUpperCase(), this.amNames)) || null !== this.timezone && s !== this.timezone.toString();
                        if (d && (!1 !== e && (this.hour = e), !1 !== t && (this.minute = t), !1 !== i && (this.second = i), !1 !== n && (this.millisec = n), !1 !== a && (this.microsec = a), !1 !== s && (this.timezone = s), this.inst || (this.inst = $.datepicker._getInst(this.$input[0])), this._limitMinMaxDateTime(this.inst, !0)), this.support.ampm && (this.ampm = c), this.formattedTime = $.datepicker.formatTime(o.timeFormat, this, o), this.$timeObj && (this.$timeObj.val(r === o.timeFormat ? this.formattedTime + l : $.datepicker.formatTime(r, this, o) + l), this.$timeObj[0].setSelectionRange)) {
                            var p = this.$timeObj[0].selectionStart,
                                u = this.$timeObj[0].selectionEnd;
                            this.$timeObj[0].setSelectionRange(p, u)
                        }
                        this.timeDefined = !0, d && this._updateDateTime()
                    }
                },
                _onSelectHandler: function () {
                    var e = this._defaults.onSelect || this.inst.settings.onSelect,
                        t = this.$input ? this.$input[0] : null;
                    e && t && e.apply(t, [this.formattedDateTime, this])
                },
                _updateDateTime: function (e) {
                    var t = (e = this.inst || e).currentYear > 0 ? new Date(e.currentYear, e.currentMonth, e.currentDay) : new Date(e.selectedYear, e.selectedMonth, e.selectedDay),
                        i = $.datepicker._daylightSavingAdjust(t),
                        n = $.datepicker._get(e, "dateFormat"),
                        a = $.datepicker._getFormatConfig(e),
                        s = null !== i && this.timeDefined;
                    this.formattedDate = $.datepicker.formatDate(n, null === i ? new Date : i, a);
                    var o = this.formattedDate;
                    if ("" === e.lastVal && (e.currentYear = e.selectedYear, e.currentMonth = e.selectedMonth, e.currentDay = e.selectedDay), !0 === this._defaults.timeOnly && !1 === this._defaults.timeOnlyShowDate ? o = this.formattedTime : (!0 !== this._defaults.timeOnly && (this._defaults.alwaysSetTime || s) || !0 === this._defaults.timeOnly && !0 === this._defaults.timeOnlyShowDate) && (o += this._defaults.separator + this.formattedTime + this._defaults.timeSuffix), this.formattedDateTime = o, this._defaults.showTimepicker)
                        if (this.$altInput && !1 === this._defaults.timeOnly && !0 === this._defaults.altFieldTimeOnly) this.$altInput.val(this.formattedTime), this.$input.val(this.formattedDate);
                        else if (this.$altInput) {
                            this.$input.val(o);
                            var r = "",
                                l = null !== this._defaults.altSeparator ? this._defaults.altSeparator : this._defaults.separator,
                                c = null !== this._defaults.altTimeSuffix ? this._defaults.altTimeSuffix : this._defaults.timeSuffix;
                            this._defaults.timeOnly || (r = this._defaults.altFormat ? $.datepicker.formatDate(this._defaults.altFormat, null === i ? new Date : i, a) : this.formattedDate) && (r += l), r += null !== this._defaults.altTimeFormat ? $.datepicker.formatTime(this._defaults.altTimeFormat, this, this._defaults) + c : this.formattedTime + c, this.$altInput.val(r)
                        } else this.$input.val(o);
                    else this.$input.val(this.formattedDate);
                    this.$input.trigger("change")
                },
                _onFocus: function () {
                    if (!this.$input.val() && this._defaults.defaultValue) {
                        this.$input.val(this._defaults.defaultValue);
                        var e = $.datepicker._getInst(this.$input.get(0)),
                            t = $.datepicker._get(e, "timepicker");
                        if (t && t._defaults.timeOnly && e.input.val() !== e.lastVal) try {
                            $.datepicker._updateDatepicker(e)
                        } catch (e) {
                            $.timepicker.log(e)
                        }
                    }
                },
                _controls: {
                    slider: {
                        create: function (e, t, i, n, a, s, o) {
                            var r = e._defaults.isRTL;
                            return t.prop("slide", null).slider({
                                orientation: "horizontal",
                                value: r ? -1 * n : n,
                                min: r ? -1 * s : a,
                                max: r ? -1 * a : s,
                                step: o,
                                slide: function (t, n) {
                                    e.control.value(e, $(this), i, r ? -1 * n.value : n.value), e._onTimeChange()
                                },
                                stop: function (t, i) {
                                    e._onSelectHandler()
                                }
                            })
                        },
                        options: function (e, t, i, n, a) {
                            if (e._defaults.isRTL) {
                                if ("string" == typeof n) return "min" === n || "max" === n ? void 0 !== a ? t.slider(n, -1 * a) : Math.abs(t.slider(n)) : t.slider(n);
                                var s = n.min,
                                    o = n.max;
                                return n.min = n.max = null, void 0 !== s && (n.max = -1 * s), void 0 !== o && (n.min = -1 * o), t.slider(n)
                            }
                            return "string" == typeof n && void 0 !== a ? t.slider(n, a) : t.slider(n)
                        },
                        value: function (e, t, i, n) {
                            return e._defaults.isRTL ? void 0 !== n ? t.slider("value", -1 * n) : Math.abs(t.slider("value")) : void 0 !== n ? t.slider("value", n) : t.slider("value")
                        }
                    },
                    select: {
                        create: function (e, t, i, n, a, s, o) {
                            for (var r = '<select class="ui-timepicker-select ui-state-default ui-corner-all" data-unit="' + i + '" data-min="' + a + '" data-max="' + s + '" data-step="' + o + '">', l = e._defaults.pickerTimeFormat || e._defaults.timeFormat, c = a; s >= c; c += o) r += '<option value="' + c + '"' + (c === n ? " selected" : "") + ">", r += "hour" === i ? $.datepicker.formatTime($.trim(l.replace(/[^ht ]/gi, "")), {
                                hour: c
                            }, e._defaults) : "millisec" === i || "microsec" === i || c >= 10 ? c : "0" + c.toString(), r += "</option>";
                            return r += "</select>", t.children("select").remove(), $(r).appendTo(t).change((function (t) {
                                e._onTimeChange(), e._onSelectHandler(), e._afterInject()
                            })), t
                        },
                        options: function (e, t, i, n, a) {
                            var s = {},
                                o = t.children("select");
                            if ("string" == typeof n) {
                                if (void 0 === a) return o.data(n);
                                s[n] = a
                            } else s = n;
                            return e.control.create(e, t, o.data("unit"), o.val(), s.min >= 0 ? s.min : o.data("min"), s.max || o.data("max"), s.step || o.data("step"))
                        },
                        value: function (e, t, i, n) {
                            var a = t.children("select");
                            return void 0 !== n ? a.val(n) : a.val()
                        }
                    }
                }
            }), $.fn.extend({
                timepicker: function (e) {
                    e = e || {};
                    var t = Array.prototype.slice.call(arguments);
                    return "object" == typeof e && (t[0] = $.extend(e, {
                        timeOnly: !0
                    })), $(this).each((function () {
                        $.fn.datetimepicker.apply($(this), t)
                    }))
                },
                datetimepicker: function (e) {
                    var t = arguments;
                    return "string" == typeof (e = e || {}) ? "getDate" === e || "option" === e && 2 === t.length && "string" == typeof t[1] ? $.fn.datepicker.apply($(this[0]), t) : this.each((function () {
                        var e = $(this);
                        e.datepicker.apply(e, t)
                    })) : this.each((function () {
                        var t = $(this);
                        t.datepicker($.timepicker._newInst(t, e)._defaults)
                    }))
                }
            }), $.datepicker.parseDateTime = function (e, t, i, n, a) {
                var s = parseDateTimeInternal(e, t, i, n, a);
                if (s.timeObj) {
                    var o = s.timeObj;
                    s.date.setHours(o.hour, o.minute, o.second, o.millisec), s.date.setMicroseconds(o.microsec)
                }
                return s.date
            }, $.datepicker.parseTime = function (e, t, i) {
                var n = extendRemove(extendRemove({}, $.timepicker._defaults), i || {}),
                    a = (e.replace(/\'.*?\'/g, "").indexOf("Z"), function (e, t, i) {
                        var n, a = "^" + e.toString().replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g, (function (e) {
                            var t = e.length;
                            switch (e.charAt(0).toLowerCase()) {
                                case "h":
                                case "m":
                                case "s":
                                    return 1 === t ? "(\\d?\\d)" : "(\\d{" + t + "})";
                                case "l":
                                case "c":
                                    return "(\\d?\\d?\\d)";
                                case "z":
                                    return "(z|[-+]\\d\\d:?\\d\\d|\\S+)?";
                                case "t":
                                    return function (e, t) {
                                        var i = [];
                                        return e && $.merge(i, e), t && $.merge(i, t), i = $.map(i, (function (e) {
                                            return e.replace(/[.*+?|()\[\]{}\\]/g, "\\$&")
                                        })), "(" + i.join("|") + ")?"
                                    }(i.amNames, i.pmNames);
                                default:
                                    return "(" + e.replace(/\'/g, "").replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g, (function (e) {
                                        return "\\" + e
                                    })) + ")?"
                            }
                        })).replace(/\s/g, "\\s?") + i.timeSuffix + "$",
                            s = function (e) {
                                var t = e.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|c{1}|t{1,2}|z|'.*?')/g),
                                    i = {
                                        h: -1,
                                        m: -1,
                                        s: -1,
                                        l: -1,
                                        c: -1,
                                        t: -1,
                                        z: -1
                                    };
                                if (t)
                                    for (var n = 0; n < t.length; n++) - 1 === i[t[n].toString().charAt(0)] && (i[t[n].toString().charAt(0)] = n + 1);
                                return i
                            }(e),
                            o = "",
                            r = {
                                hour: 0,
                                minute: 0,
                                second: 0,
                                millisec: 0,
                                microsec: 0
                            };
                        return !!(n = t.match(new RegExp(a, "i"))) && (-1 !== s.t && (void 0 === n[s.t] || 0 === n[s.t].length ? (o = "", r.ampm = "") : (o = -1 !== $.inArray(n[s.t].toUpperCase(), $.map(i.amNames, (function (e, t) {
                            return e.toUpperCase()
                        }))) ? "AM" : "PM", r.ampm = i["AM" === o ? "amNames" : "pmNames"][0])), -1 !== s.h && ("AM" === o && "12" === n[s.h] ? r.hour = 0 : "PM" === o && "12" !== n[s.h] ? r.hour = parseInt(n[s.h], 10) + 12 : r.hour = Number(n[s.h])), -1 !== s.m && (r.minute = Number(n[s.m])), -1 !== s.s && (r.second = Number(n[s.s])), -1 !== s.l && (r.millisec = Number(n[s.l])), -1 !== s.c && (r.microsec = Number(n[s.c])), -1 !== s.z && void 0 !== n[s.z] && (r.timezone = $.timepicker.timezoneOffsetNumber(n[s.z])), r)
                    });
                return "function" == typeof n.parse ? n.parse(e, t, n) : "loose" === n.parse ? function (e, t, i) {
                    try {
                        var n = new Date("2012-01-01 " + t);
                        if (isNaN(n.getTime()) && (n = new Date("2012-01-01T" + t), isNaN(n.getTime()) && (n = new Date("01/01/2012 " + t), isNaN(n.getTime())))) throw "Unable to parse time with native Date: " + t;
                        return {
                            hour: n.getHours(),
                            minute: n.getMinutes(),
                            second: n.getSeconds(),
                            millisec: n.getMilliseconds(),
                            microsec: n.getMicroseconds(),
                            timezone: -1 * n.getTimezoneOffset()
                        }
                    } catch (n) {
                        try {
                            return a(e, t, i)
                        } catch (i) {
                            $.timepicker.log("Unable to parse \ntimeString: " + t + "\ntimeFormat: " + e)
                        }
                    }
                    return !1
                }(e, t, n) : a(e, t, n)
            }, $.datepicker.formatTime = function (e, t, i) {
                i = i || {}, i = $.extend({}, $.timepicker._defaults, i), t = $.extend({
                    hour: 0,
                    minute: 0,
                    second: 0,
                    millisec: 0,
                    microsec: 0,
                    timezone: null
                }, t);
                var n = e,
                    a = i.amNames[0],
                    s = parseInt(t.hour, 10);
                return s > 11 && (a = i.pmNames[0]), n.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g, (function (e) {
                    switch (e) {
                        case "HH":
                            return ("0" + s).slice(-2);
                        case "H":
                            return s;
                        case "hh":
                            return ("0" + convert24to12(s)).slice(-2);
                        case "h":
                            return convert24to12(s);
                        case "mm":
                            return ("0" + t.minute).slice(-2);
                        case "m":
                            return t.minute;
                        case "ss":
                            return ("0" + t.second).slice(-2);
                        case "s":
                            return t.second;
                        case "l":
                            return ("00" + t.millisec).slice(-3);
                        case "c":
                            return ("00" + t.microsec).slice(-3);
                        case "z":
                            return $.timepicker.timezoneOffsetString(null === t.timezone ? i.timezone : t.timezone, !1);
                        case "Z":
                            return $.timepicker.timezoneOffsetString(null === t.timezone ? i.timezone : t.timezone, !0);
                        case "T":
                            return a.charAt(0).toUpperCase();
                        case "TT":
                            return a.toUpperCase();
                        case "t":
                            return a.charAt(0).toLowerCase();
                        case "tt":
                            return a.toLowerCase();
                        default:
                            return e.replace(/'/g, "")
                    }
                }))
            }, $.datepicker._base_selectDate = $.datepicker._selectDate, $.datepicker._selectDate = function (e, t) {
                var i, n = this._getInst($(e)[0]),
                    a = this._get(n, "timepicker");
                a && n.settings.showTimepicker ? (a._limitMinMaxDateTime(n, !0), i = n.inline, n.inline = n.stay_open = !0, this._base_selectDate(e, t), n.inline = i, n.stay_open = !1, this._notifyChange(n), this._updateDatepicker(n)) : this._base_selectDate(e, t)
            }, $.datepicker._base_updateDatepicker = $.datepicker._updateDatepicker, $.datepicker._updateDatepicker = function (e) {
                var t = e.input[0];
                if (!($.datepicker._curInst && $.datepicker._curInst !== e && $.datepicker._datepickerShowing && $.datepicker._lastInput !== t || "boolean" == typeof e.stay_open && !1 !== e.stay_open)) {
                    this._base_updateDatepicker(e);
                    var i = this._get(e, "timepicker");
                    i && i._addTimePicker(e)
                }
            }, $.datepicker._base_doKeyPress = $.datepicker._doKeyPress, $.datepicker._doKeyPress = function (e) {
                var t = $.datepicker._getInst(e.target),
                    i = $.datepicker._get(t, "timepicker");
                if (i && $.datepicker._get(t, "constrainInput")) {
                    var n = i.support.ampm,
                        a = null !== i._defaults.showTimezone ? i._defaults.showTimezone : i.support.timezone,
                        s = $.datepicker._possibleChars($.datepicker._get(t, "dateFormat")),
                        o = i._defaults.timeFormat.toString().replace(/[hms]/g, "").replace(/TT/g, n ? "APM" : "").replace(/Tt/g, n ? "AaPpMm" : "").replace(/tT/g, n ? "AaPpMm" : "").replace(/T/g, n ? "AP" : "").replace(/tt/g, n ? "apm" : "").replace(/t/g, n ? "ap" : "") + " " + i._defaults.separator + i._defaults.timeSuffix + (a ? i._defaults.timezoneList.join("") : "") + i._defaults.amNames.join("") + i._defaults.pmNames.join("") + s,
                        r = String.fromCharCode(void 0 === e.charCode ? e.keyCode : e.charCode);
                    return e.ctrlKey || " " > r || !s || o.indexOf(r) > -1
                }
                return $.datepicker._base_doKeyPress(e)
            }, $.datepicker._base_updateAlternate = $.datepicker._updateAlternate, $.datepicker._updateAlternate = function (e) {
                var t = this._get(e, "timepicker");
                if (t) {
                    var i = t._defaults.altField;
                    if (i) {
                        var n = (t._defaults.altFormat || t._defaults.dateFormat, this._getDate(e)),
                            a = $.datepicker._getFormatConfig(e),
                            s = "",
                            o = t._defaults.altSeparator ? t._defaults.altSeparator : t._defaults.separator,
                            r = t._defaults.altTimeSuffix ? t._defaults.altTimeSuffix : t._defaults.timeSuffix,
                            l = null !== t._defaults.altTimeFormat ? t._defaults.altTimeFormat : t._defaults.timeFormat;
                        s += $.datepicker.formatTime(l, t, t._defaults) + r, t._defaults.timeOnly || t._defaults.altFieldTimeOnly || null === n || (s = t._defaults.altFormat ? $.datepicker.formatDate(t._defaults.altFormat, n, a) + o + s : t.formattedDate + o + s), $(i).val(e.input.val() ? s : "")
                    }
                } else $.datepicker._base_updateAlternate(e)
            }, $.datepicker._base_doKeyUp = $.datepicker._doKeyUp, $.datepicker._doKeyUp = function (e) {
                var t = $.datepicker._getInst(e.target),
                    i = $.datepicker._get(t, "timepicker");
                if (i && i._defaults.timeOnly && t.input.val() !== t.lastVal) try {
                    $.datepicker._updateDatepicker(t)
                } catch (e) {
                    $.timepicker.log(e)
                }
                return $.datepicker._base_doKeyUp(e)
            }, $.datepicker._base_gotoToday = $.datepicker._gotoToday, $.datepicker._gotoToday = function (e) {
                var t = this._getInst($(e)[0]);
                this._base_gotoToday(e);
                var i = this._get(t, "timepicker");
                if (i) {
                    var n = $.timepicker.timezoneOffsetNumber(i.timezone),
                        a = new Date;
                    a.setMinutes(a.getMinutes() + a.getTimezoneOffset() + parseInt(n, 10)), this._setTime(t, a), this._setDate(t, a), i._onSelectHandler()
                }
            }, $.datepicker._disableTimepickerDatepicker = function (e) {
                var t = this._getInst(e);
                if (t) {
                    var i = this._get(t, "timepicker");
                    $(e).datepicker("getDate"), i && (t.settings.showTimepicker = !1, i._defaults.showTimepicker = !1, i._updateDateTime(t))
                }
            }, $.datepicker._enableTimepickerDatepicker = function (e) {
                var t = this._getInst(e);
                if (t) {
                    var i = this._get(t, "timepicker");
                    $(e).datepicker("getDate"), i && (t.settings.showTimepicker = !0, i._defaults.showTimepicker = !0, i._addTimePicker(t), i._updateDateTime(t))
                }
            }, $.datepicker._setTime = function (e, t) {
                var i = this._get(e, "timepicker");
                if (i) {
                    var n = i._defaults;
                    i.hour = t ? t.getHours() : n.hour, i.minute = t ? t.getMinutes() : n.minute, i.second = t ? t.getSeconds() : n.second, i.millisec = t ? t.getMilliseconds() : n.millisec, i.microsec = t ? t.getMicroseconds() : n.microsec, i._limitMinMaxDateTime(e, !0), i._onTimeChange(), i._updateDateTime(e)
                }
            }, $.datepicker._setTimeDatepicker = function (e, t, i) {
                var n = this._getInst(e);
                if (n) {
                    var a, s = this._get(n, "timepicker");
                    if (s) this._setDateFromField(n), t && ("string" == typeof t ? (s._parseTime(t, i), (a = new Date).setHours(s.hour, s.minute, s.second, s.millisec), a.setMicroseconds(s.microsec)) : (a = new Date(t.getTime())).setMicroseconds(t.getMicroseconds()), "Invalid Date" === a.toString() && (a = void 0), this._setTime(n, a))
                }
            }, $.datepicker._base_setDateDatepicker = $.datepicker._setDateDatepicker, $.datepicker._setDateDatepicker = function (e, t) {
                var i = this._getInst(e),
                    n = t;
                if (i) {
                    "string" == typeof t && ((n = new Date(t)).getTime() || (this._base_setDateDatepicker.apply(this, arguments), n = $(e).datepicker("getDate")));
                    var a, s = this._get(i, "timepicker");
                    n instanceof Date ? (a = new Date(n.getTime())).setMicroseconds(n.getMicroseconds()) : a = n, s && a && (s.support.timezone || null !== s._defaults.timezone || (s.timezone = -1 * a.getTimezoneOffset()), n = $.timepicker.timezoneAdjust(n, $.timepicker.timezoneOffsetString(-n.getTimezoneOffset()), s.timezone), a = $.timepicker.timezoneAdjust(a, $.timepicker.timezoneOffsetString(-a.getTimezoneOffset()), s.timezone)), this._updateDatepicker(i), this._base_setDateDatepicker.apply(this, arguments), this._setTimeDatepicker(e, a, !0)
                }
            }, $.datepicker._base_getDateDatepicker = $.datepicker._getDateDatepicker, $.datepicker._getDateDatepicker = function (e, t) {
                var i = this._getInst(e);
                if (i) {
                    var n = this._get(i, "timepicker");
                    if (n) {
                        void 0 === i.lastVal && this._setDateFromField(i, t);
                        var a, s = this._getDate(i);
                        return a = n.$altInput && n._defaults.altFieldTimeOnly ? n.$input.val() + " " + n.$altInput.val() : "INPUT" !== n.$input.get(0).tagName && n.$altInput ? n.$altInput.val() : n.$input.val(), s && n._parseTime(a, !i.settings.timeOnly) && (s.setHours(n.hour, n.minute, n.second, n.millisec), s.setMicroseconds(n.microsec), null != n.timezone && (n.support.timezone || null !== n._defaults.timezone || (n.timezone = -1 * s.getTimezoneOffset()), s = $.timepicker.timezoneAdjust(s, n.timezone, $.timepicker.timezoneOffsetString(-s.getTimezoneOffset())))), s
                    }
                    return this._base_getDateDatepicker(e, t)
                }
            }, $.datepicker._base_parseDate = $.datepicker.parseDate, $.datepicker.parseDate = function (e, t, i) {
                var n;
                try {
                    n = this._base_parseDate(e, t, i)
                } catch (a) {
                    if (!(a.indexOf(":") >= 0)) throw a;
                    n = this._base_parseDate(e, t.substring(0, t.length - (a.length - a.indexOf(":") - 2)), i), $.timepicker.log("Error parsing the date string: " + a + "\ndate string = " + t + "\ndate format = " + e)
                }
                return n
            }, $.datepicker._base_formatDate = $.datepicker._formatDate, $.datepicker._formatDate = function (e, t, i, n) {
                var a = this._get(e, "timepicker");
                return a ? (a._updateDateTime(e), a.$input.val()) : this._base_formatDate(e)
            }, $.datepicker._base_optionDatepicker = $.datepicker._optionDatepicker, $.datepicker._optionDatepicker = function (e, t, i) {
                var n, a = this._getInst(e);
                if (!a) return null;
                var s = this._get(a, "timepicker");
                if (s) {
                    var o, r, l, c, d = null,
                        p = null,
                        u = null,
                        h = s._defaults.evnts,
                        f = {};
                    if ("string" == typeof t) {
                        if ("minDate" === t || "minDateTime" === t) d = i;
                        else if ("maxDate" === t || "maxDateTime" === t) p = i;
                        else if ("onSelect" === t) u = i;
                        else if (h.hasOwnProperty(t)) {
                            if (void 0 === i) return h[t];
                            f[t] = i, n = {}
                        }
                    } else if ("object" == typeof t)
                        for (o in t.minDate ? d = t.minDate : t.minDateTime ? d = t.minDateTime : t.maxDate ? p = t.maxDate : t.maxDateTime && (p = t.maxDateTime), h) h.hasOwnProperty(o) && t[o] && (f[o] = t[o]);
                    for (o in f) f.hasOwnProperty(o) && (h[o] = f[o], n || (n = $.extend({}, t)), delete n[o]);
                    if (n && isEmptyObject(n)) return;
                    if (d ? (d = 0 === d ? new Date : new Date(d), s._defaults.minDate = d, s._defaults.minDateTime = d) : p ? (p = 0 === p ? new Date : new Date(p), s._defaults.maxDate = p, s._defaults.maxDateTime = p) : u && (s._defaults.onSelect = u), d || p) return l = (c = $(e)).datetimepicker("getDate"), r = this._base_optionDatepicker.call($.datepicker, e, n || t, i), c.datetimepicker("setDate", l), r
                }
                return void 0 === i ? this._base_optionDatepicker.call($.datepicker, e, t) : this._base_optionDatepicker.call($.datepicker, e, n || t, i)
            };
            var isEmptyObject = function (e) {
                var t;
                for (t in e)
                    if (e.hasOwnProperty(t)) return !1;
                return !0
            },
                extendRemove = function (e, t) {
                    for (var i in $.extend(e, t), t) (null === t[i] || void 0 === t[i]) && (e[i] = t[i]);
                    return e
                },
                detectSupport = function (e) {
                    var t = e.replace(/'.*?'/g, "").toLowerCase(),
                        i = function (e, t) {
                            return -1 !== e.indexOf(t)
                        };
                    return {
                        hour: i(t, "h"),
                        minute: i(t, "m"),
                        second: i(t, "s"),
                        millisec: i(t, "l"),
                        microsec: i(t, "c"),
                        timezone: i(t, "z"),
                        ampm: i(t, "t") && i(e, "h"),
                        iso8601: i(e, "Z")
                    }
                },
                convert24to12 = function (e) {
                    return 0 === (e %= 12) && (e = 12), String(e)
                },
                computeEffectiveSetting = function (e, t) {
                    return e && e[t] ? e[t] : $.timepicker._defaults[t]
                },
                splitDateTime = function (e, t) {
                    var i = computeEffectiveSetting(t, "separator"),
                        n = computeEffectiveSetting(t, "timeFormat").split(i).length,
                        a = e.split(i),
                        s = a.length;
                    return s > 1 ? {
                        dateString: a.splice(0, s - n).join(i),
                        timeString: a.splice(0, n).join(i)
                    } : {
                        dateString: e,
                        timeString: ""
                    }
                },
                parseDateTimeInternal = function (e, t, i, n, a) {
                    var s, o, r;
                    if (o = splitDateTime(i, a), s = $.datepicker._base_parseDate(e, o.dateString, n), "" === o.timeString) return {
                        date: s
                    };
                    if (!(r = $.datepicker.parseTime(t, o.timeString, a))) throw "Wrong time format";
                    return {
                        date: s,
                        timeObj: r
                    }
                },
                selectLocalTimezone = function (e, t) {
                    if (e && e.timezone_select) {
                        var i = t || new Date;
                        e.timezone_select.val(-i.getTimezoneOffset())
                    }
                };
            $.timepicker = new Timepicker, $.timepicker.timezoneOffsetString = function (e, t) {
                if (isNaN(e) || e > 840 || -720 > e) return e;
                var i = e % 60,
                    n = (e - i) / 60,
                    a = t ? ":" : "",
                    s = (e >= 0 ? "+" : "-") + ("0" + Math.abs(n)).slice(-2) + a + ("0" + Math.abs(i)).slice(-2);
                return "+00:00" === s ? "Z" : s
            }, $.timepicker.timezoneOffsetNumber = function (e) {
                var t = e.toString().replace(":", "");
                return "Z" === t.toUpperCase() ? 0 : /^(\-|\+)\d{4}$/.test(t) ? ("-" === t.substr(0, 1) ? -1 : 1) * (60 * parseInt(t.substr(1, 2), 10) + parseInt(t.substr(3, 2), 10)) : parseInt(e, 10)
            }, $.timepicker.timezoneAdjust = function (e, t, i) {
                var n = $.timepicker.timezoneOffsetNumber(t),
                    a = $.timepicker.timezoneOffsetNumber(i);
                return isNaN(a) || e.setMinutes(e.getMinutes() + -n - -a), e
            }, $.timepicker.timeRange = function (e, t, i) {
                return $.timepicker.handleRange("timepicker", e, t, i)
            }, $.timepicker.datetimeRange = function (e, t, i) {
                $.timepicker.handleRange("datetimepicker", e, t, i)
            }, $.timepicker.dateRange = function (e, t, i) {
                $.timepicker.handleRange("datepicker", e, t, i)
            }, $.timepicker.handleRange = function (e, t, i, n) {
                function a(a, s) {
                    var o = t[e]("getDate"),
                        r = i[e]("getDate"),
                        l = a[e]("getDate");
                    if (null !== o) {
                        var c = new Date(o.getTime()),
                            d = new Date(o.getTime());
                        c.setMilliseconds(c.getMilliseconds() + n.minInterval), d.setMilliseconds(d.getMilliseconds() + n.maxInterval), n.minInterval > 0 && c > r ? i[e]("setDate", c) : n.maxInterval > 0 && r > d ? i[e]("setDate", d) : o > r && s[e]("setDate", l)
                    }
                }

                function s(t, i, a) {
                    if (t.val()) {
                        var s = t[e].call(t, "getDate");
                        null !== s && n.minInterval > 0 && ("minDate" === a && s.setMilliseconds(s.getMilliseconds() + n.minInterval), "maxDate" === a && s.setMilliseconds(s.getMilliseconds() - n.minInterval)), s.getTime && i[e].call(i, "option", a, s)
                    }
                }
                n = $.extend({}, {
                    minInterval: 0,
                    maxInterval: 0,
                    start: {},
                    end: {}
                }, n);
                var o = !1;
                return "timepicker" === e && (o = !0, e = "datetimepicker"), $.fn[e].call(t, $.extend({
                    timeOnly: o,
                    onClose: function (e, t) {
                        a($(this), i)
                    },
                    onSelect: function (e) {
                        s($(this), i, "minDate")
                    }
                }, n, n.start)), $.fn[e].call(i, $.extend({
                    timeOnly: o,
                    onClose: function (e, i) {
                        a($(this), t)
                    },
                    onSelect: function (e) {
                        s($(this), t, "maxDate")
                    }
                }, n, n.end)), a(t, i), s(t, i, "minDate"), s(i, t, "maxDate"), $([t.get(0), i.get(0)])
            }, $.timepicker.log = function () {
                window.console && window.console.log && window.console.log.apply && window.console.log.apply(window.console, Array.prototype.slice.call(arguments))
            }, $.timepicker._util = {
                _extendRemove: extendRemove,
                _isEmptyObject: isEmptyObject,
                _convert24to12: convert24to12,
                _detectSupport: detectSupport,
                _selectLocalTimezone: selectLocalTimezone,
                _computeEffectiveSetting: computeEffectiveSetting,
                _splitDateTime: splitDateTime,
                _parseDateTimeInternal: parseDateTimeInternal
            }, Date.prototype.getMicroseconds || (Date.prototype.microseconds = 0, Date.prototype.getMicroseconds = function () {
                return this.microseconds
            }, Date.prototype.setMicroseconds = function (e) {
                return this.setMilliseconds(this.getMilliseconds() + Math.floor(e / 1e3)), this.microseconds = e % 1e3, this
            }), $.timepicker.version = "1.6.3"
        }
    })),
    function (e) {
        e.widget("ui.tagit", {
            options: {
                allowDuplicates: !1,
                caseSensitive: !0,
                fieldName: "tags",
                placeholderText: null,
                readOnly: !1,
                removeConfirmation: !1,
                tagLimit: null,
                availableTags: [],
                autocomplete: {},
                showAutocompleteOnFocus: !1,
                allowSpaces: !1,
                singleField: !1,
                singleFieldDelimiter: ",",
                singleFieldNode: null,
                animate: !0,
                tabIndex: null,
                beforeTagAdded: null,
                afterTagAdded: null,
                beforeTagRemoved: null,
                afterTagRemoved: null,
                onTagClicked: null,
                onTagLimitExceeded: null,
                onTagAdded: null,
                onTagRemoved: null,
                tagSource: null
            },
            _create: function () {
                var t = this;
                this.element.is("input") ? (this.tagList = e("<ul></ul>").insertAfter(this.element), this.options.singleField = !0, this.options.singleFieldNode = this.element, this.element.addClass("tagit-hidden-field")) : this.tagList = this.element.find("ul, ol").andSelf().last(), this.tagInput = e('<input type="text" />').addClass("ui-widget-content"), this.options.readOnly && this.tagInput.attr("disabled", "disabled"), this.options.tabIndex && this.tagInput.attr("tabindex", this.options.tabIndex), this.options.placeholderText && this.tagInput.attr("placeholder", this.options.placeholderText), this.options.autocomplete.source || (this.options.autocomplete.source = function (t, i) {
                    var n = t.term.toLowerCase(),
                        a = e.grep(this.options.availableTags, (function (e) {
                            return 0 === e.toLowerCase().indexOf(n)
                        }));
                    this.options.allowDuplicates || (a = this._subtractArray(a, this.assignedTags())), i(a)
                }), this.options.showAutocompleteOnFocus && (this.tagInput.focus((function (e, i) {
                    t._showAutocomplete()
                })), void 0 === this.options.autocomplete.minLength && (this.options.autocomplete.minLength = 0)), e.isFunction(this.options.autocomplete.source) && (this.options.autocomplete.source = e.proxy(this.options.autocomplete.source, this)), e.isFunction(this.options.tagSource) && (this.options.tagSource = e.proxy(this.options.tagSource, this)), this.tagList.addClass("tagit").addClass("ui-widget ui-widget-content ui-corner-all").append(e('<li class="tagit-new"></li>').append(this.tagInput)).click((function (i) {
                    var n = e(i.target);
                    n.hasClass("tagit-label") ? (n = n.closest(".tagit-choice")).hasClass("removed") || t._trigger("onTagClicked", i, {
                        tag: n,
                        tagLabel: t.tagLabel(n)
                    }) : t.tagInput.focus()
                }));
                var i = !1;
                if (this.options.singleField)
                    if (this.options.singleFieldNode) {
                        var n = e(this.options.singleFieldNode),
                            a = n.val().split(this.options.singleFieldDelimiter);
                        n.val(""), e.each(a, (function (e, n) {
                            t.createTag(n, null, !0), i = !0
                        }))
                    } else this.options.singleFieldNode = e('<input type="hidden" style="display:none;" value="" name="' + this.options.fieldName + '" />'), this.tagList.after(this.options.singleFieldNode);
                i || this.tagList.children("li").each((function () {
                    e(this).hasClass("tagit-new") || (t.createTag(e(this).text(), e(this).attr("class"), !0), e(this).remove())
                })), this.tagInput.keydown((function (i) {
                    if (i.which == e.ui.keyCode.BACKSPACE && "" === t.tagInput.val()) {
                        var n = t._lastTag();
                        !t.options.removeConfirmation || n.hasClass("remove") ? t.removeTag(n) : t.options.removeConfirmation && n.addClass("remove ui-state-highlight")
                    } else t.options.removeConfirmation && t._lastTag().removeClass("remove ui-state-highlight");
                    (i.which === e.ui.keyCode.COMMA && !1 === i.shiftKey || i.which === e.ui.keyCode.ENTER || i.which == e.ui.keyCode.TAB && "" !== t.tagInput.val() || i.which == e.ui.keyCode.SPACE && !0 !== t.options.allowSpaces && ('"' != e.trim(t.tagInput.val()).replace(/^s*/, "").charAt(0) || '"' == e.trim(t.tagInput.val()).charAt(0) && '"' == e.trim(t.tagInput.val()).charAt(e.trim(t.tagInput.val()).length - 1) && 0 != e.trim(t.tagInput.val()).length - 1)) && (i.which === e.ui.keyCode.ENTER && "" === t.tagInput.val() || i.preventDefault(), t.options.autocomplete.autoFocus && t.tagInput.data("autocomplete-open") || (t.tagInput.autocomplete("close"), t.createTag(t._cleanedInput())))
                })).blur((function (e) {
                    t.tagInput.data("autocomplete-open") || t.createTag(t._cleanedInput())
                })), (this.options.availableTags || this.options.tagSource || this.options.autocomplete.source) && (n = {
                    select: function (e, i) {
                        return t.createTag(i.item.value), !1
                    }
                }, e.extend(n, this.options.autocomplete), n.source = this.options.tagSource || n.source, this.tagInput.autocomplete(n).bind("autocompleteopen.tagit", (function (e, i) {
                    t.tagInput.data("autocomplete-open", !0)
                })).bind("autocompleteclose.tagit", (function (e, i) {
                    t.tagInput.data("autocomplete-open", !1)
                })), this.tagInput.autocomplete("widget").addClass("tagit-autocomplete"))
            },
            destroy: function () {
                return e.Widget.prototype.destroy.call(this), this.element.unbind(".tagit"), this.tagList.unbind(".tagit"), this.tagInput.removeData("autocomplete-open"), this.tagList.removeClass("tagit ui-widget ui-widget-content ui-corner-all tagit-hidden-field"), this.element.is("input") ? (this.element.removeClass("tagit-hidden-field"), this.tagList.remove()) : (this.element.children("li").each((function () {
                    e(this).hasClass("tagit-new") ? e(this).remove() : (e(this).removeClass("tagit-choice ui-widget-content ui-state-default ui-state-highlight ui-corner-all remove tagit-choice-editable tagit-choice-read-only"), e(this).text(e(this).children(".tagit-label").text()))
                })), this.singleFieldNode && this.singleFieldNode.remove()), this
            },
            _cleanedInput: function () {
                return e.trim(this.tagInput.val().replace(/^"(.*)"$/, "$1"))
            },
            _lastTag: function () {
                return this.tagList.find(".tagit-choice:last:not(.removed)")
            },
            _tags: function () {
                return this.tagList.find(".tagit-choice:not(.removed)")
            },
            assignedTags: function () {
                var t = this,
                    i = [];
                return this.options.singleField ? "" === (i = e(this.options.singleFieldNode).val().split(this.options.singleFieldDelimiter))[0] && (i = []) : this._tags().each((function () {
                    i.push(t.tagLabel(this))
                })), i
            },
            _updateSingleTagsField: function (t) {
                e(this.options.singleFieldNode).val(t.join(this.options.singleFieldDelimiter)).trigger("change")
            },
            _subtractArray: function (t, i) {
                for (var n = [], a = 0; a < t.length; a++) - 1 == e.inArray(t[a], i) && n.push(t[a]);
                return n
            },
            tagLabel: function (t) {
                return this.options.singleField ? e(t).find(".tagit-label:first").text() : e(t).find("input:first").val()
            },
            _showAutocomplete: function () {
                this.tagInput.autocomplete("search", "")
            },
            _findTagByLabel: function (t) {
                var i = this,
                    n = null;
                return this._tags().each((function (a) {
                    if (i._formatStr(t) == i._formatStr(i.tagLabel(this))) return n = e(this), !1
                })), n
            },
            _isNew: function (e) {
                return !this._findTagByLabel(e)
            },
            _formatStr: function (t) {
                return this.options.caseSensitive ? t : e.trim(t.toLowerCase())
            },
            _effectExists: function (t) {
                return Boolean(e.effects && (e.effects[t] || e.effects.effect && e.effects.effect[t]))
            },
            createTag: function (t, i, n) {
                var a = this;
                if (t = e.trim(t), this.options.preprocessTag && (t = this.options.preprocessTag(t)), "" === t) return !1;
                if (!this.options.allowDuplicates && !this._isNew(t)) return t = this._findTagByLabel(t), !1 !== this._trigger("onTagExists", null, {
                    existingTag: t,
                    duringInitialization: n
                }) && this._effectExists("highlight") && t.effect("highlight"), !1;
                if (this.options.tagLimit && this._tags().length >= this.options.tagLimit) return this._trigger("onTagLimitExceeded", null, {
                    duringInitialization: n
                }), !1;
                var s = e(this.options.onTagClicked ? '<a class="tagit-label"></a>' : '<span class="tagit-label"></span>').text(t),
                    o = e("<li></li>").addClass("tagit-choice ui-widget-content ui-state-default ui-corner-all").addClass(i).append(s);
                this.options.readOnly ? o.addClass("tagit-choice-read-only") : (o.addClass("tagit-choice-editable"), i = e("<span></span>").addClass("ui-icon ui-icon-close"), i = e('<a><span class="text-icon">Ã—</span></a>').addClass("tagit-close").append(i).click((function (e) {
                    a.removeTag(o)
                })), o.append(i)), this.options.singleField || (s = s.html(), o.append('<input type="hidden" value="' + s + '" name="' + this.options.fieldName + '" class="tagit-hidden-field" />')), !1 !== this._trigger("beforeTagAdded", null, {
                    tag: o,
                    tagLabel: this.tagLabel(o),
                    duringInitialization: n
                }) && (this.options.singleField && ((s = this.assignedTags()).push(t), this._updateSingleTagsField(s)), this._trigger("onTagAdded", null, o), this.tagInput.val(""), this.tagInput.parent().before(o), this._trigger("afterTagAdded", null, {
                    tag: o,
                    tagLabel: this.tagLabel(o),
                    duringInitialization: n
                }), this.options.showAutocompleteOnFocus && !n && setTimeout((function () {
                    a._showAutocomplete()
                }), 0))
            },
            removeTag: function (t, i) {
                if (i = void 0 === i ? this.options.animate : i, t = e(t), this._trigger("onTagRemoved", null, t), !1 !== this._trigger("beforeTagRemoved", null, {
                    tag: t,
                    tagLabel: this.tagLabel(t)
                })) {
                    if (this.options.singleField) {
                        var n = this.assignedTags(),
                            a = this.tagLabel(t);
                        n = e.grep(n, (function (e) {
                            return e != a
                        }));
                        this._updateSingleTagsField(n)
                    }
                    if (i) {
                        t.addClass("removed");
                        n = this._effectExists("blind") ? ["blind", {
                            direction: "horizontal"
                        }, "fast"] : ["fast"];
                        var s = this;
                        n.push((function () {
                            t.remove(), s._trigger("afterTagRemoved", null, {
                                tag: t,
                                tagLabel: s.tagLabel(t)
                            })
                        })), t.fadeOut("fast").hide.apply(t, n).dequeue()
                    } else t.remove(), this._trigger("afterTagRemoved", null, {
                        tag: t,
                        tagLabel: this.tagLabel(t)
                    })
                }
            },
            removeTagByLabel: function (e, t) {
                var i = this._findTagByLabel(e);
                if (!i) throw "No such tag exists with the name '" + e + "'";
                this.removeTag(i, t)
            },
            removeAll: function () {
                var e = this;
                this._tags().each((function (t, i) {
                    e.removeTag(i, !1)
                }))
            }
        })
    }(jQuery), String.prototype.startsWith || (String.prototype.startsWith = function (e) {
        return 0 === this.indexOf(e)
    }), String.prototype.endsWith || (String.prototype.endsWith = function (e) {
        return this.length >= e.length && this.substr(this.length - e.length) === e
    }), window.FileReader && Uint8Array && !FileReader.prototype.readAsBinaryString && (FileReader.prototype.readAsBinaryString = function (e) {
        var t = "",
            i = this,
            n = new FileReader;
        n.onload = function (e) {
            for (var a = new Uint8Array(n.result), s = a.byteLength, o = 0; o < s; o++) t += String.fromCharCode(a[o]);
            i.content = t, i.onload()
        }, n.readAsArrayBuffer(e)
    }), window.nextact = window.nextact || function (e) {
        return function () {
            WebPlatform.delay(50, (function () {
                window.location.href = b64DecodeUnicode(e)
            }))
        }
    };
var toggleDisplay = function (e, t, i) {
    return i ? e[t ? "slideDown" : "slideUp"]("fast") : e[t ? "removeClass" : "addClass"]("none"), e
},
    STORE_PRODUCT_TYPE = {
        PHYSICAL_PRODUCT: "physical",
        DIGITAL_PRODUCT: "digital",
        SERVICE: "service",
        MEMBERSHIP: "membership"
    },
    COUNTRY_CODES = ["AF", "AX", "AL", "DZ", "AS", "AD", "AO", "AI", "AQ", "AG", "AR", "AM", "AW", "AU", "AT", "AZ", "BS", "BH", "BD", "BB", "BY", "BE", "BZ", "BJ", "BM", "BT", "BO", "BQ", "BA", "BW", "BV", "BR", "IO", "BN", "BG", "BF", "BI", "CV", "KH", "CM", "CA", "IC", "KY", "CF", "TD", "CL", "CN", "CX", "CC", "CO", "KM", "CG", "CD", "CK", "CR", "CI", "HR", "CU", "CW", "CY", "CZ", "DK", "DJ", "DM", "DO", "EC", "EG", "SV", "GQ", "ER", "EE", "ET", "FK", "FO", "FJ", "FI", "FR", "GF", "PF", "TF", "GA", "GM", "GE", "DE", "GH", "GI", "EL", "GL", "GD", "GP", "GU", "GT", "GG", "GN", "GW", "GY", "HT", "HM", "VA", "HN", "HK", "HU", "IS", "IN", "ID", "IR", "IQ", "IE", "IM", "IL", "IT", "JM", "JP", "JE", "JO", "KZ", "KE", "KI", "KP", "KR", "KW", "KG", "LA", "LV", "LB", "LS", "LR", "LY", "LI", "LT", "LU", "MO", "MK", "MG", "MW", "MY", "MV", "ML", "MT", "MH", "MQ", "MR", "MU", "YT", "MX", "FM", "MD", "MC", "MN", "ME", "MS", "MA", "MZ", "MM", "NA", "NR", "NP", "NL", "NC", "NZ", "NI", "NE", "NG", "NU", "NF", "MP", "NO", "OM", "PK", "PW", "PS", "PA", "PG", "PY", "PE", "PH", "PN", "PL", "PT", "PR", "QA", "RE", "RO", "RU", "RW", "BL", "SH", "KN", "LC", "MF", "PM", "VC", "WS", "SM", "ST", "SA", "SN", "RS", "SC", "SL", "SG", "SX", "SK", "SI", "SB", "SO", "ZA", "GS", "SS", "ES", "LK", "SD", "SR", "SJ", "SZ", "SE", "CH", "SY", "TW", "TJ", "TZ", "TH", "TL", "TG", "TK", "TO", "TT", "TN", "TR", "TM", "TC", "TV", "UG", "UA", "AE", "GB", "US", "UM", "UY", "UZ", "VU", "VE", "VN", "VG", "VI", "WF", "EH", "YE", "ZM", "ZW"],
    STATES = {
        US: ["Alabama", "Alaska", "Arizona", "Arkansas", "California", "Colorado", "Connecticut", "Delaware", "District of Columbia", "Florida", "Georgia", "Hawaii", "Idaho", "Illinois", "Indiana", "Iowa", "Kansas", "Kentucky", "Louisiana", "Maine", "Maryland", "Massachusetts", "Michigan", "Minnesota", "Mississippi", "Missouri", "Montana", "Nebraska", "Nevada", "New Hampshire", "New Jersey", "New Mexico", "New York", "North Carolina", "North Dakota", "Ohio", "Oklahoma", "Oregon", "Pennsylvania", "Rhode Island", "South Carolina", "South Dakota", "Tennessee", "Texas", "Utah", "Vermont", "Virginia", "Washington", "West Virginia", "Wisconsin", "Wyoming"],
        CA: ["Alberta", "British Columbia", "Manitoba", "New Brunswick", "Newfoundland and Labrador", "Northwest Territories", "Nova Scotia", "Nunavut", "Ontario", "Prince Edward Island", "Quebec", "Saskatchewan", "Yukon"],
        NG: ["Abia", "Abuja", "Adamawa", "Akwa Ibom", "Anambra", "Bauchi", "Bayelsa", "Benue", "Borno", "Cross River", "Delta", "Ebonyi", "Enugu", "Edo", "Ekiti", "Gombe", "Imo", "Jigawa", "Kaduna", "Kano", "Katsina", "Kebbi", "Kogi", "Kwara", "Lagos", "Nasarawa", "Niger", "Ogun", "Ondo", "Osun", "Oyo", "Plateau", "Rivers", "Sokoto", "Taraba", "Yobe", "Zamfara"],
        DZ: ["Adrar", "Chlef", "Laghouat", "Oum el-Bouaghi", "Batna", "BÃ©jaÃ¯a", "Biskra", "BÃ©char", "Blida", "BouÃ¯ra", "Tamanghasset", "TÃ©bessa", "Tlemcen", "Tiaret", "Tizi Ouzou", "Algiers", "Djelfa", "Jijel", "SÃ©tif", "SaÃ¯da", "Skikda", "Sidi Bel AbbÃ¨s", "Annaba", "Guelma", "Constantine", "MÃ©dÃ©a", "Mostaganem", "M'sila", "Mascara", "Ouargla", "Oran", "El Bayadh", "Illizi", "Bordj Bou ArrÃ©ridj", "BoumerdÃ¨s", "El Taref", "Tindouf", "Tissemsilt", "El Oued", "Khenchela", "Souk Ahras", "Tipaza", "Mila", "AÃ¯n Defla", "NaÃ¢ma", "AÃ¯n TÃ©mouchent", "GhardaÃ¯a", "Relizane", "AlgÃ©rie"],
        CO: ["Amazonas", "Antioquia", "Arauca", "ArchipiÃ©lago de San AndrÃ©s, Providencia y Santa Catalina", "AtlÃ¡ntico", "BogotÃ¡ D.C.", "BolÃ­var", "BoyacÃ¡", "Caldas", "CaquetÃ¡", "Casanare", "Cauca", "Cesar", "ChocÃ³", "CÃ³rdoba", "Cundinamarca", "GuainÃ­a", "Guaviare", "Huila", "La Guajira", "Magdalena", "Meta", "NariÃ±o", "Norte de Santander", "Putumayo", "QuindÃ­o", "Risaralda", "Santander", "Sucre", "Tolima", "Valle del Cauca", "VaupÃ©s", "Vichada"],
        PE: ["Amazonas", "Ãncash", "ApurÃ­mac", "Arequipa", "Ayacucho", "Cajamarca", "Callao", "Cusco", "Huancavelica", "HuÃ¡nuco", "Ica", "JunÃ­n", "La Libertad", "Lambayeque", "Lima Metropolitana", "Lima (departamento)", "Loreto", "Madre de Dios", "Moquegua", "Pasco", "Piura", "Puno", "San MartÃ­n", "Tacna", "Tumbes", "Ucayali"],
        MX: ["Aguascalientes", "Baja California", "Baja California Sur", "Campeche", "Chiapas", "Chihuahua", "Ciudad de MÃ©xico", "Coahuila", "Colima", "Durango", "Guanajuato", "Guerrero", "Hidalgo", "Jalisco", "MÃ©xico", "MichoacÃ¡n", "Morelos", "Nayarit", "Nuevo LeÃ³n", "Oaxaca", "Puebla", "QuerÃ©taro", "Quintana Roo", "San Luis PotosÃ­", "Sinaloa", "Sonora", "Tabasco", "Tamaulipas", "Tlaxcala", "Veracruz", "YucatÃ¡n"],
        EC: ["Azuay", "BolÃ­var", "CaÃ±ar", "Carchi", "Chimborazo", "Cotopaxi", "El Oro", "Esmeraldas", "GalÃ¡pagos", "Guayas", "Imbabura", "Loja", "Los RÃ­os", "ManabÃ­", "Morona-Santiago", "Napo", "Orellana", "Pastaza", "Pichincha", "Santa Elena", "Santo Domingo de los TsÃ¡chilas", "SucumbÃ­os", "Tungurahua", "Zamora-Chinchipe"],
        PA: ["Bocas Del Toro", "ChiriquÃ­", "CoclÃ©", "ColÃ³n", "DariÃ©n", "Herrera", "Los Santos", "PanamÃ¡ Oeste", "Veraguas"],
        AR: ["Buenos Aires", "Catamarca", "Chaco", "Chubut", "CÃ³rdoba", "Corrientes", "Entre RÃ­os", "Formosa", "Jujuy", "La Pampa", "La Rioja", "Mendoza", "Misiones", "NeuquÃ©n", "RÃ­o Negro", "Salta", "San Juan", "San Luis", "Santa Cruz", "Santa Fe", "Santiago del Estero", "Tierra del Fuego, AntÃ¡rtida e Islas del AtlÃ¡ntico Sur", "TucumÃ¡n"],
        BO: ["Beni", "Chuquisaca", "Cochabamba", "La Paz", "Oruro", "Pando", "PotosÃ­", "Santa Cruz", "Tarija"],
        BR: ["SÃ£o Paulo", "RÃ­o de Janeiro", "Distrito Federal", "CearÃ¡", "BahÃ­a", "Minas Gerais", "Amazonas", "ParanÃ¡", "Pernambuco", "GoiÃ¡s", "RÃ­o Grande del Sur", "ParÃ¡", "MaranhÃ£o", "Alagoas", "Mato Grosso del Sur", "PiauÃ­", "ParaÃ­ba", "RÃ­o Grande del Norte", "Mato Grosso", "Sergipe", "Santa Catarina", "RondÃ´nia", "AmapÃ¡", "Roraima", "Acre", "EspÃ­rito Santo", "Tocantins"],
        CL: ["Arica y Parinacota", "TarapacÃ¡", "Antofagasta", "Atacama", "Coquimbo", "ValparaÃ­so", "Metropolitana", "O'Higgins", "Maule", "BÃ­o-BÃ­o", "La AraucanÃ­a", "Los RÃ­os", "Los Lagos", "AysÃ©n", "Magallanes"],
        CR: ["San JosÃ©", "Alajuela", "Cartago", "Heredia", "Guanacaste", "Puntarenas", "LimÃ³n"],
        CU: ["Artemisa", "CamagÃ¼ey", "Ciego de Ãvila", "Cienfuegos", "Granma", "GuantÃ¡namo", "HolguÃ­n", "La Habana", "Las Tunas", "Matanzas", "Mayabeque", "Pinar del RÃ­o", "Sancti SpÃ­ritus", "Santiago de Cuba", "Villa Clara"],
        SV: ["AhuachapÃ¡n", "CabaÃ±as", "Chalatenango", "CuscatlÃ¡n", "La Libertad", "La Paz", "La UniÃ³n", "MorazÃ¡n", "San Miguel", "San Salvador", "San Vicente", "Santa Ana", "Sonsonate", "UsulutÃ¡n"],
        GT: ["Alta Verapaz", "Baja Verapaz", "Chimaltenango", "Chiquimula", "El Progreso", "Escuintla", "Departamento de Guatemala", "Huehuetenango", "Izabal", "Jalapa", "Jutiapa", "PetÃ©n", "Quetzaltenango", "QuichÃ©", "Retalhuleu", "SacatepÃ©quez", "San Marcos", "Santa Rosa", "SololÃ¡", "SuchitepÃ©quez", "TotonicapÃ¡n", "Zacapa"],
        HT: ["Artibonito", "Centro", "Grand'Anse", "Nippes", "Norte", "Noreste", "Noroeste", "Oeste", "Sureste", "Sur"],
        HN: ["AtlÃ¡ntida", "ColÃ³n", "Comayagua", "CopÃ¡n", "CortÃ©s", "Choluteca", "El ParaÃ­so", "Francisco MorazÃ¡n", "Gracias a Dios", "IntibucÃ¡", "Islas de la BahÃ­a", "La Paz", "Lempira", "Ocotepeque", "Olancho", "Santa BÃ¡rbara", "Valle", "Yoro"],
        NI: ["Boaco", "Carazo", "Chinandega", "Chontales", "Costa Caribe Norte", "Costa Caribe Sur", "EstelÃ­", "Granada", "Jinotega", "LeÃ³n", "Madriz", "Managua", "Masaya", "Matagalpa", "Nueva Segovia", "RÃ­o San Juan", "Rivas"],
        PY: ["Alto Paraguay", "Alto ParanÃ¡", "Amambay", "BoquerÃ³n", "CaaguazÃº", "CaazapÃ¡", "CanindeyÃº", "Central", "ConcepciÃ³n", "Cordillera", "Distrito Capital", "GuairÃ¡", "ItapÃºa", "Misiones", "Ã‘eembucÃº", "ParaguarÃ­", "Presidente Hayes", "San Pedro"],
        DO: ["Azua", "Bahoruco", "Barahona", "DajabÃ³n", "Duarte", "ElÃ­as PiÃ±a", "El Seibo", "Espaillat", "Hato Mayor", "Hermanas Mirabal", "Independencia", "La Altagracia", "La Romana", "La Vega", "MarÃ­a Trinidad SÃ¡nchez"],
        UY: ["Artigas", "Canelones", "Cerro Largo", "Colonia", "Durazno", "Flores", "Florida", "Lavalleja", "Maldonado", "Montevideo", "PaysandÃº", "RÃ­o Negro", "Rivera", "Rocha", "Salto", "San JosÃ©", "Soriano", "TacuarembÃ³", "Treinta y Tres"],
        VE: ["Amazonas", "AnzoÃ¡tegui", "Apure", "Aragua", "Barinas", "BolÃ­var", "Carabobo", "Cojedes", "Delta Amacuro", "Distrito Capital", "FalcÃ³n", "GuÃ¡rico", "Lara", "MÃ©rida", "Miranda", "Monagas", "Nueva Esparta", "Portuguesa", "Sucre", "TÃ¡chira", "Trujillo", "Vargas", "Yaracuy", "Zulia", "Dependencias Federales"]
    },
    STATES_ISO = {
        US: [{
            code: "AL",
            name: "Alabama"
        }, {
            code: "AK",
            name: "Alaska"
        }, {
            code: "AZ",
            name: "Arizona"
        }, {
            code: "AR",
            name: "Arkansas"
        }, {
            code: "CA",
            name: "California"
        }, {
            code: "CO",
            name: "Colorado"
        }, {
            code: "CT",
            name: "Connecticut"
        }, {
            code: "DE",
            name: "Delaware"
        }, {
            code: "DC",
            name: "District of Columbia"
        }, {
            code: "FL",
            name: "Florida"
        }, {
            code: "GA",
            name: "Georgia"
        }, {
            code: "HI",
            name: "Hawaii"
        }, {
            code: "ID",
            name: "Idaho"
        }, {
            code: "IL",
            name: "Illinois"
        }, {
            code: "IN",
            name: "Indiana"
        }, {
            code: "IA",
            name: "Iowa"
        }, {
            code: "KS",
            name: "Kansas"
        }, {
            code: "KY",
            name: "Kentucky"
        }, {
            code: "LA",
            name: "Louisiana"
        }, {
            code: "ME",
            name: "Maine"
        }, {
            code: "MD",
            name: "Maryland"
        }, {
            code: "MA",
            name: "Massachusetts"
        }, {
            code: "MI",
            name: "Michigan"
        }, {
            code: "MN",
            name: "Minnesota"
        }, {
            code: "MS",
            name: "Mississippi"
        }, {
            code: "MO",
            name: "Missouri"
        }, {
            code: "MT",
            name: "Montana"
        }, {
            code: "NE",
            name: "Nebraska"
        }, {
            code: "NV",
            name: "Nevada"
        }, {
            code: "NH",
            name: "New Hampshire"
        }, {
            code: "NJ",
            name: "New Jersey"
        }, {
            code: "NM",
            name: "New Mexico"
        }, {
            code: "NY",
            name: "New York"
        }, {
            code: "NC",
            name: "North Carolina"
        }, {
            code: "ND",
            name: "North Dakota"
        }, {
            code: "OH",
            name: "Ohio"
        }, {
            code: "OK",
            name: "Oklahoma"
        }, {
            code: "OR",
            name: "Oregon"
        }, {
            code: "PA",
            name: "Pennsylvania"
        }, {
            code: "RI",
            name: "Rhode Island"
        }, {
            code: "SC",
            name: "South Carolina"
        }, {
            code: "SD",
            name: "South Dakota"
        }, {
            code: "TN",
            name: "Tennessee"
        }, {
            code: "TX",
            name: "Texas"
        }, {
            code: "UT",
            name: "Utah"
        }, {
            code: "VA",
            name: "Virginia"
        }, {
            code: "VT",
            name: "Vermont"
        }, {
            code: "WA",
            name: "Washington"
        }, {
            code: "WI",
            name: "Wisconsin"
        }, {
            code: "WV",
            name: "West Virginia"
        }, {
            code: "WY",
            name: "Wyoming"
        }],
        CA: [{
            code: "AB",
            name: "Alberta"
        }, {
            code: "BC",
            name: "British Columbia"
        }, {
            code: "MB",
            name: "Manitoba"
        }, {
            code: "NB",
            name: "New Brunswick"
        }, {
            code: "NL",
            name: "Newfoundland"
        }, {
            code: "NT",
            name: "Northwest Territories"
        }, {
            code: "NS",
            name: "Nova Scotia"
        }, {
            code: "NU",
            name: "Nunavut"
        }, {
            code: "ON",
            name: "Ontario"
        }, {
            code: "PE",
            name: "Prince Edward Island"
        }, {
            code: "QC",
            name: "Quebec"
        }, {
            code: "SK",
            name: "Saskatchewan"
        }, {
            code: "YT",
            name: "Yukon"
        }]
    },
    dummy = function () { },
    isUndefined = function (e) {
        return void 0 === e
    },
    isFunction = function (e) {
        return "function" == typeof e
    };
if (!window.mergeUnique)
    function mergeUnique(e, t, i, n) {
        var a = !0 === n ? $.extend({}, e) : e;
        for (var s in t) (isUndefined(a[s]) || "" === a[s] && !s.endsWith("Class") || !0 === i && null === a[s]) && (a[s] = t[s]);
        return a
    }
var Log = Log || console || {};

function getThumbnailsFromBase(e, t, i) {
    return (!1 === i ? "" : content) + e + "thumbnails/" + t + "/"
}

function getFileFromBase(e, t) {
    return (!1 === t ? "" : content) + e + "uploads/"
}

function extend(e, t) {
    for (var i in t) t.hasOwnProperty(i) && isUndefined(e[i]) && (e[i] = t[i])
}
Log.error = Log.error || dummy, Log.log = Log.log || dummy, Log.info = Log.info || dummy, window.WebPlatform = window.WebPlatform || {};
var _kwd = "Si";
_kwd += "mvo", _kwd += "ly", window[_kwd] = window.WebPlatform, WebPlatform.onReady || (WebPlatform.documentReadyRequests = [], WebPlatform.onReady = function (e) {
    null === WebPlatform.documentReadyRequests ? e() : WebPlatform.documentReadyRequests.push(e)
}), extend(WebPlatform, {
    _htmlSpecialChars: {
        "&": "&amp;",
        "<": "&lt;",
        ">": "&gt;",
        '"': "&quot;",
        "'": "&#39;",
        "/": "&#x2F;"
    },
    removeDiacritics: function (e, t) {
        e += "";
        for (var i = [{
            base: "A",
            letters: /[\u0391\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g
        }, {
            base: "AA",
            letters: /[\uA732]/g
        }, {
            base: "AE",
            letters: /[\u00C6\u01FC\u01E2]/g
        }, {
            base: "AO",
            letters: /[\uA734]/g
        }, {
            base: "AU",
            letters: /[\uA736]/g
        }, {
            base: "AV",
            letters: /[\uA738\uA73A]/g
        }, {
            base: "AY",
            letters: /[\uA73C]/g
        }, {
            base: "B",
            letters: /[\u0392\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g
        }, {
            base: "C",
            letters: /[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g
        }, {
            base: "D",
            letters: /[\u0394\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g
        }, {
            base: "DZ",
            letters: /[\u01F1\u01C4]/g
        }, {
            base: "Dz",
            letters: /[\u01F2\u01C5]/g
        }, {
            base: "E",
            letters: /[\u0397\u0395\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g
        }, {
            base: "F",
            letters: /[\u03A6\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g
        }, {
            base: "G",
            letters: /[\u0393\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g
        }, {
            base: "H",
            letters: /[\u03A7\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g
        }, {
            base: "I",
            letters: /[\u0399\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g
        }, {
            base: "J",
            letters: /[\u004A\u24BF\uFF2A\u0134\u0248]/g
        }, {
            base: "K",
            letters: /[\u039A\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g
        }, {
            base: "L",
            letters: /[\u039B\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g
        }, {
            base: "LJ",
            letters: /[\u01C7]/g
        }, {
            base: "Lj",
            letters: /[\u01C8]/g
        }, {
            base: "M",
            letters: /[\u039C\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g
        }, {
            base: "N",
            letters: /[\u039D\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g
        }, {
            base: "NJ",
            letters: /[\u01CA]/g
        }, {
            base: "Nj",
            letters: /[\u01CB]/g
        }, {
            base: "O",
            letters: /[\u039F\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g
        }, {
            base: "OI",
            letters: /[\u01A2]/g
        }, {
            base: "OO",
            letters: /[\u03A9\uA74E]/g
        }, {
            base: "OU",
            letters: /[\u0222]/g
        }, {
            base: "P",
            letters: /[\u03A0\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g
        }, {
            base: "Q",
            letters: /[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g
        }, {
            base: "R",
            letters: /[\u03A1\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g
        }, {
            base: "S",
            letters: /[\u03A3\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g
        }, {
            base: "T",
            letters: /[\u03A4\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g
        }, {
            base: "TH",
            letters: /[\u0398]/g
        }, {
            base: "TZ",
            letters: /[\uA728]/g
        }, {
            base: "PS",
            letters: /[\u03A8]/g
        }, {
            base: "SH",
            letters: /[]/g
        }, {
            base: "SHT",
            letters: /[]/g
        }, {
            base: "U",
            letters: /[\u03A5\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g
        }, {
            base: "V",
            letters: /[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g
        }, {
            base: "VY",
            letters: /[\uA760]/g
        }, {
            base: "W",
            letters: /[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g
        }, {
            base: "X",
            letters: /[\u039E\u0058\u24CD\uFF38\u1E8A\u1E8C]/g
        }, {
            base: "Y",
            letters: /[Ñ\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g
        }, {
            base: "Z",
            letters: /[\u0396\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g
        }, {
            base: "a",
            letters: /[áƒ\u03B1\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g
        }, {
            base: "aa",
            letters: /[\uA733]/g
        }, {
            base: "ae",
            letters: /[\u00E6\u01FD\u01E3]/g
        }, {
            base: "ao",
            letters: /[\uA735]/g
        }, {
            base: "au",
            letters: /[\uA737]/g
        }, {
            base: "av",
            letters: /[\uA739\uA73B]/g
        }, {
            base: "ay",
            letters: /[\uA73D]/g
        }, {
            base: "b",
            letters: /[áƒ‘\u03B2\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g
        }, {
            base: "c",
            letters: /[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g
        }, {
            base: "d",
            letters: /[áƒ“\u03B4\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g
        }, {
            base: "dz",
            letters: /[áƒ«\u01F3\u01C6]/g
        }, {
            base: "e",
            letters: /[áƒ”\u03B7\u03B5\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g
        }, {
            base: "f",
            letters: /[\u03C6\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g
        }, {
            base: "g",
            letters: /[áƒ’\u03B3\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g
        }, {
            base: "h",
            letters: /[áƒ°\u03C7\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g
        }, {
            base: "hv",
            letters: /[\u0195]/g
        }, {
            base: "i",
            letters: /[áƒ˜Ñ\u03B9\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g
        }, {
            base: "j",
            letters: /[áƒ¯\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g
        }, {
            base: "k",
            letters: /[áƒ¥áƒ™\u03BA\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g
        }, {
            base: "l",
            letters: /[áƒš\u03BB\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g
        }, {
            base: "lj",
            letters: /[\u01C9]/g
        }, {
            base: "m",
            letters: /[áƒ›\u03BC\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g
        }, {
            base: "n",
            letters: /[áƒœ\u03BD\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g
        }, {
            base: "nj",
            letters: /[\u01CC]/g
        }, {
            base: "o",
            letters: /[áƒ\u03BF\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g
        }, {
            base: "oi",
            letters: /[\u01A3]/g
        }, {
            base: "ou",
            letters: /[\u0223]/g
        }, {
            base: "oo",
            letters: /[\u03C9\uA74F]/g
        }, {
            base: "p",
            letters: /[áƒ¤áƒž\u03C0\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g
        }, {
            base: "q",
            letters: /[áƒ§\u0071\u24E0\uFF51\u024B\uA757\uA759]/g
        }, {
            base: "r",
            letters: /[áƒ \u03C1\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g
        }, {
            base: "s",
            letters: /[áƒ¡\u03C2\u03C3\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g
        }, {
            base: "t",
            letters: /[áƒ—áƒ¢\u03C4\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g
        }, {
            base: "th",
            letters: /[\u03B8]/g
        }, {
            base: "tz",
            letters: /[\uA729]/g
        }, {
            base: "ts",
            letters: /[áƒ¬áƒª]/g
        }, {
            base: "kh",
            letters: /[áƒ®]/g
        }, {
            base: "sh",
            letters: /[áƒ¨]/g
        }, {
            base: "ch",
            letters: /[áƒ­áƒ©]/g
        }, {
            base: "sh",
            letters: /[\u03C8]/g
        }, {
            base: "sht",
            letters: /[]/g
        }, {
            base: "zh",
            letters: /[áƒŸ]/g
        }, {
            base: "gh",
            letters: /[áƒ¦]/g
        }, {
            base: "u",
            letters: /[áƒ£\u03C5\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g
        }, {
            base: "v",
            letters: /[áƒ•\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g
        }, {
            base: "vy",
            letters: /[\uA761]/g
        }, {
            base: "w",
            letters: /[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g
        }, {
            base: "x",
            letters: /[\u03BE\u0078\u24E7\uFF58\u1E8B\u1E8D]/g
        }, {
            base: "y",
            letters: /[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g
        }, {
            base: "z",
            letters: /[áƒ–\u03B6\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g
        }], n = 0; n < i.length; n++) e = e.replace(i[n].letters, i[n].base);
        return !0 === t && (e = e.replace(/\u0401/g, "YO").replace(/\u0419/g, "I").replace(/\u0426/g, "TS").replace(/\u0423/g, "U").replace(/\u041A/g, "K").replace(/\u0415/g, "E").replace(/\u041D/g, "N").replace(/\u0413/g, "G").replace(/\u0428/g, "SH").replace(/\u0429/g, "SCH").replace(/\u0417/g, "Z").replace(/\u0425/g, "H").replace(/\u042A/g, "").replace(/\u0451/g, "yo").replace(/\u0439/g, "i").replace(/\u0446/g, "ts").replace(/\u0443/g, "u").replace(/\u043A/g, "k").replace(/\u0435/g, "e").replace(/\u043D/g, "n").replace(/\u0433/g, "g").replace(/\u0448/g, "sh").replace(/\u0449/g, "sch").replace(/\u0437/g, "z").replace(/\u0445/g, "h").replace(/\u044A/g, "'").replace(/\u0424/g, "F").replace(/\u042B/g, "I").replace(/\u0412/g, "V").replace(/\u0410/g, "a").replace(/\u041F/g, "P").replace(/\u0420/g, "R").replace(/\u041E/g, "O").replace(/\u041B/g, "L").replace(/\u0414/g, "D").replace(/\u0416/g, "ZH").replace(/\u042D/g, "E").replace(/\u0444/g, "f").replace(/\u044B/g, "i").replace(/\u0432/g, "v").replace(/\u0430/g, "a").replace(/\u043F/g, "p").replace(/\u0440/g, "r").replace(/\u043E/g, "o").replace(/\u043B/g, "l").replace(/\u0434/g, "d").replace(/\u0436/g, "zh").replace(/\u044D/g, "e").replace(/\u042F/g, "Ya").replace(/\u0427/g, "CH").replace(/\u0421/g, "S").replace(/\u041C/g, "M").replace(/\u0418/g, "I").replace(/\u0422/g, "T").replace(/\u042C/g, "'").replace(/\u0411/g, "B").replace(/\u042E/g, "YU").replace(/\u044F/g, "ya").replace(/\u0447/g, "ch").replace(/\u0441/g, "s").replace(/\u043C/g, "m").replace(/\u0438/g, "i").replace(/\u0442/g, "t").replace(/\u044C/g, "'").replace(/\u0431/g, "b").replace(/\u044E/g, "yu")), e
    },
    preventDefault: function (e) {
        return e.stopPropagation(), e.preventDefault(), !1
    },
    escapeHtml: function (e) {
        return String(e).replace(/[&<>"']/g, (function (e) {
            return WebPlatform._htmlSpecialChars[e]
        }))
    },
    tick: function () {
        return (new Date).getTime() % 1e8
    },
    random: function (e) {
        return Math.floor(Math.random() * e)
    },
    equals: function (e, t) {
        if (e === t) return !0;
        for (var i in e)
            if (isUndefined(t[i]) || e[i] !== t[i]) return !1;
        for (var i in t)
            if (isUndefined(e[i]) || e[i] !== t[i]) return !1;
        return !0
    },
    numberEquals: function (e, t, i) {
        return isUndefined(i) && (i = 1e-4), Math.abs(e - t) <= i
    },
    addrToStr: function (e, t) {
        var i = "";
        return e && (i = WebPlatform.escapeHtml(e)), t.phone && (i += ("" === i ? "" : ", ") + WebPlatform.escapeHtml(t.phone)), i && (i += "<br />"), t.companyName && (i += WebPlatform.escapeHtml(t.companyName) + "<br />"), t.companyName && t.companyId && (i += WebPlatform.escapeHtml(t.companyId) + "<br />"), (t.city || t.address || t.state || t.zipCode) && (t.address && (i += WebPlatform.escapeHtml(t.address) + "<br />"), t.address2 && (i += WebPlatform.escapeHtml(t.address2) + "<br />"), t.city && (i += WebPlatform.escapeHtml(t.city) + "<br />"), t.state && (i += WebPlatform.escapeHtml(t.state)), t.zipCode && (i += (t.state ? ", " : "") + WebPlatform.escapeHtml(t.zipCode)), (t.state || t.zipCode) && (i += "<br />"), t.country && (i += (COUNTRIES ? COUNTRIES[COUNTRY_CODES.indexOf(t.country)] : t.country) || "")), i
    },
    ddmmyyStringToDate: function (e) {
        if ("" === (e = $.trim(e || ""))) return null;
        var t = e.split("/");
        return new Date(WebPlatform.parse(t[2], 2016), WebPlatform.parse(t[1], 1) - 1, WebPlatform.parse(t[0], 1))
    },
    yyyymmddStringToDate: function (e) {
        if ("" === (e = $.trim(e || ""))) return null;
        var t = e.split("-");
        return new Date(WebPlatform.parse(t[0], 2020), WebPlatform.parse(t[1], 1) - 1, WebPlatform.parse(t[2], 1))
    },
    mmddyyStringToDate: function (e) {
        if ("" === (e = $.trim(e || ""))) return null;
        var t = e.split("/");
        return new Date(WebPlatform.parse(t[2], 2016), WebPlatform.parse(t[0], 1) - 1, WebPlatform.parse(t[1], 1))
    },
    ukDateTimeStringToDate: function (e) {
        if ("" === (e = $.trim(e || ""))) return null;
        var t = e.split(" ");
        if (t.length < 2) return null;
        var i = t[0],
            n = t[1];
        if (!n) return null;
        var a = n.split(":");
        if (a.length < 2) return null;
        var s = WebPlatform.parse(a[0], 0),
            o = WebPlatform.parse(a[1], 0),
            r = a.length > 2 ? WebPlatform.parse(a[2], 0) : 0,
            l = WebPlatform.ddmmyyStringToDate(i);
        return null === l ? null : (l.setHours(s, o, r), l)
    },
    capitalizeFirstLetter: function (e) {
        return 0 === e.length ? e : e.charAt(0).toUpperCase() + e.slice(1)
    },
    usDateTimeStringToDate: function (e) {
        if ("" === (e = $.trim(e || ""))) return null;
        var t = e.split(" ");
        if (t.length < 3) return null;
        var i = t[0],
            n = t[1],
            a = "AM" === t[2].toUpperCase();
        if (!n) return null;
        var s = n.split(":");
        if (s.length < 2) return null;
        var o = WebPlatform.parse(s[0], 0),
            r = WebPlatform.parse(s[1], 0),
            l = s.length > 2 ? WebPlatform.parse(s[2], 0) : 0;
        !a && o < 12 && (o += 12), a && 12 === o && (o = 0);
        var c = WebPlatform.mmddyyStringToDate(i);
        return null === c ? null : (c.setHours(o, r, l), c)
    },
    ddmmyyyyDateToStrWithMonth: function (e, t, i) {
        var n = WebPlatform.ddmmyyStringToDate(e);
        return WebPlatform.dateToStrWithMonth(n, t, i)
    },
    yyyymmddDateToStrWithMonth: function (e, t, i) {
        var n = WebPlatform.yyyymmddStringToDate(e);
        return WebPlatform.dateToStrWithMonth(n, t, i)
    },
    dateToStrWithMonth: function (e, t, i, n, a) {
        var s = a || [WebPlatform.Phrases["label.january"], WebPlatform.Phrases["label.february"], WebPlatform.Phrases["label.march"], WebPlatform.Phrases["label.april"], WebPlatform.Phrases["label.may"], WebPlatform.Phrases["label.june"], WebPlatform.Phrases["label.july"], WebPlatform.Phrases["label.august"], WebPlatform.Phrases["label.september"], WebPlatform.Phrases["label.october"], WebPlatform.Phrases["label.november"], WebPlatform.Phrases["label.december"]],
            o = e.getDate(),
            r = e.getMonth(),
            l = e.getFullYear();
        return !1 === n ? s[r] + (!1 !== i ? ", " + l : "") : !0 === t ? o + " " + s[r] + (!1 !== i ? ", " + l : "") : s[r] + " " + o + (!1 !== i ? ", " + l : "")
    },
    isTouchSupported: function () {
        return !!("ontouchstart" in window || navigator.maxTouchPoints || navigator.msMaxTouchPoints)
    },
    intersect: function (e, t, i, n) {
        i = !0 === i, n = n || dummy;
        for (var a = [], s = 0; s < e.length; ++s)
            for (var o = e[s], r = 0; r < t.length; ++r)
                if (!0 === n(o, t[r])) {
                    a.push(i ? o : t[r]);
                    break
                } return a
    },
    hexToRgba: function (e, t) {
        if (t = t || 0, 0 !== e.indexOf("#")) return e;
        e = e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i, (function (e, t, i, n) {
            return t + t + i + i + n + n
        }));
        var i = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);
        return i ? "rgba(" + parseInt(i[1], 16) + ", " + parseInt(i[2], 16) + ", " + parseInt(i[3], 16) + ", " + t + ")" : e
    },
    transitionsSupported: function () {
        var e = (document.body || document.documentElement).style;
        return void 0 !== e.transition || void 0 !== e.WebkitTransition || void 0 !== e.MozTransition || void 0 !== e.MsTransition || void 0 !== e.OTransition
    }(),
    onTransitionEnd: function (e, t, i) {
        i = i || 300, WebPlatform.transitionsSupported ? e.on("webkitTransitionEnd.trans mozTransitionend.trans oTransitionEnd.trans msTransitionEnd.trans transitionend.trans", (function () {
            e.off(".trans"), t()
        })) : WebPlatform.delay(i, t)
    },
    onAnimationEnd: function (e, t, i) {
        WebPlatform.transitionsSupported ? e.on("webkitAnimationEnd.trans mozAnimationEnd.trans oAnimationEnd.trans msAnimationEnd.trans animationend.trans", (function () {
            e.off(".trans"), t()
        })) : WebPlatform.delay(i || 50, t)
    },
    clearDelay: function (e) {
        null !== e && clearTimeout(e)
    },
    getCookieName: function (e) {
        return "wplatform-" + e
    },
    delay: function (e, t) {
        return setTimeout(t, e)
    },
    onImagesLoaded: function (e, t) {
        e.waitForImages(t)
    },
    showClientError: function (e, t) {
        t = t || 3e3;
        var i = $('<div class="live-theme-message">' + e + "</div>");
        i.appendTo(".theme"), WebPlatform.delay(50, (function () {
            i.addClass("show-message"), WebPlatform.delay(t, (function () {
                WebPlatform.onTransitionEnd(i, (function () {
                    i.remove()
                }), 300), i.removeClass("show-message")
            }))
        }))
    },
    showClientMessage: function (e, t) {
        t = t || 3e3;
        var i = $('<div class="live-theme-message info-message">' + e + "</div>");
        i.appendTo(".theme"), WebPlatform.delay(50, (function () {
            i.addClass("show-message"), WebPlatform.delay(t, (function () {
                WebPlatform.onTransitionEnd(i, (function () {
                    i.remove()
                }), 300), i.removeClass("show-message")
            }))
        }))
    },
    parse: function (e, t, i) {
        return i = !0 === i, t = t || 0, e = parseInt(e, 10), isNaN(e) && (e = t), !i && e < 0 ? t : e
    },
    sharePage: function (e, t, i) {
        var n = i || window.location.href;
        n.indexOf("?") >= 0 ? n += "&_share=" + WebPlatform.tick() : n += "?_share=" + WebPlatform.tick();
        var a = encodeURIComponent(n),
            s = encodeURIComponent(document.title);
        "facebook" === e ? window.open("https://www.facebook.com/sharer/sharer.php?u=" + a, "_blank", "width=600, height=600") : "google-plus" === e ? window.open("https://plus.google.com/share?url=" + a, "_blank", "width=500, height=600") : "twitter" === e ? window.open("https://twitter.com/intent/tweet?url=" + a, "_blank", "width=500, height=300") : "linkedin" === e ? window.open("https://www.linkedin.com/shareArticle?mini=true&url=" + a + "&title=" + s, "_blank", "width=500, height=300") : "tumblr" === e ? window.open("http://www.tumblr.com/share/link?url=" + a, "_blank", "width=500, height=300") : "pinterest" === e ? window.open("https://www.pinterest.com/pin/create/button/?url=" + a, "_blank", "width=800, height=500") : "" !== $.trim(t) && (t = encodeURIComponent($.trim(t)), window.open(t))
    },
    makeClientWebsiteRequestWithFile: function (e, t) {
        if (t) {
            mergeUnique(e, {
                url: "",
                data: {},
                onOk: dummy,
                action: "Invalid Action!",
                method: "getJSON",
                onRequestError: function (e, t, i) {
                    Log.log(i), WebPlatform.showClientError(i)
                },
                _onNotOk: function (t) {
                    Log.error("Action: " + e.action), WebPlatform.showClientError(WebPlatform.Phrases[t.message] || t.message)
                },
                always: dummy
            }), e.onNotOk = e.onNotOk || e._onNotOk;
            var i = WebPlatform.getCSRFToken(),
                n = {
                    action: e.action,
                    _csrfToken: i,
                    r: Math.random()
                };
            mergeUnique(n, e.data);
            var a = new FormData;
            for (var s in $.isArray(t) || (t = [t]), t.forEach((function (e, t) {
                a.append("_file_" + (t > 0 ? t : ""), e), a.append("_file_name_" + (t > 0 ? t : ""), e.name || "")
            })), a.append("_has_file_", !0), a.append("_file_number", t.length), n) {
                var o = n[s];
                $.isArray(o) && (o = JSON.stringify(o)), a.append(s, o)
            }
            $.ajax({
                url: "/clientRequestHandler/" + e.url,
                headers: {
                    "X-S-CSRF-TOKEN": i
                },
                type: "POST",
                data: a,
                cache: !1,
                contentType: !1,
                processData: !1
            }, "json").done((function (t) {
                t.ok ? e.onOk(t) : (isUndefined(t.ok) && (Log.error("Response doesn't include status infurmation! {ok: true}"), Log.error(t)), e.onNotOk(t))
            })).fail(e.onRequestError).always(e.always)
        } else WebPlatform.makeClientWebsiteRequest(e)
    },
    makeClientWebsiteRequest: function (e) {
        mergeUnique(e, {
            url: "",
            data: {},
            onOk: dummy,
            action: "Invalid Action!",
            method: "getJSON",
            onRequestError: function (e, t, i) {
                Log.log(i), WebPlatform.showClientError(i)
            },
            _onNotOk: function (t) {
                Log.error("Action: " + e.action), WebPlatform.showClientError(WebPlatform.Phrases[t.message] || t.message)
            },
            always: dummy
        }), e.onNotOk = e.onNotOk || e._onNotOk;
        var t = WebPlatform.getCSRFToken(),
            i = {
                action: e.action,
                _csrfToken: t,
                r: Math.random()
            };
        mergeUnique(i, e.data);
        "getJSON" === e.method ? $.getJSON : "post" === e.method ? $.post : $.get;
        var n = {
            url: "/clientRequestHandler/" + e.url,
            data: i,
            headers: {
                "X-S-CSRF-TOKEN": t
            }
        };
        "getJSON" === e.method && (n.dataType = "json"), "post" === e.method.toLowerCase() && (n.type = "POST"), $.ajax(n).done((function (t) {
            t.ok ? e.onOk(t) : (isUndefined(t.ok) && (Log.error("Response doesn't include status infurmation! {ok: true}"), Log.error(t)), e.onNotOk(t))
        })).fail(e.onRequestError).always(e.always)
    },
    format: function () {
        var e = arguments;
        if (e.length % 2 != 1) throw "Invalid number of arguments! Usage: format(formatString, key, value, key, value...)";
        for (var t = e[0], i = 1; i < e.length; i += 2) {
            var n = new RegExp("%" + e[i] + "%", "g");
            t = t.replace(n, e[i + 1])
        }
        return t
    },
    escapeFormat: function () {
        var e = arguments;
        if (e.length % 2 != 1) throw "Invalid number of arguments! Usage: format(formatString, key, value, key, value...)";
        for (var t = e[0], i = 1; i < e.length; i += 2) {
            var n = new RegExp("%" + e[i] + "%", "g");
            t = t.replace(n, WebPlatform.escapeHtml(e[i + 1]))
        }
        return t
    },
    isMobile: function () {
        return $window.width() <= 1024
    },
    removeLightbox: function (e) {
        isUndefined(window.TmdpLightbox) || TmdpLightbox.removeLightbox(e)
    },
    refreshInlineGallery: function (e) {
        if ($.tosrus) {
            e.removeClass("none");
            var t = {
                autoplay: {
                    play: !1 !== e.data("autoplay"),
                    pauseOnHover: !0 === e.data("pauseonhover"),
                    timeout: e.data("timeout") || 4e3
                },
                slides: {
                    scale: e.data("scale") || "fill"
                },
                buttons: {
                    prev: !1 !== e.data("arrows"),
                    next: !1 !== e.data("arrows")
                },
                pagination: {
                    add: !0 === e.data("pagination")
                }
            },
                i = window.innerWidth < 768 ? 1 : WebPlatform.parse(e.data("items"), 1),
                n = e.data("width");
            i && (t.slides.visible = i);
            var a = e.data("itemsPerSlide");
            a && (t.slides.slide = a), n && (t.slides.width = n), e.addClass("with-gallery").tosrus(t)
        }
    },
    refreshLightboxes: function (e, t) {
        isUndefined(window.TmdpLightbox) || TmdpLightbox.refreshLightboxes(e), !0 !== t && $.tosrus && $(".inline-gallery:not(.with-gallery)").each((function () {
            WebPlatform.refreshInlineGallery($(this))
        }))
    },
    _accumulatedRequests: [],
    addAccumulatedRequest: function (e) {
        WebPlatform._accumulatedRequests.push({
            action: e.action || "",
            params: e.params || {},
            onOk: e.onOk || dummy
        })
    },
    processAccumulatedRequests: function () {
        if (WebPlatform._accumulatedRequests.length > 0) {
            var e = WebPlatform._accumulatedRequests,
                t = [];
            WebPlatform._accumulatedRequests = [];
            for (var i = 0; i < e.length; ++i) t.push({
                action: e[i].action,
                params: e[i].params
            });
            WebPlatform.makeClientWebsiteRequest({
                action: "accumulatedRequests",
                method: "post",
                data: {
                    requests: JSON.stringify(t)
                },
                onOk: function (i) {
                    for (var n = i.data, a = 0; a < e.length; ++a) {
                        var s = n[e[a].action];
                        if (s) try {
                            (e[a].onOk || dummy)(s)
                        } catch (e) {
                            Log.error(e)
                        }
                    }
                    e = null, t = null
                }
            })
        }
    },
    parseSimpleShare: function (e, t, i, n) {
        var a = "",
            s = !0 === i ? e > 0 : 1 == (1 & e),
            o = 2,
            r = 8,
            l = 16;
        if (n = n || function (e) {
            return '<i class="fa fa-' + e + '"></i>'
        }, i && (o = 1, 2, r = 4, l = 8), t = (t || "").toString(), s) {
            a += '<div class="sharer">', t.indexOf("?") >= 0 ? t += "&_share=" + WebPlatform.tick() : t += "?_share=" + WebPlatform.tick();
            var c = encodeURIComponent(t);
            (e & o) === o && (a += '<a href="javascript: void(0)" class="fb-icon" onclick="window.open(\'https://www.facebook.com/sharer/sharer.php?u=' + c + "', '_blank', 'width=600, height=600');\">" + n("facebook") + "</a>"), (e & r) === r && (a += '<a href="javascript: void(0)" class="tw-icon" onclick="window.open(\'https://twitter.com/intent/tweet?url=' + c + "', '_blank', 'width=500, height=300');\">" + n("twitter") + "</a>"), (e & l) === l && (a += '<a href="javascript: void(0)" class="ln-icon" onclick="window.open(\'https://www.linkedin.com/shareArticle?mini=true&url=' + c + "', '_blank', 'width=500, height=300');\">" + n("linkedin") + "</a>"), a += "</div>"
        }
        return a
    },
    URL_PARAM_INT: "\\d+",
    URL_PARAM_ANY: "[^/]+",
    URL_PARAM_ANY_WITH_EMPTY: "[^/]*",
    getUrlParameterMap: function (e, t) {
        var i = (e = e || document.location.href).indexOf("?"),
            n = e.indexOf("#");
        if (n < 0 && (n = e.length), i < 0 || i >= e.length || n < i) return {};
        for (var a, s = e.substring(i + 1, n).split("+").join(" "), o = {}, r = /[?&]?([^=]+)=([^&]*)/g; a = r.exec(s);) {
            var l = a[1];
            !0 === t && (l = l.toLowerCase()), o[decodeURIComponent(l)] = decodeURIComponent(a[2])
        }
        return o
    },
    getUrlParameter: function (e, t, i) {
        var n = new RegExp("(/" + t + "/" + i + "$)|(/" + t + "/" + i + "/)", ""),
            a = e.match(n);
        return null === a || a.length < 1 || !a[0] ? "" : (a = a[0]).substring(a.indexOf("/", "/" === a[0] ? 1 : 0) + 1, a.endsWith("/") ? a.length - 1 : a.length)
    },
    clearUrlParameter: function (e, t, i) {
        var n = new RegExp("(/" + t + "/" + i + "$)|(/" + t + "/" + i + "/)", "");
        return e.replace(n, "/")
    },
    getUrlQueryParameter: function (e, t) {
        var i = e.indexOf("?");
        if (i < 0) return "";
        var n = e.indexOf("#");
        n < 0 && (n = e.length);
        for (var a = (e = e.substring(i + 1, n)).split("&"), s = 0; s < a.length; ++s) {
            var o = a[s].split("=");
            if (o[0] === t) return o.length > 0 ? o[1] : ""
        }
        return ""
    },
    tr: function (e, t) {
        return ((e || {})[locale] || {})[t] || t
    },
    cartesianProduct: function (e, t) {
        for (var i = [], n = e.length - 1, a = [], s = !1, o = e.length; o--;) a[o] = e[o].length;
        ! function o(r) {
            var l = e[r],
                c = a[r];
            if (r === n) {
                for (var d = 0; d < c; ++d)
                    if (i[r] = l[d], s = !1 === t.call(WebPlatform, i)) return
            } else
                for (d = 0; d < c; ++d)
                    if (i[r] = l[d], o(r + 1), s) return;
            i.pop()
        }(0)
    },
    getRandomString: function (e) {
        for (var t = "", i = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789", n = 0; n < e; ++n) t += i.charAt(Math.floor(Math.random() * i.length));
        return t
    },
    getCSRFToken: function () {
        var e = Cookies.get("_csrfToken") || null;
        if (null === e || e.length < 36) {
            var t = document.body.dataset.minor || (window.platformId || "") + "." + (window.websiteId || "") + "." + window.clientId;
            e = WebPlatform.getRandomString(6) + "-" + WebPlatform.getRandomString(6) + "-" + WebPlatform.getRandomString(6) + "-" + t;
            var i = new Date;
            i.setTime(i.getTime() + 18e5);
            var n = {
                expires: i,
                path: "/"
            };
            "https:" === window.location.protocol && (n.sameSite = "None", n.secure = !0), Cookies.set("_csrfToken", e, n)
        }
        return e
    },
    shuffle: function (e) {
        var t, i, n;
        for (n = e.length; n; n--) t = Math.floor(Math.random() * n), i = e[n - 1], e[n - 1] = e[t], e[t] = i
    },
    getVatRate: function (e) {
        switch (e) {
            case "BE":
            case "CZ":
            case "ES":
            case "LV":
            case "LT":
            case "NL":
                return 21;
            case "BG":
            case "EE":
            case "FR":
            case "AT":
            case "SK":
                return 20;
            case "DK":
            case "HR":
            case "SE":
            case "NO":
                return 25;
            case "DE":
            case "CY":
            case "RO":
                return 19;
            case "GR":
            case "FI":
            case "EL":
            case "GR":
                return 24;
            case "IE":
            case "PL":
            case "PT":
                return 23;
            case "IT":
            case "SI":
                return 22;
            case "LU":
                return 17;
            case "HU":
                return 27;
            case "MT":
                return 18;
            default:
                return 0
        }
    },
    currencyWithCodeToStr: function (e, t, i) {
        switch (t) {
            case "USD":
            case "AUD":
            case "HKD":
            case "MXN":
                return WebPlatform.currToStr(e, "$", !0, t, i);
            case "EUR":
                return WebPlatform.currToStr(e, "â‚¬", !0, t, i);
            case "BGN":
                return WebPlatform.currToStr(e, "Ð»Ð²", !1, t, i);
            case "BRL":
                return WebPlatform.currToStr(e, "R$", !0, t, i);
            case "CAD":
                return WebPlatform.currToStr(e, "C$", !0, t, i);
            case "CHF":
                return WebPlatform.currToStr(e, "CHF", !1, t, i);
            case "CZK":
                return WebPlatform.currToStr(e, "KÄ", !1, t, i);
            case "DKK":
            case "NOK":
            case "SEK":
                return WebPlatform.currToStr(e, "kr", !1, t, i);
            case "GBP":
                return WebPlatform.currToStr(e, "Â£", !0, t, i);
            case "HUF":
                return WebPlatform.currToStr(e, "Ft", !1, t, i);
            case "ILS":
                return WebPlatform.currToStr(e, "â‚ª", !1, t, i);
            case "INR":
                return WebPlatform.currToStr(e, "â‚¹", !0, t, i);
            case "JPY":
            case "CNY":
                return WebPlatform.currToStr(e, "Â¥", !0, t, i);
            case "MYR":
                return WebPlatform.currToStr(e, "RM", !1, t, i);
            case "NZD":
                return WebPlatform.currToStr(e, "NZ$", !0, t, i);
            case "PHP":
                return WebPlatform.currToStr(e, "â‚±", !0, t, i);
            case "PLN":
                return WebPlatform.currToStr(e, "zÅ‚", !1, t, i);
            case "RUB":
                return WebPlatform.currToStr(e, "RUB", !1, t, i);
            case "SGD":
                return WebPlatform.currToStr(e, "S$", !0, t, i);
            case "THB":
                return WebPlatform.currToStr(e, "à¸¿", !0, t, i);
            case "TWD":
                return WebPlatform.currToStr(e, "NT$", !0, t, i);
            case "ZAR":
                return WebPlatform.currToStr(e, "R", !0, t, i);
            default:
                return WebPlatform.currToStr(e, t, !1, t, i)
        }
    },
    hasCents: function (e) {
        if (null === e) return !0;
        switch (e) {
            case "JPY":
            case "CNY":
            case "BIF":
            case "CLP":
            case "DJF":
            case "GNF":
            case "ISK":
            case "KMF":
            case "KRW":
            case "PYG":
            case "RWF":
            case "UGX":
            case "UYI":
            case "VND":
            case "VUV":
            case "XAF":
            case "XOF":
            case "XPF":
            case "COP":
            case "HUF":
                return !1
        }
        return !0
    },
    getStripeLocale: function (e) {
        var t = e || window.locale || "auto";
        switch (t) {
            case "pt_BR":
                return "pt-BR";
            case "pt_PT":
                return "pt";
            case "ar":
            case "bg":
            case "cs":
            case "da":
            case "de":
            case "el":
            case "et":
            case "en":
            case "es":
            case "fi":
            case "fr":
            case "he":
            case "id":
            case "it":
            case "ja":
            case "lt":
            case "lv":
            case "ms":
            case "nb":
            case "nl":
            case "pl":
            case "pt-BR":
            case "pt":
            case "ru":
            case "sk":
            case "sl":
            case "sv":
            case "zh":
                return t
        }
        return "auto"
    },
    addThousandsSeparator: function (e) {
        return (e + "").replace(/\B(?=(\d{3})+(?!\d))/g, ",")
    },
    currToStr: function (e, t, i, n, a) {
        i = !0 === i;
        var s = e < 0;
        s && (e = -e);
        var o = e.toFixed ? e.toFixed(WebPlatform.hasCents(n) ? 2 : 0) : "" + e;
        return "" !== t && (o = WebPlatform.addThousandsSeparator(o)), t && a && (t = a(t)), (s ? "-" : "") + (i ? t + o : o + t)
    },
    _requestedResources: [],
    requestScripts: function (e, t) {
        if (t = t || dummy, 0 !== (e = e || []).length) {
            var i = document.getElementsByTagName("script")[0];
            e.forEach((function (e) {
                for (var t = !1, n = 0; n < WebPlatform._requestedResources.length; ++n)
                    if (WebPlatform._requestedResources[n] === e.script) {
                        t = !0;
                        break
                    } if (!t && !e.check()) {
                        WebPlatform._requestedResources.push(e.script);
                        var a = document.createElement("script");
                        if (a.type = "text/javascript", a.async = 1, a.src = e.script, i.parentNode.insertBefore(a, i), e.style) {
                            let t = document.createElement("link");
                            t.type = "text/css", t.rel = "stylesheet", t.href = e.style, i.parentNode.insertBefore(t, i)
                        }
                    }
            }));
            var n = function () {
                var i = 0;
                e.forEach((function (e) {
                    e.check() || ++i
                })), i > 0 ? WebPlatform.delay(50, n) : t()
            };
            n()
        } else t()
    },
    requestResource: function (e, t, i, n) {
        if (n = n || dummy, (i = i || (() => !0))()) return void n();
        let a = document.getElementsByTagName("script")[0];
        if (e) {
            if (!(WebPlatform._requestedResources.indexOf(e) > -1)) {
                WebPlatform._requestedResources.push(e);
                let t = document.createElement("script");
                t.type = "text/javascript", t.async = 1, t.src = e, a.parentNode.insertBefore(t, a)
            }
        }
        if (t) {
            let e = document.createElement("link");
            e.type = "text/css", e.rel = "stylesheet", e.href = t, a.parentNode.insertBefore(e, a)
        }
        let s = () => {
            i() ? n() : WebPlatform.delay(50, s)
        };
        WebPlatform.delay(50, s)
    },
    initFixedHeader: function (e, t) {
        var i = e.find(".fixed-header-wrapper");
        if (0 !== i.length && !i.hasClass("initiated") && !i.hasClass("header-hidden")) {
            i.addClass("initiated");
            var n = e.find(".main-header-wrapper");
            if (!0 === t) {
                var a = n.offset();
                i.css({
                    top: a.top + "px"
                })
            }
            e.scroll($.throttle(150, (function () {
                var t = e.scrollTop();
                n.height() <= t ? i.addClass("visible") : i.removeClass("visible")
            }))).scroll()
        }
    },
    getObjectFromLocalStorage: function (e, t) {
        try {
            var i = window.localStorage.getItem(e);
            return i ? JSON.parse(i + "") : t
        } catch (e) {
            return Log.error(e), t
        }
    },
    setObjectToLocalStorage: function (e, t) {
        try {
            window.localStorage.setItem(e, JSON.stringify(t))
        } catch (e) {
            Log.error(e)
        }
    },
    removeFromLocalStorage: function (e) {
        try {
            window.localStorage.removeItem(e)
        } catch (e) {
            Log.error(e)
        }
    },
    initiateBraintree3DSecureIfEnabled: function (e, t, i) {
        window.braintree.threeDSecure.create({
            client: e,
            version: 2
        }, (function (n, a) {
            n ? "THREEDS_NOT_ENABLED" === n.code ? (Log.info("3DS not supported"), t(null)) : "THREEDS_NOT_ENABLED_FOR_V2" === n.code ? window.braintree.threeDSecure.create({
                client: e,
                version: 1
            }, (function (e, n) {
                e ? "THREEDS_NOT_ENABLED" === e.code ? (Log.info("3DS not supported"), t(null)) : i(e) : t(n)
            })) : i(n) : t(a)
        }))
    },
    getLocaleName: function (e) {
        switch (e) {
            case "en":
                return "en_US";
            case "bg":
                return "bg_BG";
            case "da":
            case "da_JK":
                return "da_DK";
            case "de":
                return "de_DE";
            case "el":
            case "gr":
                return "el_GR";
            case "es":
                return "es_ES";
            case "fr":
                return "fr_FR";
            case "it":
                return "it_IT";
            case "nb":
                return "nb_NO";
            case "nl_NL":
                return "nl_NL";
            case "pt_PT":
                return "pt_PT";
            case "pt_BR":
                return "pt_BR";
            case "ro":
                return "ro_RO";
            case "sv_SE":
                return "sv_SE";
            case "pl":
                return "pl_PL";
            case "zh":
            case "zh_JO":
                return "zh_CN";
            case "iw":
                return "he_IL";
            case "ar":
                return "ar_EG";
            case "hu":
                return "hu_HU";
            case "hr":
                return "hr_HR";
            case "th":
                return "th_TH";
            case "kr":
            case "ko":
                return "ko_KR";
            case "vn":
                return "vi_VN";
            case "ru":
                return "ru_RU";
            case "is":
                return "is_IS";
            case "jp":
                return "ja_JP";
            default:
                return e
        }
    },
    isPartiallyInView: function (e) {
        var t = e.getBoundingClientRect(),
            i = t.left,
            n = t.top,
            a = Math.max(document.documentElement.clientWidth, window.innerWidth || 0),
            s = Math.max(document.documentElement.clientHeight, window.innerHeight || 0),
            o = e.clientWidth,
            r = e.clientHeight;
        return n < s && n + r > 0 && i < a && i + o > 0
    },
    scrollIntoView: function (e) {
        WebPlatform.delay(50, (function () {
            e[0].scrollIntoView && !WebPlatform.isPartiallyInView(e[0]) && e[0].scrollIntoView({
                behavior: "smooth"
            })
        }))
    },
    extractYoutubeVideoId: function (e) {
        var t, i = (e = e.replace("://www.", "://")).toLowerCase().indexOf("://youtu.be");
        return i > -1 ? (t = e.substring(i + 12)).indexOf("?") > -1 && (t = t.substring(0, t.indexOf("?"))) : t = WebPlatform.getUrlQueryParameter(e, "v", WebPlatform.URL_PARAM_ANY_WITH_EMPTY), t
    },
    _sessionDetails: null,
    _pendingSDCallbacks: [],
    getSessionDetails: function (e) {
        WebPlatform._sessionDetails ? e(WebPlatform._sessionDetails) : (WebPlatform._pendingSDCallbacks.push(e), 1 === WebPlatform._pendingSDCallbacks.length && WebPlatform.makeClientWebsiteRequest({
            action: "getSessionDetails",
            onOk: function (e) {
                WebPlatform._sessionDetails = e.data, WebPlatform.ipCountryCode = WebPlatform._sessionDetails.ipCountryCode, WebPlatform.Members.current = WebPlatform._sessionDetails.member, WebPlatform.hash = WebPlatform._sessionDetails.websiteHash, WebPlatform._pendingSDCallbacks.forEach((e => e(WebPlatform._sessionDetails))), WebPlatform._pendingSDCallbacks = []
            }
        }))
    }
}), WebPlatform.Phrases = mergeUnique(WebPlatform.Phrases || {}, {
    "client.by": "by",
    "client.on": "on",
    "client.in": "in",
    "label.of": "of",
    "client.comment": "Comment",
    "client.comments": "Comments",
    "client.read_more": "Read more",
    "client.load_more": "Load more",
    "label.view": "View",
    "label.years": "Years",
    "label.months": "Months",
    "label.month": "month",
    "label.year": "year",
    "label.months_lower": "months",
    "label.years_lower": "years",
    "label.week_lower": "week",
    "label.weeks_lower": "weeks",
    "label.saving": "Saving",
    "label.days": "Days",
    "label.hours": "Hours",
    "label.seconds": "Seconds",
    "label.shipping_address": "Shipping Address",
    "label.billing_address": "Billing Address",
    "label.january": "January",
    "label.february": "February",
    "label.march": "March",
    "label.april": "April",
    "label.may": "May",
    "label.june": "June",
    "label.july": "July",
    "label.august": "August",
    "label.september": "September",
    "label.october": "October",
    "label.november": "November",
    "label.december": "December",
    "label.jan": "Jan",
    "label.feb": "Feb",
    "label.mar": "Mar",
    "label.apr": "Apr",
    "label.may_short": "May",
    "label.jun": "Jun",
    "label.jul": "July",
    "label.aug": "Aug",
    "label.sep": "Sep",
    "label.oct": "Oct",
    "label.nov": "Nov",
    "label.dec": "Dec",
    "label.add_to_cart": "Add To Cart",
    "label.buy_now": "Buy Now",
    "label.update": "Update",
    "label.change": "change",
    "label.select_product_variant": "Choose variation for each item in your order",
    "err.select_product_variants": "Select variant",
    "label.checkout_now": "Checkout Now",
    "label.cod": "Pay on delivery",
    "label.bank": "Bank Transfer",
    "label.yes": "YES",
    "label.no": "NO",
    "label.contact_booked_error": "You already booked a spot in this group event",
    "label.already_booked_time_error": "Selected time is not available, please select different time",
    "label.booking_notice_error": "Booking too close to current time, please reload the page",
    "label.slots_left": "slots left",
    "error.fill_required_fields": "Please fill all the required fields!"
}), WebPlatform.Widgets = {}, WebPlatform.defaultPagePagination = '<a class="none arrow-nav" rel="client-tab" title="" data-role="-1"> <i class="fa fa-angle-left fa-2x"></i></a><a class="none" rel="client-tab" title="" data-role="-2"></a><a class="none" rel="client-tab" title="" data-role="-1"></a><a rel="client-tab" title="" data-role="0"></a><a class="none" rel="client-tab" title="" data-role="+1"></a><a class="none" rel="client-tab" title="" data-role="+2"></a><a class="none arrow-nav" rel="client-tab" title="" data-role="+1"> <i class="fa fa-angle-right fa-2x"></i></a>', WebPlatform.defaultOnePagePagination = '<a rel="client-tab" title="" data-role="more">%more%</a>', WebPlatform.Widgets.shouldRender = function (e) {
    if (!e || !e.length) return !1;
    if (!window.ClientTools) return !0;
    if (e.hasClass("widget") || e.hasClass("widget-row") || (e = e.closest(".widget")), !e || !e.length) return !1;
    var t = e.closest(".grid-row"),
        i = $window.width();
    return i <= 768 ? i <= 480 ? !t.hasClass("phone-hidden") : !t.hasClass("tablet-hidden") : !e.hasClass("mobile-only") && !t.hasClass("mobile-only")
}, WebPlatform.Widgets.Blog = function (e) {
    var t = e.id,
        i = e.baseNavigationUrl,
        n = e.listType,
        a = e.paginationType,
        s = e.blogCategory,
        o = e.itemsCount,
        r = !!e.disqusEnabled,
        l = e.author,
        c = e.ids || null,
        d = e.tag,
        p = e.socialNetworksSum || 0,
        u = 1,
        h = 0,
        f = "masonry" === n,
        m = e.root || $("#blog-widget-" + t),
        g = e.pagination || m.find(".pagination"),
        v = "carousel" === n;
    if (!WebPlatform.Widgets.shouldRender(m)) return {
        loadPage: dummy,
        destroy: dummy
    };

    function b(b, y) {
        WebPlatform.addAccumulatedRequest({
            action: "getPostsInfo_" + t,
            params: {
                items: o,
                category: s,
                page: b,
                tag: d,
                author: l,
                ids: c || null
            },
            onNotOk: e.onFailed || dummy,
            onOk: function (t) {
                WebPlatform.Phrases["client.by"], WebPlatform.Phrases["client.on"];
                var s = WebPlatform.Phrases["client.in"],
                    l = WebPlatform.Phrases["client.comment"],
                    c = WebPlatform.Phrases["client.comments"],
                    d = WebPlatform.Phrases["client.read_more"],
                    b = v ? '<div %style% data-slide="" data-index="%idx%">' : "";
                b += '<article class="blog-post-article %blogPostDelayed%" data-animation="blogPostAnimation" data-delay="0.05">   <a href="/' + e.blogUrl + '/%url%" title="%altText%" class="post-featured post-featured-%featuredtype%">%featured%</a>   <div class="post-summary">      <header>        <div class="post-header">        <h2 class="post-title"><a href="/' + e.blogUrl + '/%url%" class="highlightColor">%title%</a></h2>         <span class="post-meta">           <span class="post-author"><a href="/' + e.blogUrl + '/author/%author%">%author%</a></span>          <span class="post-category">%categories%</span>           <span class="post-time"><p>%created%</p></span>  ' + (r ? "" : '<span class="post-comments">%comments%</span>  ') + '       </span>        </div>  %share%     </header>      <span class="post-description">%description%</span>      <div class="read-more-wrapper"><a href="/' + e.blogUrl + '/%url%" class="read-more primaryColor-bg">' + d + "</a></div>    </div>  </article>", v && (b += "</div>");
                var y = t.posts;
                if (h = Math.floor(t.allPostsCount / o) + (t.allPostsCount % o > 0 ? 1 : 0), u = t.page, 0 !== y.length) {
                    var w = m.find(".posts-list-wrapper");
                    "pagination" !== a || f || w.find("article").remove(), v && (w.addClass("inline-gallery"), w.find(".blog-post-sizer").remove());
                    for (var _ = $([]), T = 0; T < y.length; ++T) {
                        var C = y[T],
                            k = "",
                            E = "",
                            x = "",
                            S = WebPlatform.escapeHtml(C.title);
                        if (v) {
                            x = 'style="width: 100%; margin: 0 auto; float: none;"'
                        }
                        if (0 === C.featured.type) {
                            var M = C.featured.data,
                                P = C.featured.dataBase;
                            k += "large" === n || v ? "<span style='background-image: url(\"" + getFileFromBase(P) + M + "?format=webp\");'></span>" : "medium" === n ? "<span style='background-image: url(\"" + getThumbnailsFromBase(P, "640x480") + M + "?format=webp\");'></span>" : '<img src="' + getFileFromBase(P) + M + '?format=webp" alt="' + S + '" />'
                        } else if (1 === C.featured.type) {
                            k += '<div class="inline-gallery">';
                            for (var I = 0; I < C.featured.data.length; ++I) {
                                k += '<img src="' + ("large" === n || v ? getFileFromBase(C.featured.dataBase[I]) + C.featured.data[I] : getThumbnailsFromBase(C.featured.dataBase[I], "640x480") + C.featured.data[I]) + '?format=webp" alt="" />'
                            }
                            k += "</div>"
                        } else 2 === C.featured.type ? k += '<div class="fluid-video-wrapper">' + C.featured.data + "</div>" : 3 === C.featured.type ? k += '<h1 class="primaryColor-bg2">' + C.featured.data + "</h1>" : C.featured.type;
                        for (I = 0; I < C.categories.length; ++I) E += 0 === I ? "<span>" + s + "&nbsp;</span>" : " / ", E += '<a href="/' + e.blogUrl + "/category/" + C.categories[I].second + '" title="">' + C.categories[I].first + "</a>";
                        var O = window.location.protocol || "https:",
                            A = C.created || " ";
                        A = A.split(" ")[0];
                        var L = WebPlatform.parseSimpleShare(p, O + "//" + location.hostname + "/" + e.blogUrl + "/" + C.url),
                            D = WebPlatform.format(b, "featured", k, "featuredtype", C.featured.type, "comments", C.approvedCommentsCount + " " + (1 !== C.approvedCommentsCount ? c : l), "blogPostDelayed", f || v ? "" : "anim-delayed-item", "share", L, "categories", E, "url", C.url, "title", C.title, "altText", S, "created", A, "description", C.description, "author", C.author, "idx", T, "style", x);
                        D = $(D), w.append(D), f && (_ = _.add(D))
                    }
                    if (f && y.length > 0) "pagination" === a && w.shuffle("remove", m.find(".shuffle-item")), w.data("shuffle").appended(_, !0, !0), WebPlatform.onImagesLoaded(w, (function () {
                        w.shuffle("update")
                    }));
                    else if ("pagination" === a) {
                        var N = $window.scrollTop(),
                            R = m.offset().top;
                        R < N && $window.scrollTop(R)
                    } ! function () {
                        if ("none" === a || 0 === h) g.hide().find("a").removeAttr("href");
                        else if ("pagination" === a) {
                            var t = g.find('[data-role="0"]'),
                                n = g.find('[data-role="-1"]'),
                                s = g.find('[data-role="-2"]'),
                                o = g.find('[data-role="+1"]'),
                                r = g.find('[data-role="+2"]');
                            t.text(u), e.baseNavigationUrl && (n.attr("href", i + "page/" + (u - 1)), s.attr("href", i + "page/" + (u - 2)), o.attr("href", i + "page/" + (u + 1)), r.attr("href", i + "page/" + (u + 2))), n[u < 2 ? "addClass" : "removeClass"]("none").not(".arrow-nav").text(u - 1), s.text(u - 2)[u < 3 ? "addClass" : "removeClass"]("none"), o[u < h ? "removeClass" : "addClass"]("none").not(".arrow-nav").text(u + 1), r.text(u + 2)[u + 1 < h ? "removeClass" : "addClass"]("none"), g.show(), g.find("a.none").removeAttr("href")
                        } else u === h ? g.hide().find("a").removeAttr("href") : (e.baseNavigationUrl && g.find('[data-role="more"]').attr("href", i + "page/" + (u + 1)), g.show())
                    }(), $window.scroll(), WebPlatform.refreshLightboxes(), (e.onLoaded || dummy)()
                }
            }
        }), y && WebPlatform.processAccumulatedRequests()
    }
    return v && (a = "none"), e.baseNavigationUrl || g.on("click", "[data-role]", (function (e) {
        var t, i = $(e.currentTarget).data("role");
        if ("more" === i) t = 1;
        else {
            if ("0" === i) return;
            t = parseInt(i)
        }
        if (!(u + t > h || u + t < 0)) return b(u + t, !0), e.stopPropagation(), !1
    })), "pagination" === a ? g.append(WebPlatform.defaultPagePagination) : g.append(WebPlatform.format(WebPlatform.defaultOnePagePagination, "more", WebPlatform.Phrases["client.load_more"])), f && m.find(".posts-list-wrapper").shuffle({
        itemSelector: ".blog-post-article",
        sizer: m.find(".blog-post-sizer")
    }), e.page && b(e.page, !1), {
        loadPage: function (e) {
            b(e, !0)
        },
        destroy: function () {
            if (f) {
                var e = m.find(".posts-list-wrapper");
                e.shuffle && e.shuffle("destroy")
            }
        }
    }
}, WebPlatform.Widgets.SimpleBlog = function (e) {
    var t = e.id,
        i = e.blogUrl,
        n = e.blogType,
        a = e.blogCategory,
        s = e.itemsCount,
        o = "posts";
    o = "posts" === n ? "" === a ? "getRecentPosts" : "getRecentPostsByCategory" : "categories" === n ? "getCategories" : "getTags", WebPlatform.addAccumulatedRequest({
        action: o,
        params: {
            items: s,
            category: a
        },
        onNotOk: e.onFailed || dummy,
        onOk: function (o) {
            for (var r = (e.widget ? e.widget : $("#blog-widget-" + t)).find(".blog-items-wrapper").removeClass("visible"), l = "", c = 0; c < Math.min(o.length, s); ++c) {
                var d = o[c];
                if ("posts" === n) {
                    if (d.category === a) {
                        var p = d.created || " ";
                        p = p.split(" ")[0], l += '<div class="blog-widget-item recent-post"><a href="/' + i + "/" + d.url + '" class="highlightColor">' + d.title + "</a><span>" + p + "</span></div>"
                    }
                } else "categories" === n ? l += '<div class="blog-widget-item blog-categories"><a href="/' + i + "/category/" + d.url + '" class="highlightColor">' + d.category + "</a></div>" : "tags" === n && (l += '<a href="/' + i + "/tag/" + d.url + '" class="highlightBg">' + d.tag + "</a>")
            }
            r.append(l).addClass("visible"), (e.onLoaded || dummy)()
        }
    })
}, WebPlatform.Widgets.Store = function (e) {
    if (mergeUnique(e, {
        maxItemsCount: 10,
        exclude: -1,
        root: null,
        labelFrom: "From&nbsp;",
        labelSale: "Sale",
        labelQuickView: "Quick View",
        labelSoldOut: "Sold Out",
        baseUrl: "",
        itemsPerRow: 4,
        itemGap: 1,
        showProductName: !0,
        showProductPrice: !0,
        hasProductQuickView: !1,
        autoChangeSlides: !1,
        autoChangeSlidesTimeout: 4e3,
        layout: "grid",
        fakeGallery: !1,
        productLayout: "style-1",
        productAlign: "left",
        quickViewBtnStyle: "quick-view-1",
        itemsType: "products",
        storeItems: [],
        discountBadgeType: "none",
        currency: WebPlatform.Store.currency,
        currencySymbol: WebPlatform.Store.currencySymbol,
        currencySymbolAtLeft: WebPlatform.Store.currencySymbolAtLeft,
        imageSize: 80,
        imageSizeType: "",
        storeProcess: "buy",
        imageBorderRadius: 10,
        includeAddToCartButton: !1,
        sort: "",
        imageBgColor: "transparent",
        boxBg: "transparent",
        boxPadding: 0,
        boxRadius: 0,
        showingInventory: !0,
        leftInStockThreshold: 10,
        textClass: "",
        priceTextClass: "",
        shadow: ""
    }), null === e.root && (e.root = $([])), WebPlatform.Widgets.shouldRender(e.root)) {
        switch (e.productLayout) {
            case "text-center":
                e.productLayout = "style-1", e.productAlign = "center";
                break;
            case "text-left":
                e.productLayout = "style-1", e.productAlign = "left";
                break;
            case "text-over":
                e.productLayout = "product-list-style-text-over", e.productAlign = "center";
                break;
            case "text-boxed":
                e.productLayout = "style-2", e.productAlign = "center"
        }
        var t = "cart" === e.storeProcess ? WebPlatform.Phrases["label.add_to_cart"] : WebPlatform.Phrases["label.buy_now"];
        e.fakeGallery = e.fakeGallery && "grid" !== e.layout, e.fakeGallery ? e.itemWidth = (100 - e.itemsPerRow * e.itemGap) / e.itemsPerRow : e.itemWidth = (100 - (e.itemsPerRow - 1) * e.itemGap) / e.itemsPerRow, WebPlatform.addAccumulatedRequest({
            action: "latest" === e.itemsType ? "getLatestStoreItems" : "products" === e.itemsType ? "getStoreItems" : "getStoreItemsByCategory",
            params: {
                itemIds: e.storeItems,
                items: "latest" === e.itemsType ? e.maxItemsCount : 0,
                sort: e.sort
            },
            onOk: function (i) {
                for (var n = "grid" === e.layout || e.fakeGallery, a = [], s = "products" !== e.itemsType, o = "latest" === e.itemsType, r = 0; r < i.length; ++r) {
                    var l = i[r];
                    if (e.maxItemsCount > 0 && a.length >= e.maxItemsCount) break;
                    if (l.id !== e.exclude)
                        if (o) a.push(l);
                        else if (s) {
                            for (var c = 0; c < l.categories.length; ++c)
                                if (e.storeItems.indexOf(l.categories[c].id) > -1) {
                                    a.push(l);
                                    break
                                }
                        } else e.storeItems.indexOf(l.id) > -1 && a.push(l)
                }
                var d = a.length;
                if (e.fakeGallery && (d = Math.min(e.itemsPerRow, a.length)), n) var p = '<div class="products-list">';
                else p = '<div class="products-list inline-gallery" data-autoplay="true" data-pauseonhover="true" data-arrows="true" data-items="' + e.itemsPerRow + '" data-timeout="' + (e.autoChangeSlides ? e.autoChangeSlidesTimeout : "86400000") + '" data-pagination="false">';
                var u = e.root.closest(".grid-row").hasClass("grid-row-fullwidth") ? 5 : 4;
                for (r = 0; r < d; ++r) {
                    l = a[r];
                    var h = r < e.itemsPerRow ? 0 : e.itemGap + "%",
                        f = 0,
                        m = (r + 1) % e.itemsPerRow == 0 ? 0 : e.itemGap + "%";
                    e.fakeGallery && (h = 0, f = m = e.itemGap / 2 + "%");
                    var g = "background: " + e.boxBg + "; padding: " + e.boxPadding + "px " + e.boxPadding + "px; border-radius: " + e.boxRadius + "px; ";
                    e.shadow && (g += e.shadow + ";"), g += n ? "width: " + e.itemWidth + "%; margin: " + h + " " + m + " 0 " + f + "; " : "width: " + e.itemWidth * e.itemsPerRow + "%; margin: 0 auto; float: none;", p += '<div class="product-item ' + e.imageSizeType + " " + (e.hasProductQuickView ? " with-quick-view " : "") + '" data-slide="" data-idx="' + r + '" data-id="' + l.id + '" style="' + g + '">';
                    var v = resources + "/images/product-avatar.svg";
                    null !== l.images && l.images.length > 0 && (v = e.itemsPerRow < u ? getFileFromBase(l.images[0].base) + l.images[0].name + "?format=webp" : getThumbnailsFromBase(l.images[0].base, "640x480") + l.images[0].name + "?format=webp");
                    var b = "border-radius: " + e.imageBorderRadius + "px;",
                        y = "";
                    "" !== e.imageSizeType && (y += "padding-bottom: " + e.imageSize + "%;", "cover-image" === e.imageSizeType && (y += "background: url('" + v + "') no-repeat center center;", y += "background-size: cover;", y += b)), p += '<div class="product-main-photo has-badge" style="' + (y += "background-color: " + e.imageBgColor + ";") + '"><div class="product-photo-inner-wrapper">         <div class="quick-buttons-wrapper flex align-center justify-center">           <div class="quick-buttons-wrapper-inner flex align-center justify-center">             <a class="quick-store-button flex align-center" data-role="addToCart" data-process="' + e.storeProcess + '"><svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><g><rect fill="none" height="24" width="24"/><path d="M18,6h-2c0-2.21-1.79-4-4-4S8,3.79,8,6H6C4.9,6,4,6.9,4,8v12c0,1.1,0.9,2,2,2h12c1.1,0,2-0.9,2-2V8C20,6.9,19.1,6,18,6z M12,4c1.1,0,2,0.9,2,2h-4C10,4.9,10.9,4,12,4z M18,20H6V8h2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V8h4v2c0,0.55,0.45,1,1,1s1-0.45,1-1V8 h2V20z"/></g></svg></a>             <a class="quick-store-button flex align-center" data-role="viewProduct"><svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px" viewBox="0 0 24 24" width="18px" fill="#000000"><rect fill="none" height="24" width="24"/><polygon points="21,11 21,3 13,3 16.29,6.29 6.29,16.29 3,13 3,21 11,21 7.71,17.71 17.71,7.71"/></svg></a>           </div>         </div>';
                    var w = ' href="' + e.baseUrl + l.url + '" ';
                    WebPlatform.Funnels.isInFunnel() && WebPlatform.Funnels.hideProductLinks && (w = ""), p += "<a" + w + ">", "none" !== e.discountBadgeType && l.onSale && l.price > 0 && (p += '<div class="product-badge">', "text" === e.discountBadgeType ? p += e.labelSale : "percent" === e.discountBadgeType ? p += -l.roundedDiscountInPercent + "%" : p += WebPlatform.currToStr(-l.roundedDiscount, e.currencySymbol, e.currencySymbolAtLeft, e.currency), p += "</div>");
                    var _ = "cover-image" !== e.imageSizeType ? b : "";
                    if (p += '<img src="' + v + '" alt="' + WebPlatform.escapeHtml(l.name) + '" style="' + _ + '" />', p += "</a></div>", p += "</div>", e.showProductName || e.showProductPrice) {
                        if (p += '<div class="product-item-description"><div><div class="title-price-wrapper-1">', e.showProductName && (p += '<h3 class="' + e.textClass + '"><a' + w + ' class="highlightColor">' + WebPlatform.escapeHtml(l.title) + "</a></h3>"), e.showProductPrice && (p += '<div class="col20 f-left product-stars flex align-center">                   <div class="product-stars-inner">                     <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="black" width="18px" height="18px" class="full-star"><path d="M0 0h24v24H0z" fill="none"></path><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path></svg>                     <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="black" width="18px" height="18px" class="full-star"><path d="M0 0h24v24H0z" fill="none"></path><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path></svg>                     <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="black" width="18px" height="18px" class="full-star"><path d="M0 0h24v24H0z" fill="none"></path><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path></svg>                     <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="black" width="18px" height="18px" class="full-star"><path d="M0 0h24v24H0z" fill="none"></path><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path></svg>                     <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="black" width="18px" height="18px"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M12 7.13l.97 2.29.47 1.11 1.2.1 2.47.21-1.88 1.63-.91.79.27 1.18.56 2.41-2.12-1.28-1.03-.64-1.03.62-2.12 1.28.56-2.41.27-1.18-.91-.79-1.88-1.63 2.47-.21 1.2-.1.47-1.11.97-2.27M12 2L9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2z"></path></svg>                   </div>                   <a href="" class="product-reviews-link">84 Reviews</a>                 </div><span class="product-item-price ' + e.priceTextClass + '"><a' + w + ">", l.priceComposite && (p += e.labelFrom), p += WebPlatform.currToStr(l.onSale ? l.salePrice : l.price, e.currencySymbol, e.currencySymbolAtLeft, e.currency), l.onSale && (p += '<span class="scratched">' + WebPlatform.currToStr(l.price, e.currencySymbol, e.currencySymbolAtLeft, e.currency) + "</span>"), l.subscriptionPeriod && (p += ' <span style="font-size: 0.9em">/' + l.subscriptionPeriod + "</span>"), p += "</a></span>"), p += "</div>", e.showingInventory) {
                            var T = 0;
                            if (l.combinations && l.combinations.length)
                                for (var C = 0; C < l.combinations.length; ++C) {
                                    var k = l.combinations[C];
                                    if (null === k.quantity) {
                                        T = null;
                                        break
                                    }
                                    T += k.quantity
                                } else T = null !== l.quantity && l.quantity > 0 ? l.quantity : null;
                            if (null !== T && T > 0 && T < e.leftInStockThreshold) {
                                p += '<div class="scarcity-wrapper">' + (1 === T ? WebPlatform.Phrases["label.left_in_stock_single"] : WebPlatform.format(WebPlatform.Phrases["label.left_in_stock_multiple"], "x", T)) + "</div>"
                            }
                        }
                        p += "</div></div>"
                    }
                    e.hasProductQuickView && (p += '<div class="quick-view-btn" data-role="viewProduct"><a>' + e.labelQuickView + "</a></div>"), e.includeAddToCartButton && (p += '<div class="product-list-color none"><span class="color-select active"><div class="color-select-inner" style="background-color: #e1e1e1"></div></span><span class="color-select"><div class="color-select-inner" style="background-color: #de2750"></div></span></div><div class="add-to-btn-wrapper col20 f-left">', l.variations.length > 0 || null === l.quantity || "" === l.quantity || l.quantity > 0 ? (p += '<a data-role="' + (l.variations.length > 0 ? "viewProduct" : "addToCart") + '" data-process="' + e.storeProcess + '" class="primaryColor-bg2 add-to-cart">', p += t, p += "</a>") : p += '<div class="sold-out-btn">' + e.labelSoldOut + "</div>", p += "</div>"), p += "</div>"
                }
                e.fakeGallery && (p += '<a class="tos-prev" style="opacity: 1"><span></span></a>', p += '<a class="tos-next" style="opacity: 1"><span></span></a>'), p += "</div>", e.root.find(".product-list-wrapper").attr("class", "product-list-wrapper full-width-layout col20 f-left products-per-row-" + e.itemsPerRow + " " + e.productLayout + " " + e.productAlign + "-align " + e.quickViewBtnStyle + " " + ("" !== e.imageSizeType ? " image-positioned" : "")).html(p), (e.hasProductQuickView || e.includeAddToCartButton) && e.root.on("mousedown", '[data-role="viewProduct"]', (function () {
                    var e = $(this).closest(".product-item").data("id");
                    return WebPlatform.Store.showProductInQuickView(e), !1
                })), e.root.on("mousedown", '[data-role="addToCart"]', (function () {
                    var e = $(this),
                        t = e.closest(".product-item").data("id"),
                        i = e.data("process");
                    return WebPlatform.Store.addProductToCart(t, i), !1
                })), n || WebPlatform.refreshInlineGallery(e.root.find(".inline-gallery"))
            }
        })
    }
}, WebPlatform.Members = WebPlatform.Members || {}, WebPlatform.Store = WebPlatform.Store || {}, extend(WebPlatform.Store, {
    hideUnavailableVariations: !1,
    activePage: "",
    editable: !0,
    cart: void 0,
    cartTargets: null,
    quickViewProductRowTemplate: '<div class="cart-row %editableClass% %notAvailableClass%" data-index="%index%" data-product="%productId%">         <div class="image">           <a href="%baseUrl%/%url%" class="highlightColor">%image%</a>         </div>          <div class="product-summary">           <div class="product-info">             <h4 class="col20 f-left"><a href="%baseUrl%/%url%" class="highlightColor">%title%</a></h4>             <span class="col20 f-left %variationsCls%">%variation%</span>             <div class="qty f-left col20 %quantityWrapperClass%">               <div class="number-selector f-left flex align-center">                 <a class="number-pad" data-role="-1" style="line-height: 23px;">-</a>                 <input %disabledAttr% class="cart-row-quantity" type="number" size="4" step="1" max="9999" min="1" value="%quantity%" />                 <a class="number-pad" data-role="+1">+</a>               </div>             </div>           </div>           <span class="row-total">%price%</span>           <a class="row-delete %deleteClass%"><i class="fa fa-trash-o"></i></a>        </div>     </div>',
    storeProductRowTemplate: '<div class="cart-row cart-row-new %editableClass% %notAvailableClass% %additionalClz%" data-index="%index%" data-product="%productId%">         <div class="image">           <a href="%baseUrl%/%url%" class="highlightColor">%image%</a>         </div>         <div class="product-info">           <h4 class="col20 f-left"><a href="%baseUrl%/%url%" class="highlightColor">%title%</a></h4>           <span class="col20 f-left %variationsCls%">%variation% <a class="variations-update f-none">%changeText%</a></span>           <div class="qty f-left col20 %quantityWrapperClass%">             <div class="number-selector f-left flex align-center">               <a class="number-pad" data-role="-1" style="line-height: 23px;">-</a>               <input %disabledAttr% class="cart-row-quantity" type="number" size="4" step="1" max="9999" min="1" value="%quantity%" />               <a class="number-pad" data-role="+1">+</a>             </div>         </div>           </div>         <span class="row-total">%price%</span>           <a class="row-delete %deleteClass%"><i class="fa fa-trash-o"></i></a>    </div>',
    storeProductRowTemplateNoLinks: '<div class="cart-row cart-row-new %editableClass% %notAvailableClass% %additionalClz%" data-index="%index%" data-product="%productId%">         <div class="image">%image%</div>         <div class="product-info">           <h4 class="col20 f-left">%title%</h4>           <span class="col20 f-left %variationsCls%">%variation% <a class="variations-update f-none">%changeText%</a></span>           <div class="qty f-left col20 %quantityWrapperClass%">             <div class="number-selector f-left flex align-center">               <a class="number-pad" data-role="-1" style="line-height: 23px;">-</a>               <input %disabledAttr% class="cart-row-quantity" type="number" size="4" step="1" max="9999" min="1" value="%quantity%" />               <a class="number-pad" data-role="+1">+</a>             </div>           </div>         </div>         <span class="row-total">%price%</span>         <a class="row-delete %deleteClass%"><i class="fa fa-trash-o"></i></a>    </div>',
    storeTaxHeading: '<span class="tax-title">%content%</span>',
    storeTaxRowTemplate: '<div class="subtotal-wrapper tax-wrapper">       <span class="subtotal"></span>       <span class="subtotal-price tax-value"></span>     </div>',
    Orders: function () {
        var e = {},
            t = {},
            i = {};
        return {
            get: function (t, i) {
                "string" == typeof t && (t = {
                    orderId: t
                });
                var n = t.orderId || "cart";
                isUndefined(e[n]) ? WebPlatform.makeClientWebsiteRequest({
                    action: "getOrder",
                    data: t,
                    onOk: function (a) {
                        var s = a.data.order;
                        e[n] = s, "cart" === n && (WebPlatform.Store.cart = s);
                        var o = {
                            uid: a.uid
                        };
                        t.policies && (o.policies = a.data.policies), t.paymentOptions && (o.paymentOptions = a.data.paymentOptions), t.pickProducts && (o.pickProducts = a.data.pickProducts), WebPlatform.Members.current = a.data.member, WebPlatform.ipCountryCode = a.data.ipCountryCode, i(s, o)
                    }
                }) : i(e[n])
            },
            reset: function (t) {
                delete e[t]
            },
            set: function (n, a) {
                e[n] = a, "cart" === n && (WebPlatform.Store.cart = a);
                for (var s = t[n] || [], o = 0; o < s.length; ++o) {
                    var r = s[o];
                    r && $.contains(document, r[0]) ? WebPlatform.Store.renderOrder(a, r, i[n] || []) : s.splice(o--, 1)
                }
            },
            bind: function (n, a) {
                if (!a.hasClass("order-rendered")) {
                    "string" == typeof n && (n = {
                        orderId: n
                    });
                    var s = (n = mergeUnique(n || {}, {
                        id: "cart",
                        products: [],
                        funnelId: -1,
                        stepId: -1,
                        variantId: -1
                    })).id,
                        o = t[s];
                    o || (t[s] = o = []), n.pickProducts && n.pickProducts.length > 0 && (i[s] = n.pickProducts), o.push(a),
                        function (t, i) {
                            if (!i.hasClass("order-rendered")) {
                                var n = t.id,
                                    a = function (e) {
                                        return (e = e || {}).orderId = t.id, e.products = JSON.stringify(t.products || []), e.funnel = t.funnelId, e.funnelStep = t.funnelStepId, e.funnelStepVariant = t.funnelStepVariantId, e
                                    };
                                i.on("click", ".checkout-item-cbx:not(.checked)", (function (e) {
                                    return e.stopPropagation(), e.preventDefault(), !1
                                }));
                                var s = function (t) {
                                    if (t < 0) return -1;
                                    if (!(i.find(".cart-table .fake-checkbox").length > 0)) return t;
                                    for (var a = (e[n] || {}).items || [], s = 0; s <= t && !(s >= a.length); ++s) a[s].bump && ++t;
                                    return t >= a.length ? -1 : t
                                },
                                    o = function (e, t) {
                                        (e = s(e)) < 0 || WebPlatform.makeClientWebsiteRequest({
                                            action: "updateCart",
                                            data: a({
                                                type: "update",
                                                index: e,
                                                quantity: t
                                            }),
                                            onOk: function (e) {
                                                e.data.error && WebPlatform.showClientError(e.data.error);
                                                var t = e.data.cart;
                                                WebPlatform.Store.Orders.set(n, t), WebPlatform.Store.updateCartNumber(t.size, !1), WebPlatform.Events.trigger(document, WebPlatform.Events.ORDER_CHANGED, {
                                                    id: n,
                                                    order: t
                                                })
                                            }
                                        })
                                    };
                                i.on("click", ".row-delete", (function (t) {
                                    var i = $(this).closest(".cart-row");
                                    if (!i.hasClass("update-disabled")) {
                                        var o = s(i.data("index"));
                                        if (!(o < 0)) {
                                            var r = (e[n] || {}).items || [],
                                                l = o < r.length ? r[o] : null;
                                            return WebPlatform.makeClientWebsiteRequest({
                                                action: "updateCart",
                                                data: a({
                                                    type: "remove",
                                                    index: o
                                                }),
                                                onOk: function (e) {
                                                    l && WebPlatform.Store.reportRemoveFromCart(l, WebPlatform.Store.currency);
                                                    var t = e.data;
                                                    WebPlatform.Store.Orders.set(n, t), WebPlatform.Store.updateCartNumber(t.size, !1), WebPlatform.Events.trigger(document, WebPlatform.Events.ORDER_CHANGED, {
                                                        id: n,
                                                        order: t
                                                    })
                                                }
                                            }), t.stopPropagation(), t.preventDefault(), !1
                                        }
                                    }
                                })).on("click", ".number-pad", (function () {
                                    var e = $(this),
                                        t = e.closest(".cart-row");
                                    if (!t.hasClass("update-disabled")) {
                                        var i = t.data("index");
                                        if (!(i < 0)) {
                                            var n = WebPlatform.parse(t.find(".cart-row-quantity").val(), 0, !1) + (-1 === e.data("role") ? -1 : 1);
                                            n < 1 || o(i, n)
                                        }
                                    }
                                })).on("change", ".cart-row-quantity", (function () {
                                    var e = $(this),
                                        t = e.closest(".cart-row");
                                    if (!t.hasClass("update-disabled")) {
                                        var i = t.data("index");
                                        if (!(i < 0)) {
                                            var n = WebPlatform.parse(e.val(), 0, !1);
                                            o(i, n)
                                        }
                                    }
                                })).on("click", ".discount-code-btn", (function () {
                                    var e = i.find(".apply-code-input").val();
                                    WebPlatform.makeClientWebsiteRequest({
                                        action: "applyDiscountCode",
                                        data: a({
                                            code: e
                                        }),
                                        onOk: function (e) {
                                            WebPlatform.Store.Orders.set(n, e.data), WebPlatform.Events.trigger(document, WebPlatform.Events.ORDER_CHANGED, {
                                                id: n,
                                                order: e.data
                                            })
                                        }
                                    })
                                })).on("click", ".promo-code-toggle-btn", (function () {
                                    i.find(".coupon-code-wrapper").toggleClass("none")
                                })).on("click", ".remove-discount-btn", (function () {
                                    $(this).hasClass("none") || WebPlatform.makeClientWebsiteRequest({
                                        action: "removeDiscount",
                                        data: a({}),
                                        onOk: function (e) {
                                            WebPlatform.Store.Orders.set(n, e.data), WebPlatform.Events.trigger(document, WebPlatform.Events.ORDER_CHANGED, {
                                                id: n,
                                                order: e.data
                                            })
                                        }
                                    })
                                }))
                            }
                        }(n, a);
                    var r = e[s];
                    isUndefined(r) || WebPlatform.Store.renderOrder(r, a, i[s] || []), a.addClass("order-rendered")
                }
            }
        }
    }(),
    renderCart: function () {
        var e = $('div[data-role="cart-box"]').not(".order-rendered"),
            t = e.find(".loader").addClass("active-loading").removeClass("none");
        WebPlatform.Store.Orders.get("cart", (function (i) {
            t.removeClass("active-loading").addClass("none");
            var n = 0;
            null !== i && i.items && i.items.length && i.items.forEach((function (e) {
                n += e.quantity
            })), e.each((function (e, t) {
                WebPlatform.Store.Orders.bind({
                    id: "cart"
                }, $(t))
            })), WebPlatform.Store.updateCartNumber(n, !1)
        }))
    },
    subscriptionToStr: function (e) {
        if (null !== e) {
            var t = e.period,
                i = e.periodUnit;
            return t % 12 == 0 && 1 === i ? 1 == (t /= 12) ? WebPlatform.Phrases["label.year"] : t + "-" + WebPlatform.Phrases["label.years_lower"] : 0 === i ? 1 == t ? WebPlatform.Phrases["label.week_lower"] : t + "-" + WebPlatform.Phrases["label.weeks_lower"] : 1 == t ? WebPlatform.Phrases["label.month"] : t + "-" + WebPlatform.Phrases["label.months_lower"]
        }
    },
    renderOrder: function (e, t, i) {
        var n = t,
            a = n.hasClass("cart-preview"),
            s = !!n.data("showOldPrices"),
            o = (n.data("inFunnel"), !1),
            r = !0 === n.find(".checkouts-wrapper").data("pickQuantity");
        if (i = i || [], null === e || 0 === e.items.length) n.find(".cart-items-wrapper").addClass("none"), n.find(".cart-empty-wrapper").removeClass("none");
        else {
            var l = n.find(".cart-table"),
                c = l.hasClass("simple-table");
            l.empty();
            var d = "",
                p = 0,
                u = "cart" !== e.id && i.length > 1,
                h = [];
            u ? i.forEach((function (t) {
                for (var i = !1, n = 0; n < e.items.length; ++n)
                    if (e.items[n].productId === t.productId) {
                        t = e.items[n], i = !0;
                        break
                    } h.push({
                        item: t,
                        inOrder: i
                    })
            })) : e.items.forEach((function (e) {
                h.push({
                    item: e,
                    inOrder: !0
                })
            }));
            for (var f = 0, m = 0; m < h.length; ++m) {
                var g, v = h[m].item,
                    b = h[m].inOrder;
                g = null === v.images || 0 === v.images.length ? '<img src="' + resources + '/images/product-avatar.svg" alt="">' : '<img src="' + getThumbnailsFromBase(v.images[0].base, "640x480") + v.images[0].name + '?format=webp" alt="" />';
                for (var y = "", w = 0; w < v.variation.length; ++w) w > 0 && (y += ", "), y += WebPlatform.escapeHtml(v.variation[w].value);
                for (w = 0; w < v.additions.length; ++w) y += ("" === y ? "" : ", ") + WebPlatform.escapeHtml(v.additions[w].name) + ": " + WebPlatform.escapeHtml(v.additions[w].value);
                var _ = !0 === v.quantityAvailable;
                _ || (o = !0);
                var T = WebPlatform.currToStr(v.price, WebPlatform.Store.currencySymbol, WebPlatform.Store.currencySymbolAtLeft, WebPlatform.Store.currency);
                if (s && v.onSale) T = '<span class="checkout-old-price">' + WebPlatform.currToStr(v.basePrice, WebPlatform.Store.currencySymbol, WebPlatform.Store.currencySymbolAtLeft, WebPlatform.Store.currency) + "</span>" + T, b && (p += v.basePrice - v.price);
                v.subscription && (T += c ? " / " + WebPlatform.Store.subscriptionToStr(v.subscription) : '<span class="item-subscription-period"> / ' + WebPlatform.Store.subscriptionToStr(v.subscription) + "</span>");
                var C = v.productWithVariations && (!v.variation || 0 === v.variation.length),
                    k = C ? "incomplete-item" : "",
                    E = C ? WebPlatform.Phrases["label.select_product_variant"] : (WebPlatform.Phrases["label.change"] || "change").toUpperCase(),
                    x = !v.productWithVariations;
                u && (k += " fake-checkbox checkout-item-cbx", b && (k += " checked"));
                var S, M = "cart" !== e.clientSessionId,
                    P = M || WebPlatform.Funnels && WebPlatform.Funnels.hideProductLinks,
                    I = !M,
                    O = !0 === window.forceEnableQuantityChangeInCheckout || v.quantity > 1 || M && r || !M && !v.isSubscription && "MEMBERSHIP" !== v.type && !window.noStoreQuantityChange;
                S = P ? WebPlatform.Store.storeProductRowTemplateNoLinks : a ? WebPlatform.Store.quickViewProductRowTemplate : WebPlatform.Store.storeProductRowTemplate, d += WebPlatform.format(S, "baseUrl", WebPlatform.Store.baseUrl, "editableClass", I || O ? "" : "update-disabled", "deleteClass", I ? "" : "none", "disabledAttr", O ? "" : "disabled", "quantityWrapperClass", O ? "" : "none", "notAvailableClass", _ ? "" : "not-available", "index", b ? f++ : -1, "url", v.url, "productId", v.productId, "title", WebPlatform.escapeHtml(v.title), "additionalClz", k, "changeText", E, "variationsCls", x ? "none" : "", "image", g, "variation", y, "quantity", v.quantity, "price", T)
            }
            l.append(d), o && l.append($('<span class="error-message"></span>').text(WebPlatform.Store.notEnoughQuantityMessage)), n.find(".remove-discount-btn, .promo-code-toggle-btn").removeClass("none");
            var A = n.find(".no-discount-wrapper"),
                L = n.find(".subtotal-value");
            L.text(WebPlatform.currToStr(e.subTotalNoDiscount, WebPlatform.Store.currencySymbol, WebPlatform.Store.currencySymbolAtLeft, WebPlatform.Store.currency));
            var D = !1;
            null !== e.discount ? A.hide() : A.length > 0 ? A.show() : D = !0;
            var N = n.find(".product-discount-wrapper");
            null !== e.discount && "FREE_SHIPPING" !== e.discount.type && e.subTotalNoDiscount !== e.subTotal ? (N.find(".subtotal-price").text(WebPlatform.currToStr(e.subTotal - e.subTotalNoDiscount, WebPlatform.Store.currencySymbol, WebPlatform.Store.currencySymbolAtLeft, WebPlatform.Store.currency)), N.find(".subtotal>span").text(e.discount.name + " (" + e.discount.code + "):"), N.show(), D = !1) : (N.hide(), D = D && !0);
            var R = WebPlatform.Store.priceWithTax ? WebPlatform.Phrases["label.taxes_included"] : WebPlatform.Phrases["label.taxes"];
            if (null !== e.preShippingTaxes && e.preShippingTaxes.length > 0) {
                var W = n.find(".pre-shipping-tax-wrapper").empty();
                e.preShippingTaxes.length && W.append(WebPlatform.format(WebPlatform.Store.storeTaxHeading, "content", R));
                for (w = 0; w < e.preShippingTaxes.length; ++w) {
                    var F = 0 === (V = (j = e.preShippingTaxes[w]).type) ? j.amount + "%" : WebPlatform.currToStr(j.amount, WebPlatform.Store.currencySymbol, WebPlatform.Store.currencySymbolAtLeft, WebPlatform.Store.currency),
                        B = j.name + (0 === V ? " (" + F + ")" : "") + ":",
                        U = WebPlatform.currToStr(j.total, WebPlatform.Store.currencySymbol, WebPlatform.Store.currencySymbolAtLeft, WebPlatform.Store.currency);
                    (d = $(WebPlatform.Store.storeTaxRowTemplate)).find(".subtotal").text(B), d.find(".tax-value").text(U), W.append(d)
                }
                W.show(), D = !1
            } else n.find(".pre-shipping-tax-wrapper").hide(), D = D && !0;
            if (null !== e.shipping) {
                var H = n.find(".shipping-wrapper");
                H.find(".shipping > span").text("(" + e.shipping.name + ")"), H.find(".shipping-value").text(WebPlatform.currToStr(e.shipping.cost, WebPlatform.Store.currencySymbol, WebPlatform.Store.currencySymbolAtLeft, WebPlatform.Store.currency)), H.show(), D = !1
            } else n.find(".shipping-wrapper").hide(), D = D && !0;
            var z = n.find(".shipping-discount-wrapper");
            if (null !== e.discount && "FREE_SHIPPING" === e.discount.type) {
                var G = null !== e.shipping ? WebPlatform.currToStr(e.shipping.cost, WebPlatform.Store.currencySymbol, WebPlatform.Store.currencySymbolAtLeft, WebPlatform.Store.currency) : "-";
                z.find(".subtotal-price").text(G), z.find(".subtotal>span").text(e.discount.name + " (" + e.discount.code + "):"), z.show(), D = !1
            } else z.hide(), D = D && !0;
            if (null !== e.postShippingTaxes && e.postShippingTaxes.length > 0) {
                var q = n.find(".post-shipping-tax-wrapper").empty();
                e.preShippingTaxes && e.preShippingTaxes.length && null === e.shipping || q.append(WebPlatform.format(WebPlatform.Store.storeTaxHeading, "content", R));
                for (w = 0; w < e.postShippingTaxes.length; ++w) {
                    var j, V;
                    F = 0 === (V = (j = e.postShippingTaxes[w]).type) ? j.amount + "%" : WebPlatform.currToStr(j.amount, WebPlatform.Store.currencySymbol, WebPlatform.Store.currencySymbolAtLeft, WebPlatform.Store.currency), B = j.name + (0 === V ? " (" + F + ")" : "") + ":", U = WebPlatform.currToStr(j.total, WebPlatform.Store.currencySymbol, WebPlatform.Store.currencySymbolAtLeft, WebPlatform.Store.currency);
                    (d = $(WebPlatform.Store.storeTaxRowTemplate)).find(".subtotal").text(B), d.find(".tax-value").text(U), q.append(d)
                }
                q.show(), D = !1
            } else n.find(".post-shipping-tax-wrapper").hide(), D = D && !0;
            C && c && (D = !1), c ? D ? (L.closest(".no-discount-wrapper, .subtotal-wrapper").addClass("none"), L.closest(".checkout-totals").find(".simple-table").css("border", "none")) : (L.closest(".no-discount-wrapper, .subtotal-wrapper").removeClass("none"), L.closest(".checkout-totals").find(".simple-table").css("border", "")) : L.closest(".checkout-totals")[D ? "hide" : "show"]();
            var Y = WebPlatform.currToStr(e.total, WebPlatform.Store.currencySymbol, WebPlatform.Store.currencySymbolAtLeft, WebPlatform.Store.currency);
            if (s && p > 0) Y = '<span class="checkout-old-price old-grand-total">' + WebPlatform.currToStr(e.total + p, WebPlatform.Store.currencySymbol, WebPlatform.Store.currencySymbolAtLeft, WebPlatform.Store.currency) + "</span>" + Y;
            n.find(".grand-total").html(Y), n.find(".cart-empty-wrapper").addClass("none"), n.find(".cart-items-wrapper").removeClass("none")
        }
    },
    updateCartNumber: function (e, t) {
        var i = $(".cart-button, .shopping-cart"),
            n = i.find(".cart-items-number");
        if (0 === e ? (n.addClass("none"), i.filter(".shopping-cart-mobile, .shopping-cart-smaller").addClass("none")) : (i.removeClass("none"), n.text(e).removeClass("none pulse")), t && !WebPlatform.Store.atCheckout) {
            var a, s = WebPlatform.Funnels.isInFunnel();
            a = s ? "javascript: WebPlatform.Funnels.showNextStepOrCheckout();" : WebPlatform.Store.baseUrl + "/cart", e > 0 && s && WebPlatform.Funnels.showCheckoutButton ? ($(".next-step-popup").removeClass("none"), WebPlatform.Funnels.checkoutButtonTarget && (a = WebPlatform.Funnels.checkoutButtonTarget)) : $(".next-step-popup").addClass("none");
            var o = '<a href="' + a + '">' + WebPlatform.Phrases["label.checkout_now"] + "</a>";
            WebPlatform.showClientMessage(WebPlatform.Store.productAddedToCart + o, 6e3), WebPlatform.delay(10, (function () {
                n.addClass("pulse"), n = null
            }))
        }
    },
    removeProductFromCart: function (e, t) {
        WebPlatform.Store.Orders.get("cart", (function (i) {
            if (i && i.items) {
                for (var n = null, a = -1, s = 0; s < i.items.length; ++s)
                    if (i.items[s].productId === e) {
                        a = s, n = i.items[s];
                        break
                    } a >= 0 && WebPlatform.makeClientWebsiteRequest({
                        action: "updateCart",
                        data: {
                            orderId: "cart",
                            products: "[]",
                            type: "remove",
                            index: a
                        },
                        onOk: function (e) {
                            WebPlatform.Store.reportRemoveFromCart(n, WebPlatform.Store.currency);
                            var i = e.data;
                            WebPlatform.Store.Orders.set("cart", i), WebPlatform.Store.updateCartNumber(i.size, !1), WebPlatform.Events.trigger(document, WebPlatform.Events.ORDER_CHANGED, {
                                id: "cart",
                                order: i
                            }), t && t()
                        }
                    })
            }
        }))
    },
    addProductToOrder: function (e, t, i, n) {
        WebPlatform.makeClientWebsiteRequest({
            action: "getStoreProduct",
            data: {
                id: e
            },
            onOk: function (e) {
                var a = e.data;
                if (a.variations.length > 0) WebPlatform.Store.showLoadedProductInQuickView({
                    product: a,
                    activeOrderDetails: i,
                    onAddedToOrder: function () {
                        n && n()
                    },
                    storeProcess: t
                });
                else {
                    var s = {
                        productId: a.id,
                        quantity: 1,
                        combination: -1,
                        variation: [],
                        price: a.onSale ? a.salePrice : a.price
                    },
                        o = i || {};
                    o.orderId = o.orderId || "cart", o.option = JSON.stringify(s), o.process = t, WebPlatform.makeClientWebsiteRequest({
                        action: "addToCart",
                        data: o,
                        onOk: function (e) {
                            WebPlatform.Store.reportAddToCart(e.uid, a, s, WebPlatform.Store.currency);
                            var i = e.data;
                            "buy" === t ? WebPlatform.Funnels.isInFunnel() && WebPlatform.Funnels.show("next", !0) || (window.location.href = (WebPlatform.Store.baseUrl || "/store") + "/checkout") : (WebPlatform.Store.Orders.set(o.orderId, i), "cart" === o.orderId && WebPlatform.Store.updateCartNumber(i.size, !0));
                            n && n(), WebPlatform.Events.trigger(document, WebPlatform.Events.ORDER_CHANGED, {
                                id: o.orderId,
                                order: i
                            })
                        }
                    })
                }
            }
        })
    },
    addProductToCart: function (e, t, i) {
        WebPlatform.Store.addProductToOrder(e, t, null, i)
    },
    getOrderItemsToReport: function (e) {
        var t = [];
        return e.forEach((function (e) {
            t.push({
                id: e.productId,
                quantity: e.quantity,
                item_price: e.price
            })
        })), t
    },
    getOrderProductIds: function (e) {
        var t = [];
        return e.forEach((function (e) {
            t.push(e.productId)
        })), t
    },
    reportPurchase: function (e, t, i, n, a, s, o, r, l) {
        var c = WebPlatform.Store.getOrderItemsToReport(i);
        if (o = o || (l ? l.customerName : "") || WebPlatform.visitorName, r = r || (l ? l.customerEmail : "") || WebPlatform.visitorEmail, WebPlatform.Events.trigger($("body"), WebPlatform.Events.ORDER_COMPLETED, {
            id: t,
            currency: s || WebPlatform.Store.currency,
            total: n,
            items: c,
            customerName: o,
            customerEmail: r,
            order: l
        }), WebPlatform.Store.fbPxId && window.fbq && "NewSubscription" !== a) {
            var d = WebPlatform.Store.getOrderProductIds(i);
            window.fbq("track", a || "Purchase", {
                contents: c,
                content_ids: d,
                currency: s || WebPlatform.Store.currency,
                value: n,
                content_type: "product",
                num_items: c.length
            }, {
                eventID: e || ""
            })
        }
        window.gtag ? gtag("event", "purchase", {
            transaction_id: t + "",
            value: n,
            currency: s || WebPlatform.Store.currency,
            items: WebPlatform.Store._getOrderProductsForGA(i)
        }) : window.dataLayer && window.dataLayer.push && window.dataLayer.push({
            event: "ecommerce",
            ecommerce: {
                purchase: {
                    actionField: {
                        id: t + "",
                        revenue: n
                    },
                    products: WebPlatform.Store._getOrderProductsForGA(i)
                }
            }
        })
    },
    reportRemoveFromCart: function (e, t) {
        var i = [];
        e.variation && e.variation.length && e.variation.forEach((function (e) {
            i.push(e.value)
        })), WebPlatform.Events.trigger($("body"), WebPlatform.Events.ORDER_REMOVE_FROM_CART, {
            currency: t || WebPlatform.Store.currency,
            items: [{
                id: e.productId,
                name: e.title,
                price: e.price / e.quantity,
                variant: i.length ? i.join(", ") : "",
                quantity: e.quantity
            }]
        }), window.gtag ? gtag("event", "remove_from_cart", {
            currency: t || WebPlatform.Store.currency,
            items: [{
                id: e.productId,
                name: e.title,
                price: e.price / e.quantity,
                variant: i.length ? i.join(", ") : "",
                quantity: e.quantity
            }]
        }) : window.dataLayer && window.dataLayer.push && window.dataLayer.push({
            event: "ecommerce",
            ecommerce: {
                currencyCode: (t || WebPlatform.Store.currency).toUpperCase(),
                remove: {
                    products: [{
                        id: e.productId,
                        name: e.title,
                        price: e.price / e.quantity,
                        variant: i.length ? i.join(", ") : "",
                        quantity: e.quantity
                    }]
                }
            }
        })
    },
    reportAddToCart: function (e, t, i, n) {
        var a = [];
        i.variation && i.variation.length && i.variation.forEach((function (e) {
            a.push(e.value)
        })), WebPlatform.Events.trigger($("body"), WebPlatform.Events.ORDER_ADD_TO_CART, {
            currency: n || WebPlatform.Store.currency,
            items: [{
                id: t.id,
                name: t.title,
                price: i.price,
                variant: a.length ? a.join(", ") : "",
                quantity: i.quantity
            }]
        }), WebPlatform.Store.fbPxId && window.fbq && window.fbq("track", "AddToCart", {
            content_ids: ["" + t.id],
            content_type: "product",
            content_name: t.title,
            currency: n || WebPlatform.Store.currency,
            value: i.price,
            num_items: i.quantity
        }, {
            eventID: e || ""
        }), window.gtag ? gtag("event", "add_to_cart", {
            currency: n || WebPlatform.Store.currency,
            items: [{
                id: t.id,
                name: t.title,
                price: i.price,
                variant: a.length ? a.join(", ") : "",
                quantity: i.quantity
            }]
        }) : window.dataLayer && window.dataLayer.push && window.dataLayer.push({
            event: "ecommerce",
            ecommerce: {
                currencyCode: (n || WebPlatform.Store.currency).toUpperCase(),
                add: {
                    products: [{
                        id: t.id,
                        name: t.title,
                        price: i.price,
                        variant: a.length ? a.join(", ") : "",
                        quantity: i.quantity
                    }]
                }
            }
        })
    },
    _getOrderProductsForGA: function (e) {
        var t = [];
        return e.forEach((function (e) {
            var i = [];
            e.variation && e.variation.length && e.variation.forEach((function (e) {
                i.push(e.value)
            })), t.push({
                id: e.productId,
                name: e.title,
                price: e.price / e.quantity,
                variant: i.length ? i.join(", ") : "",
                quantity: e.quantity
            })
        })), t
    },
    reportInitiateCheckout: function (e, t, i) {
        null !== t && t.items && 0 !== t.items.length && (WebPlatform.Events.trigger($("body"), WebPlatform.Events.ORDER_INITIATE_CHECKOUT, {
            currency: i || WebPlatform.Store.currency,
            items: WebPlatform.Store._getOrderProductsForGA(t.items)
        }), WebPlatform.Store.fbPxId && window.fbq && window.fbq("track", "InitiateCheckout", {
            content_type: "product",
            contents: WebPlatform.Store.getOrderItemsToReport(t.items),
            content_ids: WebPlatform.Store.getOrderProductIds(t.items),
            currency: i || WebPlatform.Store.currency,
            value: t.total,
            num_items: t.items.length
        }, {
            eventID: e || ""
        }), window.gtag ? gtag("event", "begin_checkout", {
            currency: i || WebPlatform.Store.currency,
            items: WebPlatform.Store._getOrderProductsForGA(t.items)
        }) : window.dataLayer && window.dataLayer.push && window.dataLayer.push({
            event: "ecommerce",
            ecommerce: {
                checkout: {
                    actionField: {
                        step: 1
                    },
                    products: WebPlatform.Store._getOrderProductsForGA(t.items)
                }
            }
        }))
    },
    reportAddPaymentDetails: function (e, t) {
        window.gtag ? gtag("event", "add_payment_info", {
            currency: t || WebPlatform.Store.currency,
            items: WebPlatform.Store._getOrderProductsForGA(e.items)
        }) : window.dataLayer && window.dataLayer.push && window.dataLayer.push({
            event: "ecommerce",
            ecommerce: {
                checkout: {
                    actionField: {
                        step: 2
                    },
                    products: WebPlatform.Store._getOrderProductsForGA(e.items)
                }
            }
        })
    },
    goToThankYouPage: function (e, t) {
        e = WebPlatform.parse(e);
        var i = function (e) {
            0 === e.toLowerCase().trim().indexOf("http") && ClientTools.showLoader(), window.location.href = e
        };
        0 === (t = (t || "").trim()).toLowerCase().indexOf("javascript:") && t.toLowerCase().replace(/'"/g, "").indexOf("webplatform.funnels.show(next)") > -1 && (t = "javascript:WebPlatform.Funnels.show('next', false, false)"), WebPlatform.Funnels.isInFunnel() ? WebPlatform.Funnels.tryShowNextUpsell(e || 0, (function () {
            i(t)
        })) : i(t)
    }
}), WebPlatform.Popups = WebPlatform.Popups || {}, WebPlatform.Popups.POPUP_MARKUP = '<div data-id="%id%" id="platform-popup-%id%" class="popup-wrapper %animationClass% %bgClass% %positionClass% %overlayBgClass%"><div class="popup-overlay" style="%overlayBg%;"></div></div>', WebPlatform.Popups.POPUP_BOX_MARKUP = '<div class="wrapping-table">     <div class="popup-container" style="width: %width%;">       <div class="popup-container-inner">         <a class="popup-close-btn %btnColorClass%" style="%btnColor%;">&#10005;</a>         <div class="popup-content-wrapper %contentBgColorClass%" style="%contentBgColor%; padding: %contentPadding%px; %contentSize%"><div class="popup-content"></div></div>         <div class="popup-background-wrapper" style="%bgSize%"></div>       </div>     </div>   </div>', WebPlatform.Popups.prompt = function (e, t, i, n) {
    var a = '            <div class="simple-client-popup">              <h4>' + e + '</h4>              <div class="col20 f-left text-center mt-45">                <a data-role="close" class="inline-block text-btn" style="margin-right: auto; font-size: 14px;">' + (n || WebPlatform.Phrases["label.no"]) + '</a>                <button data-role="confirm" class="save-changes inline-block mt-0" data-role="confirm">' + (i || WebPlatform.Phrases["label.yes"]) + "</button>              </div>            </div>";
    WebPlatform.Popups.showSimplePopup(a, 400, (function (e, i) {
        i.find('[data-role="confirm"]').click((function () {
            e.close(), (t || dummy)()
        }))
    }))
}, WebPlatform.Popups.showSimplePopup = function (e, t, i, n) {
    mergeUnique(n = n || {}, {
        showCloseButton: !0,
        onHide: null
    });
    var a = $('<div class="popup-wrapper at-center simple-popup">         <div class="popup-overlay" style="background: rgba(0, 0, 0, 0.7);"></div>           <div class="popup-container" style="width: ' + t + 'px;">' + (n.showCloseButton ? '<a class="close-btn"></a>' : "") + e + "</div></div>"),
        s = function () {
            a.removeClass("visible"), WebPlatform.onTransitionEnd(a, (function () {
                n.onHide && n.onHide(), a.remove(), a = null
            }), 300)
        };
    a.one("click", '.close-btn, [data-role="close"]', s), $("body").append(a), WebPlatform.delay(20, (function () {
        a.addClass("visible"), (i || dummy)({
            close: s
        }, a)
    }))
}, WebPlatform.Popups.setDefaults = function (e) {
    return mergeUnique(e, {
        name: "",
        pages: [],
        showOnExit: !1,
        animationType: "popup-fade",
        showPopupWithDelay: !1,
        popupDelay: 3,
        showPopupOnScroll: !1,
        scrollDistance: 15,
        popupShowFrequency: "once",
        size: 50,
        overlayColor: "#000000",
        overlayColorClass: "",
        overlayTransparency: 30,
        closeBtnColor: "#000000",
        closeBtnColorClass: "",
        contentBgColor: "#ffffff",
        contentBgColorClass: "",
        contentPadding: 30,
        backgroundType: "background-none",
        position: "at-center",
        width: 500,
        height: 300,
        bgImage: "none",
        bgImageBase: "",
        bgColor: "#333333",
        bgRepeat: "no-repeat",
        bgSize: "cover",
        bgPosition: "center center",
        showOnMobile: !1,
        thumbImage: "none",
        thumbImageBase: "",
        visibleAsTemplate: !1
    }), e
}, WebPlatform.Popups.setBackground = function (e, t) {
    var i = e.find(".popup-background-wrapper"),
        n = t.bgRepeat,
        a = t.bgSize,
        s = t.bgPosition,
        o = "none" === t.bgImage ? "none" : "url(" + getFileFromBase(t.bgImageBase) + t.bgImage + "?format=webp)",
        r = t.bgColor;
    i.css({
        backgroundColor: r,
        backgroundPosition: s,
        backgroundImage: o,
        backgroundRepeat: n,
        backgroundSize: a
    })
}, WebPlatform.Popups.show = function (e, t, i, n) {
    var a, s, o, r = !1;
    "object" == typeof e ? (a = e.id, s = e.funnelId, o = e.variant, r = !0 === e.isTemplate) : a = e, $("#platform-popup-" + a).length > 0 || WebPlatform.makeClientWebsiteRequest({
        action: "getPopup",
        data: {
            id: a,
            funnelId: s,
            variant: o,
            preview: t ? "" : WebPlatform.getUrlQueryParameter(window.location.href, "preview"),
            edit: !!t,
            isTemplate: r
        },
        onOk: function (e) {
            var o, r, l = e.data.settings || {},
                c = e.data.content || "",
                d = e.data.funnelVariantId || 0;
            l.name = e.data.name, WebPlatform.Popups.setDefaults(l), "background-top" === l.backgroundType || "background-bottom" === l.backgroundType ? (o = "", r = "height: " + l.size + "px;") : (o = "width: " + l.size + "%;", r = "width: " + (100 - l.size) + "%;");
            var p, u = "";
            l.overlayColor.startsWith("#") ? p = "background: " + WebPlatform.hexToRgba(l.overlayColor, (100 - l.overlayTransparency) / 100) : (p = "background: " + l.overlayColor, l.overlayColorClass && (u = "bg-color-" + l.overlayColorClass, p = ""));
            var h = $(WebPlatform.format(WebPlatform.Popups.POPUP_MARKUP, "id", a, "bgClass", l.backgroundType, "positionClass", l.position, "animationClass", l.animationType, "overlayBg", p, "overlayBgClass", u));
            h.append(WebPlatform.format(WebPlatform.Popups.POPUP_BOX_MARKUP, "width", l.width + "px", "height", l.height + "px", "btnColor", l.closeBtnColorClass ? "" : "color: " + l.closeBtnColor + ";", "btnColorClass", l.closeBtnColorClass ? "color-" + l.closeBtnColorClass : "", "contentBgColor", l.contentBgColorClass ? "" : "background: " + l.contentBgColor + ";", "contentBgColorClass", l.contentBgColorClass ? "bg-color-" + l.contentBgColorClass : "", "contentPadding", l.contentPadding, "contentSize", o, "bgSize", r)), $(".theme").append(h), h.find(".popup-content").html(c), WebPlatform.Popups.setBackground(h, l), h.data("popupShowFrequency", l.popupShowFrequency), h.data("editing", t), t || h.find(".popup-close-btn").click((function () {
                var e = $(this).closest(".popup-wrapper").data("id");
                WebPlatform.Popups.hide(e, n || dummy)
            })), WebPlatform.processAccumulatedRequests(), h.on(WebPlatform.Events.FORM_SUBMITTED, (function (e, t) {
                WebPlatform.delay(3500, (function () {
                    WebPlatform.Popups.hide(a, n || dummy)
                }))
            })), WebPlatform.delay(30, (function () {
                h.addClass("visible"), WebPlatform.onTransitionEnd(h, (function () {
                    h.addClass("displayed"), window.ClientTools && (window.ClientTools.refreshForms(), window.ClientTools.refreshLightboxes(), window.ClientTools.refreshCountdowns(), window.ClientTools.refreshToggles(), window.ClientTools.refreshDelayedWidgets(), window.ClientTools.refreshContainerBgVideos(), $window.scroll()), (i || dummy)(a, l, h)
                }), 300)
            })), s && d && !t && WebPlatform.PageStatsService && WebPlatform.PageStatsService.trackFunnelPopupStepView(s, a, d)
        }
    })
}, WebPlatform.Popups.hidden = [], WebPlatform.Popups.hide = function (e, t) {
    var i = $("#platform-popup-" + e);
    if (i.length > 0 && !i.hasClass("is-hiding")) {
        i.addClass("is-hiding");
        var n = !0 === i.data("editing"),
            a = i.data("popupShowFrequency");
        i.off(WebPlatform.Events.FORM_SUBMITTED), WebPlatform.Popups.hidden.push(e), i.removeClass("visible displayed"), WebPlatform.onTransitionEnd(i, (function () {
            i.remove(), (t || dummy)()
        }), 300), n || "always" === a || ("once" === a ? Cookies.set("platform-popup-" + e, 1, {
            expires: 365,
            path: "/"
        }) : Cookies.set("platform-popup-" + e, 1, {
            path: "/"
        }))
    }
}, WebPlatform.Popups.registerPagePopups = function (e) {
    for (var t = [], i = [], n = 0; n < e.length; ++n) {
        var a = e[n];
        a.settings = a.settings || {}, WebPlatform.Popups.setDefaults(a.settings), "always" !== a.settings.popupShowFrequency && Cookies.get("platform-popup-" + a.id) || WebPlatform.isMobile() && !a.settings.showOnMobile || (Cookies.remove("platform-popup-" + a.id), a.settings.showOnExit && t.push(a), a.settings.showPopupWithDelay && WebPlatform.delay(1e3 * a.settings.popupDelay, function (e) {
            return function () {
                -1 === WebPlatform.Popups.hidden.indexOf(e) && WebPlatform.Popups.show(e, !1, dummy)
            }
        }(a.id)), a.settings.showPopupOnScroll && i.push(a))
    }
    t.length > 0 && $document.on("mouseout.popups", (function (e) {
        if (!(e.clientY >= 50 || "input" === e.target.tagName.toLowerCase() || e.clientX >= $(window).innerWidth() - 50 || e.relatedTarget || e.toElement)) {
            $document.off("mouseout.popups");
            for (var i = 0; i < t.length; ++i) - 1 === WebPlatform.Popups.hidden.indexOf(t[i].id) && WebPlatform.Popups.show(t[i].id, !1, dummy)
        }
    })), i.length > 0 && window.ClientTools && window.ClientTools.addOnScrollListener($.debounce(300, (function () {
        for (var e = $window.scrollTop() / ($document.height() - $window.height()) * 100, t = 0; t < i.length; ++t) {
            var n = i[t];
            e >= (n.settings.scrollDistance || 101) && -1 === WebPlatform.Popups.hidden.indexOf(n.id) && WebPlatform.Popups.show(n.id, !1, dummy)
        }
    })))
}, WebPlatform.Events = WebPlatform.Events || {}, WebPlatform.Events.ORDER_COMPLETED = "platform.events.order_completed", WebPlatform.Events.ORDER_CHANGED = "platform.events.order_changed", WebPlatform.Events.ORDER_ADD_TO_CART = "platform.events.order_add_to_cart", WebPlatform.Events.ORDER_REMOVE_FROM_CART = "platform.events.order_remove_from_cart", WebPlatform.Events.ORDER_INITIATE_CHECKOUT = "platform.events.order_initiate_checkout", WebPlatform.Events.FORM_SUBMITTED = "platform.events.client_form_submited", WebPlatform.Events.PAGE_LOADED = "platform.events.page_loaded", WebPlatform.Events.CONFIGURATION_CHANGED = "platform.events.configuration_changed", WebPlatform.Events.WEBSITE_SUBSCRIBED = "platform.events.website_subscribed", WebPlatform.Events.WEBSITE_CANCELED = "platform.events.website_canceled", WebPlatform.Events.NEW_REGISTRATION = "platform.events.new_registration", WebPlatform.Events.trigger = function (e, t, i) {
    try {
        e instanceof jQuery && (e = e[0]);
        var n = new CustomEvent(t, {
            bubbles: !0,
            cancelable: !0,
            detail: i
        });
        e.dispatchEvent(n)
    } catch (e) {
        Log.error("Unable to dispatch event " + t + "!"), Log.error(e)
    }
}, WebPlatform.Countdown = WebPlatform.Countdown || {}, WebPlatform.Countdown.create = function (e) {
    e.length < 0 || e.hasClass("with-countdown") || e.each((function (e, t) {
        var i = (t = $(t)).data("type"),
            n = WebPlatform.parse(t.data("date"), 0),
            a = WebPlatform.parse(t.data("hours"), 1),
            s = WebPlatform.parse(t.data("minutes"), 0),
            o = WebPlatform.parse(t.data("seconds"), 0),
            r = WebPlatform.parse(t.data("start"), 100),
            l = WebPlatform.parse(t.data("end"), 0),
            c = WebPlatform.parse(t.data("interval"), 1),
            d = !0 === t.data("reset"),
            p = t.data("link") || "",
            u = (t.data("target"), t.data("onend") || ""),
            h = !1 !== t.data("showdays"),
            f = !1 !== t.data("showseconds"),
            m = t.data("color") || "#ffffff",
            g = t.data("bgcolor") || "#333333",
            v = WebPlatform.parse(t.data("size"), 70),
            b = t.data("labelcolor") || "#333333",
            y = WebPlatform.parse(t.data("labelsize"), 14),
            w = WebPlatform.parse(t.data("uid"), 7),
            _ = null;
        t.addClass("with-countdown");
        $(".theme").width();
        var T = function () {
            _.timer._destroyTimer(), "link" === u ? window.ClientTools && (window.location.href = p) : "message" === u && t.slideUp("fast", (function () {
                t.closest(".widget").find(".flip-countdown-end").slideDown("fast")
            }))
        },
            C = WebPlatform.getCookieName("time-cd-" + w);
        if ("number" === i) {
            var k = r;
            if (d) Cookies.remove(C, {
                path: "/"
            });
            else {
                var E = O = (new Date).getTime();
                if (A = Cookies.get(C) || "")
                    if (2 === (L = A.split(":")).length) r + "|" + l + "|" + c === L[0] && 0 === (E = WebPlatform.parse(L[1]) || 0) && (E = O);
                if (A !== r + "|" + l + "|" + c + ":" + E && Cookies.set(C, r + "|" + l + "|" + c + ":" + E, {
                    expires: 7,
                    path: "/"
                }), E > 0) {
                    var x = Math.floor((O - E) / 1e3 / c);
                    k = r + (r > l ? -1 : 1) * x
                }
            }
            var S = r > l,
                M = S && k <= l || !S && k >= l;
            if (M && (k = l), _ = t.FlipClock(k, {
                clockFace: "Counter",
                color: m,
                bgColor: g,
                size: v,
                labelColor: b,
                labelSize: y
            }), t.data("clock", _), M) T();
            else {
                var P = function () {
                    S ? (--k, _.decrement()) : (++k, _.increment()), S && k <= l || !S && k >= l ? T() : WebPlatform.delay(1e3 * c, P)
                };
                WebPlatform.delay(1e3 * c, P)
            }
        } else {
            var I = 0;
            if ("date" === i) {
                (I = (n - (new Date).getTime()) / 1e3) < 0 && (I = 0)
            } else {
                if (I = o + 60 * s + 60 * a * 60, d) Cookies.remove(C, {
                    path: "/"
                });
                else {
                    var O, A, L;
                    E = O = (new Date).getTime();
                    if (A = Cookies.get(C) || "")
                        if (2 === (L = A.split(":")).length) (WebPlatform.parse(L[0]) || 0) === I && 0 === (E = WebPlatform.parse(L[1]) || 0) && (E = O);
                    A !== I + ":" + E && Cookies.set(C, I + ":" + E, {
                        expires: 7,
                        path: "/"
                    }), I -= (O - E) / 1e3
                }
                I < 0 && (I = 0)
            }
            0 === I && WebPlatform.delay(1e3, T), _ = t.FlipClock(I, {
                clockFace: h ? "DailyCounter" : "HourlyCounter",
                showSeconds: f,
                countdown: !0,
                defaultLanguage: "custom",
                color: m,
                bgColor: g,
                size: v,
                labelColor: b,
                labelSize: y,
                callbacks: {
                    stop: function () {
                        T()
                    }
                },
                localize: function (e, t) {
                    return WebPlatform.Phrases["label." + e.toLowerCase()] || e
                }
            }), t.data("clock", _)
        }
    }))
}, WebPlatform.Countdown.destroy = function (e) {
    if (e instanceof jQuery && (e.hasClass("flip-countdown") || (e = e.find("flip-countdown")), e.hasClass("with-countdown"))) {
        e.removeClass("with-countdown");
        var t = e.data("clock") || null;
        null !== t && t.timer._destroyTimer()
    }
}, WebPlatform.Countdown.get = function (e) {
    return e.hasClass("with-countdown") ? e.data("clock") || null : e.find(".with-countdown").data("clock") || null
}, WebPlatform.Funnels = WebPlatform.Funnels || {}, WebPlatform.Funnels.currentStep = null, WebPlatform.Funnels.currentStepVariant = null, WebPlatform.Funnels.isInFunnel = function () {
    return WebPlatform.Funnels.steps && WebPlatform.Funnels.steps.length > 0
}, WebPlatform.Funnels.showNextStepOrCheckout = function () {
    WebPlatform.Funnels.show("next", !0) || (window.location.href = WebPlatform.Store.baseUrl + "/cart")
}, WebPlatform.Funnels.showNextStepOrDownsell = function (e, t, i) {
    var n = WebPlatform.Funnels.steps || [];
    if (n.length) {
        for (var a = null, s = -1, o = 0; o < n.length; ++o)
            if (n[o].id === e) {
                a = n[o], s = o;
                break
            } if (null !== a) {
                var r = s + 1,
                    l = n.length > r ? n[r] : null;
                if (null !== l) {
                    if ("UPSELL" === a.kind && "DOWNSELL" === l.kind && i) return WebPlatform.Funnels.show(l.funnelId + "|" + l.id, t);
                    for (var c = "UPSELL" === a.kind || "DOWNSELL" === a.kind; null !== l && (!c && "UPSELL" === l.kind || "DOWNSELL" === l.kind);) ++r, l = n.length > r ? n[r] : null;
                    if (null !== l) return WebPlatform.Funnels.show(l.funnelId + "|" + l.id, t)
                }
            }
    }
}, WebPlatform.Funnels.tryShowNextUpsell = function (e, t) {
    var i = WebPlatform.Funnels.steps || [];
    if (i.length) {
        for (var n = null, a = -1, s = 0; s < i.length; ++s)
            if (i[s].id === e) {
                n = i[s], a = s;
                break
            } if (null !== n) {
                for (var o = a + 1, r = i.length > o ? i[o] : null; null !== r && "DOWNSELL" === r.kind;) ++o, r = i.length > o ? i[o] : null;
                null !== r && "UPSELL" === r.kind ? WebPlatform.Funnels.show(r.funnelId + "|" + r.id) : t()
            } else t()
    }
}, WebPlatform.Funnels.show = function (e, t, i) {
    var n, a = WebPlatform.Funnels.steps || [];
    if (a.length)
        if ("next" === e) {
            if (WebPlatform.Funnels.currentStep) return WebPlatform.Funnels.showNextStepOrDownsell(WebPlatform.Funnels.currentStep.id, t, i);
            var s = window.location.pathname.substring(1).split(/\//g),
                o = decodeURIComponent(s[s.length - 1]);
            1 !== s.length && (2 !== s.length || "" !== s[1]) || decodeURIComponent(s[0]) !== a[0].base && "" !== s[0] || (o = a[0].url);
            for (var r = 0; r < a.length; ++r)
                if (a[r].url === o) return WebPlatform.Funnels.showNextStepOrDownsell(a[r].id, t, i)
        } else {
            if ((s = e.split(/\|/g)).length < 2) return;
            var l = WebPlatform.parse(s[0], -1, !1),
                c = WebPlatform.parse(s[1], -1, !1);
            if (l < 0 || c < 0 || a[0].funnelId !== l) return;
            for (e = null, r = 0; r < a.length; ++r)
                if (a[r].id === c) {
                    e = a[r];
                    break
                } if (null === e) return;
            if ("POPUP" === e.type) WebPlatform.Popups.show({
                id: c,
                funnelId: l
            }, !1, (function () {
                WebPlatform.Funnels.currentStep = e
            }), (n = WebPlatform.Funnels.currentStep, WebPlatform.Funnels.currentStepVariant, function () {
                WebPlatform.Funnels.currentStep = n
            }));
            else {
                var d = WebPlatform.getUrlQueryParameter(window.location.href, "preview"),
                    p = (e.host && e.host === window.location.hostname ? "" : "/" + (e.base || "") + "/") + e.url;
                WebPlatform.lastFormParams && (p += "?" + WebPlatform.lastFormParams), d && (p += (p.indexOf("?") > -1 ? "&" : "?") + "preview=" + d), window.location.href = p
            }
            if (t) return !0
        }
}, WebPlatform.Widgets.Checkout = function (e) {
    if (!WebPlatform.Widgets.shouldRender(e.root)) return null;
    var t, i, n, a = null,
        s = e.id || "cart",
        o = null,
        r = (e.fields || []).indexOf("billing") > -1,
        l = (e.fields || []).indexOf("email") > -1,
        c = e.root,
        d = null,
        p = {},
        u = c.find('div[data-role="addressWrapper"]'),
        h = c.find(".store-policies"),
        f = c.find('[data-role="error-message"]'),
        m = c.find('[data-role="navigation"]'),
        g = m.find('[data-role="next-step"]'),
        v = m.find('[data-role="back"]'),
        b = m.find('[data-role="continue"]'),
        y = c.find(".checkout-summary"),
        w = "customer-info",
        _ = null,
        T = null,
        C = null,
        k = null,
        E = "",
        x = "1-step" === e.layout,
        S = "2-step" === e.layout,
        M = "3-step" === e.layout,
        P = !1,
        I = "card";
    c.data("inFunnel", !!e.funnel);
    var O = c.find('[name="additionalInfo"]');
    O.length > 0 && O.hasClass("with-date") && window.ClientTools && ClientTools.requestResource(resources + "/scripts/jquery-ui.js?v=" + resourcesVersion, resources + "/styles/jquery-ui.min.css?v=" + resourcesVersion, (function () {
        return !!$.datepicker
    }), (function () {
        O.datepicker({
            firstDay: window.weekStartsAtMonday ? 1 : 0,
            dateFormat: WebPlatform.dateFormat
        })
    }));
    var A = function (t) {
        return (t = t || {}).orderId = s, t.products = JSON.stringify(e.products || []), t.funnel = e.funnel, t.funnelStep = e.funnelStep, t.funnelStepVariant = e.funnelStepVariant, t.fields = (e.fields || []).join(","), t
    },
        L = 0,
        D = function () {
            ++L > 1 || (window.ClientTools && ClientTools.showHideAjaxLoadingIndicator(!1), c.addClass("checkout-loading"))
        },
        N = function () {
            --L < 0 && (L = 0), 0 === L && (window.ClientTools && ClientTools.showHideAjaxLoadingIndicator(!0), c.removeClass("checkout-loading"))
        },
        R = function (e) {
            var t = {};
            e.find("input:not(:checkbox), select").each((function () {
                "new_password" !== this.name && "new_password_repeat" !== this.name && "password" !== this.name && (t[this.name] = this.value)
            })), e.find('input[name="useDifferentBillingAddress"]').is(":checked") && (t.useDifferentBillingAddress = !0), e.find('input[name="createAccount"]').is(":checked") && (t.createAccount = !0);
            var i = e.find(o.loginRequired ? '[data-role="member-login"]' : '[data-role="password"]');
            return t.new_password = i.find('[name="new_password"]').val(), t.new_password_repeat = i.find('[name="new_password_repeat"]').val(), t
        },
        W = function (e, t) {
            e.each((function () {
                var e = $(this);
                e.hasClass(t) || e.addClass(t).after('<i class="error-notification fa fa-exclamation-triangle" aria-hidden="true"></i>')
            }))
        },
        F = function (e) {
            e.each((function () {
                var e = $(this),
                    t = e.next();
                t.hasClass("error-notification") && t.remove(), e.removeClass("field-invalid field-with-error")
            }))
        },
        B = function (t, i) {
            if (!o.isSampleOrder && !b.hasClass("disabled")) {
                b.addClass("disabled");
                var n = "",
                    a = t.find('[name="paymentOption"]:checked');
                a.length > 0 && (n = a.val());
                var r = i ? R(i) : null,
                    d = function (e) {
                        ClientTools.resetRecaptcha(c, b), ClientTools.showMessageBox(e, b, "before", !0, 1e4)
                    },
                    u = function (t, a, h) {
                        D();
                        var f = A({
                            method: n,
                            token: t,
                            order_extra: e.extra || "",
                            resubmit: !0 === a
                        });
                        h && ClientTools.mergeUnique(f, h), r && (f.withAddress = !0, $.extend(f, r)), c.removeClass("has-incomplete-items");
                        var m = {
                            action: "completeOrder",
                            method: "post",
                            data: f,
                            onOk: function (t) {
                                var a = t.data,
                                    h = i && f.createAccount && a.member;
                                if (i && F(i.find(".field-with-error")), a.order && (o = a.order, WebPlatform.Store.Orders.set(s, o)), h && (WebPlatform.Members = WebPlatform.Members || {}, WebPlatform.Members.current = a.member, WebPlatform.reportMemberRegistration(t.uid), q(i)), a.message) {
                                    if (b.removeClass("disabled"), "HAS_INCOMPLETE_ITEMS" === a.message) d(WebPlatform.Phrases["err.select_product_variants"]), c.addClass("has-incomplete-items");
                                    else if ("HAS_INVALID_PAYMENT_METHOD" === a.message) d("Selected payment method is not supported for subscriptions!");
                                    else if ("INITIATE_PAYSTACK_PAYMENT" === a.message) {
                                        b.addClass("disabled");
                                        var m = Math.round(100 * o.total),
                                            g = PaystackPop.setup({
                                                key: p.paystackPublicKey,
                                                email: o.customerEmail,
                                                channels: ["card", "ussd", "qr", "mobile_money"],
                                                amount: m,
                                                currency: WebPlatform.Store.currency,
                                                callback: function (e) {
                                                    u(e.reference, !0)
                                                },
                                                onClose: function () {
                                                    b.removeClass("disabled")
                                                }
                                            });
                                        g.openIframe()
                                    } else if ("barclays-init-3ds" === a.message) ! function (e) {
                                        b.addClass("disabled"), D();
                                        var t = e.accessToken,
                                            i = e.deviceDataCollectionUrl,
                                            n = e.flexToken,
                                            a = e.inSandbox ? "https://centinelapistag.cardinalcommerce.com" : "https://centinelapi.cardinalcommerce.com",
                                            s = function (e) {
                                                if (e.origin && e.origin === a) {
                                                    var t = JSON.parse(e.data);
                                                    b.removeClass("disabled"), N(), t && t.Status ? u(n, !0, {
                                                        step: "barclays-submit-payment",
                                                        deviceSessionId: t.SessionId
                                                    }) : d("Unable to collect device data!"), window.removeEventListener("message", s), document.body.removeChild(o), o = null
                                                }
                                            };
                                        window.addEventListener("message", s, !1);
                                        var o = document.createElement("iframe"),
                                            r = "iframe" + WebPlatform.getRandomString(6);
                                        o.src = "about:blank", o.width = o.height = "1", o.style.opacity = "0", o.style.position = "absolute", o.style.zIndex = -1, o.style.display = "none", o.id = r, o.name = r, document.body.appendChild(o);
                                        var l = jQuery('<form class="none" action="' + i + '" method="POST" target="' + r + '"></form>'),
                                            c = jQuery('<input type="hidden" name="JWT" />');
                                        c.val(t), l.append(c), $("body").append(l), l.submit(), l.remove(), l = null
                                    }(a.payload);
                                    else if ("barclays-collect-3ds" === a.message) ! function (e) {
                                        b.addClass("disabled"), D();
                                        var t = e.accessToken,
                                            i = e.flexToken,
                                            n = e.authUrl,
                                            a = e.pareq,
                                            s = 400,
                                            o = 400;
                                        try {
                                            var r = atob(a);
                                            if (r && (r = JSON.parse(r)) && r.challengeWindowSize) switch (r.challengeWindowSize) {
                                                case "01":
                                                    s = 250, o = 400;
                                                    break;
                                                case "02":
                                                    s = 390, o = 400;
                                                    break;
                                                case "03":
                                                    s = 500, o = 600;
                                                    break;
                                                case "04":
                                                    s = 600, o = 400;
                                                    break;
                                                case "05":
                                                    s = $(window).width(), o = $(window).height()
                                            }
                                        } catch (e) {
                                            Log.error(e)
                                        }
                                        var l = "iframe" + WebPlatform.getRandomString(6),
                                            c = '<div class="col20 f-left" style="background: #ffffff"><iframe src="about:blank" id="' + l + '" name="' + l + '" style="width: ' + s + "px; height:" + o + 'px"></iframe></div>';
                                        WebPlatform.Popups.showSimplePopup(c, s, (function (e) {
                                            var s = jQuery('<form class="none" action="' + n + '" method="POST" target="' + l + '"></form>'),
                                                o = jQuery('<input type="hidden" name="JWT" />');
                                            o.val(t), s.append(o), (o = jQuery('<input type="hidden" name="PaReq" />')).val(a);
                                            var r = function (t) {
                                                t.origin && t.origin === window.location.protocol + "//" + window.location.host && (window.removeEventListener("message", r), "barclays-setup-complete" === t.data.event && (b.removeClass("disabled"), N(), e.close(), u(i, !0, {
                                                    step: "barclays-submit-payment",
                                                    threeDStransactionId: t.data.transactionId
                                                })))
                                            };
                                            window.addEventListener("message", r, !1), $("body").append(s), s.submit(), s.remove(), s = null
                                        }), {
                                            showCloseButton: !1
                                        })
                                    }(a.payload);
                                    else if ("stripe" === n && a.payload && a.payload.extra && ("requires_action" === a.message || "requires_payment_method" === a.message)) {
                                        b.addClass("disabled");
                                        var v = a.payload.extra || [],
                                            y = v.length ? v[0] : "",
                                            w = {
                                                payment_method: {
                                                    card: T.elements
                                                }
                                            };
                                        (r && r.name || o.customerName) && (w.payment_method.billing_details = {
                                            name: r && r.name ? r.name : o.customerName
                                        }), D(), T.stripe.confirmCardPayment(y, w).then((function (e) {
                                            N(), e.error ? (Log.error(e.error), message = e.error.message || e.error, d(message), b.removeClass("disabled")) : u(e.paymentIntent.id, !0)
                                        }))
                                    } else d(a.message);
                                    var _ = null;
                                    if (i && a.errors && a.errors.length)
                                        for (var C = 0; C < a.errors.length; ++C) {
                                            var k = i.find('[name="' + a.errors[C] + '"]');
                                            W(k, "field-with-error"), null === _ && (_ = k)
                                        } else if (a.additionalFieldsErrors && a.additionalFieldsErrors.length) {
                                            var E = a.additionalFieldsErrors,
                                                x = c.find(".form-field").not('[data-type="section"]');
                                            for (C = 0; C < E.length; ++C)
                                                if (E[C]) {
                                                    k = x.eq(C);
                                                    W(k, "field-invalid"), null === _ && (_ = k)
                                                }
                                        } k && WebPlatform.scrollIntoView(_.parent())
                                } else {
                                    var S = a.payload,
                                        M = function (t, i) {
                                            WebPlatform.forceCheckoutThankYouPage && (t = WebPlatform.forceCheckoutThankYouPage()), WebPlatform.visitorName = o.customerName, WebPlatform.visitorEmail = o.customerEmail, WebPlatform.Store.reportPurchase(i, o.id, o.items, o.total, "Purchase", WebPlatform.Store.currency, o.customerName, o.customerEmail, o), WebPlatform.delay(80, (function () {
                                                WebPlatform.Store.goToThankYouPage(e.funnelStep, t), toggleDisplay(c.find(".checkout-info"), !1), toggleDisplay(c.find(".checkout-summary"), !1), toggleDisplay(c.find('[data-step="complete"]'), !0)
                                            }))
                                        };
                                    if (S.review) S.cartUpdatedMessage && d(S.cartUpdatedMessage), b.removeClass("disabled");
                                    else if (S.redirect)
                                        if ("stripeConnect" === n) {
                                            D();
                                            var P = o.shippingAddress && o.shippingAddress.country ? o.shippingAddress.country : o.billingAddress && o.billingAddress.country ? o.billingAddress.country : WebPlatform.Store.country.toUpperCase();
                                            "UK" === P && (P = "GB"), "EL" === P && (P = "GR");
                                            var O = {
                                                name: r && r.name ? r.name : o.customerName,
                                                address: {
                                                    country: P
                                                }
                                            };
                                            o.billingAddress && (o.billingAddress.state && (O.address.state = o.billingAddress.state), o.billingAddress.city && (O.address.city = o.billingAddress.city), o.billingAddress.zipCode && (O.address.postal_code = o.billingAddress.zipCode), o.billingAddress.address && (O.address.line1 = o.billingAddress.address), o.billingAddress.address2 && (O.address.line2 = o.billingAddress.address2)), l || (O.email = o.customerEmail);
                                            var L = {
                                                return_url: S.redirect,
                                                payment_method_data: {
                                                    billing_details: O
                                                }
                                            };
                                            if (Log.log("selected method in Stripe: " + I), o.shippingInfoRequired || "afterpay_clearpay" === I) {
                                                var R = {
                                                    name: O.name,
                                                    address: {
                                                        country: P
                                                    }
                                                };
                                                o.shippingInfoRequired && o.shippingAddress && (o.shippingAddress.state && (R.address.state = o.shippingAddress.state), o.shippingAddress.city && (R.address.city = o.shippingAddress.city), o.shippingAddress.zipCode && (R.address.postal_code = o.shippingAddress.zipCode), o.shippingAddress.address && (R.address.line1 = o.shippingAddress.address), o.shippingAddress.address2 && (R.address.line2 = o.shippingAddress.address2)), "afterpay_clearpay" === I && !R.address.state && O.address.state && (R.address = O.address), L.shipping = R
                                            }
                                            T.stripe.confirmPayment({
                                                elements: T.elements,
                                                confirmParams: L
                                            }).then((function (e) {
                                                e.error ? (N(), b.removeClass("disabled"), d(e.error.message || e.error.code || e.error.decline_code)) : e.paymentIntent && WebPlatform.makeClientWebsiteRequest({
                                                    action: "paymentConfirmedByClient",
                                                    method: "post",
                                                    data: A({
                                                        payload: e.paymentIntent.id
                                                    }),
                                                    onOk: function (e) {
                                                        M(e.data.redirect, e.uid)
                                                    }
                                                })
                                            }))
                                        } else if ("paypal" === n || "stripe-ideal" === n || "klarna" === n || "unipay" === n || "mollie" === n || "mercadopago" === n) ! function (e) {
                                            0 === (e = e || "").toLowerCase().trim().indexOf("http") && ClientTools.showLoader(), toggleDisplay(c.find(".checkout-info"), !1), toggleDisplay(c.find(".checkout-summary"), !1), toggleDisplay(c.find('[data-step="complete"]'), !0), window.location.href = e
                                        }(S.redirect);
                                        else if ("twispay" === n) {
                                            var B = $('<div class="hidden"></div>'),
                                                U = $('<form method="POST" action="' + S.redirect + '"></form>');
                                            for (var H in S.data) {
                                                var z = $('<input type="hidden" />').attr("name", H).attr("value", S.data[H]);
                                                U.append(z)
                                            }
                                            B.append(U), $(document.body).append(B), U.submit(), ClientTools.showLoader()
                                        } else if ("payfast" === n) {
                                            var G = "https://" + (p.payfastInSandbox ? "sandbox" : "www") + ".payfast.co.za/eng/process";
                                            B = $('<div class="hidden"></div>'), U = $('<form method="POST" action="' + G + '"></form>');
                                            for (var H in S.data) {
                                                z = $('<input type="hidden" />').attr("name", H).attr("value", S.data[H]);
                                                U.append(z)
                                            }
                                            B.append(U), $(document.body).append(B), U.submit(), ClientTools.showLoader()
                                        } else if ("afterpay" === n) AfterPay.redirect({
                                            token: S.redirect
                                        });
                                        else if ("mobilpay" === n || "mobilpay-btc" === n || "mobilpay-sms" === n) {
                                            B = $('<div class="hidden"></div>');
                                            (U = $('<form method="POST" action="' + S.redirect + '"></form>')).append('<input type="hidden" name="env_key" value="' + S.envKey + '" />'), U.append('<input type="hidden" name="data" value="' + S.data + '" />'), B.append(U), $(document.body).append(B), U.submit(), ClientTools.showLoader()
                                        } else if ("payulatam" === n) {
                                            var j = S.data,
                                                V = !0 === WebPlatform.Store.PayULatamInTestMode;
                                            U = '<form method="post" action="' + (G = V ? "https://sandbox.checkout.payulatam.com/ppp-web-gateway-payu/" : "https://checkout.payulatam.com/ppp-web-gateway-payu/") + '">                       <input name="merchantId"    type="hidden"  value="' + j.merchantId + '" />                       <input name="accountId"     type="hidden"  value="' + j.accountId + '" />                       <input name="description"   type="hidden"  value="' + j.description + '" />                       <input name="referenceCode" type="hidden"  value="' + j.referenceCode + '" />                       <input name="amount"        type="hidden"  value="' + j.amount + '" />                       <input name="tax"           type="hidden"  value="' + j.tax + '" />                       <input name="taxReturnBase" type="hidden"  value="' + j.taxReturnBase + '" />                       <input name="currency"      type="hidden"  value="' + j.currency + '" />                       <input name="signature"     type="hidden"  value="' + j.signature + '" />                       <input name="algorithmSignature" type="hidden"  value="' + j.algorithmSignature + '" />';
                                            V && (U += '<input name="test" type="hidden"  value="1" />'), U += '<input name="buyerFullName" type="hidden"  value="' + j.buyerFullName + '" />                       <input name="buyerEmail"    type="hidden"  value="' + j.buyerEmail + '" />                       <input name="responseUrl"   type="hidden"  value="' + j.responseUrl + '" />                       <input name="confirmationUrl" type="hidden"  value="' + j.confirmationUrl + '" />', j.hasShipping && (U += '<input name="shippingAddress"   type="hidden"  value="' + j.shippingAddress + '" />                           <input name="shippingCity" type="hidden"  value="' + j.shippingCity + '" />                           <input name="shippingCountry" type="hidden"  value="' + j.shippingCountry + '" />'), U += '<input name="Submit" type="submit" value="" />                     </form>', (B = $('<div class="hidden"></div>')).append(U), $(document.body).append(B), B.find("form").submit(), ClientTools.showLoader()
                                        } else M(S.redirect, t.uid);
                                    else M(WebPlatform.Store.baseUrl + "/checkout/completed?m=" + S.method, t.uid)
                                }
                            },
                            always: function () {
                                N()
                            },
                            onNotOk: function (e) {
                                Log.error("Action: " + f.action), b.removeClass("disabled"), d((e || {}).message || "There was an error processing your request!")
                            }
                        },
                            g = c.find('[name="additionalInfo"]'),
                            v = null;
                        if (g.length) "file" === g.attr("type") ? v = g[0].files.length > 0 ? g[0].files[0] : null : f.additionalInfo = g.val();
                        else {
                            var y = c.find(".form-field").not('[data-type="section"]'),
                                w = ClientTools.readFormFields(y);
                            if (w.hasErrors) return b.removeClass("disabled"), void N();
                            f.values = w.values, v = w.file
                        }
                        null === v ? ClientTools.makeWebsiteRequest(m) : WebPlatform.makeClientWebsiteRequestWithFile(m, v)
                    };
                if ("stripe" === n) u("");
                else if ("braintree" === n) b.addClass("disabled"), D(), _.requestPaymentMethod({
                    threeDSecure: {
                        amount: WebPlatform.currToStr(o.total < .1 ? 1 : o.total, "", !0, WebPlatform.Store.currency)
                    }
                }, (function (e, t) {
                    if (N(), b.removeClass("disabled"), e) {
                        var i = ((e.details || {}).originalError || {}).description || "";
                        d((e.message || e) + ("" === i ? "" : " - " + i))
                    } else t.liabilityShifted || !t.liabilityShiftPossible ? (b.removeClass("disabled"), u(t.nonce)) : d("Card authorization failed. Please try again")
                }));
                else if ("2checkout" === n) b.addClass("disabled"), TCO.loadPubKey("production", (function () {
                    var e = {
                        sellerId: p.twocheckoutSellerId,
                        publishableKey: p.twocheckoutPublicKey,
                        ccNo: t.find('input[data-twocheckout="card-number"]').val(),
                        cvv: t.find('input[data-twocheckout="cvc"]').val(),
                        expMonth: t.find('input[data-twocheckout="exp_month"]').val(),
                        expYear: t.find('input[data-twocheckout="exp_year"]').val()
                    };
                    p.twocheckoutInSandbox && (e.demo = "Y"), TCO.requestToken((function (e) {
                        u(e.response.token.token)
                    }), (function (e) {
                        b.removeClass("disabled"), d(e.errorMsg)
                    }), e)
                }));
                else if ("afterpay" === n) AfterPay.init(), u(n);
                else if ("paystack" === n) u("");
                else if ("authorize.net" === n) {
                    var h = t.find('[data-payment="authorize.net"]');
                    (m = WebPlatform.parse(h.find('input[data-type="yyyy"]').val())) < 100 && (m += 2e3);
                    var f = {
                        authData: {
                            clientKey: p.authorizePublicClientKey,
                            apiLoginID: p.authorizeApiLoginId
                        },
                        cardData: {
                            cardNumber: h.find('input[data-type="card-number"]').val(),
                            month: h.find('input[data-type="mm"]').val(),
                            year: m,
                            cardCode: h.find('input[data-type="cvc"]').val()
                        }
                    };
                    window.Accept.dispatchData(f, (function (e) {
                        if ("Error" === e.messages.resultCode) {
                            b.removeClass("disabled");
                            for (var t = (e.messages.message.length, e.messages.message[0].text), i = 0; i < e.messages.message.length; ++i) Log.error("Error auhtorizing payment with Authorize.net: " + e.messages.message[i].code + ": " + e.messages.message[i].text);
                            d(t)
                        } else u(JSON.stringify(e.opaqueData))
                    }))
                } else if ("barclays" === n) {
                    h = t.find('[data-payment="barclays"]');
                    var m, g = WebPlatform.parse(h.find('input[data-type="mm"]').val());
                    (m = WebPlatform.parse(h.find('input[data-type="yyyy"]').val())) < 100 && (m += 2e3);
                    var v = {
                        expirationMonth: "" + (g < 10 ? "0" + g : g),
                        expirationYear: "" + m
                    };
                    C.createToken(v, (function (e, t) {
                        if (e) {
                            Log.error(e);
                            var i = e.message;
                            e.details && e.details.length && e.details[0].message && (i = e.details[0].message), d(i), b.removeClass("disabled")
                        } else u(JSON.stringify(t), !1, {
                            step: "barclays-init-3ds"
                        })
                    }))
                } else "stripeConnect" === n ? u(n, !1, {
                    paymentIntentId: T.paymentIntentId
                }) : u(n)
            }
        },
        U = function () {
            var e = $(this).data("role");
            e !== w && "billing" !== e && ("customer-info" !== e && "billing" !== w || (w = e, Q(), WebPlatform.scrollIntoView(c)))
        },
        H = function () {
            x || (D(), w = M ? "customer-address" === w ? "customer-info" : "customer-address" : "customer-info", Q(), WebPlatform.scrollIntoView(c))
        },
        z = function () {
            x || (M && "customer-info" === w ? function () {
                F(t.find(".field-with-error"));
                var e = function () {
                    w = "customer-address", Q()
                };
                if (P) G(e);
                else {
                    var i = t.find('[name="name"]'),
                        n = t.find('[name="email"]'),
                        a = "" !== i.val().trim(),
                        s = "" !== n.val().trim();
                    a && s ? e() : (f.text(WebPlatform.Phrases["error.fill_required_fields"]), toggleDisplay(f, !0), a || W(i, "field-with-error"), s || W(n, "field-with-error"))
                }
            }() : (! function () {
                if (!o.isSampleOrder) {
                    D();
                    var i = R(t),
                        n = t.find(".form-field").not('[data-type="section"]'),
                        a = ClientTools.readFormFields(n);
                    if (a.hasErrors) N();
                    else {
                        i.values = a.values, i.order_extra = e.extra || "";
                        var r = {
                            action: "orderEnterAddress",
                            method: "post",
                            data: A(i),
                            onOk: function (e) {
                                if (F(t.find(".field-with-error")), toggleDisplay(f, !!e.data.errors), e.data && e.data.message) {
                                    if (e.data.errors)
                                        for (var n = e.data.errors, a = 0; a < n.length; ++a) W(t.find('[name="' + n[a] + '"]'), "field-with-error");
                                    else {
                                        n = e.data.additionalFieldsErrors || [];
                                        var r = t.find(".form-field").not('[data-type="section"]');
                                        for (a = 0; a < n.length; ++a) n[a] && W(r.eq(a), "field-invalid")
                                    }
                                    f.text(e.data.message).removeClass("none"), M && t.find('[data-role="member"] .field-with-error').length && (w = "customer-info", Q()), N()
                                } else w = "billing", i.createAccount && e.data.member && (WebPlatform.Members = WebPlatform.Members || {}, WebPlatform.Members.current = e.data.member, WebPlatform.reportMemberRegistration(e.uid)), o = e.data.order, WebPlatform.Store.Orders.set(s, o), J(), Q()
                            }
                        };
                        a.file ? WebPlatform.makeClientWebsiteRequestWithFile(r, a.file) : WebPlatform.makeClientWebsiteRequest(r)
                    }
                }
            }(), WebPlatform.scrollIntoView(c)))
        },
        G = function (e) {
            F(t.find(".field-with-error")), toggleDisplay(f, !1), D(), WebPlatform.makeClientWebsiteRequest({
                action: "loginMember",
                data: {
                    email: t.find('input[name="email"]').val(),
                    password: t.find('input[name="password"]').val()
                },
                onOk: function (t) {
                    var i = c.find('[data-role="member-login"]').find('[data-role="login-btn"]').find(".error-message");
                    toggleDisplay(i, !!t.data.error), t.data.error ? (i.text(t.data.error).removeClass("none"), N()) : (P = !1, WebPlatform.Members = WebPlatform.Members || {}, WebPlatform.Members.current = t.data.member, WebPlatform.Store.Orders.reset(s), WebPlatform.Store.Orders.get(A({}), (function (t) {
                        t.customerName = (WebPlatform.Members.current || {}).name || "", o = t, e()
                    })))
                }
            })
        },
        q = function (t) {
            var i = !!WebPlatform.Members.current,
                n = t.find('[data-role="member-login"]'),
                a = t.find('[data-role="password"]'),
                s = t.find('input[name="name"]').show();
            if (toggleDisplay(n, !i), toggleDisplay(a, !o.loginRequired && !i && (x || S || M && "customer-info" !== w)), !i) {
                var r = o.loginRequired || (e.fields || []).indexOf("registration") > -1,
                    l = n.find('[data-role="password-fields"]'),
                    c = n.find('[data-role="login-btn"]'),
                    d = c.find('a[data-role="showRegControls"]'),
                    p = c.find('a[data-role="showLoginControls"]'),
                    u = c.find('a[data-role="hideLoginControls"]'),
                    h = c.find(".error-message"),
                    f = n.find('[data-role="prompt-login"]');
                M && toggleDisplay(c.find('a[data-role="login"]'), !1), o.loginRequired ? (a.hide(), l.show(), f.show(), p.hide(), d.show(), u.hide()) : r ? (a.show(), d.hide(), u.show(), p.show(), l.hide(), f.show()) : (a.hide(), l.hide(), f.hide()), c.hide(), t.hasClass("registration-initiated") || (t.addClass("registration-initiated"), t.on("click", 'a[data-role="showRegControls"]', (function () {
                    f.slideDown("fast"), c.slideUp("fast"), l.slideDown("fast"), s.slideDown("fast"), P = !1
                })).on("click", 'a[data-role="hideLoginControls"]', (function () {
                    f.slideDown("fast"), c.slideUp("fast"), h.addClass("none"), l.slideUp("fast"), s.slideDown("fast"), P = !1
                })).on("click", 'a[data-role="showLoginControls"]', (function () {
                    f.slideUp("fast"), c.slideDown("fast"), h.addClass("none"), l.slideUp("fast"), s.slideUp("fast"), P = !0
                })).on("change", 'input[name="createAccount"]', (function () {
                    toggleDisplay(a.find(".password-fields-wrapper"), this.checked, !0)
                })).on("click.checkout", 'a[data-role="login"]', (function () {
                    G((function () {
                        Q()
                    }))
                })).on("keyup.checkout", 'input[name="password"]', (function (e) {
                    13 === e.which && G((function () {
                        Q()
                    }))
                })))
            }
        },
        j = function (e) {
            if (o.shippingAddress)
                for (var t in o.shippingAddress) o.shippingAddress[t] && e.find('input[name="shipping' + WebPlatform.capitalizeFirstLetter(t) + '"]').val(o.shippingAddress[t]);
            if (o.billingAddress)
                for (var t in o.billingAddress) o.billingAddress[t] && e.find('input[name="billing' + WebPlatform.capitalizeFirstLetter(t) + '"]').val(o.billingAddress[t])
        },
        V = function (e, t) {
            var i = e.find(".address-title");
            if (o.shippingInfoRequired ? i.text(i.data("shippingLabel") || WebPlatform.Phrases["label.shipping_address"]) : i.text(i.data("billingLabel") || WebPlatform.Phrases["label.billing_address"]), toggleDisplay(e.find('[data-role="billing-info"]'), o.shippingInfoRequired), q(e), window.ClientTools) {
                var n = o.customerName ? o.customerName : WebPlatform.Members.current ? WebPlatform.Members.current.name : "";
                n || (n = decodeURIComponent(WebPlatform.getUrlQueryParameter(window.location.href, "name")));
                var a = e.find('input[name="name"]'),
                    r = e.find('input[name="email"]');
                n && a.val(n);
                var l = o.customerEmail || (WebPlatform.Members.current ? WebPlatform.Members.current.email : "");
                l || (l = decodeURIComponent(WebPlatform.getUrlQueryParameter(window.location.href, "email"))), l && r.val(l || ""), WebPlatform.Members.current && r.prop("disabled", !0);
                var c = e.find('input[name="useDifferentBillingAddress"]');
                if (o.shippingInfoRequired && c.prop("checked", o.shippingAddress && !ClientTools.isAddressTheSame(o.shippingAddress, o.billingAddress)), e.hasClass("address-initiated")) return j(e), void N();
                e.addClass("address-initiated"), WebPlatform.requestResource(resources + "/scripts/i18n/countries/" + locale + ".js", null, (function () {
                    return window.COUNTRIES && window.COUNTRIES.length
                }), (function () {
                    var i = o.shippingAddress && o.shippingAddress.country ? o.shippingAddress.country : WebPlatform.Store.country.toUpperCase(),
                        n = o.billingAddress && o.billingAddress.country ? o.billingAddress.country : WebPlatform.Store.country.toUpperCase();
                    "EN" === i && (i = "US"), "EN" === n && (n = "US"), j(e), k && k.setCountry(i), ClientTools.bindMemberAddressForm(e, i, n, (function (e, t) {
                        return !o.shippingCountries || 0 === o.shippingCountries.length || "billing" === t || o.shippingCountries.indexOf(e) > -1
                    }), (function (e) {
                        var i = e.attr("name");
                        if ("shippingCountry" === i || "shippingState" === i || "shippingCompanyName" === i || "shippingZipCode" === i || "shippingCompanyId" === i) {
                            var n = e.val();
                            if (!o.isSampleOrder) {
                                var a = function () {
                                    if (k) switch (i) {
                                        case "shippingCountry":
                                            k.setCountry(n.trim());
                                            break;
                                        case "shippingState":
                                            k.setState(n.trim());
                                            break;
                                        case "shippingZipCode":
                                            k.setZip(n.trim())
                                    }
                                };
                                !o.shippingAddress || null === o.shipping && o.shippingOptions && o.shippingOptions.length || "shippingCountry" === i && o.shippingAddress.country !== n || "shippingState" === i && o.shippingAddress.state !== n || "shippingCompanyName" === i && o.shippingAddress.companyName !== n || "shippingCompanyId" === i && o.shippingAddress.companyId !== n ? WebPlatform.makeClientWebsiteRequest({
                                    action: "orderEnterShippingDetails",
                                    method: "post",
                                    data: A({
                                        type: i,
                                        value: n,
                                        updateBillingDetails: !c.is(":checked")
                                    }),
                                    onOk: function (e) {
                                        o = e.data, WebPlatform.Store.Orders.set(s, o), Y(t), a()
                                    }
                                }) : a()
                            }
                        }
                    }));
                    var l = $.debounce(250, (function () {
                        if (!o.isSampleOrder && !WebPlatform.Members.current) {
                            var e = $(this),
                                t = e.val().trim();
                            "" !== t ? WebPlatform.makeClientWebsiteRequest({
                                action: "setOrderEmail",
                                method: "post",
                                data: A({
                                    email: t,
                                    name: a.val()
                                }),
                                onOk: function (t) {
                                    o = t.data, F(e)
                                },
                                onNotOk: function () {
                                    W(e, "field-with-error")
                                }
                            }) : F(e)
                        }
                    }));
                    r.blur(l), N()
                }))
            } else N()
        },
        Y = function (e) {
            var t = o.shippingOptions || [],
                i = e.find('div[data-role="shipping-methods"]');
            toggleDisplay(i.find(".error-message"), 0 === t.length);
            var n = !1;
            i.find(".tick-wrapper").remove(), t.forEach((function (e, t) {
                var a = "";
                o.shipping && o.shipping.countryCode === e.countryCode && o.shipping.order === e.order && (a = "checked", n = !0);
                var s = "";
                ("system" === e.kind || a && e.calculated) && (s = WebPlatform.currToStr(e.cost, WebPlatform.Store.currencySymbol, WebPlatform.Store.currencySymbolAtLeft, WebPlatform.Store.currency));
                var r = $(WebPlatform.escapeFormat('<label class="tick-wrapper col20 f-left" data-role="shipping-option-%kind%">             <input type="radio" name="shippingOption" data-country="%country%" data-order="%order%" data-kind="%kind%" %checked%>             <span><i class="fa fa-truck"></i>%name%</span>             <span class="price"> %price% </span>           </label>', "country", e.countryCode, "order", e.order, "checked", a, "name", e.name, "price", s, "kind", e.kind));
                i.append(r), a && "system" !== e.kind && k && k.renderOption(r, e)
            })), k && k.onShippingOptionsRendered(), n || i.find('input[type="radio"]').eq(0).prop("checked", !0).change()
        },
        K = function (e) {
            if (window.Stripe && e) {
                var t = o.total;
                T && WebPlatform.numberEquals(T.total || 0, t) || (D(), WebPlatform.makeClientWebsiteRequest({
                    action: "getClientPaymentToken",
                    data: A({
                        type: "stripe"
                    }),
                    onOk: function (i) {
                        var n = i.data.token,
                            a = i.data.platformPublishableKey,
                            s = i.data.paymentIntentId;
                        if (null === T && ((T = {}).stripe = Stripe(a, {
                            stripeAccount: p.stripeConnectAccountId
                        })), T.paymentIntentId = s, T.total = t, T.token !== n && (T.elements = null), T.token = n, T.elements) T.elements.fetchUpdates();
                        else {
                            T.elements = T.stripe.elements({
                                appearance: {
                                    theme: "stripe"
                                },
                                clientSecret: n,
                                locale: WebPlatform.getStripeLocale()
                            });
                            var o = {
                                name: "never",
                                address: {
                                    country: "never"
                                }
                            };
                            l || (o.email = "never");
                            var r = T.elements.create("payment", {
                                terms: window.stripeTermsSettings || {
                                    card: "never"
                                },
                                fields: {
                                    billingDetails: o
                                }
                            }),
                                c = e.find(".stripe-ui");
                            r.mount(c[0]), r.on("change", (function (e) {
                                I = ((e || {}).value || {}).type || "card"
                            }))
                        }
                    },
                    always: function () {
                        N()
                    }
                }))
            }
        },
        X = function (t) {
            var i = o.total >= .01;
            t.find(".tick-wrapper").addClass("none");
            var n = !1;
            o.items.forEach((function (e) {
                e.isSubscription && (n = !0)
            }));
            var a = c.find(".recaptcha-target"),
                s = a.length > 0 && !0,
                r = i && !!p.stripeEnabled,
                l = i && !!p.stripeConnectEnabled,
                d = i && p.stripeEnabled && p.stripeIdealEnabled && !n,
                u = i && p.twispayEnabled,
                h = i && p.braintreeEnabled,
                f = i && p.unipayEnabled,
                m = i && p.mollieEnabled && !n,
                g = i && p.authorizeEnabled,
                v = i && p.twocheckoutEnabled && !n,
                b = i && p.payulatamEnabled && !n,
                y = i && p.paypalEnabled && !n,
                w = i && p.klarnaEnabled && !n,
                k = i && p.afterpayEnabled && !n,
                x = i && p.mobilpayEnabled && !n,
                S = x && p.mobilpayBitcoinEnabled && !n,
                M = i && p.paystackEnabled,
                P = i && p.payfastEnabled,
                I = !!p.afterpayInSandbox,
                O = (p.barclaysInSandbox, !!p.authorizeInSandbox),
                L = (p.payfastInSandbox, p.bankEnabled),
                R = i && p.barclaysEnabled,
                W = i && p.mercadopagoEnabled && !n,
                F = (p.mercadopagoInSandbox, i && !p.codEnabled && !L && !r && !l && !p.paypalEnabled && !p.klarnaEnabled && !h && !v && !k && !x && !M && !g && !p.payulatamEnabled && !P && !u && !f && !m && !R && !W);
            if (toggleDisplay(t.find('[data-role="no-methods"]'), F), toggleDisplay(t.find(".payment-mehtods-wrapper"), !F), i) {
                if (toggleDisplay(t.find('[data-payment="no-payment"]'), !1), toggleDisplay(t.find('[data-payment="stripe"]'), r), toggleDisplay(t.find('[data-payment="stripeConnect"]'), l), toggleDisplay(t.find('[data-payment="ideal"]'), d), toggleDisplay(t.find('[data-payment="twispay"]'), u), toggleDisplay(t.find('[data-payment="unipay"]'), f), toggleDisplay(t.find('[data-payment="mollie"]'), m), toggleDisplay(t.find('[data-payment="braintree"]'), h), toggleDisplay(t.find('[data-payment="authorize.net"]'), g), toggleDisplay(t.find('[data-payment="2checkout"]'), v), toggleDisplay(t.find('[data-payment="payulatam"]'), b), toggleDisplay(t.find('[data-payment="paypal"]'), y), toggleDisplay(t.find('[data-payment="klarna"]'), w), toggleDisplay(t.find('[data-payment="afterpay"]'), k), toggleDisplay(t.find('[data-payment="mobilpay"]'), x), toggleDisplay(t.find('[data-payment="mobilpay-btc"]'), S), toggleDisplay(t.find('[data-payment="paystack"]'), M), toggleDisplay(t.find('[data-payment="payfast"]'), P), toggleDisplay(t.find('[data-payment="barclays"]'), R), toggleDisplay(t.find('[data-payment="cod"]'), p.codEnabled), toggleDisplay(t.find('[data-payment="bank"]'), L), toggleDisplay(t.find('[data-payment="mercadopago"]'), W), p.codEnabled) {
                    var B = t.find('[data-payment="cod"]');
                    B.find('[data-role="button-label"]').text(p.codLabel || WebPlatform.Phrases["label.cod"]);
                    var U = B.find('[data-role="codInfo"]');
                    toggleDisplay(U, p.codInfo), p.codInfo && U.text(p.codInfo)
                }
                if (L) {
                    var H = t.find('[data-payment="bank"]');
                    H.find('[data-role="button-label"]').text(p.bankLabel || WebPlatform.Phrases["label.bank"]);
                    var z = H.find('[data-role="bankInfo"]');
                    toggleDisplay(z, L), p.bankInfo && z.text(p.bankInfo)
                }
            } else toggleDisplay(t.find('[data-payment="no-payment"]'), !0);
            var G = t.find(".payment-mehtods-wrapper .tick-wrapper").not(".none"),
                $ = G.find('input[name="paymentOption"]:checked');
            if (E = $.length ? $.val() : G.first().find('input[name="paymentOption"]').prop("checked", !0).val(), (i || s) && window.ClientTools) {
                if ("yes" === t.data("initialized")) return i && p.stripeConnectEnabled && K(), void N();
                t.data("initialized", "yes");
                var q = [];
                (r || l) && q.push({
                    script: "https://js.stripe.com/v3/",
                    check: function () {
                        return !!window.Stripe
                    }
                }), h && q.push({
                    script: "https://js.braintreegateway.com/web/dropin/1.26.1/js/dropin.min.js",
                    check: function () {
                        return window.braintree && window.braintree.dropin
                    }
                }), v && q.push({
                    script: "https://www.2checkout.com/checkout/api/2co.min.js",
                    check: function () {
                        return !!window.TCO
                    }
                }), g && q.push({
                    script: "https://" + (O ? "jstest" : "js") + ".authorize.net/v1/Accept.js",
                    check: function () {
                        return !!window.Accept
                    }
                }), k && q.push({
                    script: "https://" + (I ? "portal-sandbox" : "portal") + ".afterpay.com/afterpay.js",
                    check: function () {
                        return !!window.AfterPay
                    }
                }), M && q.push({
                    script: "https://js.paystack.co/v1/inline.js",
                    check: function () {
                        return !!window.PaystackPop
                    }
                }), R && q.push({
                    script: "https://flex.cybersource.com/cybersource/assets/microform/0.11/flex-microform.min.js",
                    check: function () {
                        return !!window.Flex
                    }
                }), WebPlatform.requestScripts(q, (function () {
                    if (WebPlatform.Store.reportAddPaymentDetails(o, WebPlatform.Store.currency), s && (D(), ClientTools.setupRecaptcha({
                        ui: a,
                        button: c.find('a[data-role="continue"]'),
                        onLoaded: function (e) {
                            N()
                        }
                    })), l ? K(t) : r && function (e) {
                        D(), (T = {}).stripe = Stripe(p.stripePublishableKey.trim()), T.elements = T.stripe.elements({
                            locale: WebPlatform.getStripeLocale()
                        }).create("card", {
                            hidePostalCode: !1 !== window.stripeElementsHidePostalCode
                        });
                        var t = e.find(".stripe-card-element");
                        T.elements.mount(t[0]), T.elements.addEventListener("change", (function (e) {
                            e.error && WebPlatform.showClientError(e.error.message, 4e3)
                        })), N()
                    }(t), h && (D(), _ = null, null, WebPlatform.makeClientWebsiteRequest({
                        action: "getClientPaymentToken",
                        data: A({
                            type: "braintree"
                        }),
                        onOk: function (e) {
                            var t = {
                                authorization: e.data.token,
                                container: "#" + c.closest(".widget").attr("id") + " .braintree-element",
                                threeDSecure: !0,
                                locale: WebPlatform.getLocaleName(locale)
                            };
                            if (p.braintreePayPalEnabled) {
                                t.paypal = {
                                    flow: "vault"
                                };
                                var i = c.find('[data-role="bt-payment-title"]');
                                i.text(i.text() + " & PayPal")
                            }
                            window.braintree.dropin.create(t, (function (e, t) {
                                if (e) return WebPlatform.showClientError(e.message || e, 4e3), void Log.error(e);
                                _ = t
                            }))
                        },
                        always: function () {
                            N()
                        }
                    })), R && (D(), WebPlatform.makeClientWebsiteRequest({
                        action: "getClientPaymentToken",
                        data: A({
                            type: "barclays"
                        }),
                        onOk: function (t) {
                            var i = t.data.token,
                                n = new Flex(i);
                            C = n.microform({
                                styles: {
                                    input: {
                                        color: "#333"
                                    }
                                }
                            });
                            var a = c.find("#barclays-card-number-" + e.uiId),
                                s = c.find("#barclays-cvv-" + e.uiId),
                                o = C.createField("number", {
                                    placeholder: a.data("placeholder") || "Enter card number"
                                }),
                                r = C.createField("securityCode", {
                                    placeholder: s.data("placeholder") || "â€¢â€¢â€¢"
                                });
                            o.load("#barclays-card-number-" + e.uiId), r.load("#barclays-cvv-" + e.uiId)
                        },
                        always: function () {
                            N()
                        }
                    })), v || g) {
                        var i = t.find(".ccv-pop");
                        t.on("mouseover", ".ccv-info", (function () {
                            i.fadeIn("fast")
                        })).on("mouseout", ".ccv-info", (function () {
                            i.fadeOut("fast")
                        }))
                    }
                    N()
                }))
            } else N()
        },
        Q = function () {
            var a = c.find('div[data-role="steps-breadcrumbs"]');
            toggleDisplay(a, !1), h.find(".active").removeClass("active"), h.find(".visible").removeClass("visible");
            var s = c.find(".checkout-info");
            if (s.addClass("none").off(".checkout"), null === o || 0 === o.items.length) s.filter('[data-step="empty"]').removeClass("none"), N();
            else {
                s.filter('[data-step="info"]').removeClass("none");
                ! function (a, s) {
                    var l = x ? "step-billing" : "step-" + w;
                    c.removeClass("step-customer-info step-customer-address step-billing").addClass(l);
                    var d = o.shippingInfoRequired || !r;
                    if (toggleDisplay(u.children('[data-role="address-part"]'), d), "bottom" === e.summaryPosition) {
                        var p = c.find('[data-role="mid-nav-target"]'),
                            h = c.find('[data-role="below-summary-nav-target"]'),
                            f = c.find('[data-role="summary-nav-target"]');
                        x || "billing" === w ? (e.completeButtonsInSummary ? f.append(m) : h.append(m), m.addClass("mt-15")) : (p.append(m), m.removeClass("mt-15"))
                    }
                    if (toggleDisplay(g, !1), toggleDisplay(v, !1), toggleDisplay(b, !1), toggleDisplay(t, !1), toggleDisplay(i, !1), toggleDisplay(n, !1), toggleDisplay(c.find('[data-role="second-step-items"]'), x || "billing" === w), x) toggleDisplay(b, !0), toggleDisplay(t, !0), V(t, i), o.shippingInfoRequired && (Y(i), toggleDisplay(i, !0)), toggleDisplay(n, !0), X(n);
                    else {
                        toggleDisplay(s, !0);
                        var _ = "customer-info" === w,
                            T = "customer-address" === w;
                        s.find(".checkout-step").removeClass("active").filter('[data-role="' + w + '"]').addClass("active"), toggleDisplay(s.find('[data-role="address"]'), d), _ || T ? (toggleDisplay(g, !0), toggleDisplay(t, !0), toggleDisplay(v, T), "bottom" === e.summaryPosition && toggleDisplay(y, !1), V(t, i), M && (toggleDisplay(t.find('[data-role="member"]'), _), toggleDisplay(u, T))) : (toggleDisplay(v, !0), toggleDisplay(b, !0), toggleDisplay(y, !0), o.shippingInfoRequired && (toggleDisplay(i, !0), Y(i)), toggleDisplay(n, !0), X(n))
                    }
                }(0, a)
            }
        },
        J = $.debounce(150, (function (t, i, n) {
            k && o.shipping && "system" !== o.shipping.kind && ("1-step" !== e.layout && "billing" !== w || WebPlatform.makeClientWebsiteRequest({
                action: "shippingServiceRequest",
                method: "post",
                data: A({
                    provider: k.getType(),
                    type: "price",
                    isCod: "cod" === E,
                    serviceId: t,
                    officeId: i,
                    description: n
                }),
                onOk: function (e) {
                    var t = e.data;
                    WebPlatform.Store.Orders.set(s, t), WebPlatform.Events.trigger(document, WebPlatform.Events.ORDER_CHANGED, {
                        id: s,
                        order: t,
                        withShippingPrice: !0
                    })
                }
            }))
        })),
        Z = function () {
            D();
            var r = e.pick && e.products.length > 1 && "cart" !== e.id,
                l = [];
            c.find('.bump-wrapper[data-default="true"]').each((function () {
                var e = $(this).find("input").data("bump");
                e && l.push(e)
            })), t = c.find('[data-step="address"]').removeClass("none"), i = c.find('[data-step="shipping"]').removeClass("none"), n = c.find('[data-step="billing"]').removeClass("none"), WebPlatform.Store.Orders.reset(s), WebPlatform.Store.Orders.get(A({
                policies: !0,
                paymentOptions: !0,
                pickProducts: r,
                pickProductIds: JSON.stringify(e.products),
                bumps: l.length ? JSON.stringify(l) : null
            }), (function (i, l) {
                if (o = i, d = l.policies || null, p = l.paymentOptions || {}, function () {
                    var e = d && d.termsOfService && "" !== d.termsOfService.trim(),
                        t = d && d.refundPolicy && "" !== d.refundPolicy.trim(),
                        i = d && d.privacyPolicy && "" !== d.privacyPolicy.trim();
                    if (e || t || i) {
                        var n = function (e, t, i, n) {
                            i = h.find('[data-type="' + i + '"]'), t = h.find('[data-type="' + t + '"]'), e ? (i.children().html(n), t.click((function () {
                                var e = !t.hasClass("active");
                                h.find(".active").removeClass("active"), h.find(".visible").removeClass("visible"), e && (t.addClass("active"), i.addClass("visible"))
                            }))) : (t.remove(), i.remove())
                        };
                        n(e, "tos", "tos-target", d.termsOfService.replace(/\n/g, "<br />")), n(i, "privacy", "privacy-target", d.privacyPolicy.replace(/\n/g, "<br />")), n(t, "refunds", "refunds-target", d.refundPolicy.replace(/\n/g, "<br />"))
                    } else h.remove()
                }(), WebPlatform.Store.Orders.bind({
                    id: s,
                    products: e.products,
                    funnelId: e.funnel,
                    funnelStepId: e.funnelStep,
                    funnelStepVariantId: e.funnelStepVariant,
                    pickProducts: r && l.pickProducts && l.pickProducts.length > 0 ? l.pickProducts : []
                }, c), o && o.shippingOptions && o.shippingOptions.length) {
                    o.shippingOptions.filter((e => e.kind.startsWith("speedy-"))).length > 0 && (k = WebPlatform.Widgets.Speedy(a, e.root))
                }
                WebPlatform.Store.reportInitiateCheckout(l.uid, o, WebPlatform.Store.currency), Q(), o && o.items && o.items.forEach((function (e) {
                    e.bump && c.find('input[name="bump' + e.productId + '"]').prop("checked", !0).closest(".bump-wrapper").addClass("bump-active")
                })), window.ClientTools && (ClientTools.setupFormFields(c), ClientTools.loadPhoneInput((function () {
                    var t = c.find("#billingPhone_" + e.uiId),
                        i = c.find("#shippingPhone_" + e.uiId);
                    t.length && PhoneInput.wrap(t[0]), i.length && PhoneInput.wrap(i[0])
                }))), c.on("change", ".bump-wrapper input", (function () {
                    if (!o.isSampleOrder) {
                        var e = $(this),
                            t = e.is(":checked"),
                            i = e.data("bump");
                        o.total;
                        WebPlatform.makeClientWebsiteRequest({
                            action: "setOrderBump",
                            data: A({
                                product: i,
                                add: t
                            }),
                            onOk: function (i) {
                                var n = i.data;
                                WebPlatform.Store.Orders.set(s, n), WebPlatform.Events.trigger(document, WebPlatform.Events.ORDER_CHANGED, {
                                    id: s,
                                    order: n
                                }), e.closest(".bump-wrapper")[t ? "addClass" : "removeClass"]("bump-active")
                            }
                        })
                    }
                })), c.on("click", ".variations-update", (function (e) {
                    var t = $(this).closest("[data-index]").data("index");
                    if (!(t < 0)) {
                        if (r && l.pickProducts && l.pickProducts.length)
                            for (var i = 0; i < o.items.length; ++i)
                                if (!o.items[i].bump) {
                                    t = i;
                                    break
                                } var n = o.items[t];
                        n && WebPlatform.Store.showProductInQuickView(n.productId, A(), n, t)
                    }
                })), e.pick && e.pickMultiple && c.on("click", ".checkout-item-cbx.checked", (function (e) {
                    var t = $(e.target);
                    if (!t.closest(".qty").length && !t.closest(".variations-update").length) {
                        e.stopPropagation(), e.preventDefault();
                        var i = $(this).closest("[data-product]").data("product");
                        i < 1 || o.items.length < 2 || WebPlatform.makeClientWebsiteRequest({
                            action: "removeProductFromPredefinedOrder",
                            method: "post",
                            data: A({
                                productId: i
                            }),
                            onOk: function (e) {
                                var t = e.data;
                                WebPlatform.Store.Orders.set(s, t), WebPlatform.Events.trigger(document, WebPlatform.Events.ORDER_CHANGED, {
                                    id: s,
                                    order: t
                                })
                            }
                        })
                    }
                })), c.on("click", ".checkout-item-cbx:not(.checked)", (function (t) {
                    var i = $(t.target);
                    if (!i.closest(".qty").length && !i.closest(".variations-update").length) {
                        t.stopPropagation(), t.preventDefault();
                        var n = $(this).closest("[data-product]").data("product");
                        n < 1 || WebPlatform.Store.addProductToOrder(n, e.pickMultiple ? "add" : "replace", A())
                    }
                })), c.on("change.checkout", 'input[name="shippingOption"]', (function () {
                    if (!o.isSampleOrder) {
                        var e = $(this),
                            t = e.data("country"),
                            i = e.data("order");
                        if (!o.shipping || o.shipping.countryCode !== t || o.shipping.order !== i) {
                            o.total;
                            WebPlatform.makeClientWebsiteRequest({
                                action: "orderSetShippingOption",
                                method: "post",
                                data: A({
                                    country: t,
                                    order: i,
                                    isCod: "cod" === E
                                }),
                                onOk: function (e) {
                                    var t = e.data;
                                    WebPlatform.Store.Orders.set(s, t), WebPlatform.Events.trigger(document, WebPlatform.Events.ORDER_CHANGED, {
                                        id: s,
                                        order: t,
                                        withShippingPrice: !0
                                    })
                                }
                            })
                        }
                    }
                })).on("change.checkout", 'input[name="paymentOption"]', (function () {
                    var e = "cod" === E;
                    E = this.value;
                    var t = "cod" === this.value;
                    k && (e && !t || !e && t) && J()
                })).on("keypress.checkout", 'input[name="shippingPhone"], input[name="billingPhone"]', (function (e) {
                    var t = String.fromCharCode(e.which);
                    if ("01234567890+ ()".indexOf(t) < 0) return !1
                })).on("click.checkout", 'a[data-role="back"]', H).on("click.checkout", 'a[data-role="next-step"]', z).on("click.checkout", ".checkout-step", U).on("click.checkout", 'a[data-role="continue"]', (function () {
                    B(n, x ? t : null)
                })), document.addEventListener(WebPlatform.Events.ORDER_CHANGED, (function (e, t) {
                    if (e.detail.id === s) {
                        var i = e.detail.order,
                            n = !0 !== e.detail.withShippingPrice;
                        o = i, Q(), o.shippingInfoRequired && n && J()
                    }
                }))
            }))
        };
    return {
        _init: function () {
            return a = this, Z(), delete this._init, this
        },
        getOrder: function () {
            return o
        },
        recalculateShippingPrice: J,
        setOrderRequestParams: A,
        clearFieldErrors: F,
        destroy: function () { }
    }._init()
}, WebPlatform.Store.showLoadedProductInQuickView = function (e) {
    mergeUnique(e, {
        product: null,
        activeOrderDetails: null,
        activeOrderItem: null,
        activeOrderItemIdx: -1,
        onAddedToOrder: dummy,
        storeProcess: "",
        noQuantity: !1
    });
    var t = $(".quick-view-overlay"),
        i = function (e, n) {
            return t.removeClass("animate"), WebPlatform.delay(300, (function () {
                t.removeClass("visible").off(".product"), t = null, n && n()
            })), e && (e.stopPropagation(), e.preventDefault()), i = null, !1
        };
    t.on("click.product", (function (e) {
        $(e.target).hasClass("quick-view-overlay") && i(e)
    })), t.on("click.product", '[data-role="close"]', i), t.addClass("visible"), WebPlatform.delay(20, (function () {
        t.addClass("animate");
        var n = {
            view: t,
            product: e.product,
            populateStaticData: !0,
            activeOrderDetails: e.activeOrderDetails,
            selectedOrderItem: e.activeOrderItem,
            selectedOrderItemIdx: e.activeOrderItemIdx,
            storeProcess: e.storeProcess,
            noQuantity: e.noQuantity,
            onAddedToCart: function () {
                var t = function () {
                    e.onAddedToOrder && e.onAddedToOrder()
                };
                i ? i(null, t) : t()
            }
        };
        e.onOptionSelected && (n.onOptionSelected = e.onOptionSelected), isUndefined(e.forcePrice) || (n.forcePrice = e.forcePrice), WebPlatform.Store.showProductDetailsInView(n)
    }))
}, WebPlatform.Store.showProductInQuickView = function (e, t, i, n, a) {
    isUndefined(n) && (n = -1), WebPlatform.makeClientWebsiteRequest({
        action: "getStoreProduct",
        data: {
            id: e
        },
        onOk: function (e) {
            WebPlatform.Store.showLoadedProductInQuickView({
                product: e.data,
                activeOrderDetails: t,
                activeOrderItem: i,
                activeOrderItemIdx: n,
                onAddedToOrder: a
            })
        }
    })
}, WebPlatform.Store.renderProduct = function (e, t, i) {
    (i = i || {}).view = e, i.product = t, WebPlatform.Store.showProductDetailsInView(i)
}, WebPlatform.Store.showProductPopupDetails = function (e, t, i, n, a, s, o, r) {
    WebPlatform.Store.showProductDetailsInView({
        view: e,
        product: t,
        populateStaticData: i,
        activeOrderDetails: n,
        selectedOrderItem: a,
        selectedOrderItemIdx: s,
        onAddedToCart: o,
        storeProcess: r
    })
}, WebPlatform.Store.showProductDetailsInView = function (e) {
    mergeUnique(e, {
        root: null,
        product: null,
        populateStaticData: !0,
        activeOrderDetails: null,
        selectedOrderItem: null,
        selectedOrderItemIdx: -1,
        onAddedToCart: dummy,
        storeProcess: "",
        noQuantity: !1,
        discountBadgeType: "none",
        showLeftInStock: !1,
        leftInStockThreshold: 0
    });
    var t, i, n, a, s, o, r, l, c = e.view,
        d = e.product,
        p = e.populateStaticData,
        u = e.activeOrderDetails,
        h = e.selectedOrderItem,
        f = e.selectedOrderItemIdx,
        m = e.onAddedToCart,
        g = e.storeProcess,
        v = d.sku,
        b = d.price,
        y = d.salePrice || 0,
        w = d.onSale,
        _ = "" === d.quantity || null === d.quantity ? null : d.quantity,
        T = d.variations || [],
        C = d.combinations,
        k = [],
        E = WebPlatform.Store.hideUnavailableVariations,
        x = null,
        S = !1,
        M = function () {
            var t, p, u, h, f = !1;
            x = {
                productId: d.id,
                quantity: parseInt(c.find('[name="orderQuantity"]').val()) || 1,
                combination: -1,
                variation: [],
                additions: [],
                price: null
            }, c.find(".product-additional-field input").each((function (e, t) {
                x.additions.push({
                    name: d.additions.fields[e].name,
                    value: t.value
                })
            }));
            for (var m = [], g = 0; g < T.length; ++g) {
                var E = T[g],
                    S = I.find('[name="' + E.name.replace('"', '\\"') + '"]').val();
                x.variation.push({
                    name: E.name,
                    value: S
                }), E.advanced && m.push(S)
            }
            if (0 === C.length) t = w ? y : b, p = w ? b : null, h = v, u = _;
            else {
                var M = -1;
                WebPlatform.cartesianProduct(k, (function (e) {
                    ++M;
                    for (var t = 0; t < e.length; ++t)
                        if (e[t] !== m[t]) return !0;
                    return !1
                }));
                var P = C[M];
                t = P.onSale ? P.salePrice : P.price, p = P.onSale ? P.price : null, u = P.quantity, h = P.sku, x.combination = P.combination
            }
            if ((f = null === u || u > 0) ? (i.removeClass("none"), n.addClass("none")) : (i.addClass("none"), n.removeClass("none")), isUndefined(e.forcePrice) || (null !== p && e.forcePrice >= p && (p = null), t = e.forcePrice), null === p) a.addClass("none"), s.addClass("none");
            else if (a.text(WebPlatform.currToStr(p, WebPlatform.Store.currencySymbol, WebPlatform.Store.currencySymbolAtLeft, WebPlatform.Store.currency)).removeClass("none"), e.discountBadgeType && "none" !== e.discountBadgeType) {
                var O = "";
                switch (e.discountBadgeType) {
                    case "text":
                        O = WebPlatform.Phrases["store.label.sale"];
                        break;
                    case "percent":
                        O = "-" + ((p - t) / p * 100).toFixed(0) + "%";
                        break;
                    case "amount":
                        O = WebPlatform.currToStr(t - p, WebPlatform.Store.currencySymbol, WebPlatform.Store.currencySymbolAtLeft, WebPlatform.Store.currency)
                }
                s.text(O).removeClass("none")
            }
            if (l.text(WebPlatform.currToStr(t, WebPlatform.Store.currencySymbol, WebPlatform.Store.currencySymbolAtLeft, WebPlatform.Store.currency)), r.closest(".product-sku")["" === h ? "addClass" : "removeClass"]("none"), r.text(h), x.price = t, f && null !== u && e.showLeftInStock && u < e.leftInStockThreshold) {
                var A = "";
                A = 1 === u ? WebPlatform.Phrases["label.left_in_stock_single"] : WebPlatform.format(WebPlatform.Phrases["label.left_in_stock_multiple"], "x", u), o.text(A).removeClass("none")
            } else o.addClass("none");
            return f
        },
        P = function (e) {
            var i = c.find('[data-role="images"]'),
                n = i.find(".product-main-photo").hasClass("with-lens-zoom");
            if (WebPlatform.removeLightbox(i), null === e || 0 === e.length) i.removeAttr("data-rel").html('<div class="product-main-photo"><img src="' + resources + "/images/product-avatar-big.svg?v=" + resourcesVersion + '" alt=""></div>');
            else {
                var a = i.data("images") || [];
                if (e.length === a.length) {
                    for (var s = !1, o = 0; o < e.length; ++o)
                        if (e[o].name !== a[o].name || e[o].base !== a[o].base) {
                            s = !0;
                            break
                        } if (!s) return
                }
                var r = "",
                    l = "";
                for (o = 0; o < e.length; ++o) {
                    var d = e[o];
                    l += '<div class="none" data-slide="' + getFileFromBase(d.base) + d.name + '?format=webp"></div>', r += "<li>", r += '<a class="product-image ' + (0 === o ? "active" : "") + '" data-name="' + d.name + '" data-base="' + d.base + '">', r += ' <img src="' + getThumbnailsFromBase(d.base, "160x120") + d.name + '?format=webp" alt="" />', r += "</a>", r += "</li>"
                }
                if (l += '<div class="product-main-photo cursor-zoom' + (n ? " with-lens-zoom" : "") + '" data-idx="0"><div class="loader"></div>', l += '<img src="' + getFileFromBase(e[0].base) + e[0].name + '?format=webp" alt="" /></div>', e.length > 1 && (l += '<ul class="product-photo-list">', l += r, l += "</ul>"), i.attr("data-rel", "lightbox"), i.html(l), n) {
                    var p = (t = i.find(".product-main-photo.with-lens-zoom")).children("img");
                    p.ezPlus({
                        zoomType: "lens",
                        lensShape: "round",
                        lensSize: 250,
                        containLensZoom: !0,
                        cursor: "pointer"
                    }), t.data("ez", p.data("ezPlus"))
                } else i.removeClass(".with-tmdp-lightbox"), WebPlatform.refreshLightboxes(i, !0)
            }
            i.data("images", e)
        };
    if (p) {
        c.find('[data-role="title"]').text(d.title), P(d.images);
        for (var I = c.find('[data-role="variations"]'), O = "", A = 0; A < T.length; ++A) {
            var L = T[A],
                D = WebPlatform.escapeHtml(L.name),
                N = null;
            h && h.variation && h.variation[A] && (N = h.variation[A].value), O += '<div class="variation-wrapper" data-name="' + D + '">', O += "<label>" + D + "</label>", O += '<select class="product-variation' + (L.advanced ? " advanced-variation" : "") + '" name="' + D + '">';
            for (var R = 0; R < L.values.length; ++R) {
                var W = WebPlatform.escapeHtml(L.values[R]);
                O += '<option value="' + W + '" ' + (W === N ? 'selected="selected"' : "") + ">" + W + "</option>"
            }
            O += "</select></div>"
        }
        if (d.additions && d.additions.fields && d.additions.fields.length > 0)
            for (A = 0; A < d.additions.fields.length; ++A) {
                var F = null;
                h && h.additions && h.additions[A] && (F = h.additions[A].value);
                var B = d.additions.fields[A];
                O += '<div class="variation-wrapper product-additional-field"><label>' + WebPlatform.escapeHtml(B.name) + '</label><input type="text" ' + (F ? 'value="' + WebPlatform.escapeHtml(F) + '"' : "") + " /></div>"
            }
        I.html(O), h || WebPlatform.Funnels.isInFunnel() && WebPlatform.Funnels.hideProductLinks ? (c.find('[data-add="url"]').removeAttr("href"), c.find(".view-details-btn").css("visibility", "hidden")) : c.find('[data-add="url"]').css("visibility", "visible").attr("href", WebPlatform.Store.baseUrl + "/" + d.url)
    }
    var U = c.find(".product-photo-container");
    if ((t = c.find(".product-main-photo.with-lens-zoom")).length > 0) {
        var H = t.children("img");
        H.ezPlus({
            zoomType: "lens",
            lensShape: "round",
            lensSize: 250,
            containLensZoom: !0,
            cursor: "pointer"
        }), t.data("ez", H.data("ezPlus"))
    }
    c.on("click.product", ".product-image", (function () {
        var e = $(this),
            i = e.parent().index();
        if (!e.hasClass("active")) {
            var n = U.find(".loader"),
                a = e.data("base"),
                s = e.data("name"),
                o = U.find(".product-main-photo");
            o.data("idx", i), o.find("img").attr("src", getFileFromBase(a) + s + "?format=webp"), t.length > 0 && t.data("ez").swaptheimage(getFileFromBase(a) + s + "?format=webp", getFileFromBase(a) + s + "?format=webp"), n.addClass("active-loading"), U.find(".active").removeClass("active"), e.addClass("active"), WebPlatform.onImagesLoaded(o, (function () {
                n.removeClass("active-loading")
            }))
        }
    })), I = c.find(".product-variations"), i = c.find('[data-role="addToCart"]'), n = c.find('[data-role="soldOut"]'), a = c.find('[data-role="oldPrice"]'), s = c.find('[data-role="discount-badge"]'), o = c.find('[data-role="inventory"]'), l = c.find('[data-role="currentPrice"]');
    var z = c.find('[data-role="simple-desc"]');
    z.length && d.description && d.description.simple && d.description.text ? z.removeClass("none").html(d.description.text) : z.addClass("none").empty(), d.subscriptionPeriod ? c.find('[data-role="subPeriod"]').removeClass("none").text("/ " + d.subscriptionPeriod) : c.find('[data-role="subPeriod"]').addClass("none"), r = c.find('[data-role="sku"]');
    for (R = 0; R < T.length; ++R) T[R].advanced && k.push(T[R].values);
    c.on("click.product", '[data-role="addToCart"]', (function () {
        if (null !== x && !i.hasClass("disabled")) {
            if (e.onOptionSelected) return m(), void e.onOptionSelected(x);
            i.addClass("disabled");
            var t = u || {};
            f > -1 && (t.replaceIdx = f), t.orderId = t.orderId || "cart", t.option = JSON.stringify(x), t.process = g, WebPlatform.makeClientWebsiteRequest({
                action: "addToCart",
                data: t,
                onOk: function (e) {
                    var i = e.data;
                    (WebPlatform.Store.reportAddToCart(e.uid, d, x, WebPlatform.Store.currency), S && !u) ? WebPlatform.Funnels.isInFunnel() && WebPlatform.Funnels.show("next", !0) || (window.location.href = (WebPlatform.Store.baseUrl || "/store") + "/checkout") : (WebPlatform.Store.Orders.set(t.orderId, i), "cart" === t.orderId && WebPlatform.Store.updateCartNumber(i.size, !0));
                    WebPlatform.Events.trigger(document, WebPlatform.Events.ORDER_CHANGED, {
                        id: t.orderId,
                        order: i
                    }), m()
                },
                always: function () {
                    i.removeClass("disabled")
                }
            })
        }
    })), c.on("change.product", 'select, input, [name="orderQuantity"]', M), c.on("change.product", "select", $.debounce(100, (function () {
        var e = $(this);
        M(), q(e.attr("name"), e.val())
    }))), c.on("click.product", ".number-pad", (function () {
        var e = $(this),
            t = parseInt(e.data("role")),
            i = e.parent().find("input");
        i.val(Math.max(1, parseInt(i.val()) + t)), M()
    }));
    var G = function (e, t) {
        for (var i = 0; i < T.length; ++i) {
            var n = T[i];
            if (n.name === e) {
                if (n.images && n.images[t] && n.images[t].length) return n.images[t];
                break
            }
        }
        return []
    },
        q = function (e, t) {
            var i = G(e, t);
            if (0 === i.length)
                for (var n = 0; n < x.variation.length; ++n) {
                    var a = x.variation[n];
                    if ((i = G(a.name, a.value)).length) break
                }
            0 === i.length && (i = d.images), P(i)
        };
    if (E) {
        var j = !1;
        for (A = 0; A < C.length && !(j = 0 !== C[A].quantity); ++A);
        E = j
    } (e.noQuantity || d.withSubscription) && c.find(".qty-wrapper").hide(), S = "buy" === (g || i.data("process")), i.text(h ? WebPlatform.Phrases["label.update"] : S ? WebPlatform.Phrases["label.buy_now"] : WebPlatform.Phrases["label.add_to_cart"]);
    let V = c.find('[name="orderQuantity"]');
    if (V.length && V.val(h && h.quantity || 1), E) {
        var Y = I.find(".advanced-variation");
        Y.each((function (e, t) {
            $(this).data("idx", e).change((function () {
                var e = $(this).data("idx");
                if (e + 1 < Y.length) {
                    for (var t = "", i = 0; i <= e; ++i) "" !== t && (t += " â— "), t += Y.eq(i).val();
                    var n;
                    "" !== t && (t += " â— "), (n = Y.eq(e + 1)).find("option").prop("hidden", !0).each((function () {
                        for (var e = t + this.value, i = 0; i < C.length; ++i) 0 !== C[i].quantity && (0 !== C[i].name.indexOf(e + " â— ") && C[i].name !== e || (this.hidden = !1))
                    })), n.find("option:selected").is("[hidden]") && n.find("option:not([hidden])").eq(0).prop("selected", !0), n.change()
                }
                0 !== e || M() || ((n = Y.eq(0)).find("option:selected").prop("hidden", !0), n.find("option:not([hidden])").eq(0).prop("selected", !0), n.change(), M())
            }))
        })), Y.length > 0 && Y.eq(0).change()
    }
    M()
}, WebPlatform.Widgets.Speedy = function (e, t) {
    var i, n, a, s = {
        BG: {
            id: 100,
            requireState: !1,
            addressType: 1,
            siteNomen: 1
        },
        RO: {
            id: 642,
            requireState: !1,
            addressType: 1,
            siteNomen: 1
        },
        GR: {
            id: 300,
            requireState: !1,
            addressType: 2,
            siteNomen: 0
        },
        TR: {
            id: 792,
            requireState: !1,
            addressType: 2,
            siteNomen: 0
        },
        RS: {
            id: 688,
            requireState: !1,
            addressType: 2,
            siteNomen: 0
        },
        GB: {
            id: 826,
            requireState: !1,
            addressType: 2,
            siteNomen: 0
        },
        DE: {
            id: 276,
            requireState: !1,
            addressType: 2,
            siteNomen: 0
        },
        FR: {
            id: 250,
            requireState: !1,
            addressType: 2,
            siteNomen: 0
        },
        IT: {
            id: 380,
            requireState: !1,
            addressType: 2,
            siteNomen: 0
        },
        US: {
            id: 840,
            requireState: !0,
            addressType: 2,
            siteNomen: 0
        }
    },
        o = {},
        r = null,
        l = null,
        c = null,
        d = null,
        p = null,
        u = null,
        h = null,
        f = function () {
            var t = _(),
                i = l && l.id ? l.id : null;
            t.countryId === i && t.siteId === c && t.state === d && t.zip === p || m({
                action: "shippingServiceRequest",
                method: "post",
                data: e.setOrderRequestParams({
                    provider: r.getType(),
                    type: "location",
                    locationType: "setLocation",
                    site: c,
                    country: i,
                    state: d,
                    zip: p
                }),
                onOk: function (t) {
                    var i = e.getOrder();
                    i.extra = i.extra || {}, i.extra.speedy = t.data, e.recalculateShippingPrice()
                }
            })
        },
        m = function (e) {
            var t = WebPlatform.disableAjaxLoader;
            WebPlatform.disableAjaxLoader = !0;
            var i = e.always || dummy;
            e.always = function () {
                WebPlatform.disableAjaxLoader = t, i()
            }, WebPlatform.makeClientWebsiteRequest(e)
        };
    let g = (e, t) => {
        m({
            action: "shippingServiceRequest",
            method: "post",
            data: {
                provider: r.getType(),
                type: "location",
                locationType: "site",
                country: l ? l.id : null,
                name: (e || "").trim()
            },
            onOk: e => {
                t(e.data || [])
            }
        })
    },
        v = e => {
            n.val(e.name), u = {
                x: e.x,
                y: e.y
            }, a.val(e.postCode), c = e.id, (p = e.postCode || "").replace(/ /g, ""), f()
        },
        b = () => {
            i = t.find('[data-step="address"]'), n = i.find('[name="shippingCity"]'), stateUi = i.find('[name="shippingState"]'), a = i.find('[name="shippingZipCode"]'), n.length && (n.autocomplete({
                highlightClass: "ui-autocomplete-match",
                delay: 100,
                minLength: 1,
                autoFocus: !0,
                source: function (e, t) {
                    if (null !== l && 1 === l.siteNomen) {
                        var i = e.term.trim(),
                            n = i.toLowerCase();
                        n.startsWith("Ñ.") || n.startsWith("Ñ ") || n.startsWith("s ") || n.startsWith("s.") ? i = i.substring(2) : (n.startsWith("Ð³Ñ€.") || n.startsWith("Ð³Ñ€ ") || n.startsWith("gr.") || n.startsWith("gr ")) && (i = i.substring(3)), g(i, (e => {
                            e.forEach((e => {
                                let t = "";
                                e.type && (t = e.type + " "), t += e.name, e.postCode && (t += ", " + e.postCode);
                                let i = "Ð¾Ð±Ñ‰. " + e.municipality + ", Ð¾Ð±Ð». " + e.region;
                                e.rowTop = t, e.rowBottom = i, e.value = e.name
                            })), t(e)
                        }))
                    }
                },
                select: function (e, t) {
                    return v(t.item), !1
                }
            }).attr("autocomplete", "no").autocomplete("instance")._renderItem = function (e, t) {
                return $("<li>").append("<div>" + t.rowTop + "<br>" + t.rowBottom + "</div>").appendTo(e)
            }, n.change((() => {
                g(n.val(), (e => {
                    e.length && v(e[0])
                }))
            }))), w()
        },
        y = (i, n) => {
            let a = e.getOrder(),
                s = a.shipping && "system" === a.shipping.kind;
            if (n || !s) {
                let e = t.find(`input[name="shippingOption"][data-kind="${i}"]`);
                e && e.length && !e.is(":checked") && e.prop("checked", !0).trigger("change")
            }
            let o = t.find('input[name="shippingAddress"], input[name="shippingAddress2"]'),
                r = t.find('[data-role="shipping-option-speedy-address"]'),
                l = t.find('[data-role="shipping-option-speedy-office"]');
            "speedy-address" === i || s ? (r.removeClass("none"), l.addClass("none"), o.slideDown("fast"), o.each(((e, t) => {
                "-" === t.value && (t.value = "")
            })), t.find('input[name="deliveryType"][value="speedy-address"]').prop("checked", !0)) : (r.addClass("none"), l.removeClass("none"), o.slideUp("fast"), t.find('input[name="deliveryType"][value="speedy-office"]').prop("checked", !0), o.val("-")), h = i
        },
        w = () => {
            let n = i.find('[name="shippingAddress"]'),
                a = e.getOrder();
            if (a.shippingOptions.filter((e => e.kind && e.kind.startsWith("speedy-"))).length > 1 && !0 !== window.speedyAddressOfficeSelectDisabled) {
                const s = a.shipping && "speedy-office" === a.shipping.kind,
                    o = `<div class="col20 f-left flex flex-row" data-role="delivery-type-picker">\n          <label class="tick-wrapper flex-1">\n            <input type="radio" name="deliveryType" value="speedy-address" ${s ? "" : "checked"} />\n            <span>${WebPlatform.Phrases["label.speedy.to_address_short"]}</span>\n          </label>\n          <label class="tick-wrapper flex-1 ml-10">\n            <input type="radio" name="deliveryType" value="speedy-office" ${s ? "checked" : ""} />\n            <span>${WebPlatform.Phrases["label.speedy.to_office_short"]}</span>\n          </label>\n      </div>`;
                n.before(o), i.find('div[data-role="delivery-type-picker"]').on("change", "input", (i => {
                    e.clearFieldErrors(t.find(".field-with-error")), y(i.target.value, !0)
                })), y(s ? "speedy-office" : "speedy-address", !0)
            }
        };
    var _ = function () {
        return mergeUnique((e.getOrder().extra || {}).speedy || {}, {
            countryId: null,
            siteId: null,
            state: "",
            zip: ""
        })
    },
        T = null,
        C = function (e) {
            "EL" === e && (e = "GR");
            var t = function (e) {
                l = e, _().countryId != e.id && (c = null, d = null, p = null, n.val(""), stateUi.val(""), a.val(""), f())
            };
            ! function (e) {
                T = e, s[e] ? t(s[e]) : m({
                    action: "shippingServiceRequest",
                    method: "post",
                    data: {
                        locationType: "country",
                        provider: r.getType(),
                        type: "location",
                        name: e
                    },
                    onOk: function (i) {
                        var n = i.data;
                        n.length && (s[e] = n[0], T !== e ? C(T) : t(n[0]))
                    }
                })
            }(e)
        };
    return {
        _init: function () {
            return r = this, b(), delete this._init, this
        },
        setCountry: C,
        setState: function (e) {
            (e = (e || "").trim()) !== d && (d = e, l && l.siteNomen || f())
        },
        setZip: function (e) {
            (e = (e || "").trim()) !== p && ((p = e || "").replace(/ /g, ""), l && l.siteNomen || f())
        },
        getCountryId: function () {
            return l && l.id ? l.id : null
        },
        getCityId: function () {
            return c
        },
        renderOption: function (t, i) {
            var n = (i.extra || {}).speedy || {},
                a = _(),
                s = a.siteId,
                c = "speedy-office" === i.kind,
                d = function (o) {
                    var r = '<div class="col20 f-left speedy">',
                        d = !i.calculated && (null === l || 1 === l.siteNomen && 0 === s || 0 === l.siteNomen && "" === a.zip);
                    let p = "X=23.321744&amp;Y=42.697696";
                    u && (p = ["X=", u.x, "&amp;Y=", u.y].join(""));
                    const h = "https://services.speedy.bg/officesmap?selectOfficeButtonCaption=Ð˜Ð·Ð±ÐµÑ€Ð¸&amp;office_locator&amp;lang=bg&amp;dist=3&amp;" + p;
                    if (d) r += '<span class="col20 f-left mt-15">' + WebPlatform.Phrases["label.enter_delivery_address"] + "</span>";
                    else if (c && (r += '<div class="col20 f-left mt-15"><span>' + WebPlatform.Phrases["label.select_speedy_office"] + '</span><input type="text" class="col20 f-left mt-5" placeholder="' + WebPlatform.Phrases["label.select_speedy_office"] + '" name="shippingOffice"></input><a class="color-primary f-left" data-role="pickFromMap" href="' + h + '">Ð˜Ð·Ð±ÐµÑ€ÐµÑ‚Ðµ Ð¾Ñ„Ð¸Ñ Ð¾Ñ‚ ÐºÐ°Ñ€Ñ‚Ð°</a></div>'), !n.fixedPrice) {
                        var f = n.services || [];
                        if (f.length > 1) {
                            var m = '<select class="col20 f-left mt-5" name="shippingService">';
                            0 === f.length ? m += "<option selected disabled readonly>" + WebPlatform.Phrases["label.no_shipping_services"] + "</option>" : f.forEach((function (e) {
                                var t = n.serviceId === e.id ? "selected" : "",
                                    i = WebPlatform.currToStr(e.cost, WebPlatform.Store.currencySymbol, WebPlatform.Store.currencySymbolAtLeft, WebPlatform.Store.currency);
                                m += '<option value="' + e.id + '"' + t + ">" + e.name + " - " + i + "</option>"
                            })), m += "</select>", r += '<div class="col20 f-left mt-15"><span>' + WebPlatform.Phrases["label.select_delivery_type"] + "</span>" + m + "</div>"
                        }
                    }
                    if (r += "</div>", t.find(".speedy").remove(), t.append(r), t.find('select[name="shippingService"]').change((function () {
                        e.recalculateShippingPrice(this.value, null)
                    })), c) {
                        const i = (o = o || []).filter((e => e.id === n.officeId))[0] || null,
                            a = t.find('input[name="shippingOffice"]');
                        if (a.length) {
                            t.find('a[data-role="pickFromMap"]').click((() => {
                                let t = null;
                                const i = '<iframe id="frameOfficeLocator" name="frameOfficeLocator" src="' + h + '" style="background: #eef1f3; height: ' + .8 * $window.height() + 'px" class="col20 f-left"></iframe>',
                                    n = i => {
                                        if (i.origin.indexOf("services.speedy.bg") > -1) {
                                            const n = +i.data;
                                            let a = o.filter((e => e.id === n)),
                                                s = a && a.length ? a[0].name : n;
                                            e.recalculateShippingPrice(null, n, s), t.close()
                                        }
                                    };
                                return WebPlatform.Popups.showSimplePopup(i, .8 * $window.width(), (e => {
                                    t = e, window.addEventListener("message", n, !1)
                                }), {
                                    showCloseButton: !0,
                                    onHide: () => {
                                        t = null, window.removeEventListener("message", n)
                                    }
                                }), !1
                            }));
                            let n = () => {
                                a.select(), a.autocomplete("search", "")
                            };
                            i && a.val(i.name), a.focus(n).click(n), a.keyup((e => {
                                var t = e.keyCode || e.charCode;
                                if (8 === t || 46 === t) return a.val("").autocomplete("search", ""), !1
                            })).autocomplete({
                                minLength: 0,
                                delay: 0,
                                source: (e, t) => {
                                    let i = o;
                                    const n = e.term ? e.term.toLowerCase().trim() : "";
                                    n && (i = o.filter((e => e.name.toLowerCase().indexOf(n) > -1 || e.nameEn.toLowerCase().indexOf(n) > -1 || e.address && e.address.localAddressString && e.address.localAddressString.toLowerCase().indexOf(n) > -1))), i.length ? t(i) : t([{
                                        id: null,
                                        name: WebPlatform.Phrases["label.no_delivery_offices"]
                                    }])
                                },
                                select: (t, i) => (null !== i.item.id && (a.val(i.item.name), e.recalculateShippingPrice(null, i.item.id, i.item.name)), !1)
                            }).autocomplete("instance")._renderItem = (e, t) => {
                                let i = $("<li/>"),
                                    n = $("<div />").text(t.name);
                                if (null === t.id && i.addClass("ui-state-disabled"), i.append(n), t.address && t.address.localAddressString) {
                                    let e = $("<span />").text(t.address.localAddressString);
                                    i.append(e)
                                }
                                return i.appendTo(e)
                            }, a.autocomplete("widget").addClass("speedy-office-autocomplete")
                        }
                    }
                };
            if (c) {
                var p = [];
                s ? (p = o[s]) && p.length > 0 ? d(p) : m({
                    action: "shippingServiceRequest",
                    method: "post",
                    data: {
                        provider: r.getType(),
                        locationType: "office",
                        type: "location",
                        country: a.countryId,
                        site: s
                    },
                    onOk: function (e) {
                        var t = e.data;
                        o[s] = t, d(t)
                    }
                }) : d([])
            } else d(null)
        },
        onShippingOptionsRendered: () => {
            h && y(h)
        },
        getType: function () {
            return "speedy"
        }
    }._init()
},
    function () {
        var e = function (e) {
            var t = this,
                i = function (e) {
                    if (!e.hasClass("initialized")) {
                        e.addClass("initialized"), ClientTools.setupFormFields(e);
                        var t = e.find(".recaptcha-target");
                        if (t.length) {
                            var i = e.find('[data-role="submit"]');
                            ClientTools.setupRecaptcha({
                                ui: t,
                                button: i
                            })
                        }
                    }
                },
                n = function (e) {
                    var n = t.root.find("div[data-tab]").filter('div[data-tab="' + e + '"]');
                    null === t.activeTabUI ? (t.activeTabUI = n, t.activeTab = e, t.activeTabUI.addClass("active").removeClass("none-soft"), i(t.activeTabUI)) : t.activeTabUI.fadeOut(150, (function () {
                        t.activeTab = e, t.activeTabUI.removeClass("active"), t.activeTabUI = n, t.activeTabUI.addClass("active").fadeIn(150), i(t.activeTabUI)
                    }))
                },
                a = function (e) {
                    if (!e.root || !e.root.length) return null;
                    t.options = e, t.root = e.root, t.activeTab = e.activeTab || ClientTools.getUrlQueryParameter(window.location.href, "tab") || "login", t.activeTabUI = null, t.options = null; - 1 === ["login", "recover-password", "register"].indexOf(t.activeTab) && (t.activeTab = "login"), "recover-password" === t.activeTab && ClientTools.getUrlQueryParameter(window.location.href, "t") && (t.activeTab = "recover-password-finish"), t.root.on("click", "a[data-show]", (function () {
                        n($(this).data("show"))
                    })).on("keyup", 'input[name="password"]', (function (e) {
                        13 === e.keyCode && $(this).closest("[data-tab]").find('[data-role="submit"]').trigger("click")
                    })).on("click", 'a[data-role="submit"]', (function () {
                        $(this).hasClass("disabled") || function () {
                            switch (t.activeTab) {
                                case "login":
                                    t.login();
                                    break;
                                case "recover-password":
                                    t.recoverPassword();
                                    break;
                                case "recover-password-finish":
                                    t.newPassword();
                                    break;
                                case "register":
                                    t.register()
                            }
                        }()
                    })), n(t.activeTab)
                };
            return {
                root: null,
                activeTab: null,
                activeTabUI: null,
                options: null,
                _init: function (e) {
                    return t = this, a(e), delete this._init, this
                },
                request: function (e) {
                    var i = e.data || {},
                        n = this.activeTabUI.find(".error-wrapper").empty();
                    i.act = e.action || "";
                    var a = {
                        action: t.getBaseAction(),
                        method: "post",
                        data: i,
                        onOk: function (t) {
                            (e.onSuccess || dummy)(t)
                        },
                        onNotOk: function (t) {
                            e.onError ? e.onError(t) : (ClientTools.showMessageBox(t.message, n, "html", !0), ClientTools.hideLoader())
                        }
                    };
                    ClientTools.showLoader(), e.file ? WebPlatform.makeClientWebsiteRequestWithFile(a, e.file) : WebPlatform.makeClientWebsiteRequest(a)
                },
                login: dummy,
                register: dummy,
                recoverPassword: dummy,
                newPassword: dummy,
                getBaseAction: function () {
                    return "memberRequest"
                },
                showTab: n
            }._init(e)
        };
        WebPlatform.Widgets.MemberAuthForm = function (t) {
            return $.extend(e(t), {
                login: function () {
                    var e = this.activeTabUI.find('input[name="email"]').val(),
                        i = this.activeTabUI.find('input[name="password"]').val(),
                        n = this.activeTabUI.find('input[name="backTo"]').val();
                    ClientTools.showLoader(), this.request({
                        action: "login",
                        data: {
                            email: e,
                            password: i,
                            backTo: n
                        },
                        onSuccess: function (e) {
                            var i = t.nextPage ? t.nextPage : e.data;
                            e.data && t.nextPage && t.nextPage.startsWith("javascript:") && (i = e.data), window.location.href = i || "/"
                        }
                    })
                },
                register: function () {
                    var e = this,
                        i = this.activeTabUI.find('input[name="name"]').val(),
                        n = this.activeTabUI.find('input[name="email"]').val(),
                        a = this.activeTabUI.find('input[name="password"]').val(),
                        s = this.activeTabUI.find('input[name="backTo"]').val(),
                        o = this.activeTabUI.find(".recaptcha-target").data("captcharesponse"),
                        r = this.activeTabUI.find('input[name="formid"]').val(),
                        l = this.activeTabUI.find(".error-wrapper").empty(),
                        c = this.activeTabUI.find(".form-field").not('[data-type="section"]'),
                        d = ClientTools.readFormFields(c);
                    if (!d.hasErrors) {
                        var p = d.values || [];
                        p.length > 2 && p.splice(0, 3), ClientTools.showLoader(), this.request({
                            action: "register",
                            file: d.file,
                            data: {
                                name: i,
                                email: n,
                                password: a,
                                validator: o,
                                backTo: s,
                                values: p,
                                formId: r
                            },
                            onSuccess: function (i) {
                                var n = i.data;
                                n.approve ? (e.showTab("register-approve"), ClientTools.hideLoader()) : (WebPlatform.reportMemberRegistration(i.uid), WebPlatform.delay(80, (function () {
                                    var e = t.nextPage ? t.nextPage : n.redirect;
                                    window.location.href = e || "/"
                                })))
                            },
                            onError: function (t) {
                                ClientTools.showMessageBox(t.message, l, "html", !0), ClientTools.resetRecaptcha(e.activeTabUI, e.activeTabUI.find('a[data-role="submit"]')), ClientTools.hideLoader()
                            }
                        })
                    }
                },
                recoverPassword: function () {
                    var e = this,
                        t = this.activeTabUI.find('input[name="email"]').val(),
                        i = this.activeTabUI.find(".recaptcha-target").data("captcharesponse");
                    this.request({
                        action: "recover-pass",
                        data: {
                            email: t,
                            validator: i
                        },
                        onSuccess: function (t) {
                            ClientTools.hideLoader(), e.showTab("recover-password-message")
                        }
                    })
                },
                newPassword: function () {
                    var e = this,
                        t = this.activeTabUI.find('input[name="password"]').val(),
                        i = this.activeTabUI.find('input[name="repeatPassword"]').val(),
                        n = this.activeTabUI.find('input[name="t"]').val();
                    this.request({
                        action: "recover-pass-set-new",
                        data: {
                            password: t,
                            repeatPassword: i,
                            t: n
                        },
                        onSuccess: function (t) {
                            ClientTools.hideLoader(), e.showTab("recover-password-success")
                        }
                    })
                }
            })
        }, WebPlatform.Widgets.BuilderAuthForm = function (t) {
            return $.extend(e(t), {
                getBaseAction: function () {
                    return "builderAuthRequest"
                },
                login: function () {
                    var e = this.activeTabUI.find('input[name="email"]').val(),
                        i = this.activeTabUI.find('input[name="password"]').val(),
                        n = this.activeTabUI.find('input[name="backto"]').val(),
                        a = this.activeTabUI.find('input[name="wizard"]').val(),
                        s = this.activeTabUI.find('input[name="cc"]').val(),
                        o = this.activeTabUI.find('input[name="category"]').val(),
                        r = this.activeTabUI.find('input[name="sub"]').val();
                    ClientTools.showLoader(), this.request({
                        action: "login",
                        data: {
                            email: e,
                            password: i,
                            backto: n,
                            wizard: a,
                            cc: s,
                            category: o,
                            sub: r
                        },
                        onSuccess: function (e) {
                            var i = e.data;
                            t.nextPage && "/" !== t.nextPage.trim() && "/me/website" !== t.nextPage.trim() && (i = t.nextPage), window.location.href = i || "/me/website"
                        }
                    })
                },
                register: function () {
                    var e = this,
                        i = this.activeTabUI.find('input[name="name"]').val(),
                        n = this.activeTabUI.find('input[name="email"]').val(),
                        a = this.activeTabUI.find('input[name="password"]').val(),
                        s = this.activeTabUI.find('input[name="backto"]').val(),
                        o = this.activeTabUI.find(".recaptcha-target").data("captcharesponse"),
                        r = this.activeTabUI.find('input[name="formid"]').val(),
                        l = this.activeTabUI.find('input[name="template"]').val(),
                        c = this.activeTabUI.find('input[name="funnel"]').val(),
                        d = this.activeTabUI.find('input[name="category"]').val(),
                        p = this.activeTabUI.find('input[name="promo"]').val(),
                        u = this.activeTabUI.find('input[name="locale"]').val(),
                        h = this.activeTabUI.find('input[name="wizard"]').val(),
                        f = this.activeTabUI.find('input[name="cc"]').val(),
                        m = this.activeTabUI.find(".error-wrapper").empty(),
                        g = this.activeTabUI.find(".form-field").not('[data-type="section"]'),
                        v = ClientTools.readFormFields(g);
                    if (!v.hasErrors) {
                        var b = v.values || [];
                        b.length > 2 && b.splice(0, 3), ClientTools.showLoader(), this.request({
                            action: "register",
                            file: v.file,
                            data: {
                                name: i,
                                email: n,
                                password: a,
                                validator: o,
                                backto: s,
                                values: b,
                                formId: r,
                                template: l,
                                funnel: c,
                                category: d,
                                promo: p,
                                locale: u,
                                wizard: h,
                                cc: f,
                                timezone: window.jstz ? window.jstz.determine().name() : ""
                            },
                            onSuccess: function (e) {
                                var i = e.data;
                                t.nextPage && "/" !== t.nextPage && "" !== t.nextPage && (i = t.nextPage), window.location.href = i
                            },
                            onError: function (t) {
                                ClientTools.showMessageBox(t.message, m, "html", !0), ClientTools.resetRecaptcha(e.activeTabUI, e.activeTabUI.find('a[data-role="submit"]')), ClientTools.hideLoader()
                            }
                        })
                    }
                },
                recoverPassword: function () {
                    var e = this,
                        t = this.activeTabUI.find('input[name="email"]').val(),
                        i = this.activeTabUI.find(".recaptcha-target").data("captcharesponse");
                    this.request({
                        action: "recover-pass",
                        data: {
                            email: t,
                            validator: i
                        },
                        onSuccess: function (t) {
                            ClientTools.hideLoader(), e.showTab("recover-password-message")
                        }
                    })
                },
                newPassword: function () {
                    var e = this,
                        t = this.activeTabUI.find('input[name="password"]').val(),
                        i = this.activeTabUI.find('input[name="repeatPassword"]').val(),
                        n = this.activeTabUI.find('input[name="t"]').val();
                    this.request({
                        action: "recover-pass-set-new",
                        data: {
                            password: t,
                            passwordRepeat: i,
                            t: n
                        },
                        onSuccess: function (t) {
                            ClientTools.hideLoader(), e.showTab("recover-password-success")
                        }
                    })
                }
            })
        }
    }(), WebPlatform.Widgets.WebsiteSubscription = function (e) {
        if (!WebPlatform.Widgets.shouldRender(e.root)) return null;
        var t, i, n, a, s, o, r, l = e.root,
            c = l.find('[data-role="error-message"]'),
            d = l.find('input[name="formid"]').val(),
            p = "1-step" === e.layout,
            u = [],
            h = "regular" === e.subscriptionType,
            f = 0,
            m = window.defaultSubscriptionWidgetPeriod || "yearly",
            g = "",
            v = e.applyTax ? WebPlatform.getVatRate(WebPlatform.ipCountryCode || e.invCountry || "US") : 0,
            b = 0,
            y = 0,
            w = "",
            _ = 0,
            T = 0,
            C = p ? null : l.find('[data-role="steps-breadcrumbs"]'),
            k = null,
            E = null,
            x = null,
            S = l.find('[data-role="next-step"]'),
            M = l.find('[data-role="continue"]'),
            P = l.find('[data-role="back"]'),
            I = l.find('[data-role="toggleLoginControls"]'),
            O = !0 !== window.disableSubscriptionWidgetLogin && e.user && e.user.email ? e.user : null,
            A = null === O,
            L = {
                cardType: "",
                nonce: "",
                paypalEmail: "",
                paypalCountry: "",
                lastTwo: ""
            },
            D = 0,
            N = function () {
                ++D > 1 || (window.ClientTools && ClientTools.showHideAjaxLoadingIndicator(!1), l.addClass("checkout-loading"))
            },
            R = function () {
                --D < 0 && (D = 0), 0 === D && (window.ClientTools && ClientTools.showHideAjaxLoadingIndicator(!0), l.removeClass("checkout-loading"))
            },
            W = function (e) {
                c.text(e).removeClass("none")
            },
            F = function () {
                c.addClass("none").text("")
            },
            B = function (t, i) {
                t = t.toUpperCase(), (i = (i || "").trim().toUpperCase().replace(/[^0-9A-Z]/g, "")).length > 7 && 0 === i.indexOf(t) && t !== e.invCountry ? v = 0 : e.applyTax && (v = WebPlatform.getVatRate(t)), U()
            },
            U = function () {
                var t = b;
                T = y * (1 + Math.max(0, v) / 100);
                var i = l.find('[data-role="vatRow"]');
                if (v > 0 && b > .01 ? (t = b * (1 + v / 100), vatAmount = t - b, i.removeClass("none"), i.find('[data-role="vat-percent"]').text(v + "%"), i.find(".subtotal-value").text(WebPlatform.currencyWithCodeToStr(vatAmount, e.currency))) : i.addClass("none"), T < .01) l.find('[data-role="next-billing-details"]').hide();
                else {
                    var n = w + " - " + WebPlatform.currencyWithCodeToStr(T, e.currency);
                    l.find('[data-role="nextBillingInfo"]').text(n), l.find('[data-role="next-billing-details"]').show()
                }
                l.find(".trial-message")[e.trial ? "removeClass" : "addClass"]("none"), l.find(".final-cost")[t < .01 ? "addClass" : "removeClass"]("none"), t >= .01 && l.find('[data-role="total-price"]').text(WebPlatform.currencyWithCodeToStr(t, e.currency)), _ = t
            },
            H = function () {
                var e = [];
                return l.find(".bump-wrapper").removeClass("bump-active").find('input[type="checkbox"]:checked').each((function () {
                    var t = $(this);
                    e.push(WebPlatform.parse($(this).data("bump"))), t.closest(".bump-wrapper").addClass("bump-active")
                })), e
            },
            z = $.debounce(200, (function () {
                N();
                var a = H();
                WebPlatform.makeClientWebsiteRequest({
                    action: "subscriptionWidgetReq",
                    method: "post",
                    data: {
                        widgetAction: "calculatePrice",
                        form: d,
                        bumps: JSON.stringify(a),
                        selectedPeriod: m,
                        selectedPlan: f,
                        selectedDiscount: g
                    },
                    onOk: function (a) {
                        var s = a.data;
                        b = s.totalNoVat, w = WebPlatform.ddmmyyyyDateToStrWithMonth(s.nextBillingDate), y = s.nextBillingPriceNoVat, s.discountCode.toUpperCase() !== g.toUpperCase() && (g = "", window.ClientTools && ClientTools.showError("Invalid Promo Code")), g = s.discountCode;
                        var o = l.find('[data-role="discount-row"]');
                        if (g) {
                            var r = s.basePlanPrice - ("monthly" === m ? s.monthlyPrice : s.yearlyPrice),
                                c = WebPlatform.currencyWithCodeToStr(r, e.currency);
                            l.find(".no-discount-wrapper").addClass("none");
                            var d = WebPlatform.escapeFormat('    <div class="subtotal-wrapper">       <span class="subtotal flex flex-row" style="line-height: 30px">         <a class="remove-discount-btn"><i class="fa fa-trash-o"></i></a>        <span class="col20 f-left">%title%</span>       </span>       <mark class="subtotal-price subtotal-value">%price%</mark>     </div>', "title", g + " (-" + s.discount + "%)", "price", c);
                            o.html(d).removeClass("none")
                        } else l.find(".no-discount-wrapper").removeClass("none"), o.html("").addClass("none");
                        var p = s.bumps || [],
                            v = l.find('[data-role="bump-prices"]');
                        if (p.length) {
                            var _ = "";
                            p.forEach((function (t) {
                                var i = WebPlatform.currencyWithCodeToStr(t.price, e.currency);
                                t.isSubscription && (i += " / " + WebPlatform.Store.subscriptionToStr(t.subscription)), _ += WebPlatform.escapeFormat('    <div class="subtotal-wrapper">       <span class="subtotal">         <span class="col20 f-left">%title%</span>       </span>       <mark class="subtotal-price subtotal-value">%price%</mark>     </div>', "title", t.name, "price", i)
                            })), v.html(_).removeClass("none")
                        } else v.addClass("none");
                        if (h) {
                            for (var T = "", C = 0; C < u.length; ++C)
                                if (u[C].id === f) {
                                    T = u[C].name;
                                    break
                                } t.val(f), i.val(m), n.find('[data-role="plan-name"]').text(T);
                            var k = s.monthlyPrice,
                                E = s.yearlyPrice,
                                x = "";
                            if ("monthly" === m) x = WebPlatform.currencyWithCodeToStr(k, e.currency) + "/" + WebPlatform.Phrases["label.month"];
                            else {
                                var S = Math.round(100 - E / (12 * k) * 100);
                                x = WebPlatform.currencyWithCodeToStr(E, e.currency) + "/" + WebPlatform.Phrases["label.year"], S > 0 && (x += " <span>(" + WebPlatform.Phrases["label.saving"] + " " + S + "%)</span>")
                            }
                            l.find('[data-role="plan-period-price"]').html(x)
                        }
                        U(), J()
                    },
                    always: function () {
                        R()
                    }
                })
            })),
            G = function () {
                var e = l.find(".connected-paypal-account"),
                    t = l.find(".card-form");
                "" === L.nonce ? (toggleDisplay(t, !0), toggleDisplay(e, !1)) : "PayPal" === L.cardType && (e.find('[data-role="paypal-account"]').text(L.paypalEmail), toggleDisplay(e, !0), toggleDisplay(t, !1))
            },
            q = function () {
                null !== E && E.tokenize({
                    flow: "vault"
                }, (function (e, t) {
                    e ? "CUSTOMER" !== e.type && W(e.message || "Unknown error") : (L.cardType = "PayPal", L.nonce = t.nonce, L.paypalEmail = t.details.email, L.paypalCountry = t.details.countryCode, G())
                }))
            },
            j = function () {
                var t = l.find('[data-role="logged-info"]'),
                    i = l.find('[data-role="guest-info"]');
                O ? (t.show(), i.hide(), t.find(".logged-in-name").html(O.name), t.find(".logged-in-email").html(O.email)) : (i.show(), t.hide()),
                    function () {
                        var t = l.find('[data-role="project-select"]');
                        if (O && !e.trial) {
                            var i = function (e) {
                                var i = t.find("select");
                                i.find("option").not(":first").remove();
                                var n = null;
                                e.forEach((function (e) {
                                    null === n && "ACTIVE" !== e.status && (n = e);
                                    var t = $("<option />").attr("value", e.id).text(e.name || "Project");
                                    i.append(t)
                                })), n ? i.val(n.id) : 0 === e.length ? i.val("") : i.val(e[0].id)
                            };
                            O.projects && O.projects.length ? i(O.projects) : WebPlatform.makeClientWebsiteRequest({
                                action: "subscriptionWidgetReq",
                                method: "post",
                                data: {
                                    widgetAction: "listProjects",
                                    form: d
                                },
                                onOk: function (e) {
                                    O.projects = e.data || [], i(O.projects)
                                },
                                onNotOk: function (e) { }
                            }), t.show()
                        } else t.hide()
                    }()
            },
            V = function () {
                N(), Y((function (e) {
                    null === e ? (j(), p || (C.find("a").removeClass("active").eq(1).addClass("active"), l.find('[data-step="final"]').removeClass("none"), l.find('[data-step="initial"]').addClass("none")), F()) : W(e), R()
                }))
            },
            Y = function (e) {
                O ? e(null) : (a = l.find('[name="name"]').val(), s = l.find('[name="email"]').val(), o = l.find('[name="password"]').val(), r = l.find('[name="phone"]').val(), WebPlatform.makeClientWebsiteRequest({
                    action: "subscriptionWidgetReq",
                    method: "post",
                    data: {
                        widgetAction: "checkAccountDetails",
                        form: d,
                        name: a,
                        email: s,
                        password: o,
                        phone: r,
                        login: !A
                    },
                    onOk: function (t) {
                        A || (O = t.data), e(null)
                    },
                    onNotOk: function (t) {
                        e(t.message)
                    }
                }))
            },
            K = function () {
                C.find("a").removeClass("active").eq(0).addClass("active"), l.find('[data-step="initial"]').removeClass("none"), l.find('[data-step="final"]').addClass("none"), F()
            },
            X = function () {
                M.hasClass("disabled") || (N(), a = l.find('[name="name"]').val(), s = l.find('[name="email"]').val(), o = l.find('[name="password"]').val(), r = l.find('[name="phone"]').val(), Z((function () {
                    F();
                    var t = WebPlatform.parse(WebPlatform.getUrlQueryParameter(window.location.href, "template"), 0),
                        i = WebPlatform.parse(WebPlatform.getUrlQueryParameter(window.location.href, "funnel"), 0),
                        n = WebPlatform.getUrlQueryParameter(window.location.href, "cc"),
                        c = WebPlatform.getUrlQueryParameter(window.location.href, "category"),
                        p = window.jstz && jstz.determine().name() || "GMT",
                        u = l.find('[name="companyName"]').val(),
                        h = l.find('[name="companyId"]').val(),
                        b = l.find('[name="country"]').val(),
                        y = l.find('[name="city"]').val(),
                        w = l.find('[name="state"]').val(),
                        T = l.find('[name="zip"]').val(),
                        C = l.find('[name="address"]').val(),
                        k = A ? -1 : l.find('[name="project"]').val() || -1,
                        E = l.find(".form-field").not('[data-type="section"]'),
                        x = ClientTools.readFormFields(E);
                    if (x.hasErrors) R();
                    else {
                        var S = {
                            action: "subscriptionWidgetReq",
                            method: "post",
                            data: {
                                widgetAction: "subscribe",
                                form: d,
                                bumps: JSON.stringify(H()),
                                selectedPeriod: m,
                                selectedPlan: f,
                                selectedDiscount: g,
                                templateId: t,
                                funnelId: i,
                                cc: n,
                                category: c,
                                timezone: p,
                                total: _,
                                vatPercent: v,
                                paymentData: JSON.stringify(L),
                                name: a,
                                email: s,
                                phone: r,
                                password: o,
                                companyName: u,
                                companyId: h,
                                countryCode: b,
                                city: y || "-",
                                state: w,
                                zip: T,
                                address: C || "-",
                                currentFunnel: e.funnel,
                                currentFunnelStep: e.funnelStep,
                                currentFunnelStepVariant: e.funnelStepVariant,
                                locale: WebPlatform.getUrlQueryParameter(window.location.href, "locale") || "",
                                project: k,
                                values: x.values
                            },
                            onOk: function (t) {
                                var i = t.data;
                                if (i.errors && i.errors.length) {
                                    for (var n = l.find(".form-field").not('[data-type="section"]'), o = 0; o < i.errors.length; ++o) i.errors[o] && n.eq(o).addClass("field-invalid").find(".field-error").text(i.errors[o]);
                                    ClientTools.resetRecaptcha(l, M), W(i.message)
                                } else if (i.recalculateTax) v = i.tax, W("We've updated your total price. Please confirm your new price and try again."), ClientTools.resetRecaptcha(l, M), U();
                                else if (i.redirectUrl) {
                                    var r = [{
                                        id: 0,
                                        quantity: 1,
                                        price: _
                                    }];
                                    WebPlatform.visitorName = a, WebPlatform.visitorEmail = s, WebPlatform.Store.reportPurchase(t.uid, (new Date).getTime(), r, _, "NewSubscription", e.currency, a, s), WebPlatform.delay(50, (function () {
                                        window.location = i.redirectUrl, toggleDisplay(l, !1)
                                    }))
                                } else "REQUIRES_ACTION" === i && Q();
                                R()
                            },
                            onNotOk: function (e) {
                                W(e.message), ClientTools.resetRecaptcha(l, M), R()
                            }
                        };
                        x.file ? WebPlatform.makeClientWebsiteRequestWithFile(S, x.file) : WebPlatform.makeClientWebsiteRequest(S)
                    }
                }), (function () {
                    R()
                })))
            },
            Q = function () {
                N();
                var e = "payment" === k.type ? k.instance.confirmPayment : k.instance.confirmSetup,
                    t = O && O.name ? O.name : l.find('[name="name"]').val().trim(),
                    i = O && O.email ? O.email : l.find('[name="email"]').val().trim(),
                    n = {};
                t && (n = {
                    name: t,
                    email: i
                });
                var a = l.find('[name="country"]').val().trim();
                if ("UK" === a ? a = "GB" : "EL" === a && (a = "GR"), a) {
                    n.address = {
                        country: a
                    };
                    var s = l.find('[name="address"]').val();
                    s && (n.address.line1 = s.trim());
                    var o = l.find('[name="zip"]').val();
                    o && (n.address.postal_code = o.trim());
                    var r = l.find('[name="city"]').val();
                    r && (n.address.city = r.trim());
                    var c = l.find('[name="state"]').val();
                    c && (n.address.state = c.trim())
                }
                e({
                    elements: k.elements,
                    confirmParams: {
                        return_url: window.location.protocol + "//" + window.location.host + "/_service/processing?type=stripe-widget",
                        payment_method_data: {
                            billing_details: n
                        }
                    }
                }).then((function (e) {
                    e.error && W(e.error.message || e.error.code || e.error.decline_code || e.error), R()
                }))
            },
            J = $.debounce(250, (function () {
                switch (e.processor) {
                    case "braintree":
                    case "paypal-bt":
                        if (null !== k || null !== E) return;
                        ! function (t) {
                            N();
                            var i = [{
                                script: "https://js.braintreegateway.com/web/3.73.1/js/client.js",
                                check: function () {
                                    return window.braintree && window.braintree.client
                                }
                            }];
                            "braintree" === t && (i.push({
                                script: "https://js.braintreegateway.com/web/3.73.1/js/three-d-secure.min.js",
                                check: function () {
                                    return window.braintree && window.braintree.threeDSecure
                                }
                            }), i.push({
                                script: "https://js.braintreegateway.com/web/3.73.1/js/hosted-fields.js",
                                check: function () {
                                    return window.braintree && window.braintree.hostedFields
                                }
                            })), window.paypalDisabled || i.push({
                                script: "https://js.braintreegateway.com/web/3.73.1/js/paypal.js",
                                check: function () {
                                    return window.braintree && window.braintree.paypal
                                }
                            }), WebPlatform.requestScripts(i, (function () {
                                WebPlatform.makeClientWebsiteRequest({
                                    action: "subscriptionWidgetReq",
                                    method: "post",
                                    data: {
                                        widgetAction: "getBTToken",
                                        form: d
                                    },
                                    onOk: function (i) {
                                        var n = i.data;
                                        window.braintree.client.create({
                                            authorization: n
                                        }, (function (i, n) {
                                            i ? W(i) : ("braintree" === t && (N(), window.braintree.hostedFields.create({
                                                client: n,
                                                styles: {
                                                    input: {
                                                        color: "#898989",
                                                        "font-family": "Arial, sans-serif"
                                                    }
                                                },
                                                fields: {
                                                    number: {
                                                        selector: e.rootSelector + " [data-name='card-number']",
                                                        placeholder: "Card number"
                                                    },
                                                    cvv: {
                                                        selector: e.rootSelector + " [data-name='card-cvv']",
                                                        placeholder: "CVV"
                                                    },
                                                    expirationDate: {
                                                        selector: e.rootSelector + " [data-name='card-expiration']",
                                                        placeholder: "MM/YYYY"
                                                    }
                                                }
                                            }, (function (e, t) {
                                                R(), e ? W(e.message) : WebPlatform.initiateBraintree3DSecureIfEnabled(n, (function (e) {
                                                    k = t, x = e
                                                }), (function (t) {
                                                    W(e.message)
                                                }))
                                            }))), window.paypalDisabled || (N(), window.braintree.paypal.create({
                                                client: n
                                            }, (function (e, t) {
                                                R(), e ? W(e) : E = t
                                            })))), R()
                                        }))
                                    }
                                })
                            })), l.find('[data-role="connectPayPal"]').click(q), l.find('[data-role="disconnectPayPal"]').click((function () {
                                L.cardType = "", L.nonce = "", L.paypalEmail = "", L.paypalCountry = "", G()
                            }))
                        }(e.processor);
                        break;
                    case "stripe":
                        if (null !== k) return;
                        N(), WebPlatform.requestResource("https://js.stripe.com/v3/", null, (function () {
                            return !isUndefined(window.Stripe)
                        }), (function () {
                            (k = {}).stripe = Stripe(e.stripePK), k.elements = k.stripe.elements({
                                locale: WebPlatform.getStripeLocale()
                            }).create("card", {
                                hidePostalCode: !0
                            });
                            var t = l.find('[data-name="card-number"]');
                            k.elements.mount(t[0]), k.elements.addEventListener("change", (function (e) {
                                e.error ? W(e.error.message) : F()
                            })), R()
                        }));
                        break;
                    case "authorize.net":
                        if (null !== k) return;
                        ! function () {
                            N();
                            var t = "https://" + (e.authorizeInSandbox ? "jstest" : "js") + ".authorize.net/v1/Accept.js";
                            WebPlatform.requestResource(t, null, (function () {
                                return !!window.Accept
                            }), (function () {
                                k = {}, l.on("keyup.cardEvents", ".card-cvc", (function (e) {
                                    var t = $(this);
                                    t.val(t.val().replace(/[^0-9]/g, "").substring(0, 4))
                                })), l.on("keyup.cardEvents", ".card-date", (function (e) {
                                    if (9 === (e.which || e.keyCode)) return !1;
                                    var t = $(this),
                                        i = t.val().replace(/[^0-9]/g, "");
                                    i.length > 4 && (i = i.substring(0, 4));
                                    var n = i.length > 2 ? i.substring(2) : "";
                                    i.length > 1 && (i = i.substring(0, 2) + " / " + n), t.val(i), 7 === i.length && t.next().focus()
                                })), R()
                            }))
                        }();
                        break;
                    case "paystack":
                        if (null !== k) return;
                        N(), WebPlatform.requestResource("https://js.paystack.co/v1/inline.js", null, (function () {
                            return !isUndefined(window.PaystackPop)
                        }), (function () {
                            k = {}, R()
                        }));
                        break;
                    case "stripe-connect":
                        t = Math.round(100 * (_ + Number.EPSILON)) / 100, null !== k && k.total === t || (N(), WebPlatform.requestResource("https://js.stripe.com/v3/", null, (function () {
                            return !isUndefined(window.Stripe)
                        }), (function () {
                            WebPlatform.makeClientWebsiteRequest({
                                action: "subscriptionWidgetReq",
                                method: "post",
                                data: {
                                    widgetAction: "getStripeToken",
                                    amount: t < .1 ? 0 : t,
                                    form: d
                                },
                                onOk: function (e) {
                                    var i = e.data.token,
                                        n = e.data.platformPublishableKey,
                                        a = e.data.stripeConnectAccountId;
                                    if (null === k && ((k = {}).instance = Stripe(n, {
                                        stripeAccount: a
                                    })), k.total = t, t > 0 ? ("payment" !== k.type && (k.elements = null), k.type = "payment", k.token !== i && (k.token = i, k.instance.retrievePaymentIntent(i).then((function (e) {
                                        e.paymentIntent && (k.intent = e.paymentIntent.id)
                                    })))) : ("setup" !== k.type && (k.elements = null), k.type = "setup", k.token !== i && (k.token = i, k.instance.retrieveSetupIntent(i).then((function (e) {
                                        e.setupIntent && (k.intent = e.setupIntent.id)
                                    })))), k.elements) k.elements.fetchUpdates();
                                    else {
                                        k.elements = k.instance.elements({
                                            appearance: {
                                                theme: "stripe"
                                            },
                                            clientSecret: i,
                                            locale: WebPlatform.getStripeLocale(window.userLocale)
                                        });
                                        var s = {
                                            name: "never",
                                            email: "never",
                                            address: {
                                                country: window.subscriptionWidgetStripeAskForCountry ? "auto" : "never"
                                            }
                                        };
                                        k.element = k.elements.create("payment", {
                                            terms: window.stripeTermsSettings || {
                                                card: "never"
                                            },
                                            fields: {
                                                billingDetails: s
                                            }
                                        }), k.element.mount(l.find('[data-name="card-area"]')[0])
                                    }
                                    R()
                                }
                            })
                        })))
                }
                var t
            })),
            Z = function (t, i) {
                switch (e.processor) {
                    case "braintree":
                    case "paypal-bt":
                        ! function (t, i) {
                            null !== k || null !== E ? "PayPal" !== L.cardType ? null !== k ? k.tokenize((function (n, a) {
                                if (n) {
                                    var s = null;
                                    switch (n.code) {
                                        case "HOSTED_FIELDS_FIELDS_EMPTY":
                                        case "HOSTED_FIELDS_FIELDS_INVALID":
                                            s = "Please fill all card fields";
                                            break;
                                        default:
                                            s = "There was an error processing your request - " + n.message
                                    }
                                    return W(s), void i()
                                }
                                x ? x.verifyCard({
                                    challengeRequested: !0,
                                    onLookupComplete: function (e, t) {
                                        t()
                                    },
                                    amount: WebPlatform.currToStr(_ < .1 ? T < .1 ? 1 : T : _, "", !0, e.currency),
                                    nonce: a.nonce,
                                    bin: a.details.bin
                                }, (function (e, n) {
                                    if (e) {
                                        var a = ((e.details || {}).originalError || {}).description || "";
                                        return W(e.message + ("" === a ? "" : " - " + a)), void i()
                                    }
                                    n.liabilityShifted || !n.liabilityShiftPossible ? (L.paypalEmail = "", L.paypalCountry = "", L.nonce = n.nonce, L.cardType = n.details.cardType, L.lastTwo = n.details.lastTwo, t()) : (W("Card authorization failed. Please try again"), i())
                                })) : (L.paypalEmail = "", L.paypalCountry = "", L.nonce = a.nonce, L.cardType = a.details.cardType, L.lastTwo = a.details.lastTwo, t())
                            })) : i() : t() : i()
                        }(t, i);
                        break;
                    case "stripe":
                        ! function (e, t) {
                            WebPlatform.makeClientWebsiteRequest({
                                action: "subscriptionWidgetReq",
                                method: "post",
                                data: {
                                    widgetAction: "getStripeToken",
                                    amount: _ < .1 ? 0 : _,
                                    form: d
                                },
                                onOk: function (i) {
                                    if (_ < .1) k.stripe.handleCardSetup(i.data, k.elements, {
                                        payment_method_data: {}
                                    }).then((function (i) {
                                        i.error ? (W(i.error.message || i.error), t()) : (L.paypalEmail = "", L.paypalCountry = "", L.cardType = "", L.lastTwo = "", L.nonce = i.setupIntent.id, F(), e())
                                    }));
                                    else {
                                        var n = {
                                            payment_method: {
                                                card: k.elements
                                            }
                                        },
                                            a = O && O.name ? O.name : l.find('[name="name"]').val().trim(),
                                            s = O && O.email ? O.email : l.find('[name="email"]').val().trim();
                                        a && (n.payment_method.billing_details = {
                                            name: a,
                                            email: s
                                        }), k.stripe.confirmCardPayment(i.data, n).then((function (i) {
                                            i.error ? (W(i.error.message || i.error), t()) : (L.paypalEmail = "", L.paypalCountry = "", L.cardType = "", L.lastTwo = "", L.nonce = i.paymentIntent.id, F(), e())
                                        }))
                                    }
                                }
                            })
                        }(t, i);
                        break;
                    case "authorize.net":
                        ! function (t, i) {
                            var n = l.find(".card-number").val().trim(),
                                a = l.find(".card-date").val().split("/"),
                                s = l.find(".card-cvc").val(),
                                o = a[0].trim(),
                                r = WebPlatform.parse(a.length > 1 ? a[1].trim() : "", 2018);
                            r < 100 && (r += 2e3);
                            var c = {
                                authData: {
                                    clientKey: e.authorizePK,
                                    apiLoginID: e.authorizeApiLoginId
                                },
                                cardData: {
                                    cardNumber: n,
                                    month: o,
                                    year: r,
                                    cardCode: s.trim()
                                }
                            };
                            window.Accept.dispatchData(c, (function (e) {
                                if ("Error" === e.messages.resultCode) {
                                    for (var a = (e.messages.message.length, e.messages.message[0].text), s = 0; s < e.messages.message.length; ++s) Log.error("Error auhtorizing payment with Authorize.net: " + e.messages.message[s].code + ": " + e.messages.message[s].text);
                                    W(a), i()
                                } else L.paypalEmail = "", L.paypalCountry = "", L.nonce = JSON.stringify(e.opaqueData), L.cardType = "card", L.lastTwo = n.length > 1 ? n.substring(n.length - 2, n.length) : "", t()
                            }))
                        }(t, i);
                        break;
                    case "paystack":
                        ! function (t, i) {
                            L.nonce ? t() : Y((function (n) {
                                if (null === n) {
                                    var a = Math.round(100 * _);
                                    PaystackPop.setup({
                                        key: e.paystackPK,
                                        email: s || O.email,
                                        channels: ["card"],
                                        amount: a < 1 ? "USD" === e.currency ? 20 : 5e3 : a,
                                        currency: e.currency,
                                        metadata: {
                                            custom_fields: [{
                                                display_name: "Website Subscription",
                                                variable_name: "website",
                                                value: window.location.href
                                            }]
                                        },
                                        callback: function (e) {
                                            L.paypalEmail = "", L.paypalCountry = "", L.nonce = e.reference, L.cardType = "card", L.lastTwo = "", t()
                                        },
                                        onClose: function () {
                                            L.nonce = null, L.cardType = "", i()
                                        }
                                    }).openIframe()
                                } else W(n), i()
                            }))
                        }(t, i);
                        break;
                    case "stripe-connect":
                        ! function (e, t) {
                            L.nonce = k.intent, e()
                        }(t);
                        break;
                    default:
                        W("Payment processor not supported"), i()
                }
            };
        ! function () {
            if (p ? l.find('[data-step="initial"], [data-step="final"]').removeClass("none") : K(), P.click(K), I.click((function () {
                A = !A, l.find('[data-role="prompt-register"]')[A ? "slideUp" : "slideDown"]("fast"), l.find('[data-role="prompt-login"]')[A ? "slideDown" : "slideUp"]("fast"), l.find('input[name="name"], input[name="phone"]')[A ? "slideDown" : "slideUp"]("fast")
            })), S.click(V), M.click(X), h) {
                var a = l.find(".plan-select");
                n = a.find('[data-role="plan-selected"]'), t = a.find('[data-role="available-plans"]'), i = a.find('[data-role="plan-period"]'), t.find("option").each((function () {
                    var e = $(this);
                    u.push({
                        id: WebPlatform.parse(e.attr("value")),
                        name: e.text()
                    })
                })), i.change((function () {
                    m = "monthly" === this.value.toLowerCase() ? "monthly" : "yearly", z()
                })), u.length < 2 ? a.find(".plan-change").remove() : a.on("click", ".plan-change", (function () {
                    n.addClass("none"), t.removeClass("none")
                })), t.change((function () {
                    f = WebPlatform.parse($(this).val(), 0), t.addClass("none"), n.removeClass("none"), z()
                })), f = WebPlatform.parse(WebPlatform.getUrlQueryParameter(window.location.href, "plan"), u.length > 0 ? u[0].id : 0), m = "monthly" === (WebPlatform.getUrlQueryParameter(window.location.href, "period") || window.defaultSubscriptionWidgetPeriod || "yearly").toLowerCase() ? "monthly" : "yearly", g = WebPlatform.getUrlQueryParameter(window.location.href, "discount");
                for (var s = !1, o = 0; o < u.length; ++o)
                    if (u[o].id === f) {
                        s = !0;
                        break
                    } s || (f = u.length > 0 ? u[0].id : 0), t.val(f)
            }
            var r = l.find('[name="country"]'),
                c = l.find('[name="state"]'),
                d = l.find('[name="companyId"]');
            if (window.ClientTools ? (d.keyup((function () {
                B(r.val(), d.val())
            })), WebPlatform.requestResource(resources + "/scripts/i18n/countries/" + locale + ".js", null, (function () {
                return window.COUNTRIES && window.COUNTRIES.length
            }), (function () {
                WebPlatform.getSessionDetails((t => {
                    ClientTools.bindCountryAndState(r, c, t.ipCountryCode || e.invCountry || "US", (function () {
                        B(r.val(), d.val())
                    }))
                }))
            }))) : B(e.invCountry || "US", d.val()), l.on("click", 'a[data-role="toggle-billing-info"]', (function () {
                l.find('div[data-role="billing-form"]').slideToggle("fast")
            })).on("click", ".promo-code-toggle-btn", (function () {
                l.find(".coupon-code-wrapper").toggleClass("none")
            })).on("click", ".discount-code-btn", (function () {
                var e = l.find(".apply-code-input").val().trim();
                "" !== e && (g = e, z())
            })).on("click", ".remove-discount-btn", (function () {
                g = "", z()
            })).on("keyup", ".apply-code-input", (function (e) {
                13 === e.keyCode && l.find(".discount-code-btn").click()
            })), l.find(".bump-wrapper input").change(z), window.ClientTools) {
                var v = l.find(".recaptcha-target");
                v.length > 0 && ClientTools.setupRecaptcha({
                    ui: v,
                    button: l.find('a[data-step="final"][data-role="continue"]'),
                    onLoaded: function (e) {
                        R()
                    }
                }), ClientTools.setupFormFields(l)
            }
            j(), z()
        }()
    }, WebPlatform.Widgets.WebsiteSubscriptionUpsell = function (e) {
        if (!e.root || !e.root.length) return null;
        var t = e.root,
            i = t.find('input[name="formid"]').val(),
            n = t.find('[data-role="continue"]'),
            a = 0,
            s = function () {
                ClientTools.showLoader(), WebPlatform.makeClientWebsiteRequest({
                    action: "subscriptionWidgetReq",
                    method: "post",
                    data: {
                        widgetAction: "upsell",
                        form: i,
                        project: e.project,
                        currentFunnel: e.funnel,
                        currentFunnelStep: e.funnelStep,
                        currentFunnelStepVariant: e.funnelStepVariant
                    },
                    onOk: function (i) {
                        var n = i.data;
                        if (n.redirectUrl) {
                            window.location.href = n.redirectUrl;
                            var s = [{
                                id: 0,
                                quantity: 1,
                                price: a
                            }];
                            WebPlatform.Store.reportPurchase(i.uid, (new Date).getTime(), s, a, "NewBuilderSubscription", e.currency), WebPlatform.delay(50, (function () {
                                window.location = n.redirectUrl, toggleDisplay(t, !1)
                            }))
                        }
                        ClientTools.showLoader()
                    },
                    onNotOk: function (e) {
                        ClientTools.hideLoader(), ClientTools.showError(e.message)
                    }
                })
            };
        n.click(s), e.project ? Cookies.set("last-subscribed-project", e.project, {
            expires: 7,
            path: "/"
        }) : e.project = Cookies.get("last-subscribed-project") || "", e.projectUrl && $('a[href="/me/website"], a[href="https://' + e.platformUrl + '/me/website"]').attr("href", e.projectUrl), WebPlatform.makeClientWebsiteRequest({
            action: "subscriptionWidgetReq",
            method: "post",
            data: {
                widgetAction: "calculatePrice",
                form: i,
                bumps: JSON.stringify([]),
                selectedPeriod: "yearly",
                selectedPlan: 0
            },
            onOk: function (i) {
                var n = i.data,
                    s = n.totalNoVat,
                    o = WebPlatform.ddmmyyyyDateToStrWithMonth(n.nextBillingDate),
                    r = n.nextBillingPriceNoVat,
                    l = e.tax || 0,
                    c = s;
                nextBillingPrice = r;
                var d = t.find('[data-role="vatRow"]');
                if (l > 0 && s > .01 ? (c = s * (1 + l / 100), vatAmount = c - s, nextBillingPrice = r * (1 + l / 100), d.removeClass("none"), d.find('[data-role="vat-percent"]').text(l + "%"), d.find(".subtotal-value").text(WebPlatform.currencyWithCodeToStr(vatAmount, e.currency))) : (d.addClass("none"), t.find(".final-cost").addClass("none")), nextBillingPrice < .01) t.find('[data-role="next-billing-details"]').hide();
                else {
                    var p = o + " - " + WebPlatform.currencyWithCodeToStr(nextBillingPrice, e.currency);
                    t.find('[data-role="nextBillingInfo"]').text(p), t.find('[data-role="next-billing-details"]').show()
                }
                t.find('[data-role="total-price"]').text(WebPlatform.currencyWithCodeToStr(c, e.currency)), a = c
            }
        })
    };
var $window = null,
    COLORPICKER_PREDEFINED_COLORS = ["#000000", "#3e3e3e", "#6a6a6a", "#898989", "#cccccc", "#e1e1e1", "#ffffff", "#0b662d", "#288543", "#41A85F", "#61BD6D", "#489519", "#64bd2e", "#8bdd59", "#0f227e", "#1b5697", "#2969B0", "#008fde", "#23a3ea", "#4eb3ea", "#8dcaec", "#B8312F", "#E25041", "#EB6B56", "#F37934", "#FBA026", "#FAC51C", "transparent"],
    PIE_COLORS = [
        ["#4eb3ea", "#8dcbec"],
        ["#83c98d", "#c3e4c5"],
        ["#f15858", "#eb8085"],
        ["#04a7b6", "#46cedc"],
        ["#ed6a9b", "#f295b4"],
        ["#2e7c31", "#449e46"],
        ["#b91760", "#e32469"],
        ["#bdc733", "#cbda3f"],
        ["#ffea71", "#fff8c4"],
        ["#0085c8", "#0daaf1"],
        ["#5b69c1", "#9ca8dc"],
        ["#fd7100", "#f8a120"],
        ["#f2a6a7", "#fbcccf"],
        ["#e43f39", "#f14f42"],
        ["#c02223", "#f14d44"],
        ["#fcd230", "#ffea53"],
        ["#dc226f", "#e95c90"],
        ["#7520a1", "#a643b8"],
        ["#7eb340", "#9ecd64"],
        ["#653fb8", "#9275cb"]
    ],
    EMAIL_MARKETING_EMAILS_TO_SUBSCRIBERS_MULTIPLIER = 12,
    ACCOUNT_STATUSES = {
        TRIAL: M.ACCOUNT_STATUS_TRIAL,
        ACTIVE: M.ACCOUNT_STATUS_ACTIVE,
        EXPIRED: M.ACCOUNT_STATUS_EXPIRED,
        DISABLED: M.ACCOUNT_STATUS_DISABLED,
        PROMO: M.ACCOUNT_STATUS_PROMO
    },
    BILLING_TYPES = {
        MONTHLY: M.BILLING_TYPE_MONTHLY,
        YEARLY: M.BILLING_TYPE_YEARLY
    },
    CRM_PROPERTY_TYPE = {
        STRING: "STRING",
        EMAIL: "EMAIL",
        NUMBER: "NUMBER",
        BOOLEAN: "BOOLEAN",
        DATE: "DATE",
        LIST: "LIST",
        COUNTRY: "COUNTRY",
        PHONE: "PHONE"
    },
    CRM_FILTER_TYPE = {
        FIRST_SEEN: 0,
        LAST_SEEN: 1,
        SIGNED_UP: 2,
        TAG: 3,
        MEMBER_GROUP: 4,
        NOTE: 5,
        PROPERTY: 7,
        SUBSCRIBER_LIST: 8,
        ORDER_PROPERTY: 9
    },
    CRM_FIXED_FILTERS = [{
        label: M.FIRST_SEEN,
        icon: "fa-calendar",
        type: CRM_PROPERTY_TYPE.DATE,
        fType: CRM_FILTER_TYPE.FIRST_SEEN,
        id: 0
    }, {
        label: M.SIGNED_UP,
        icon: "fa-calendar",
        type: CRM_PROPERTY_TYPE.DATE,
        fType: CRM_FILTER_TYPE.SIGNED_UP,
        id: 0
    }, {
        label: M.MEMBER_GROUP,
        icon: "fa-list-ul",
        type: CRM_PROPERTY_TYPE.LIST,
        fType: CRM_FILTER_TYPE.MEMBER_GROUP,
        id: 0
    }, {
        label: M.TAG,
        icon: "fa-tag",
        fType: CRM_FILTER_TYPE.TAG,
        id: 0
    }],
    CRM_FILTER_FUNCTION_NAMES = {
        is: M.IS,
        isNot: M.IS_NOT,
        startsWith: M.STARTS_WITH,
        endsWith: M.ENDS_WITH,
        contains: M.CONTAINS,
        containsNot: M.DOESNT_CONTAIN,
        greater: M.GRATER_THAN,
        less: M.LESS_THAN,
        isTrue: M.IS_TRUE,
        isFalse: M.IS_FALSE,
        moreThan: M.CRM_MORE_THAN_DAYS_LEFT,
        exactly: M.CRM_EXACTLY_DAYS_LEFT,
        lessThan: M.CRM_LESS_THAN,
        after: M.AFTER,
        before: M.BEFORE,
        unknown: M.IS_UNKNOWN,
        any: M.HAS_ANY_VALUE
    },
    CRM_MESSAGE_TYPE = {
        INDIVIDUAL: "INDIVIDUAL",
        INDIVIDUAL_SCHEDULED: "INDIVIDUAL_SCHEDULED",
        AUTOMATION: "AUTOMATION",
        CAMPAIGN: "CAMPAIGN"
    },
    CRM_MESSAGE_CHANNEL = {
        WHATSAPP: "WHATSAPP",
        SMS: "SMS",
        VOICE: "VOICE",
        getChannelName: e => {
            switch (e) {
                case CRM_MESSAGE_CHANNEL.WHATSAPP:
                    return M.WHATSAPP;
                case CRM_MESSAGE_CHANNEL.SMS:
                    return M.SMS;
                case CRM_MESSAGE_CHANNEL.VOICE:
                    return M.VOICE
            }
            return "-"
        }
    },
    CRM_MESSAGE_OPTIONS = [{
        html: '<div class="flex align-center custom-list-option"><svg class="mr-15" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368"><path d="M320-520q17 0 28.5-11.5T360-560q0-17-11.5-28.5T320-600q-17 0-28.5 11.5T280-560q0 17 11.5 28.5T320-520Zm160 0q17 0 28.5-11.5T520-560q0-17-11.5-28.5T480-600q-17 0-28.5 11.5T440-560q0 17 11.5 28.5T480-520Zm160 0q17 0 28.5-11.5T680-560q0-17-11.5-28.5T640-600q-17 0-28.5 11.5T600-560q0 17 11.5 28.5T640-520ZM80-80v-720q0-33 23.5-56.5T160-880h640q33 0 56.5 23.5T880-800v480q0 33-23.5 56.5T800-240H240L80-80Zm126-240h594v-480H160v525l46-45Zm-46 0v-480 480Z"></path></svg><span>' + M.SEND_SMS + "</span></div>",
        channel: CRM_MESSAGE_CHANNEL.SMS
    }, {
        label: M.SEND_WHATSAPP,
        html: '<div class="flex align-center custom-list-option"><svg style="width:26px;height:26px;margin-right: 13px;" xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 124 124" viewBox="0 0 124 124" id="whatsapp"><path fill="#000000" fill-rule="evenodd" d="M64,15.8c-25.5,0-46.2,20.7-46.2,46.2c0,9,2.5,17.6,7.4,25.1l-7,15.5 c-0.6,1.4-0.4,3.1,0.6,4.3c0.8,0.9,1.9,1.4,3.1,1.4c0.4,0,0.7,0,1.1-0.1l19.4-5.3c6.7,3.6,14.2,5.5,21.8,5.5 c25.5,0,46.2-20.7,46.2-46.2C110.2,36.5,89.5,15.8,64,15.8z M64,100.2c-6.8,0-13.4-1.8-19.2-5.2c-0.6-0.4-1.3-0.6-2-0.6 c-0.4,0-0.7,0-1.1,0.1L29,98l4.4-9.7c0.6-1.3,0.4-2.9-0.4-4c-4.7-6.5-7.2-14.2-7.2-22.3C25.8,41,43,23.8,64,23.8 c21,0,38.2,17.1,38.2,38.2C102.2,83,85.1,100.2,64,100.2z" clip-rule="evenodd"></path><path fill="#000000" fill-rule="evenodd" d="M81.8,68.9c-1.9-1.2-4.5-2.5-6.7-1.5c-1.7,0.7-2.9,3.5-4,4.9c-0.6,0.7-1.3,0.8-2.2,0.5 c-6.6-2.6-11.6-7-15.2-13c-0.6-0.9-0.5-1.7,0.2-2.6c1.1-1.3,2.5-2.8,2.8-4.5c0.3-1.7-0.5-3.8-1.2-5.3c-0.9-2-1.9-4.8-3.9-5.9 c-1.8-1-4.2-0.5-5.8,0.9c-2.8,2.3-4.2,5.9-4.1,9.4c0,1,0.1,2,0.4,3c0.6,2.3,1.6,4.5,2.9,6.6c0.9,1.6,1.9,3.1,3,4.5 c3.5,4.8,7.9,8.9,12.9,12c2.5,1.5,5.3,2.9,8.1,3.8c3.2,1,6,2.1,9.4,1.5c3.6-0.7,7.1-2.9,8.5-6.3c0.4-1,0.6-2.2,0.4-3.2 C86.6,71.3,83.6,70,81.8,68.9z" clip-rule="evenodd"></path></svg><span>' + M.SEND_WHATSAPP + "</span></div>",
        channel: CRM_MESSAGE_CHANNEL.WHATSAPP
    }, {
        label: M.SEND_VOICE,
        html: '<div class="flex align-center custom-list-option"><svg class="mr-15" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368"><path d="M240-520h60v-80h-60v80Zm100 80h60v-240h-60v240Zm110 80h60v-400h-60v400Zm110-80h60v-240h-60v240Zm100-80h60v-80h-60v80ZM80-80v-720q0-33 23.5-56.5T160-880h640q33 0 56.5 23.5T880-800v480q0 33-23.5 56.5T800-240H240L80-80Zm126-240h594v-480H160v525l46-45Zm-46 0v-480 480Z"></path></svg><span>' + M.SEND_VOICE + "</span></div>",
        channel: CRM_MESSAGE_CHANNEL.VOICE
    }],
    TWILIO_AUTH_TYPE = {
        API_KEY: "API_KEY",
        AUTH_TOKEN: "AUTH_TOKEN"
    },
    TWILIO_SENDER_TYPE = {
        FROM_NUMBER: "FROM_NUMBER",
        MESSAGING_SERVICE: "MESSAGING_SERVICE"
    },
    WHATSAPP_TEMPLATE_STATUS = {
        PENDING: "PENDING",
        APPROVED: "APPROVED",
        REJECTED: "REJECTED",
        PAUSED: "PAUSED",
        DISABLED: "DISABLED"
    },
    getIconForProperty = function (e, t) {
        if (t = !0 === t, e.id < 0) switch (e.id) {
            case -1:
                return t ? "account_circle" : "fa-user-circle";
            case -2:
                return t ? "email" : "fa-at";
            case -3:
                return t ? "call" : "fa-phone";
            case -4:
            case -5:
            case -6:
            case -7:
            case -8:
                return t ? "place" : "fa-map-marker";
            case -9:
                return t ? "business" : "fa-building"
        }
        if ("website" === e.name) return t ? "language" : "fa-globe";
        if ("lead_status" === e.name) return t ? "star" : "fa-star";
        switch (e.type) {
            case CRM_PROPERTY_TYPE.STRING:
                return t ? "title" : "fa-font";
            case CRM_PROPERTY_TYPE.EMAIL:
                return t ? "alternate_email" : "fa-at";
            case CRM_PROPERTY_TYPE.NUMBER:
                return t ? "looks_one" : "fa-circle-o";
            case CRM_PROPERTY_TYPE.BOOLEAN:
                return t ? "check" : "fa-check-circle-o";
            case CRM_PROPERTY_TYPE.DATE:
                return t ? "today" : "fa-calendar";
            case CRM_PROPERTY_TYPE.LIST:
            case CRM_PROPERTY_TYPE.COUNTRY:
                return t ? "list" : "fa-list-ul";
            case CRM_PROPERTY_TYPE.PHONE:
                return t ? "call" : "fa-phone"
        }
    },
    staticResource = function (e) {
        return resources + e + "?v=" + resourcesVersion
    };

function getUserDir() {
    var e = "s/" + staticUserDir;
    return e.endsWith("/") || (e += "/"), e
}

function getUserUploadsDir() {
    return content + getUserDir() + "uploads/"
}

function getTemplateDir(e) {
    return "t/" + e + "/shared/"
}

function convertBaseToTemplateUrl(e, t) {
    return e.replace("/uploads/", "/thumbnails/" + t + "/")
}

function getThumbnailsDir(e) {
    return content + getUserDir() + "thumbnails/" + e + "/"
}

function getTemplateUploadsDir(e) {
    return content + getTemplateDir(e) + "uploads/"
}

function getTemplateThumbnailsDir(e, t) {
    return content + getTemplateDir(e) + "thumbnails/" + t + "/"
}
window.onerror = function (e, t, i, n, a) {
    Log.error("Exception!"), Log.error(a);
    Tools.delay(10, (function () {
        null
    }))
};
var htmlSpecialChars = {
    "&": "&amp;",
    "<": "&lt;",
    ">": "&gt;",
    '"': "&quot;",
    "'": "&#39;",
    "/": "&#x2F;"
};

function $escapeHtml(e) {
    return $("<div></div>").text(e).html()
}
var format = WebPlatform.format,
    escapeHtml = WebPlatform.escapeHtml,
    escapeFormat = WebPlatform.escapeFormat,
    parse = WebPlatform.parse,
    getIndex = function (e, t, i) {
        var n = e.indexOf(t);
        return n < 0 ? i : n
    },
    getById = function (e, t, i) {
        var n = indexOfId(e, t, i);
        return null === n ? null : e[n]
    },
    indexOfId = function (e, t, i) {
        if (null === e || 0 === e.length) return null;
        for (var n = 0; n < e.length; ++n) {
            var a = e[n];
            if (a.id === t || !1 === i && a.id == t) return n
        }
        return null
    },
    get = function (e, t) {
        var i = "string" == typeof t ? window.parse(t, 0, !1) : t;
        return 0 === e.length ? null : i < 0 || i > e.length - 1 ? e[0] : e[i]
    },
    getClassByPattern = function (e, t, i) {
        var n = e.attr("class");
        if (!n) return i || "";
        var a = n.match(t);
        return null === a || 0 === a.length ? i || "" : a[0]
    };

function generateOptions(e, t, i) {
    var n = "";
    if ($.isArray(t))
        for (var a = "string" == typeof i ? getIndex(t, i, 0) : i, s = 0; s < t.length; ++s) {
            var o = s === a ? ' selected="selected" ' : "";
            n += format('<option value="%key%"%selected%>%text%</option>', "key", s, "text", t[s], "selected", o)
        } else
        for (var r in t) {
            o = r === i ? ' selected="selected" ' : "";
            n += format('<option value="%value%"%selected%>%text%</option>', "value", r, "text", t[r], "selected", o)
        }
    e.append(n)
}

function getMargins(e) {
    return {
        top: parse(e.css("margin-top"), 0),
        left: parse(e.css("margin-left"), 0)
    }
}
isUndefined(Templates) && alert("Resources not loaded!"), isUndefined(M) && alert("Messages not loaded!"), isUndefined(T) && alert("Tooltips not loaded!");
var fail = function (e, t, i) {
    Log.error(e), Log.error(t), Log.error(i), CPanel.showError(M.ERR_UPS)
},
    FuncNotImplemented = function () {
        throw M.ERR_NOT_IMPLEMENTED
    };

function calcOffset(e) {
    var t = e.position(),
        i = e.offsetParent().offset();
    return {
        left: t.left + i.left - $window.scrollLeft(),
        top: t.top + i.top - $window.scrollTop()
    }
}
var Tools = {
    _uid: 0,
    _shortcutListeners: [],
    _loadedScripts: [],
    _lastTick: null,
    _debug: !0,
    generateUniqueId: function () {
        return Math.floor(1e3 * Math.random()) + "-" + Tools.getTimestamp()
    },
    getTimestamp: function () {
        return (new Date).getTime()
    },
    escapeIfNeeded: function (e) {
        return e && ((e = e.toString()).indexOf('"') > -1 || e.indexOf("<") > -1) ? WebPlatform.escapeHtml(e) : e
    },
    unescape: function (e) {
        var t = document.createElement("textarea");
        return t.innerHTML = e, t.value
    },
    d: function (e) {
        if (Tools._debug)
            if (null === Tools._lastTick) Tools._lastTick = new Date, Log.log(e);
            else {
                var t = new Date;
                Log.log(e + ": " + (t - Tools._lastTick) + "ms"), Tools._lastTick = t
            }
    },
    showError: function (e) {
        if (isUndefined(e)) window.location = contextPath;
        else {
            Log.error(e);
            try {
                var t = new Error(e).stack.replace(/^[^\(]+?[\n$]/gm, "").replace(/^\s+at\s+/gm, "").replace(/^Object.<anonymous>\s*\(/gm, "{anonymous}()@").split("\n");
                Log.error(t)
            } catch (e) {
                Log.error(e)
            }
            Tools.showWindow({
                title: "",
                icon: Popup.ICON_ERROR,
                width: 350,
                markup: format(Templates.get("errorDialogMarkup"), "message", e),
                buttons: [Button(M.CLOSE, Button.CLASS_MIDDLE_BLUE, closePopup, Button.FLOAT_IGNORE)],
                customClass: Popup.CUSTOM_CLASS_ERROR_DIALOG
            })
        }
    },
    copyToClipboard: function (e) {
        var t = $("<input>");
        $("body").append(t), t.val(e).select();
        try {
            document.execCommand("copy")
        } catch (e) { }
        t.remove()
    },
    parseFloat: function (e, t, i) {
        return i = !0 === i, t = t || 0, e = parseFloat(e), isNaN(e) && (e = t), !i && e < 0 ? t : e
    },
    removeInlineWidth: function (e) {
        1 === e.lenght ? e.attr("style", e.attr("style").replace("-width", "#_#").replace(/width:[ |\d]*(px|%);?/g, "").replace("#_#", "-width")) : e.each((function (e, t) {
            (t = $(t)).attr("style", t.attr("style").replace("-width", "#_#").replace(/width:[ |\d]*(px|%);?/g, "").replace("#_#", "-width"))
        }))
    },
    getInlineStyle: function (e, t, i) {
        if (i = !0 === i, 0 === e.length) return 0;
        t = t || "marginLeft";
        var n = e[0].style[t] || "0%";
        return i ? parse(n, 0, !0) : n
    },
    getPercentValue: function (e, t, i) {
        return (i = i || Math.round)(e * t / 100)
    },
    calcPercent: function (e, t, i, n) {
        return e = e || 0, t = t || 0, i = 0 === i ? 0 : i || 2, n = n || Math.round, 0 === t ? 0 : n(e / (1 * t) * 100 * Math.pow(10, i)) / Math.pow(10, i)
    },
    roundToNearest: function (e, t, i) {
        return t * (i = i || Math.round)(e / t)
    },
    getUniqueId: function () {
        return ++this._uid
    },
    getPortfolioItemThumb: function (e, t) {
        var i = resources + "/images/image-avatar.png";
        return 0 === e.thumb.type ? i = getThumbnailsFromBase(e.thumb.dataBase, t) + e.thumb.data : 1 === e.thumb.type && e.thumb.data.length > 0 && (i = getThumbnailsFromBase(e.thumb.dataBase[0], t) + e.thumb.data[0]), i
    },
    addShortcutListener: function (e, t) {
        isUndefined(e) || isUndefined(t) || Tools._shortcutListeners.push({
            key: e,
            action: t
        })
    },
    removeShortcutListener: function (e) {
        for (var t = 0; t < Tools._shortcutListeners.length; ++t)
            if (Tools._shortcutListeners[t].key === e) return void Tools._shortcutListeners.splice(t, 1)
    },
    removeSingleShortcutListener: function (e, t) {
        for (var i = 0; i < Tools._shortcutListeners.length; ++i)
            if (Tools._shortcutListeners[i].key === e && Tools._shortcutListeners[i].action === t) return void Tools._shortcutListeners.splice(i, 1)
    },
    focusTextEditor: function (e) {
        (e.hasClass("note-editable") ? e : e.find(".note-editable")).focus()
    },
    PAYMENT_METHODS: [{
        type: "stripeConnect",
        image: "/images/stripe.png"
    }, {
        type: "stripe",
        image: "/images/stripe.png"
    }, {
        type: "braintree",
        image: "/images/braintree.png"
    }, {
        type: "twocheckout",
        image: "/images/2checkout.png"
    }, {
        type: "paypal",
        image: "/images/paypal.png"
    }, {
        type: "afterpay",
        image: "/images/afterpay-logo.png"
    }, {
        type: "mobilpay",
        image: "/images/mobilpay-logo.png"
    }, {
        type: "payulatam",
        image: "/images/payulatam.png"
    }, {
        type: "paystack",
        image: "/images/paystack.png"
    }, {
        type: "authorize",
        image: "/images/authorize.net.gif"
    }, {
        type: "payfast",
        image: "/images/payfast.png"
    }, {
        type: "klarna",
        image: "/images/klarna.svg"
    }, {
        type: "twispay",
        image: "/images/twispay.png"
    }, {
        type: "mollie",
        image: "/images/mollie.png"
    }, {
        type: "mercadopago",
        image: "/images/mercadopago.png"
    }, {
        type: "cod",
        image: null,
        text: M.PAYMENT_COD
    }, {
        type: "bank",
        image: null,
        text: M.PAYMENT_BANK
    }],
    TEXT_EDITOR_FONTS: ["Open Sans", "Arial", "Courier New", "Helvetica", "Lucida Grande", "Tahoma", "Times New Roman", "Verdana"],
    EMAIL_EDITOR_FONTS: ["Arial", "Helvetica", "Verdana", "Georgia", "Times New Roman", "Courier"],
    addTextEditor: function (e) {
        var t;
        mergeUnique(e, {
            element: null,
            hasPersonalizationTags: !1,
            addExtraButtons: !1,
            isHeading: !1,
            isMinimalistic: !1,
            addImageButton: !0 !== e.isMinimalistic,
            addLinkButton: !1,
            callbackHandler: dummy,
            containment: $window,
            height: 0,
            showUserFonts: !0,
            convertPercentToPx: !1,
            baseFontSize: 14,
            forceFixedPosition: !1,
            useEmailFontsOnly: !1,
            isEmailEditor: !1,
            customClass: ""
        }), e.isHeading ? t = "heading" : e.isMinimalistic ? (t = "minimal", e.addImageButton && e.addLinkButton ? t += " with2extra" : (e.addImageButton || e.addLinkButton) && (t += " with1extra")) : t = e.addExtraButtons && (e.addImageButton || e.addMarketingTags) ? "full" : e.addExtraButtons && !e.addImageButton ? "extra" : !e.addExtraButtons && e.addImageButton ? "image" : "small", e.customClass && (t += " " + e.customClass), e.addDeleteButton && (t += " with-delete-btn");
        var i = e.element.parent();
        if (e.convertPercentToPx) {
            var n = function (e, t) {
                if (0 !== e.length) {
                    var i = t,
                        a = e.css("fontSize") || "";
                    a && (i = a.endsWith("%") ? Tools.parseFloat(a, 100) * t / 100 : Tools.parseFloat(a, 14), e.css("fontSize", Math.round(i) + "px"));
                    var s = e.children();
                    s.length > 0 && s.each((function (e, t) {
                        n($(t), i)
                    }))
                }
            };
            n(e.element, e.baseFontSize)
        }
        e.element.addClass("cpanel-text-editor"), i.addClass("cpanel-text-editor-parent cpanel-text-editor-" + t);
        var a = [];
        e.isMinimalistic || a.push(["style", ["style"]]), a.push(["font", ["bold", "text-styles"]]), a.push(["fontname", ["fontname"]]), a.push(["fontsize", ["fontsize"]]), a.push(["height", ["height"]]), a.push(["color", ["tmdpForeColor", "tmdpBackColor"]]), e.isMinimalistic || a.push(["para", e.isHeading ? ["paragraph"] : ["ul", "ol", "paragraph"]]), e.isMinimalistic && !e.addLinkButton || a.push(["insert", !e.isHeading && e.addImageButton ? ["tmdpLink", "tmdpImage"] : ["tmdpLink"]]), e.isMinimalistic || a.push(["tmdp", ["clearStyles"]]), e.addMarketingTags && a.push(["marketing", ["tmdpMarketingTags"]]), e.addDeleteButton && a.push(["tmdp", ["tmdpDelete"]]);
        var s = {
            styleTags: e.isHeading ? ["h1", "h2", "h3", "h4", "h5", "h6"] : ["p", "blockquote", "pre", "h1", "h2", "h3", "h4", "h5", "h6"],
            lineHeights: ["0.5", "0.8", "1.0", "1.2", "1.4", "1.5", "1.6", "1.8", "2.0", "3.0"],
            fontSizes: ["8", "9", "10", "11", "12", "13", "14", "15", "16", "18", "20", "22", "24", "28", "32", "36", "42", "48", "54", "60", "66", "72", "90", "108"],
            fontNames: e.useEmailFontsOnly ? Tools.EMAIL_EDITOR_FONTS : Tools.TEXT_EDITOR_FONTS,
            lang: "custom",
            toolbar: a,
            isEmailEditor: !0 === e.isEmailEditor,
            onPaste: function (e) {
                var t = ((e.originalEvent || e).clipboardData || window.clipboardData).getData("Text");
                e.preventDefault(), document.execCommand("insertText", !1, (t || "").trim())
            }
        };
        Website.textAssistEnabled && (a.push(["tmdp", ["tmdpTextAssist"]]), e.textAssistOptions && (s.textAssistOptions = e.textAssistOptions)), e.addMarketingTags && (s.marketingTags = e.marketingTags), e.useEmailFontsOnly || !e.showUserFonts || isUndefined(GlobalStyling) || (s.fontNames = GlobalStyling.getAvailableFontNames()), e.height && (s.height = e.height);
        e.element.summernote(s).on("summernote.focus", (function (t) {
            CPanel.addBodyClickListener(o), e.callbackHandler("focus");
            var n = i.find(".note-toolbar");
            if (!n.hasClass("note-toolbar-visible")) {
                if (n.addClass("note-toolbar-visible"), !e.forceFixedPosition && e.containment.length > 0 && e.containment[0].getBoundingClientRect) {
                    var a = e.containment[0].getBoundingClientRect();
                    n[0].getBoundingClientRect().right > a.right && n.data("right", $window.width() - i[0].getBoundingClientRect().right)
                }
                Tools.fixTextEditorToolbarPosition(n, e.forceFixedPosition)
            }
        })).on("summernote.change", $.debounce(100, (function () {
            e.callbackHandler("change")
        })));
        e.hasPersonalizationTags, e.element.summernote("toolbar.get", "tmdpDelete").on("click", (function () {
            e.callbackHandler("delete")
        }));
        var o = function (t) {
            if (!$.contains(i[0], t.target)) {
                CPanel.removeBodyClickListener(o), $("#websitePageSaveBtns").removeClass("none"), i.find(".note-toolbar").removeClass("note-toolbar-visible text-editor-absolute-toolbar text-editor-fixed-toolbar").removeData("right").hide().css({
                    left: "auto",
                    right: "auto"
                });
                var n = $.summernote.eventHandler,
                    a = i.find(".note-handle"),
                    s = i.find(".note-popover");
                return n.invoke("popover.hide", s), n.invoke("handle.hide", a), e.callbackHandler("blur"), !1
            }
            return !0
        }
    },
    fixTextEditorToolbarPosition: function (e, t) {
        var i = e.closest(".note-editor")[0].getBoundingClientRect(),
            n = $body.hasClass("action-line-top ") ? 153 : 113;
        if (t || i.top < n) {
            if (!e.hasClass("text-editor-fixed-toolbar")) {
                var a = t ? ($window.width() - e.width()) / 2 : i.left,
                    s = e.data("right"),
                    o = !t && !isUndefined(s);
                $("#websitePageSaveBtns").addClass("none"), e.addClass("text-editor-fixed-toolbar").removeClass("text-editor-absolute-toolbar").css({
                    left: o ? "auto" : a + "px",
                    right: o ? s + "px" : "auto"
                })
            }
        } else if (!e.hasClass("text-editor-absolute-toolbar")) {
            o = !isUndefined(e.data("right"));
            $("#websitePageSaveBtns").removeClass("none"), e.addClass("text-editor-absolute-toolbar").removeClass("text-editor-fixed-toolbar").css({
                left: o ? "auto" : 0,
                right: o ? 0 : "auto"
            })
        }
    },
    isElementInViewport: function (e) {
        var t = e[0].getBoundingClientRect();
        return t.top >= 0 && t.left >= 0 && t.bottom <= (window.innerHeight || document.documentElement.clientHeight) && t.right <= (window.innerWidth || document.documentElement.clientWidth)
    },
    moveTextEditorToolbar: function (e) { },
    hasTextEditor: function (e) {
        return e.hasClass("cpanel-text-editor-parent") || e.parent().hasClass("cpanel-text-editor-parent")
    },
    removeTextEditor: function (e) {
        var t = e.hasClass("cpanel-text-editor") ? e : e.find(".cpanel-text-editor");
        if (t.length > 0) try {
            t.destroy()
        } catch (e) { }
    },
    getTextEditorValue: function (e) {
        var t = e.hasClass("cpanel-text-editor") ? e : e.find(".cpanel-text-editor");
        if (0 === t.length && e.hasClass("text-widget-content")) return e.html();
        var i = t.code();
        return (t.data("options") || {}).hasPersonalizationTags && ((i = $(i)).find(".dynamic-var").each((function () {
            var e = $(this);
            e.replaceWith("{" + e.data("var") + "}")
        })), i = i[0].outerHTML), i
    },
    setTextEditorValue: function (e, t) {
        var i = e.hasClass("cpanel-text-editor") ? e : e.find(".cpanel-text-editor");
        0 === i.length && e.hasClass("text-widget-content") ? e.html(t) : i.length > 0 && i.code(t)
    },
    getTextEditorValueWithPercentFontSize: function (e, t) {
        var i = Tools.getTextEditorValue(e),
            n = $("<div />");
        n.css("fontSize", t + "px"), n.html(i);
        var a = function (e, t) {
            if (0 !== e.length) {
                var i, n = Tools.parseFloat(e.data("fontsize") || t, 1),
                    s = e.children();
                i = (n + "").endsWith("%") ? Tools.parseFloat(n, 100) : 100 * Tools.parseFloat(n, t) / t, isNaN(i) && (i = 100), e.css("fontSize", i + "%"), s.each((function (e, t) {
                    a($(t), n)
                }))
            }
        };
        return n.find("*").addBack().each((function (e, i) {
            (i = $(i)).data("fontsize", i.css("fontSize") || t)
        })), a(n, t), n.html()
    },
    digitToHex: function (e) {
        var t = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "a", "b", "c", "d", "e", "f"];
        return isNaN(e) ? "00" : t[(e - e % 16) / 16] + t[e % 16]
    },
    rgbaToHexNoAlpha: function (e) {
        if (!(e || "").startsWith("rgba")) return e;
        var t = e.substring(e.indexOf("(")).split(","),
            i = parseInt(t[0].substring(1).trim(), 10).toString(16),
            n = parseInt(t[1].trim(), 10).toString(16),
            a = parseInt(t[2].trim(), 10).toString(16);
        return i.length < 2 && (i = "0" + i), n.length < 2 && (n = "0" + n), a.length < 2 && (a = "0" + a), "#" + i + n + a
    },
    setOpacityToColor: function (e, t) {
        return (e = WebPlatform.hexToRgba(e).replace(/ /g, "").toLowerCase()).startsWith("rgb") ? "rgba(" + (e = e.match(/^rgba?\((\d+),(\d+),(\d+)/))[1] + ", " + e[2] + ", " + e[3] + ", " + t + ")" : e
    },
    toHex: function (e) {
        return null === e || isUndefined(e) || 0 === e.indexOf("rgba") ? "transparent" : 0 === (e = e.toLowerCase()).indexOf("rgb") ? (e = e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/), "#" + Tools.digitToHex(e[1]) + Tools.digitToHex(e[2]) + Tools.digitToHex(e[3])) : e
    },
    hexToRgba: WebPlatform.hexToRgba,
    transitionsSupported: WebPlatform.transitionsSupported,
    onAnimationEnd: WebPlatform.onAnimationEnd,
    pickColor: function (e, t, i, n) {
        i = i || dummy, n = n || dummy;
        var a = e || "#3e3e3e",
            s = $('<div style="position: absolute; z-index: -1; visibility: hidden" />').insertAfter(t || document.body),
            o = $('<input type="text" style="position: absolute; z-index: -1; visibility: hidden;" value="' + a + '" />'),
            r = Tools.addColorPicker(e, s, o, (function (e, t) {
                i(e, t), a = e
            }), (function () {
                Tools.removeColorPicker(r), s.remove(), s = null, o = null, n()
            }));
        s.trigger("click")
    },
    addrToStr: WebPlatform.addrToStr,
    addColorPicker: function (e, t, i, n, a, s) {
        var o = e;
        n = n || dummy, a = a || dummy, "transparent" === o ? t.addClass("backgroundTransparent").css({
            backgroundColor: o
        }) : t.removeClass("backgroundTransparent").css({
            backgroundColor: o
        }), i.val(s ? Tools.rgbaToHexNoAlpha(o) : o).click((function () {
            t.trigger("click")
        }));
        var r = COLORPICKER_PREDEFINED_COLORS.slice(),
            l = [Website.globalStyling.colors.primary, Website.globalStyling.colors.secondary1, Website.globalStyling.colors.secondary2, Website.globalStyling.colors.secondary3, Website.globalStyling.colors.secondary4];
        return t.colorPicker({
            color: e,
            animationSpeed: 0,
            renderCallback: function (e, o) {
                if (!1 !== o) {
                    !0 === o && ($("#dynamic-predefined-color-0").css("background-color", Website.globalStyling.colors.primary), $("#dynamic-predefined-color-1").css("background-color", Website.globalStyling.colors.secondary1), $("#dynamic-predefined-color-2").css("background-color", Website.globalStyling.colors.secondary2), $("#dynamic-predefined-color-3").css("background-color", Website.globalStyling.colors.secondary3), $("#dynamic-predefined-color-4").css("background-color", Website.globalStyling.colors.secondary4));
                    var r = (d = this.color.colors).RND.rgb,
                        l = d.alpha < .001,
                        c = "rgba(" + r.r + ", " + r.g + ", " + r.b + ", " + d.alpha + ")";
                    !0 !== o && (l ? (c = "transparent", t.addClass("backgroundTransparent").css({
                        backgroundColor: c
                    })) : t.removeClass("backgroundTransparent").css({
                        backgroundColor: c
                    }), i.val(s ? "#" + d.HEX : c), n(c, GlobalStyling.getGlobalColorClassFromColor(c)));
                    var d, p = {
                        r: (d = this.color.colors.RND).rgb.r,
                        g: d.rgb.g,
                        b: d.rgb.b,
                        a: this.color.colors.alpha,
                        HEX: this.color.colors.HEX
                    };
                    $("input", ".cp-panel").each((function () {
                        this.value = p[this.className.substr(3)]
                    }))
                } else a()
            },
            customBG: "#222",
            margin: "4px -2px 0",
            doRender: "div div",
            buildCallback: function (e) {
                var t = this.color,
                    i = this;
                e.find(".cp-alpha").append("<span> Opacity </span>"), e.prepend('<div class="cp-panel"><div class="col20 f-left">R <input type="number" min="0" max="255" step="1" class="cp-r" /></div><div class="col20 f-left">G <input type="number" min="0" max="255" step="1" class="cp-g" /></div><div class="col20 f-left">B <input type="number" min="0" max="255" step="1" class="cp-b" /></div><div class="col20 f-left">A <input type="number" min="0" max="1" step="0.1" class="cp-a" /></div><div class="col20 f-left"># <input type="text" class="cp-HEX" /></div></div>').on("change", "input", (function (e) {
                    var n = this.value,
                        a = this.className.split(" ")[0].split("-")[1],
                        s = {};
                    "a" !== a && (s[a] = n), t.setColor("HEX" === a ? n : s, "HEX" === a ? "HEX" : /(?:r|g|b)/.test(a) ? "rgb" : "hsv", "a" === a ? n : void 0), i.render(), this.blur()
                }));
                for (var n = '<div class="dynamic-colors-wrapper col20 f-left"><span class="col20 f-left">Global Colors</span>', a = 0; a < l.length; ++a) n += '<div id="dynamic-predefined-color-' + a + '" class="dynamic-color color-trigger" style="background-color: ' + l[a] + '"></div>';
                n += "</div>";
                for (a = 0; a < r.length; ++a) "transparent" === r[a] ? n += '<div id="predefined-color-' + a + '" class="color-trigger" style="background-color: transparent; background-image: url(' + resources + '/images/transparent-pattern.png);"></div>' : n += '<div id="predefined-color-' + a + '" class="color-trigger" style="background-color: ' + r[a] + '"></div>';
                e.append('<div class="cp-memory">' + n + "</div>").on("click", ".color-trigger", (function (e) {
                    var n = $(this);
                    t.setColor(n.css("background-color")), i.render()
                }))
            }
        }), ++Tools.__colorpickers
    },
    __colorpickers: 0,
    removeColorpickers: function (e) {
        for (var t = 0; t < e.length; ++t) Tools.removeColorPicker(e[t])
    },
    removeColorPicker: function (e) { },
    prompt: function (e, t, i, n, a, s, o, r) {
        i = i || dummy, n = n || dummy, a = a || M.YES, s = s || M.CANCEL, o = !0 === o, Tools.showWindow({
            title: e,
            showCloseButton: o,
            icon: Popup.ICON_QUESTION,
            width: 450,
            isModal: !0,
            markup: format(Templates.get("promptDialogMarkup"), "message", t),
            buttons: [Button(s, Button.CLASS_MIDDLE_GREY, (function (e, t) {
                e.close(), n()
            }), Button.FLOAT_IGNORE), Button(a, Button.CLASS_MIDDLE_BLUE, (function (e, t) {
                e.close(), i()
            }), Button.FLOAT_IGNORE)],
            customClass: (r || "") + " " + Popup.CUSTOM_CLASS_PROMPT_DIALOG
        })
    },
    promptForInput: function (e, t, i, n, a, s, o, r, l) {
        isFunction(i) && (a = n, n = i, i = "");
        var c = function (e, t) {
            var i = t.find("input").val();
            !1 !== n(i, e) && e.close()
        };
        n = n || dummy, a = a || dummy;
        var d = [Button(M.SUBMIT, Button.CLASS_MIDDLE_BLUE, c), Button(M.CANCEL, Button.CLASS_MIDDLE_GREY, (function (e, t) {
            e.close(), a()
        }))];
        l && l.constructor === Array && (d = d.concat(l)), Tools.showWindow({
            title: e,
            icon: Popup.ICON_QUESTION,
            width: s || 350,
            height: o || "auto",
            customClass: r || "",
            isModal: !0,
            markup: format(Templates.get("promptFurInputTemplate"), "message", t, "value", i),
            action: {
                onShow: function (e, t) {
                    t.find("input").keypress((function (i) {
                        13 === i.which && c(e, t)
                    }))
                }
            },
            buttons: d
        })
    },
    showWindow: function (e) {
        Popup(e).show()
    },
    showFloatingPopupList: function (e) {
        var t = (e = e || {}).items || [],
            i = "<ul>",
            n = e.getIcon || function (e) {
                return e && e.icon ? e.icon : "none"
            },
            a = e.getLabel || function (e) {
                return e && e.label ? e.label : "-"
            };
        t.forEach((function (e) {
            e.html ? i += format('<li class="system-bg-color-hover system-bg-color-active"><a>%html%</li>', "html", e.html) : i += escapeFormat('<li class="system-bg-color-hover system-bg-color-active"><a><i class="fa %icon%"></i>%label%</a></li>', "icon", n(e), "label", a(e))
        })), Tools.showFloatingPopup({
            markup: i,
            width: 250,
            target: e.target,
            customClass: "floating-popup-list",
            action: {
                onShow: function (i, n) {
                    var a = -1;
                    n.on("click", "li", (function () {
                        s($(this).index())
                    }));
                    var s = function (n) {
                        var a = t[n];
                        (e.onSelect || dummy)(a), i.close()
                    },
                        o = function (e, i) {
                            if (e.preventDefault(), e.stopPropagation(), 0 !== t.length) {
                                n.find(".active").removeClass("active"), a < 0 ? a = i > 0 ? 0 : t.length - 1 : (a += i) >= t.length ? a = 0 : a < 0 && (a = t.length - 1);
                                var s = n.find("li").eq(a).addClass("active"),
                                    o = s.height(),
                                    r = s[0].offsetTop,
                                    l = n.height(),
                                    c = n[0].scrollTop;
                                r >= c && r + o <= c + l || (n[0].scrollTop = r + o - l)
                            }
                        };
                    $document.on("keydown.floatingpop", (function (e) {
                        switch (e.which) {
                            case 13:
                                e.preventDefault(), e.stopPropagation(), a >= -1 && s(a);
                                break;
                            case 38:
                                o(e, -1);
                                break;
                            case 40:
                                o(e, 1)
                        }
                    }))
                },
                onHide: function (e, t) {
                    $document.off("keydown.floatingpop")
                }
            }
        })
    },
    showFloatingPopup: function (e) {
        FloatingPopup(e).show()
    },
    get: function (e, t, i) {
        $.get(contextPath + "/me/get", {
            page: e,
            r: Math.random()
        }).done((function (e) {
            t(e)
        })).fail((function (e) {
            i(e)
        }))
    },
    ddmmyyStringToDate: WebPlatform.ddmmyyStringToDate,
    mmddyyStringToDate: WebPlatform.mmddyyStringToDate,
    ukDateTimeStringToDate: WebPlatform.ukDateTimeStringToDate,
    usDateTimeStringToDate: WebPlatform.usDateTimeStringToDate,
    hourToStr: function (e) {
        return e = WebPlatform.parse(e), "uk" === WebsiteSettings.getDateFormat() ? e : 0 === e ? "12am" : 12 === e ? "12pm" : e < 12 ? e + "am" : e - 12 + "pm"
    },
    localDateTimeStringToDate: function (e) {
        return "uk" === WebsiteSettings.getDateFormat() ? Tools.ukDateTimeStringToDate(e) : Tools.usDateTimeStringToDate(e)
    },
    currencyToStrWithSymbol: function (e) {
        return WebPlatform.currToStr(e || 0, Website.storeCurrencySymbol, Website.storeCurrencyPositionAtLeft, Website.storeCurrency)
    },
    currToStr: function (e) {
        return (e = Math.round(100 * e) / 100) < 0 ? e.toFixed(2).replace("-", "- $") : "$" + e.toFixed(2)
    },
    getUTCDate: function () {
        var e = new Date,
            t = Date.UTC(e.getUTCFullYear(), e.getUTCMonth(), e.getUTCDate(), e.getUTCHours(), e.getUTCMinutes(), e.getUTCSeconds());
        return new Date(t)
    },
    dateToString: function (e, t, i, n) {
        if (!e) return "";
        var a = i ? [M.JAN, M.FEB, M.MAR, M.APR, M.MAY_SHORT, M.JUN, M.JUL, M.AUG, M.SEP, M.OCT, M.NOV, M.DEC] : [M.JANUARY, M.FEBRUARY, M.MARCH, M.APRIL, M.MAY, M.JUNE, M.JULY, M.AUGUST, M.SEPTEMBER, M.OCTOBER, M.NOVEMBER, M.DECEMBER],
            s = e.getDate(),
            o = e.getMonth(),
            r = e.getFullYear();
        if (!t) return a[o] + " " + s + (!1 === n ? "" : ", " + r);
        var l, c = a[o] + " " + s + ", " + (!1 === n ? "" : r + " "),
            d = e.getHours(),
            p = e.getMinutes();
        if (p < 10 && (p = "0" + p), "uk" === WebsiteSettings.getDateFormat()) l = (d < 10 ? "0" + d : d) + ":" + p;
        else {
            var u = d < 12 ? "AM" : "PM";
            0 === d ? d = 12 : d > 12 && (d -= 12), l = d + ":" + p + u
        }
        return c + l
    },
    timeToString: function (e, t) {
        var i = e.getHours(),
            n = e.getMinutes();
        if (t) return (i < 10 ? "0" : "") + i + ":" + (n < 10 ? "0" : "") + n;
        var a = i < 12 ? "AM" : "PM";
        return 0 === i ? i = 12 : i > 12 && (i -= 12), (i < 10 ? "0" : "") + i + ":" + (n < 10 ? "0" : "") + n + " " + a
    },
    dateToShortString: function (e, t, i) {
        var n = [M.JAN, M.FEB, M.MAR, M.APR, M.MAY_SHORT, M.JUN, M.JUL, M.AUG, M.SEP, M.OCT, M.NOV, M.DEC],
            a = e.getDate(),
            s = e.getMonth(),
            o = e.getFullYear();
        return !0 === t ? a + " " + n[s] + (!0 === i ? ", " + o : "") : n[s] + " " + a + (!0 === i ? ", " + o : "")
    },
    getColorAndInitialsFromNameAndEmail: function (e, t) {
        var i = (n = e || "?").split(" "),
            n = i[0].substring(0, 1);
        return i[1] && (n += i[1].substring(0, 1)), {
            initials: n,
            color: Tools.colorFromString(t || "" + (new Date).getTime())
        }
    },
    colorFromString: function (e) {
        return "hsl(" + function (e) {
            var t = 0;
            if (0 === e.length) return t;
            for (var i = 0; i < e.length; i++) t = e.charCodeAt(i) + ((t << 5) - t), t &= t;
            return t
        }(e) % 360 + ", 65%, 75%)"
    },
    urlFromString: function (e, t, i, n) {
        n = n || "-", e = Tools.removeDiacritics(e, t).trim();
        var a = new RegExp(n + "+", "g");
        return (e = (e = i ? e.replace(/[^\da-zA-ZÐ°-ÑÐ-Ð¯\u0590-\u06ff]/g, n) : e.replace(/[^\da-zA-ZÐ°-ÑÐ-Ð¯\._\-\u0590-\u06ff]/g, n)).replace(a, n).toLowerCase()).startsWith(n) && (e = e.substring(n.length)), e.endsWith(n) && (e = e.substring(0, e.length - n.length)), e
    },
    getUrlParams: WebPlatform.getUrlParameterMap,
    getScript: function (e, t) {
        var i = "?v=" + resourcesVersion;
        return e.indexOf(i) < 0 && (e += i), t = $.extend(t || {}, {
            dataType: "script",
            cache: !0,
            url: e
        }), $.ajax(t)
    },
    reportJSError: function (e, t) {
        Log.error("Error: "), Log.error(e), Log.error("Data: "), Log.error(t);
        try {
            Tools.makeWebsiteRequest({
                action: "reportError",
                method: "post",
                _reportError: !1,
                data: {
                    exception: (e || {}).toString(),
                    data: JSON.stringify(t)
                },
                onOk: function (e) {
                    Log.info("Error reported successfully!")
                }
            })
        } catch (e) { }
    },
    makeWebsiteRequest: function (e) {
        mergeUnique(e, {
            url: "",
            data: {},
            onOk: dummy,
            incrementModCount: !1,
            action: "Invalid Action!",
            method: "getJSON",
            baseUrl: "/me/wr",
            _reportError: !0,
            onRequestError: function (t, i, n) {
                e.onNotOk({
                    message: n
                }), CPanel.showError(n)
            },
            onNotOk: dummy,
            _onNotOk: function (t) {
                t.notLoggedIn ? window.location.href = t.loginUrl : t.noTemplate ? (Log.error("No template selected!"), window.location = "//" + userDomain + "/me/dashboard/themes") : t.accessDenied ? (Log.error("Access Denied! Action: " + e.action), CPanel.showError(M.ACCESS_DENIED)) : (Log.error("Action: " + e.action), CPanel.showError(M[t.message] || t.message))
            },
            always: dummy
        });
        var t = WebPlatform.getCSRFToken(),
            i = {
                action: e.action,
                _csrfToken: t,
                r: Math.random()
            };
        mergeUnique(i, e.data);
        var n = {
            url: contextPath + e.baseUrl + e.url,
            data: i,
            headers: {
                "X-S-CSRF-TOKEN": t
            }
        };
        "getJSON" === e.method && (n.dataType = "json"), "post" === e.method.toLowerCase() && (n.type = "POST"), $.ajax(n).done((function (t) {
            try {
                if (!isUndefined(t.websiteModCount)) try {
                    e.incrementModCount && CPanel.incrementModCount(), CPanel.checkWebsiteState(t.websiteModCount)
                } catch (e) {
                    Log.error(e)
                }
                t.ok ? e.onOk(t) : (isUndefined(t.ok) && (Log.error("Response doesn't include status infurmation! {ok: true}"), Log.error(t)), e._onNotOk(t), e.onNotOk(t))
            } catch (t) {
                !1 !== e._reportError && Tools.reportJSError(t, e)
            }
        })).fail(e.onRequestError).always(e.always)
    },
    makeWebsiteRequestWithFile: function (e, t) {
        if (t) {
            mergeUnique(e, {
                url: "",
                data: {},
                onOk: dummy,
                action: "Invalid Action!",
                method: "getJSON",
                baseUrl: "/me/wr",
                onRequestError: function (e, t, i) {
                    Log.log(i), CPanel.showError(i)
                },
                _onNotOk: function (t) {
                    Log.error("Action: " + e.action), CPanel.showError(M[t.message] || t.message)
                },
                always: dummy
            }), e.onNotOk = e.onNotOk || e._onNotOk;
            var i = WebPlatform.getCSRFToken(),
                n = {
                    action: e.action,
                    _csrfToken: i,
                    r: Math.random()
                };
            mergeUnique(n, e.data);
            var a = new FormData;
            for (var s in a.append("_file_", t), a.append("_file_name_", t.name || ""), a.append("_has_file_", !0), n) {
                var o = n[s];
                $.isArray(o) && (o = JSON.stringify(o)), a.append(s, o)
            }
            $.ajax({
                url: contextPath + e.baseUrl + e.url,
                headers: {
                    "X-S-CSRF-TOKEN": i
                },
                type: "POST",
                data: a,
                cache: !1,
                contentType: !1,
                processData: !1
            }, "json").done((function (t) {
                t.ok ? e.onOk(t) : (isUndefined(t.ok) && (Log.error("Response doesn't include status information! {ok: true}"), Log.error(t)), e.onNotOk(t))
            })).fail(e.onRequestError).always(e.always)
        } else Tools.makeWebsiteRequest(e)
    },
    slow: function (e, t, i) {
        var n = Tools.tick(),
            a = function () {
                Tools.tick() - n < e ? setTimeout(a, t) : i()
            };
        a()
    },
    setImage: function (e, t, i, n) {
        n = n || "", e.css({
            backgroundImage: "url(" + getThumbnailsFromBase(n, i) + t + ")"
        }).data("image", t).data("imageBase", n)
    },
    addToggle: function (e, t, i, n, a) {
        a = !0 === a, i = i || dummy, n = n || "cpanel", e.on("click." + n, "a", (function () {
            var t = a ? $(this).parent() : $(this);
            if (!t.hasClass("active")) {
                e.find(".active").removeClass("active"), t.addClass("active");
                var n = a ? t.index() : t.parent().index();
                i(t, n)
            }
        })), t >= 0 && e.find("a:eq(" + t + ")").trigger("click")
    },
    selectMultipleImages: function (e, t, i, n) {
        e = e || [], t = t || [], i = i || dummy, n = n || dummy, Tools.showWindow({
            action: {
                onShow: function (i, n) {
                    for (var a = n.find(".add-image-wrapper"), s = 0; s < e.length; ++s) {
                        var o = $(Templates.get("selectImageMarkup2")).appendTo(a);
                        Tools.setImage(o, e[s], "160x120", t[s] || "")
                    }
                    $(Templates.get("selectImageMarkup")).appendTo(a), n.on("click", ".close-button2", (function (e) {
                        $(this).parent().remove(), e.stopPropagation()
                    })), n.on("click", ".add-image", (function () {
                        var e = $(this);
                        FileManager.selectFile({
                            onCompleteCallback: function (t, i) {
                                Tools.setImage(e, i, "160x120", t);
                                var n = e.find(".add-button");
                                n.length > 0 && (n.remove(), $(Templates.get("trashButtonMarkup")).appendTo(e), $(Templates.get("selectImageMarkup")).insertAfter(e))
                            }
                        })
                    }))
                }
            },
            isModal: !1,
            title: M.ADD_GALLERY_ITEMS,
            icon: Popup.ICON_SLIDER,
            width: 425,
            markup: Templates.get("galleryFilesMarkup"),
            buttons: [Button(M.CONFIRM, Button.CLASS_MIDDLE_BLUE, (function (e, t) {
                var n = [],
                    a = [];
                t.find(".add-image").each((function (e, t) {
                    var i = (t = $(t)).data("image"),
                        s = t.data("imageBase");
                    i && (n.push(i), a.push(s))
                })), e.close(), i(n, a)
            })), Button(M.CANCEL, Button.CLASS_MIDDLE_GREY, (function (e, t) {
                e.close(), n()
            }))]
        })
    },
    addEndSlash: function (e) {
        return 0 === e.length ? "/" : ("/" !== e[e.length - 1] && (e += "/"), e)
    },
    addEnterListener: function (e, t) {
        e.keypress((function (e) {
            if (13 === e.which) return t()
        }))
    },
    tick: WebPlatform.tick,
    randomInt: function (e, t) {
        return Math.floor(Math.random() * (t - e + 1)) + e
    },
    delay: WebPlatform.delay,
    cancelDelay: function (e) {
        clearTimeout(e)
    },
    showSaveSuccessWindow: function () {
        Tools.showCornerMessage(3e3, M.UPDATED, Tools.TOOLTIP_TYPE_SUCCESS)
    },
    TOOLTIP_TYPE_ERROR: "error",
    TOOLTIP_TYPE_WARNING: "warning",
    TOOLTIP_TYPE_SUCCESS: "success",
    showCornerMessage: function (e, t, i) {
        var n = $(format(Templates.get("cornerMessage"), "type", i || Tools.TOOLTIP_TYPE_SUCCESS, "message", t));
        n.appendTo($body), Tools.delay(20, (function () {
            n.addClass("visible"), Tools.delay(300, (function () {
                Tools.delay(e, (function () {
                    n.removeClass("visible"), Tools.delay(300, (function () {
                        n.remove()
                    }))
                }))
            }))
        }))
    },
    showAutohideMessage: function (e, t) {
        Tools.showCornerMessage(e + 1e3, t, Tools.TOOLTIP_TYPE_SUCCESS)
    },
    loadScripts: function (e, t, i) {
        var n;
        i = i || function (e, t, i) {
            Log.error(e), Log.error(t), Log.error(i), i && i.stack && Log.error("Stack: " + i.stack), CPanel.showError(M.ERR_UNABLE_TO_LOAD_SCRIPTS)
        }, n = $.isArray(e) ? e : [e];
        for (var a = 0; a < Tools._loadedScripts.length; ++a)
            for (var s = 0; s < n.length; ++s)
                if (Tools._loadedScripts[a] === n[s]) {
                    n.splice(s, 1);
                    break
                } if (0 !== n.length) {
                    var o = 0;
                    for (s = 0; s < n.length; ++s) Tools._loadedScripts.push(n[s]), Tools.getScript(n[s]).done((function () {
                        ++o === n.length && t()
                    })).fail(i)
                } else t()
    },
    loadGridScripts: function (e, t) {
        isUndefined(window.Grid) ? !0 === window.inTestEnvironment ? Tools.loadScripts([resources + "/scripts/modules/widgets.js", resources + "/scripts/modules/header.js", resources + "/scripts/modules/clipboard.js", resources + "/scripts/modules/grid.js", resources + "/scripts/modules/legacyHeaderSettings.js"], (function () {
            Tools.loadScripts([contextPath + "/me/rws"], e, t)
        }), t) : Tools.loadScripts([resources + "/scripts/platform.widgets.min.js"], e, t) : e()
    },
    pickIcon: function (e, t, i, n) {
        i = i || dummy, n = n || {}, Tools.showWindow({
            isModal: !0 === n.isModal,
            showCloseButton: !0,
            title: M.PICK_ICON_TITLE,
            icon: Popup.ICON_ADD,
            width: 358,
            markup: Templates.get("pickIconDialogMarkup"),
            showNextTo: e,
            action: {
                onShow: function (e, n) {
                    var a = n.find(".icp").data("selected", t);
                    Tools.delay(200, (function () {
                        a.on("iconpickerSelected", (function (t) {
                            i("fa-" + t.iconpickerValue), e.close(), e = null, n = null
                        })).iconpicker()
                    }))
                },
                onBeforeHide: function (e, t) {
                    $.iconpicker.batch(t.find(".icp"), "destroy")
                }
            },
            buttons: [],
            customClass: "pickIconWindow"
        })
    },
    isBusy: function (e) {
        return !0 === e.data("busy")
    },
    setBusy: function (e, t) {
        t ? e.data("busy", !0) : e.removeData("busy")
    },
    selectFont: function (e, t) {
        e = e || dummy, t = t || dummy, Tools.showWindow({
            title: M.SELECT_FONT_TITLE,
            showCloseButton: !0,
            icon: Popup.ICON_QUESTION,
            width: 350,
            height: "90%",
            markup: format(Templates.get("selectFontDialogMarkup"), "src", "about:blank"),
            buttons: [],
            customClass: "cpanel-select-font-dlg",
            action: {
                onShow: function (i, n) {
                    window.fontSelected = function (n) {
                        window.fontSelected = null, e(n), t = null, i.close()
                    };
                    var a = n.find("iframe");
                    n.find(".sort-btn").click((function () {
                        var e = $(this);
                        e.hasClass("active") || (n.find(".active").removeClass("active"), e.addClass("active"), CPanel.showLoadingBar("iframeLoadingBar", a, (function () {
                            a[0].contentWindow.document.innerHTML = "", a.one("load", (function () {
                                CPanel.hideLoadingBar("iframeLoadingBar")
                            })), a.attr("src", contextPath + "/me/get?page=font-picker&sort=" + (e.hasClass("sort-alpha") ? "alpha" : "popular"))
                        })))
                    })).filter(".sort-popular").click()
                },
                onBeforeHide: function (e, i, n) {
                    window.fontSelected = null;
                    var a = i.find("iframe");
                    return a.load((function () {
                        this.contentWindow.document.innerHTML = "", n(), n = null, null, i = null, a.remove(), a = null
                    })), a.attr("src", "about:blank"), null !== t && t(), !1
                }
            }
        })
    },
    writeFlag: function (e) {
        for (var t = 0, i = 0; i < e.length; ++i) {
            var n = e[i];
            n instanceof jQuery && (n = n[0]), t |= (n = n.nodeType ? !0 === n.checked : !!n) ? Math.pow(2, i) : 0
        }
        return t
    },
    readFlag: function (e, t) {
        for (var i = [], n = 0; n < t; ++n) i.push((e & Math.pow(2, n)) === Math.pow(2, n));
        return i
    },
    removeClassByPattern: function (e, t) {
        e[0].className = e[0].className.replace(t, " ")
    },
    show: function (e, t) {
        t = t || dummy, e.fadeIn("fast", t)
    },
    hide: function (e, t) {
        null !== e && (t = t || dummy, e.fadeOut("fast", t))
    },
    showInlinePopup: function (e) {
        null !== InlinePopup.prototype.activePopup ? InlinePopup.prototype.activePopup.close((function () {
            InlinePopup.prototype.activePopup = InlinePopup(e), InlinePopup.prototype.activePopup.show()
        })) : (InlinePopup.prototype.activePopup = InlinePopup(e), InlinePopup.prototype.activePopup.show())
    },
    closeAllPopups: function (e) {
        null !== InlinePopup.prototype.activePopup ? InlinePopup.prototype.activePopup.close((function () {
            PopupManager.closeAllPopups(e)
        })) : PopupManager.closeAllPopups(e)
    },
    isEmailValid: function (e) {
        return /\S+@\S+\.\S+/.test(e)
    },
    addSimpleToggle: function (e) {
        mergeUnique(e, {
            trigger: $([]),
            event: "change",
            target: $([]),
            onShow: dummy,
            onHide: dummy,
            isVisible: function (e, t) {
                return e.is(":checked")
            }
        });
        var t = function () {
            !0 === e.isVisible(e.trigger, e.target) ? (e.target.slideDown("fast"), e.onShow(e.trigger, e.target)) : (e.target.slideUp("fast"), e.onHide(e.trigger, e.target))
        };
        e.trigger.on(e.event, t), t()
    },
    toggleElement: function (e, t) {
        e.length > 0 && (e.hasClass("toggle-opened") ? (e.slideUp("fast").removeClass("toggle-opened").addClass("toggle-closed"), t && t.removeClass("toggle-opened").addClass("toggle-closed")) : (e.slideDown("fast").removeClass("toggle-closed").addClass("toggle-opened"), t && t.removeClass("toggle-closed").addClass("toggle-opened")))
    },
    removeAnimated: function (e, t) {
        e.slideUp("fast", (function () {
            e.remove(), t && (t(), t = null)
        }))
    },
    addSlider: function (e) {
        e.element = e.element || $([]), (e = $.extend({
            parseFunc: "parse",
            updateView: e.element.parent().find(".slider-val"),
            updatedViewSuffix: "",
            getUpdatedViewText: function (t) {
                return t + "" + e.updatedViewSuffix
            },
            min: 0,
            max: 100,
            step: 1,
            value: 3,
            range: "min",
            onChange: dummy
        }, e)).element.slider({
            value: e.value,
            min: e.min,
            max: e.max,
            step: e.step,
            range: e.range,
            slide: function (t, i) {
                var n = window[e.parseFunc](i.value, 1, e.min < 0);
                e.onChange(n), e.updateView.val(e.getUpdatedViewText(n))
            }
        }), e.updateView.val(e.getUpdatedViewText(e.value))
    },
    removeTooltipOptions: function (e) {
        e.off(".cpanelTooltip")
    },
    readFromView: function (e, t, i) {
        for (var n in t) {
            var a = e.find('[name="' + n + '"]');
            if (a.length > 0)
                if (a.is(":checkbox")) t[n] = a.is(":checked") ? 1 : 0;
                else if (a.is(":radio")) t[n] = a.filter(":checked").val();
                else if (a.is("input") || a.is("select")) t[n] = $.trim(a.val());
                else if (a.is("textarea"))
                    if ($.isArray(t[n])) {
                        var s = a.val();
                        s = s.split("\n");
                        for (var o = 0; o < s.length; ++o) {
                            var r = $.trim(s[o]);
                            "" !== r && t[n].indexOf(r) < 0 && t[n].push(r)
                        }
                    } else t[n] = $.trim(a.val())
        }
        $.extend(i, t)
    },
    bindToView: function (e, t) {
        for (var i in t) {
            var n = e.find('[name="' + i + '"]');
            if (n.length > 0)
                if (n.is(":radio")) n.filter('[value="' + t[i] + '"]').prop("checked", !0);
                else if (n.is(":checkbox")) {
                    var a = 1 === t[i] || "1" === t[i] || !0 === t[i];
                    n.prop("checked", a);
                    var s = n.attr("id");
                    if (s) {
                        var o = e.find('label[for="' + s + '"]');
                        if ("toggle" === o.attr("rel")) {
                            var r = $(o.attr("data-toggle"));
                            r.length > 0 && (a ? r.addClass("toggle-opened").show() : r.removeClass("toggle-opened").hide())
                        }
                    }
                } else if (n.is(":text") || n.is("select") || n.is(":password") || "number" === n.attr("type")) n.val(t[i]);
                else if (n.is("textarea")) {
                    var l = "";
                    if ($.isArray(t[i]))
                        for (var c = 0; c < t[i].length; ++c) l += (c > 0 ? "\n" : "") + t[i][c];
                    else l = t[i];
                    n.val(l)
                }
        }
    },
    parseFieldValue: function (e, t, i) {
        switch (i = i || {}, t) {
            case "string":
            case "text":
                if (e += "", !1 !== i.sanitizeStrings) {
                    var n = e.toLocaleLowerCase();
                    (n.indexOf("<script ") || n.indexOf("<meta ")) && (e = e.replace(/</gi, "&lt;").replace(/>/g, "&gt;"))
                }
                return e;
            case "bool":
            case "boolean":
                return !!e;
            case "bit":
                return e ? 1 : 0;
            case "int":
            case "money":
            case "moneyExt":
            case "float":
                return "" === (e = ("" + e).trim()) ? "" === i.defaultValue && i.allowEmpty ? i.defaultValue : 0 : ("int" === t ? e = parseInt(e, 10) : "money" === t ? (e = parseFloat(e, 10), isNaN(e) || (e = Math.round(100 * e) / 100)) : "moneyExt" === t ? (e = parseFloat(e, 10), isNaN(e) || (e = Math.round(1e3 * e) / 1e3)) : "float" === t && (e = parseFloat(e, 10)), isNaN(e) || e < 0 && !i.allowNegative ? "" === i.defaultValue && i.allowEmpty ? i.defaultValue : 0 : e);
            case "url":
                return Tools.urlFromString(e);
            case "url-no-cyrillic":
                return Tools.urlFromString(e, !0);
            case "email":
                return e = e.trim(), Tools.isEmailValid(e) ? e : i.defaultValue;
            case "email-or-dash":
                return "-" === (e = e.trim()) || Tools.isEmailValid(e) || /\{\w+\}/.test(e) ? e : i.defaultValue;
            case "date":
                return e ? e instanceof Date ? e.getTime() : WebPlatform.parse(e, i.defaultValue || 0, !1) : i.allowEmpty ? null : i.defaultValue;
            default:
                return e
        }
    },
    bind: function (e, t, i, n) {
        var a = {};
        if (!e || !t) return a;
        var s = !1;
        $.isArray(t) || (t = [t]), a.data = function () {
            return e
        }, a.unbind = function () {
            for (var a in this) this[a] = null;
            for (var s = 0; s < t.length; ++s) t[s].field && t[s].field.off("change"), "date" === t[s].type && t[s].field.datepicker("destroy");
            t = null, e = null, i = null, n = null
        };
        for (var o = Tools.parseFieldValue, r = function (t) {
            var n = t.property[0].toUpperCase() + t.property.substring(1),
                r = "set" + n;
            a["get" + n] = function () {
                return e[t.property]
            }, t.field.change((function () {
                var e;
                if ("bool" === t.type || "boolean" === t.type || "bit" === t.type) e = this.checked;
                else if ("date" === t.type) {
                    var i = t.field.datepicker("getDate");
                    e = null === i ? null : Date.UTC(i.getFullYear(), i.getMonth(), i.getDate(), 0, 0, 0, 0)
                } else e = this.value;
                a[r](e)
            })), "date" === t.type && t.field.datepicker({
                dateFormat: t.parseOptions.dateFormat,
                monthNamesShort: [M.JAN, M.FEB, M.MAR, M.APR, M.MAY_SHORT, M.JUN, M.JUL, M.AUG, M.SEP, M.OCT, M.NOV, M.DEC],
                monthNames: [M.JANUARY, M.FEBRUARY, M.MARCH, M.APRIL, M.MAY, M.JUNE, M.JULY, M.AUGUST, M.SEPTEMBER, M.OCTOBER, M.NOVEMBER, M.DECEMBER]
            }), a[r] = function (n) {
                n = o(n, t.type, t.parseOptions), e[t.property] = n, t.isRadioField ? t.field.filter('[value="' + n + '"]').prop("checked", !0) : "bool" === t.type || "boolean" === t.type || "bit" === t.type ? t.field.prop("checked", !!n) : t.field.val(function (e, t, i) {
                    if (null === e || "" === e) return "";
                    if ("date" === t) {
                        var n = new Date;
                        return n.setTime(e), (a = new Date).setFullYear(n.getUTCFullYear()), a.setMonth(n.getUTCMonth()), a.setDate(n.getUTCDate()), $.datepicker.formatDate(i.dateFormat, a, {
                            monthNamesShort: [M.JAN, M.FEB, M.MAR, M.APR, M.MAY_SHORT, M.JUN, M.JUL, M.AUG, M.SEP, M.OCT, M.NOV, M.DEC],
                            monthNames: [M.JANUARY, M.FEBRUARY, M.MARCH, M.APRIL, M.MAY, M.JUNE, M.JULY, M.AUGUST, M.SEPTEMBER, M.OCTOBER, M.NOVEMBER, M.DECEMBER]
                        })
                    }
                    if ("money" === t) return e.toFixed(2);
                    if ("moneyExt" === t) var a = e + "";
                    return e
                }(n, t.type, t.parseOptions)), s && !1 !== t.onChange(t, n) && (i || dummy)(t, n)
            }, a[r](t.property in e ? e[t.property] : "")
        }, l = 0; l < t.length; ++l) {
            var c = mergeUnique(t[l], {
                property: null,
                field: null,
                isRadioField: !1,
                prefix: "",
                suffix: "",
                type: "string",
                parseOptions: {},
                onChange: dummy
            });
            c.field || (c.field = n.find('[name="' + c.property + '"]')), c.parseOptions = mergeUnique(c.parseOptions, {
                allowEmpty: !0,
                defaultValue: "",
                allowNegative: !1,
                dateFormat: "dd M, yy",
                sanitizeStrings: !0
            }), c.property && c.field && r(c)
        }
        return s = !0, a
    },
    showHtmlTooltip: (e, t) => {
        mergeUnique(t || {}, {
            width: "auto",
            content: "",
            onBeforeClose: (e, t) => { },
            onClose: e => { },
            onShow: (e, t) => { },
            component: e => null
        });
        let i = null;
        !e || e instanceof jQuery || (e = $(e));
        let n = "auto" !== t.width ? t.width + "px" : "auto",
            a = "auto" === t.width ? 170 : t.width || 170,
            s = $('<div class="simple-tooltip" style="width: ' + n + ';">' + t.content + "</div>");
        s.appendTo($body);
        let o = e.offset(),
            r = e.outerWidth(),
            l = () => {
                let e = $window.height(),
                    t = s.outerHeight(!0),
                    i = Math.max(Math.min(e - t - 15, e + 10 - o.top), 0),
                    n = o.left - (a - r) / 2;
                s.css({
                    left: n + "px",
                    bottom: i + "px",
                    marginLeft: 0,
                    overflow: "auto",
                    maxHeight: e - 30 + "px"
                })
            },
            c = {
                getContentArea: function () {
                    return s[0]
                },
                close: () => null === s || (!t.onBeforeClose || !1 !== t.onBeforeClose(c, s)) && (s.fadeOut(150, (() => {
                    null !== s && (i && (WebComponents.destroy(i), i = null), t.onClose(c), s.remove(), s = null)
                })), Tools._htmlTooltips.pop(), 0 === Tools._htmlTooltips.length && CPanel.removeBodyClickListener(Tools._htmlTooltipClickListener), !0),
                refreshPosition: l
            };
        return i = t.component(c, s[0]), l(), s.fadeIn(150), t.onShow(c, s), Tools._htmlTooltips.push(c), 1 === Tools._htmlTooltips.length && CPanel.addBodyClickListener(Tools._htmlTooltipClickListener), c
    },
    _htmlTooltips: [],
    _htmlTooltipClickListener: e => {
        if (!Tools._htmlTooltips.length) return;
        let t = Tools._htmlTooltips[Tools._htmlTooltips.length - 1],
            i = t.getContentArea();
        return e.target === i || jQuery.contains(i, e.target) || t.close(), !0
    },
    showTooltipOptions: function (e, t, i, n) {
        let a = "<ul>";
        a += t.map((e => {
            let t = "",
                i = "";
            if (e.icon) {
                t = '<i class="' + (e.iconText ? e.icon || "" : "fa " + (e.icon || "fa-circle-thin")) + '">' + (e.iconText || "") + "</i>"
            } else i = "no-icon";
            return "<li" + (e.hint ? ' class="button-tooltip" data-timeout="10000" data-tooltip="' + e.hint + '"' : "") + ' data-tag="' + (e.tag || "") + '">' + t + '<span class="' + i + '">' + e.text + "</span></li>"
        })).join(""), a += "</ul>", Tools.showHtmlTooltip(e, {
            width: n || "auto",
            content: a,
            onShow: (t, n) => {
                n.on("click", "li", (n => {
                    let a = $(n.currentTarget);
                    i(e, a.index(), a.find("span").text(), a.data("tag") || "", n), t.close()
                }))
            },
            onBeforeClose: (e, t) => {
                t.find("li").removeClass("button-tooltip").tooltip("hide")
            }
        })
    },
    bindTooltipOptions: function (e, t, i, n) {
        n = n || dummy, e.on("click.cpanelTooltip", t, (function (e) {
            Tools.showTooltipOptions($(e.target), "function" == typeof i ? i() : i, n)
        }))
    },
    setHighlightedEditorOptions: function (e, t, i, n) {
        var a = t;
        switch (a) {
            case "dark":
                a = "ambiance";
                break;
            case "material":
                a = "material-darker";
                break;
            case "monokai":
                a = "monokai";
                break;
            default:
                a = "eclipse"
        }
        e.getOption("theme") !== a && e.setOption("theme", a), e.getOption("mode") !== i && e.setOption("mode", i), e.getOption("lineNumbers") !== !!n && e.setOption("lineNumbers", !!n)
    },
    highlight: function (e, t) {
        if (!window.CodeMirror) return null;
        e instanceof jQuery && (e = e[0]), mergeUnique(t, {
            lineNumbers: !0,
            styleActiveLine: !0,
            matchBrackets: !0,
            readOnly: !1,
            mode: "text/html",
            theme: "dark",
            extraKeys: {
                F11: function (e) {
                    var t = !e.getOption("fullScreen");
                    $body[t ? "addClass" : "removeClass"]("codemirror-fullscreen"), e.setOption("fullScreen", t)
                },
                Esc: function (e) {
                    e.getOption("fullScreen") && (e.setOption("fullScreen", !1), $body.removeClass("codemirror-fullscreen"))
                }
            }
        });
        var i = t.theme;
        switch (i) {
            case "dark":
                i = "ambiance";
                break;
            case "material":
                i = "material-darker";
                break;
            case "monokai":
                i = "monokai";
                break;
            default:
                i = "eclipse"
        }
        t.theme = i;
        var n = CodeMirror.fromTextArea(e, t);
        t.onChange && n.on("change", t.onChange);
        var a = 0;
        return Tools.delay(300, (function () {
            n && a < 3 && (n.refresh(), ++a)
        })), n
    },
    urlToEmbed: function (e, t, i) {
        if ((e = e || "").toLowerCase().indexOf("youtu") >= 0) {
            var n = WebPlatform.extractYoutubeVideoId(e);
            t('<iframe class="full-size-abs" src="https://www.youtube.com/embed/' + n + '" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>', "//i.ytimg.com/vi/" + n + "/hqdefault.jpg")
        } else {
            e.toLowerCase().indexOf("youtu") >= 0 && e.toLowerCase().indexOf("&maxwidth") < 0 && (e += "&maxwidth=0");
            var a = "onUrlToEmbedResponse" + Tools.getUniqueId();
            window[a] = function (e, t, i) {
                return t = t || dummy, i = i || dummy,
                    function (n) {
                        if (n.error) i();
                        else {
                            var a = $.trim(n.html) || "";
                            if ("" !== a) {
                                var s = $(a).find(".noembed-embed-inner");
                                s.length > 0 && (a = s.html())
                            }
                            t(a, n.thumbnail_url || "")
                        }
                        t = null, i = null, delete window[e]
                    }
            }(a, t, i);
            var s = "https://noembed.com/embed?callback=" + a + "&url=" + encodeURIComponent(e);
            $.getScript(s).fail((function (e) {
                Log.error(e), i()
            }))
        }
    },
    dateToShortStr: function (e) {
        var t = e.getDate(),
            i = e.getMonth() + 1;
        return (t < 10 ? "0" + t : t) + "/" + (i < 10 ? "0" + i : i) + "/" + e.getFullYear()
    },
    dateToStr: function (e, t) {
        var i = e.getDate(),
            n = e.getMonth() + 1,
            a = e.getFullYear();
        return "uk" === t ? (i < 10 ? "0" + i : i) + "/" + (n < 10 ? "0" + n : n) + "/" + a : (n < 10 ? "0" + n : n) + "/" + (i < 10 ? "0" + i : i) + "/" + a
    },
    dateToISOStr: function (e) {
        var t = e.getDate(),
            i = e.getMonth() + 1;
        return t < 10 && (t = "0" + t), i < 10 && (i = "0" + i), e.getFullYear() + "-" + i + "-" + t
    },
    bytesToStr: function (e) {
        if (0 === e) return "0B";
        var t = parseInt(Math.floor(Math.log(e) / Math.log(1024)));
        return Math.round(e / Math.pow(1024, t), 2) + " " + ["B", "KB", "MB", "GB", "TB"][t]
    },
    fillArray: function (e, t, i) {
        for (var n = e.length; n < t; ++n) e.push(i);
        return e
    },
    removeFromArray: function (e, t) {
        t = t || dummy;
        for (var i = e.length - 1; i >= 0;) {
            var n = e[i];
            if (t(n, i)) return e.splice(i, 1), n;
            i -= 1
        }
        return null
    },
    removeDiacritics: WebPlatform.removeDiacritics,
    showWebsitePreviewPopup: function (e) {
        mergeUnique(e, {
            url: "//web-repository.com",
            onButtonAction: dummy,
            onShow: dummy,
            onHide: dummy,
            buttonText: "",
            customClass: ""
        }), Tools.showWindow({
            isModal: !0,
            height: "100%",
            top: "0",
            width: $window.width(),
            showCloseButton: !0,
            customClass: "theme-preview-pop" + (e.customClass ? " " + e.customClass : ""),
            markup: Templates.get("themePreviewMarkup"),
            action: {
                onShow: function (t, i) {
                    e.onShow(t, i);
                    var n = i.find("iframe"),
                        a = i.find(".iframe-content");
                    i.find(".viewport-item").click((function () {
                        var t = $(this),
                            i = t.data("size");
                        t.closest("ul").find(".active").removeClass("active"), t.tooltip("hide").addClass("active"), a.removeClass("desktop-preview tablet-preview mobile-preview").addClass(i + "-preview"), e.iframeLoader ? e.iframeLoader(n) : n.attr("src", e.url)
                    })), i.find(".main-action-btn").text(e.buttonText).click((function () {
                        e.onButtonAction(n.attr("src")), t.close()
                    })), CPanel.showLoadingBar("iframeLoadingBar", n, (function () {
                        n.one("load", (function () {
                            CPanel.hideLoadingBar("iframeLoadingBar")
                        })), e.iframeLoader ? e.iframeLoader(n) : n.attr("src", e.url)
                    }))
                },
                onHide: e.onHide
            },
            buttons: []
        })
    },
    showFunnelPreviewPopup: function (e) {
        mergeUnique(e, {
            onButtonAction: dummy,
            onShow: dummy,
            onHide: dummy,
            buttonText: "",
            funnel: {}
        });
        var t = "da_JK" === window.userLocale ? "da" : window.userLocale;
        "zh_JO" === window.userLocale && (t = "zh");
        var i = e.funnel.settings || {},
            n = i.name || {},
            a = i.longDescription || {};
        n = n[t] || n.en || "", a = a[t] || a.en || "", Tools.showWindow({
            isModal: !0,
            height: "100%",
            top: "0",
            width: $window.width(),
            showCloseButton: !0,
            customClass: "theme-preview-pop funnels-preview-popup",
            markup: format(Templates.get("funnelPreviewMarkup"), "name", n, "longDescription", a),
            action: {
                onShow: function (t, i) {
                    e.onShow(t, i);
                    var n = i.find("iframe"),
                        a = i.find(".iframe-content"),
                        s = i.find(".funnel-step-select"),
                        o = null;
                    i.find(".viewport-item").click((function () {
                        var e = $(this),
                            t = e.data("size");
                        e.closest("ul").find(".active").removeClass("active"), e.tooltip("hide").addClass("active"), a.removeClass("desktop-preview tablet-preview mobile-preview").addClass(t + "-preview"), n.attr("src", n.attr("src"))
                    })), i.find(".main-action-btn").text(e.buttonText).click((function () {
                        e.onButtonAction(), t.close()
                    })), s.change((function () {
                        var e = $(this).find(":selected").data("step"),
                            t = "showstep|" + o.id + "|" + e.id;
                        n[0].contentWindow.postMessage(t, o.url)
                    })), CPanel.showLoadingBar("iframeLoadingBar", n, (function () {
                        n.one("load", (function () {
                            CPanel.hideLoadingBar("iframeLoadingBar")
                        }))
                    })), Tools.makeWebsiteRequest({
                        action: "getFunnelTemplateDetails",
                        data: {
                            templateId: e.funnel.id
                        },
                        onOk: function (e) {
                            ((o = e.data).steps || []).forEach((function (e, t) {
                                var i = "PAGE" === e.type ? "" : " (" + M.POPUP + ")";
                                $("<option />").text(M.STEP + " " + (t + 1) + ": " + e.name + i).data("step", e).prop("selected", 0 === t).appendTo(s)
                            })), n.attr("src", o.url)
                        }
                    })
                },
                onHide: function () {
                    e.onHide()
                }
            },
            buttons: []
        })
    },
    addClientDataRequest: WebPlatform.addAccumulatedRequest,
    processClientDataRequests: WebPlatform.processAccumulatedRequests,
    cloneArray: function (e) {
        var t = [];
        return e.forEach((function (e) {
            t.push($.extend({}, e))
        })), t
    },
    chooseMultiple: function (e) {
        e = $.extend({}, {
            title: "",
            message: "",
            items: [],
            selectedItems: [],
            allowNewItems: !1,
            noItemsMessage: M.NOTHING_TO_SELECT,
            width: 440,
            additionalButton: null,
            isModal: !1,
            single: !1,
            allowEmptySelection: !1,
            getItemId: function (e) {
                return e
            },
            getItemText: function (e) {
                return "" + e
            },
            newItem: function (e) {
                return e
            },
            onSelect: dummy
        }, e);
        var t = !1;
        if (e.items.length > 0 && !e.single) {
            var i = e.getItemId(e.items[0]);
            t = "" === i || -1 === i
        }
        var n = [Button(M.CONFIRM, Button.CLASS_MIDDLE_BLUE, (function (t, i) {
            var n = [];
            i.find('input[type="' + (e.single ? "radio" : "checkbox") + '"]:checked').each((function () {
                n.push($(this).data("item"))
            })), 0 === n.length && e.items.length > 0 && !e.allowEmptySelection && n.push(e.items[0]), t.close(), e.onSelect(n)
        })), Button.MIDDLE_CANCEL];
        e.additionalButton && n.unshift(e.additionalButton);
        var a = {},
            s = null,
            o = function (t, i) {
                var n = e.getItemId(t);
                if (!0 === a[n]) {
                    if (i) {
                        var o = e.single ? "radio" : "checkbox";
                        s.find('input[type="' + o + '"]').each((function () {
                            var t = $(this);
                            if (e.getItemId(t.data("item")) === n) return t.prop("checked", !0), !1
                        }))
                    }
                } else {
                    var r = s.find(".popup-newpage-wrapper"),
                        l = e.single ? "portfolioCategoryTemplateRadio" : "portfolioCategoryTemplate",
                        c = $(format(Templates.get(l), "id", Tools.getUniqueId(), "checked", i ? "checked" : ""));
                    c.find("label").text(e.getItemText(t)), c.appendTo(r), c.find("input").data("item", t), s.find(".no-items-message").addClass("none"), a[e.getItemId(t)] = !0
                }
            };
        return Tools.showWindow({
            isModal: e.isModal,
            title: e.title,
            width: e.width,
            customClass: "choose-multiple-wrapper",
            markup: format(Templates.get("multipleItemsSelectDlg"), "messageClass", "" === e.message ? "none" : "", "message", e.message, "noitemsmessage", e.noItemsMessage),
            buttons: n,
            action: {
                onShow: function (i, n) {
                    i,
                        s = n;
                    var a = e.single ? "radio" : "checkbox"; e.allowNewItems && n.find(".add-new-items").removeClass("none");
                    for (var r = 0; r < e.items.length; ++r) o(e.items[r], !1);
                    for (r = 0; r < e.selectedItems.length; ++r) o(e.selectedItems[r], !0);
                    if (e.allowNewItems) {
                        var l = n.find('input[type="text"]'),
                            c = function () {
                                var t = l.val().trim();
                                l.val(""), "" !== t && o(e.newItem(t), !0)
                            };
                        n.find(".plus-sign").click(c), Tools.addEnterListener(l, c)
                    }
                    if (t) {
                        n.on("change", 'input[type="' + a + '"]', (function () {
                            var t = $(this),
                                i = e.getItemId(t.data("item"));
                            t.is(":checked") && function (e) {
                                var t = n.find('input[type="' + a + '"]');
                                "" === e || -1 === e ? t.not(":first").prop("checked", !1) : t.eq(0).prop("checked", !1)
                            }(i)
                        }))
                    }
                }
            }
        }), {
            addItem: o
        }
    },
    buildTree: function (e) {
        e = $.extend({}, {
            items: [],
            selectedItems: [],
            getItemParentId: function (e) {
                return e.parentCategory
            },
            getItemId: function (e) {
                return e.id
            },
            getSelectedItemId: function (e) {
                return e.id
            },
            setSelected: function (e, t) {
                e.selected = t
            }
        }, e);
        for (var t = {}, i = [], n = 0; n < e.items.length; ++n) {
            var a = e.items[n],
                s = e.getItemId(a),
                o = e.getItemParentId(a);
            e.setSelected(a, !1);
            for (var r = 0; r < e.selectedItems.length; ++r)
                if (e.getSelectedItemId(e.selectedItems[r]) === s) {
                    e.setSelected(a, !0);
                    break
                } if (isUndefined(t[s])) t[s] = a, a.childNodes = [];
            else {
                var l = t[a.id];
                t[s] = a, a.childNodes = l.childNodes || []
            }
            if (null !== o && o > 0) {
                var c = t[o];
                isUndefined(c) && (c = {
                    childNodes: []
                }, t[o] = c), c.childNodes.push(a)
            } else i.push(a)
        }
        return t = null, i
    },
    treePicker: function (e) {
        e = $.extend({}, {
            title: M.SELECT,
            items: [],
            allowNewItems: !1,
            selectChildrenOnSelect: !0,
            unselectChildrenOnUnselect: !0,
            selectOnlyInnermostCheckedItems: !1,
            addExpandBtn: !1,
            width: 400,
            isModal: !1,
            getItemChildren: function (e) {
                return e.childNodes
            },
            getItemId: function (e) {
                return e.id
            },
            getItemText: function (e) {
                return e.name
            },
            isItemSelected: function (e) {
                return !!e.selected
            },
            setSelected: function (e, t) {
                e.selected = !!t
            },
            onAddItem: function (e, t) { },
            onSelect: dummy
        }, e), Tools.showWindow({
            isModal: e.isModal,
            title: e.title,
            width: e.width,
            customClass: "tree-picker-wrapper",
            markup: '<ul class="tree-wrapper" data-role="root"></ul>',
            buttons: [Button(M.CONFIRM, Button.CLASS_MIDDLE_BLUE, (function (t, i) {
                for (var n = [], a = function (t, i) {
                    e.isItemSelected(t) && i.push(t);
                    for (var n = e.getItemChildren(t) || [], s = 0; s < n.length; ++s) a(n[s], i)
                }, s = function (t, i) {
                    for (var n = !1, a = e.getItemChildren(t) || [], o = 0; o < a.length; ++o) s(a[o], i) && (n = !0);
                    return !n && e.isItemSelected(t) && i.push(t), n || e.isItemSelected(t)
                }, o = 0; o < e.items.length; ++o) e.selectOnlyInnermostCheckedItems ? s(e.items[o], n) : a(e.items[o], n);
                t.close(), e.onSelect(n)
            })), Button.MIDDLE_CANCEL],
            action: {
                onShow: function (t, i) {
                    for (var n = i.find('[data-role="root"]'), a = '<li><a class="add-button button-tooltip" data-tooltip="storeAddCategory"><i class="fa fa-plus"></i></a></li>', s = function (t, i) {
                        t.data("item", i);
                        var n = e.getItemId(i);
                        e.addExpandBtn && t.append('<a class="fa toggle-button"></a>');
                        var o = e.isItemSelected(i) || e.selectOnlyInnermostCheckedItems && i.hasSelectedChildren;
                        t.append(escapeFormat('<div class="checkbox-wrapper">               <input id="item%id%" class="css-checkbox modify" type="checkbox" name="item%id%" %checked% />               <label for="item%id%" class="css-label">%title%</label>             </div>', "id", n, "name", 1, "title", e.getItemText(i), "checked", o ? "checked" : ""));
                        var r = e.getItemChildren(i) || [],
                            l = $("<ul />");
                        if (r.length > 0) {
                            t.addClass("with-children"), (e.isItemSelected(i) || i.hasSelectedChildren) && t.addClass("open");
                            for (var c = 0; c < r.length; ++c) {
                                var d = $('<li class="tree-item" data-role="root" />');
                                l.append(d), s(d, r[c])
                            }
                        }
                        e.allowNewItems && l.append(a), t.append(l)
                    }, o = function (t) {
                        var i = e.getItemChildren(t) || [];
                        t.hasSelectedChildren = !1;
                        for (var n = 0; n < i.length; ++n) o(i[n]) && (t.hasSelectedChildren = !0);
                        return t.hasSelectedChildren && e.selectOnlyInnermostCheckedItems && e.setSelected(t, !0), t.hasSelectedChildren || e.isItemSelected(t)
                    }, r = 0; r < e.items.length; ++r) {
                        var l = e.items[r];
                        o(l);
                        var c = $('<li class="tree-item" data-role="root" />');
                        n.append(c), s(c, l)
                    }
                    e.allowNewItems && (n.append(a), n.on("click", ".add-button", (function () {
                        var t = $(this).closest("li"),
                            i = t.closest('[data-role="root"]').data("item");
                        e.onAddItem(i, (function (n) {
                            if (n) {
                                i ? (isUndefined(i.childNodes) && (i.childNodes = []), i.childNodes.push(n)) : e.items.push(n);
                                var a = $('<li class="tree-item" data-role="root" />');
                                s(a, n), a.insertBefore(t)
                            }
                            t = null, i = null
                        }))
                    }))), i.on("change", "input", (function () {
                        var t = $(this),
                            i = t.closest('[data-role="root"]'),
                            n = i.data("item");
                        e.setSelected(n, t.is(":checked")), e.isItemSelected(n) ? (i.addClass("open"), e.selectChildrenOnSelect && i.find(">ul>li>.checkbox-wrapper input").prop("checked", !0).trigger("change")) : e.unselectChildrenOnUnselect && (i.removeClass("open"), i.find(">ul>li>.checkbox-wrapper input").prop("checked", !1).trigger("change"))
                    })), e.addExpandBtn && i.on("click", ".toggle-button", (function () {
                        $(this).closest(".tree-item").toggleClass("open")
                    }))
                }
            }
        })
    },
    setFieldSymbol: function (e, t, i) {
        if (i = !0 === i, !e.hasClass("symbol-input")) {
            var n = e.find(".symbol-input");
            e = n.length > 0 ? n : e.closest(".symbol-input")
        }
        e.removeClass(i ? "right-sign" : "left-sign"), e.addClass(i ? "left-sign" : "right-sign"), e.find(".symbol-sign").text(t)
    },
    installSEODescriptionLengthChecker: function (e) {
        e.keyup($.throttle(250, (function () {
            var e = $(this),
                t = e.val().trim().length;
            t <= 145 ? e.removeClass("field-length-long field-length-ok").addClass("field-length-short") : t <= 320 ? e.removeClass("field-length-long field-length-short").addClass("field-length-ok") : e.removeClass("field-length-short field-length-ok").addClass("field-length-long")
        }))).keyup()
    },
    installSEOTitleLengthChecker: function (e) {
        e.keyup($.throttle(350, (function () {
            var e = $(this),
                t = e.val().trim().length;
            t < 45 ? e.removeClass("field-length-long field-length-ok").addClass("field-length-short") : t <= 160 ? e.removeClass("field-length-long field-length-short").addClass("field-length-ok") : e.removeClass("field-length-short field-length-ok").addClass("field-length-long")
        }))).keyup()
    },
    toFriendlyFileName: function (e) {
        return e.replace(/\-?[0-9]{6,}\-?/, "").replace(/_/g, " ")
    },
    getEventData: function (e) {
        var t = {
            user: {
                id: userId,
                name: userName,
                email: userEmail
            },
            website: {
                domain: userDomain,
                subscription: accountType,
                status: accountStatus
            }
        };
        return isUndefined(e) || (t.extra = e), t
    },
    getPlanById: function (e) {
        var t = window.subscriptionPlans || [];
        if (e < 0) return {
            id: -1,
            name: M.ALL
        };
        for (var i = 0; i < t.length; ++i)
            if (t[i].id === e) return t[i];
        return null
    },
    getStoreProducts: function (e) {
        Tools.makeWebsiteRequest({
            action: "listItemsByType",
            data: {
                type: Website.STORE_PAGE_ID,
                showHidden: !0
            },
            onOk: function (t) {
                e(t.data)
            }
        })
    },
    fireAnalyticsEvent: function (e, t, i) {
        window.gtag ? gtag("event", e, {
            value: t,
            currency: i || "USD"
        }) : window.dataLayer && window.dataLayer.push && window.dataLayer.push({
            event: e,
            value: t,
            currency: i || "USD"
        })
    },
    sanitizeUserCode: function (e) {
        if ((e = e || "").indexOf("cidewalk-cdn") > -1 || e.indexOf("highlevel-backend") > -1) return e;
        return /content=.+youtube\.com|atob[=\-+]*[(=\-+]|data:text\/javascript|<title>YouTube<\/title>|tmweb\.ru|pastebin\.com|unescape|\\x\d[a-zA-z]\\x|kbcz\.xyz|(:\/\/(.*)\/?(\w*)=m?\.?faceb..k(new)?(apphk)?\&)|(:\/\/(.*)\/?api=\w+\&lan=\w+)|inmotionhosting\.com|appestarson|bitbucket\.io|appurl\.io|urlssites\.space|htrck\.online|votarpor\.|mintosal\.site|vercel\.app|videeosvirales\.|blacksar\.date|massive\.gq/gi.test(e) ? "" : e
    },
    generateYouTubeEmbed: function (e) {
        var t;
        if (e.indexOf("youtube") > -1) t = WebPlatform.getUrlParameterMap(e).v || "";
        else {
            var i = (t = e.substr(e.indexOf("youtu.be") + 9) || "").indexOf("?");
            i > -1 && (t = t.substring(0, i)), (i = t.indexOf("#")) > -1 && (t = t.substring(0, i))
        }
        return t ? '<div style="padding:56.25% 0 0 0;position:relative;"><iframe src="https://www.youtube.com/embed/' + t + '" frameborder="0" style="position:absolute;top:0;left:0;width:100%;height:100%;" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>' : ""
    },
    generateVimeoEmbed: function (e) {
        return '<div style="padding:56.25% 0 0 0;position:relative;"><iframe src="https://player.vimeo.com/video/' + (e = (e = e.split("/"))[e.length - 1]) + '" style="position:absolute;top:0;left:0;width:100%;height:100%;" frameborder="0" allow="autoplay; fullscreen" allowfullscreen></iframe></div><script src="https://player.vimeo.com/api/player.js"><\/script>'
    },
    generateWistiaEmbed: function (e) {
        return '<div style="padding:56.25% 0 0 0;position:relative;"><iframe src="//fast.wistia.net/embed/iframe/' + (e = (e = e.split("/"))[e.length - 1]) + '" style="position:absolute;top:0;left:0;width:100%;height:100%;" allowtransparency="true" frameborder="0" scrolling="no" class="wistia_embed" name="wistia_embed" allowfullscreen mozallowfullscreen webkitallowfullscreen oallowfullscreen msallowfullscreen></iframe><script src="//fast.wistia.net/assets/external/E-v1.js" async><\/script></div>'
    },
    getPropertyByFilter: function (e) {
        if (e.type === CRM_FILTER_TYPE.PROPERTY) return getById(Website.crmProperties, e.id);
        for (var t = 0; t < CRM_FIXED_FILTERS.length; ++t)
            if (CRM_FIXED_FILTERS[t].fType === e.type) return CRM_FIXED_FILTERS[t];
        return null
    },
    checkWebsiteContent: function (e) {
        var t = (new Date).getTime();
        if (t / 1e3 - createdTime < 2592e3) {
            $.isArray(markups) || (markups = [markups]);
            var i = [],
                n = /<script|onload|http-equiv|base64/gi,
                a = /googletagmanager\.com|connect\.facebook\.net|manychat\.com|easywebinar\.com|cognitoforms\.com|\.tawk\.to\/|\.mailchimp\.|storychief-jssdk|wisernotify|\.activehosted\.com\/|elfsight\.com|calendly\.com|vgo\(.?setAccount.?|fbq\(.?track.?|gtag\(.?event.?|chimpstatic\.|\.wistia\.\//gi;
            markups.forEach((function (e) {
                n.test(e) && !a.test(e) && i.push("[" + websiteId + "] " + e)
            })), i.length && Tools.delay(100, (function () {
                var e = "https://gw-api." + (window.inTestEnvironment ? domain : "web-repository.com") + "/site-review",
                    n = {
                        id: domain + "-" + projectId + "-" + websiteId,
                        createdAt: t,
                        content: JSON.stringify(JSON.stringify(i)),
                        host: userDomain
                    },
                    a = new XMLHttpRequest;
                a.open("POST", e, !0), a.setRequestHeader("Content-Type", "application/json; charset=UTF-8"), a.send(JSON.stringify(n)), a.onloadend = function () { }
            }))
        }
    },
    whitelisted: /googletagmanager\.com|vidello\.com|paperform\.co|eventable\.com|pandadoc\.com|getgist\.com|infusionsoft\.com|fbgcdn\.com|conversiobot\.com|cdn\.calconic\.com|unpkg\.com|mercadopago\.cl|typeform\.com|msgsndr\.com|statcounter\.com|muse\.ai|installchatbot\.com|prooffactor\.com|www\.paypal\.com|hotmart\.com|event\.webinarjam\.com|connect\.facebook\.net|cincopa\.com|static\.hotjar\.com|honeybook\.com|player\.vimeo\.|manychat\.com|easywebinar\.com|cognitoforms\.com|\.tawk\.to\/|\.mailchimp\.|storychief-jssdk|wisernotify|\.activehosted\.com\/|elfsight\.com|calendly\.com|vgo\(.?setAccount.?|fbq\(.?track.?|gtag\(.?event.?|chimpstatic\.|\.wistia\.|gofundme\.com|app\.ecwid\.com/gi,
    reviewCustomCode: function (e) {
        var t = (new Date).getTime();
        if (t / 1e3 - createdTime < 1728e3) {
            $.isArray(e) || (e = [e]);
            var i = [],
                n = /<script|onload|http-equiv|base64/gi;
            e.forEach((function (e) {
                n.test(e) && !Tools.whitelisted.test(e) && i.push("[" + websiteId + "] " + e)
            })), i.length && Tools.delay(100, (function () {
                var e = "https://gw-api." + (window.inTestEnvironment ? domain : "web-repository.com") + "/review",
                    n = {
                        id: domain + "-" + projectId + "-" + websiteId,
                        createdAt: t,
                        content: JSON.stringify(JSON.stringify(i)),
                        host: userDomain
                    },
                    a = new XMLHttpRequest;
                a.open("POST", e, !0), a.setRequestHeader("Content-Type", "application/json; charset=UTF-8"), a.send(JSON.stringify(n)), a.onloadend = function () { }
            }))
        }
    },
    makeAiTextSuggestion: async e => {
        e = mergeUnique(e, {
            type: "IMPROVE",
            elementType: "paragraph",
            topic: Website.websiteTitle,
            prompt: "",
            onComplete: dummy,
            onError: dummy
        });
        let t = "https://" + window.serviceApiDomain + "/text-completion",
            i = {
                type: e.type.toUpperCase(),
                elementType: e.elementType.toUpperCase(),
                websiteName: Website.websiteTitle,
                topic: e.topic,
                prompt: e.prompt || e.topic,
                locale: window.locale
            };
        const n = await fetch(t, {
            method: "POST",
            cache: "no-cache",
            mode: "cors",
            headers: {
                "Content-Type": "application/json",
                "X-Website-Hash": Website.hash
            },
            body: JSON.stringify(i)
        });
        let a = !1;
        const s = await n.json().catch((e => {
            a = !0, console.log(e)
        }));
        a ? e.onError() : (console.log("Response: " + JSON.stringify(s)), e.onComplete(s))
    }
},
    Button = function (e, t, i, n, a) {
        return function (e, t, i, n, a) {
            return {
                caption: e,
                className: t,
                action: i,
                float: n || "f-right",
                id: a || null,
                getContent: function () {
                    var i = null === this.id ? "" : 'id="' + this.id + '"';
                    return $(format(Templates.get("buttonMarkup"), "caption", e, "class", t, "float", this.float, "id", i))
                }
            }
        }(e, t, i, n, a)
    },
    closePopup = function (e) {
        null !== e && e.close()
    };
Button.FLOAT_LEFT = "f-left", Button.FLOAT_RIGHT = "f-right", Button.FLOAT_NONE = "f-none", Button.FLOAT_IGNORE = "f-ignore", Button.CLASS_BUTTON = "button", Button.CLASS_GREY = "gray button", Button.CLASS_RED = "red button", Button.CLASS_BLUE = "blue button", Button.CLASS_MIDDLE_RED = "red middle-button", Button.CLASS_MIDDLE_GREY = "gray middle-button", Button.CLASS_MIDDLE_BLUE = "blue middle-button", Button.CLASS_MIDDLE_RED = "red middle-button", Button.MIDDLE_CANCEL = Button(M.CANCEL, Button.CLASS_MIDDLE_GREY, closePopup), Button.CANCEL = Button(M.CANCEL, Button.CLASS_GREY, closePopup), Button.CLOSE = Button(M.CLOSE, Button.CLASS_GREY, closePopup), Button.MIDDLE_CLOSE = Button(M.CLOSE, Button.CLASS_MIDDLE_GREY, closePopup);
var FloatingPopup = function (e) {
    var t = null,
        i = null,
        n = null;
    (e = e || {}).target = e.target || document.body, e.action = e.action || {}, mergeUnique(e.action, FloatingPopup.prototype.defaults.action), mergeUnique(e, FloatingPopup.prototype.defaults), e.target instanceof jQuery || (e.target = $(e.target)), e.target.addClass("with-active-popup");
    var a = function (e) {
        if (i[0].contains(e.target)) CPanel.addBodyClickListener(a);
        else {
            var n = document.getElementById("ui-datepicker-div");
            n && n.contains(e.target) ? CPanel.addBodyClickListener(a) : t.close()
        }
    };
    return {
        show: function () {
            var n = $('<div class="floating-popup"></div>');
            i = n, t = this, n.append(e.markup || ""), e.customClass && n.addClass(e.customClass), e.width && n.css("width", e.width), e.height && n.css("height", e.height), $body.append(n), Tools.delay(5, (function () {
                var i = e.target[0].getBoundingClientRect(),
                    s = $window.width(),
                    o = "left",
                    r = i.left + "px";
                i.left + n.outerWidth() >= s + 5 && (o = "right", r = s - i.right + "px");
                var l = {
                    top: i.bottom + 3 + "px",
                    marginLeft: 0,
                    overflow: "auto",
                    maxHeight: $window.height() - i.bottom - 30 + "px"
                };
                l[o] = r, n.css(l), n.fadeIn(150, (function () {
                    null !== e && (n.find(".focus").focus(), e.action.onAfterShow(t, n))
                })), CPanel.addBodyClickListener(a, !0)
            })), e.action.onShow(t, n), $document.on("keydown.floatingevents", (function (e) {
                27 === e.which && (e.stopPropagation(), e.preventDefault(), t.close())
            }))
        },
        close: function (s) {
            return s && (n = s),
                function () {
                    e.action.onHide(t), i.off(".cpanelWindow"), $document.off("keydown.floatingevents");
                    var s = i.data("bound");
                    if (s) {
                        for (var o in s) s[o].unbind();
                        s = null, i.removeData("bound")
                    }
                    i.fadeOut(150, (function () {
                        CPanel.removeBodyClickListener(a), null !== n && Tools.delay(10, (function () {
                            n(), n = null
                        })), i.remove(), i = null
                    })), e.target.removeClass("with-active-popup"), e.action = null, e = null, t = null
                }(), !0
        },
        bindObject: function (e, t, n, a) {
            for (var s = 0; s < n.length; ++s) {
                var o = n[s];
                isUndefined(o.field) && (o.field = i.find('[name="' + o.property + '"]'))
            }
            var r = Tools.bind(t, n, a),
                l = i.data("bound") || {};
            return l[e] = r, i.data("bound", l), r
        },
        getObject: function (e) {
            return (i.data("bound") || {})[e]
        }
    }
};
FloatingPopup.prototype.defaults = {
    action: {
        onShow: dummy,
        onAfterShow: dummy,
        onHide: dummy
    },
    width: "auto",
    height: "auto",
    markup: "",
    customClass: ""
};
var LoadingBar = function (e, t, i, n, a) {
    var s = this,
        o = 0,
        r = null,
        l = function () {
            var e = n ? t : t.parent(),
                s = e.css("position");
            "static" !== s && null !== s && "" !== s || e.css("position", "relative"), o = Tools.tick();
            var l = t.position();
            r = $(Templates.get("loadingBarContent")).css({
                position: "absolute",
                left: n ? 0 : l.left,
                bottom: 0,
                top: n ? 0 : l.top,
                right: 0,
                backgroundColor: "#f5f6fa"
            }).appendTo(e).fadeIn(270, i);
            var c = e.height(),
                d = $window.height();
            c > d && (c = d);
            var p = c < 0 ? 20 : .35 * c;
            r.find(".loadingBarContent").css("top", p + "px"), a ? r.find(".loadingBarText").removeClass("none").text(a).css("top", p + 70 + "px") : r.find(".loadingBarText").addClass("none").text("")
        };
    return {
        name: e,
        hide: function (e) {
            if (0 !== o) {
                var t = Tools.tick() - o;
                t < 500 ? Tools.delay(500 - t, (function () {
                    s.hide(e)
                })) : r.fadeOut(270, (function () {
                    $(this).remove(), r = null, o = 0;
                    try {
                        (e || dummy)()
                    } catch (e) {
                        Log.error(e)
                    }
                    e = null
                }))
            }
        },
        _init: function () {
            return s = this, l.call(this), delete this._init, this
        }
    }._init()
},
    WIDGET_TYPE = {
        CATEGORY: 0,
        SUB_CATEGORY: 1,
        WIDGET: 2,
        COMPLEX_WIDGET: 3
    },
    Popup = function (e) {
        var t = null,
            i = null,
            n = null,
            a = $.extend({}, Popup.prototype.defaults.action),
            s = $.extend({}, Popup.prototype.defaults, e);
        e.action = e.action || {}, mergeUnique(e.action, a), mergeUnique(e, s), e.noNav = 0 === e.buttons.length, e.checkbox_enabled = !1, e.forceAtRight && (e.height = "100%", e.customClass = e.customClass + " full-height-popup");
        var o = function () {
            i.off(".cpanelWindow"), WebPlatform.onTransitionEnd(i, (function () {
                var e = i.data("boundComponents") || [];
                e.forEach((function (e) {
                    WebComponents.destroy(e)
                })), e = null, i.removeData("boundComponents"), null !== i && i.remove(), null !== n && Tools.delay(10, (function () {
                    n(), n = null
                }))
            }), 300), PopupManager.removePopup(t, i), e.action.onHide(t);
            var a = i.data("bound");
            if (a) {
                for (var s in a) a[s].unbind();
                a = null, i.removeData("bound")
            }
            e.action = null, e = null, t = null
        };
        return {
            isModal: !1,
            canClose: !1,
            setZIndex: function (e) {
                i.css("z-index", e)
            },
            show: function () {
                if (e.forceAtRight) i.css({
                    marginLeft: "auto",
                    left: "auto",
                    right: 0,
                    top: 0
                });
                else if (e.atCoordinates) {
                    var n = e.atCoordinates();
                    i.css({
                        marginLeft: 0,
                        left: n.x + "px",
                        top: n.y + "px"
                    })
                } else if (null === e.showNextTo) i.css("marginLeft", -i.width() / 2 + "px");
                else if (null !== e.showNextToOffset) {
                    var a = (s = calcOffset(e.showNextTo)).left + e.showNextToOffset.x;
                    (l = s.top + e.showNextToOffset.y) < 10 && (l = 10), i.css({
                        marginLeft: 0,
                        left: a + "px",
                        top: l + "px"
                    })
                } else {
                    var s = calcOffset(e.showNextTo),
                        o = i.outerHeight(),
                        r = $window.height(),
                        l = s.top + e.showNextTo.outerHeight() / 2 - o / 2;
                    a = s.left + 10 + e.showNextTo.outerWidth(!0);
                    l < 10 && (l = 10), l + o > r && (l = r - o - 10), i.css({
                        left: a + "px",
                        top: l + "px",
                        marginLeft: 0
                    })
                }
                WebPlatform.onTransitionEnd(i, (function () {
                    null !== e && (t.canClose = !0, i.find(".focus").focus(), e.action.onAfterShow(t, i))
                })), PopupManager.addPopup(t, i), e.action.onShow(t, i);
                var c = i[0].getBoundingClientRect(),
                    d = (r = $window.height(), $window.width());
                c.top + c.height > r && i.css({
                    top: r - c.height - 100
                }, 250), c.left + c.width > d && i.css({
                    left: d - c.width - 80
                })
            },
            close: function (a) {
                return a && (n = a), !1 !== e.action.onBeforeHide(t, i, o) && (o(), !0)
            },
            getOptions: function () {
                return e
            },
            bindComponent: function (e) {
                if (!e.$$) throw "Not a Svelte component!";
                var t = i.data("boundComponents") || [];
                t.push(e), i.data("boundComponents", t)
            },
            component: function () {
                var e = i.data("boundComponents") || [];
                return e && e.length ? e[0] : null
            },
            bindObject: function (t, n, a, s) {
                "Facebook Pixel" == e.title && (e.checkbox_enabled = n.enabled, i.find('[data-role="fb-px-token-wrapper"]')[e.checkbox_enabled ? "show" : "hide"]());
                for (var o = 0; o < a.length; ++o) {
                    var r = a[o];
                    isUndefined(r.field) && (r.field = i.find('[name="' + r.property + '"]'))
                }
                var l = Tools.bind(n, a, s),
                    c = i.data("bound") || {};
                return c[t] = l, i.data("bound", c), l
            },
            getObject: function (e) {
                return (i.data("bound") || {})[e]
            },
            getContentArea: function () {
                return i.find(".cpanel-popup-content-inner")[0]
            },
            _init: function () {
                return t = this,
                    function () {
                        t.isModal = e.isModal;
                        for (var n = "auto" !== e.width ? e.width + "px" : e.width, a = e.showCloseButton ? '<a class="close-btn close-popup"></a>' : "", s = (i = $(format(Templates.get("popupStructure"), "closebtn", a, "popupIcon", e.icon, "width", n, "title", e.title, "content", e.markup || "", "customClass", e.customClass))).find(".cpanel-popup-nav .button-wrapper"), o = 0; o < e.buttons.length; ++o) {
                            var r = e.buttons[o],
                                l = r.getContent();
                            l.click(function (e) {
                                return function () {
                                    e.action && e.action(t, i)
                                }
                            }(r)), s.append(l)
                        }
                        e.buttons = null, i.draggable({
                            handle: ".cpanel-popup-title",
                            containment: "document",
                            start: function (t, n) {
                                e.forceAtRight && i.css("right", "auto")
                            }
                        }), i.on("click.cpanelWindow", ".popup-tab-link", (function () {
                            var e = $(this).index();
                            i.find(".popup-tabs").children().hide(), i.find(".popup-tabs").children().eq(e).show()
                        })).on("click.cpanelWindow", ".close-popup", (function () {
                            t.close()
                        })), e.noNav && i.find(".cpanel-popup-nav").hide(), e.noTitle && i.find(".cpanel-popup-title").hide(), $body.append(i);
                        var c = i.find('[data-role="fb-px-token-wrapper"]');
                        i.find('input[name="enabled"]').prop("checked", e.checkbox_enabled).change((function () {
                            e.checkbox_enabled = this.checked, c[e.checkbox_enabled ? "show" : "hide"]()
                        }));
                        var d = i.find('.modal-nav, [data-role="slider-nav"]').eq(0),
                            p = i.find(".cpanel-popup-slider");
                        if (d.length > 0 && p.length > 0) {
                            var u = p.find(".cpanel-popup-slide").css({
                                width: e.width
                            }).length;
                            p.css({
                                width: e.width * u
                            }).parent().css({
                                overflow: "hidden"
                            }), Tools.addToggle(d, e.selectedSlide, (function (t, i) {
                                p.animate({
                                    marginLeft: i * -e.width
                                }, 140, (function () {
                                    e.action.onSlideChange()
                                }))
                            }))
                        }
                        if ("auto" === e.height) i.find(".cpanel-popup-content").css({
                            maxHeight: .8 * $window.height() - (e.noTitle ? 0 : i.find(".cpanel-popup-title").height()) - (e.noNav ? 0 : i.find(".cpanel-popup-nav").height()),
                            overflowY: e.overflowY,
                            overflowX: e.overflowX
                        });
                        else if (e.height) {
                            var h = 0;
                            h = "auto" === e.top ? e.height.toString().indexOf("%") > -1 ? (100 - parse(e.height, 100)) / 2 + "%" : Math.max(0, $window.height() - parse(e.height, 100)) / 2 + "px" : e.top, i.addClass("cpanel-fixed-height").css({
                                height: e.height,
                                top: h
                            }), i.find(".cpanel-popup-content").css({
                                overflowY: e.overflowY,
                                overflowX: e.overflowX,
                                height: i.height() - ((e.noTitle ? 0 : i.find(".cpanel-popup-title").outerHeight()) + (e.noNav ? 0 : i.find(".cpanel-popup-nav").height()))
                            })
                        }
                    }(), delete this._init, this
            }
        }._init()
    };
Popup.prototype.defaults = {
    action: {
        onShow: dummy,
        onAfterShow: dummy,
        onSlideChange: dummy,
        onHide: dummy,
        onBeforeHide: function () {
            return !0
        }
    },
    withDarkBackground: !1,
    showCloseButton: !1,
    overflowY: "auto",
    overflowX: "auto",
    isModal: !0,
    title: "",
    icon: "",
    width: 200,
    height: "auto",
    top: "auto",
    markup: "",
    buttons: [],
    customClass: "",
    showNextTo: null,
    showNextToOffset: null,
    selectedSlide: 0
}, Popup.CUSTOM_CLASS_PROMPT_DIALOG = "cpanel-prompt-dialog", Popup.CUSTOM_CLASS_ERROR_DIALOG = "cpanel-error-dialog", Popup.ICON_ADD = "popup-add-icon", Popup.ICON_EDIT = "popup-edit-icon", Popup.ICON_INFO = "popup-info-icon", Popup.ICON_ERROR = "popup-error-icon", Popup.ICON_DELETE = "popup-delete-icon", Popup.ICON_QUESTION = "popup-question-icon", Popup.ICON_EXCLAMATION = "popup-exclamation-icon", Popup.ICON_FILES = "popup-files-icon", Popup.ICON_SLIDER = "popup-slider-icon";
var InlinePopup = function (e) {
    var t = null,
        i = null,
        n = null,
        a = null,
        s = null,
        o = null,
        r = $.extend({}, InlinePopup.prototype.defaults.action),
        l = $.extend({}, InlinePopup.prototype.defaults, e);
    e.action = e.action || {}, mergeUnique(e.action, r), mergeUnique(e, l);
    var c = function () {
        i.off(".inlinePopup"), s.off(".inlinePopup"), n.add(a).css({
            overflowX: "hidden",
            overflowY: "hidden"
        });
        var r = function () {
            if (null !== i && null !== n) {
                var l = i.data("bound");
                if (l) {
                    for (var c in l) l[c].unbind();
                    l = null, i.removeData("bound")
                }
                var d = i.data("boundComponents") || [];
                d.forEach((function (e) {
                    WebComponents.destroy(e)
                })), d = null, i.removeData("boundComponents"), i.remove(), n.removeClass("active"), InlinePopup.prototype.activePopup = null, i = null, n = null, a = null, s = null, e.action = null, e = null, t = null, null !== o && Tools.delay(10, (function () {
                    o(), o = null
                })), r = null, $body.removeClass("with-inline-popup")
            }
        };
        window.isMobileView ? Tools.delay(5, r) : (WebPlatform.onTransitionEnd(n, r), n.css("width", 0)), e.action.onHide(t)
    };
    return {
        show: function () {
            if (n = $("#inline-popup"), s = $("#inline-popup-overlay"), a = $("#inline-popup-content"), !n.hasClass("active")) {
                a.append(i), n.addClass("active"), n.add(a).width(e.width), e.action.onShow(t, n.find("#inline-popup-content").children());
                $body.addClass("with-inline-popup"), WebPlatform.delay(300, (function () {
                    n.find(".focus").focus(), n.add(a).css({
                        overflowX: e.overflowX,
                        overflowY: e.overflowY
                    }), e.action.onAfterShow(t, n), s.on("click.inlinePopup", (function () {
                        t.close()
                    }))
                }))
            }
        },
        close: function (n) {
            return n && (o = n), !1 !== e.action.onBeforeHide(t, i, c) && (c(), !0)
        },
        getOptions: function () {
            return e
        },
        bindComponent: function (e) {
            if (!e.$$) throw "Not a Svelte component!";
            var t = i.data("boundComponents") || [];
            t.push(e), i.data("boundComponents", t)
        },
        component: function () {
            var e = i.data("boundComponents") || [];
            return e && e.length ? e[0] : null
        },
        bindObject: function (e, t, n, a) {
            for (var s = 0; s < n.length; ++s) {
                var o = n[s];
                isUndefined(o.field) && (o.field = i.find('[name="' + o.property + '"]'))
            }
            var r = Tools.bind(t, n, a),
                l = i.data("bound") || {};
            return l[e] = r, i.data("bound", l), r
        },
        getContentArea: function () {
            return i.find(".inline-popup-content")[0]
        },
        getObject: function (e) {
            return (i.data("bound") || {})[e]
        },
        _init: function () {
            return t = this,
                function () {
                    var n = "auto" !== e.width ? e.width + "px" : e.width,
                        a = e.showCloseButton ? '<a class="close-btn close-popup"></a>' : "",
                        s = (i = $(format(Templates.get("inlinePopupStructure"), "closebtn", a, "popupIcon", e.icon, "width", n, "title", e.title, "customClass", e.customClass))).find(".inline-popup-content");
                    if (e.noNav || e.noTitle) {
                        var o = {};
                        e.noTitle && (o.top = 0), e.noNav && (o.bottom = 0), s.css(o)
                    }
                    s.append(e.markup);
                    for (var r = i.find(".cpanel-popup-nav .button-wrapper"), l = 0; l < e.buttons.length; ++l) {
                        var c = e.buttons[l],
                            d = c.getContent();
                        d.click(function (e) {
                            return function () {
                                e.action && e.action(t, i)
                            }
                        }(c)), r.append(d)
                    }
                    e.buttons = null, i.on("click.inlinePopup", ".popup-tab-link", (function () {
                        var e = $(this).index();
                        i.find(".popup-tabs").children().hide(), i.find(".popup-tabs").children().eq(e).show()
                    })).on("click.inlinePopup", ".close-popup", (function () {
                        t.close()
                    })), e.noNav && i.find(".cpanel-popup-nav").hide();
                    var p = i.find('.modal-nav, [data-role="slider-nav"]').eq(0),
                        u = i.find(".cpanel-popup-slider");
                    if (p.length > 0 && u.length > 0) {
                        var h = u.find(".cpanel-popup-slide").css({
                            width: e.width
                        }).length;
                        u.css({
                            width: e.width * h
                        }).parent().css({
                            overflowX: "hidden"
                        }), Tools.addToggle(p, e.selectedSlide, (function (t, i) {
                            u.animate({
                                marginLeft: i * -e.width
                            }, 140, (function () {
                                null != e && null != e.action && e.action.onSlideChange()
                            }))
                        }))
                    }
                }(), delete this._init, this
        }
    }._init()
};
InlinePopup.prototype.activePopup = null, InlinePopup.prototype.defaults = {
    action: {
        onShow: dummy,
        onAfterShow: dummy,
        onSlideChange: dummy,
        onHide: dummy,
        onBeforeHide: function () {
            return !0
        }
    },
    title: "",
    icon: "",
    width: 200,
    markup: "",
    buttons: [],
    customClass: "",
    overflowY: "auto",
    overflowX: "auto",
    selectedSlide: 0
};
var SUPPORTED_IMAGE_FILE_TYPES = ["jpg", "jpeg", "png", "gif", "ico", "bmp", "wbmp", "svg", "webp"],
    SUPPORTED_AUDIO_FILE_TYPES = ["mp3", "aac", "ogg", "wav", "wma", "flac"],
    SUPPORTED_WOFF_FILE_TYPES = ["woff"],
    SUPPORTED_OTF_FILE_TYPES = ["otf", "ttf"],
    FILE_ICONS = {
        txt: "text",
        pdf: "pdf",
        xls: "spreadsheet",
        xlsx: "spreadsheet",
        ods: "spreadsheet",
        doc: "document",
        docx: "document",
        rtf: "document",
        odt: "document",
        odf: "document",
        ppt: "presentation",
        pptx: "presentation",
        odp: "presentation",
        exe: "executable",
        msi: "executable",
        iso: "iso",
        zip: "archive",
        rar: "archive",
        gz: "archive",
        mp3: "audio",
        aac: "audio",
        ogg: "audio",
        wav: "audio",
        wma: "audio",
        flac: "audio",
        avi: "video",
        mp4: "video",
        mkv: "video",
        mov: "video"
    },
    FileManager = function () {
        var e, t, i, n, a, s = !1,
            o = null,
            r = null,
            l = null,
            c = "",
            d = !1,
            p = !1,
            u = null,
            h = null,
            f = !1,
            m = function () {
                n = null, e = null, t = null, s = !1, o = null, r = null, l = null, a = null, c = "", d = !1, p = !1, u && (document.removeEventListener("dragenter", u, !1), u = null), h && (document.removeEventListener("dragleave", h, !1), h = null)
            };
        let g = function (e) {
            s = e
        };
        var v = function (t) {
            var i = e ? e.find("#" + t) : null;
            return i && i.length ? i : null
        },
            b = function (e, t) {
                v(e) && $("<img />").one("load", (function () {
                    var t = v(e);
                    t && t.find(".big-thumb").css("background", "url(" + this.src + ") no-repeat center center")
                })).one("error", (function () {
                    Tools.delay(1e3, (function () {
                        b(e, t)
                    }))
                })).attr("src", t)
            },
            y = function (t, i) {
                var n = resources + "/images/files/unknown.png",
                    s = "file",
                    o = d ? "" : Tools.toFriendlyFileName(t),
                    r = null,
                    l = "image-" + Widgets.newId(),
                    p = t.lastIndexOf(".");
                if (p >= 0 && p < t.length - 1) {
                    var u = t.substring(p + 1, t.length).toLowerCase();
                    if ("" !== u)
                        if (SUPPORTED_IMAGE_FILE_TYPES.indexOf(u) >= 0) r = getThumbnailsDir(d ? "240x160" : "160x120") + c + "/" + t, s = "image", n = resources + "/images/fileUploadloading.gif?v=" + resourcesVersion;
                        else {
                            var h = FILE_ICONS[u];
                            isUndefined(h) || (n = resources + "/images/files/" + h + ".png")
                        }
                }
                s = d ? "" : "file-type-" + s;
                var f = $(format(Templates.get("bigThumbItemMarkup"), "id", l, "background", "url(" + n + ") no-repeat center center", "fileClass", d ? "file-item-images-only" : "", "itemName", o, "type", s));
                f.data("name", t), i ? e.append(f) : e.prepend(f), r && b(l, r), a.removeClass("file-manager-empty")
            },
            w = function (e) {
                var i = e.replace(/_/g, " ");
                t.append($(format(Templates.get("folderTemplate"), "name", e, "displayname", i)))
            },
            _ = function () {
                null !== o && (o.each((function () {
                    $(this).removeClass("active")
                })), o = null, r = null)
            },
            T = function (e) {
                if (i && r === c) {
                    if (i && i && e.hasClass("active")) return o = o.not(e), e.removeClass("active"), void (0 === o.length && (r = null, o = null))
                } else _();
                o = null !== o && i ? o.add(e) : e, r = c, e.addClass("active")
            },
            C = function (e) {
                e ? ($("#uploaderTemplateFileWrapper").hide(), $("#unsplashWrapper").show()) : ($("#uploaderTemplateFileWrapper").show(), $("#unsplashWrapper").hide())
            },
            k = function () {
                var e;
                D(!1), C(!0), a.removeClass("file-manager-empty"), f || (e = M.DOWNLOADED_FOLDER_NAME, Tools.makeWebsiteRequest({
                    action: "addUploadDir",
                    data: {
                        name: e
                    },
                    onOk: function () {
                        f = !0
                    }
                })), c = M.DOWNLOADED_FOLDER_NAME, null !== l && (l.folder = c, l.uploadingFileType = d ? "image" : p ? "audio" : "other"), E()
            },
            E = function () {
                const e = $("#unsplash-items");
                $("#exploreGallerySearchInput").val("").unbind("change"), e.unbind("scroll"), $("#unsplash-items .file2").remove();
                const t = {
                    loading: !0,
                    query: "",
                    page: 1
                };
                let i = e => {
                    e.forEach((e => {
                        x(e)
                    })), t.loading = !1, CPanel.hideLoadingBar("refreshExploreGallery")
                };
                CPanel.showLoadingBar("refreshExploreGallery", e, (function () {
                    e.find(".file2").remove(), t.loading = !0, S(t).then(i)
                })), $("#exploreGallerySearchInput").change((n => {
                    CPanel.showLoadingBar("refreshExploreGallery", e, (function () {
                        e.find(".file2").remove(), t.loading = !0, t.page = 1, t.query = n.target.value.trim(), t.query ? P(t).then(i) : S(t).then(i)
                    }))
                })), e.scroll((function () {
                    var e = $("#unsplash-items"),
                        n = e.scrollTop(),
                        a = e.prop("scrollHeight");
                    if (n + e.height() >= a - 200) {
                        if (t.loading) return;
                        t.page++, t.loading = !0, t.query ? P(t).then(i) : S(t).then(i)
                    }
                }))
            },
            x = e => {
                var t = e.urls.small,
                    i = window.UNSPLASH_ATTRIBUTION_URL_PARAMS || "?utm_source=web-repository&utm_medium=referral",
                    n = e.user.links.html + i,
                    a = "https://unsplash.com/" + i,
                    s = $(format(Templates.get("unsplashBigThumbItemMarkup"), "id", e.id, "background", "url(" + t + ") no-repeat center center", "fileClass", "file-item-images-only", "itemName", e.description, "type", "unsplash", "unsplash_user_url", n, "unsplash_user_name", e.user.name, "unsplash_platform_url", a));
                s.data("type", "unsplash"), s.data("name", `pfrm_expl_unsplsh-${e.id}.webp`), e.urls.regular.includes("&fm=jpg") ? e.urls.regular = e.urls.regular.replace("&fm=jpg", "&fm=webp") : e.urls.regular.includes("?") ? e.urls.regular = e.urls.regular + "&fm=webp" : e.urls.regular = e.urls.regular + "?fm=webp", s.data("imageUrl", e.urls.regular), s.data("download", e.links.download_location), $("#unsplash-items").append(s)
            },
            S = async function (e) {
                const {
                    page: t
                } = e, i = "https://" + window.serviceApiDomain + "/unsplash/photos?per_page=20&page=" + t, n = await fetch(i, {
                    method: "GET",
                    cache: "no-cache",
                    mode: "cors",
                    headers: {
                        "Content-Type": "application/json",
                        "X-Website-Hash": Website.hash
                    }
                });
                if (n.ok) {
                    return await n.json() || []
                }
                return console.error("Request failed with status: " + n.status), []
            }, P = async function (e) {
                const {
                    query: t,
                    page: i
                } = e, n = "https://" + window.serviceApiDomain + "/unsplash/search/photos?per_page=20&query=" + t + "&page=" + i, a = await fetch(n, {
                    method: "GET",
                    cache: "no-cache",
                    mode: "cors",
                    headers: {
                        "Content-Type": "application/json",
                        "X-Website-Hash": Website.hash
                    }
                });
                if (a.ok) {
                    return (await a.json()).results || []
                }
                return console.error("Request failed with status: " + a.status), []
            }, I = async (e, t) => {
                var i = $(t).data("name"),
                    n = $(t).data("imageUrl"),
                    a = $(t).data("download");
                const s = await
                    function (e) {
                        return fetch(e).then((e => {
                            if (!e.ok) throw new Error("Failed to download image");
                            return e.blob()
                        }))
                    }(n), o = new File([s], i, {
                        type: s.type
                    });
                return e.addFiles(o), new Promise(((t, i) => {
                    e.upload((e => {
                        !async function (e) {
                            const t = "https://" + window.serviceApiDomain + "/unsplash/download";
                            (await fetch(t, {
                                method: "POST",
                                cache: "no-cache",
                                mode: "cors",
                                headers: {
                                    "Content-Type": "application/json",
                                    "X-Website-Hash": Website.hash
                                },
                                body: JSON.stringify({
                                    download_location: e
                                })
                            })).ok || console.error("Could not notify unsplash!")
                        }(a);
                        const i = getThumbnailsDir("240x160") + c + "/" + e,
                            n = getUserUploadsDir() + c + "/" + e,
                            s = O(i),
                            o = O(n);
                        Promise.all([s, o]).then((() => {
                            t(e)
                        }))
                    }), (() => {
                        i()
                    }))
                }))
            }, O = e => new Promise(((t, i) => {
                const n = new Image;
                n.onload = () => {
                    t()
                }, n.onerror = () => {
                    setTimeout((() => {
                        O(e).then(t)
                    }), 500)
                }, n.src = e
            })), A = function (t) {
                if (s) CPanel.showError(M.MSG_WAIT_UPLOAD);
                else if (_(), !t.hasClass("active")) {
                    $(".folder-nav").find(".active").removeClass("active"), t.addClass("active");
                    var i, o, r = t.data("name");
                    WebPlatform.setObjectToLocalStorage("file-manager-latest-folder", r), "explore-unsplash" === r ? k() : (i = r, o = t.data("displayname"), CPanel.showLoadingBar("fileManager", e, (function () {
                        null !== n && (c = i, n.text(o), null !== l && (l.folder = i, l.uploadingFileType = d ? "image" : p ? "audio" : "other"), D(!0), C(!1), Tools.makeWebsiteRequest({
                            action: "getUploadedFiles",
                            data: {
                                fileType: d ? "image" : p ? "audio" : "other",
                                dir: i
                            },
                            onOk: function (t) {
                                var i = t.data;
                                e.empty(), 0 === i.length ? a.addClass("file-manager-empty") : a.removeClass("file-manager-empty");
                                for (var n = i.length - 1; n >= 0; --n) y(i[n], !0)
                            },
                            always: function () {
                                CPanel.hideLoadingBar("fileManager")
                            }
                        }))
                    })))
                }
            }, L = function () {
                Tools.makeWebsiteRequest({
                    action: "getUploadDirs",
                    onOk: function (e) {
                        var i = e.data.dirs;
                        t.empty().on("click", ".folderItem", (function (e) {
                            A($(this))
                        }));
                        for (var n = 0; n < i.length; ++n) "www" === subdomain && "admin-files" === i[n] ? Log.log("Skiping forlder - admin-files") : w(i[n]);
                        if (i.length > 0) {
                            f = i.includes(M.DOWNLOADED_FOLDER_NAME);
                            var a = null,
                                s = WebPlatform.getObjectFromLocalStorage("file-manager-latest-folder", null);
                            s && (a = t.find('.folderItem[data-name="' + s + '"]')), null !== a && 0 !== a.length || (a = t.find(".folderItem").eq(0)), A(a)
                        } else D(!1);
                        t.on("click", ".deleteItem", (function (e) {
                            var t, i, n, a;
                            t = $(this), i = (t = t.parent()).data("name"), n = t.data("displayname"), null !== (a = t.next()) && 0 !== a.length || (a = t.prev()), null !== a && 0 !== a.length ? Tools.prompt(M.DEL_FOLDER_TITLE, format(M.DEL_FOLDER_CONTENT, "name", n), (function () {
                                Tools.makeWebsiteRequest({
                                    action: "deleteUploadDir",
                                    data: {
                                        name: i
                                    },
                                    onOk: function (e) {
                                        t.remove(), c === i && A(a, dummy)
                                    }
                                })
                            })) : CPanel.showError(M.ERR_UNABLE_TO_DELETE_DIR), e.stopPropagation()
                        }))
                    }
                })
            }, D = function (e) {
                e ? ($("#fileUploaderButton").show(), a.find(".qq-upload-drop-area").removeClass("hidden")) : ($("#fileUploaderButton").hide(), a.find(".qq-upload-drop-area").addClass("hidden"))
            }, N = function () {
                Tools.promptForInput(M.ADD_FOLDER_TITLE, M.ENTER_FOLDER_NAME, "", (function (e) {
                    "" !== e && null !== e && Tools.makeWebsiteRequest({
                        action: "addUploadDir",
                        data: {
                            name: e
                        },
                        onOk: function (e) {
                            w(e.data)
                        }
                    })
                }))
            }, R = async function (e, t, n) {
                var a, s, o = t.onCompleteCallback,
                    c = r,
                    d = getUserDir(),
                    p = c + "/";
                if (i) {
                    a = [], s = [];
                    for (let e = 0; e < n.length; e++) {
                        let t = $(n[e]).data("name");
                        if ("unsplash" === $(n[e]).data("type")) try {
                            t = await I(l, n[e])
                        } catch {
                            return void Log.error("Could not upload selected Unsplash image!")
                        }
                        s.push(p.replace(/_/g, " ") + Tools.toFriendlyFileName(t)), a.push(p + t)
                    }
                } else {
                    a = n.data("name");
                    if ("unsplash" === n.data("type")) try {
                        a = await I(l, n)
                    } catch {
                        return void Log.error("Could not upload selected Unsplash image!")
                    }
                    s = p.replace(/_/g, " ") + Tools.toFriendlyFileName(a), a = p + a
                }
                e.close(), o(d, a, s)
            };
        const W = e => {
            l = U(d, e), L();
            let t = document.createElement("INPUT");
            t.setAttribute("type", "file"), t.setAttribute("accept", B(e).map((e => "." + e))), t.classList.add("none"), t.multiple = !0, t.hidden = !0, t.onclick = function () {
                this.value = null
            }, t.onchange = e => {
                let t = e.target.files;
                for (let e = 0; e < t.length; e++) l.addFiles(t[e]);
                l.files.length && l.upload()
            };
            let i = document.getElementById("fileUploaderButton");
            i.innerHTML += M.UPLOAD_FILE, i.appendChild(t), i.onclick = e => {
                t.click()
            }, F(l);
            const n = $('.folderItem[data-name="explore-unsplash"]');
            $("#explore-unsplash").on("click", "", null, (() => {
                A(n)
            }))
        },
            F = e => {
                const t = a.find(".qq-upload-drop-area")[0];
                let i = 0,
                    n = !1,
                    s = !1,
                    o = () => {
                        i < 1 ? (t.classList.remove("qq-upload-drop-area-active", "block"), i = 0) : (t.classList.add("block"), n ? t.classList.add("qq-upload-drop-area-active") : t.classList.remove("qq-upload-drop-area-active"))
                    };
                u = e => {
                    e.preventDefault(), e.stopPropagation(), i++, o()
                }, document.addEventListener("dragenter", u, !1), h = e => {
                    e.preventDefault(), e.stopPropagation(), --i, o()
                }, document.addEventListener("dragleave", h, !1), t.addEventListener("dragenter", (e => {
                    e.stopPropagation(), e.preventDefault(), i++, e.target !== t ? s = !0 : (n = !0, o())
                }), !1), t.addEventListener("dragleave", (e => {
                    e.stopPropagation(), e.preventDefault(), --i, e.target !== t ? s = !1 : (s || (n = !1), o())
                }), !1), t.addEventListener("dragover", (e => {
                    if (e.target !== t) return;
                    const i = e.dataTransfer.effectAllowed;
                    e.dataTransfer.dropEffect = "move" === i || "linkMove" === i ? "move" : "copy", e.stopPropagation(), e.preventDefault()
                })), t.addEventListener("drop", (t => {
                    t.preventDefault(), n = !1, i = 0, o(), t.dataTransfer.items ? [...t.dataTransfer.items].forEach(((t, i) => {
                        if ("file" === t.kind) {
                            const i = t.getAsFile();
                            e.addFiles(i)
                        }
                    })) : [...t.dataTransfer.files].forEach(((t, i) => {
                        e.addFiles(t)
                    })), e.files.length && e.upload()
                }), !1)
            };
        var B = function (e) {
            return e.listImagesOnly && !e.listAudioOnly ? SUPPORTED_IMAGE_FILE_TYPES : e.listAudioOnly ? SUPPORTED_AUDIO_FILE_TYPES : e.listWoffOnly ? SUPPORTED_WOFF_FILE_TYPES : e.listOtfOnly ? SUPPORTED_OTF_FILE_TYPES : []
        };
        let U = function (e, t) {
            return {
                files: [],
                allowedFileTypes: B(t),
                uploadingFileType: "",
                folder: "",
                sizeLimit: e ? 20971520 : 335544320,
                addFiles: function (e) {
                    if (!this.isAllowedSize(e.size)) return void this.onError("FILE", e.name);
                    let t = !1;
                    if (this.allowedFileTypes.length > 0)
                        for (let i = 0; i < this.allowedFileTypes.length; i++) {
                            const n = this.allowedFileTypes[i];
                            if (e.name.toLowerCase().endsWith("." + n)) {
                                t = !0;
                                break
                            }
                        } else t = !0;
                    t ? this.files.push(e) : this.onError("FILE", e.name)
                },
                isAllowedSize: function (e) {
                    return e < this.sizeLimit
                },
                onProgress: function () {
                    g(!0)
                },
                onComplete: function (e) {
                    g(!1), this.onCancel()
                },
                onError: function (e, t) {
                    switch (e) {
                        case "NO_STORAGE_AVAILABLE":
                            Tools.showWindow({
                                title: "",
                                icon: Popup.ICON_ERROR,
                                width: 450,
                                markup: Templates.get("storageLimitReachedMarkup"),
                                showCloseButton: !0,
                                customClass: Popup.CUSTOM_CLASS_ERROR_DIALOG
                            });
                            break;
                        case "FILE":
                            CPanel.showError(format(M.ERR_UPLOADING_ERROR, "name", t));
                            break;
                        case "UPLOAD":
                            let e = M[t] ? M[t] : t;
                            CPanel.showError(e);
                            break;
                        default:
                            CPanel.showError(M.ERR_UPS)
                    }
                    this.onCancel()
                },
                onCancel: function () {
                    g(!1), this.files = []
                },
                upload: function (e, t) {
                    this.onProgress();
                    let i = this,
                        n = this.files;
                    const a = s => {
                        Tools.makeWebsiteRequest({
                            action: "presignedUrl",
                            data: {
                                uploadingFileType: i.uploadingFileType,
                                folder: i.folder,
                                filename: s.name,
                                fileType: s.type
                            },
                            onOk: function (o) {
                                if (o.ok)
                                    if ("NO_STORAGE_AVAILABLE" === o.data) i.onError("UPLOAD", "NO_STORAGE_AVAILABLE");
                                    else {
                                        let r = o.data.fileName;
                                        r.includes("pfrm_expl_unsplsh") || y(r, !1), fetch(o.data.url, {
                                            method: "PUT",
                                            headers: {
                                                "Content-Type": s.type
                                            },
                                            body: s
                                        }).then((e => {
                                            if (!e.ok) return Promise.reject(r)
                                        })).then((() => {
                                            i.onComplete(r), e && e(r)
                                        })).catch((e => {
                                            i.onError("FILE", e), t && t()
                                        })), n.length && a(n.shift())
                                    }
                                else i.onError("UPLOAD", o.message), t && t()
                            },
                            onNotOk: function () {
                                i.onCancel()
                            }
                        })
                    };
                    n.length && a(n.shift())
                }
            }
        };
        return {
            selectFile: function (r) {
                r = mergeUnique(r, FileManager.defaults), m(), d = r.listImagesOnly && !r.listAudioOnly, p = r.listAudioOnly, i = r.selectMultiple;
                var l = r.onCancelCallback;
                Tools.showWindow({
                    title: M.SELECT_FILE_TITLE,
                    icon: Popup.ICON_FILES,
                    width: 1140,
                    markup: Templates.get("uploaderTemplate"),
                    height: "80%",
                    action: {
                        onShow: function (i, l) {
                            $("#closeBtn").click((function () {
                                i.close()
                            }));
                            var d = $("#selectBtn");
                            null === r.onCompleteCallback ? d.remove() : d.click((function () {
                                null !== o ? CPanel.showLoadingBar("triggerCallback", e, (() => {
                                    R(i, r, o).then((() => {
                                        CPanel.hideLoadingBar("triggerCallback")
                                    }), !1, M.IMAGE_LOADING_MESSAGE)
                                })) : CPanel.showError(M.ERR_SELECT_FILE)
                            })), l.css("overflow", "hidden"), e = $("#uploaderTemplateFileWrapper"), t = $("#uploaderTemplateFolderWrapper"), n = l.find("h1"), a = l.find(".file-manager-content"), l.find('[data-rel="add-folder"]').click(N), D(!1), a.on("click", ".close-button2", (function (e) {
                                ! function (e) {
                                    if (s) CPanel.showError(M.MSG_WAIT_UPLOAD);
                                    else {
                                        var t = e.parent(),
                                            i = t.data("name");
                                        Tools.prompt(M.DEL_FILE_TITLE, M.DEL_FILE_CONFIRM, (function () {
                                            window.HIDE_AJAX_OVERLAY = !0, Tools.makeWebsiteRequest({
                                                action: "deleteUploadedFile",
                                                data: {
                                                    name: i,
                                                    dir: c
                                                }
                                            }), null !== o && o.each((function () {
                                                if ($(this).is(t)) return _(), !1
                                            })), t.fadeOut("fast", (function () {
                                                t.remove()
                                            }))
                                        }))
                                    }
                                }($(this)), e.stopPropagation()
                            })).on("click", ".file2", (function (e) {
                                T($(this))
                            })).on("click", ".copy-link-button", (function (e) {
                                var t = $(this).parent().data("name"),
                                    i = getFileFromBase(getUserDir()) + c + "/" + t;
                                Tools.copyToClipboard(i), Tools.showCornerMessage(1e3, M.FILE_URL_COPIED, Tools.TOOLTIP_TYPE_SUCCESS)
                            })), r.selectMultiple || a.on("dblclick", ".file2", (function (t) {
                                T($(this)), CPanel.showLoadingBar("triggerCallback", e, (() => {
                                    R(i, r, o).then((() => {
                                        CPanel.hideLoadingBar("triggerCallback")
                                    }))
                                }), !1, M.IMAGE_LOADING_MESSAGE)
                            })), W(r)
                        },
                        onBeforeHide: function (e, t) {
                            return s ? (CPanel.showError(M.MSG_WAIT_UPLOAD), !1) : (null === o && l(), m(), !0)
                        }
                    },
                    buttons: [],
                    customClass: "cpanel-file-manager"
                })
            },
            _init: function () {
                return this, delete this._init, this
            }
        }._init()
    }();
FileManager.defaults = {
    selectMultiple: !1,
    listImagesOnly: !0,
    listAudioOnly: !1,
    listWoffOnly: !1,
    listOtfOnly: !1,
    onCompleteCallback: dummy,
    onCancelCallback: dummy
};
var LinkPicker = {
    getLinkDisplayText: function (e) {
        var t = (e || "").trim().toLowerCase();
        if ("{checkout_url}" === t) return M.STORE_CHECKOUT_NAME;
        if (t.startsWith("javascript:")) {
            var i;
            if (t.indexOf("changesystemanalyticssettings") > -1) return M.SYSTEM_ANALYTICS_COOKIE_SETTINGS;
            if (t.indexOf("closeactivepopup") > -1) return M.CLOSE_ACTIVE_POPUP;
            if (t.indexOf("webplatform.store.addproducttocart") > -1) return t.indexOf("'cart'") > -1 ? M.ADD_PRODUCT_TO_CART : M.BUY_NOW_PRODUCT;
            if (i = /popups\.show\((\d+)\)/.exec(t)) {
                var n = +i[1],
                    a = Website.getPopupById(n);
                return a ? M.POPUP + " - " + a.name : M.POPUP
            }
            return (i = /funnels\.show\((.+)\)/.exec(t)) ? "'next'" === i[1] ? M.NEXT_FUNNEL_STEP : M.SHOW_FUNNEL_STEP : M.CUSTOM_JAVASCRIPT
        }
        return e
    },
    selectLink: function (e) {
        (e = mergeUnique(e || {}, LinkPicker.defaults)).isEmailLinkPicker && (e.hasOpenIn = !1, e.hasNoFollow = !1);
        var t = e.allowFunnelStepPicking ? e.activeFunnel || Website.getActiveFunnel() : null,
            i = t ? e.activeFunnelStep ? e.activeFunnelStep : Website.getActiveFunnelStep() || t.steps[0] : null,
            n = "active-funnel",
            a = "page",
            s = "store",
            o = "funnels",
            r = "external",
            l = "anchor-point",
            c = "file",
            d = "popup",
            p = "email",
            u = "phone",
            h = null;
        Tools.showWindow({
            isModal: e.modal,
            title: M.SELECT_TITLE,
            icon: Popup.ICON_EDIT,
            width: 650,
            markup: Templates.get("pickPageDialog"),
            action: {
                onShow: function (f, m) {
                    var g = m.find(".content-wrapper"),
                        v = m.find(".categories-wrapper li");
                    t ? v.filter('[data-tab="' + n + '"]').removeClass("none") : Website.funnels.length && v.filter('[data-tab="' + o + '"]').removeClass("none");
                    var b = function (f, m) {
                        var b = function () {
                            m && (Tools.delay(1, m), m = null)
                        },
                            y = function () {
                                switch (v.filter(".active").removeClass("active"), v.filter('[data-tab="' + f + '"]').addClass("active"), f) {
                                    case n:
                                        h = function (e, t, i, n, a) {
                                            t.html(Templates.get("pickPageTabActiveFunnel"));
                                            var s = t.find("select");
                                            return $("<option />").text(M.NEXT_FUNNEL_STEP_MESSAGE).val("next").appendTo(s), Hooks.active.hook.activePage && Hooks.active.hook.activePage.canSelectFunnelStep && Hooks.active.hook.activePage.canSelectFunnelStep() && i.steps.forEach((function (e) {
                                                "UPSELL" !== e.kind && "DOWNSELL" !== e.kind && $("<option />").text(e.name).val(i.id + "|" + e.id).appendTo(s)
                                            })), n ? Tools.makeWebsiteRequest({
                                                action: "getPageAnchorPoints",
                                                data: {
                                                    type: "funnel",
                                                    groupId: i.id,
                                                    itemId: n.id,
                                                    variant: window.location.href.endsWith("/b") ? "b" : "a"
                                                },
                                                onOk: function (e) {
                                                    var t = e.data || [];
                                                    if (t.length) {
                                                        var i = $('<optgroup label="' + M.ANCHOR_POINT + '"></optgroup>');
                                                        s.append(i), t.forEach((function (e) {
                                                            $("<option />").val("#" + e.url).html(e.name).appendTo(i)
                                                        }))
                                                    }
                                                    a()
                                                }
                                            }) : a(), e.hasNoFollow && t.find('input[type="checkbox"]').parent().removeClass("none"), {
                                                select: function (i, n) {
                                                    var a = s.find("option:selected"),
                                                        o = a.val();
                                                    e.hasNoFollow && (i.nofollow = t.find('input[type="checkbox"]').prop("checked")), i.external = !0, i.caption = a.text(), i.target = "_self", i.link = 0 === o.indexOf("#") ? o : "javascript:WebPlatform.Funnels.show('" + o + "')", n(i)
                                                },
                                                hide: function (e) {
                                                    t.empty(), e()
                                                },
                                                init: function (i, n) {
                                                    e.hasNoFollow && t.find('input[type="checkbox"]').prop("checked", !!i.nofollow);
                                                    var a = i.link.toLowerCase().trim().replace("javascript:webplatform.funnels.show('", "");
                                                    a = a.substring(0, a.indexOf("')")), s.val(a), s.val() ? n(!0) : n(!1)
                                                }
                                            }
                                        }(e, g, t, i, b);
                                        break;
                                    case a:
                                        h = function (e, t, i) {
                                            t.html(Templates.get("pickPageTabPage"));
                                            for (var n = t.find(".pick-page-group-select"), a = t.find(".pick-page-page-select"), s = 0; s < Website.pageGroups.length; ++s) {
                                                var o = Website.pageGroups[s];
                                                $("<option />").val(o.id).text(o.name).appendTo(n)
                                            }
                                            for (var r = 0; r < Website.virtualPages.length; ++r) {
                                                var l = Website.virtualPages[r];
                                                l.id !== Website.STORE_PAGE_ID && $("<option />").val(l.id).text(l.name).appendTo(n)
                                            }
                                            var c = function (e) {
                                                var t = parse(n.val(), 0, !0);
                                                a.empty();
                                                var i = function (e, t) {
                                                    for (var i = 0; i < e.length; ++i) {
                                                        var n = e[i];
                                                        $("<option />").val(n.id).html(n.name).data("link", n.link || n.url || "").appendTo(t)
                                                    }
                                                };
                                                t >= 0 ? (i(Website.getGroupById(t).pages, a), (e || dummy)()) : Tools.makeWebsiteRequest({
                                                    action: "listItemsByType",
                                                    data: {
                                                        type: t,
                                                        filter: 0
                                                    },
                                                    onOk: function (n) {
                                                        var s = n.data || [];
                                                        s.unshift({
                                                            id: t,
                                                            name: M.ALL,
                                                            link: null
                                                        }), i(s, a), (e || dummy)()
                                                    }
                                                })
                                            };
                                            return n.change((function () {
                                                c()
                                            })), c((function () {
                                                i()
                                            })), e.hasNoFollow && t.find('input[type="checkbox"]').parent().removeClass("none"), e.hasOpenIn || t.find(".openIn").closest('[data-role="open-in-wrapper"]').addClass("none"), {
                                                select: function (i, s) {
                                                    var o = a.find(":selected"),
                                                        r = parse(n.val(), -1, !0),
                                                        l = parse(o.val(), -1, !0),
                                                        c = o.data("link");
                                                    if (i.target = e.hasOpenIn ? t.find(".openIn").val() : "_self", e.hasNoFollow && (i.nofollow = t.find('input[type="checkbox"]').prop("checked")), r < 0) {
                                                        i.external = !0;
                                                        var d = Website.getPageById(r);
                                                        l < 0 ? (i.caption = d.name, i.link = "/" + d.link) : (i.caption = o.text(), i.link = "/" + d.link + "/" + c)
                                                    } else i.external = !1, i.pageId = l, i.caption = o.text(), i.link = "/" + Website.getPageById(i.pageId).link;
                                                    s(i)
                                                },
                                                hide: function (e) {
                                                    t.empty(), e()
                                                },
                                                init: function (i, s) {
                                                    e.hasNoFollow && t.find('input[type="checkbox"]').prop("checked", !!i.nofollow), t.find(".openIn").val(i.target), link = e.selected.link.trim(), link.startsWith("/") && (link = link.substr(1));
                                                    var o = null;
                                                    if (i.pageId && (o = Website.getPageById(i.pageId)), null === o && (o = "" === link ? Website.homePage.isFunnel ? null : Website.getHomepage() : Website.getPageByUrl(link)), o) {
                                                        var r = Website.getGroupByPageId(o.id);
                                                        r ? (n.val(r.id), c((function () {
                                                            a.val(o.id), a.val() ? s(!0) : s(!1)
                                                        }))) : (n.val(o.id), c(), s(!0))
                                                    } else s(!1)
                                                }
                                            }
                                        }(e, g, b);
                                        break;
                                    case s:
                                        h = function (e, t, i) {
                                            t.html(Templates.get("pickPageTabStore"));
                                            var n, a = t.find(".pick-page-store-category-select"),
                                                s = t.find(".pick-page-page-select"),
                                                o = t.find(".openInStore"),
                                                r = t.find("#next-action"),
                                                l = t.find('input[name="nextAction"]'),
                                                c = function (e, t) {
                                                    s.empty(), -2 === e ? ($("<option />").val("{checkout_url}").html(M.STORE_CHECKOUT_NAME).data("link", "{checkout_url}").appendTo(s), t()) : Tools.makeWebsiteRequest({
                                                        action: "listItemsByType",
                                                        data: {
                                                            type: Website.STORE_PAGE_ID,
                                                            filter: e,
                                                            showHidden: !0
                                                        },
                                                        onOk: function (e) {
                                                            var i = e.data || [];
                                                            i.unshift({
                                                                id: -1,
                                                                name: M.ALL_STORE_PRODUCTS,
                                                                link: null
                                                            }), i.forEach((function (e) {
                                                                $("<option />").val(e.id).html(e.name).data("link", e.link || e.url || "").appendTo(s)
                                                            })), (t || dummy)()
                                                        }
                                                    })
                                                };
                                            return a.change((function () {
                                                var e = parse($(this).val(), 0, !0);
                                                c(e)
                                            })), o.change((function () {
                                                r["cart" === this.value ? "slideDown" : "slideUp"]("fast")
                                            })), l.click((function () {
                                                Website.selectPage({
                                                    allowEmptyCaption: !0,
                                                    allowFunnelStepPicking: !0,
                                                    selected: {
                                                        link: l.data("link") || "",
                                                        hasNoFollow: !1,
                                                        target: "_self"
                                                    },
                                                    onSelect: function (e) {
                                                        l.data("link", e.link), l.val("" === e.link.trim() ? M.NOTHING : LinkPicker.getLinkDisplayText(e.link))
                                                    }
                                                })
                                            })), n = function () {
                                                var e = parse(a.val(), 0, !0);
                                                c(e, i)
                                            }, Tools.makeWebsiteRequest({
                                                action: "getStoreCategories",
                                                onOk: function (t) {
                                                    var i = t.data || [];
                                                    e.isEmailLinkPicker && i.unshift({
                                                        id: -2,
                                                        name: M.SYSTEM_PAGES,
                                                        link: ""
                                                    }), i.unshift({
                                                        id: -1,
                                                        name: M.ALL,
                                                        link: ""
                                                    });
                                                    for (var s = Tools.buildTree({
                                                        items: i
                                                    }), o = function (e, t, i) {
                                                        for (var n = e.name, s = 0; s < t; ++s) n = "&nbsp;&nbsp;&middot;&nbsp;&nbsp;" + n;
                                                        for ($("<option />").val(e.id).html(n).data("link", i).data("name", e.name).appendTo(a), s = 0; s < e.childNodes.length; ++s) {
                                                            var r;
                                                            r = 0 === t ? i + "/sub/" + e.childNodes[s].url : i + "," + e.childNodes[s].url, o(e.childNodes[s], t + 1, r)
                                                        }
                                                    }, r = 0; r < s.length; ++r) o(s[r], 0, s[r].url);
                                                    (n || dummy)()
                                                }
                                            }), l.val(M.NOTHING), e.hasNoFollow && t.find('input[type="checkbox"]').parent().removeClass("none"), e.hasOpenIn || o.closest('[data-role="open-in-wrapper"]').addClass("none"), {
                                                select: function (i, n) {
                                                    var r = a.find(":selected"),
                                                        c = s.find(":selected"),
                                                        d = parse(a.val(), -1, !0),
                                                        p = parse(c.val(), -1, !0),
                                                        u = c.data("link");
                                                    i.external = !0, i.target = e.hasOpenIn ? o.val() : "_self", e.hasNoFollow && (i.nofollow = t.find('input[type="checkbox"]').prop("checked"));
                                                    var h = Website.getPageById(Website.STORE_PAGE_ID);
                                                    if (-2 === d) i.caption = c.text(), i.link = u, i.target = "_self";
                                                    else if (p < 0) "_self" !== i.target && (i.target = "_self"), d >= 0 ? (i.caption = r.data("name"), i.link = "/" + h.link + "/category/" + r.data("link")) : (i.caption = h.name, i.link = "/" + h.link);
                                                    else if (i.caption = c.text(), "buy" === i.target || "cart" === i.target) {
                                                        var f = "";
                                                        "cart" === i.target && (f = l.data("link") || "") && (f = ", nextact('" + b64EncodeUnicode(f) + "')"), i.link = "javascript: WebPlatform.Store.addProductToCart(" + p + ", '" + i.target + "'" + f + ");", i.target = "_self"
                                                    } else i.link = "/" + h.link + "/" + u;
                                                    n(i)
                                                },
                                                hide: function (e) {
                                                    t.empty(), e()
                                                },
                                                init: function (i, n) {
                                                    if (e.hasNoFollow && t.find('input[type="checkbox"]').prop("checked", !!i.nofollow), "{checkout_url}" === i.link) a.val(-2).change(), n(!0);
                                                    else if (i.link.startsWith("javascript:")) {
                                                        var r;
                                                        if (r = /^javascript: WebPlatform.Store.addProductToCart\((\d+), '([a-z]+)'(, nextact\(.*\))?\);/.exec(i.link)) {
                                                            var c, d = r[1],
                                                                p = r[2],
                                                                u = r[3] || "",
                                                                h = "";
                                                            u && (c = /, nextact\('(.*)'\)/.exec(u)) && (h = b64DecodeUnicode(h = c[1].trim())), l.data("link", h), l.val("" === h.trim() ? M.NOTHING : LinkPicker.getLinkDisplayText(h)), s.val(d), o.val(p).change(), n(!0)
                                                        }
                                                    } else {
                                                        o.val(i.target);
                                                        var f = "/" + Website.getPageById(Website.STORE_PAGE_ID).link;
                                                        if (i.link === f) n(!0);
                                                        else {
                                                            var m = i.link.substr(f.length + 1);
                                                            m.startsWith("category/") ? n(!1) : (s.find("option").filter((function () {
                                                                return $(this).data("link") === m
                                                            })).prop("selected", !0), s.val() ? n(!0) : n(!1))
                                                        }
                                                    }
                                                }
                                            }
                                        }(e, g, b);
                                        break;
                                    case o:
                                        h = function (e, t, i) {
                                            t.html(Templates.get("pickPageTabFunnels"));
                                            var n = t.find(".pick-funnel-group-select"),
                                                a = t.find(".pick-funnel-page-select");
                                            return Website.funnels.forEach((function (e) {
                                                $("<option />").text(e.name).val(e.id).appendTo(n)
                                            })), n.change((function () {
                                                var e = WebPlatform.parse($(this).val()),
                                                    t = Website.getFunnelById(e);
                                                a.empty(), null !== t && t.steps.forEach((function (e) {
                                                    "PAGE" === e.type && $("<option />").text(e.name).val(e.id).appendTo(a)
                                                }))
                                            })).change(), e.hasNoFollow && t.find('input[type="checkbox"]').parent().removeClass("none"), e.hasOpenIn || t.find(".openIn").closest('[data-role="open-in-wrapper"]').addClass("none"), i(), {
                                                select: function (i, s) {
                                                    var o = WebPlatform.parse(n.val()),
                                                        r = WebPlatform.parse(a.val()),
                                                        l = Website.getFunnelById(o),
                                                        c = null;
                                                    null !== l && "PAGE" !== (c = Website.getFunnelStepById(l, r)).type && (c = null), null !== l ? (i.target = e.hasOpenIn ? t.find(".openIn").val() : "_self", e.hasNoFollow && (i.nofollow = t.find('input[type="checkbox"]').prop("checked")), i.external = !1, i.caption = c ? c.name : l.name, i.link = "/" + l.url + "/" + (c ? c.page.link : ""), s(i)) : CPanel.showError(M.ERR_FILL_ALL_FIELDS)
                                                },
                                                hide: function (e) {
                                                    t.empty(), e()
                                                },
                                                init: function (i, s) {
                                                    e.hasNoFollow && t.find('input[type="checkbox"]').prop("checked", !!i.nofollow), t.find(".openIn").val(i.target);
                                                    var o = i.link;
                                                    o.startsWith("/") && (o = o.substr(1));
                                                    var r, l, c = o.split("/"),
                                                        d = Website.getFunnelByUrl(c[0], !0);
                                                    if (null !== d && c.length > 1) {
                                                        r = d.id;
                                                        for (var p = 0; p < d.steps.length; ++p) {
                                                            var u = d.steps[p];
                                                            if ("PAGE" === u.type && u.page.link.toLowerCase() === c[1].toLowerCase()) {
                                                                l = u.id;
                                                                break
                                                            }
                                                        }
                                                    }
                                                    r ? (n.val(r + "").change(), l && a.val(l), s(!0)) : s(!1)
                                                }
                                            }
                                        }(e, g, b);
                                        break;
                                    case r:
                                        h = function (e, t, i) {
                                            return t.html(Templates.get("pickPageTabExternal")), e.hasCaption || t.find("input.pickPageCaption").parent().addClass("none"), e.hasNoFollow && t.find('input[type="checkbox"]').parent().removeClass("none"), e.hasOpenIn || t.find(".openIn").closest('[data-role="open-in-wrapper"]').addClass("none"), i(), {
                                                select: function (i, n) {
                                                    var a = t.find(".pickPageCaption").val().trim(),
                                                        s = t.find(".pickPageUrl").val().trim();
                                                    0 === a.length && !e.allowEmptyCaption || 0 === s.length ? CPanel.showError(M.ERR_FILL_ALL_FIELDS) : (i.external = !0, i.target = e.hasOpenIn ? t.find(".openIn").val() : "_self", e.hasNoFollow && (i.nofollow = t.find('input[type="checkbox"]').prop("checked")), 0 === s.toLowerCase().indexOf("www.") && (s = "http://" + s), i.caption = a, i.link = Tools.sanitizeUserCode(s).replace(/"/g, "%22"), n(i))
                                                },
                                                hide: function (e) {
                                                    t.empty(), e()
                                                },
                                                init: function (i, n) {
                                                    e.hasNoFollow && t.find('input[type="checkbox"]').prop("checked", !!i.nofollow), t.find(".openIn").val(i.target), t.find(".pickPageUrl").val((i.link || "").trim()), t.find(".pickPageCaption").val(i.caption || ""), n(!0)
                                                }
                                            }
                                        }(e, g, b);
                                        break;
                                    case l:
                                        h = function (e, t, i) {
                                            t.html(Templates.get("pickPageTabAnchorPoint"));
                                            for (var n = t.find(".pick-page-group-select"), a = t.find(".pick-page-page-select"), s = t.find(".pick-page-anchor-select"), o = 0; o < Website.pageGroups.length; ++o) {
                                                var r = Website.pageGroups[o];
                                                $("<option />").val(r.id).text(r.name).appendTo(n)
                                            }
                                            for (var l = 0; l < Website.virtualPages.length; ++l) {
                                                var c = Website.virtualPages[l];
                                                $("<option />").val(c.id).text(c.name).appendTo(n)
                                            }
                                            var d = function (e) {
                                                var t = parse(n.val(), 0, !0);
                                                a.empty();
                                                var i = function (e, t) {
                                                    for (var i = 0; i < e.length; ++i) {
                                                        var n = e[i];
                                                        $("<option />").val(n.id).html(n.name).data("link", n.link || n.url || "").appendTo(t)
                                                    }
                                                };
                                                t >= 0 ? (i(Website.getGroupById(t).pages, a), (e || dummy)()) : Tools.makeWebsiteRequest({
                                                    action: "listItemsByType",
                                                    data: {
                                                        type: t,
                                                        filter: 0
                                                    },
                                                    onOk: function (t) {
                                                        var n = t.data || [];
                                                        i(n, a), (e || dummy)()
                                                    }
                                                })
                                            },
                                                p = function (e, t) {
                                                    if (s.empty(), "" === e || e < 0) (t || dummy)();
                                                    else {
                                                        var i = n.val(),
                                                            o = a.val();
                                                        Tools.makeWebsiteRequest({
                                                            action: "getPageAnchorPoints",
                                                            data: {
                                                                type: i < 0 ? "virtual" : "page",
                                                                groupId: i,
                                                                itemId: o
                                                            },
                                                            onOk: function (e) {
                                                                (e.data || []).forEach((function (e) {
                                                                    $("<option />").val(e.url).html(e.name).appendTo(s)
                                                                })), (t || dummy)()
                                                            }
                                                        })
                                                    }
                                                };
                                            return a.change((function () {
                                                p(this.value)
                                            })), n.change((function () {
                                                d((function () {
                                                    a.change()
                                                }))
                                            })), d((function () {
                                                p(a.val(), i)
                                            })), e.hasNoFollow && t.find('input[type="checkbox"]').parent().removeClass("none"), e.hasOpenIn || t.find(".openIn").closest('[data-role="open-in-wrapper"]').addClass("none"), {
                                                select: function (i, o) {
                                                    var r = a.find(":selected"),
                                                        l = parse(n.val(), -1, !0),
                                                        c = (parse(r.val(), -1, !0), r.data("link")),
                                                        d = s.find(":selected");
                                                    0 !== d.length ? (i.target = e.hasOpenIn ? t.find(".openIn").val() : "_self", e.hasNoFollow && (i.nofollow = t.find('input[type="checkbox"]').prop("checked")), i.external = !0, i.caption = d.text(), l < 0 ? i.link = "/" + Website.getPageById(l).link + "/" + c + "#" + d.val() : (c === Website.getHomepage().link && (c = ""), i.link = "/" + c + "#" + d.val()), o(i)) : CPanel.showError(M.ERR_FILL_ALL_FIELDS)
                                                },
                                                hide: function (e) {
                                                    t.empty(), e()
                                                },
                                                init: function (i, o) {
                                                    e.hasNoFollow && t.find('input[type="checkbox"]').prop("checked", !!i.nofollow), t.find(".openIn").val(i.target), link = e.selected.link.trim();
                                                    var r = link.split("#");
                                                    link = r[0];
                                                    var l = r.length > 0 ? r[1] : "";
                                                    link.startsWith("/") && (link = link.substr(1));
                                                    var c = null;
                                                    i.pageId && (c = Website.getPageById(i.pageId)), null === c && (c = "" === link ? Website.homePage.isFunnel ? null : Website.getHomepage() : Website.getPageByUrl(link));
                                                    var u = function () {
                                                        p(c.id, (function () {
                                                            s.val(l), s.val() ? o(!0) : o(!1)
                                                        }))
                                                    };
                                                    if (c) {
                                                        var h = Website.getGroupByPageId(c.id);
                                                        h ? (n.val(h.id), d((function () {
                                                            a.val(c.id), a.val() ? u() : o(!1)
                                                        }))) : (n.val(c.id), d(u))
                                                    } else o(!1)
                                                }
                                            }
                                        }(e, g, b);
                                        break;
                                    case c:
                                        h = function (e, t, i) {
                                            t.html(Templates.get("pickPageTabFile"));
                                            var n = t.find('[name="fileSelect"]');
                                            return n.click((function () {
                                                FileManager.selectFile({
                                                    listImagesOnly: !1,
                                                    onCompleteCallback: function (e, t, i) {
                                                        n.data("url", getFileFromBase(e) + t).val(i)
                                                    }
                                                })
                                            })), e.hasCaption || t.find("input.pickFileCaption").parent().addClass("none"), e.hasNoFollow && t.find('input[type="checkbox"]').parent().removeClass("none"), e.hasOpenIn || t.find(".openIn").closest('[data-role="open-in-wrapper"]').addClass("none"), i(), {
                                                select: function (i, a) {
                                                    var s = t.find(".pickFileCaption").val().trim(),
                                                        o = n.data("url");
                                                    0 === s.length && !e.allowEmptyCaption || isUndefined(o) || 0 === o.length ? CPanel.showError(M.ERR_FILL_ALL_FIELDS) : (e.hasNoFollow && (i.nofollow = t.find('input[type="checkbox"]').prop("checked")), i.target = e.hasOpenIn ? t.find(".openIn").val() : "_self", i.external = !0, i.caption = s, i.link = o, a(i))
                                                },
                                                hide: function (e) {
                                                    t.empty(), e()
                                                },
                                                init: function (i, a) {
                                                    e.hasNoFollow && t.find('input[type="checkbox"]').prop("checked", !!i.nofollow), t.find(".openIn").val(i.target);
                                                    var s = i.link.substring(i.link.indexOf("/uploads/") + 9);
                                                    n.data("url", i.link).val(Tools.toFriendlyFileName(s)), t.find(".pickFileCaption").val(i.caption || ""), a(!0)
                                                }
                                            }
                                        }(e, g, b);
                                        break;
                                    case d:
                                        h = function (e, t, i) {
                                            t.html(Templates.get("pickPageTabPopup"));
                                            for (var n = t.find("select"), a = 0; a < Website.popups.length; ++a) {
                                                var s = Website.popups[a];
                                                $("<option />").val(s.id).text(s.name).appendTo(n)
                                            }
                                            return $("<option />").val("analytics").text(M.SYSTEM_ANALYTICS_COOKIE_SETTINGS).appendTo(n), $("<option />").val("close-popup").text(M.CLOSE_ACTIVE_POPUP).appendTo(n), i(), {
                                                select: function (e, i) {
                                                    var n = t.find(".tab-popup").find("select").val();
                                                    if (e.external = !0, "analytics" === n) e.link = "javascript:WebPlatform.ChangeSystemAnalyticsSettings();", e.caption = "";
                                                    else if ("close-popup" === n) e.link = "javascript:WebPlatform.CloseActivePopup();", e.caption = "";
                                                    else {
                                                        if ("" === n) return void CPanel.showError(M.ERR_FILL_ALL_FIELDS);
                                                        e.external = !0, e.link = "javascript:WebPlatform.Popups.show(" + n + ");", e.caption = (Website.getPopupById(n) || {}).name
                                                    }
                                                    i(e)
                                                },
                                                hide: function (e) {
                                                    t.empty(), e()
                                                },
                                                init: function (e, t) {
                                                    var i = e.link.toLowerCase();
                                                    if (i.indexOf("changesystemanalyticssettings") > -1) n.val("analytics");
                                                    else if (i.indexOf("closeactivepopup") > -1) n.val("close-popup");
                                                    else {
                                                        var a = i.replace("javascript:webplatform.popups.show(", "");
                                                        a = a.substring(0, a.indexOf(")")).trim(), null !== Website.getPopupById(+a) ? n.val(a) : n.val("")
                                                    }
                                                    t(!0)
                                                }
                                            }
                                        }(0, g, b);
                                        break;
                                    case p:
                                        h = function (e, t, i) {
                                            return t.html(Templates.get("pickPageTabEmail")), i(), {
                                                select: function (e, i) {
                                                    var n = t.find(".emailField").val().trim();
                                                    "" !== n ? (e.external = !1, e.caption = t.find(".emailCaption").val(), e.link = "mailto:" + n, i(e)) : CPanel.showError(M.ERR_FILL_ALL_FIELDS)
                                                },
                                                hide: function (e) {
                                                    t.empty(), e()
                                                },
                                                init: function (e, i) {
                                                    t.find(".emailField").val((e.link || "").replace("mailto:", "").trim()), t.find(".emailCaption").val(e.caption || ""), i(!0)
                                                }
                                            }
                                        }(0, g, b);
                                        break;
                                    case u:
                                        h = function (e, t, i) {
                                            return t.html(Templates.get("pickPageTabPhone")), i(), {
                                                select: function (e, i) {
                                                    var n = t.find(".phoneField").val().trim();
                                                    "" !== n ? (e.external = !1, e.caption = t.find(".phoneCaption").val(), e.link = "tel:" + n, i(e)) : CPanel.showError(M.ERR_FILL_ALL_FIELDS)
                                                },
                                                hide: function (e) {
                                                    t.empty(), e()
                                                },
                                                init: function (e, i) {
                                                    t.find(".phoneField").val((e.link || "").replace("tel:", "").trim()), t.find(".phoneCaption").val(e.caption || ""), i(!0)
                                                }
                                            }
                                        }(0, g, b)
                                }
                            };
                        h ? h.hide(y) : y()
                    };
                    v.click((function () {
                        var e = $(this);
                        e.hasClass("active") || b(e.data("tab"))
                    }));
                    var y = function (e) {
                        if (e.link) {
                            var i = e.link.trim().toLowerCase();
                            if ("{checkout_url}" === i) return s;
                            if (0 === i.indexOf(content)) return c;
                            if (i.indexOf("addproducttocart") > -1) return s;
                            if (i.indexOf("changesystemanalyticssettings") > -1 || i.indexOf("closeactivepopup") > -1 || i.replace(/ /g, "").startsWith("javascript:webplatform.popups.show")) return d;
                            if (t && i.replace(/ /g, "").startsWith("javascript:webplatform.funnels.show")) return n;
                            if (i.startsWith("tel:")) return u;
                            if (i.startsWith("mailto:")) return p;
                            if (i.startsWith("/") && i.indexOf("#") > 0) return l;
                            if (i.startsWith("//")) return r;
                            if (i.startsWith("/")) {
                                i = i.substring(1).split("/")[0];
                                var h = Website.getPageById(Website.STORE_PAGE_ID);
                                return i === (h ? h.link : "") ? s : null !== Website.getFunnelByUrl(i, !0) ? o : a
                            }
                            return r
                        }
                        return null
                    }(e.selected);
                    b(y || (t ? n : a), (function () {
                        e.selected.link && h.init(e.selected, (function (t) {
                            t || b(r, (function () {
                                h.init(e.selected, dummy)
                            }))
                        }))
                    }))
                }
            },
            buttons: [Button(M.SELECT, Button.CLASS_MIDDLE_BLUE, (function (t, i) {
                if (!h) return t.close(), void e.onCancel();
                h.select({
                    nofollow: !1,
                    external: !1,
                    target: "_self",
                    pageId: -1,
                    caption: "",
                    link: ""
                }, (function (i) {
                    null !== i && (i.target && "" !== i.target.trim() && "_blank" !== i.target && "_self" !== i.target && (i.target = "_self"), t.close(), e.onSelect(i), t = null)
                }))
            })), Button(M.CANCEL, Button.CLASS_MIDDLE_GREY, (function (t, i) {
                t.close(), e.onCancel()
            }))]
        })
    }
};
/*!
 * Bootstrap v3.3.5 (http://getbootstrap.com)
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */
/*!
 * Generated using the Bootstrap Customizer (http://getbootstrap.com/customize/?id=aa44ec7de23ab72c7184)
 * Config saved to config.json and https://gist.github.com/aa44ec7de23ab72c7184
 */
if (LinkPicker.defaults = {
    onSelect: dummy,
    onCancel: dummy,
    modal: !0,
    allowEmptyCaption: !0,
    allowFunnelStepPicking: !0,
    hasNoFollow: !1,
    hasOpenIn: !0,
    hasCaption: !0,
    isEmailLinkPicker: !1,
    selected: {
        target: "_self",
        nofollow: !1
    }
}, function (e, t) {
    "object" == typeof exports ? module.exports = t(e) : "function" == typeof define && define.amd ? define("colors", [], (function () {
        return t(e)
    })) : e.Colors = t(e)
}(this, (function (e, t) {
    "use strict";
    var i = {
        rgb: {
            r: [0, 255],
            g: [0, 255],
            b: [0, 255]
        },
        hsv: {
            h: [0, 360],
            s: [0, 100],
            v: [0, 100]
        },
        hsl: {
            h: [0, 360],
            s: [0, 100],
            l: [0, 100]
        },
        alpha: {
            alpha: [0, 1]
        },
        HEX: {
            HEX: [0, 16777215]
        }
    },
        n = e.Math,
        a = n.round,
        s = {},
        o = {},
        r = {
            r: .298954,
            g: .586434,
            b: .114612
        },
        l = {
            r: .2126,
            g: .7152,
            b: .0722
        },
        c = function (e) {
            this.colors = {
                RND: {}
            }, this.options = {
                color: "rgba(0,0,0,0)",
                grey: r,
                luminance: l,
                valueRanges: i
            }, d(this, e || {})
        },
        d = function (e, i) {
            var n, a = e.options;
            for (var s in p(e), i) i[s] !== t && (a[s] = i[s]);
            n = a.customBG, a.customBG = "string" == typeof n ? f.txt2color(n).rgb : n, o = u(e.colors, a.color, t, !0)
        },
        p = function (e) {
            s !== e && (s = e, o = e.colors)
        };

    function u(e, n, a, s, r) {
        if ("string" == typeof n) a = (n = f.txt2color(n)).type, o[a] = n[a], r = r !== t ? r : n.alpha;
        else if (n)
            for (var l in n) e[a][l] = b(n[l] / i[a][l][1], 0, 1);
        return r !== t && (e.alpha = b(+r, 0, 1)), h(a, s ? e : t)
    }

    function h(e, t) {
        var r, l, c, d = t || o,
            p = f,
            u = s.options,
            h = i,
            b = d.RND,
            y = "",
            w = "",
            _ = {
                hsl: "hsv",
                rgb: e
            },
            T = b.rgb;
        if ("alpha" !== e) {
            for (var C in h)
                if (!h[C][C])
                    for (y in e !== C && (w = _[C] || "rgb", d[C] = p[w + "2" + C](d[w])), b[C] || (b[C] = {}), r = d[C]) b[C][y] = a(r[y] * h[C][y][1]);
            T = b.rgb, d.HEX = p.RGB2HEX(T), d.equivalentGrey = u.grey.r * d.rgb.r + u.grey.g * d.rgb.g + u.grey.b * d.rgb.b, d.webSave = l = m(T, 51), d.webSmart = c = m(T, 17), d.saveColor = T.r === l.r && T.g === l.g && T.b === l.b ? "web save" : T.r === c.r && T.g === c.g && T.b === c.b ? "web smart" : "", d.hueRGB = f.hue2RGB(d.hsv.h), t && (d.background = function (e, t, i) {
                var n = s.options.grey,
                    o = {};
                return o.RGB = {
                    r: e.r,
                    g: e.g,
                    b: e.b
                }, o.rgb = {
                    r: t.r,
                    g: t.g,
                    b: t.b
                }, o.alpha = i, o.equivalentGrey = a(n.r * e.r + n.g * e.g + n.b * e.b), o.rgbaMixBlack = v(t, {
                    r: 0,
                    g: 0,
                    b: 0
                }, i, 1), o.rgbaMixWhite = v(t, {
                    r: 1,
                    g: 1,
                    b: 1
                }, i, 1), o.rgbaMixBlack.luminance = g(o.rgbaMixBlack, !0), o.rgbaMixWhite.luminance = g(o.rgbaMixWhite, !0), s.options.customBG && (o.rgbaMixCustom = v(t, s.options.customBG, i, 1), o.rgbaMixCustom.luminance = g(o.rgbaMixCustom, !0), s.options.customBG.luminance = g(s.options.customBG, !0)), o
            }(T, d.rgb, d.alpha))
        }
        var k, E, x, S, M, P, I = d.rgb,
            O = d.alpha,
            A = "luminance",
            L = d.background;
        return (k = v(I, {
            r: 0,
            g: 0,
            b: 0
        }, O, 1))[A] = g(k, !0), d.rgbaMixBlack = k, (E = v(I, {
            r: 1,
            g: 1,
            b: 1
        }, O, 1))[A] = g(E, !0), d.rgbaMixWhite = E, u.customBG && ((x = v(I, L.rgbaMixCustom, O, 1))[A] = g(x, !0), x.WCAG2Ratio = function (e, t) {
            var i = 1;
            i = e >= t ? (e + .05) / (t + .05) : (t + .05) / (e + .05);
            return a(100 * i) / 100
        }(x[A], L.rgbaMixCustom[A]), d.rgbaMixBGMixCustom = x, x.luminanceDelta = n.abs(x[A] - L.rgbaMixCustom[A]), x.hueDelta = (S = L.rgbaMixCustom, M = x, P = !0, (n.max(S.r - M.r, M.r - S.r) + n.max(S.g - M.g, M.g - S.g) + n.max(S.b - M.b, M.b - S.b)) * (P ? 255 : 1) / 765)), d.RGBLuminance = g(T), d.HUELuminance = g(d.hueRGB), u.convertCallback && u.convertCallback(d, e), d
    }
    c.prototype.setColor = function (e, i, n) {
        return p(this), e ? u(this.colors, e, i, t, n) : (n !== t && (this.colors.alpha = b(n, 0, 1)), h(i))
    }, c.prototype.setCustomBackground = function (e) {
        return p(this), this.options.customBG = "string" == typeof e ? f.txt2color(e).rgb : e, u(this.colors, t, "rgb")
    }, c.prototype.saveAsBackground = function () {
        return p(this), u(this.colors, t, "rgb", !0)
    }, c.prototype.toString = function (e, t) {
        return f.color2text((e || "rgb").toLowerCase(), this.colors, t)
    };
    var f = {
        txt2color: function (e) {
            var t = {},
                n = e.replace(/(?:#|\)|%)/g, "").split("("),
                a = (n[1] || "").split(/,\s*/),
                s = n[1] ? n[0].substr(0, 3) : "rgb",
                o = "";
            if (t.type = s, t[s] = {}, n[1])
                for (var r = 3; r--;) o = s[r] || s.charAt(r), t[s][o] = +a[r] / i[s][o][1];
            else t.rgb = f.HEX2rgb(n[0]);
            return t.alpha = a[3] ? +a[3] : 1, t
        },
        color2text: function (e, t, i) {
            var n = !1 !== i && a(100 * t.alpha) / 100,
                s = "number" == typeof n && !1 !== i && (i || 1 !== n),
                o = t.RND.rgb,
                r = t.RND.hsl,
                l = "hex" === e && s,
                c = "hex" === e && !l,
                d = "rgb" === e || l ? o.r + ", " + o.g + ", " + o.b : c ? "#" + t.HEX : r.h + ", " + r.s + "%, " + r.l + "%";
            return c ? d : (l ? "rgb" : e) + (s ? "a" : "") + "(" + d + (s ? ", " + n : "") + ")"
        },
        RGB2HEX: function (e) {
            return ((e.r < 16 ? "0" : "") + e.r.toString(16) + (e.g < 16 ? "0" : "") + e.g.toString(16) + (e.b < 16 ? "0" : "") + e.b.toString(16)).toUpperCase()
        },
        HEX2rgb: function (e) {
            return {
                r: +("0x" + (e = e.split(""))[0] + e[e[3] ? 1 : 0]) / 255,
                g: +("0x" + e[e[3] ? 2 : 1] + (e[3] || e[1])) / 255,
                b: +("0x" + (e[4] || e[2]) + (e[5] || e[2])) / 255
            }
        },
        hue2RGB: function (e) {
            var t = 6 * e,
                i = ~~t % 6,
                n = 6 === t ? 0 : t - i;
            return {
                r: a(255 * [1, 1 - n, 0, 0, n, 1][i]),
                g: a(255 * [n, 1, 1, 1 - n, 0, 0][i]),
                b: a(255 * [0, 0, n, 1, 1, 1 - n][i])
            }
        },
        rgb2hsv: function (e) {
            var t, i, a = e.r,
                s = e.g,
                r = e.b,
                l = 0;
            return s < r && (s = r + (r = s, 0), l = -1), i = r, a < s && (a = s + (s = a, 0), l = -2 / 6 - l, i = n.min(s, r)), t = a - i, {
                h: (a ? t / a : 0) < 1e-15 ? o && o.hsl && o.hsl.h || 0 : t ? n.abs(l + (s - r) / (6 * t)) : 0,
                s: a ? t / a : o && o.hsv && o.hsv.s || 0,
                v: a
            }
        },
        hsv2rgb: function (e) {
            var t = 6 * e.h,
                i = e.s,
                n = e.v,
                a = ~~t,
                s = t - a,
                o = n * (1 - i),
                r = n * (1 - s * i),
                l = n * (1 - (1 - s) * i),
                c = a % 6;
            return {
                r: [n, r, o, o, l, n][c],
                g: [l, n, n, r, o, o][c],
                b: [o, o, l, n, n, r][c]
            }
        },
        hsv2hsl: function (e) {
            var t = (2 - e.s) * e.v,
                i = e.s * e.v;
            return i = e.s ? t < 1 ? t ? i / t : 0 : i / (2 - t) : 0, {
                h: e.h,
                s: e.v || i ? i : o && o.hsl && o.hsl.s || 0,
                l: t / 2
            }
        },
        rgb2hsl: function (e, t) {
            var i = f.rgb2hsv(e);
            return f.hsv2hsl(t ? i : o.hsv = i)
        },
        hsl2rgb: function (e) {
            var t = 6 * e.h,
                i = e.s,
                n = e.l,
                a = n < .5 ? n * (1 + i) : n + i - i * n,
                s = n + n - a,
                o = ~~t,
                r = a * (a ? (a - s) / a : 0) * (t - o),
                l = s + r,
                c = a - r,
                d = o % 6;
            return {
                r: [a, c, s, s, l, a][d],
                g: [l, a, a, c, s, s][d],
                b: [s, s, l, a, a, c][d]
            }
        }
    };

    function m(e, t) {
        var i = {},
            n = 0,
            a = t / 2;
        for (var s in e) n = e[s] % t, i[s] = e[s] + (n > a ? t - n : -n);
        return i
    }

    function g(e, t) {
        for (var i = t ? 1 : 255, a = [e.r / i, e.g / i, e.b / i], o = s.options.luminance, r = a.length; r--;) a[r] = a[r] <= .03928 ? a[r] / 12.92 : n.pow((a[r] + .055) / 1.055, 2.4);
        return o.r * a[0] + o.g * a[1] + o.b * a[2]
    }

    function v(e, i, n, a) {
        var s = {},
            o = n !== t ? n : 1,
            r = a !== t ? a : 1,
            l = o + r * (1 - o);
        for (var c in e) s[c] = (e[c] * o + i[c] * r * (1 - o)) / l;
        return s.a = l, s
    }

    function b(e, t, i) {
        return e > i ? i : e < t ? t : e
    }
    return c
})), function (e, t) {
    "object" == typeof exports ? module.exports = t(e, require("jquery"), require("colors")) : "function" == typeof define && define.amd ? define(["jquery", "colors"], (function (i, n) {
        return t(e, i, n)
    })) : t(e, e.jQuery, e.Colors)
}(this, (function (e, t, i, n) {
    "use strict";
    var a, s, o, r, l, c, d, p, u, h, f, m = t(document),
        g = t(),
        v = "touchmove.tcp mousemove.tcp pointermove.tcp",
        b = "touchstart.tcp mousedown.tcp pointerdown.tcp",
        y = "touchend.tcp mouseup.tcp pointerup.tcp",
        w = !1,
        _ = e.requestAnimationFrame || e.webkitRequestAnimationFrame || function (e) {
            e()
        },
        T = '<div class="cp-color-picker"><div class="cp-z-slider"><div class="cp-z-cursor"></div></div><div class="cp-xy-slider"><div class="cp-white"></div><div class="cp-xy-cursor"></div></div><div class="cp-alpha"><div class="cp-alpha-cursor"></div></div></div>',
        C = ".cp-color-picker{position:absolute;overflow:hidden;padding:6px 6px 0;background-color:#444;color:#bbb;font-family:Arial,Helvetica,sans-serif;font-size:12px;font-weight:400;cursor:default;border-radius:5px}.cp-color-picker>div{position:relative;overflow:hidden}.cp-xy-slider{float:left;height:160px;width:160px;margin-bottom:13px;background:linear-gradient(to right,#FFF,rgba(255,255,255,0))}.cp-white{height:100%;width:100%;background:linear-gradient(rgba(0,0,0,0),#000)}.cp-xy-cursor{position:absolute;top:0;width:14px;height:14px;margin:-7px;border:1px solid #fff;border-radius:100%;box-sizing:border-box}.cp-z-slider{overflow:visible !important;border-radius:20px;float:right;margin-left:6px;height:160px;width:10px;background:linear-gradient(red 0,#f0f 17%,#00f 33%,#0ff 50%,#0f0 67%,#ff0 83%,red 100%)}.cp-z-cursor{position:absolute;margin-top:-4px;width:100%;border:4px solid #fff;border-color:transparent #fff;box-sizing:border-box}.cp-alpha{clear:both;width:183px;height:10px;overflow:visible !important;border-radius:20px;margin:6px 0;background:linear-gradient(to right,rgb(47, 51, 58),rgba(0,0,0,0))}.cp-alpha-cursor{position:absolute;margin-left:-4px;height:100%;border:4px solid #fff;border-color:#fff transparent;box-sizing:border-box}",
        k = function (e) {
            s = this.color = new i(e), o = s.options, a = this
        };

    function E(e) {
        return e.value || e.getAttribute("value") || t(e).css("background-color") || "#FFF"
    }

    function x(e) {
        return (e = e.originalEvent && e.originalEvent.touches ? e.originalEvent.touches[0] : e).originalEvent ? e.originalEvent : e
    }

    function S(e) {
        return t(e.find(o.doRender)[0] || e[0])
    }

    function M(i) {
        var m = t(this),
            g = m.offset(),
            v = t(e),
            y = o.gap;
        i ? ((r = S(m))._colorMode = r.data("colorMode"), a.$trigger = m, (l || (t("head")[o.cssPrepend ? "prepend" : "append"]('<style type="text/css" id="tinyColorPickerStyles">' + (o.css || C) + (o.cssAddon || "") + "</style>"), t(T).css({
            margin: o.margin
        }).appendTo("body").show(0, (function () {
            a.$UI = l = t(this), w = o.GPU && l.css("perspective") !== n, c = t(".cp-z-slider", this), d = t(".cp-xy-slider", this), p = t(".cp-xy-cursor", this), u = t(".cp-z-cursor", this), h = t(".cp-alpha", this), f = t(".cp-alpha-cursor", this), o.buildCallback.call(a, l), l.prepend("<div>").children().eq(0).css("width", l.children().eq(0).width()), l._width = this.offsetWidth, l._height = this.offsetHeight
        })).hide())).css(o.positionCallback.call(a, m) || {
            left: (l._left = g.left) - ((l._left += l._width - (v.scrollLeft() + v.width())) + y > 0 ? l._left + y : 0),
            top: (l._top = g.top + m.outerHeight()) - ((l._top += l._height - (v.scrollTop() + v.height())) + y > 0 ? l._top + y : 0)
        }).show(o.animationSpeed, (function () {
            !0 !== i && (h.toggle(!!o.opacity)._width = h.width(), d._width = d.width(), d._height = d.height(), c._height = c.height(), s.setColor(E(r[0])), L(!0))
        })).off(".tcp").on(b, ".cp-xy-slider,.cp-z-slider,.cp-alpha", P)) : a.$trigger && t(l).hide(o.animationSpeed, (function () {
            L(!1), a.$trigger = null
        })).off(".tcp")
    }

    function P(e) {
        var i = this.className.replace(/cp-(.*?)(?:\s*|$)/, "$1").replace("-", "_");
        (e.button || e.which) > 1 || (e.preventDefault && e.preventDefault(), e.returnValue = !1, r._offset = t(this).offset(), (i = "xy_slider" === i ? I : "z_slider" === i ? O : A)(e), L(), m.on(y, (function (e) {
            m.off(".tcp")
        })).on(v, (function (e) {
            i(e), L()
        })))
    }

    function I(e) {
        var t = x(e),
            i = t.pageX - r._offset.left,
            n = t.pageY - r._offset.top,
            a = s.colors.alpha;
        s.setColor({
            s: i / d._width * 100,
            v: 100 - n / d._height * 100
        }, "hsv", a < .001 ? 1 : a)
    }

    function O(e) {
        var t = x(e).pageY - r._offset.top;
        s.setColor({
            h: 360 - t / c._height * 360
        }, "hsv")
    }

    function A(e) {
        var t = (x(e).pageX - r._offset.left) / h._width;
        s.setColor({}, "rgb", t)
    }

    function L(e) {
        var t = s.colors,
            i = t.hueRGB,
            a = (t.RND.rgb, t.RND.hsl, o.dark),
            l = o.light,
            m = s.toString(r._colorMode, o.forceAlpha),
            g = t.HUELuminance > .22 ? a : l,
            v = t.rgbaMixBlack.luminance > .22 ? a : l,
            b = (1 - t.hsv.h) * c._height,
            y = t.hsv.s * d._width,
            T = (1 - t.hsv.v) * d._height,
            C = t.alpha * h._width,
            k = w ? "translate3d" : "",
            E = r[0].value,
            x = r[0].hasAttribute("value") && "" === E && e !== n;
        d._css = {
            backgroundColor: "rgb(" + i.r + "," + i.g + "," + i.b + ")"
        }, p._css = {
            transform: k + "(" + y + "px, " + T + "px, 0)",
            left: w ? "" : y,
            top: w ? "" : T,
            borderColor: t.RGBLuminance > .22 ? a : l
        }, u._css = {
            transform: k + "(0, " + b + "px, 0)",
            top: w ? "" : b,
            borderColor: "transparent " + g
        }, h._css = {
            backgroundColor: "#" + t.HEX
        }, f._css = {
            transform: k + "(" + C + "px, 0, 0)",
            left: w ? "" : C,
            borderColor: v + " transparent"
        }, r._css = {
            backgroundColor: x ? "" : m,
            color: x ? "" : t.rgbaMixBGMixCustom.luminance > .22 ? a : l
        }, r.text = x ? "" : E !== m ? m : "", e !== n ? D(e) : _(D)
    }

    function D(e) {
        d.css(d._css), p.css(p._css), u.css(u._css), h.css(h._css), f.css(f._css), o.doRender && r.css(r._css), r.text && r.val(r.text), o.renderCallback.call(a, r, "boolean" == typeof e ? e : n)
    }
    k.prototype = {
        render: L,
        toggle: M
    }, t.fn.colorPicker = function (i) {
        var n = this,
            r = function () { };
        return i = t.extend({
            animationSpeed: 150,
            GPU: !0,
            doRender: !0,
            customBG: "#FFF",
            opacity: !0,
            renderCallback: r,
            buildCallback: r,
            positionCallback: r,
            body: document.body,
            scrollResize: !0,
            gap: 4,
            dark: "#222",
            light: "#DDD"
        }, i), !a && i.scrollResize && t(e).on("resize.tcp scroll.tcp", (function () {
            a.$trigger && a.toggle.call(a.$trigger[0], !0)
        })), g = g.add(this), this.colorPicker = a || new k(i), this.options = i, t(i.body).off(".tcp").on(b, (function (e) {
            -1 === g.add(l).add(t(l).find(e.target)).index(e.target) && M()
        })), this.on("focusin.tcp click.tcp", (function (e) {
            a.color.options = t.extend(a.color.options, o = n.options), M.call(this, e)
        })).on("change.tcp", (function () {
            s.setColor(this.value || "#FFF"), n.colorPicker.render(!0)
        })).each((function () {
            var e = E(this),
                n = e.split("("),
                a = S(t(this));
            a.data("colorMode", n[1] ? n[0].substr(0, 3) : "HEX").attr("readonly", o.preventFocus), i.doRender && a.css({
                "background-color": e,
                color: function () {
                    return s.setColor(e).rgbaMixBGMixCustom.luminance > .22 ? i.dark : i.light
                }
            })
        }))
    }, t.fn.colorPicker.destroy = function () {
        t("*").off(".tcp"), a.toggle(!1), g = t()
    }
})), "undefined" == typeof jQuery) throw new Error("Bootstrap's JavaScript requires jQuery");
! function (e) {
    "use strict";
    var t = jQuery.fn.jquery.split(" ")[0].split(".");
    if (t[0] < 2 && t[1] < 9 || 1 == t[0] && 9 == t[1] && t[2] < 1) throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")
}(),
    function (e) {
        "use strict";

        function t(t) {
            var i = t.attr("data-target");
            i || (i = (i = t.attr("href")) && /#[A-Za-z]/.test(i) && i.replace(/.*(?=#[^\s]*$)/, ""));
            var n = i && e(i);
            return n && n.length ? n : t.parent()
        }

        function i(i) {
            i && 3 === i.which || (e(n).remove(), e(a).each((function () {
                var n = e(this),
                    a = t(n),
                    s = {
                        relatedTarget: this
                    };
                a.hasClass("open") && (i && "click" == i.type && /input|textarea/i.test(i.target.tagName) && e.contains(a[0], i.target) || (a.trigger(i = e.Event("hide.bs.dropdown", s)), i.isDefaultPrevented() || (n.attr("aria-expanded", "false"), a.removeClass("open").trigger("hidden.bs.dropdown", s))))
            })))
        }
        var n = ".dropdown-backdrop",
            a = '[data-toggle="dropdown"]',
            s = function (t) {
                e(t).on("click.bs.dropdown", this.toggle)
            };
        s.VERSION = "3.3.5", s.prototype.toggle = function (n) {
            var a = e(this);
            if (!a.is(".disabled, :disabled")) {
                var s = t(a),
                    o = s.hasClass("open");
                if (i(), !o) {
                    "ontouchstart" in document.documentElement && !s.closest(".navbar-nav").length && e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click", i);
                    var r = {
                        relatedTarget: this
                    };
                    if (s.trigger(n = e.Event("show.bs.dropdown", r)), n.isDefaultPrevented()) return;
                    a.trigger("focus").attr("aria-expanded", "true"), s.toggleClass("open").trigger("shown.bs.dropdown", r)
                }
                return !1
            }
        }, s.prototype.keydown = function (i) {
            if (/(38|40|27|32)/.test(i.which) && !/input|textarea/i.test(i.target.tagName)) {
                var n = e(this);
                if (i.preventDefault(), i.stopPropagation(), !n.is(".disabled, :disabled")) {
                    var s = t(n),
                        o = s.hasClass("open");
                    if (!o && 27 != i.which || o && 27 == i.which) return 27 == i.which && s.find(a).trigger("focus"), n.trigger("click");
                    var r = s.find(".dropdown-menu li:not(.disabled):visible a");
                    if (r.length) {
                        var l = r.index(i.target);
                        38 == i.which && l > 0 && l--, 40 == i.which && l < r.length - 1 && l++, ~l || (l = 0), r.eq(l).trigger("focus")
                    }
                }
            }
        };
        var o = e.fn.dropdown;
        e.fn.dropdown = function (t) {
            return this.each((function () {
                var i = e(this),
                    n = i.data("bs.dropdown");
                n || i.data("bs.dropdown", n = new s(this)), "string" == typeof t && n[t].call(i)
            }))
        }, e.fn.dropdown.Constructor = s, e.fn.dropdown.noConflict = function () {
            return e.fn.dropdown = o, this
        }, e(document).on("click.bs.dropdown.data-api", i).on("click.bs.dropdown.data-api", ".dropdown form", (function (e) {
            e.stopPropagation()
        })).on("click.bs.dropdown.data-api", a, s.prototype.toggle).on("keydown.bs.dropdown.data-api", a, s.prototype.keydown).on("keydown.bs.dropdown.data-api", ".dropdown-menu", s.prototype.keydown)
    }(jQuery),
    function (e) {
        "use strict";
        var t = function (e, t) {
            this.type = null, this.options = null, this.enabled = null, this.timeout = null, this.hoverState = null, this.$element = null, this.inState = null, this.init("tooltip", e, t)
        };
        t.VERSION = "3.3.5", t.TRANSITION_DURATION = 150, t.DEFAULTS = {
            animation: !0,
            placement: "top",
            selector: !1,
            template: '<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
            trigger: "hover focus",
            title: "",
            delay: 0,
            html: !1,
            container: !1,
            viewport: {
                selector: "body",
                padding: 0
            }
        }, t.prototype.init = function (t, i, n) {
            if (this.enabled = !0, this.type = t, this.$element = e(i), this.options = this.getOptions(n), this.$viewport = this.options.viewport && e(e.isFunction(this.options.viewport) ? this.options.viewport.call(this, this.$element) : this.options.viewport.selector || this.options.viewport), this.inState = {
                click: !1,
                hover: !1,
                focus: !1
            }, this.$element[0] instanceof document.constructor && !this.options.selector) throw new Error("`selector` option must be specified when initializing " + this.type + " on the window.document object!");
            for (var a = this.options.trigger.split(" "), s = a.length; s--;) {
                var o = a[s];
                if ("click" == o) this.$element.on("click." + this.type, this.options.selector, e.proxy(this.toggle, this));
                else if ("manual" != o) {
                    var r = "hover" == o ? "mouseenter" : "focusin",
                        l = "hover" == o ? "mouseleave" : "focusout";
                    this.$element.on(r + "." + this.type, this.options.selector, e.proxy(this.enter, this)), this.$element.on(l + "." + this.type, this.options.selector, e.proxy(this.leave, this))
                }
            }
            this.options.selector ? this._options = e.extend({}, this.options, {
                trigger: "manual",
                selector: ""
            }) : this.fixTitle()
        }, t.prototype.getDefaults = function () {
            return t.DEFAULTS
        }, t.prototype.getOptions = function (t) {
            return (t = e.extend({}, this.getDefaults(), this.$element.data(), t)).delay && "number" == typeof t.delay && (t.delay = {
                show: t.delay,
                hide: t.delay
            }), t
        }, t.prototype.getDelegateOptions = function () {
            var t = {},
                i = this.getDefaults();
            return this._options && e.each(this._options, (function (e, n) {
                i[e] != n && (t[e] = n)
            })), t
        }, t.prototype.enter = function (t) {
            var i = t instanceof this.constructor ? t : e(t.currentTarget).data("bs." + this.type);
            return i || (i = new this.constructor(t.currentTarget, this.getDelegateOptions()), e(t.currentTarget).data("bs." + this.type, i)), t instanceof e.Event && (i.inState["focusin" == t.type ? "focus" : "hover"] = !0), i.tip().hasClass("in") || "in" == i.hoverState ? void (i.hoverState = "in") : (clearTimeout(i.timeout), i.hoverState = "in", i.options.delay && i.options.delay.show ? void (i.timeout = setTimeout((function () {
                "in" == i.hoverState && i.show()
            }), i.options.delay.show)) : i.show())
        }, t.prototype.isInStateTrue = function () {
            for (var e in this.inState)
                if (this.inState[e]) return !0;
            return !1
        }, t.prototype.leave = function (t) {
            var i = t instanceof this.constructor ? t : e(t.currentTarget).data("bs." + this.type);
            return i || (i = new this.constructor(t.currentTarget, this.getDelegateOptions()), e(t.currentTarget).data("bs." + this.type, i)), t instanceof e.Event && (i.inState["focusout" == t.type ? "focus" : "hover"] = !1), i.isInStateTrue() ? void 0 : (clearTimeout(i.timeout), i.hoverState = "out", i.options.delay && i.options.delay.hide ? void (i.timeout = setTimeout((function () {
                "out" == i.hoverState && i.hide()
            }), i.options.delay.hide)) : i.hide())
        }, t.prototype.show = function () {
            var i = e.Event("show.bs." + this.type);
            if (this.hasContent() && this.enabled) {
                this.$element.trigger(i);
                var n = e.contains(this.$element[0].ownerDocument.documentElement, this.$element[0]);
                if (i.isDefaultPrevented() || !n) return;
                var a = this,
                    s = this.tip(),
                    o = this.getUID(this.type);
                this.setContent(), s.attr("id", o), this.$element.attr("aria-describedby", o), this.options.animation && s.addClass("fade");
                var r = "function" == typeof this.options.placement ? this.options.placement.call(this, s[0], this.$element[0]) : this.options.placement,
                    l = /\s?auto?\s?/i,
                    c = l.test(r);
                c && (r = r.replace(l, "") || "top"), s.detach().css({
                    top: 0,
                    left: 0,
                    display: "block"
                }).addClass(r).data("bs." + this.type, this), this.options.container ? s.appendTo(this.options.container) : s.insertAfter(this.$element), this.$element.trigger("inserted.bs." + this.type);
                var d = this.getPosition(),
                    p = s[0].offsetWidth,
                    u = s[0].offsetHeight;
                if (c) {
                    var h = r,
                        f = this.getPosition(this.$viewport);
                    r = "bottom" == r && d.bottom + u > f.bottom ? "top" : "top" == r && d.top - u < f.top ? "bottom" : "right" == r && d.right + p > f.width ? "left" : "left" == r && d.left - p < f.left ? "right" : r, s.removeClass(h).addClass(r)
                }
                var m = this.getCalculatedOffset(r, d, p, u);
                this.applyPlacement(m, r);
                var g = function () {
                    var e = a.hoverState;
                    a.$element.trigger("shown.bs." + a.type), a.hoverState = null, "out" == e && a.leave(a)
                };
                e.support.transition && this.$tip.hasClass("fade") ? s.one("bsTransitionEnd", g).emulateTransitionEnd(t.TRANSITION_DURATION) : g()
            }
        }, t.prototype.applyPlacement = function (t, i) {
            var n = this.tip(),
                a = n[0].offsetWidth,
                s = n[0].offsetHeight,
                o = parseInt(n.css("margin-top"), 10),
                r = parseInt(n.css("margin-left"), 10);
            isNaN(o) && (o = 0), isNaN(r) && (r = 0), t.top += o, t.left += r, e.offset.setOffset(n[0], e.extend({
                using: function (e) {
                    n.css({
                        top: Math.round(e.top),
                        left: Math.round(e.left)
                    })
                }
            }, t), 0), n.addClass("in");
            var l = n[0].offsetWidth,
                c = n[0].offsetHeight;
            "top" == i && c != s && (t.top = t.top + s - c);
            var d = this.getViewportAdjustedDelta(i, t, l, c);
            d.left ? t.left += d.left : t.top += d.top;
            var p = /top|bottom/.test(i),
                u = p ? 2 * d.left - a + l : 2 * d.top - s + c,
                h = p ? "offsetWidth" : "offsetHeight";
            n.offset(t), this.replaceArrow(u, n[0][h], p)
        }, t.prototype.replaceArrow = function (e, t, i) {
            this.arrow().css(i ? "left" : "top", 50 * (1 - e / t) + "%").css(i ? "top" : "left", "")
        }, t.prototype.setContent = function () {
            var e = this.tip(),
                t = this.getTitle();
            e.find(".tooltip-inner")[this.options.html ? "html" : "text"](t), e.removeClass("fade in top bottom left right")
        }, t.prototype.hide = function (i) {
            function n() {
                "in" != a.hoverState && s.detach(), a.$element.removeAttr("aria-describedby").trigger("hidden.bs." + a.type), i && i()
            }
            var a = this,
                s = e(this.$tip),
                o = e.Event("hide.bs." + this.type);
            return this.$element.trigger(o), o.isDefaultPrevented() ? void 0 : (s.removeClass("in"), e.support.transition && s.hasClass("fade") ? s.one("bsTransitionEnd", n).emulateTransitionEnd(t.TRANSITION_DURATION) : n(), this.hoverState = null, this)
        }, t.prototype.fixTitle = function () {
            var e = this.$element;
            (e.attr("title") || "string" != typeof e.attr("data-original-title")) && e.attr("data-original-title", e.attr("title") || "").attr("title", "")
        }, t.prototype.hasContent = function () {
            return this.getTitle()
        }, t.prototype.getPosition = function (t) {
            var i = (t = t || this.$element)[0],
                n = "BODY" == i.tagName,
                a = i.getBoundingClientRect();
            null == a.width && (a = e.extend({}, a, {
                width: a.right - a.left,
                height: a.bottom - a.top
            }));
            var s = n ? {
                top: 0,
                left: 0
            } : t.offset(),
                o = {
                    scroll: n ? document.documentElement.scrollTop || document.body.scrollTop : t.scrollTop()
                },
                r = n ? {
                    width: e(window).width(),
                    height: e(window).height()
                } : null;
            return e.extend({}, a, o, r, s)
        }, t.prototype.getCalculatedOffset = function (e, t, i, n) {
            return "bottom" == e ? {
                top: t.top + t.height,
                left: t.left + t.width / 2 - i / 2
            } : "top" == e ? {
                top: t.top - n,
                left: t.left + t.width / 2 - i / 2
            } : "left" == e ? {
                top: t.top + t.height / 2 - n / 2,
                left: t.left - i
            } : {
                top: t.top + t.height / 2 - n / 2,
                left: t.left + t.width
            }
        }, t.prototype.getViewportAdjustedDelta = function (e, t, i, n) {
            var a = {
                top: 0,
                left: 0
            };
            if (!this.$viewport) return a;
            var s = this.options.viewport && this.options.viewport.padding || 0,
                o = this.getPosition(this.$viewport);
            if (/right|left/.test(e)) {
                var r = t.top - s - o.scroll,
                    l = t.top + s - o.scroll + n;
                r < o.top ? a.top = o.top - r : l > o.top + o.height && (a.top = o.top + o.height - l)
            } else {
                var c = t.left - s,
                    d = t.left + s + i;
                c < o.left ? a.left = o.left - c : d > o.right && (a.left = o.left + o.width - d)
            }
            return a
        }, t.prototype.getTitle = function () {
            var e = this.$element,
                t = this.options;
            return e.attr("data-original-title") || ("function" == typeof t.title ? t.title.call(e[0]) : t.title)
        }, t.prototype.getUID = function (e) {
            do {
                e += ~~(1e6 * Math.random())
            } while (document.getElementById(e));
            return e
        }, t.prototype.tip = function () {
            if (!this.$tip && (this.$tip = e(this.options.template), 1 != this.$tip.length)) throw new Error(this.type + " `template` option must consist of exactly 1 top-level element!");
            return this.$tip
        }, t.prototype.arrow = function () {
            return this.$arrow = this.$arrow || this.tip().find(".tooltip-arrow")
        }, t.prototype.enable = function () {
            this.enabled = !0
        }, t.prototype.disable = function () {
            this.enabled = !1
        }, t.prototype.toggleEnabled = function () {
            this.enabled = !this.enabled
        }, t.prototype.toggle = function (t) {
            var i = this;
            t && ((i = e(t.currentTarget).data("bs." + this.type)) || (i = new this.constructor(t.currentTarget, this.getDelegateOptions()), e(t.currentTarget).data("bs." + this.type, i))), t ? (i.inState.click = !i.inState.click, i.isInStateTrue() ? i.enter(i) : i.leave(i)) : i.tip().hasClass("in") ? i.leave(i) : i.enter(i)
        }, t.prototype.destroy = function () {
            var e = this;
            clearTimeout(this.timeout), this.hide((function () {
                e.$element.off("." + e.type).removeData("bs." + e.type), e.$tip && e.$tip.detach(), e.$tip = null, e.$arrow = null, e.$viewport = null
            }))
        };
        var i = e.fn.tooltip;
        e.fn.tooltip = function (i) {
            return this.each((function () {
                var n = e(this),
                    a = n.data("bs.tooltip"),
                    s = "object" == typeof i && i;
                (a || !/destroy|hide/.test(i)) && (a || n.data("bs.tooltip", a = new t(this, s)), "string" == typeof i && a[i]())
            }))
        }, e.fn.tooltip.Constructor = t, e.fn.tooltip.noConflict = function () {
            return e.fn.tooltip = i, this
        }
    }(jQuery),
    function (e) {
        "use strict";
        var t = function (e, t) {
            this.init("popover", e, t)
        };
        if (!e.fn.tooltip) throw new Error("Popover requires tooltip.js");
        t.VERSION = "3.3.5", t.DEFAULTS = e.extend({}, e.fn.tooltip.Constructor.DEFAULTS, {
            placement: "right",
            trigger: "click",
            content: "",
            template: '<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'
        }), t.prototype = e.extend({}, e.fn.tooltip.Constructor.prototype), t.prototype.constructor = t, t.prototype.getDefaults = function () {
            return t.DEFAULTS
        }, t.prototype.setContent = function () {
            var e = this.tip(),
                t = this.getTitle(),
                i = this.getContent();
            e.find(".popover-title")[this.options.html ? "html" : "text"](t), e.find(".popover-content").children().detach().end()[this.options.html ? "string" == typeof i ? "html" : "append" : "text"](i), e.removeClass("fade top bottom left right in"), e.find(".popover-title").html() || e.find(".popover-title").hide()
        }, t.prototype.hasContent = function () {
            return this.getTitle() || this.getContent()
        }, t.prototype.getContent = function () {
            var e = this.$element,
                t = this.options;
            return e.attr("data-content") || ("function" == typeof t.content ? t.content.call(e[0]) : t.content)
        }, t.prototype.arrow = function () {
            return this.$arrow = this.$arrow || this.tip().find(".arrow")
        };
        var i = e.fn.popover;
        e.fn.popover = function (i) {
            return this.each((function () {
                var n = e(this),
                    a = n.data("bs.popover"),
                    s = "object" == typeof i && i;
                (a || !/destroy|hide/.test(i)) && (a || n.data("bs.popover", a = new t(this, s)), "string" == typeof i && a[i]())
            }))
        }, e.fn.popover.Constructor = t, e.fn.popover.noConflict = function () {
            return e.fn.popover = i, this
        }
    }(jQuery),
    function (e) {
        "use strict";
        e.fn.emulateTransitionEnd = function (t) {
            var i = !1,
                n = this;
            e(this).one("bsTransitionEnd", (function () {
                i = !0
            }));
            return setTimeout((function () {
                i || e(n).trigger(e.support.transition.end)
            }), t), this
        }, e((function () {
            e.support.transition = function () {
                var e = document.createElement("bootstrap"),
                    t = {
                        WebkitTransition: "webkitTransitionEnd",
                        MozTransition: "transitionend",
                        OTransition: "oTransitionEnd otransitionend",
                        transition: "transitionend"
                    };
                for (var i in t)
                    if (void 0 !== e.style[i]) return {
                        end: t[i]
                    };
                return !1
            }(), e.support.transition && (e.event.special.bsTransitionEnd = {
                bindType: e.support.transition.end,
                delegateType: e.support.transition.end,
                handle: function (t) {
                    return e(t.target).is(this) ? t.handleObj.handler.apply(this, arguments) : void 0
                }
            })
        }))
    }(jQuery),
    function (e) {
        "function" == typeof define && define.amd ? define(["jquery"], e) : e(window.jQuery)
    }((function (e) {
        Array.prototype.reduce || (Array.prototype.reduce = function (e) {
            var t, i = Object(this),
                n = i.length >>> 0,
                a = 0;
            if (2 === arguments.length) t = arguments[1];
            else {
                for (; a < n && !(a in i);) a++;
                if (a >= n) throw new TypeError("Reduce of empty array with no initial value");
                t = i[a++]
            }
            for (; a < n; a++) a in i && (t = e(t, i[a], a, i));
            return t
        }), "function" != typeof Array.prototype.filter && (Array.prototype.filter = function (e) {
            for (var t = Object(this), i = t.length >>> 0, n = [], a = arguments.length >= 2 ? arguments[1] : void 0, s = 0; s < i; s++)
                if (s in t) {
                    var o = t[s];
                    e.call(a, o, s, t) && n.push(o)
                } return n
        }), Array.prototype.map || (Array.prototype.map = function (e, t) {
            var i, n, a;
            if (null === this) throw new TypeError(" this is null or not defined");
            var s = Object(this),
                o = s.length >>> 0;
            if ("function" != typeof e) throw new TypeError(e + " is not a function");
            for (arguments.length > 1 && (i = t), n = new Array(o), a = 0; a < o;) {
                var r, l;
                a in s && (r = s[a], l = e.call(i, r, a, s), n[a] = l), a++
            }
            return n
        });
        var t, i = "function" == typeof define && define.amd,
            n = navigator.userAgent,
            a = /MSIE|Trident/i.test(n);
        if (a) {
            var s = /MSIE (\d+[.]\d+)/.exec(n);
            s && (t = parseFloat(s[1])), (s = /Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(n)) && (t = parseFloat(s[1]))
        }
        var o, r, l, c, d, p, u, h, f, m, g, v, b, y, w, _, T, C, k, E, x, S, M, P, I, O, A, L, D, N, R, W, F, B, U, H, z, G, $, q, j, V, Y, K, X, Q, J, Z, ee, te, ie, ne, ae = {
            isMac: navigator.appVersion.indexOf("Mac") > -1,
            isMSIE: a,
            isFF: /firefox/i.test(n),
            isWebkit: /webkit/i.test(n),
            isSafari: /safari/i.test(n),
            browserVersion: t,
            jqueryVersion: parseFloat(e.fn.jquery),
            isSupportAmd: i,
            hasCodeMirror: i ? require.specified("CodeMirror") : !!window.CodeMirror,
            isFontInstalled: function (e) {
                return !0
            },
            isW3CRangeSupport: !!document.createRange
        },
            se = (o = 0, {
                eq: function (e) {
                    return function (t) {
                        return e === t
                    }
                },
                eq2: function (e, t) {
                    return e === t
                },
                peq2: function (e) {
                    return function (t, i) {
                        return t[e] === i[e]
                    }
                },
                ok: function () {
                    return !0
                },
                fail: function () {
                    return !1
                },
                self: function (e) {
                    return e
                },
                not: function (e) {
                    return function () {
                        return !e.apply(e, arguments)
                    }
                },
                and: function (e, t) {
                    return function (i) {
                        return e(i) && t(i)
                    }
                },
                uniqueId: function (e) {
                    var t = ++o + "";
                    return e ? e + t : t
                },
                rect2bnd: function (t) {
                    var i = e(document);
                    return {
                        top: t.top + i.scrollTop(),
                        left: t.left + i.scrollLeft(),
                        width: t.right - t.left,
                        height: t.bottom - t.top
                    }
                },
                invertObject: function (e) {
                    var t = {};
                    for (var i in e) e.hasOwnProperty(i) && (t[e[i]] = i);
                    return t
                },
                namespaceToCamel: function (e, t) {
                    return (t = t || "") + e.split(".").map((function (e) {
                        return e.substring(0, 1).toUpperCase() + e.substring(1)
                    })).join("")
                }
            }),
            oe = (d = function (t, i) {
                return e.inArray(i, t)
            }, {
                head: r = function (e) {
                    return e[0]
                },
                last: l = function (e) {
                    return e[e.length - 1]
                },
                initial: function (e) {
                    return e.slice(0, e.length - 1)
                },
                tail: c = function (e) {
                    return e.slice(1)
                },
                prev: function (e, t) {
                    var i = d(e, t);
                    return -1 === i ? null : e[i - 1]
                },
                next: function (e, t) {
                    var i = d(e, t);
                    return -1 === i ? null : e[i + 1]
                },
                find: function (e, t) {
                    for (var i = 0, n = e.length; i < n; i++) {
                        var a = e[i];
                        if (t(a)) return a
                    }
                },
                contains: p = function (e, t) {
                    return -1 !== d(e, t)
                },
                all: function (e, t) {
                    for (var i = 0, n = e.length; i < n; i++)
                        if (!t(e[i])) return !1;
                    return !0
                },
                sum: function (e, t) {
                    return t = t || se.self, e.reduce((function (e, i) {
                        return e + t(i)
                    }), 0)
                },
                from: function (e) {
                    for (var t = [], i = -1, n = e.length; ++i < n;) t[i] = e[i];
                    return t
                },
                clusterBy: function (e, t) {
                    return e.length ? c(e).reduce((function (e, i) {
                        var n = l(e);
                        return t(l(n), i) ? n[n.length] = i : e[e.length] = [i], e
                    }), [
                        [r(e)]
                    ]) : []
                },
                compact: function (e) {
                    for (var t = [], i = 0, n = e.length; i < n; i++) e[i] && t.push(e[i]);
                    return t
                },
                unique: function (e) {
                    for (var t = [], i = 0, n = e.length; i < n; i++) p(t, e[i]) || t.push(e[i]);
                    return t
                }
            }),
            re = String.fromCharCode(160),
            le = (u = function (t) {
                return t && e(t).hasClass("note-editable")
            }, h = function (t) {
                var i;
                if (t.hasClass("note-air-editor")) {
                    var n = oe.last(t.attr("id").split("-"));
                    return {
                        editor: function () {
                            return t
                        },
                        holder: function () {
                            return t.data("holder")
                        },
                        editable: function () {
                            return t
                        },
                        popover: (i = function (t) {
                            return function () {
                                return e(t + n)
                            }
                        })("#note-popover-"),
                        handle: i("#note-handle-"),
                        dialog: i("#note-dialog-")
                    }
                }
                i = function (e, i) {
                    return i = i || t,
                        function () {
                            return i.find(e)
                        }
                };
                var a = t.data("options"),
                    s = a && a.dialogsInBody ? e(document.body) : null;
                return {
                    editor: function () {
                        return t
                    },
                    holder: function () {
                        return t.data("holder")
                    },
                    dropzone: i(".note-dropzone"),
                    toolbar: i(".note-toolbar"),
                    editable: i(".note-editable"),
                    codable: i(".note-codable"),
                    statusbar: i(".note-statusbar"),
                    popover: i(".note-popover"),
                    handle: i(".note-handle"),
                    dialog: i(".note-dialog", s)
                }
            }, m = function (e) {
                return e && 3 === e.nodeType
            }, g = function (e) {
                return e && /^BR|^IMG|^HR|^IFRAME|^BUTTON/.test(e.nodeName.toUpperCase())
            }, v = function (e) {
                return !u(e) && e && /^DIV|^P|^LI|^H[1-7]/.test(e.nodeName.toUpperCase())
            }, b = (f = function (e) {
                return e = e.toUpperCase(),
                    function (t) {
                        return t && t.nodeName && t.nodeName.toUpperCase() === e
                    }
            })("LI"), y = f("TABLE"), w = function (e) {
                return !(E(e) || _(e) || T(e) || v(e) || y(e) || k(e))
            }, _ = function (e) {
                return e && /^UL|^OL/.test(e.nodeName.toUpperCase())
            }, T = f("HR"), C = function (e) {
                return e && /^TD|^TH/.test(e.nodeName.toUpperCase())
            }, k = f("BLOCKQUOTE"), E = function (e) {
                return C(e) || k(e) || u(e)
            }, x = f("A"), S = f("BODY"), M = ae.isMSIE && ae.browserVersion < 11 ? "&nbsp;" : "<br>", P = function (e) {
                return m(e) ? e.nodeValue.length : e.childNodes.length
            }, I = function (e) {
                var t = P(e);
                return 0 === t || !m(e) && 1 === t && e.innerHTML === M || !(!oe.all(e.childNodes, m) || "" !== e.innerHTML)
            }, O = function (e) {
                g(e) || P(e) || (e.innerHTML = M)
            }, A = function (e, t) {
                for (; e;) {
                    if (t(e)) return e;
                    if (u(e)) break;
                    e = e.parentNode
                }
                return null
            }, L = function (e, t) {
                t = t || se.fail;
                var i = [];
                return A(e, (function (e) {
                    return u(e) || i.push(e), t(e)
                })), i
            }, D = function (e, t) {
                t = t || se.fail;
                for (var i = []; e && !t(e);) i.push(e), e = e.nextSibling;
                return i
            }, N = function (e, t) {
                var i = t.nextSibling,
                    n = t.parentNode;
                return i ? n.insertBefore(e, i) : n.appendChild(e), e
            }, R = function (t, i) {
                return e.each(i, (function (e, i) {
                    t.appendChild(i)
                })), t
            }, W = function (e) {
                return 0 === e.offset
            }, F = function (e) {
                return e.offset === P(e.node)
            }, B = function (e) {
                return W(e) || F(e)
            }, U = function (e, t) {
                for (; e && e !== t;) {
                    if (0 !== z(e)) return !1;
                    e = e.parentNode
                }
                return !0
            }, H = function (e, t) {
                for (; e && e !== t;) {
                    if (z(e) !== P(e.parentNode) - 1) return !1;
                    e = e.parentNode
                }
                return !0
            }, z = function (e) {
                for (var t = 0; e = e.previousSibling;) t += 1;
                return t
            }, G = function (e) {
                return !!(e && e.childNodes && e.childNodes.length)
            }, $ = function (e, t) {
                var i, n;
                if (0 === e.offset) {
                    if (u(e.node)) return null;
                    i = e.node.parentNode, n = z(e.node)
                } else G(e.node) ? (i = e.node.childNodes[e.offset - 1], n = P(i)) : (i = e.node, n = t ? 0 : e.offset - 1);
                return {
                    node: i,
                    offset: n
                }
            }, q = function (e, t) {
                var i, n;
                if (P(e.node) === e.offset) {
                    if (u(e.node)) return null;
                    i = e.node.parentNode, n = z(e.node) + 1
                } else G(e.node) ? (i = e.node.childNodes[e.offset], n = 0) : (i = e.node, n = t ? P(e.node) : e.offset + 1);
                return {
                    node: i,
                    offset: n
                }
            }, j = function (e, t) {
                return e.node === t.node && e.offset === t.offset
            }, V = function (e, t) {
                var i = t && t.isSkipPaddingBlankHTML,
                    n = t && t.isNotSplitEdgePoint;
                if (B(e) && (m(e.node) || n)) {
                    if (W(e)) return e.node;
                    if (F(e)) return e.node.nextSibling
                }
                if (m(e.node)) return e.node.splitText(e.offset);
                var a = e.node.childNodes[e.offset],
                    s = N(e.node.cloneNode(!1), e.node);
                return R(s, D(a)), i || (O(e.node), O(s)), s
            }, Y = function (e, t, i) {
                var n = L(t.node, se.eq(e));
                return n.length ? 1 === n.length ? V(t, i) : n.reduce((function (e, n) {
                    return e === t.node && (e = V(t, i)), V({
                        node: n,
                        offset: e ? le.position(e) : P(n)
                    }, i)
                })) : null
            }, K = function (e) {
                return document.createElement(e)
            }, X = function (e, t) {
                if (e && e.parentNode) {
                    if (e.removeNode) return e.removeNode(t);
                    var i = e.parentNode;
                    if (!t) {
                        var n, a, s = [];
                        for (n = 0, a = e.childNodes.length; n < a; n++) s.push(e.childNodes[n]);
                        for (n = 0, a = s.length; n < a; n++) i.insertBefore(s[n], e)
                    }
                    i.removeChild(e)
                }
            }, Q = f("TEXTAREA"), J = function (e, t) {
                var i = Q(e[0]) ? e.val() : e.html();
                return t ? i.replace(/[\n\r]/g, "") : i
            }, {
                NBSP_CHAR: re,
                ZERO_WIDTH_NBSP_CHAR: "\ufeff",
                blank: M,
                emptyPara: "<p>" + M + "</p>",
                makePredByNodeName: f,
                isEditable: u,
                isControlSizing: function (t) {
                    return t && e(t).hasClass("note-control-sizing")
                },
                buildLayoutInfo: h,
                makeLayoutInfo: function (t) {
                    var i, n = e(t).closest(".note-editor, .note-air-editor, .note-air-layout");
                    return n.length ? (i = n.is(".note-editor, .note-air-editor") ? n : e("#note-editor-" + oe.last(n.attr("id").split("-"))), h(i)) : null
                },
                isText: m,
                isVoid: g,
                isPara: v,
                isPurePara: function (e) {
                    return v(e) && !b(e)
                },
                isInline: w,
                isBlock: se.not(w),
                isBodyInline: function (e) {
                    return w(e) && !A(e, v)
                },
                isBody: S,
                isParaInline: function (e) {
                    return w(e) && !!A(e, v)
                },
                isList: _,
                isTable: y,
                isCell: C,
                isBlockquote: k,
                isBodyContainer: E,
                isAnchor: x,
                isDiv: f("DIV"),
                isLi: b,
                isBR: f("BR"),
                isSpan: f("SPAN"),
                isB: f("B"),
                isU: f("U"),
                isS: f("S"),
                isI: f("I"),
                isImg: f("IMG"),
                isTextarea: Q,
                isEmpty: I,
                isEmptyAnchor: se.and(x, I),
                isClosestSibling: function (e, t) {
                    return e.nextSibling === t || e.previousSibling === t
                },
                withClosestSiblings: function (e, t) {
                    t = t || se.ok;
                    var i = [];
                    return e.previousSibling && t(e.previousSibling) && i.push(e.previousSibling), i.push(e), e.nextSibling && t(e.nextSibling) && i.push(e.nextSibling), i
                },
                nodeLength: P,
                isLeftEdgePoint: W,
                isRightEdgePoint: F,
                isEdgePoint: B,
                isLeftEdgeOf: U,
                isRightEdgeOf: H,
                isLeftEdgePointOf: function (e, t) {
                    return W(e) && U(e.node, t)
                },
                isRightEdgePointOf: function (e, t) {
                    return F(e) && H(e.node, t)
                },
                prevPoint: $,
                nextPoint: q,
                isSamePoint: j,
                isVisiblePoint: function (e) {
                    if (m(e.node) || !G(e.node) || I(e.node)) return !0;
                    var t = e.node.childNodes[e.offset - 1],
                        i = e.node.childNodes[e.offset];
                    return !(t && !g(t) || i && !g(i))
                },
                prevPointUntil: function (e, t) {
                    for (; e;) {
                        if (t(e)) return e;
                        e = $(e)
                    }
                    return null
                },
                nextPointUntil: function (e, t) {
                    for (; e;) {
                        if (t(e)) return e;
                        e = q(e)
                    }
                    return null
                },
                isCharPoint: function (e) {
                    if (!m(e.node)) return !1;
                    var t = e.node.nodeValue.charAt(e.offset - 1);
                    return t && " " !== t && t !== re
                },
                walkPoint: function (e, t, i, n) {
                    for (var a = e; a && (i(a), !j(a, t));) {
                        var s = n && e.node !== a.node && t.node !== a.node;
                        a = q(a, s)
                    }
                },
                ancestor: A,
                singleChildAncestor: function (e, t) {
                    for (e = e.parentNode; e && 1 === P(e);) {
                        if (t(e)) return e;
                        if (u(e)) break;
                        e = e.parentNode
                    }
                    return null
                },
                listAncestor: L,
                lastAncestor: function (e, t) {
                    var i = L(e);
                    return oe.last(i.filter(t))
                },
                listNext: D,
                listPrev: function (e, t) {
                    t = t || se.fail;
                    for (var i = []; e && !t(e);) i.push(e), e = e.previousSibling;
                    return i
                },
                listDescendant: function (e, t) {
                    var i = [];
                    return t = t || se.ok,
                        function n(a) {
                            e !== a && t(a) && i.push(a);
                            for (var s = 0, o = a.childNodes.length; s < o; s++) n(a.childNodes[s])
                        }(e), i
                },
                commonAncestor: function (t, i) {
                    for (var n = L(t), a = i; a; a = a.parentNode)
                        if (e.inArray(a, n) > -1) return a;
                    return null
                },
                wrap: function (t, i) {
                    var n = t.parentNode,
                        a = e("<" + i + ">")[0];
                    return n.insertBefore(a, t), a.appendChild(t), a
                },
                insertAfter: N,
                appendChildNodes: R,
                position: z,
                hasChildren: G,
                makeOffsetPath: function (e, t) {
                    return L(t, se.eq(e)).map(z).reverse()
                },
                fromOffsetPath: function (e, t) {
                    for (var i = e, n = 0, a = t.length; n < a; n++) i = i.childNodes.length <= t[n] ? i.childNodes[i.childNodes.length - 1] : i.childNodes[t[n]];
                    return i
                },
                splitTree: Y,
                splitPoint: function (e, t) {
                    var i, n, a = t ? v : E,
                        s = L(e.node, a),
                        o = oe.last(s) || e.node;
                    a(o) ? (i = s[s.length - 2], n = o) : n = (i = o).parentNode;
                    var r = i && Y(i, e, {
                        isSkipPaddingBlankHTML: t,
                        isNotSplitEdgePoint: t
                    });
                    return r || n !== e.node || (r = e.node.childNodes[e.offset]), {
                        rightNode: r,
                        container: n
                    }
                },
                create: K,
                createText: function (e) {
                    return document.createTextNode(e)
                },
                remove: X,
                removeWhile: function (e, t) {
                    for (; e && !u(e) && t(e);) {
                        var i = e.parentNode;
                        X(e), e = i
                    }
                },
                replace: function (e, t) {
                    if (e.nodeName.toUpperCase() === t.toUpperCase()) return e;
                    var i = K(t);
                    return e.style.cssText && (i.style.cssText = e.style.cssText), R(i, oe.from(e.childNodes)), N(i, e), X(e), i
                },
                html: function (t, i) {
                    var n = J(t);
                    return i && (n = n.replace(/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g, (function (e, t, i) {
                        i = i.toUpperCase();
                        var n = /^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(i) && !!t,
                            a = /^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(i);
                        return e + (n || a ? "\n" : "")
                    })), n = e.trim(n)), n
                },
                value: J
            }),
            ce = (Z = function (e, t) {
                var i, n, a = e.parentElement(),
                    s = document.body.createTextRange(),
                    o = oe.from(a.childNodes);
                for (i = 0; i < o.length; i++)
                    if (!le.isText(o[i])) {
                        if (s.moveToElementText(o[i]), s.compareEndPoints("StartToStart", e) >= 0) break;
                        n = o[i]
                    } if (0 !== i && le.isText(o[i - 1])) {
                        var r = document.body.createTextRange(),
                            l = null;
                        r.moveToElementText(n || a), r.collapse(!n), l = n ? n.nextSibling : a.firstChild;
                        var c = e.duplicate();
                        c.setEndPoint("StartToStart", r);
                        for (var d = c.text.replace(/[\r\n]/g, "").length; d > l.nodeValue.length && l.nextSibling;) d -= l.nodeValue.length, l = l.nextSibling;
                        l.nodeValue, t && l.nextSibling && le.isText(l.nextSibling) && d === l.nodeValue.length && (d -= l.nodeValue.length, l = l.nextSibling), a = l, i = d
                    }
                return {
                    cont: a,
                    offset: i
                }
            }, ee = function (e) {
                var t = function (e, i) {
                    var n, a;
                    if (le.isText(e)) {
                        var s = le.listPrev(e, se.not(le.isText)),
                            o = oe.last(s).previousSibling;
                        n = o || e.parentNode, i += oe.sum(oe.tail(s), le.nodeLength), a = !o
                    } else {
                        if (n = e.childNodes[i] || e, le.isText(n)) return t(n, 0);
                        i = 0, a = !1
                    }
                    return {
                        node: n,
                        collapseToStart: a,
                        offset: i
                    }
                },
                    i = document.body.createTextRange(),
                    n = t(e.node, e.offset);
                return i.moveToElementText(n.node), i.collapse(n.collapseToStart), i.moveStart("character", n.offset), i
            }, te = function (t, i, n, a) {
                this.sc = t, this.so = i, this.ec = n, this.eo = a;
                var s = function () {
                    if (ae.isW3CRangeSupport) {
                        var e = document.createRange();
                        return e.setStart(t, i), e.setEnd(n, a), e
                    }
                    var s = ee({
                        node: t,
                        offset: i
                    });
                    return s.setEndPoint("EndToEnd", ee({
                        node: n,
                        offset: a
                    })), s
                };
                this.getPoints = function () {
                    return {
                        sc: t,
                        so: i,
                        ec: n,
                        eo: a
                    }
                }, this.getStartPoint = function () {
                    return {
                        node: t,
                        offset: i
                    }
                }, this.getEndPoint = function () {
                    return {
                        node: n,
                        offset: a
                    }
                }, this.select = function () {
                    var e = s();
                    if (ae.isW3CRangeSupport) {
                        var t = document.getSelection();
                        t.rangeCount > 0 && t.removeAllRanges(), t.addRange(e)
                    } else e.select();
                    return this
                }, this.normalize = function () {
                    var e = function (e, t) {
                        if (le.isVisiblePoint(e) && !le.isEdgePoint(e) || le.isVisiblePoint(e) && le.isRightEdgePoint(e) && !t || le.isVisiblePoint(e) && le.isLeftEdgePoint(e) && t || le.isVisiblePoint(e) && le.isBlock(e.node) && le.isEmpty(e.node)) return e;
                        var i = le.ancestor(e.node, le.isBlock);
                        if ((le.isLeftEdgePointOf(e, i) || le.isVoid(le.prevPoint(e).node)) && !t || (le.isRightEdgePointOf(e, i) || le.isVoid(le.nextPoint(e).node)) && t) {
                            if (le.isVisiblePoint(e)) return e;
                            t = !t
                        }
                        return (t ? le.nextPointUntil(le.nextPoint(e), le.isVisiblePoint) : le.prevPointUntil(le.prevPoint(e), le.isVisiblePoint)) || e
                    },
                        t = e(this.getEndPoint(), !1),
                        i = this.isCollapsed() ? t : e(this.getStartPoint(), !0);
                    return new te(i.node, i.offset, t.node, t.offset)
                }, this.nodes = function (e, t) {
                    e = e || se.ok;
                    var i = t && t.includeAncestor,
                        n = t && t.fullyContains,
                        a = this.getStartPoint(),
                        s = this.getEndPoint(),
                        o = [],
                        r = [];
                    return le.walkPoint(a, s, (function (t) {
                        var a;
                        le.isEditable(t.node) || (n ? (le.isLeftEdgePoint(t) && r.push(t.node), le.isRightEdgePoint(t) && oe.contains(r, t.node) && (a = t.node)) : a = i ? le.ancestor(t.node, e) : t.node, a && e(a) && o.push(a))
                    }), !0), oe.unique(o)
                }, this.commonAncestor = function () {
                    return le.commonAncestor(t, n)
                }, this.expand = function (e) {
                    var s = le.ancestor(t, e),
                        o = le.ancestor(n, e);
                    if (!s && !o) return new te(t, i, n, a);
                    var r = this.getPoints();
                    return s && (r.sc = s, r.so = 0), o && (r.ec = o, r.eo = le.nodeLength(o)), new te(r.sc, r.so, r.ec, r.eo)
                }, this.collapse = function (e) {
                    return e ? new te(t, i, t, i) : new te(n, a, n, a)
                }, this.splitText = function () {
                    var e = t === n,
                        s = this.getPoints();
                    return le.isText(n) && !le.isEdgePoint(this.getEndPoint()) && n.splitText(a), le.isText(t) && !le.isEdgePoint(this.getStartPoint()) && (s.sc = t.splitText(i), s.so = 0, e && (s.ec = s.sc, s.eo = a - i)), new te(s.sc, s.so, s.ec, s.eo)
                }, this.deleteContents = function () {
                    if (this.isCollapsed()) return this;
                    var t = this.splitText(),
                        i = t.nodes(null, {
                            fullyContains: !0
                        }),
                        n = le.prevPointUntil(t.getStartPoint(), (function (e) {
                            return !oe.contains(i, e.node)
                        })),
                        a = [];
                    return e.each(i, (function (e, t) {
                        var i = t.parentNode;
                        n.node !== i && 1 === le.nodeLength(i) && a.push(i), le.remove(t, !1)
                    })), e.each(a, (function (e, t) {
                        le.remove(t, !1)
                    })), new te(n.node, n.offset, n.node, n.offset).normalize()
                };
                var o = function (e) {
                    return function () {
                        var i = le.ancestor(t, e);
                        return !!i && i === le.ancestor(n, e)
                    }
                };
                this.isOnEditable = o(le.isEditable), this.isOnList = o(le.isList), this.isOnAnchor = o(le.isAnchor), this.isOnCell = o(le.isCell), this.isLeftEdgeOf = function (e) {
                    if (!le.isLeftEdgePoint(this.getStartPoint())) return !1;
                    var t = le.ancestor(this.sc, e);
                    return t && le.isLeftEdgeOf(this.sc, t)
                }, this.isCollapsed = function () {
                    return t === n && i === a
                }, this.wrapBodyInlineWithPara = function () {
                    if (le.isBodyContainer(t) && le.isEmpty(t)) return t.innerHTML = le.emptyPara, new te(t.firstChild, 0, t.firstChild, 0);
                    var e, i = this.normalize();
                    if (le.isParaInline(t) || le.isPara(t)) return i;
                    if (le.isInline(i.sc)) {
                        var n = le.listAncestor(i.sc, se.not(le.isInline));
                        e = oe.last(n), le.isInline(e) || (e = n[n.length - 2] || i.sc.childNodes[i.so])
                    } else e = i.sc.childNodes[i.so > 0 ? i.so - 1 : 0];
                    var a = le.listPrev(e, le.isParaInline).reverse();
                    if ((a = a.concat(le.listNext(e.nextSibling, le.isParaInline))).length) {
                        var s = le.wrap(oe.head(a), "p");
                        le.appendChildNodes(s, oe.tail(a))
                    }
                    return this.normalize()
                }, this.insertNode = function (e) {
                    var t = this.wrapBodyInlineWithPara().deleteContents(),
                        i = le.splitPoint(t.getStartPoint(), le.isInline(e));
                    return i.rightNode ? i.rightNode.parentNode.insertBefore(e, i.rightNode) : i.container.appendChild(e), e
                }, this.pasteHTML = function (t) {
                    var i = e("<div></div>").html(t)[0],
                        n = oe.from(i.childNodes),
                        a = this.wrapBodyInlineWithPara().deleteContents();
                    return n.reverse().map((function (e) {
                        return a.insertNode(e)
                    })).reverse()
                }, this.toString = function () {
                    var e = s();
                    return ae.isW3CRangeSupport ? e.toString() : e.text
                }, this.getWordRange = function (e) {
                    var t = this.getEndPoint();
                    if (!le.isCharPoint(t)) return this;
                    var i = le.prevPointUntil(t, (function (e) {
                        return !le.isCharPoint(e)
                    }));
                    return e && (t = le.nextPointUntil(t, (function (e) {
                        return !le.isCharPoint(e)
                    }))), new te(i.node, i.offset, t.node, t.offset)
                }, this.bookmark = function (e) {
                    return {
                        s: {
                            path: le.makeOffsetPath(e, t),
                            offset: i
                        },
                        e: {
                            path: le.makeOffsetPath(e, n),
                            offset: a
                        }
                    }
                }, this.paraBookmark = function (e) {
                    return {
                        s: {
                            path: oe.tail(le.makeOffsetPath(oe.head(e), t)),
                            offset: i
                        },
                        e: {
                            path: oe.tail(le.makeOffsetPath(oe.last(e), n)),
                            offset: a
                        }
                    }
                }, this.getClientRects = function () {
                    return s().getClientRects()
                }
            }, {
                create: function (e, t, i, n) {
                    if (arguments.length) 2 === arguments.length && (i = e, n = t);
                    else if (ae.isW3CRangeSupport) {
                        var a = document.getSelection();
                        if (!a || 0 === a.rangeCount) return null;
                        if (le.isBody(a.anchorNode)) return null;
                        var s = a.getRangeAt(0);
                        e = s.startContainer, t = s.startOffset, i = s.endContainer, n = s.endOffset
                    } else {
                        var o = document.selection.createRange(),
                            r = o.duplicate();
                        r.collapse(!1);
                        var l = o;
                        l.collapse(!0);
                        var c = Z(l, !0),
                            d = Z(r, !1);
                        le.isText(c.node) && le.isLeftEdgePoint(c) && le.isTextNode(d.node) && le.isRightEdgePoint(d) && d.node.nextSibling === c.node && (c = d), e = c.cont, t = c.offset, i = d.cont, n = d.offset
                    }
                    return new te(e, t, i, n)
                },
                createFromNode: function (e) {
                    var t = e,
                        i = 0,
                        n = e,
                        a = le.nodeLength(n);
                    return le.isVoid(t) && (i = le.listPrev(t).length - 1, t = t.parentNode), le.isBR(n) ? (a = le.listPrev(n).length - 1, n = n.parentNode) : le.isVoid(n) && (a = le.listPrev(n).length, n = n.parentNode), this.create(t, i, n, a)
                },
                createFromNodeBefore: function (e) {
                    return this.createFromNode(e).collapse(!0)
                },
                createFromNodeAfter: function (e) {
                    return this.createFromNode(e).collapse()
                },
                createFromBookmark: function (e, t) {
                    var i = le.fromOffsetPath(e, t.s.path),
                        n = t.s.offset,
                        a = le.fromOffsetPath(e, t.e.path),
                        s = t.e.offset;
                    return new te(i, n, a, s)
                },
                createFromParaBookmark: function (e, t) {
                    var i = e.s.offset,
                        n = e.e.offset,
                        a = le.fromOffsetPath(oe.head(t), e.s.path),
                        s = le.fromOffsetPath(oe.last(t), e.e.path);
                    return new te(a, i, s, n)
                }
            }),
            de = {
                readFileAsDataURL: function (t) {
                    return e.Deferred((function (i) {
                        e.extend(new FileReader, {
                            onload: function (e) {
                                var t = e.target.result;
                                i.resolve(t)
                            },
                            onerror: function () {
                                i.reject(this)
                            }
                        }).readAsDataURL(t)
                    })).promise()
                },
                createImage: function (t, i) {
                    return e.Deferred((function (n) {
                        var a = e("<img>");
                        a.one("load", (function () {
                            a.off("error abort"), n.resolve(a)
                        })).one("error abort", (function () {
                            a.off("load").detach(), n.reject(a)
                        })).css({
                            display: "none"
                        }).appendTo(document.body).attr({
                            src: t,
                            "data-filename": i
                        })
                    })).promise()
                }
            },
            pe = (ie = {
                BACKSPACE: 8,
                TAB: 9,
                ENTER: 13,
                SPACE: 32,
                NUM0: 48,
                NUM1: 49,
                NUM2: 50,
                NUM3: 51,
                NUM4: 52,
                NUM5: 53,
                NUM6: 54,
                NUM7: 55,
                NUM8: 56,
                B: 66,
                E: 69,
                I: 73,
                J: 74,
                K: 75,
                L: 76,
                R: 82,
                S: 83,
                U: 85,
                V: 86,
                Y: 89,
                Z: 90,
                SLASH: 191,
                LEFTBRACKET: 219,
                BACKSLASH: 220,
                RIGHTBRACKET: 221
            }, {
                isEdit: function (e) {
                    return oe.contains([8, 9, 13, 32], e)
                },
                isMove: function (e) {
                    return oe.contains([37, 38, 39, 40], e)
                },
                nameFromCode: se.invertObject(ie),
                code: ie
            }),
            ue = function (e) {
                var t = [],
                    i = -1,
                    n = e[0],
                    a = function (t) {
                        try {
                            null !== t.contents && e.html(t.contents), null !== t.bookmark && ce.createFromBookmark(n, t.bookmark).select()
                        } catch (e) { }
                    };
                this.undo = function () {
                    e.html() !== t[i].contents && this.recordUndo(), 0 < i && (i--, a(t[i]))
                }, this.redo = function () {
                    t.length - 1 > i && (i++, a(t[i]))
                }, this.recordUndo = function () {
                    var a;
                    i++, t.length > i && (t = t.slice(0, i)), t.push((a = ce.create(), {
                        contents: e.html(),
                        bookmark: a ? a.bookmark(n) : {
                            s: {
                                path: [],
                                offset: 0
                            },
                            e: {
                                path: [],
                                offset: 0
                            }
                        }
                    }))
                }, this.recordUndo()
            },
            he = function () {
                this.fromNode = function (t) {
                    var i = function (t, i) {
                        if (ae.jqueryVersion < 1.9) {
                            var n = {};
                            return e.each(i, (function (e, i) {
                                n[i] = t.css(i)
                            })), n
                        }
                        return t.css.call(t, i)
                    }(t, ["font-family", "font-size", "text-align", "list-style-type", "line-height"]) || {};
                    return i["font-size"] = parseInt(i["font-size"], 10), i
                }, this.stylePara = function (t, i) {
                    e.each(t.nodes(le.isPara, {
                        includeAncestor: !0
                    }), (function (t, n) {
                        e(n).css(i)
                    }))
                }, this.styleNodes = function (t, i) {
                    t = t.splitText();
                    var n = i && i.nodeName || "SPAN",
                        a = !(!i || !i.expandClosestSibling),
                        s = !(!i || !i.onlyPartialContains);
                    if (t.isCollapsed()) return [t.insertNode(le.create(n))];
                    var o = le.makePredByNodeName(n),
                        r = t.nodes(le.isText, {
                            fullyContains: !0
                        }).map((function (e) {
                            return le.singleChildAncestor(e, o) || le.wrap(e, n)
                        }));
                    if (a) {
                        if (s) {
                            var l = t.nodes();
                            o = se.and(o, (function (e) {
                                return oe.contains(l, e)
                            }))
                        }
                        return r.map((function (t) {
                            var i = le.withClosestSiblings(t, o),
                                n = oe.head(i),
                                a = oe.tail(i);
                            return e.each(a, (function (e, t) {
                                le.appendChildNodes(n, t.childNodes), le.remove(t)
                            })), oe.head(i)
                        }))
                    }
                    return r
                }, this.current = function (t) {
                    var i = e(le.isText(t.sc) ? t.sc.parentNode : t.sc),
                        n = this.fromNode(i);
                    if (n["font-bold"] = document.queryCommandState("bold") ? "bold" : "normal", n["font-italic"] = document.queryCommandState("italic") ? "italic" : "normal", n["font-underline"] = document.queryCommandState("underline") ? "underline" : "normal", n["font-strikethrough"] = document.queryCommandState("strikeThrough") ? "strikethrough" : "normal", n["font-superscript"] = document.queryCommandState("superscript") ? "superscript" : "normal", n["font-subscript"] = document.queryCommandState("subscript") ? "subscript" : "normal", t.isOnList()) {
                        var a = e.inArray(n["list-style-type"], ["circle", "disc", "disc-leading-zero", "square"]) > -1;
                        n["list-style"] = a ? "unordered" : "ordered"
                    } else n["list-style"] = "none";
                    var s = le.ancestor(t.sc, le.isPara);
                    if (s && s.style["line-height"]) n["line-height"] = s.style.lineHeight;
                    else {
                        var o = parseInt(n["line-height"], 10) / parseInt(n["font-size"], 10);
                        n["line-height"] = o.toFixed(1)
                    }
                    return n.anchor = t.isOnAnchor() && le.ancestor(t.sc, le.isAnchor), n.ancestors = le.listAncestor(t.sc, le.isEditable), n.range = t, n
                }
            },
            fe = function () {
                this.insertOrderedList = function () {
                    this.toggleList("OL")
                }, this.insertUnorderedList = function () {
                    this.toggleList("UL")
                }, this.indent = function () {
                    var t = this,
                        i = ce.create().wrapBodyInlineWithPara(),
                        n = i.nodes(le.isPara, {
                            includeAncestor: !0
                        }),
                        a = oe.clusterBy(n, se.peq2("parentNode"));
                    e.each(a, (function (i, n) {
                        var a = oe.head(n);
                        le.isLi(a) ? t.wrapList(n, a.parentNode.nodeName) : e.each(n, (function (t, i) {
                            e(i).css("marginLeft", (function (e, t) {
                                return (parseInt(t, 10) || 0) + 25
                            }))
                        }))
                    })), i.select()
                }, this.outdent = function () {
                    var t = this,
                        i = ce.create().wrapBodyInlineWithPara(),
                        n = i.nodes(le.isPara, {
                            includeAncestor: !0
                        }),
                        a = oe.clusterBy(n, se.peq2("parentNode"));
                    e.each(a, (function (i, n) {
                        var a = oe.head(n);
                        le.isLi(a) ? t.releaseList([n]) : e.each(n, (function (t, i) {
                            e(i).css("marginLeft", (function (e, t) {
                                return (t = parseInt(t, 10) || 0) > 25 ? t - 25 : ""
                            }))
                        }))
                    })), i.select()
                }, this.toggleList = function (t) {
                    var i = this,
                        n = ce.create().wrapBodyInlineWithPara(),
                        a = n.nodes(le.isPara, {
                            includeAncestor: !0
                        }),
                        s = n.paraBookmark(a),
                        o = oe.clusterBy(a, se.peq2("parentNode"));
                    if (oe.find(a, le.isPurePara)) {
                        var r = [];
                        e.each(o, (function (e, n) {
                            r = r.concat(i.wrapList(n, t))
                        })), a = r
                    } else {
                        var l = n.nodes(le.isList, {
                            includeAncestor: !0
                        }).filter((function (i) {
                            return !e.nodeName(i, t)
                        }));
                        l.length ? e.each(l, (function (e, i) {
                            le.replace(i, t)
                        })) : a = this.releaseList(o, !0)
                    }
                    ce.createFromParaBookmark(s, a).select()
                }, this.wrapList = function (e, t) {
                    var i = oe.head(e),
                        n = oe.last(e),
                        a = le.isList(i.previousSibling) && i.previousSibling,
                        s = le.isList(n.nextSibling) && n.nextSibling,
                        o = a || le.insertAfter(le.create(t || "UL"), n);
                    return e = e.map((function (e) {
                        return le.isPurePara(e) ? le.replace(e, "LI") : e
                    })), le.appendChildNodes(o, e), s && (le.appendChildNodes(o, oe.from(s.childNodes)), le.remove(s)), e
                }, this.releaseList = function (t, i) {
                    var n = [];
                    return e.each(t, (function (t, a) {
                        var s = oe.head(a),
                            o = oe.last(a),
                            r = i ? le.lastAncestor(s, le.isList) : s.parentNode,
                            l = r.childNodes.length > 1 ? le.splitTree(r, {
                                node: o.parentNode,
                                offset: le.position(o) + 1
                            }, {
                                isSkipPaddingBlankHTML: !0
                            }) : null,
                            c = le.splitTree(r, {
                                node: s.parentNode,
                                offset: le.position(s)
                            }, {
                                isSkipPaddingBlankHTML: !0
                            });
                        a = i ? le.listDescendant(c, le.isLi) : oe.from(c.childNodes).filter(le.isLi), !i && le.isList(r.parentNode) || (a = a.map((function (e) {
                            return le.replace(e, "P")
                        }))), e.each(oe.from(a).reverse(), (function (e, t) {
                            le.insertAfter(t, r)
                        }));
                        var d = oe.compact([r, c, l]);
                        e.each(d, (function (t, i) {
                            var n = [i].concat(le.listDescendant(i, le.isList));
                            e.each(n.reverse(), (function (e, t) {
                                le.nodeLength(t) || le.remove(t, !0)
                            }))
                        })), n = n.concat(a)
                    })), n
                }
            },
            me = function () {
                var t = new fe;
                this.insertTab = function (e, t, i) {
                    var n = le.createText(new Array(i + 1).join(le.NBSP_CHAR));
                    (t = t.deleteContents()).insertNode(n, !0), (t = ce.create(n, i)).select()
                }, this.insertParagraph = function () {
                    var i = ce.create();
                    i = (i = i.deleteContents()).wrapBodyInlineWithPara();
                    var n, a = le.ancestor(i.sc, le.isPara);
                    if (a) {
                        if (le.isEmpty(a) && le.isLi(a)) return void t.toggleList(a.parentNode.nodeName);
                        n = le.splitTree(a, i.getStartPoint());
                        var s = le.listDescendant(a, le.isEmptyAnchor);
                        s = s.concat(le.listDescendant(n, le.isEmptyAnchor)), e.each(s, (function (e, t) {
                            le.remove(t)
                        }))
                    } else {
                        var o = i.sc.childNodes[i.so];
                        n = e(le.emptyPara)[0], o ? i.sc.insertBefore(n, o) : i.sc.appendChild(n)
                    }
                    ce.create(n, 0).normalize().select()
                }
            },
            ge = function () {
                this.tab = function (e, t) {
                    var i = le.ancestor(e.commonAncestor(), le.isCell),
                        n = le.ancestor(i, le.isTable),
                        a = le.listDescendant(n, le.isCell),
                        s = oe[t ? "prev" : "next"](a, i);
                    s && ce.create(s, 0).select()
                }, this.createTable = function (t, i) {
                    for (var n, a = [], s = 0; s < t; s++) a.push("<td>" + le.blank + "</td>");
                    n = a.join("");
                    for (var o, r = [], l = 0; l < i; l++) r.push("<tr>" + n + "</tr>");
                    return o = r.join(""), e('<table class="table table-bordered">' + o + "</table>")[0]
                }
            },
            ve = "bogus",
            be = function (t) {
                var i = this,
                    n = new he,
                    a = new ge,
                    s = new me,
                    o = new fe;
                this.createRange = function (e) {
                    return this.focus(e), ce.create()
                }, this.saveRange = function (e, t) {
                    this.focus(e), e.data("range", ce.create()), t && ce.create().collapse().select()
                }, this.saveNode = function (e) {
                    for (var t = [], i = 0, n = e[0].childNodes.length; i < n; i++) t.push(e[0].childNodes[i]);
                    e.data("childNodes", t)
                }, this.restoreRange = function (e) {
                    var t = e.data("range");
                    t && (t.select(), this.focus(e))
                }, this.restoreNode = function (e) {
                    e.html("");
                    for (var t = e.data("childNodes"), i = 0, n = t.length; i < n; i++) e[0].appendChild(t[i])
                }, this.currentStyle = function (e) {
                    var t = ce.create(),
                        i = t && t.isOnEditable() ? n.current(t.normalize()) : {};
                    return le.isImg(e) && (i.image = e), i
                }, this.styleFromNode = function (e) {
                    return n.fromNode(e)
                }, this.triggerOnChange = function (e) {
                    l(e)
                };
                var r = function (e) {
                    var i = le.makeLayoutInfo(e).holder();
                    t.bindCustomEvent(i, e.data("callbacks"), "before.command")(e.html(), e)
                },
                    l = function (e) {
                        var i = le.makeLayoutInfo(e).holder();
                        t.bindCustomEvent(i, e.data("callbacks"), "change")(e.html(), e)
                    };
                this.undo = function (e) {
                    r(e), e.data("NoteHistory").undo(), l(e)
                }, this.redo = function (e) {
                    r(e), e.data("NoteHistory").redo(), l(e)
                };
                for (var c = this.beforeCommand = function (e) {
                    r(e), i.focus(e)
                }, d = this.afterCommand = function (e, t) {
                    e.data("NoteHistory").recordUndo(), t || l(e)
                }, p = ["bold", "italic", "underline", "strikethrough", "superscript", "subscript", "justifyLeft", "justifyCenter", "justifyRight", "justifyFull", "formatBlock", "removeFormat", "backColor", "foreColor", "fontName"], u = 0, h = p.length; u < h; u++) this[p[u]] = function (e) {
                    return function (t, i) {
                        c(t), document.execCommand(e, !1, i), d(t, !0)
                    }
                }(p[u]);
                this.tab = function (e, t) {
                    var i = this.createRange(e);
                    i.isCollapsed() && i.isOnCell() ? a.tab(i) : (c(e), s.insertTab(e, i, t.tabsize), d(e))
                }, this.untab = function (e) {
                    var t = this.createRange(e);
                    t.isCollapsed() && t.isOnCell() && a.tab(t, !0)
                }, this.insertParagraph = function (e) {
                    c(e), s.insertParagraph(e), d(e)
                }, this.insertOrderedList = function (e) {
                    c(e), o.insertOrderedList(e), d(e)
                }, this.insertUnorderedList = function (e) {
                    c(e), o.insertUnorderedList(e), d(e)
                }, this.indent = function (e) {
                    c(e), o.indent(e), d(e)
                }, this.outdent = function (e) {
                    c(e), o.outdent(e), d(e)
                }, this.insertImage = function (e, i, n) {
                    de.createImage(i, n).then((function (t) {
                        c(e), t.css({
                            display: "",
                            width: Math.min(e.width(), t.width())
                        }), ce.create().insertNode(t[0]), ce.createFromNodeAfter(t[0]).select(), d(e)
                    })).fail((function () {
                        var i = le.makeLayoutInfo(e).holder();
                        t.bindCustomEvent(i, e.data("callbacks"), "image.upload.error")()
                    }))
                }, this.insertNode = function (e, t) {
                    c(e), ce.create().insertNode(t), ce.createFromNodeAfter(t).select(), d(e)
                }, this.insertText = function (e, t) {
                    c(e);
                    var i = ce.create().insertNode(le.createText(t));
                    ce.create(i, le.nodeLength(i)).select(), d(e)
                }, this.resetStyles = function (t) {
                    c(t);
                    var i = ce.create().insertNode(le.createText((window.getSelection() || "").toString())),
                        n = e(i).parent();
                    if (n.length) {
                        var a = n[0].style.textAlign;
                        n.removeAttr("style").find(":empty").remove(), a && (n[0].style.textAlign = a)
                    }
                    ce.create(i, le.nodeLength(i)).select(), d(t)
                }, this.pasteHTML = function (e, t) {
                    c(e);
                    var i = ce.create().pasteHTML(t);
                    ce.createFromNodeAfter(oe.last(i)).select(), d(e)
                }, this.formatBlock = function (e, t) {
                    c(e), t = ae.isMSIE ? "<" + t + ">" : t, document.execCommand("FormatBlock", !1, t), d(e)
                }, this.formatPara = function (e) {
                    c(e), this.formatBlock(e, "P"), d(e)
                };
                for (u = 1; u <= 6; u++) this["formatH" + u] = function (e) {
                    return function (t) {
                        this.formatBlock(t, "H" + e)
                    }
                }(u);
                this.fontSize = function (t, i) {
                    var a = ce.create();
                    if (a.isCollapsed()) {
                        var s = n.styleNodes(a),
                            o = oe.head(s);
                        e(s).css({
                            "font-size": i + "px"
                        }), o && !le.nodeLength(o) && (o.innerHTML = le.ZERO_WIDTH_NBSP_CHAR, ce.createFromNodeAfter(o.firstChild).select(), t.data(ve, o))
                    } else c(t), e(n.styleNodes(a)).css({
                        "font-size": i + "px"
                    }), d(t)
                }, this.insertHorizontalRule = function (t) {
                    c(t);
                    var i = ce.create().insertNode(e("<HR/>")[0]);
                    i.nextSibling && ce.create(i.nextSibling, 0).normalize().select(), d(t)
                }, this.removeBogus = function (e) {
                    var t = e.data(ve);
                    if (t) {
                        var i = oe.find(oe.from(t.childNodes), le.isText),
                            n = i.nodeValue.indexOf(le.ZERO_WIDTH_NBSP_CHAR); - 1 !== n && i.deleteData(n, 1), le.isEmpty(t) && le.remove(t), e.removeData(ve)
                    }
                }, this.lineHeight = function (e, t) {
                    c(e), n.stylePara(ce.create(), {
                        lineHeight: t
                    }), d(e)
                }, this.unlink = function (e) {
                    var t = this.createRange(e);
                    if (t.isOnAnchor()) {
                        var i = le.ancestor(t.sc, le.isAnchor);
                        (t = ce.createFromNode(i)).select(), c(e), document.execCommand("unlink"), d(e)
                    }
                }, this.wrap = function (e) {
                    return n.styleNodes(this.createRange(e), {
                        nodeName: "span"
                    })
                }, this.createLink = function (t, i, a) {
                    var s = i.url,
                        o = i.text,
                        r = i.isNewWindow,
                        l = i.isNoFollow,
                        p = i.range || this.createRange(t),
                        u = p.toString() !== o;
                    a = a || le.makeLayoutInfo(t).editor().data("options"), c(t), a.onCreateLink && (s = a.onCreateLink(s));
                    var h = [];
                    if (u) {
                        var f = p.insertNode(e("<A>" + o + "</A>")[0]);
                        h.push(f)
                    } else h = n.styleNodes(p, {
                        nodeName: "A",
                        expandClosestSibling: !0,
                        onlyPartialContains: !0
                    });
                    h.forEach((function (e) {
                        e.href = s, l ? e.rel = "nofollow" : e.rel && "nofollow" === e.rel && e.removeAttribute("rel"), r ? e.target = "_blank" : e.removeAttribute("target")
                    }));
                    var m = ce.createFromNodeBefore(oe.head(h)).getStartPoint(),
                        g = ce.createFromNodeAfter(oe.last(h)).getEndPoint();
                    ce.create(m.node, m.offset, g.node, g.offset).select(), d(t)
                }, this.getLinkInfo = function (t) {
                    this.focus(t);
                    var i = ce.create().expand(le.isAnchor),
                        n = e(oe.head(i.nodes(le.isAnchor)));
                    return {
                        range: i,
                        text: i.toString(),
                        isNewWindow: !!n.length && "_blank" === n.attr("target"),
                        isNoFollow: !!n.length && "nofollow" === n.attr("rel"),
                        url: n.length ? n.attr("href") : ""
                    }
                }, this.color = function (e, t) {
                    var i = JSON.parse(t),
                        n = i.foreColor,
                        a = i.backColor;
                    c(e), n && document.execCommand("foreColor", !1, n), a && document.execCommand("backColor", !1, a), d(e)
                }, this.insertTable = function (e, t) {
                    var i = t.split("x");
                    c(e), ce.create().deleteContents().insertNode(a.createTable(i[0], i[1])), d(e)
                }, this.floatMe = function (e, t, i) {
                    c(e), i.removeClass("pull-left pull-right"), t && "none" !== t && i.addClass("pull-" + t), i.css("float", t), d(e)
                }, this.imageShape = function (e, t, i) {
                    c(e), i.removeClass("img-rounded img-circle img-thumbnail"), t && i.addClass(t), d(e)
                }, this.resize = function (e, t, i) {
                    c(e), i.css({
                        width: 100 * t + "%",
                        height: ""
                    }), d(e)
                }, this.resizeTo = function (e, t, i) {
                    var n;
                    if (i) {
                        var a = e.y / e.x,
                            s = t.data("ratio");
                        n = {
                            width: s > a ? e.x : e.y / s,
                            height: s > a ? e.x * s : e.y
                        }
                    } else n = {
                        width: e.x,
                        height: e.y
                    };
                    t.css(n)
                }, this.removeMedia = function (i, n, a) {
                    c(i), a.detach(), t.bindCustomEvent(e(), i.data("callbacks"), "media.delete")(a, i), d(i)
                }, this.focus = function (e) {
                    e.focus(), ae.isFF && !ce.create().isOnEditable() && ce.createFromNode(e[0]).normalize().collapse().select()
                }, this.isEmpty = function (e) {
                    return le.isEmpty(e[0]) || le.emptyPara === e.html()
                }
            },
            ye = function () {
                this.update = function (t, i) {
                    var n = function (t, i) {
                        t.find(".dropdown-menu li a").each((function () {
                            var t = e(this).data("value") + "" == i + "";
                            this.className = t ? "checked" : ""
                        }))
                    },
                        a = function (e, i) {
                            t.find(e).toggleClass("active", i())
                        };
                    if (i.image) {
                        var s = e(i.image);
                        a('button[data-event="imageShape"][data-value="img-rounded"]', (function () {
                            return s.hasClass("img-rounded")
                        })), a('button[data-event="imageShape"][data-value="img-circle"]', (function () {
                            return s.hasClass("img-circle")
                        })), a('button[data-event="imageShape"][data-value="img-thumbnail"]', (function () {
                            return s.hasClass("img-thumbnail")
                        })), a('button[data-event="imageShape"]:not([data-value])', (function () {
                            return !s.is(".img-rounded, .img-circle, .img-thumbnail")
                        }));
                        var o = s.css("float");
                        a('button[data-event="floatMe"][data-value="left"]', (function () {
                            return "left" === o
                        })), a('button[data-event="floatMe"][data-value="right"]', (function () {
                            return "right" === o
                        })), a('button[data-event="floatMe"][data-value="none"]', (function () {
                            return "left" !== o && "right" !== o
                        }));
                        var r = s.attr("style");
                        return a('button[data-event="resize"][data-value="1"]', (function () {
                            return !!/(^|\s)(max-)?width\s*:\s*100%/.test(r)
                        })), a('button[data-event="resize"][data-value="0.5"]', (function () {
                            return !!/(^|\s)(max-)?width\s*:\s*50%/.test(r)
                        })), void a('button[data-event="resize"][data-value="0.25"]', (function () {
                            return !!/(^|\s)(max-)?width\s*:\s*25%/.test(r)
                        }))
                    }
                    var l = t.find(".note-fontname");
                    if (l.length) {
                        var c = i["font-family"];
                        if (c) {
                            for (var d = c.split(","), p = 0, u = d.length; p < u && (c = d[p].replace(/[\'\"]/g, "").replace(/\s+$/, "").replace(/^\s+/, ""), !ae.isFontInstalled(c)); p++);
                            l.find(".note-current-fontname").text(c), n(l, c)
                        }
                    }
                    var h = t.find(".note-fontsize");
                    h.find(".note-current-fontsize").text(i["font-size"]), n(h, parseFloat(i["font-size"])), n(t.find(".note-height"), parseFloat(i["line-height"])), a('button[data-event="bold"]', (function () {
                        return "bold" === i["font-bold"]
                    })), a('button[data-event="italic"]', (function () {
                        return "italic" === i["font-italic"]
                    })), a('button[data-event="underline"]', (function () {
                        return "underline" === i["font-underline"]
                    })), a('button[data-event="strikethrough"]', (function () {
                        return "strikethrough" === i["font-strikethrough"]
                    })), a('button[data-event="superscript"]', (function () {
                        return "superscript" === i["font-superscript"]
                    })), a('button[data-event="subscript"]', (function () {
                        return "subscript" === i["font-subscript"]
                    })), a('button[data-event="justifyLeft"]', (function () {
                        return "left" === i["text-align"] || "start" === i["text-align"]
                    })), a('button[data-event="justifyCenter"]', (function () {
                        return "center" === i["text-align"]
                    })), a('button[data-event="justifyRight"]', (function () {
                        return "right" === i["text-align"]
                    })), a('button[data-event="justifyFull"]', (function () {
                        return "justify" === i["text-align"]
                    })), a('button[data-event="insertUnorderedList"]', (function () {
                        return "unordered" === i["list-style"]
                    })), a('button[data-event="insertOrderedList"]', (function () {
                        return "ordered" === i["list-style"]
                    }))
                }, this.updateRecentColor = function (t, i, n) {
                    var a = e(t).closest(".note-color").find(".note-recent-color"),
                        s = JSON.parse(a.attr("data-value"));
                    s[i] = n, a.attr("data-value", JSON.stringify(s));
                    var o = "backColor" === i ? "background-color" : "color";
                    a.find("i").css(o, n)
                }
            },
            we = function () {
                var e = new ye;
                this.update = function (t, i) {
                    e.update(t, i)
                }, this.updateRecentColor = function (t, i, n) {
                    e.updateRecentColor(t, i, n)
                }, this.activate = function (e) {
                    e.find("button").not('button[data-event="codeview"]').removeClass("disabled")
                }, this.deactivate = function (e) {
                    e.find("button").not('button[data-event="codeview"]').addClass("disabled")
                }, this.updateFullscreen = function (e, t) {
                    e.find('button[data-event="fullscreen"]').toggleClass("active", t)
                }, this.updateCodeview = function (e, t) {
                    e.find('button[data-event="codeview"]').toggleClass("active", t), t ? this.deactivate(e) : this.activate(e)
                }, this.get = function (e, t) {
                    return le.makeLayoutInfo(e).toolbar().find("[data-name=" + t + "]")
                }, this.setButtonState = function (e, t, i) {
                    i = !1 !== i, this.get(e, t).toggleClass("active", i)
                }
            },
            _e = function () {
                var t = e(document);
                this.attach = function (e, t) {
                    t.disableResizeEditor || e.statusbar().on("mousedown", i)
                };
                var i = function (e) {
                    e.preventDefault(), e.stopPropagation();
                    var i = le.makeLayoutInfo(e.target).editable(),
                        n = i.offset().top - t.scrollTop(),
                        a = le.makeLayoutInfo(e.currentTarget || e.target).editor().data("options");
                    t.on("mousemove", (function (e) {
                        var t = e.clientY - (n + 24);
                        t = a.minHeight > 0 ? Math.max(t, a.minHeight) : t, t = a.maxHeight > 0 ? Math.min(t, a.maxHeight) : t, i.height(t)
                    })).one("mouseup", (function () {
                        t.off("mousemove")
                    }))
                }
            },
            Te = function () {
                var t = new ye,
                    i = function (t, i) {
                        var n = i && i.isAirMode,
                            a = i && i.isLeftTop,
                            s = e(t),
                            o = n ? s.offset() : s.position(),
                            r = a ? 0 : s.outerHeight(!0);
                        return {
                            left: o.left,
                            top: o.top + r
                        }
                    },
                    n = function (e, t) {
                        e.css({
                            display: "block",
                            left: t.left,
                            top: t.top
                        })
                    };
                this.update = function (a, s, o) {
                    t.update(a, s);
                    var r = a.find(".note-link-popover");
                    if (s.anchor) {
                        var l = r.find("a"),
                            c = e(s.anchor).attr("href"),
                            d = e(s.anchor).attr("target");
                        l.attr("href", c).html(c), d ? l.attr("target", "_blank") : l.removeAttr("target"), n(r, i(s.anchor, {
                            isAirMode: o
                        }))
                    } else r.hide();
                    var p = a.find(".note-image-popover");
                    s.image ? n(p, i(s.image, {
                        isAirMode: o,
                        isLeftTop: !1
                    })) : p.hide();
                    var u = a.find(".note-air-popover");
                    if (o && s.range && !s.range.isCollapsed()) {
                        var h = oe.last(s.range.getClientRects());
                        if (h) {
                            var f = se.rect2bnd(h);
                            n(u, {
                                left: Math.max(f.left + f.width / 2 - 20, 0),
                                top: f.top + f.height
                            })
                        }
                    } else u.hide()
                }, this.updateRecentColor = function (e, t, i) {
                    e.updateRecentColor(e, t, i)
                }, this.hide = function (e) {
                    e.children().hide()
                }
            },
            Ce = function (t) {
                var i = e(document),
                    n = function (n) {
                        if (le.isControlSizing(n.target)) {
                            n.preventDefault(), n.stopPropagation();
                            var a = le.makeLayoutInfo(n.target),
                                s = a.handle(),
                                o = a.popover(),
                                r = a.editable(),
                                l = a.editor(),
                                c = s.find(".note-control-selection").data("target"),
                                d = e(c),
                                p = d.offset(),
                                u = i.scrollTop(),
                                h = l.data("options").airMode;
                            i.on("mousemove", (function (e) {
                                t.invoke("editor.resizeTo", {
                                    x: e.clientX - p.left,
                                    y: e.clientY - (p.top - u)
                                }, d, !e.shiftKey), t.invoke("handle.update", s, {
                                    image: c
                                }, h), t.invoke("popover.update", o, {
                                    image: c
                                }, h)
                            })).one("mouseup", (function () {
                                i.off("mousemove"), t.invoke("editor.afterCommand", r)
                            })), d.data("ratio") || d.data("ratio", d.height() / d.width())
                        }
                    };
                this.attach = function (e) {
                    e.handle().on("mousedown", n)
                }, this.update = function (t, i, n) {
                    var a = t.find(".note-control-selection");
                    if (i.image) {
                        var s = e(i.image),
                            o = n ? s.offset() : s.position(),
                            r = {
                                w: s.outerWidth(!0),
                                h: s.outerHeight(!0)
                            };
                        a.css({
                            display: "block",
                            left: o.left,
                            top: o.top,
                            width: r.w,
                            height: r.h
                        }).data("target", i.image);
                        var l = r.w + "x" + r.h;
                        a.find(".note-control-selection-info").text(l)
                    } else a.hide()
                }, this.hide = function (e) {
                    e.children().hide()
                }
            },
            ke = function (t) {
                var i = e(window),
                    n = e("html, body");
                this.toggle = function (e) {
                    var a = e.editor(),
                        s = e.toolbar(),
                        o = e.editable(),
                        r = e.codable(),
                        l = function (e) {
                            o.css("height", e.h), r.css("height", e.h), r.data("cmeditor") && r.data("cmeditor").setsize(null, e.h)
                        };
                    a.toggleClass("fullscreen");
                    var c = a.hasClass("fullscreen");
                    c ? (o.data("orgheight", o.css("height")), i.on("resize", (function () {
                        l({
                            h: i.height() - s.outerHeight()
                        })
                    })).trigger("resize"), n.css("overflow", "hidden")) : (i.off("resize"), l({
                        h: o.data("orgheight")
                    }), n.css("overflow", "visible")), t.invoke("toolbar.updateFullscreen", s, c)
                }
            };
        ae.hasCodeMirror && (ae.isSupportAmd ? require(["CodeMirror"], (function (e) {
            ne = e
        })) : ne = window.CodeMirror);
        var Ee = function (e) {
            this.sync = function (t) {
                e.invoke("codeview.isActivated", t) && ae.hasCodeMirror && t.codable().data("cmEditor").save()
            }, this.isActivated = function (e) {
                return e.editor().hasClass("codeview")
            }, this.toggle = function (e) {
                this.isActivated(e) ? this.deactivate(e) : this.activate(e)
            }, this.activate = function (t) {
                var i = t.editor(),
                    n = t.toolbar(),
                    a = t.editable(),
                    s = t.codable(),
                    o = t.popover(),
                    r = t.handle(),
                    l = i.data("options");
                if (s.val(le.html(a, l.prettifyHtml)), s.height(a.height()), e.invoke("toolbar.updateCodeview", n, !0), e.invoke("popover.hide", o), e.invoke("handle.hide", r), i.addClass("codeview"), s.focus(), ae.hasCodeMirror) {
                    var c = ne.fromTextArea(s[0], l.codemirror);
                    if (l.codemirror.tern) {
                        var d = new ne.TernServer(l.codemirror.tern);
                        c.ternServer = d, c.on("cursorActivity", (function (e) {
                            d.updateArgHints(e)
                        }))
                    }
                    c.setSize(null, a.outerHeight()), s.data("cmEditor", c)
                }
            }, this.deactivate = function (t) {
                var i = t.holder(),
                    n = t.editor(),
                    a = t.toolbar(),
                    s = t.editable(),
                    o = t.codable(),
                    r = n.data("options");
                if (ae.hasCodeMirror) {
                    var l = o.data("cmEditor");
                    o.val(l.getValue()), l.toTextArea()
                }
                var c = le.value(o, r.prettifyHtml) || le.emptyPara,
                    d = s.html() !== c;
                s.html(c), s.height(r.height ? o.height() : "auto"), n.removeClass("codeview"), d && e.bindCustomEvent(i, s.data("callbacks"), "change")(s.html(), s), s.focus(), e.invoke("toolbar.updateCodeview", a, !1)
            }
        },
            xe = function (t) {
                var i = e(document);
                this.attach = function (e, t) {
                    t.airMode || t.disableDragAndDrop ? i.on("drop", (function (e) {
                        e.preventDefault()
                    })) : this.attachDragAndDropEvent(e, t)
                }, this.attachDragAndDropEvent = function (n, a) {
                    var s = e(),
                        o = n.editor(),
                        r = n.dropzone(),
                        l = r.find(".note-dropzone-message");
                    i.on("dragenter", (function (e) {
                        var i = t.invoke("codeview.isActivated", n),
                            c = o.width() > 0 && o.height() > 0;
                        i || s.length || !c || (o.addClass("dragover"), r.width(o.width()), r.height(o.height()), l.text(a.langInfo.image.dragImageHere)), s = s.add(e.target)
                    })).on("dragleave", (function (e) {
                        (s = s.not(e.target)).length || o.removeClass("dragover")
                    })).on("drop", (function () {
                        s = e(), o.removeClass("dragover")
                    })), r.on("dragenter", (function () {
                        r.addClass("hover"), l.text(a.langInfo.image.dropImage)
                    })).on("dragleave", (function () {
                        r.removeClass("hover"), l.text(a.langInfo.image.dragImageHere)
                    })), r.on("drop", (function (i) {
                        var n = i.originalEvent.dataTransfer,
                            a = le.makeLayoutInfo(i.currentTarget || i.target);
                        if (n && n.files && n.files.length) i.preventDefault(), a.editable().focus(), t.insertImages(a, n.files);
                        else
                            for (var s = function () {
                                a.holder().summernote("insertNode", this)
                            }, o = 0, r = n.types.length; o < r; o++) {
                                var l = n.types[o],
                                    c = n.getData(l);
                                l.toLowerCase().indexOf("text") > -1 ? a.holder().summernote("pasteHTML", c) : e(c).each(s)
                            }
                    })).on("dragover", !1)
                }
            },
            Se = function (t) {
                var i;
                this.attach = function (s) {
                    ae.isMSIE && ae.browserVersion > 10 ? (i = e("<div />").attr("contenteditable", !0).css({
                        position: "absolute",
                        left: -1e5,
                        opacity: 0
                    }), s.editable().on("keydown", (function (e) {
                        e.ctrlKey && e.keyCode === pe.code.V && (t.invoke("saveRange", s.editable()), i.focus(), setTimeout((function () {
                            n(s)
                        }), 0))
                    })), s.editable().before(i)) : s.editable().on("paste", a)
                };
                var n = function (n) {
                    var a = n.editable(),
                        s = i[0].firstChild;
                    if (le.isImg(s));
                    else {
                        var o = e("<div />").html(i.html()).html();
                        t.invoke("restoreRange", a), t.invoke("focus", a), o && t.invoke("pasteHTML", a, o)
                    }
                    i.empty()
                },
                    a = function (e) {
                        var i = e.originalEvent.clipboardData,
                            n = le.makeLayoutInfo(e.currentTarget || e.target).editable();
                        if (i && i.items && i.items.length) {
                            var a = oe.head(i.items);
                            "file" === a.kind && a.type.indexOf("image/"), t.invoke("editor.afterCommand", n)
                        }
                    }
            },
            Me = function (t) {
                var i = function (e, t) {
                    e.toggleClass("disabled", !t), e.attr("disabled", !t)
                },
                    n = function (e, t) {
                        e.on("keypress", (function (e) {
                            e.keyCode === pe.code.ENTER && t.trigger("click")
                        }))
                    };
                this.showLinkDialog = function (t, a, s) {
                    return e.Deferred((function (e) {
                        var t = a.find(".note-link-dialog"),
                            o = t.find(".note-link-text"),
                            r = t.find(".note-link-url"),
                            l = t.find(".note-link-btn"),
                            c = t.find("input[type=checkbox]");
                        t.one("shown.bs.modal", (function () {
                            o.val(s.text), o.on("input", (function () {
                                i(l, o.val() && r.val()), s.text = o.val()
                            })), s.url || (s.url = s.text || "http://", i(l, s.text)), r.on("input", (function () {
                                i(l, o.val() && r.val()), s.text || o.val(r.val())
                            })).val(s.url).trigger("focus").trigger("select"), n(r, l), n(o, l), c.prop("checked", s.isNewWindow), l.one("click", (function (i) {
                                i.preventDefault(), e.resolve({
                                    range: s.range,
                                    url: r.val(),
                                    text: o.val(),
                                    isNewWindow: c.is(":checked")
                                }), t.modal("hide")
                            }))
                        })).one("hidden.bs.modal", (function () {
                            o.off("input keypress"), r.off("input keypress"), l.off("click"), "pending" === e.state() && e.reject()
                        })).modal("show")
                    })).promise()
                }, this.show = function (e) {
                    var i = e.editor(),
                        n = e.dialog(),
                        a = e.editable(),
                        s = e.popover(),
                        o = t.invoke("editor.getLinkInfo", a),
                        r = i.data("options");
                    t.invoke("editor.saveRange", a), this.showLinkDialog(a, n, o).then((function (e) {
                        t.invoke("editor.restoreRange", a), t.invoke("editor.createLink", a, e, r), t.invoke("popover.hide", s)
                    })).fail((function () {
                        t.invoke("editor.restoreRange", a)
                    }))
                }
            },
            Pe = function (t) {
                this.show = function (e) {
                    var i = e.dialog(),
                        n = e.editable();
                    t.invoke("editor.saveRange", n), this.showImageDialog(n, i).then((function (i) {
                        t.invoke("editor.restoreRange", n), "string" == typeof i ? t.invoke("editor.insertImage", n, i) : t.insertImages(e, i)
                    })).fail((function () {
                        t.invoke("editor.restoreRange", n)
                    }))
                }, this.showImageDialog = function (t, i) {
                    return e.Deferred((function (e) {
                        var t = i.find(".note-image-dialog"),
                            n = i.find(".note-image-input"),
                            a = i.find(".note-image-url"),
                            s = i.find(".note-image-btn");
                        t.one("shown.bs.modal", (function () {
                            var i;
                            n.replaceWith(n.clone().on("change", (function () {
                                e.resolve(this.files || this.value), t.modal("hide")
                            })).val("")), s.click((function (i) {
                                i.preventDefault(), e.resolve(a.val()), t.modal("hide")
                            })), a.on("keyup paste", (function (e) {
                                var t, i, n;
                                t = "paste" === e.type ? e.originalEvent.clipboardData.getData("text") : a.val(), n = t, (i = s).toggleClass("disabled", !n), i.attr("disabled", !n)
                            })).val("").trigger("focus"), i = s, a.on("keypress", (function (e) {
                                e.keyCode === pe.code.ENTER && i.trigger("click")
                            }))
                        })).one("hidden.bs.modal", (function () {
                            n.off("change"), a.off("keyup paste keypress"), s.off("click"), "pending" === e.state() && e.reject()
                        })).modal("show")
                    }))
                }
            },
            Ie = function (t) {
                this.showHelpDialog = function (t, i) {
                    return e.Deferred((function (e) {
                        i.find(".note-help-dialog").one("hidden.bs.modal", (function () {
                            e.resolve()
                        })).modal("show")
                    })).promise()
                }, this.show = function (e) {
                    var i = e.dialog(),
                        n = e.editable();
                    t.invoke("editor.saveRange", n, !0), this.showHelpDialog(n, i).then((function () {
                        t.invoke("editor.restoreRange", n)
                    }))
                }
            };
        e.summernote = e.summernote || {}, e.extend(e.summernote, {
            version: "0.6.16",
            options: {
                width: null,
                height: null,
                minHeight: null,
                maxHeight: null,
                focus: !1,
                tabsize: 4,
                styleWithSpan: !0,
                disableLinkTarget: !1,
                disableDragAndDrop: !1,
                disableResizeEditor: !1,
                disableResizeImage: !1,
                shortcuts: !0,
                textareaAutoSync: !0,
                placeholder: !1,
                prettifyHtml: !0,
                iconPrefix: "fa fa-",
                icons: {
                    font: {
                        bold: "bold",
                        italic: "italic",
                        underline: "underline",
                        clear: "eraser",
                        height: "text-height",
                        strikethrough: "strikethrough",
                        superscript: "superscript",
                        subscript: "subscript"
                    },
                    image: {
                        image: "picture-o",
                        floatLeft: "align-left",
                        floatRight: "align-right",
                        floatNone: "align-justify",
                        shapeRounded: "square",
                        shapeCircle: "circle-o",
                        shapeThumbnail: "picture-o",
                        shapeNone: "times",
                        remove: "trash-o"
                    },
                    link: {
                        link: "link",
                        unlink: "unlink",
                        edit: "edit"
                    },
                    table: {
                        table: "table"
                    },
                    hr: {
                        insert: "minus"
                    },
                    style: {
                        style: "magic"
                    },
                    lists: {
                        unordered: "list-ul",
                        ordered: "list-ol"
                    },
                    options: {
                        help: "question",
                        fullscreen: "arrows-alt",
                        codeview: "code"
                    },
                    paragraph: {
                        paragraph: "align-left",
                        outdent: "outdent",
                        indent: "indent",
                        left: "align-left",
                        center: "align-center",
                        right: "align-right",
                        justify: "align-justify"
                    },
                    color: {
                        recent: "font"
                    },
                    history: {
                        undo: "undo",
                        redo: "repeat"
                    },
                    misc: {
                        check: "check"
                    }
                },
                dialogsInBody: !1,
                codemirror: {
                    mode: "text/html",
                    htmlMode: !0,
                    lineNumbers: !0
                },
                lang: "en-US",
                direction: null,
                toolbar: [
                    ["style", ["style"]],
                    ["font", ["bold", "italic", "underline", "clear"]],
                    ["fontname", ["fontname"]],
                    ["fontsize", ["fontsize"]],
                    ["color", ["color"]],
                    ["para", ["ul", "ol", "paragraph"]],
                    ["height", ["height"]],
                    ["table", ["table"]],
                    ["insert", ["link", "picture", "hr"]],
                    ["view", ["fullscreen", "codeview"]],
                    ["help", ["help"]]
                ],
                plugin: {},
                airMode: !1,
                airPopover: [
                    ["color", ["color"]],
                    ["font", ["bold", "underline", "clear"]],
                    ["para", ["ul", "paragraph"]],
                    ["table", ["table"]],
                    ["insert", ["link", "picture"]]
                ],
                styleTags: ["p", "blockquote", "pre", "h1", "h2", "h3", "h4", "h5", "h6"],
                defaultFontName: "Helvetica Neue",
                fontNames: ["Arial", "Comic Sans MS", "Courier New", "Helvetica Neue", "Helvetica", "Impact", "Lucida Grande", "Tahoma", "Times New Roman", "Verdana", "Roboto", "Open Sans", "PT Sans"],
                fontNamesIgnoreCheck: [],
                fontSizes: ["8", "9", "10", "11", "12", "13", "14", "15", "16", "18", "24", "36", "42", "60"],
                colors: [
                    ["#000000", "#424242", "#636363", "#9C9C94", "#CEC6CE", "#EFEFEF", "#F7F7F7", "#FFFFFF"],
                    ["#FF0000", "#FF9C00", "#FFFF00", "#00FF00", "#00FFFF", "#0000FF", "#9C00FF", "#FF00FF"],
                    ["#F7C6CE", "#FFE7CE", "#FFEFC6", "#D6EFD6", "#CEDEE7", "#CEE7F7", "#D6D6E7", "#E7D6DE"],
                    ["#E79C9C", "#FFC69C", "#FFE79C", "#B5D6A5", "#A5C6CE", "#9CC6EF", "#B5A5D6", "#D6A5BD"],
                    ["#E76363", "#F7AD6B", "#FFD663", "#94BD7B", "#73A5AD", "#6BADDE", "#8C7BC6", "#C67BA5"],
                    ["#CE0000", "#E79439", "#EFC631", "#6BA54A", "#4A7B8C", "#3984C6", "#634AA5", "#A54A7B"],
                    ["#9C0000", "#B56308", "#BD9400", "#397B21", "#104A5A", "#085294", "#311873", "#731842"],
                    ["#630000", "#7B3900", "#846300", "#295218", "#083139", "#003163", "#21104A", "#4A1031"]
                ],
                lineHeights: ["1.0", "1.2", "1.4", "1.5", "1.6", "1.8", "2.0", "3.0"],
                insertTableMaxSize: {
                    col: 10,
                    row: 10
                },
                maximumImageFileSize: null,
                oninit: null,
                onfocus: null,
                onblur: null,
                onenter: null,
                onkeyup: null,
                onkeydown: null,
                onImageUpload: null,
                onImageUploadError: null,
                onMediaDelete: null,
                onToolbarClick: null,
                onsubmit: null,
                onCreateLink: function (e) {
                    return -1 !== e.indexOf("@") && -1 === e.indexOf(":") && (e = "mailto:" + e), e
                },
                keyMap: {
                    pc: {
                        ENTER: "insertParagraph",
                        "CTRL+Z": "undo",
                        "CTRL+Y": "redo",
                        TAB: "tab",
                        "SHIFT+TAB": "untab",
                        "CTRL+B": "bold",
                        "CTRL+I": "italic",
                        "CTRL+U": "underline",
                        "CTRL+SHIFT+S": "strikethrough",
                        "CTRL+BACKSLASH": "removeFormat",
                        "CTRL+SHIFT+L": "justifyLeft",
                        "CTRL+SHIFT+E": "justifyCenter",
                        "CTRL+SHIFT+R": "justifyRight",
                        "CTRL+SHIFT+J": "justifyFull",
                        "CTRL+SHIFT+NUM7": "insertUnorderedList",
                        "CTRL+SHIFT+NUM8": "insertOrderedList",
                        "CTRL+LEFTBRACKET": "outdent",
                        "CTRL+RIGHTBRACKET": "indent",
                        "CTRL+NUM0": "formatPara",
                        "CTRL+NUM1": "formatH1",
                        "CTRL+NUM2": "formatH2",
                        "CTRL+NUM3": "formatH3",
                        "CTRL+NUM4": "formatH4",
                        "CTRL+NUM5": "formatH5",
                        "CTRL+NUM6": "formatH6",
                        "CTRL+ENTER": "insertHorizontalRule",
                        "CTRL+K": "showLinkDialog"
                    },
                    mac: {
                        ENTER: "insertParagraph",
                        "CMD+Z": "undo",
                        "CMD+SHIFT+Z": "redo",
                        TAB: "tab",
                        "SHIFT+TAB": "untab",
                        "CMD+B": "bold",
                        "CMD+I": "italic",
                        "CMD+U": "underline",
                        "CMD+SHIFT+S": "strikethrough",
                        "CMD+BACKSLASH": "removeFormat",
                        "CMD+SHIFT+L": "justifyLeft",
                        "CMD+SHIFT+E": "justifyCenter",
                        "CMD+SHIFT+R": "justifyRight",
                        "CMD+SHIFT+J": "justifyFull",
                        "CMD+SHIFT+NUM7": "insertUnorderedList",
                        "CMD+SHIFT+NUM8": "insertOrderedList",
                        "CMD+LEFTBRACKET": "outdent",
                        "CMD+RIGHTBRACKET": "indent",
                        "CMD+NUM0": "formatPara",
                        "CMD+NUM1": "formatH1",
                        "CMD+NUM2": "formatH2",
                        "CMD+NUM3": "formatH3",
                        "CMD+NUM4": "formatH4",
                        "CMD+NUM5": "formatH5",
                        "CMD+NUM6": "formatH6",
                        "CMD+ENTER": "insertHorizontalRule",
                        "CMD+K": "showLinkDialog"
                    }
                }
            },
            lang: {
                "en-US": {
                    font: {
                        bold: "Bold",
                        italic: "Italic",
                        underline: "Underline",
                        clear: "Remove Font Style",
                        height: "Line Height",
                        name: "Font Family",
                        strikethrough: "Strikethrough",
                        subscript: "Subscript",
                        superscript: "Superscript",
                        size: "Font Size"
                    },
                    image: {
                        image: "Picture",
                        insert: "Insert Image",
                        resizeFull: "Resize Full",
                        resizeHalf: "Resize Half",
                        resizeQuarter: "Resize Quarter",
                        floatLeft: "Float Left",
                        floatRight: "Float Right",
                        floatNone: "Float None",
                        shapeRounded: "Shape: Rounded",
                        shapeCircle: "Shape: Circle",
                        shapeThumbnail: "Shape: Thumbnail",
                        shapeNone: "Shape: None",
                        dragImageHere: "Drag image or text here",
                        dropImage: "Drop image or Text",
                        selectFromFiles: "Select from files",
                        maximumFileSize: "Maximum file size",
                        maximumFileSizeError: "Maximum file size exceeded.",
                        url: "Image URL",
                        remove: "Remove Image"
                    },
                    link: {
                        link: "Link",
                        insert: "Insert Link",
                        unlink: "Unlink",
                        edit: "Edit",
                        textToDisplay: "Text to display",
                        url: "To what URL should this link go?",
                        openInNewWindow: "Open in new window"
                    },
                    table: {
                        table: "Table"
                    },
                    hr: {
                        insert: "Insert Horizontal Rule"
                    },
                    style: {
                        style: "Style",
                        normal: "Normal",
                        blockquote: "Quote",
                        pre: "Code",
                        h1: "Header 1",
                        h2: "Header 2",
                        h3: "Header 3",
                        h4: "Header 4",
                        h5: "Header 5",
                        h6: "Header 6"
                    },
                    lists: {
                        unordered: "Unordered list",
                        ordered: "Ordered list"
                    },
                    options: {
                        help: "Help",
                        fullscreen: "Full Screen",
                        codeview: "Code View"
                    },
                    paragraph: {
                        paragraph: "Paragraph",
                        outdent: "Outdent",
                        indent: "Indent",
                        left: "Align left",
                        center: "Align center",
                        right: "Align right",
                        justify: "Justify full"
                    },
                    color: {
                        recent: "Recent Color",
                        more: "More Color",
                        background: "Background Color",
                        foreground: "Foreground Color",
                        transparent: "Transparent",
                        setTransparent: "Set transparent",
                        reset: "Reset",
                        resetToDefault: "Reset to default"
                    },
                    shortcut: {
                        shortcuts: "Keyboard shortcuts",
                        close: "Close",
                        textFormatting: "Text formatting",
                        action: "Action",
                        paragraphFormatting: "Paragraph formatting",
                        documentStyle: "Document Style",
                        extraKeys: "Extra keys"
                    },
                    history: {
                        undo: "Undo",
                        redo: "Redo"
                    }
                }
            }
        });
        var Oe = new function () {
            var t = function (e, t) {
                var i = t.event,
                    n = t.value,
                    a = t.title,
                    s = t.className,
                    o = t.dropdown,
                    r = t.hide;
                return (o ? '<div class="btn-group' + (s ? " " + s : "") + '">' : "") + '<button type="button" class="btn btn-default btn-sm' + (!o && s ? " " + s : "") + (o ? " dropdown-toggle" : "") + '"' + (o ? ' data-toggle="dropdown"' : "") + (a ? ' title="' + a + '"' : "") + (i ? ' data-event="' + i + '"' : "") + (n ? " data-value='" + n + "'" : "") + (r ? " data-hide='" + r + "'" : "") + ' tabindex="-1">' + e + (o ? ' <span class="caret"></span>' : "") + "</button>" + (o || "") + (o ? "</div>" : "")
            },
                i = function (e, i) {
                    return t('<i class="' + e + '"></i>', i)
                },
                n = function (t, i) {
                    var n = e('<div class="' + t + ' popover bottom in" style="display: none;"><div class="arrow"></div><div class="popover-content"></div></div>');
                    return n.find(".popover-content").append(i), n
                },
                a = function (e, t, i, n) {
                    return '<div class="' + e + ' modal" aria-hidden="false"><div class="modal-dialog"><div class="modal-content">' + (t ? '<div class="modal-header"><button type="button" class="close" aria-hidden="true" tabindex="-1">&times;</button><h4 class="modal-title">' + t + "</h4></div>" : "") + '<div class="modal-body">' + i + "</div>" + (n ? '<div class="modal-footer">' + n + "</div>" : "") + "</div></div></div>"
                },
                s = function (e, t, i) {
                    var n = "dropdown-menu" + (t ? " " + t : "");
                    return i = i || "ul", e instanceof Array && (e = e.join("")), "<" + i + ' class="' + n + '">' + e + "</" + i + ">"
                },
                o = {
                    picture: function (e, t) {
                        return i(t.iconPrefix + t.icons.image.image, {
                            event: "showImageDialog",
                            title: e.image.image,
                            hide: !0
                        })
                    },
                    link: function (e, t) {
                        return i(t.iconPrefix + t.icons.link.link, {
                            event: "showLinkDialog",
                            title: e.link.link,
                            hide: !0
                        })
                    },
                    table: function (e, t) {
                        return i(t.iconPrefix + t.icons.table.table, {
                            title: e.table.table,
                            dropdown: s(['<div class="note-dimension-picker">', '<div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"></div>', '<div class="note-dimension-picker-highlighted"></div>', '<div class="note-dimension-picker-unhighlighted"></div>', "</div>", '<div class="note-dimension-display"> 1 x 1 </div>'], "note-table")
                        })
                    },
                    style: function (e, t) {
                        var n = t.styleTags.reduce((function (t, i) {
                            var n = e.style["p" === i ? "normal" : i];
                            return t + '<li><a data-event="formatBlock" href="#" data-value="' + i + '">' + ("p" === i || "pre" === i ? n : "<" + i + ">" + n + "</" + i + ">") + "</a></li>"
                        }), "");
                        return i(t.iconPrefix + t.icons.style.style, {
                            title: e.style.style,
                            dropdown: s(n)
                        })
                    },
                    fontname: function (e, i) {
                        var n = [],
                            a = i.fontNames.reduce((function (e, t) {
                                return ae.isFontInstalled(t) || oe.contains(i.fontNamesIgnoreCheck, t) ? (n.push(t), e + '<li><a data-event="fontName" href="#" data-value="' + t + '" style="font-family:\'' + t + '\'"><i class="' + i.iconPrefix + i.icons.misc.check + '"></i> ' + t + "</a></li>") : e
                            }), ""),
                            o = ae.isFontInstalled(i.defaultFontName) ? i.defaultFontName : n[0];
                        return t('<span class="note-current-fontname">' + o + "</span>", {
                            title: e.font.name,
                            className: "note-fontname",
                            dropdown: s(a, "note-check")
                        })
                    },
                    fontsize: function (e, i) {
                        var n = i.fontSizes.reduce((function (e, t) {
                            return e + '<li><a data-event="fontSize" href="#" data-value="' + t + '"><i class="' + i.iconPrefix + i.icons.misc.check + '"></i> ' + t + "</a></li>"
                        }), "");
                        return t('<span class="note-current-fontsize">11</span>', {
                            title: e.font.size,
                            className: "note-fontsize",
                            dropdown: s(n, "note-check")
                        })
                    },
                    color: function (e, i) {
                        var n = '<i class="' + i.iconPrefix + i.icons.color.recent + '" style="color:black;background-color:yellow;"></i>',
                            a = t(n, {
                                className: "note-recent-color",
                                title: e.color.recent,
                                event: "color",
                                value: '{"backColor":"yellow"}'
                            }),
                            o = ['<li><div class="btn-group">', '<div class="note-palette-title">' + e.color.background + "</div>", '<div class="note-color-reset" data-event="backColor"', ' data-value="inherit" title="' + e.color.transparent + '">' + e.color.setTransparent + "</div>", '<div class="note-color-palette" data-target-event="backColor"></div>', '</div><div class="btn-group">', '<div class="note-palette-title">' + e.color.foreground + "</div>", '<div class="note-color-reset" data-event="foreColor" data-value="inherit" title="' + e.color.reset + '">', e.color.resetToDefault, "</div>", '<div class="note-color-palette" data-target-event="foreColor"></div>', "</div></li>"];
                        return a + t("", {
                            title: e.color.more,
                            dropdown: s(o)
                        })
                    },
                    bold: function (e, t) {
                        return i(t.iconPrefix + t.icons.font.bold, {
                            event: "bold",
                            title: e.font.bold
                        })
                    },
                    italic: function (e, t) {
                        return i(t.iconPrefix + t.icons.font.italic, {
                            event: "italic",
                            title: e.font.italic
                        })
                    },
                    underline: function (e, t) {
                        return i(t.iconPrefix + t.icons.font.underline, {
                            event: "underline",
                            title: e.font.underline
                        })
                    },
                    strikethrough: function (e, t) {
                        return i(t.iconPrefix + t.icons.font.strikethrough, {
                            event: "strikethrough",
                            title: e.font.strikethrough
                        })
                    },
                    superscript: function (e, t) {
                        return i(t.iconPrefix + t.icons.font.superscript, {
                            event: "superscript",
                            title: e.font.superscript
                        })
                    },
                    subscript: function (e, t) {
                        return i(t.iconPrefix + t.icons.font.subscript, {
                            event: "subscript",
                            title: e.font.subscript
                        })
                    },
                    clear: function (e, t) {
                        return i(t.iconPrefix + t.icons.font.clear, {
                            event: "removeFormat",
                            title: e.font.clear
                        })
                    },
                    ul: function (e, t) {
                        return i(t.iconPrefix + t.icons.lists.unordered, {
                            event: "insertUnorderedList",
                            title: e.lists.unordered
                        })
                    },
                    ol: function (e, t) {
                        return i(t.iconPrefix + t.icons.lists.ordered, {
                            event: "insertOrderedList",
                            title: e.lists.ordered
                        })
                    },
                    paragraph: function (e, t) {
                        var n = i(t.iconPrefix + t.icons.paragraph.left, {
                            title: e.paragraph.left,
                            event: "justifyLeft"
                        }),
                            a = i(t.iconPrefix + t.icons.paragraph.center, {
                                title: e.paragraph.center,
                                event: "justifyCenter"
                            }),
                            o = i(t.iconPrefix + t.icons.paragraph.right, {
                                title: e.paragraph.right,
                                event: "justifyRight"
                            }),
                            r = i(t.iconPrefix + t.icons.paragraph.justify, {
                                title: e.paragraph.justify,
                                event: "justifyFull"
                            }),
                            l = i(t.iconPrefix + t.icons.paragraph.outdent, {
                                title: e.paragraph.outdent,
                                event: "outdent"
                            }),
                            c = ['<div class="note-align btn-group">', n + a + o + r, '</div><div class="note-list btn-group">', i(t.iconPrefix + t.icons.paragraph.indent, {
                                title: e.paragraph.indent,
                                event: "indent"
                            }) + l, "</div>"];
                        return i(t.iconPrefix + t.icons.paragraph.paragraph, {
                            title: e.paragraph.paragraph,
                            dropdown: s(c, "", "div")
                        })
                    },
                    height: function (e, t) {
                        var n = t.lineHeights.reduce((function (e, i) {
                            return e + '<li><a data-event="lineHeight" href="#" data-value="' + parseFloat(i) + '"><i class="' + t.iconPrefix + t.icons.misc.check + '"></i> ' + i + "</a></li>"
                        }), "");
                        return i(t.iconPrefix + t.icons.font.height, {
                            title: e.font.height,
                            dropdown: s(n, "note-check")
                        })
                    },
                    help: function (e, t) {
                        return i(t.iconPrefix + t.icons.options.help, {
                            event: "showHelpDialog",
                            title: e.options.help,
                            hide: !0
                        })
                    },
                    fullscreen: function (e, t) {
                        return i(t.iconPrefix + t.icons.options.fullscreen, {
                            event: "fullscreen",
                            title: e.options.fullscreen
                        })
                    },
                    codeview: function (e, t) {
                        return i(t.iconPrefix + t.icons.options.codeview, {
                            event: "codeview",
                            title: e.options.codeview
                        })
                    },
                    undo: function (e, t) {
                        return i(t.iconPrefix + t.icons.history.undo, {
                            event: "undo",
                            title: e.history.undo
                        })
                    },
                    redo: function (e, t) {
                        return i(t.iconPrefix + t.icons.history.redo, {
                            event: "redo",
                            title: e.history.redo
                        })
                    },
                    hr: function (e, t) {
                        return i(t.iconPrefix + t.icons.hr.insert, {
                            event: "insertHorizontalRule",
                            title: e.hr.insert
                        })
                    }
                },
                r = function (a, s) {
                    var r, l, c = e('<div class="note-popover" />');
                    return c.append((r = i(s.iconPrefix + s.icons.link.edit, {
                        title: a.link.edit,
                        event: "showLinkDialog",
                        hide: !0
                    }), l = i(s.iconPrefix + s.icons.link.unlink, {
                        title: a.link.unlink,
                        event: "unlink"
                    }), n("note-link-popover", '<a href="http://www.google.com" target="_blank">www.google.com</a>&nbsp;&nbsp;<div class="note-insert btn-group">' + r + l + "</div>"))), c.append(function () {
                        var e = t('<span class="note-fontsize-10">100%</span>', {
                            title: a.image.resizeFull,
                            event: "resize",
                            value: "1"
                        }),
                            o = t('<span class="note-fontsize-10">50%</span>', {
                                title: a.image.resizeHalf,
                                event: "resize",
                                value: "0.5"
                            }),
                            r = t('<span class="note-fontsize-10">25%</span>', {
                                title: a.image.resizeQuarter,
                                event: "resize",
                                value: "0.25"
                            }),
                            l = i(s.iconPrefix + s.icons.image.floatLeft, {
                                title: a.image.floatLeft,
                                event: "floatMe",
                                value: "left"
                            }),
                            c = i(s.iconPrefix + s.icons.image.floatRight, {
                                title: a.image.floatRight,
                                event: "floatMe",
                                value: "right"
                            }),
                            d = i(s.iconPrefix + s.icons.image.floatNone, {
                                title: a.image.floatNone,
                                event: "floatMe",
                                value: "none"
                            }),
                            p = i(s.iconPrefix + s.icons.image.shapeRounded, {
                                title: a.image.shapeRounded,
                                event: "imageShape",
                                value: "img-rounded"
                            }),
                            u = i(s.iconPrefix + s.icons.image.shapeCircle, {
                                title: a.image.shapeCircle,
                                event: "imageShape",
                                value: "img-circle"
                            }),
                            h = i(s.iconPrefix + s.icons.image.shapeThumbnail, {
                                title: a.image.shapeThumbnail,
                                event: "imageShape",
                                value: "img-thumbnail"
                            }),
                            f = i(s.iconPrefix + s.icons.image.shapeNone, {
                                title: a.image.shapeNone,
                                event: "imageShape",
                                value: ""
                            }),
                            m = i(s.iconPrefix + s.icons.image.remove, {
                                title: a.image.remove,
                                event: "removeMedia",
                                value: "none"
                            }),
                            g = (s.disableResizeImage ? "" : '<div class="btn-group">' + e + o + r + "</div>") + '<div class="btn-group">' + l + c + d + '</div><br><div class="btn-group">' + p + u + h + f + '</div><div class="btn-group">' + m + "</div>";
                        return n("note-image-popover", g)
                    }()), s.airMode && c.append(function () {
                        for (var t = e("<div />"), i = 0, r = s.airPopover.length; i < r; i++) {
                            for (var l = s.airPopover[i], c = e('<div class="note-' + l[0] + ' btn-group">'), d = 0, p = l[1].length; d < p; d++) {
                                var u = e(o[l[1][d]](a, s));
                                u.attr("data-name", l[1][d]), c.append(u)
                            }
                            t.append(c)
                        }
                        return n("note-air-popover", t.children())
                    }()), c
                },
                l = function (e) {
                    return '<div class="note-handle"><div class="note-control-selection"><div class="note-control-selection-bg"></div><div class="note-control-holder note-control-nw"></div><div class="note-control-holder note-control-ne"></div><div class="note-control-holder note-control-sw"></div><div class="' + (e.disableResizeImage ? "note-control-holder" : "note-control-sizing") + ' note-control-se"></div>' + (e.disableResizeImage ? "" : '<div class="note-control-selection-info"></div>') + "</div></div>"
                },
                c = function (e, t) {
                    var i = "note-shortcut-col col-xs-6 note-shortcut-",
                        n = [];
                    for (var a in t) t.hasOwnProperty(a) && n.push('<div class="' + i + 'key">' + t[a].kbd + '</div><div class="' + i + 'name">' + t[a].text + "</div>");
                    return '<div class="note-shortcut-row row"><div class="' + i + 'title col-xs-offset-6">' + e + '</div></div><div class="note-shortcut-row row">' + n.join('</div><div class="note-shortcut-row row">') + "</div>"
                },
                d = function (e) {
                    var t = [{
                        kbd: "Ã¢Å’Ëœ + B",
                        text: e.font.bold
                    }, {
                        kbd: "Ã¢Å’Ëœ + I",
                        text: e.font.italic
                    }, {
                        kbd: "Ã¢Å’Ëœ + U",
                        text: e.font.underline
                    }, {
                        kbd: "Ã¢Å’Ëœ + \\",
                        text: e.font.clear
                    }];
                    return c(e.shortcut.textFormatting, t)
                },
                p = function (e) {
                    var t = [{
                        kbd: "Ã¢Å’Ëœ + Z",
                        text: e.history.undo
                    }, {
                        kbd: "Ã¢Å’Ëœ + Ã¢â€¡Â§ + Z",
                        text: e.history.redo
                    }, {
                        kbd: "Ã¢Å’Ëœ + ]",
                        text: e.paragraph.indent
                    }, {
                        kbd: "Ã¢Å’Ëœ + [",
                        text: e.paragraph.outdent
                    }, {
                        kbd: "Ã¢Å’Ëœ + ENTER",
                        text: e.hr.insert
                    }];
                    return c(e.shortcut.action, t)
                },
                u = function (e) {
                    var t = [{
                        kbd: "Ã¢Å’Ëœ + Ã¢â€¡Â§ + L",
                        text: e.paragraph.left
                    }, {
                        kbd: "Ã¢Å’Ëœ + Ã¢â€¡Â§ + E",
                        text: e.paragraph.center
                    }, {
                        kbd: "Ã¢Å’Ëœ + Ã¢â€¡Â§ + R",
                        text: e.paragraph.right
                    }, {
                        kbd: "Ã¢Å’Ëœ + Ã¢â€¡Â§ + J",
                        text: e.paragraph.justify
                    }, {
                        kbd: "Ã¢Å’Ëœ + Ã¢â€¡Â§ + NUM7",
                        text: e.lists.ordered
                    }, {
                        kbd: "Ã¢Å’Ëœ + Ã¢â€¡Â§ + NUM8",
                        text: e.lists.unordered
                    }];
                    return c(e.shortcut.paragraphFormatting, t)
                },
                h = function (e) {
                    var t = [{
                        kbd: "Ã¢Å’Ëœ + NUM0",
                        text: e.style.normal
                    }, {
                        kbd: "Ã¢Å’Ëœ + NUM1",
                        text: e.style.h1
                    }, {
                        kbd: "Ã¢Å’Ëœ + NUM2",
                        text: e.style.h2
                    }, {
                        kbd: "Ã¢Å’Ëœ + NUM3",
                        text: e.style.h3
                    }, {
                        kbd: "Ã¢Å’Ëœ + NUM4",
                        text: e.style.h4
                    }, {
                        kbd: "Ã¢Å’Ëœ + NUM5",
                        text: e.style.h5
                    }, {
                        kbd: "Ã¢Å’Ëœ + NUM6",
                        text: e.style.h6
                    }];
                    return c(e.shortcut.documentStyle, t)
                },
                f = function (e, t) {
                    var i = 'class="note-shortcut note-shortcut-col col-sm-6 col-xs-12"',
                        n = ["<div " + i + ">" + p(e) + "</div><div " + i + ">" + d(e) + "</div>", "<div " + i + ">" + h(e) + "</div><div " + i + ">" + u(e) + "</div>"];
                    return t.extraKeys && n.push("<div " + i + ">" + function (e, t) {
                        var i = t.extraKeys,
                            n = [];
                        for (var a in i) i.hasOwnProperty(a) && n.push({
                            kbd: a,
                            text: i[a]
                        });
                        return c(e.shortcut.extraKeys, n)
                    }(e, t) + "</div>"), '<div class="note-shortcut-row row">' + n.join('</div><div class="note-shortcut-row row">') + "</div>"
                },
                m = {
                    image: function (e, t) {
                        var i = "";
                        if (t.maximumImageFileSize) {
                            var n = Math.floor(Math.log(t.maximumImageFileSize) / Math.log(1024)),
                                s = 1 * (t.maximumImageFileSize / Math.pow(1024, n)).toFixed(2) + " " + " KMGTP"[n] + "B";
                            i = "<small>" + e.image.maximumFileSize + " : " + s + "</small>"
                        }
                        var o = '<div class="form-group row note-group-select-from-files"><label>' + e.image.selectFromFiles + '</label><input class="note-image-input form-control" type="file" name="files" accept="image/*" multiple="multiple" />' + i + '</div><div class="form-group row"><label>' + e.image.url + '</label><input class="note-image-url form-control col-md-12" type="text" /></div>',
                            r = '<button href="#" class="btn btn-primary note-image-btn disabled" disabled>' + e.image.insert + "</button>";
                        return a("note-image-dialog", e.image.insert, o, r)
                    },
                    link: function (e, t) {
                        var i = '<div class="form-group row"><label>' + e.link.textToDisplay + '</label><input class="note-link-text form-control col-md-12" type="text" /></div><div class="form-group row"><label>' + e.link.url + '</label><input class="note-link-url form-control col-md-12" type="text" value="http://" /></div>' + (t.disableLinkTarget ? "" : '<div class="checkbox"><label><input type="checkbox" checked> ' + e.link.openInNewWindow + "</label></div>"),
                            n = '<button href="#" class="btn btn-primary note-link-btn disabled" disabled>' + e.link.insert + "</button>";
                        return a("note-link-dialog", e.link.insert, i, n)
                    },
                    help: function (e, t) {
                        var i = '<a class="modal-close pull-right" aria-hidden="true" tabindex="-1">' + e.shortcut.close + '</a><div class="title">' + e.shortcut.shortcuts + "</div>" + (ae.isMac ? f(e, t) : f(e, t).replace(/Ã¢Å’Ëœ/g, "Ctrl").replace(/Ã¢â€¡Â§/g, "Shift")) + '<p class="text-center"><a href="//summernote.org/" target="_blank">Summernote 0.6.16</a> Ã‚Â· <a href="//github.com/summernote/summernote" target="_blank">Project</a> Ã‚Â· <a href="//github.com/summernote/summernote/issues" target="_blank">Issues</a></p>';
                        return a("note-help-dialog", "", i, "")
                    }
                },
                g = function (t, i) {
                    var n = "";
                    return e.each(m, (function (e, a) {
                        n += a(t, i)
                    })), '<div class="note-dialog">' + n + "</div>"
                },
                v = function (t, i, n) {
                    var a = se.invertObject(i);
                    t.find("button").each((function (t, i) {
                        var n = e(i),
                            s = a[n.data("event")];
                        s && n.attr("title", (function (e, t) {
                            return t + " (" + (i = s, ae.isMac && (i = i.replace("CMD", "Ã¢Å’Ëœ").replace("SHIFT", "Ã¢â€¡Â§")), i.replace("BACKSLASH", "\\").replace("SLASH", "/").replace("LEFTBRACKET", "[").replace("RIGHTBRACKET", "]") + ")");
                            var i
                        }))
                    })).tooltip({
                        container: "body",
                        trigger: "hover",
                        placement: n || "top"
                    }).on("click", (function () {
                        e(this).tooltip("hide")
                    }))
                },
                b = function (t, i) {
                    var n = i.colors;
                    t.find(".note-color-palette").each((function () {
                        for (var t = e(this), i = t.attr("data-target-event"), a = [], s = 0, o = n.length; s < o; s++) {
                            for (var r = n[s], l = [], c = 0, d = r.length; c < d; c++) {
                                var p = r[c];
                                l.push(['<button type="button" class="note-color-btn" style="background-color:', p, ';" data-event="', i, '" data-value="', p, '" title="', p, '" data-toggle="button" tabindex="-1"></button>'].join(""))
                            }
                            a.push('<div class="note-color-row">' + l.join("") + "</div>")
                        }
                        t.html(a.join(""))
                    }))
                };
            this.createLayoutByAirMode = function (t, i) {
                var n = i.langInfo,
                    a = i.keyMap[ae.isMac ? "mac" : "pc"],
                    s = se.uniqueId();
                t.addClass("note-air-editor note-editable panel-body"), t.attr({
                    id: "note-editor-" + s,
                    contentEditable: !0
                });
                var o = document.body,
                    c = e(r(n, i));
                c.addClass("note-air-layout"), c.attr("id", "note-popover-" + s), c.appendTo(o), v(c, a), b(c, i);
                var d = e(l(i));
                d.addClass("note-air-layout"), d.attr("id", "note-handle-" + s), d.appendTo(o);
                var p = e(g(n, i));
                p.addClass("note-air-layout"), p.attr("id", "note-dialog-" + s), p.find("button.close, a.modal-close").click((function () {
                    e(this).closest(".modal").modal("hide")
                })), p.appendTo(o)
            }, this.createLayoutByFrame = function (t, i) {
                var n = i.langInfo,
                    a = e('<div class="note-editor panel panel-default" />');
                i.width && a.width(i.width), i.height > 0 && e('<div class="note-statusbar">' + (i.disableResizeEditor ? "" : '<div class="note-resizebar"><div class="note-icon-bar"></div><div class="note-icon-bar"></div><div class="note-icon-bar"></div></div>') + "</div>").prependTo(a);
                var s = e('<div class="note-editing-area" />'),
                    c = !t.is(":disabled"),
                    d = e('<div class="note-editable panel-body" contentEditable="' + c + '"></div>').prependTo(s);
                i.height && d.height(i.height), i.direction && d.attr("dir", i.direction);
                var p = t.attr("placeholder") || i.placeholder;
                p && d.attr("data-placeholder", p), d.html(le.html(t) || le.emptyPara), e('<textarea class="note-codable"></textarea>').prependTo(s);
                var u = e(r(n, i)).prependTo(s);
                b(u, i), v(u, x), e(l(i)).prependTo(s), s.prependTo(a);
                for (var h = e('<div class="note-toolbar panel-heading" />'), f = 0, m = i.toolbar.length; f < m; f++) {
                    for (var y = i.toolbar[f][0], w = i.toolbar[f][1], _ = e('<div class="note-' + y + ' btn-group" />'), T = 0, C = w.length; T < C; T++) {
                        var k = o[w[T]];
                        if (e.isFunction(k)) {
                            var E = e(k(n, i));
                            E.attr("data-name", w[T]), _.append(E)
                        }
                    }
                    h.append(_)
                }
                var x = i.keyMap[ae.isMac ? "mac" : "pc"];
                b(h, i), v(h, x, "bottom"), h.prependTo(a), e('<div class="note-dropzone"><div class="note-dropzone-message"></div></div>').prependTo(a);
                var S = i.dialogsInBody ? e(document.body) : a;
                e(g(n, i)).prependTo(S).find("button.close, a.modal-close").click((function () {
                    e(this).closest(".modal").modal("hide")
                })), a.insertAfter(t), t.hide()
            }, this.hasNoteEditor = function (e) {
                return this.noteEditorFromHolder(e).length > 0
            }, this.noteEditorFromHolder = function (t) {
                return t.hasClass("note-air-editor") ? t : t.next().hasClass("note-editor") ? t.next() : e()
            }, this.createLayout = function (e, t) {
                t.airMode ? this.createLayoutByAirMode(e, t) : this.createLayoutByFrame(e, t)
            }, this.layoutInfoFromHolder = function (e) {
                var t = this.noteEditorFromHolder(e);
                if (t.length) return t.data("holder", e), le.buildLayoutInfo(t)
            }, this.removeLayout = function (e, t, i) {
                i.airMode ? (e.removeClass("note-air-editor note-editable").removeAttr("id contentEditable"), t.popover().remove(), t.handle().remove(), t.dialog().remove()) : (e.html(t.editable().html()), i.dialogsInBody && t.dialog().remove(), t.editor().remove(), e.show())
            }, this.getTemplate = function () {
                return {
                    button: t,
                    iconButton: i,
                    dialog: a,
                    dropdown: s
                }
            }, this.addButtonInfo = function (e, t) {
                o[e] = t
            }, this.addDialogInfo = function (e, t) {
                m[e] = t
            }
        },
            Ae = new function () {
                var t = this,
                    i = this.modules = {
                        editor: new be(this),
                        toolbar: new we(this),
                        statusbar: new _e(this),
                        popover: new Te(this),
                        handle: new Ce(this),
                        fullscreen: new ke(this),
                        codeview: new Ee(this),
                        dragAndDrop: new xe(this),
                        clipboard: new Se(this),
                        linkDialog: new Me(this),
                        imageDialog: new Pe(this),
                        helpDialog: new Ie(this)
                    };
                this.invoke = function () {
                    var e = oe.head(oe.from(arguments)),
                        t = oe.tail(oe.from(arguments)),
                        i = e.split("."),
                        n = i.length > 1,
                        a = n && oe.head(i),
                        s = n ? oe.last(i) : oe.head(i),
                        o = this.getModule(a),
                        r = o[s];
                    return r && r.apply(o, t)
                }, this.getModule = function (e) {
                    return this.modules[e] || this.modules.editor
                };
                var n = this.bindCustomEvent = function (e, t, i) {
                    return function () {
                        var n = t[se.namespaceToCamel(i, "on")];
                        return n && n.apply(e[0], arguments), e.trigger("summernote." + i, arguments)
                    }
                };
                this.insertImages = function (t, a) {
                    var s = t.editor(),
                        o = t.editable(),
                        r = t.holder(),
                        l = o.data("callbacks"),
                        c = s.data("options");
                    l.onImageUpload ? n(r, l, "image.upload")(a) : e.each(a, (function (e, t) {
                        var a = t.name;
                        c.maximumImageFileSize && c.maximumImageFileSize < t.size ? n(r, l, "image.upload.error")(c.langInfo.image.maximumFileSizeError) : de.readFileAsDataURL(t).then((function (e) {
                            i.editor.insertImage(o, e, a)
                        })).fail((function () {
                            n(r, l, "image.upload.error")(c.langInfo.image.maximumFileSizeError)
                        }))
                    }))
                };
                var a = {
                    showLinkDialog: function (e) {
                        i.linkDialog.show(e)
                    },
                    showImageDialog: function (e) {
                        i.imageDialog.show(e)
                    },
                    showHelpDialog: function (e) {
                        i.helpDialog.show(e)
                    },
                    fullscreen: function (e) {
                        i.fullscreen.toggle(e)
                    },
                    codeview: function (e) {
                        i.codeview.toggle(e)
                    }
                },
                    s = function (e) {
                        le.isImg(e.target) && e.preventDefault()
                    },
                    o = function (e) {
                        var t = le.makeLayoutInfo(e.currentTarget || e.target);
                        i.editor.removeBogus(t.editable()), r(e)
                    };
                this.updateStyleInfo = function (e, t) {
                    if (e) {
                        var n = t.editor().data("options").airMode;
                        n || i.toolbar.update(t.toolbar(), e), i.popover.update(t.popover(), e, n), i.handle.update(t.handle(), e, n)
                    }
                };
                var r = function (e) {
                    var n = e.target;
                    setTimeout((function () {
                        var e = le.makeLayoutInfo(n),
                            a = i.editor.currentStyle(n);
                        t.updateStyleInfo(a, e)
                    }), 0)
                },
                    l = function (e) {
                        var t = le.makeLayoutInfo(e.currentTarget || e.target);
                        i.popover.hide(t.popover()), i.handle.hide(t.handle())
                    },
                    c = function (t) {
                        e(t.target).closest("[data-event]").length && t.preventDefault()
                    },
                    d = function (t) {
                        var n = e(t.target).closest("[data-event]");
                        if (n.length) {
                            var s, o = n.attr("data-event"),
                                l = n.attr("data-value"),
                                c = n.attr("data-hide"),
                                d = le.makeLayoutInfo(t.target);
                            if (-1 !== e.inArray(o, ["resize", "floatMe", "removeMedia", "imageShape"])) {
                                var p = d.handle().find(".note-control-selection");
                                s = e(p.data("target"))
                            }
                            if (c && n.parents(".popover").hide(), e.isFunction(e.summernote.pluginEvents[o])) e.summernote.pluginEvents[o](t, i.editor, d, l);
                            else if (i.editor[o]) {
                                var u = d.editable();
                                u.focus(), i.editor[o](u, l, s), t.preventDefault()
                            } else a[o] && (a[o].call(this, d), t.preventDefault());
                            if (-1 !== e.inArray(o, ["backColor", "foreColor"])) {
                                var h = d.editor().data("options", h);
                                (h.airMode ? i.popover : i.toolbar).updateRecentColor(oe.head(n), o, l)
                            }
                            r(t)
                        }
                    };
                this.bindKeyMap = function (t, n) {
                    var s = t.editor(),
                        o = t.editable();
                    o.on("keydown", (function (r) {
                        var l = [];
                        r.metaKey && l.push("CMD"), r.ctrlKey && !r.altKey && l.push("CTRL"), r.shiftKey && l.push("SHIFT");
                        var c, d = pe.nameFromCode[r.keyCode];
                        d && l.push(d);
                        var p = l.join("+"),
                            u = n[p];
                        if (u) {
                            if (c = e.summernote.pluginEvents[p], e.isFunction(c) && c(r, i.editor, t)) return !1;
                            c = e.summernote.pluginEvents[u], e.isFunction(c) ? c(r, i.editor, t) : i.editor[u] ? (i.editor[u](o, s.data("options")), r.preventDefault()) : a[u] && (a[u].call(this, t), r.preventDefault())
                        } else pe.isEdit(r.keyCode) && i.editor.afterCommand(o)
                    }))
                }, this.attach = function (t, n) {
                    n.shortcuts && this.bindKeyMap(t, n.keyMap[ae.isMac ? "mac" : "pc"]), t.editable().on("mousedown", s), t.editable().on("keyup mouseup", o), t.editable().on("scroll", l), i.clipboard.attach(t, n), i.handle.attach(t, n), t.popover().on("click", d), t.popover().on("mousedown", c), i.dragAndDrop.attach(t, n), n.airMode || (t.toolbar().on("click", d), t.toolbar().on("mousedown", c), i.statusbar.attach(t, n)), (n.airMode ? t.popover() : t.toolbar()).find(".note-dimension-picker-mousecatcher").css({
                        width: n.insertTableMaxSize.col + "em",
                        height: n.insertTableMaxSize.row + "em"
                    }).on("mousemove", (function (t) {
                        ! function (t, i) {
                            var n, a = e(t.target.parentNode),
                                s = a.next(),
                                o = a.find(".note-dimension-picker-mousecatcher"),
                                r = a.find(".note-dimension-picker-highlighted"),
                                l = a.find(".note-dimension-picker-unhighlighted");
                            if (void 0 === t.offsetX) {
                                var c = e(t.target).offset();
                                n = {
                                    x: t.pageX - c.left,
                                    y: t.pageY - c.top
                                }
                            } else n = {
                                x: t.offsetX,
                                y: t.offsetY
                            };
                            var d = Math.ceil(n.x / 18) || 1,
                                p = Math.ceil(n.y / 18) || 1;
                            r.css({
                                width: d + "em",
                                height: p + "em"
                            }), o.attr("data-value", d + "x" + p), 3 < d && d < i.insertTableMaxSize.col && l.css({
                                width: d + 1 + "em"
                            }), 3 < p && p < i.insertTableMaxSize.row && l.css({
                                height: p + 1 + "em"
                            }), s.html(d + " x " + p)
                        }(t, n)
                    })), t.editor().data("options", n), ae.isMSIE || setTimeout((function () {
                        document.execCommand("styleWithCSS", 0, n.styleWithSpan)
                    }), 0);
                    var a = new ue(t.editable());
                    t.editable().data("NoteHistory", a), t.editable().data("callbacks", {
                        onInit: n.onInit,
                        onFocus: n.onFocus,
                        onBlur: n.onBlur,
                        onKeydown: n.onKeydown,
                        onKeyup: n.onKeyup,
                        onMousedown: n.onMousedown,
                        onEnter: n.onEnter,
                        onPaste: n.onPaste,
                        onBeforeCommand: n.onBeforeCommand,
                        onChange: n.onChange,
                        onImageUpload: n.onImageUpload,
                        onImageUploadError: n.onImageUploadError,
                        onMediaDelete: n.onMediaDelete,
                        onToolbarClick: n.onToolbarClick
                    });
                    var r = i.editor.styleFromNode(t.editable());
                    this.updateStyleInfo(r, t)
                }, this.attachCustomEvent = function (t, i) {
                    var a = t.holder(),
                        s = t.editable(),
                        o = s.data("callbacks");
                    s.focus(n(a, o, "focus")), s.blur(n(a, o, "blur")), s.keydown((function (e) {
                        e.keyCode === pe.code.ENTER && n(a, o, "enter").call(this, e), n(a, o, "keydown").call(this, e)
                    })), s.keyup(n(a, o, "keyup")), s.on("mousedown", n(a, o, "mousedown")), s.on("mouseup", n(a, o, "mouseup")), s.on("scroll", n(a, o, "scroll")), s.on("paste", n(a, o, "paste"));
                    var r = ae.isMSIE ? "DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted" : "input";
                    s.on(r, (function () {
                        n(a, o, "change")(s.html(), s)
                    })), i.airMode || (t.toolbar().click(n(a, o, "toolbar.click")), t.popover().click(n(a, o, "popover.click"))), le.isTextarea(oe.head(a)) && a.closest("form").submit((function (e) {
                        t.holder().val(t.holder().code()), n(a, o, "submit").call(this, e, a.code())
                    })), le.isTextarea(oe.head(a)) && i.textareaAutoSync && a.on("summernote.change", (function () {
                        t.holder().val(t.holder().code())
                    })), n(a, o, "init")(t);
                    for (var l = 0, c = e.summernote.plugins.length; l < c; l++) e.isFunction(e.summernote.plugins[l].init) && e.summernote.plugins[l].init(t)
                }, this.detach = function (e, t) {
                    e.holder().off(), e.editable().off(), e.popover().off(), e.handle().off(), e.dialog().off(), t.airMode || (e.dropzone().off(), e.toolbar().off(), e.statusbar().off())
                }
            };
        e.extend(e.summernote, {
            renderer: Oe,
            eventHandler: Ae,
            core: {
                agent: ae,
                list: oe,
                dom: le,
                range: ce
            },
            pluginEvents: {},
            plugins: []
        }), e.summernote.addPlugin = function (t) {
            e.summernote.plugins.push(t), t.buttons && e.each(t.buttons, (function (e, t) {
                Oe.addButtonInfo(e, t)
            })), t.dialogs && e.each(t.dialogs, (function (e, t) {
                Oe.addDialogInfo(e, t)
            })), t.events && e.each(t.events, (function (t, i) {
                e.summernote.pluginEvents[t] = i
            })), t.langs && e.each(t.langs, (function (t, i) {
                e.summernote.lang[t] && e.extend(e.summernote.lang[t], i)
            })), t.options && e.extend(e.summernote.options, t.options)
        }, e.fn.extend({
            summernote: function () {
                var t = e.type(oe.head(arguments)),
                    i = "string" === t,
                    n = "object" === t,
                    a = n ? oe.head(arguments) : {};
                if ((a = e.extend({}, e.summernote.options, a)).icons = e.extend({}, e.summernote.options.icons, a.icons), a.langInfo = e.extend(!0, {}, e.summernote.lang["en-US"], e.summernote.lang[a.lang]), !i && n)
                    for (var s = 0, o = e.summernote.plugins.length; s < o; s++) {
                        var r = e.summernote.plugins[s];
                        a.plugin[r.name] && (e.summernote.plugins[s] = e.extend(!0, r, a.plugin[r.name]))
                    }
                this.each((function (t, i) {
                    var n = e(i);
                    if (!Oe.hasNoteEditor(n)) {
                        Oe.createLayout(n, a);
                        var s = Oe.layoutInfoFromHolder(n);
                        n.data("layoutInfo", s), Ae.attach(s, a), Ae.attachCustomEvent(s, a)
                    }
                }));
                var l = this.first();
                if (l.length) {
                    var c = Oe.layoutInfoFromHolder(l);
                    if (i) {
                        var d = oe.head(oe.from(arguments)),
                            p = oe.tail(oe.from(arguments)),
                            u = [d, c.editable()].concat(p);
                        return Ae.invoke.apply(Ae, u)
                    }
                    a.focus && c.editable().focus()
                }
                return this
            },
            code: function (t) {
                if (void 0 === t) {
                    var i = this.first();
                    if (!i.length) return;
                    var n = Oe.layoutInfoFromHolder(i),
                        a = n && n.editable();
                    if (a && a.length) {
                        var s = Ae.invoke("codeview.isActivated", n);
                        return Ae.invoke("codeview.sync", n), s ? n.codable().val() : n.editable().html()
                    }
                    return le.value(i)
                }
                return this.each((function (i, n) {
                    var a = Oe.layoutInfoFromHolder(e(n)),
                        s = a && a.editable();
                    s && s.html(t)
                })), this
            },
            destroy: function () {
                return this.each((function (t, i) {
                    var n = e(i);
                    if (Oe.hasNoteEditor(n)) {
                        var a = Oe.layoutInfoFromHolder(n),
                            s = a.editor().data("options");
                        Ae.detach(a, s), Oe.removeLayout(n, a, s)
                    }
                })), this
            }
        })
    })),
    function () {
        $.summernote.lang.custom = {
            font: {
                bold: M.BOLD,
                italic: M.ITALIC,
                underline: M.UNDERLINE,
                clear: M.REMOVE_FONT_STYLE,
                height: M.LINE_HEIGHT,
                name: M.FONT,
                strikethrough: M.STRIKETHROUGH,
                subscript: M.SUBSCRIPT,
                superscript: M.SUPERSCRIPT,
                size: M.FONT_SIZE
            },
            image: {
                image: M.PICTURE_LBL,
                insert: M.INSERT_IMAGE,
                resizeQuarter: "Resize Quarter",
                floatLeft: "Float Left",
                floatRight: "Float Right",
                floatNone: "Float None",
                shapeRounded: "Shape: Rounded",
                shapeCircle: "Shape: Circle",
                shapeThumbnail: "Shape: Thumbnail",
                shapeNone: "Shape: None",
                dragImageHere: "Drag image or text here",
                dropImage: "Drop image or Text",
                selectFromFiles: "Select from files",
                maximumFileSize: "Maximum file size",
                maximumFileSizeError: "Maximum file size exceeded.",
                remove: M.REMOVE_IMAGE
            },
            link: {
                link: M.LINK,
                insert: M.INSERT_LINK,
                unlink: M.UNLINK,
                edit: M.EDIT,
                textToDisplay: M.TEXT_TO_DISPLAY
            },
            style: {
                style: M.STYLE,
                normal: M.STYLE_NORMAL,
                blockquote: M.STYLE_QUOTE,
                pre: M.CODE_WIDGET_NAME,
                h1: M.HEADING_LBL + " 1",
                h2: M.HEADING_LBL + " 2",
                h3: M.HEADING_LBL + " 3",
                h4: M.HEADING_LBL + " 4",
                h5: M.HEADING_LBL + " 5",
                h6: M.HEADING_LBL + " 6"
            },
            lists: {
                unordered: M.UNORDERED_LIST,
                ordered: M.ORDERED_LIST
            },
            paragraph: {
                paragraph: M.PARAGRAPH,
                outdent: M.OUTDENT,
                indent: M.INDENT,
                left: M.ALIGN_LEFT,
                center: M.ALIGN_CENTER,
                right: M.ALIGN_RIGHT,
                justify: M.JUSTIFY
            },
            color: {
                background: M.BACKGROUND_COLOR,
                foreground: M.TEXT_COLOR
            },
            shortcut: {
                shortcuts: "Keyboard shortcuts",
                close: M.CLOSE,
                textFormatting: "Text formatting",
                action: "Action",
                paragraphFormatting: "Paragraph formatting",
                documentStyle: "Document Style",
                extraKeys: "Extra keys"
            },
            history: {
                undo: M.UNDO,
                redo: M.REDO
            }
        };
        var e = $.summernote.renderer.getTemplate();
        $.summernote.addPlugin({
            name: "tmdpImage",
            buttons: {
                tmdpImage: function () {
                    return e.iconButton("fa fa-picture-o", {
                        event: "tmdpImage",
                        title: M.PICTURE_LBL,
                        hide: !0
                    })
                }
            },
            events: {
                tmdpImage: function (e, t, i, n) {
                    var a = $.summernote.eventHandler,
                        s = i.editable(),
                        o = i.editor();
                    a.invoke("editor.saveRange", s);
                    var r = o.data("options");
                    r.popupOpen = !0, FileManager.selectFile({
                        onCompleteCallback: function (e, t) {
                            var n = getFileFromBase(e) + t;
                            i.holder().summernote("insertImage", n, ""), r.popupOpen = !1
                        },
                        onCancelCallback: function () {
                            a.invoke("editor.restoreRange", s), r.popupOpen = !1
                        }
                    })
                }
            }
        });
        /MSIE|Edge|Trident/i.test(navigator.userAgent);

        function t(e, t, i, n) {
            var a = "#ff0000",
                s = (i.currentStyle(t.target) || {}).ancestors || [],
                o = null;
            try {
                for (var r = 0; r < s.length; ++r)
                    if (1 === s[r].nodeType) {
                        o = s[r];
                        break
                    } null != o && (a = window.getComputedStyle(o).getPropertyValue("foreground" === e ? "color" : "background-color"))
            } catch (e) { }
            var l = $.summernote.eventHandler,
                c = n.editable(),
                d = n.editor().data("options");
            d.popupOpen = !0, l.invoke("editor.saveRange", c), "transparent" === a && (a = "rgba(0, 0, 0, 0)");
            var p = $(t.target).closest(".btn-group");
            p = 0 === p.next().length ? p : p.next(), Tools.pickColor(a, p.find("button")[0], (function (t, i) {
                l.invoke("editor.restoreRange", c);
                var n, a, s, o = $(l.invoke("editor.wrap", c));
                "foreground" === e ? (n = ".color-primary, .color-secondary1, .color-secondary2, .color-secondary3, .color-secondary4", a = "color-primary color-secondary1 color-secondary2 color-secondary3 color-secondary4", s = "color") : (n = ".bg-color-primary, .bg-color-secondary1, .bg-color-secondary2, .bg-color-secondary3, .bg-color-secondary4", a = "bg-color-primary bg-color-secondary1 bg-color-secondary2 bg-color-secondary3 bg-color-secondary4", s = "background-color"), o.find(n).add(o).removeClass(a), o.find("*").add(o).css(s, ""), !d.isEmailEditor && i ? (newClass = "foreground" === e ? "color-" + i : "bg-color-" + i, o.addClass(newClass), l.invoke("editor.saveRange", c), l.invoke("editor.triggerOnChange", c)) : o.css(s, t), l.invoke("editor.saveRange", c), l.invoke("editor.triggerOnChange", c)
            }), (function () {
                d.popupOpen = !1
            }))
        }
        $.summernote.addPlugin({
            name: "tmdpForeColor",
            buttons: {
                tmdpForeColor: function () {
                    return e.iconButton("fa fa-font", {
                        event: "tmdpForeColor",
                        title: M.TEXT_COLOR,
                        hide: !0
                    })
                }
            },
            events: {
                tmdpForeColor: function (e, i, n, a) {
                    t("foreground", e, i, n)
                }
            }
        }), $.summernote.addPlugin({
            name: "tmdpBackColor",
            buttons: {
                tmdpBackColor: function () {
                    return e.iconButton("fa fa-font note-editor-bgcolor-btn", {
                        event: "tmdpBackColor",
                        title: M.BACKGROUND_COLOR,
                        hide: !0
                    })
                }
            },
            events: {
                tmdpBackColor: function (e, i, n, a) {
                    t("background", e, i, n)
                }
            }
        }), $.summernote.addPlugin({
            name: "tmdpLink",
            buttons: {
                tmdpLink: function () {
                    return e.iconButton("fa fa-link", {
                        event: "showLinkDialog",
                        title: M.LINK,
                        hide: !0
                    })
                }
            },
            events: {
                showLinkDialog: function (e, t, i, n) {
                    var a = $.summernote.eventHandler,
                        s = i.editor(),
                        o = i.editable(),
                        r = i.popover(),
                        l = a.invoke("editor.getLinkInfo", o),
                        c = s.data("options");
                    a.invoke("editor.saveRange", o), c.popupOpen = !0;
                    var d = {
                        onSelect: function (e) {
                            "string" === $.type(e) && (e = {
                                link: e,
                                text: l.text || e,
                                target: "_blank"
                            }), l.url = e.link, l.text = l.text || e.caption || e.link, l.isNewWindow = "_blank" === e.target, l.isNoFollow = !!e.nofollow, a.invoke("editor.restoreRange", o), a.invoke("editor.createLink", o, l, c), a.invoke("popover.hide", r), c.popupOpen = !1
                        },
                        onCancel: function () {
                            a.invoke("editor.restoreRange", o), a.invoke("popover.hide", r), c.popupOpen = !1
                        }
                    };
                    if (Website && Website.selectPage) {
                        if (d.isEmailLinkPicker = !0 === c.isEmailEditor, d.hasNoFollow = !0, l.url) {
                            $(e.target).closest(".popover-content").find("a").first();
                            d.selected = {
                                target: l.isNewWindow ? "_blank" : "_self",
                                link: l.url,
                                caption: "",
                                nofollow: l.isNoFollow
                            }
                        }
                        Website.selectPage(d)
                    } else Tools.promptForInput(M.FILL_LINK_TITLE, M.FILL_LINK_MESSAGE, l.url || "http://", d.onSelect, d.onCancel)
                }
            }
        }), $.summernote.addPlugin({
            name: "tmdpDelete",
            buttons: {
                tmdpDelete: function () {
                    return e.iconButton("fa fa-trash-o", {
                        event: "tmdpDelete",
                        title: "Delete",
                        hide: !0
                    })
                }
            },
            events: {
                tmdpDelete: function (e, t, i, n) { }
            }
        }), $.summernote.addPlugin({
            name: "clearStyles",
            buttons: {
                clearStyles: function () {
                    return e.iconButton("fa fa-eraser", {
                        event: "clearStyles",
                        title: M.REMOVE_FONT_STYLE,
                        hide: !0
                    })
                }
            },
            events: {
                clearStyles: function (e, t, i, n) {
                    t.resetStyles(i.editable())
                }
            }
        }), $.summernote.addPlugin({
            name: "tmdpMarketingTags",
            buttons: {
                tmdpMarketingTags: function () {
                    return e.iconButton("fa fa-tags", {
                        event: "tmdpMarketingTags",
                        title: M.ADD_TAGS,
                        hide: !0
                    })
                }
            },
            events: {
                tmdpMarketingTags: function (e, t, i) {
                    e.stopPropagation(), e.preventDefault();
                    var n = $.summernote.eventHandler,
                        a = i.editor(),
                        s = a.data("options");
                    s.popupOpen = !0, a.data("options", s);
                    var o = s.marketingTags,
                        r = i.editable();
                    n.invoke("editor.saveRange", r), UITools.selectMarketingProperty(o, (function (e) {
                        n.invoke("editor.restoreRange", r);
                        var t = new DataTransfer;
                        t.setData("text/plain", "{" + e + "}"), r[0].dispatchEvent(new ClipboardEvent("paste", {
                            clipboardData: t,
                            bubbles: !0,
                            cancelable: !0
                        })), s.popupOpen = !1, a.data("options", s)
                    }))
                }
            }
        }), $.summernote.renderer.addButtonInfo("text-styles", (function (t, i) {
            var n = ['<div class="text-styles-btn-group btn-group">', e.iconButton(i.iconPrefix + i.icons.font.italic, {
                event: "italic",
                title: t.font.italic
            }) + e.iconButton(i.iconPrefix + i.icons.font.underline, {
                event: "underline",
                title: t.font.underline
            }) + e.iconButton(i.iconPrefix + i.icons.font.strikethrough, {
                event: "strikethrough",
                title: t.font.strikethrough
            }) + e.iconButton(i.iconPrefix + i.icons.font.superscript, {
                event: "superscript",
                title: t.font.superscript
            }) + e.iconButton(i.iconPrefix + i.icons.font.subscript, {
                event: "subscript",
                title: t.font.subscript
            }), "</div>"];
            return e.iconButton(i.iconPrefix + i.icons.font.underline, {
                title: t.paragraph.paragraph,
                dropdown: e.dropdown(n, "text-styles-dropdown", "div")
            })
        })), $.summernote.addPlugin({
            name: "tmdpTextAssist",
            buttons: {
                tmdpTextAssist: function () {
                    let t = Templates.get("textEditorTextAssistBtn");
                    return e.button(t, {
                        event: "tmdpTextAssist",
                        title: M.TEXT_ASSIST_TOOLTIP,
                        hide: !0
                    })
                }
            },
            events: {
                tmdpTextAssist: function (e, t, i) {
                    e.stopPropagation(), e.preventDefault();
                    let n = $.summernote.eventHandler,
                        a = i.editor(),
                        s = a.data("options"),
                        o = i.editable();
                    s.popupOpen = !0, a.data("options", s), n.invoke("editor.saveRange", o);
                    let r = o.html().trim(),
                        l = $(r),
                        c = l.text(),
                        d = "PARAGRAPH";
                    (r.startsWith("<h") || r.startsWith("<H")) && (d = "HEADING"), WebComponents.Common.showAiTextCompletionOptions(e.target, {
                        ...s.textAssistOptions || {},
                        elementType: d,
                        phrase: c,
                        onComplete: e => {
                            e = (e = e || "").replaceAll("\n", "<br /><br />"), n.invoke("editor.restoreRange", o);
                            let t = l.first(),
                                i = e;
                            if (i) {
                                let e = t.children("span").eq(0);
                                e && e.length && (e.html(i), i = e[0].outerHTML), t.html(i), o.html(t[0].outerHTML), n.invoke("editor.triggerOnChange", o)
                            }
                            s.popupOpen = !1, a.data("options", s), l = null
                        }
                    })
                }
            }
        })
    }();
var DemoTour = function () {
    var e, t, i, n, a, s, o = !1;

    function r(e, t) {
        e.addClass("is-selected").removeClass("move-left"), WebPlatform.onAnimationEnd(t.addClass("is-visible"), (function () { }), 1800)
    }

    function l(t, i, n) {
        var a = t.filter(".is-selected"),
            s = "desktop" === e ? 300 : 0;
        a.removeClass("is-selected"), "next" === n && a.addClass("move-left"), Tools.delay(s, (function () {
            r("next" === n ? a.next() : a.prev(), i)
        }))
    }
    return {
        setupTour: function (c) {
            if (!o) {
                o = !0, t = mergeUnique(c || {}, {
                    onClose: dummy,
                    items: [{
                        title: "Tooltip",
                        description: "Tooltip",
                        position: "right",
                        x: 100,
                        y: 100
                    }]
                }), $body.addClass("with-tour"), a = $('<div class="tmdp-cover-layer"></div>').appendTo($body), i = $('<ul class="tmdp-tour-wrapper"></ul>').appendTo($body);
                for (var d = "", p = 0; p < t.items.length; ++p) {
                    var u = t.items[p];
                    d += '<li class="tmdp-single-step step' + p + '" style="left: ' + (u = mergeUnique(u, {
                        position: "top",
                        title: "",
                        description: "",
                        x: 300,
                        y: 300
                    })).x + "px; top: " + u.y + 'px"><div class="tmdp-more-info ' + u.position + '">', u.title && (d += '<div class="icon-wrapper"><p></p></div><h2>' + u.title + "</h2>"), d += '<div class="tmdp-nav"><span><b class="tmdp-actual-step">' + (p + 1) + "</b> " + M.OF + " " + t.items.length + '</span><a class="tmdp-close">' + M.CLOSE + "</a></div>", u.description && (d += u.description), d += '<ul class="tmdp-tour-nav"><li><a class="tmdp-prev ' + (0 === p ? "inactive" : "") + '">&larr; ' + M.PREVIOUS + '</a></li><li><a class="tmdp-next ' + (p + 1 === t.items.length ? "inactive" : "") + '">' + M.NEXT + " &rarr;</a></li></ul></div>", d += "</li>"
                }
                i.append(d), n = i.children("li"), s = i.find(".tmdp-more-info"), e = window.getComputedStyle(document.querySelector(".tmdp-tour-wrapper"), "::before").getPropertyValue("content").replace(/"/g, "").replace(/'/g, ""), i.addClass("active"), s.on("click", ".tmdp-prev", (function (e) {
                    $(e.target).hasClass("inactive") || l(n, a, "prev")
                })), s.on("click", ".tmdp-next", (function (e) {
                    $(e.target).hasClass("inactive") || l(n, a, "next")
                })), s.on("click", ".tmdp-close", DemoTour.teardown), s.on("swiperight", (function (t) {
                    $(this).find(".tmdp-prev").hasClass("inactive") || "mobile" !== e || l(n, a, "prev")
                })), s.on("swipeleft", (function (t) {
                    $(this).find(".tmdp-next").hasClass("inactive") || "mobile" !== e || l(n, a, "next")
                })), $document.on("keyup.demoTour", (function (e) {
                    37 !== e.which || n.filter(".is-selected").find(".tmdp-prev").hasClass("inactive") ? 39 !== e.which || n.filter(".is-selected").find(".tmdp-next").hasClass("inactive") ? 27 === e.which && DemoTour.teardown() : l(n, a, "next") : l(n, a, "prev")
                })), Tools.delay(100, (function () {
                    r(n.eq(0), a)
                }))
            }
        },
        teardown: function () {
            o && ($document.off("keyup.demoTour"), $body.removeClass("with-tour"), n.removeClass("is-selected move-left"), WebPlatform.onTransitionEnd(a, (function () {
                o = !1, i.remove(), a.remove(), t.onClose(), t = null, i = null, n = null, a = null, s = null, e = null, t = null
            }), 400), a.removeClass("is-visible"))
        }
    }
}();
/*!
 * Shuffle.js by @Vestride
 * Categorize, sort, and filter a responsive grid of items.
 * Dependencies: jQuery 1.9+, Modernizr 2.6.2+
 * @license MIT license
 * @version 3.1.1
 */
! function (e) {
    "function" == typeof define && define.amd ? define(["jquery", "modernizr"], e) : "object" == typeof exports ? module.exports = e(require("jquery"), window.Modernizr) : window.Shuffle = e(window.jQuery, window.Modernizr)
}((function (e, t, i) {
    "use strict";

    function n(e, t, i) {
        for (var n = 0, a = e.length; a > n; n++)
            if (t.call(i, e[n], n, e) === {}) return
    }

    function a(t, i, n) {
        return setTimeout(e.proxy(t, i), n)
    }

    function s(e) {
        return Math.max.apply(Math, e)
    }

    function o(t) {
        return e.isNumeric(t) ? t : 0
    }
    if ("object" != typeof t) throw new Error("Shuffle.js requires Modernizr.\nhttp://vestride.github.io/Shuffle/#dependencies");
    var r = t.prefixed("transition"),
        l = t.prefixed("transitionDelay"),
        c = t.prefixed("transitionDuration"),
        d = {
            WebkitTransition: "webkitTransitionEnd",
            transition: "transitionend"
        }[r],
        p = t.prefixed("transform"),
        u = function (e) {
            return e ? e.replace(/([A-Z])/g, (function (e, t) {
                return "-" + t.toLowerCase()
            })).replace(/^ms-/, "-ms-") : ""
        }(p),
        h = t.csstransforms && t.csstransitions,
        f = t.csstransforms3d,
        m = !!window.getComputedStyle,
        g = "shuffle",
        v = "all",
        b = .001,
        y = window.getComputedStyle || function () { },
        w = function (e, t) {
            this.x = o(e), this.y = o(t)
        };
    w.equals = function (e, t) {
        return e.x === t.x && e.y === t.y
    };
    var _ = function () {
        if (!m) return !1;
        var e = document.body || document.documentElement,
            t = document.createElement("div");
        t.style.cssText = "width:10px;padding:2px;-webkit-box-sizing:border-box;box-sizing:border-box;", e.appendChild(t);
        var i = "10px" === y(t, null).width;
        return e.removeChild(t), i
    }(),
        T = 0,
        C = e(window),
        k = function (t, i) {
            i = i || {}, e.extend(this, k.options, i, k.settings), this.$el = e(t), this.element = t, this.unique = "shuffle_" + T++, this._fire(k.EventType.LOADING), this._init(), a((function () {
                this.initialized = !0, this._fire(k.EventType.DONE)
            }), this, 16)
        };
    return k.EventType = {
        LOADING: "loading",
        DONE: "done",
        LAYOUT: "layout",
        REMOVED: "removed"
    }, k.ClassName = {
        BASE: g,
        SHUFFLE_ITEM: "shuffle-item",
        FILTERED: "filtered",
        CONCEALED: "concealed"
    }, k.options = {
        group: v,
        speed: 250,
        easing: "ease-out",
        itemSelector: "",
        sizer: null,
        gutterWidth: 0,
        columnWidth: 0,
        delimeter: null,
        buffer: 0,
        columnThreshold: m ? .01 : .1,
        initialSort: null,
        throttle: function (t, i, n) {
            var a, s, o, r = null,
                l = 0;
            n = n || {};
            var c = function () {
                l = !1 === n.leading ? 0 : e.now(), r = null, o = t.apply(a, s), a = s = null
            };
            return function () {
                var d = e.now();
                l || !1 !== n.leading || (l = d);
                var p = i - (d - l);
                return a = this, s = arguments, 0 >= p || p > i ? (clearTimeout(r), r = null, l = d, o = t.apply(a, s), a = s = null) : r || !1 === n.trailing || (r = setTimeout(c, p)), o
            }
        },
        throttleTime: 300,
        sequentialFadeDelay: 150,
        supported: h
    }, k.settings = {
        useSizer: !1,
        itemCss: {
            position: "absolute",
            top: 0,
            left: 0,
            visibility: "visible"
        },
        revealAppendedDelay: 300,
        lastSort: {},
        lastFilter: v,
        enabled: !0,
        destroyed: !1,
        initialized: !1,
        _animations: [],
        _transitions: [],
        _isMovementCanceled: !1,
        styleQueue: []
    }, k.Point = w, k._getItemTransformString = function (e, t) {
        return f ? "translate3d(" + e.x + "px, " + e.y + "px, 0) scale3d(" + t + ", " + t + ", 1)" : "translate(" + e.x + "px, " + e.y + "px) scale(" + t + ")"
    }, k._getNumberStyle = function (t, i, n) {
        if (m) {
            n = n || y(t, null);
            var a = k._getFloat(n[i]);
            return _ || "width" !== i ? _ || "height" !== i || (a += k._getFloat(n.paddingTop) + k._getFloat(n.paddingBottom) + k._getFloat(n.borderTopWidth) + k._getFloat(n.borderBottomWidth)) : a += k._getFloat(n.paddingLeft) + k._getFloat(n.paddingRight) + k._getFloat(n.borderLeftWidth) + k._getFloat(n.borderRightWidth), a
        }
        return k._getFloat(e(t).css(i))
    }, k._getFloat = function (e) {
        return o(parseFloat(e))
    }, k._getOuterWidth = function (e, t) {
        var i = y(e, null),
            n = k._getNumberStyle(e, "width", i);
        t && (n += k._getNumberStyle(e, "marginLeft", i) + k._getNumberStyle(e, "marginRight", i));
        return n
    }, k._getOuterHeight = function (e, t) {
        var i = y(e, null),
            n = k._getNumberStyle(e, "height", i);
        t && (n += k._getNumberStyle(e, "marginTop", i) + k._getNumberStyle(e, "marginBottom", i));
        return n
    }, k._skipTransition = function (e, t, i) {
        var n = e.style[c];
        e.style[c] = "0ms", t.call(i);
        e.offsetWidth;
        e.style[c] = n
    }, k.prototype._init = function () {
        this.$items = this._getItems(), this.sizer = this._getElementOption(this.sizer), this.sizer && (this.useSizer = !0), this.$el.addClass(k.ClassName.BASE), this._initItems(), C.on("resize." + g + "." + this.unique, this._getResizeFunction());
        var e = this.$el.css(["position", "overflow"]),
            t = k._getOuterWidth(this.element);
        this._validateStyles(e), this._setColumns(t), this.shuffle(this.group, this.initialSort), this.supported && a((function () {
            this._setTransitions(), this.element.style[r] = "height " + this.speed + "ms " + this.easing
        }), this)
    }, k.prototype._getResizeFunction = function () {
        var t = e.proxy(this._onResize, this);
        return this.throttle ? this.throttle(t, this.throttleTime) : t
    }, k.prototype._getElementOption = function (e) {
        return "string" == typeof e ? this.$el.find(e)[0] || null : e && e.nodeType && 1 === e.nodeType ? e : e && e.jquery ? e[0] : null
    }, k.prototype._validateStyles = function (e) {
        "static" === e.position && (this.element.style.position = "relative"), "hidden" !== e.overflow && (this.element.style.overflow = "hidden")
    }, k.prototype._filter = function (e, t) {
        e = e || this.lastFilter, t = t || this.$items;
        var i = this._getFilteredSets(e, t);
        return this._toggleFilterClasses(i.filtered, i.concealed), this.lastFilter = e, "string" == typeof e && (this.group = e), i.filtered
    }, k.prototype._getFilteredSets = function (t, i) {
        var a = e(),
            s = e();
        return t === v ? a = i : n(i, (function (i) {
            var n = e(i);
            this._doesPassFilter(t, n) ? a = a.add(n) : s = s.add(n)
        }), this), {
            filtered: a,
            concealed: s
        }
    }, k.prototype._doesPassFilter = function (t, i) {
        if (e.isFunction(t)) return t.call(i[0], i, this);
        var n = i.data("groups"),
            a = this.delimeter && !e.isArray(n) ? n.split(this.delimeter) : n;
        return e.inArray(t, a) > -1
    }, k.prototype._toggleFilterClasses = function (e, t) {
        e.removeClass(k.ClassName.CONCEALED).addClass(k.ClassName.FILTERED), t.removeClass(k.ClassName.FILTERED).addClass(k.ClassName.CONCEALED)
    }, k.prototype._initItems = function (e) {
        (e = e || this.$items).addClass([k.ClassName.SHUFFLE_ITEM, k.ClassName.FILTERED].join(" ")), e.css(this.itemCss).data("point", new w).data("scale", 1)
    }, k.prototype._updateItemCount = function () {
        this.visibleItems = this._getFilteredItems().length
    }, k.prototype._setTransition = function (e) {
        e.style[r] = u + " " + this.speed + "ms " + this.easing + ", opacity " + this.speed + "ms " + this.easing
    }, k.prototype._setTransitions = function (e) {
        n(e = e || this.$items, (function (e) {
            this._setTransition(e)
        }), this)
    }, k.prototype._setSequentialDelay = function (e) {
        this.supported && n(e, (function (e, t) {
            e.style[l] = "0ms," + (t + 1) * this.sequentialFadeDelay + "ms"
        }), this)
    }, k.prototype._getItems = function () {
        return this.$el.children(this.itemSelector)
    }, k.prototype._getFilteredItems = function () {
        return this.$items.filter("." + k.ClassName.FILTERED)
    }, k.prototype._getConcealedItems = function () {
        return this.$items.filter("." + k.ClassName.CONCEALED)
    }, k.prototype._getColumnSize = function (t, i) {
        var n;
        return 0 === (n = e.isFunction(this.columnWidth) ? this.columnWidth(t) : this.useSizer ? k._getOuterWidth(this.sizer) : this.columnWidth ? this.columnWidth : this.$items.length > 0 ? k._getOuterWidth(this.$items[0], !0) : t) && (n = t), n + i
    }, k.prototype._getGutterSize = function (t) {
        return e.isFunction(this.gutterWidth) ? this.gutterWidth(t) : this.useSizer ? k._getNumberStyle(this.sizer, "marginLeft") : this.gutterWidth
    }, k.prototype._setColumns = function (e) {
        var t = e || k._getOuterWidth(this.element),
            i = this._getGutterSize(t),
            n = this._getColumnSize(t, i),
            a = (t + i) / n;
        Math.abs(Math.round(a) - a) < this.columnThreshold && (a = Math.round(a)), this.cols = Math.max(Math.floor(a), 1), this.containerWidth = t, this.colWidth = n
    }, k.prototype._setContainerSize = function () {
        this.$el.css("height", this._getContainerSize())
    }, k.prototype._getContainerSize = function () {
        return s(this.positions)
    }, k.prototype._fire = function (e, t) {
        this.$el.trigger(e + "." + g, t && t.length ? t : [this])
    }, k.prototype._resetCols = function () {
        var e = this.cols;
        for (this.positions = []; e--;) this.positions.push(0)
    }, k.prototype._layout = function (e, t) {
        n(e, (function (e) {
            this._layoutItem(e, !!t)
        }), this), this._processStyleQueue(), this._setContainerSize()
    }, k.prototype._layoutItem = function (t, i) {
        var n = e(t),
            a = n.data(),
            s = a.point,
            o = a.scale,
            r = {
                width: k._getOuterWidth(t, !0),
                height: k._getOuterHeight(t, !0)
            },
            l = this._getItemPosition(r);
        w.equals(s, l) && 1 === o || (a.point = l, a.scale = 1, this.styleQueue.push({
            $item: n,
            point: l,
            scale: 1,
            opacity: i ? 0 : 1,
            skipTransition: i || 0 === this.speed,
            callfront: function () {
                i || n.css("visibility", "visible")
            },
            callback: function () {
                i && n.css("visibility", "hidden")
            }
        }))
    }, k.prototype._getItemPosition = function (e) {
        for (var t = this._getColumnSpan(e.width, this.colWidth, this.cols), i = this._getColumnSet(t, this.cols), n = this._getShortColumn(i, this.buffer), a = new w(Math.round(this.colWidth * n), Math.round(i[n])), s = i[n] + e.height, o = this.cols + 1 - i.length, r = 0; o > r; r++) this.positions[n + r] = s;
        return a
    }, k.prototype._getColumnSpan = function (e, t, i) {
        var n = e / t;
        return Math.abs(Math.round(n) - n) < this.columnThreshold && (n = Math.round(n)), Math.min(Math.ceil(n), i)
    }, k.prototype._getColumnSet = function (e, t) {
        if (1 === e) return this.positions;
        for (var i = t + 1 - e, n = [], a = 0; i > a; a++) n[a] = s(this.positions.slice(a, a + e));
        return n
    }, k.prototype._getShortColumn = function (e, t) {
        for (var i = function (e) {
            return Math.min.apply(Math, e)
        }(e), n = 0, a = e.length; a > n; n++)
            if (e[n] >= i - t && e[n] <= i + t) return n;
        return 0
    }, k.prototype._shrink = function (t) {
        n(t || this._getConcealedItems(), (function (t) {
            var i = e(t),
                n = i.data();
            n.scale !== b && (n.scale = b, this.styleQueue.push({
                $item: i,
                point: n.point,
                scale: b,
                opacity: 0,
                callback: function () {
                    i.css("visibility", "hidden")
                }
            }))
        }), this)
    }, k.prototype._onResize = function () {
        this.enabled && !this.destroyed && (k._getOuterWidth(this.element) !== this.containerWidth && this.update())
    }, k.prototype._getStylesForTransition = function (e) {
        var t = {
            opacity: e.opacity
        };
        return this.supported ? t[p] = k._getItemTransformString(e.point, e.scale) : (t.left = e.point.x, t.top = e.point.y), t
    }, k.prototype._transition = function (t) {
        var i = this._getStylesForTransition(t);
        this._startItemAnimation(t.$item, i, t.callfront || e.noop, t.callback || e.noop)
    }, k.prototype._startItemAnimation = function (t, i, n, a) {
        function s(t) {
            t.target === t.currentTarget && (e(t.target).off(d, s), o._removeTransitionReference(r), a())
        }
        var o = this,
            r = {
                $element: t,
                handler: s
            };
        if (n(), !this.initialized) return t.css(i), void a();
        if (this.supported) t.css(i), t.on(d, s), this._transitions.push(r);
        else {
            var l = t.stop(!0).animate(i, this.speed, "swing", a);
            this._animations.push(l.promise())
        }
    }, k.prototype._processStyleQueue = function (t) {
        this.isTransitioning && this._cancelMovement();
        var i = e();
        n(this.styleQueue, (function (e) {
            e.skipTransition ? this._styleImmediately(e) : (i = i.add(e.$item), this._transition(e))
        }), this), i.length > 0 && this.initialized && this.speed > 0 ? (this.isTransitioning = !0, this.supported ? this._whenCollectionDone(i, d, this._movementFinished) : this._whenAnimationsDone(this._movementFinished)) : t || a(this._layoutEnd, this), this.styleQueue.length = 0
    }, k.prototype._cancelMovement = function () {
        this.supported ? n(this._transitions, (function (e) {
            e.$element.off(d, e.handler)
        })) : (this._isMovementCanceled = !0, this.$items.stop(!0), this._isMovementCanceled = !1), this._transitions.length = 0, this.isTransitioning = !1
    }, k.prototype._removeTransitionReference = function (t) {
        var i = e.inArray(t, this._transitions);
        i > -1 && this._transitions.splice(i, 1)
    }, k.prototype._styleImmediately = function (e) {
        k._skipTransition(e.$item[0], (function () {
            e.$item.css(this._getStylesForTransition(e))
        }), this)
    }, k.prototype._movementFinished = function () {
        this.isTransitioning = !1, this._layoutEnd()
    }, k.prototype._layoutEnd = function () {
        this._fire(k.EventType.LAYOUT)
    }, k.prototype._addItems = function (e, t, i) {
        this._initItems(e), this._setTransitions(e), this.$items = this._getItems(), this._shrink(e), n(this.styleQueue, (function (e) {
            e.skipTransition = !0
        })), this._processStyleQueue(!0), t ? this._addItemsToEnd(e, i) : this.shuffle(this.lastFilter)
    }, k.prototype._addItemsToEnd = function (e, t) {
        var i = this._filter(null, e).get();
        this._updateItemCount(), this._layout(i, !0), t && this.supported && this._setSequentialDelay(i), this._revealAppended(i)
    }, k.prototype._revealAppended = function (t) {
        a((function () {
            n(t, (function (t) {
                var i = e(t);
                this._transition({
                    $item: i,
                    opacity: 1,
                    point: i.data("point"),
                    scale: 1
                })
            }), this), this._whenCollectionDone(e(t), d, (function () {
                e(t).css(l, "0ms"), this._movementFinished()
            }))
        }), this, this.revealAppendedDelay)
    }, k.prototype._whenCollectionDone = function (t, i, n) {
        function a(t) {
            t.target === t.currentTarget && (e(t.target).off(i, a), ++s === o && (r._removeTransitionReference(l), n.call(r)))
        }
        var s = 0,
            o = t.length,
            r = this,
            l = {
                $element: t,
                handler: a
            };
        t.on(i, a), this._transitions.push(l)
    }, k.prototype._whenAnimationsDone = function (t) {
        e.when.apply(null, this._animations).always(e.proxy((function () {
            this._animations.length = 0, this._isMovementCanceled || t.call(this)
        }), this))
    }, k.prototype.shuffle = function (e, t) {
        this.enabled && (e || (e = v), this._filter(e), this._updateItemCount(), this._shrink(), this.sort(t))
    }, k.prototype.sort = function (e) {
        if (this.enabled) {
            this._resetCols();
            var t = e || this.lastSort,
                i = this._getFilteredItems().sorted(t);
            this._layout(i), this.lastSort = t
        }
    }, k.prototype.update = function (e) {
        this.enabled && (e || this._setColumns(), this.sort())
    }, k.prototype.layout = function () {
        this.update(!0)
    }, k.prototype.appended = function (e, t, i) {
        this._addItems(e, !0 === t, !1 !== i)
    }, k.prototype.disable = function () {
        this.enabled = !1
    }, k.prototype.enable = function (e) {
        this.enabled = !0, !1 !== e && this.update()
    }, k.prototype.remove = function (t) {
        t.length && t.jquery && (this._toggleFilterClasses(e(), t), this._shrink(t), this.sort(), this.$el.one(k.EventType.LAYOUT + "." + g, e.proxy((function () {
            t.remove(), this.$items = this._getItems(), this._updateItemCount(), this._fire(k.EventType.REMOVED, [t, this]), t = null
        }), this)))
    }, k.prototype.destroy = function () {
        C.off("." + this.unique), this.$el.removeClass(g).removeAttr("style").removeData(g), this.$items.removeAttr("style").removeData("point").removeData("scale").removeClass([k.ClassName.CONCEALED, k.ClassName.FILTERED, k.ClassName.SHUFFLE_ITEM].join(" ")), this.$items = null, this.$el = null, this.sizer = null, this.element = null, this._transitions = null, this.destroyed = !0
    }, e.fn.shuffle = function (t) {
        var i = Array.prototype.slice.call(arguments, 1);
        return this.each((function () {
            var n = e(this),
                a = n.data(g);
            a ? "string" == typeof t && a[t] && a[t].apply(a, i) : (a = new k(this, t), n.data(g, a))
        }))
    }, e.fn.sorted = function (t) {
        var n = e.extend({}, e.fn.sorted.defaults, t),
            a = this.get(),
            s = !1;
        return a.length ? n.randomize ? function (e) {
            var t, i, n = e.length;
            if (!n) return e;
            for (; --n;) t = e[i = Math.floor(Math.random() * (n + 1))], e[i] = e[n], e[n] = t;
            return e
        }(a) : (e.isFunction(n.by) && a.sort((function (t, a) {
            if (s) return 0;
            var o = n.by(e(t)),
                r = n.by(e(a));
            return o === i && r === i ? (s = !0, 0) : r > o || "sortFirst" === o || "sortLast" === r ? -1 : o > r || "sortLast" === o || "sortFirst" === r ? 1 : 0
        })), s ? this.get() : (n.reverse && a.reverse(), a)) : []
    }, e.fn.sorted.defaults = {
        reverse: !1,
        by: null,
        randomize: !1
    }, k
})),
    function (e, t) {
        function i(e, t, i) {
            return [parseFloat(e[0]) * (u.test(e[0]) ? t / 100 : 1), parseFloat(e[1]) * (u.test(e[1]) ? i / 100 : 1)]
        }

        function n(t, i) {
            return parseInt(e.css(t, i), 10) || 0
        }
        e.ui = e.ui || {};
        var a, s = Math.max,
            o = Math.abs,
            r = Math.round,
            l = /left|center|right/,
            c = /top|center|bottom/,
            d = /[\+\-]\d+(\.[\d]+)?%?/,
            p = /^\w+/,
            u = /%$/,
            h = e.fn.pos;
        e.pos = {
            scrollbarWidth: function () {
                if (undefined !== a) return a;
                var t, i, n = e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),
                    s = n.children()[0];
                return e("body").append(n), t = s.offsetWidth, n.css("overflow", "scroll"), t === (i = s.offsetWidth) && (i = n[0].clientWidth), n.remove(), a = t - i
            },
            getScrollInfo: function (t) {
                var i = t.isWindow || t.isDocument ? "" : t.element.css("overflow-x"),
                    n = t.isWindow || t.isDocument ? "" : t.element.css("overflow-y"),
                    a = "scroll" === i || "auto" === i && t.width < t.element[0].scrollWidth;
                return {
                    width: "scroll" === n || "auto" === n && t.height < t.element[0].scrollHeight ? e.pos.scrollbarWidth() : 0,
                    height: a ? e.pos.scrollbarWidth() : 0
                }
            },
            getWithinInfo: function (t) {
                var i = e(t || window),
                    n = e.isWindow(i[0]);
                return {
                    element: i,
                    isWindow: n,
                    isDocument: !!i[0] && 9 === i[0].nodeType,
                    offset: i.offset() || {
                        left: 0,
                        top: 0
                    },
                    scrollLeft: i.scrollLeft(),
                    scrollTop: i.scrollTop(),
                    width: n ? i.width() : i.outerWidth(),
                    height: n ? i.height() : i.outerHeight()
                }
            }
        }, e.fn.pos = function (t) {
            if (!t || !t.of) return h.apply(this, arguments);
            t = e.extend({}, t);
            var a, u, f, m, g, v, b = e(t.of),
                y = e.pos.getWithinInfo(t.within),
                w = e.pos.getScrollInfo(y),
                _ = (t.collision || "flip").split(" "),
                T = {};
            return v = function (t) {
                var i = t[0];
                return 9 === i.nodeType ? {
                    width: t.width(),
                    height: t.height(),
                    offset: {
                        top: 0,
                        left: 0
                    }
                } : e.isWindow(i) ? {
                    width: t.width(),
                    height: t.height(),
                    offset: {
                        top: t.scrollTop(),
                        left: t.scrollLeft()
                    }
                } : i.preventDefault ? {
                    width: 0,
                    height: 0,
                    offset: {
                        top: i.pageY,
                        left: i.pageX
                    }
                } : {
                    width: t.outerWidth(),
                    height: t.outerHeight(),
                    offset: t.offset()
                }
            }(b), b[0].preventDefault && (t.at = "left top"), u = v.width, f = v.height, m = v.offset, g = e.extend({}, m), e.each(["my", "at"], (function () {
                var e, i, n = (t[this] || "").split(" ");
                1 === n.length && (n = l.test(n[0]) ? n.concat(["center"]) : c.test(n[0]) ? ["center"].concat(n) : ["center", "center"]), n[0] = l.test(n[0]) ? n[0] : "center", n[1] = c.test(n[1]) ? n[1] : "center", e = d.exec(n[0]), i = d.exec(n[1]), T[this] = [e ? e[0] : 0, i ? i[0] : 0], t[this] = [p.exec(n[0])[0], p.exec(n[1])[0]]
            })), 1 === _.length && (_[1] = _[0]), "right" === t.at[0] ? g.left += u : "center" === t.at[0] && (g.left += u / 2), "bottom" === t.at[1] ? g.top += f : "center" === t.at[1] && (g.top += f / 2), a = i(T.at, u, f), g.left += a[0], g.top += a[1], this.each((function () {
                var l, c, d = e(this),
                    p = d.outerWidth(),
                    h = d.outerHeight(),
                    v = n(this, "marginLeft"),
                    C = n(this, "marginTop"),
                    k = p + v + n(this, "marginRight") + w.width,
                    E = h + C + n(this, "marginBottom") + w.height,
                    x = e.extend({}, g),
                    S = i(T.my, d.outerWidth(), d.outerHeight());
                "right" === t.my[0] ? x.left -= p : "center" === t.my[0] && (x.left -= p / 2), "bottom" === t.my[1] ? x.top -= h : "center" === t.my[1] && (x.top -= h / 2), x.left += S[0], x.top += S[1], e.support.offsetFractions || (x.left = r(x.left), x.top = r(x.top)), l = {
                    marginLeft: v,
                    marginTop: C
                }, e.each(["left", "top"], (function (i, n) {
                    e.ui.pos[_[i]] && e.ui.pos[_[i]][n](x, {
                        targetWidth: u,
                        targetHeight: f,
                        elemWidth: p,
                        elemHeight: h,
                        collisionPosition: l,
                        collisionWidth: k,
                        collisionHeight: E,
                        offset: [a[0] + S[0], a[1] + S[1]],
                        my: t.my,
                        at: t.at,
                        within: y,
                        elem: d
                    })
                })), t.using && (c = function (e) {
                    var i = m.left - x.left,
                        n = i + u - p,
                        a = m.top - x.top,
                        r = a + f - h,
                        l = {
                            target: {
                                element: b,
                                left: m.left,
                                top: m.top,
                                width: u,
                                height: f
                            },
                            element: {
                                element: d,
                                left: x.left,
                                top: x.top,
                                width: p,
                                height: h
                            },
                            horizontal: 0 > n ? "left" : i > 0 ? "right" : "center",
                            vertical: 0 > r ? "top" : a > 0 ? "bottom" : "middle"
                        };
                    p > u && o(i + n) < u && (l.horizontal = "center"), h > f && o(a + r) < f && (l.vertical = "middle"), l.important = s(o(i), o(n)) > s(o(a), o(r)) ? "horizontal" : "vertical", t.using.call(this, e, l)
                }), d.offset(e.extend(x, {
                    using: c
                }))
            }))
        }, e.ui.pos = {
            _trigger: function (e, t, i, n) {
                t.elem && t.elem.trigger({
                    type: i,
                    position: e,
                    positionData: t,
                    triggered: n
                })
            },
            fit: {
                left: function (t, i) {
                    e.ui.pos._trigger(t, i, "posCollide", "fitLeft");
                    var n, a = i.within,
                        o = a.isWindow ? a.scrollLeft : a.offset.left,
                        r = a.width,
                        l = t.left - i.collisionPosition.marginLeft,
                        c = o - l,
                        d = l + i.collisionWidth - r - o;
                    i.collisionWidth > r ? c > 0 && 0 >= d ? (n = t.left + c + i.collisionWidth - r - o, t.left += c - n) : t.left = d > 0 && 0 >= c ? o : c > d ? o + r - i.collisionWidth : o : c > 0 ? t.left += c : d > 0 ? t.left -= d : t.left = s(t.left - l, t.left), e.ui.pos._trigger(t, i, "posCollided", "fitLeft")
                },
                top: function (t, i) {
                    e.ui.pos._trigger(t, i, "posCollide", "fitTop");
                    var n, a = i.within,
                        o = a.isWindow ? a.scrollTop : a.offset.top,
                        r = i.within.height,
                        l = t.top - i.collisionPosition.marginTop,
                        c = o - l,
                        d = l + i.collisionHeight - r - o;
                    i.collisionHeight > r ? c > 0 && 0 >= d ? (n = t.top + c + i.collisionHeight - r - o, t.top += c - n) : t.top = d > 0 && 0 >= c ? o : c > d ? o + r - i.collisionHeight : o : c > 0 ? t.top += c : d > 0 ? t.top -= d : t.top = s(t.top - l, t.top), e.ui.pos._trigger(t, i, "posCollided", "fitTop")
                }
            },
            flip: {
                left: function (t, i) {
                    e.ui.pos._trigger(t, i, "posCollide", "flipLeft");
                    var n, a, s = i.within,
                        r = s.offset.left + s.scrollLeft,
                        l = s.width,
                        c = s.isWindow ? s.scrollLeft : s.offset.left,
                        d = t.left - i.collisionPosition.marginLeft,
                        p = d - c,
                        u = d + i.collisionWidth - l - c,
                        h = "left" === i.my[0] ? -i.elemWidth : "right" === i.my[0] ? i.elemWidth : 0,
                        f = "left" === i.at[0] ? i.targetWidth : "right" === i.at[0] ? -i.targetWidth : 0,
                        m = -2 * i.offset[0];
                    0 > p ? (0 > (n = t.left + h + f + m + i.collisionWidth - l - r) || n < o(p)) && (t.left += h + f + m) : u > 0 && (((a = t.left - i.collisionPosition.marginLeft + h + f + m - c) > 0 || o(a) < u) && (t.left += h + f + m)), e.ui.pos._trigger(t, i, "posCollided", "flipLeft")
                },
                top: function (t, i) {
                    e.ui.pos._trigger(t, i, "posCollide", "flipTop");
                    var n, a, s = i.within,
                        r = s.offset.top + s.scrollTop,
                        l = s.height,
                        c = s.isWindow ? s.scrollTop : s.offset.top,
                        d = t.top - i.collisionPosition.marginTop,
                        p = d - c,
                        u = d + i.collisionHeight - l - c,
                        h = "top" === i.my[1] ? -i.elemHeight : "bottom" === i.my[1] ? i.elemHeight : 0,
                        f = "top" === i.at[1] ? i.targetHeight : "bottom" === i.at[1] ? -i.targetHeight : 0,
                        m = -2 * i.offset[1];
                    0 > p ? (a = t.top + h + f + m + i.collisionHeight - l - r, t.top + h + f + m > p && (0 > a || a < o(p)) && (t.top += h + f + m)) : u > 0 && (n = t.top - i.collisionPosition.marginTop + h + f + m - c, t.top + h + f + m > u && (n > 0 || o(n) < u) && (t.top += h + f + m)), e.ui.pos._trigger(t, i, "posCollided", "flipTop")
                }
            },
            flipfit: {
                left: function () {
                    e.ui.pos.flip.left.apply(this, arguments), e.ui.pos.fit.left.apply(this, arguments)
                },
                top: function () {
                    e.ui.pos.flip.top.apply(this, arguments), e.ui.pos.fit.top.apply(this, arguments)
                }
            }
        },
            function () {
                var t, i, n, a, s, o = document.getElementsByTagName("body")[0],
                    r = document.createElement("div");
                for (s in t = document.createElement(o ? "div" : "body"), n = {
                    visibility: "hidden",
                    width: 0,
                    height: 0,
                    border: 0,
                    margin: 0,
                    background: "none"
                }, o && e.extend(n, {
                    position: "absolute",
                    left: "-1000px",
                    top: "-1000px"
                }), n) t.style[s] = n[s];
                t.appendChild(r), (i = o || document.documentElement).insertBefore(t, i.firstChild), r.style.cssText = "position: absolute; left: 10.7432222px;", a = e(r).offset().left, e.support.offsetFractions = a > 10 && 11 > a, t.innerHTML = "", i.removeChild(t)
            }()
    }(jQuery),
    function (e) {
        "use strict";
        "function" == typeof define && define.amd ? define(["jquery"], e) : window.jQuery && !window.jQuery.fn.iconpicker && e(window.jQuery)
    }((function (e) {
        "use strict";
        var t = function (e) {
            return !1 === e || "" === e || null == e
        },
            i = function (t) {
                return e(t).length > 0
            },
            n = function (e) {
                return "string" == typeof e || e instanceof String
            },
            a = function (t, i) {
                return -1 !== e.inArray(t, i)
            },
            s = function (t, n) {
                this._id = s._idCounter++, this.element = e(t).addClass("iconpicker-element"), this._trigger("iconpickerCreate"), this.options = e.extend({}, s.defaultOptions, this.element.data(), n), this.options.templates = e.extend({}, s.defaultOptions.templates, this.options.templates), this.options.originalPlacement = this.options.placement, this.container = !!i(this.options.container) && e(this.options.container), !1 === this.container && (this.container = this.element.is("input") ? this.element.parent() : this.element), this.container.addClass("iconpicker-container").is(".dropdown-menu") && (this.options.placement = "inline"), this.input = !!this.element.is("input") && this.element.addClass("iconpicker-input"), !1 === this.input && (this.input = this.container.find(this.options.input)), this.component = this.container.find(this.options.component).addClass("iconpicker-component"), 0 === this.component.length ? this.component = !1 : this.component.find("i").addClass(this.options.iconComponentBaseClass), this._createPopover(), this._createIconpicker(), 0 === this.getAcceptButton().length && (this.options.mustAccept = !1), this.container.is(".input-group") ? this.container.parent().append(this.popover) : this.container.append(this.popover), this._bindElementEvents(), this._bindWindowEvents(), this.update(this.options.selected), this.isInline() && this.show(), this._trigger("iconpickerCreated")
            };
        s._idCounter = 0, s.defaultOptions = {
            title: !1,
            selected: !1,
            defaultValue: !1,
            placement: "bottom",
            collision: "none",
            animation: !0,
            hideOnSelect: !1,
            showFooter: !1,
            searchInFooter: !1,
            mustAccept: !1,
            selectedCustomClass: "bg-primary",
            icons: [],
            iconBaseClass: "fa",
            iconComponentBaseClass: "fa fa-fw",
            iconClassPrefix: "fa-",
            input: "input",
            component: ".input-group-addon",
            container: !1,
            templates: {
                popover: '<div class="iconpicker-popover popover"><div class="arrow"></div><div class="popover-title"></div><div class="popover-content"></div></div>',
                footer: '<div class="popover-footer"></div>',
                buttons: '<button class="iconpicker-btn iconpicker-btn-cancel btn btn-default btn-sm">Cancel</button> <button class="iconpicker-btn iconpicker-btn-accept btn btn-primary btn-sm">Accept</button>',
                search: '<input type="search" class="form-control iconpicker-search" placeholder="' + M.SEARCH + '" />',
                iconpicker: '<div class="iconpicker"><div class="iconpicker-items"></div></div>',
                iconpickerItem: '<div class="iconpicker-item"><i></i></div>'
            }
        }, s.batch = function (t, i) {
            var n = Array.prototype.slice.call(arguments, 2);
            return e(t).each((function () {
                var t = e(this).data("iconpicker");
                t && t[i].apply(t, n)
            }))
        }, s.prototype = {
            constructor: s,
            options: {},
            _id: 0,
            _trigger: function (t, i) {
                i = i || {}, this.element.trigger(e.extend({
                    type: t,
                    iconpickerInstance: this
                }, i))
            },
            _createPopover: function () {
                this.popover = e(this.options.templates.popover);
                var i = this.popover.find(".popover-title");
                if (this.options.title && i.append(e('<div class="popover-title-text">' + this.options.title + "</div>")), this.options.searchInFooter || t(this.options.templates.buttons) ? this.options.title || i.remove() : i.append(this.options.templates.search), this.options.showFooter && !t(this.options.templates.footer)) {
                    var n = e(this.options.templates.footer);
                    !t(this.options.templates.search) && this.options.searchInFooter && n.append(e(this.options.templates.search)), t(this.options.templates.buttons) || n.append(e(this.options.templates.buttons)), this.popover.append(n)
                }
                return !0 === this.options.animation && this.popover.addClass("fade"), this.popover
            },
            _createIconpicker: function () {
                var t = this;
                this.iconpicker = e(this.options.templates.iconpicker);
                var i = function () {
                    var i = e(this);
                    i.is("." + t.options.iconBaseClass) && (i = i.parent()), t._trigger("iconpickerSelect", {
                        iconpickerItem: i,
                        iconpickerValue: t.iconpickerValue
                    }), !1 === t.options.mustAccept ? (t.update(i.data("iconpickerValue")), t._trigger("iconpickerSelected", {
                        iconpickerItem: this,
                        iconpickerValue: t.iconpickerValue
                    })) : t.update(i.data("iconpickerValue"), !0), t.options.hideOnSelect && !1 === t.options.mustAccept && t.hide()
                };
                for (var n in this.options.icons) {
                    var a = e(this.options.templates.iconpickerItem);
                    a.find("i").addClass(t.options.iconBaseClass + " " + this.options.iconClassPrefix + this.options.icons[n]), a.data("iconpickerValue", this.options.icons[n]).on("click.iconpicker", i), this.iconpicker.find(".iconpicker-items").append(a.attr("title", "." + this.getValue(this.options.icons[n])))
                }
                return this.popover.find(".popover-content").append(this.iconpicker), this.iconpicker
            },
            _isEventInsideIconpicker: function (t) {
                var i = e(t.target);
                return !((!i.hasClass("iconpicker-element") || i.hasClass("iconpicker-element") && !i.is(this.element)) && 0 === i.parents(".iconpicker-popover").length)
            },
            _bindElementEvents: function () {
                var t = this;
                this.getSearchInput().on("keyup", (function () {
                    t.filter(e(this).val().toLowerCase())
                })), this.getAcceptButton().on("click.iconpicker", (function () {
                    var e = t.iconpicker.find(".iconpicker-selected").get(0);
                    t.update(t.iconpickerValue), t._trigger("iconpickerSelected", {
                        iconpickerItem: e,
                        iconpickerValue: t.iconpickerValue
                    }), t.isInline() || t.hide()
                })), this.getCancelButton().on("click.iconpicker", (function () {
                    t.isInline() || t.hide()
                })), this.element.on("focus.iconpicker", (function (e) {
                    t.show(), e.stopPropagation()
                })), this.hasComponent() && this.component.on("click.iconpicker", (function () {
                    t.toggle()
                })), this.hasInput() && this.input.on("keyup.iconpicker", (function (e) {
                    a(e.keyCode, [38, 40, 37, 39, 16, 17, 18, 9, 8, 91, 93, 20, 46, 186, 190, 46, 78, 188, 44, 86]) ? t._updateFormGroupStatus(!1 !== t.getValid(this.value)) : t.update()
                }))
            },
            _bindWindowEvents: function () {
                var t = e(window.document),
                    i = this,
                    n = ".iconpicker.inst" + this._id;
                return e(window).on("resize.iconpicker" + n + " orientationchange.iconpicker" + n, (function () {
                    i.popover.hasClass("in") && i.updatePlacement()
                })), i.isInline() || t.on("mouseup" + n, (function (e) {
                    return i._isEventInsideIconpicker(e) || i.isInline() || i.hide(), e.stopPropagation(), e.preventDefault(), !1
                })), !1
            },
            _unbindElementEvents: function () {
                this.popover.off(".iconpicker"), this.element.off(".iconpicker"), this.hasInput() && this.input.off(".iconpicker"), this.hasComponent() && this.component.off(".iconpicker"), this.hasContainer() && this.container.off(".iconpicker")
            },
            _unbindWindowEvents: function () {
                e(window).off(".iconpicker.inst" + this._id), e(window.document).off(".iconpicker.inst" + this._id)
            },
            updatePlacement: function (t, i) {
                t = t || this.options.placement, this.options.placement = t, i = !0 === (i = i || this.options.collision) ? "flip" : i;
                var n = {
                    at: "right bottom",
                    my: "right top",
                    of: this.hasInput() ? this.input : this.container,
                    collision: !0 === i ? "flip" : i,
                    within: window
                };
                if (this.popover.removeClass("inline topLeftCorner topLeft top topRight topRightCorner rightTop right rightBottom bottomRight bottomRightCorner bottom bottomLeft bottomLeftCorner leftBottom left leftTop"), "object" == typeof t) return this.popover.pos(e.extend({}, n, t));
                switch (t) {
                    case "inline":
                        n = !1;
                        break;
                    case "topLeftCorner":
                        n.my = "right bottom", n.at = "left top";
                        break;
                    case "topLeft":
                        n.my = "left bottom", n.at = "left top";
                        break;
                    case "top":
                        n.my = "center bottom", n.at = "center top";
                        break;
                    case "topRight":
                        n.my = "right bottom", n.at = "right top";
                        break;
                    case "topRightCorner":
                        n.my = "left bottom", n.at = "right top";
                        break;
                    case "rightTop":
                        n.my = "left bottom", n.at = "right center";
                        break;
                    case "right":
                        n.my = "left center", n.at = "right center";
                        break;
                    case "rightBottom":
                        n.my = "left top", n.at = "right center";
                        break;
                    case "bottomRightCorner":
                        n.my = "left top", n.at = "right bottom";
                        break;
                    case "bottomRight":
                        n.my = "right top", n.at = "right bottom";
                        break;
                    case "bottom":
                        n.my = "center top", n.at = "center bottom";
                        break;
                    case "bottomLeft":
                        n.my = "left top", n.at = "left bottom";
                        break;
                    case "bottomLeftCorner":
                        n.my = "right top", n.at = "left bottom";
                        break;
                    case "leftBottom":
                        n.my = "right top", n.at = "left center";
                        break;
                    case "left":
                        n.my = "right center", n.at = "left center";
                        break;
                    case "leftTop":
                        n.my = "right bottom", n.at = "left center";
                        break;
                    default:
                        return !1
                }
                return this.popover.css({
                    display: "inline" === this.options.placement ? "" : "block"
                }), !1 !== n ? this.popover.pos(n).css("maxWidth", e(window).width() - this.container.offset().left - 5) : this.popover.css({
                    top: "auto",
                    right: "auto",
                    bottom: "auto",
                    left: "auto",
                    maxWidth: "none"
                }), this.popover.addClass(this.options.placement), !0
            },
            _updateComponents: function () {
                if (this.iconpicker.find(".iconpicker-item.iconpicker-selected").removeClass("iconpicker-selected " + this.options.selectedCustomClass), this.iconpicker.find("." + this.options.iconBaseClass + "." + this.options.iconClassPrefix + this.iconpickerValue).parent().addClass("iconpicker-selected " + this.options.selectedCustomClass), this.hasComponent()) {
                    var e = this.component.find("i");
                    e.length > 0 ? e.attr("class", this.options.iconComponentBaseClass + " " + this.getValue()) : this.component.html(this.getValueHtml())
                }
            },
            _updateFormGroupStatus: function (e) {
                return !!this.hasInput() && (!1 !== e ? this.input.parents(".form-group:first").removeClass("has-error") : this.input.parents(".form-group:first").addClass("has-error"), !0)
            },
            getValid: function (t) {
                n(t) || (t = "");
                var i = "" === t;
                return t = e.trim(t.replace(this.options.iconClassPrefix, "")), !(!a(t, this.options.icons) && !i) && t
            },
            setValue: function (e) {
                var t = this.getValid(e);
                return !1 !== t ? (this.iconpickerValue = t, this._trigger("iconpickerSetValue", {
                    iconpickerValue: t
                }), this.iconpickerValue) : (this._trigger("iconpickerInvalid", {
                    iconpickerValue: e
                }), !1)
            },
            getValue: function (e) {
                return this.options.iconClassPrefix + (e || this.iconpickerValue)
            },
            getValueHtml: function () {
                return '<i class="' + this.options.iconBaseClass + " " + this.getValue() + '"></i>'
            },
            setSourceValue: function (e) {
                return !1 !== (e = this.setValue(e)) && "" !== e && (this.hasInput() ? this.input.val(this.getValue()) : this.element.data("iconpickerValue", this.getValue()), this._trigger("iconpickerSetSourceValue", {
                    iconpickerValue: e
                })), e
            },
            getSourceValue: function (e) {
                var t = e = e || this.options.defaultValue;
                return (void 0 === (t = this.hasInput() ? this.input.val() : this.element.data("iconpickerValue")) || "" === t || null === t || !1 === t) && (t = e), t
            },
            hasInput: function () {
                return !1 !== this.input
            },
            hasComponent: function () {
                return !1 !== this.component
            },
            hasContainer: function () {
                return !1 !== this.container
            },
            getAcceptButton: function () {
                return this.popover.find(".iconpicker-btn-accept")
            },
            getCancelButton: function () {
                return this.popover.find(".iconpicker-btn-cancel")
            },
            getSearchInput: function () {
                return this.popover.find(".iconpicker-search")
            },
            filter: function (i) {
                if (t(i)) return this.iconpicker.find(".iconpicker-item").show(), e(!1);
                var n = [];
                return this.iconpicker.find(".iconpicker-item").each((function () {
                    var t = e(this),
                        a = t.attr("title").toLowerCase(),
                        s = !1;
                    try {
                        s = new RegExp(i, "g")
                    } catch (e) {
                        s = !1
                    } !1 !== s && a.match(s) ? (n.push(t), t.show()) : t.hide()
                })), n
            },
            show: function () {
                return !this.popover.hasClass("in") && (e.iconpicker.batch(e(".iconpicker-popover.in:not(.inline)").not(this.popover), "hide"), this._trigger("iconpickerShow"), this.updatePlacement(), this.popover.addClass("in"), void setTimeout(e.proxy((function () {
                    this.popover.css("display", this.isInline() ? "" : "block"), this._trigger("iconpickerShown")
                }), this), this.options.animation ? 300 : 1))
            },
            hide: function () {
                return !!this.popover.hasClass("in") && (this._trigger("iconpickerHide"), this.popover.removeClass("in"), void setTimeout(e.proxy((function () {
                    this.popover.css("display", "none"), this.getSearchInput().val(""), this.filter(""), this._trigger("iconpickerHidden")
                }), this), this.options.animation ? 300 : 1))
            },
            toggle: function () {
                this.popover.is(":visible") ? this.hide() : this.show(!0)
            },
            update: function (e, t) {
                return e = e || this.getSourceValue(this.iconpickerValue), this._trigger("iconpickerUpdate"), !0 === t ? e = this.setValue(e) : (e = this.setSourceValue(e), this._updateFormGroupStatus(!1 !== e)), !1 !== e && this._updateComponents(), this._trigger("iconpickerUpdated"), e
            },
            destroy: function () {
                this._trigger("iconpickerDestroy"), this.element.removeData("iconpicker").removeData("iconpickerValue").removeClass("iconpicker-element"), this._unbindElementEvents(), this._unbindWindowEvents(), e(this.popover).remove(), this._trigger("iconpickerDestroyed")
            },
            disable: function () {
                return !!this.hasInput() && (this.input.prop("disabled", !0), !0)
            },
            enable: function () {
                return !!this.hasInput() && (this.input.prop("disabled", !1), !0)
            },
            isDisabled: function () {
                return !!this.hasInput() && !0 === this.input.prop("disabled")
            },
            isInline: function () {
                return "inline" === this.options.placement || this.popover.hasClass("inline")
            }
        }, e.iconpicker = s, e.fn.iconpicker = function (t) {
            return this.each((function () {
                var i = e(this);
                i.data("iconpicker") || i.data("iconpicker", new s(this, "object" == typeof t ? t : {}))
            }))
        }, s.defaultOptions.icons = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "fill-drip", "arrows-to-circle", "chevron-circle-right", "circle-chevron-right", "at", "trash-alt", "trash-can", "text-height", "user-times", "user-xmark", "stethoscope", "comment-alt", "message", "info", "compress-alt", "down-left-and-up-right-to-center", "explosion", "file-alt", "file-lines", "file-text", "wave-square", "ring", "building-un", "dice-three", "calendar-alt", "calendar-days", "anchor-circle-check", "building-circle-arrow-right", "volleyball-ball", "volleyball", "arrows-up-to-line", "sort-desc", "sort-down", "circle-minus", "minus-circle", "door-open", "right-from-bracket", "sign-out-alt", "atom", "soap", "heart-music-camera-bolt", "icons", "microphone-alt-slash", "microphone-lines-slash", "bridge-circle-check", "pump-medical", "fingerprint", "hand-point-right", "magnifying-glass-location", "search-location", "forward-step", "step-forward", "face-smile-beam", "smile-beam", "flag-checkered", "football-ball", "football", "school-circle-exclamation", "crop", "angle-double-down", "angles-down", "users-rectangle", "people-roof", "people-line", "beer-mug-empty", "beer", "diagram-predecessor", "arrow-up-long", "long-arrow-up", "burn", "fire-flame-simple", "male", "person", "laptop", "file-csv", "menorah", "truck-plane", "record-vinyl", "face-grin-stars", "grin-stars", "bong", "pastafarianism", "spaghetti-monster-flying", "arrow-down-up-across-line", "spoon", "utensil-spoon", "jar-wheat", "envelopes-bulk", "mail-bulk", "file-circle-exclamation", "circle-h", "hospital-symbol", "pager", "address-book", "contact-book", "strikethrough", "k", "landmark-flag", "pencil-alt", "pencil", "backward", "caret-right", "comments", "file-clipboard", "paste", "code-pull-request", "clipboard-list", "truck-loading", "truck-ramp-box", "user-check", "vial-virus", "sheet-plastic", "blog", "user-ninja", "person-arrow-up-from-line", "scroll-torah", "torah", "broom-ball", "quidditch-broom-ball", "quidditch", "toggle-off", "archive", "box-archive", "person-drowning", "arrow-down-9-1", "sort-numeric-desc", "sort-numeric-down-alt", "face-grin-tongue-squint", "grin-tongue-squint", "spray-can", "truck-monster", "w", "earth-africa", "globe-africa", "rainbow", "circle-notch", "tablet-alt", "tablet-screen-button", "paw", "cloud", "trowel-bricks", "face-flushed", "flushed", "hospital-user", "tent-arrow-left-right", "gavel", "legal", "binoculars", "microphone-slash", "box-tissue", "motorcycle", "bell-concierge", "concierge-bell", "pen-ruler", "pencil-ruler", "people-arrows-left-right", "people-arrows", "mars-and-venus-burst", "caret-square-right", "square-caret-right", "cut", "scissors", "sun-plant-wilt", "toilets-portable", "hockey-puck", "table", "magnifying-glass-arrow-right", "digital-tachograph", "tachograph-digital", "users-slash", "clover", "mail-reply", "reply", "star-and-crescent", "house-fire", "minus-square", "square-minus", "helicopter", "compass", "caret-square-down", "square-caret-down", "file-circle-question", "laptop-code", "swatchbook", "prescription-bottle", "bars", "navicon", "people-group", "hourglass-3", "hourglass-end", "heart-broken", "heart-crack", "external-link-square-alt", "square-up-right", "face-kiss-beam", "kiss-beam", "film", "ruler-horizontal", "people-robbery", "lightbulb", "caret-left", "circle-exclamation", "exclamation-circle", "school-circle-xmark", "arrow-right-from-bracket", "sign-out", "chevron-circle-down", "circle-chevron-down", "unlock-alt", "unlock-keyhole", "cloud-showers-heavy", "headphones-alt", "headphones-simple", "sitemap", "circle-dollar-to-slot", "donate", "memory", "road-spikes", "fire-burner", "flag", "hanukiah", "feather", "volume-down", "volume-low", "comment-slash", "cloud-sun-rain", "compress", "wheat-alt", "wheat-awn", "ankh", "hands-holding-child", "asterisk", "check-square", "square-check", "peseta-sign", "header", "heading", "ghost", "list-squares", "list", "phone-square-alt", "square-phone-flip", "cart-plus", "gamepad", "circle-dot", "dot-circle", "dizzy", "face-dizzy", "egg", "house-medical-circle-xmark", "campground", "folder-plus", "futbol-ball", "futbol", "soccer-ball", "paint-brush", "paintbrush", "lock", "gas-pump", "hot-tub-person", "hot-tub", "map-location", "map-marked", "house-flood-water", "tree", "bridge-lock", "sack-dollar", "edit", "pen-to-square", "car-side", "share-alt", "share-nodes", "heart-circle-minus", "hourglass-2", "hourglass-half", "microscope", "sink", "bag-shopping", "shopping-bag", "arrow-down-z-a", "sort-alpha-desc", "sort-alpha-down-alt", "mitten", "person-rays", "users", "eye-slash", "flask-vial", "hand-paper", "hand", "om", "worm", "house-circle-xmark", "plug", "chevron-up", "hand-spock", "stopwatch", "face-kiss", "kiss", "bridge-circle-xmark", "face-grin-tongue", "grin-tongue", "chess-bishop", "face-grin-wink", "grin-wink", "deaf", "deafness", "ear-deaf", "hard-of-hearing", "road-circle-check", "dice-five", "rss-square", "square-rss", "land-mine-on", "i-cursor", "stamp", "stairs", "i", "hryvnia-sign", "hryvnia", "pills", "face-grin-wide", "grin-alt", "tooth", "v", "bangladeshi-taka-sign", "bicycle", "rod-asclepius", "rod-snake", "staff-aesculapius", "staff-snake", "head-side-cough-slash", "ambulance", "truck-medical", "wheat-awn-circle-exclamation", "snowman", "mortar-pestle", "road-barrier", "school", "igloo", "joint", "angle-right", "horse", "q", "g", "notes-medical", "temperature-2", "temperature-half", "thermometer-2", "thermometer-half", "dong-sign", "capsules", "poo-bolt", "poo-storm", "face-frown-open", "frown-open", "hand-point-up", "money-bill", "bookmark", "align-justify", "umbrella-beach", "helmet-un", "bullseye", "bacon", "hand-point-down", "arrow-up-from-bracket", "folder-blank", "folder", "file-medical-alt", "file-waveform", "radiation", "chart-simple", "mars-stroke", "vial", "dashboard", "gauge-med", "gauge", "tachometer-alt-average", "magic-wand-sparkles", "wand-magic-sparkles", "e", "pen-alt", "pen-clip", "bridge-circle-exclamation", "user", "school-circle-check", "dumpster", "shuttle-van", "van-shuttle", "building-user", "caret-square-left", "square-caret-left", "highlighter", "key", "bullhorn", "globe", "synagogue", "person-half-dress", "road-bridge", "location-arrow", "c", "tablet-button", "building-lock", "pizza-slice", "money-bill-wave", "area-chart", "chart-area", "house-flag", "person-circle-minus", "ban", "cancel", "camera-rotate", "air-freshener", "spray-can-sparkles", "star", "repeat", "cross", "box", "venus-mars", "arrow-pointer", "mouse-pointer", "expand-arrows-alt", "maximize", "charging-station", "shapes", "triangle-circle-square", "random", "shuffle", "person-running", "running", "mobile-retro", "grip-lines-vertical", "spider", "hands-bound", "file-invoice-dollar", "plane-circle-exclamation", "x-ray", "spell-check", "slash", "computer-mouse", "mouse", "arrow-right-to-bracket", "sign-in", "shop-slash", "store-alt-slash", "server", "virus-covid-slash", "shop-lock", "hourglass-1", "hourglass-start", "blender-phone", "building-wheat", "person-breastfeeding", "right-to-bracket", "sign-in-alt", "venus", "passport", "heart-pulse", "heartbeat", "people-carry-box", "people-carry", "temperature-high", "microchip", "crown", "weight-hanging", "xmarks-lines", "file-prescription", "weight-scale", "weight", "user-friends", "user-group", "arrow-up-a-z", "sort-alpha-up", "chess-knight", "face-laugh-squint", "laugh-squint", "wheelchair", "arrow-circle-up", "circle-arrow-up", "toggle-on", "person-walking", "walking", "l", "fire", "bed-pulse", "procedures", "shuttle-space", "space-shuttle", "face-laugh", "laugh", "folder-open", "heart-circle-plus", "code-fork", "city", "microphone-alt", "microphone-lines", "pepper-hot", "unlock", "colon-sign", "headset", "store-slash", "road-circle-xmark", "user-minus", "mars-stroke-up", "mars-stroke-v", "champagne-glasses", "glass-cheers", "clipboard", "house-circle-exclamation", "file-arrow-up", "file-upload", "wifi-3", "wifi-strong", "wifi", "bath", "bathtub", "underline", "user-edit", "user-pen", "signature", "stroopwafel", "bold", "anchor-lock", "building-ngo", "manat-sign", "not-equal", "border-style", "border-top-left", "map-location-dot", "map-marked-alt", "jedi", "poll", "square-poll-vertical", "mug-hot", "battery-car", "car-battery", "gift", "dice-two", "chess-queen", "glasses", "chess-board", "building-circle-check", "person-chalkboard", "mars-stroke-h", "mars-stroke-right", "hand-back-fist", "hand-rock", "caret-square-up", "square-caret-up", "cloud-showers-water", "bar-chart", "chart-bar", "hands-bubbles", "hands-wash", "less-than-equal", "train", "eye-low-vision", "low-vision", "crow", "sailboat", "window-restore", "plus-square", "square-plus", "torii-gate", "frog", "bucket", "image", "microphone", "cow", "caret-up", "screwdriver", "folder-closed", "house-tsunami", "square-nfi", "arrow-up-from-ground-water", "glass-martini-alt", "martini-glass", "rotate-back", "rotate-backward", "rotate-left", "undo-alt", "columns", "table-columns", "lemon", "head-side-mask", "handshake", "gem", "dolly-box", "dolly", "smoking", "compress-arrows-alt", "minimize", "monument", "snowplow", "angle-double-right", "angles-right", "cannabis", "circle-play", "play-circle", "tablets", "ethernet", "eur", "euro-sign", "euro", "chair", "check-circle", "circle-check", "circle-stop", "stop-circle", "compass-drafting", "drafting-compass", "plate-wheat", "icicles", "person-shelter", "neuter", "id-badge", "marker", "face-laugh-beam", "laugh-beam", "helicopter-symbol", "universal-access", "chevron-circle-up", "circle-chevron-up", "lari-sign", "volcano", "person-walking-dashed-line-arrow-right", "gbp", "pound-sign", "sterling-sign", "viruses", "square-person-confined", "user-tie", "arrow-down-long", "long-arrow-down", "tent-arrow-down-to-line", "certificate", "mail-reply-all", "reply-all", "suitcase", "person-skating", "skating", "filter-circle-dollar", "funnel-dollar", "camera-retro", "arrow-circle-down", "circle-arrow-down", "arrow-right-to-file", "file-import", "external-link-square", "square-arrow-up-right", "box-open", "scroll", "spa", "location-pin-lock", "pause", "hill-avalanche", "temperature-0", "temperature-empty", "thermometer-0", "thermometer-empty", "bomb", "registered", "address-card", "contact-card", "vcard", "balance-scale-right", "scale-unbalanced-flip", "subscript", "diamond-turn-right", "directions", "burst", "house-laptop", "laptop-house", "face-tired", "tired", "money-bills", "smog", "crutch", "cloud-arrow-up", "cloud-upload-alt", "cloud-upload", "palette", "arrows-turn-right", "vest", "ferry", "arrows-down-to-people", "seedling", "sprout", "arrows-alt-h", "left-right", "boxes-packing", "arrow-circle-left", "circle-arrow-left", "group-arrows-rotate", "bowl-food", "candy-cane", "arrow-down-wide-short", "sort-amount-asc", "sort-amount-down", "cloud-bolt", "thunderstorm", "remove-format", "text-slash", "face-smile-wink", "smile-wink", "file-word", "file-powerpoint", "arrows-h", "arrows-left-right", "house-lock", "cloud-arrow-down", "cloud-download-alt", "cloud-download", "children", "blackboard", "chalkboard", "user-alt-slash", "user-large-slash", "envelope-open", "handshake-alt-slash", "handshake-simple-slash", "mattress-pillow", "guarani-sign", "arrows-rotate", "refresh", "sync", "fire-extinguisher", "cruzeiro-sign", "greater-than-equal", "shield-alt", "shield-halved", "atlas", "book-atlas", "virus", "envelope-circle-check", "layer-group", "arrows-to-dot", "archway", "heart-circle-check", "house-chimney-crack", "house-damage", "file-archive", "file-zipper", "square", "glass-martini", "martini-glass-empty", "couch", "cedi-sign", "italic", "church", "comments-dollar", "democrat", "z", "person-skiing", "skiing", "road-lock", "a", "temperature-arrow-down", "temperature-down", "feather-alt", "feather-pointed", "p", "snowflake", "newspaper", "ad", "rectangle-ad", "arrow-circle-right", "circle-arrow-right", "filter-circle-xmark", "locust", "sort", "unsorted", "list-1-2", "list-numeric", "list-ol", "person-dress-burst", "money-check-alt", "money-check-dollar", "vector-square", "bread-slice", "language", "face-kiss-wink-heart", "kiss-wink-heart", "filter", "question", "file-signature", "arrows-alt", "up-down-left-right", "house-chimney-user", "hand-holding-heart", "puzzle-piece", "money-check", "star-half-alt", "star-half-stroke", "code", "glass-whiskey", "whiskey-glass", "building-circle-exclamation", "magnifying-glass-chart", "arrow-up-right-from-square", "external-link", "cubes-stacked", "krw", "won-sign", "won", "virus-covid", "austral-sign", "f", "leaf", "road", "cab", "taxi", "person-circle-plus", "chart-pie", "pie-chart", "bolt-lightning", "sack-xmark", "file-excel", "file-contract", "fish-fins", "building-flag", "face-grin-beam", "grin-beam", "object-ungroup", "poop", "location-pin", "map-marker", "kaaba", "toilet-paper", "hard-hat", "hat-hard", "helmet-safety", "eject", "arrow-alt-circle-right", "circle-right", "plane-circle-check", "face-rolling-eyes", "meh-rolling-eyes", "object-group", "chart-line", "line-chart", "mask-ventilator", "arrow-right", "map-signs", "signs-post", "cash-register", "person-circle-question", "h", "tarp", "screwdriver-wrench", "tools", "arrows-to-eye", "plug-circle-bolt", "heart", "mars-and-venus", "home-user", "house-user", "dumpster-fire", "house-crack", "cocktail", "martini-glass-citrus", "face-surprise", "surprise", "bottle-water", "circle-pause", "pause-circle", "toilet-paper-slash", "apple-alt", "apple-whole", "kitchen-set", "r", "temperature-1", "temperature-quarter", "thermometer-1", "thermometer-quarter", "cube", "bitcoin-sign", "shield-dog", "solar-panel", "lock-open", "elevator", "money-bill-transfer", "money-bill-trend-up", "house-flood-water-circle-arrow-right", "poll-h", "square-poll-horizontal", "circle", "backward-fast", "fast-backward", "recycle", "user-astronaut", "plane-slash", "trademark", "basketball-ball", "basketball", "satellite-dish", "arrow-alt-circle-up", "circle-up", "mobile-alt", "mobile-screen-button", "volume-high", "volume-up", "users-rays", "wallet", "clipboard-check", "file-audio", "burger", "hamburger", "wrench", "bugs", "rupee-sign", "rupee", "file-image", "circle-question", "question-circle", "plane-departure", "handshake-slash", "book-bookmark", "code-branch", "hat-cowboy", "bridge", "phone-alt", "phone-flip", "truck-front", "cat", "anchor-circle-exclamation", "truck-field", "route", "clipboard-question", "panorama", "comment-medical", "teeth-open", "file-circle-minus", "tags", "wine-glass", "fast-forward", "forward-fast", "face-meh-blank", "meh-blank", "parking", "square-parking", "house-signal", "bars-progress", "tasks-alt", "faucet-drip", "cart-flatbed", "dolly-flatbed", "ban-smoking", "smoking-ban", "terminal", "mobile-button", "house-medical-flag", "basket-shopping", "shopping-basket", "tape", "bus-alt", "bus-simple", "eye", "face-sad-cry", "sad-cry", "audio-description", "person-military-to-person", "file-shield", "user-slash", "pen", "tower-observation", "file-code", "signal-5", "signal-perfect", "signal", "bus", "heart-circle-xmark", "home-lg", "house-chimney", "window-maximize", "face-frown", "frown", "prescription", "shop", "store-alt", "floppy-disk", "save", "vihara", "balance-scale-left", "scale-unbalanced", "sort-asc", "sort-up", "comment-dots", "commenting", "plant-wilt", "diamond", "face-grin-squint", "grin-squint", "hand-holding-dollar", "hand-holding-usd", "bacterium", "hand-pointer", "drum-steelpan", "hand-scissors", "hands-praying", "praying-hands", "arrow-right-rotate", "arrow-rotate-forward", "arrow-rotate-right", "redo", "biohazard", "location-crosshairs", "location", "mars-double", "child-dress", "users-between-lines", "lungs-virus", "face-grin-tears", "grin-tears", "phone", "calendar-times", "calendar-xmark", "child-reaching", "head-side-virus", "user-cog", "user-gear", "arrow-up-1-9", "sort-numeric-up", "door-closed", "shield-virus", "dice-six", "mosquito-net", "bridge-water", "person-booth", "text-width", "hat-wizard", "pen-fancy", "digging", "person-digging", "trash", "gauge-simple-med", "gauge-simple", "tachometer-average", "book-medical", "poo", "quote-right-alt", "quote-right", "shirt", "t-shirt", "tshirt", "cubes", "divide", "tenge-sign", "tenge", "headphones", "hands-holding", "hands-clapping", "republican", "arrow-left", "person-circle-xmark", "ruler", "align-left", "dice-d6", "restroom", "j", "users-viewfinder", "file-video", "external-link-alt", "up-right-from-square", "table-cells", "th", "file-pdf", "bible", "book-bible", "o", "medkit", "suitcase-medical", "user-secret", "otter", "female", "person-dress", "comment-dollar", "briefcase-clock", "business-time", "table-cells-large", "th-large", "book-tanakh", "tanakh", "phone-volume", "volume-control-phone", "hat-cowboy-side", "clipboard-user", "child", "lira-sign", "satellite", "plane-lock", "tag", "comment", "birthday-cake", "cake-candles", "cake", "envelope", "angle-double-up", "angles-up", "paperclip", "arrow-right-to-city", "ribbon", "lungs", "arrow-up-9-1", "sort-numeric-up-alt", "litecoin-sign", "border-none", "circle-nodes", "parachute-box", "indent", "truck-field-un", "hourglass-empty", "hourglass", "mountain", "user-doctor", "user-md", "circle-info", "info-circle", "cloud-meatball", "camera-alt", "camera", "square-virus", "meteor", "car-on", "sleigh", "arrow-down-1-9", "sort-numeric-asc", "sort-numeric-down", "hand-holding-droplet", "hand-holding-water", "water", "calendar-check", "braille", "prescription-bottle-alt", "prescription-bottle-medical", "landmark", "truck", "crosshairs", "person-cane", "tent", "vest-patches", "check-double", "arrow-down-a-z", "sort-alpha-asc", "sort-alpha-down", "money-bill-wheat", "cookie", "arrow-left-rotate", "arrow-rotate-back", "arrow-rotate-backward", "arrow-rotate-left", "undo", "hard-drive", "hdd", "face-grin-squint-tears", "grin-squint-tears", "dumbbell", "list-alt", "rectangle-list", "tarp-droplet", "house-medical-circle-check", "person-skiing-nordic", "skiing-nordic", "calendar-plus", "plane-arrival", "arrow-alt-circle-left", "circle-left", "subway", "train-subway", "chart-gantt", "indian-rupee-sign", "indian-rupee", "inr", "crop-alt", "crop-simple", "money-bill-1", "money-bill-alt", "left-long", "long-arrow-alt-left", "dna", "virus-slash", "minus", "subtract", "chess", "arrow-left-long", "long-arrow-left", "plug-circle-check", "street-view", "franc-sign", "volume-off", "american-sign-language-interpreting", "asl-interpreting", "hands-american-sign-language-interpreting", "hands-asl-interpreting", "cog", "gear", "droplet-slash", "tint-slash", "mosque", "mosquito", "star-of-david", "person-military-rifle", "cart-shopping", "shopping-cart", "vials", "plug-circle-plus", "place-of-worship", "grip-vertical", "arrow-turn-up", "level-up", "u", "square-root-alt", "square-root-variable", "clock-four", "clock", "backward-step", "step-backward", "pallet", "faucet", "baseball-bat-ball", "s", "timeline", "keyboard", "caret-down", "clinic-medical", "house-chimney-medical", "temperature-3", "temperature-three-quarters", "thermometer-3", "thermometer-three-quarters", "mobile-android-alt", "mobile-screen", "plane-up", "piggy-bank", "battery-3", "battery-half", "mountain-city", "coins", "khanda", "sliders-h", "sliders", "folder-tree", "network-wired", "map-pin", "hamsa", "cent-sign", "flask", "person-pregnant", "wand-sparkles", "ellipsis-v", "ellipsis-vertical", "ticket", "power-off", "long-arrow-alt-right", "right-long", "flag-usa", "laptop-file", "teletype", "tty", "diagram-next", "person-rifle", "house-medical-circle-exclamation", "closed-captioning", "hiking", "person-hiking", "venus-double", "images", "calculator", "people-pulling", "n", "cable-car", "tram", "cloud-rain", "building-circle-xmark", "ship", "arrows-down-to-line", "download", "face-grin", "grin", "backspace", "delete-left", "eye-dropper-empty", "eye-dropper", "eyedropper", "file-circle-check", "forward", "mobile-android", "mobile-phone", "mobile", "face-meh", "meh", "align-center", "book-dead", "book-skull", "drivers-license", "id-card", "dedent", "outdent", "heart-circle-exclamation", "home-alt", "home-lg-alt", "home", "house", "calendar-week", "laptop-medical", "b", "file-medical", "dice-one", "kiwi-bird", "arrow-right-arrow-left", "exchange", "redo-alt", "rotate-forward", "rotate-right", "cutlery", "utensils", "arrow-up-wide-short", "sort-amount-up", "mill-sign", "bowl-rice", "skull", "broadcast-tower", "tower-broadcast", "truck-pickup", "long-arrow-alt-up", "up-long", "stop", "code-merge", "upload", "hurricane", "mound", "toilet-portable", "compact-disc", "file-arrow-down", "file-download", "caravan", "shield-cat", "bolt", "zap", "glass-water", "oil-well", "vault", "mars", "toilet", "plane-circle-xmark", "cny", "jpy", "rmb", "yen-sign", "yen", "rouble", "rub", "ruble-sign", "ruble", "sun", "guitar", "face-laugh-wink", "laugh-wink", "horse-head", "bore-hole", "industry", "arrow-alt-circle-down", "circle-down", "arrows-turn-to-dots", "florin-sign", "arrow-down-short-wide", "sort-amount-desc", "sort-amount-down-alt", "less-than", "angle-down", "car-tunnel", "head-side-cough", "grip-lines", "thumbs-down", "user-lock", "arrow-right-long", "long-arrow-right", "anchor-circle-xmark", "ellipsis-h", "ellipsis", "chess-pawn", "first-aid", "kit-medical", "person-through-window", "toolbox", "hands-holding-circle", "bug", "credit-card-alt", "credit-card", "automobile", "car", "hand-holding-hand", "book-open-reader", "book-reader", "mountain-sun", "arrows-left-right-to-line", "dice-d20", "truck-droplet", "file-circle-xmark", "temperature-arrow-up", "temperature-up", "medal", "bed", "h-square", "square-h", "podcast", "temperature-4", "temperature-full", "thermometer-4", "thermometer-full", "bell", "superscript", "plug-circle-xmark", "star-of-life", "phone-slash", "paint-roller", "hands-helping", "handshake-angle", "location-dot", "map-marker-alt", "file", "greater-than", "person-swimming", "swimmer", "arrow-down", "droplet", "tint", "eraser", "earth-america", "earth-americas", "earth", "globe-americas", "person-burst", "dove", "battery-0", "battery-empty", "socks", "inbox", "section", "gauge-high", "tachometer-alt-fast", "tachometer-alt", "envelope-open-text", "hospital-alt", "hospital-wide", "hospital", "wine-bottle", "chess-rook", "bars-staggered", "reorder", "stream", "dharmachakra", "hotdog", "blind", "person-walking-with-cane", "drum", "ice-cream", "heart-circle-bolt", "fax", "paragraph", "check-to-slot", "vote-yea", "star-half", "boxes-alt", "boxes-stacked", "boxes", "chain", "link", "assistive-listening-systems", "ear-listen", "tree-city", "play", "font", "rupiah-sign", "magnifying-glass", "search", "ping-pong-paddle-ball", "table-tennis-paddle-ball", "table-tennis", "diagnoses", "person-dots-from-line", "trash-can-arrow-up", "trash-restore-alt", "naira-sign", "cart-arrow-down", "walkie-talkie", "file-edit", "file-pen", "receipt", "pen-square", "pencil-square", "square-pen", "suitcase-rolling", "person-circle-exclamation", "chevron-down", "battery-5", "battery-full", "battery", "skull-crossbones", "code-compare", "list-dots", "list-ul", "school-lock", "tower-cell", "down-long", "long-arrow-alt-down", "ranking-star", "chess-king", "person-harassing", "brazilian-real-sign", "landmark-alt", "landmark-dome", "arrow-up", "television", "tv-alt", "tv", "shrimp", "list-check", "tasks", "jug-detergent", "circle-user", "user-circle", "user-shield", "wind", "car-burst", "car-crash", "y", "person-snowboarding", "snowboarding", "shipping-fast", "truck-fast", "fish", "user-graduate", "adjust", "circle-half-stroke", "clapperboard", "circle-radiation", "radiation-alt", "baseball-ball", "baseball", "jet-fighter-up", "diagram-project", "project-diagram", "copy", "volume-mute", "volume-times", "volume-xmark", "hand-sparkles", "grip-horizontal", "grip", "share-from-square", "share-square", "child-combatant", "child-rifle", "gun", "phone-square", "square-phone", "add", "plus", "expand", "computer", "close", "multiply", "remove", "times", "xmark", "arrows-up-down-left-right", "arrows", "chalkboard-teacher", "chalkboard-user", "peso-sign", "building-shield", "baby", "users-line", "quote-left-alt", "quote-left", "tractor", "trash-arrow-up", "trash-restore", "arrow-down-up-lock", "lines-leaning", "ruler-combined", "copyright", "equals", "blender", "teeth", "ils", "shekel-sign", "shekel", "sheqel-sign", "sheqel", "map", "rocket", "photo-film", "photo-video", "folder-minus", "store", "arrow-trend-up", "plug-circle-minus", "sign-hanging", "sign", "bezier-curve", "bell-slash", "tablet-android", "tablet", "school-flag", "fill", "angle-up", "drumstick-bite", "holly-berry", "chevron-left", "bacteria", "hand-lizard", "notdef", "disease", "briefcase-medical", "genderless", "chevron-right", "retweet", "car-alt", "car-rear", "pump-soap", "video-slash", "battery-2", "battery-quarter", "radio", "baby-carriage", "carriage-baby", "traffic-light", "thermometer", "vr-cardboard", "hand-middle-finger", "percent", "percentage", "truck-moving", "glass-water-droplet", "display", "face-smile", "smile", "thumb-tack", "thumbtack", "trophy", "person-praying", "pray", "hammer", "hand-peace", "rotate", "sync-alt", "spinner", "robot", "peace", "cogs", "gears", "warehouse", "arrow-up-right-dots", "splotch", "face-grin-hearts", "grin-hearts", "dice-four", "sim-card", "transgender-alt", "transgender", "mercury", "arrow-turn-down", "level-down", "person-falling-burst", "award", "ticket-alt", "ticket-simple", "building", "angle-double-left", "angles-left", "qrcode", "clock-rotate-left", "history", "face-grin-beam-sweat", "grin-beam-sweat", "arrow-right-from-file", "file-export", "shield-blank", "shield", "arrow-up-short-wide", "sort-amount-up-alt", "house-medical", "golf-ball-tee", "golf-ball", "chevron-circle-left", "circle-chevron-left", "house-chimney-window", "pen-nib", "tent-arrow-turn-left", "tents", "magic", "wand-magic", "dog", "carrot", "moon", "wine-glass-alt", "wine-glass-empty", "cheese", "yin-yang", "music", "code-commit", "temperature-low", "biking", "person-biking", "broom", "shield-heart", "gopuram", "earth-oceania", "globe-oceania", "square-xmark", "times-square", "xmark-square", "hashtag", "expand-alt", "up-right-and-down-left-from-center", "oil-can", "t", "hippo", "chart-column", "infinity", "vial-circle-check", "person-arrow-down-to-line", "voicemail", "fan", "person-walking-luggage", "arrows-alt-v", "up-down", "cloud-moon-rain", "calendar", "trailer", "bahai", "haykal", "sd-card", "dragon", "shoe-prints", "circle-plus", "plus-circle", "face-grin-tongue-wink", "grin-tongue-wink", "hand-holding", "plug-circle-exclamation", "chain-broken", "chain-slash", "link-slash", "unlink", "clone", "person-walking-arrow-loop-left", "arrow-up-z-a", "sort-alpha-up-alt", "fire-alt", "fire-flame-curved", "tornado", "file-circle-plus", "book-quran", "quran", "anchor", "border-all", "angry", "face-angry", "cookie-bite", "arrow-trend-down", "feed", "rss", "draw-polygon", "balance-scale", "scale-balanced", "gauge-simple-high", "tachometer-fast", "tachometer", "shower", "desktop-alt", "desktop", "m", "table-list", "th-list", "comment-sms", "sms", "book", "user-plus", "check", "battery-4", "battery-three-quarters", "house-circle-check", "angle-left", "diagram-successor", "truck-arrow-right", "arrows-split-up-and-left", "fist-raised", "hand-fist", "cloud-moon", "briefcase", "person-falling", "image-portrait", "portrait", "user-tag", "rug", "earth-europe", "globe-europe", "cart-flatbed-suitcase", "luggage-cart", "rectangle-times", "rectangle-xmark", "times-rectangle", "window-close", "baht-sign", "book-open", "book-journal-whills", "journal-whills", "handcuffs", "exclamation-triangle", "triangle-exclamation", "warning", "database", "arrow-turn-right", "mail-forward", "share", "bottle-droplet", "mask-face", "hill-rockslide", "exchange-alt", "right-left", "paper-plane", "road-circle-exclamation", "dungeon", "align-right", "money-bill-1-wave", "money-bill-wave-alt", "life-ring", "hands", "sign-language", "signing", "calendar-day", "ladder-water", "swimming-pool", "water-ladder", "arrows-up-down", "arrows-v", "face-grimace", "grimace", "wheelchair-alt", "wheelchair-move", "level-down-alt", "turn-down", "person-walking-arrow-right", "envelope-square", "square-envelope", "dice", "bowling-ball", "brain", "band-aid", "bandage", "calendar-minus", "circle-xmark", "times-circle", "xmark-circle", "gifts", "hotel", "earth-asia", "globe-asia", "id-card-alt", "id-card-clip", "magnifying-glass-plus", "search-plus", "thumbs-up", "user-clock", "allergies", "hand-dots", "file-invoice", "window-minimize", "coffee", "mug-saucer", "brush", "mask", "magnifying-glass-minus", "search-minus", "ruler-vertical", "user-alt", "user-large", "train-tram", "user-nurse", "syringe", "cloud-sun", "stopwatch-20", "square-full", "magnet", "jar", "note-sticky", "sticky-note", "bug-slash", "arrow-up-from-water-pump", "bone", "user-injured", "face-sad-tear", "sad-tear", "plane", "tent-arrows-down", "exclamation", "arrows-spin", "print", "try", "turkish-lira-sign", "turkish-lira", "dollar-sign", "dollar", "usd", "x", "magnifying-glass-dollar", "search-dollar", "users-cog", "users-gear", "person-military-pointing", "bank", "building-columns", "institution", "museum", "university", "umbrella", "trowel", "d", "stapler", "masks-theater", "theater-masks", "kip-sign", "hand-point-left", "handshake-alt", "handshake-simple", "fighter-jet", "jet-fighter", "share-alt-square", "square-share-nodes", "barcode", "plus-minus", "video-camera", "video", "graduation-cap", "mortar-board", "hand-holding-medical", "person-circle-check", "level-up-alt", "turn-up", "monero", "hooli", "yelp", "cc-visa", "lastfm", "shopware", "creative-commons-nc", "aws", "redhat", "yoast", "cloudflare", "ups", "wpexplorer", "dyalog", "bity", "stackpath", "buysellads", "first-order", "modx", "guilded", "vnv", "js-square", "square-js", "microsoft", "qq", "orcid", "java", "invision", "creative-commons-pd-alt", "centercode", "glide-g", "drupal", "hire-a-helper", "creative-commons-by", "unity", "whmcs", "rocketchat", "vk", "untappd", "mailchimp", "css3-alt", "reddit-square", "square-reddit", "vimeo-v", "contao", "square-font-awesome", "deskpro", "sistrix", "instagram-square", "square-instagram", "battle-net", "the-red-yeti", "hacker-news-square", "square-hacker-news", "edge", "threads", "napster", "snapchat-square", "square-snapchat", "google-plus-g", "artstation", "markdown", "sourcetree", "google-plus", "diaspora", "foursquare", "stack-overflow", "github-alt", "phoenix-squadron", "pagelines", "algolia", "red-river", "creative-commons-sa", "safari", "google", "font-awesome-alt", "square-font-awesome-stroke", "atlassian", "linkedin-in", "digital-ocean", "nimblr", "chromecast", "evernote", "hacker-news", "creative-commons-sampling", "adversal", "creative-commons", "watchman-monitoring", "fonticons", "weixin", "shirtsinbulk", "codepen", "git-alt", "lyft", "rev", "windows", "wizards-of-the-coast", "square-viadeo", "viadeo-square", "meetup", "centos", "adn", "cloudsmith", "pied-piper-alt", "dribbble-square", "square-dribbble", "codiepie", "node", "mix", "steam", "cc-apple-pay", "scribd", "debian", "openid", "instalod", "expeditedssl", "sellcast", "square-twitter", "twitter-square", "r-project", "delicious", "freebsd", "vuejs", "accusoft", "ioxhost", "fonticons-fi", "app-store", "cc-mastercard", "itunes-note", "golang", "kickstarter", "grav", "weibo", "uncharted", "firstdraft", "square-youtube", "youtube-square", "wikipedia-w", "rendact", "wpressr", "angellist", "galactic-republic", "nfc-directional", "skype", "joget", "fedora", "stripe-s", "meta", "laravel", "hotjar", "bluetooth-b", "sticker-mule", "creative-commons-zero", "hips", "behance", "reddit", "discord", "chrome", "app-store-ios", "cc-discover", "wpbeginner", "confluence", "mdb", "dochub", "accessible-icon", "ebay", "amazon", "unsplash", "yarn", "square-steam", "steam-square", "500px", "square-vimeo", "vimeo-square", "asymmetrik", "font-awesome-flag", "font-awesome-logo-full", "font-awesome", "gratipay", "apple", "hive", "gitkraken", "keybase", "apple-pay", "padlet", "amazon-pay", "github-square", "square-github", "stumbleupon", "fedex", "phoenix-framework", "shopify", "neos", "square-threads", "hackerrank", "researchgate", "swift", "angular", "speakap", "angrycreative", "y-combinator", "empire", "envira", "gitlab-square", "square-gitlab", "studiovinari", "pied-piper", "wordpress", "product-hunt", "firefox", "linode", "goodreads", "odnoklassniki-square", "square-odnoklassniki", "jsfiddle", "sith", "themeisle", "page4", "hashnode", "react", "cc-paypal", "squarespace", "cc-stripe", "creative-commons-share", "bitcoin", "keycdn", "opera", "itch-io", "umbraco", "galactic-senate", "ubuntu", "draft2digital", "stripe", "houzz", "gg", "dhl", "pinterest-square", "square-pinterest", "xing", "blackberry", "creative-commons-pd", "playstation", "quinscape", "less", "blogger-b", "opencart", "vine", "paypal", "gitlab", "typo3", "reddit-alien", "yahoo", "dailymotion", "affiliatetheme", "pied-piper-pp", "bootstrap", "odnoklassniki", "nfc-symbol", "ethereum", "speaker-deck", "creative-commons-nc-eu", "patreon", "avianex", "ello", "gofore", "bimobject", "facebook-f", "google-plus-square", "square-google-plus", "mandalorian", "first-order-alt", "osi", "google-wallet", "d-and-d-beyond", "periscope", "fulcrum", "cloudscale", "forumbee", "mizuni", "schlix", "square-xing", "xing-square", "bandcamp", "wpforms", "cloudversify", "usps", "megaport", "magento", "spotify", "optin-monster", "fly", "aviato", "itunes", "cuttlefish", "blogger", "flickr", "viber", "soundcloud", "digg", "tencent-weibo", "symfony", "maxcdn", "etsy", "facebook-messenger", "audible", "think-peaks", "bilibili", "erlang", "x-twitter", "cotton-bureau", "dashcube", "42-group", "innosoft", "stack-exchange", "elementor", "pied-piper-square", "square-pied-piper", "creative-commons-nd", "palfed", "superpowers", "resolving", "xbox", "searchengin", "tiktok", "facebook-square", "square-facebook", "renren", "linux", "glide", "linkedin", "hubspot", "deploydog", "twitch", "ravelry", "mixer", "lastfm-square", "square-lastfm", "vimeo", "mendeley", "uniregistry", "figma", "creative-commons-remix", "cc-amazon-pay", "dropbox", "instagram", "cmplid", "facebook", "gripfire", "jedi-order", "uikit", "fort-awesome-alt", "phabricator", "ussunnah", "earlybirds", "trade-federation", "autoprefixer", "whatsapp", "slideshare", "google-play", "viadeo", "line", "google-drive", "servicestack", "simplybuilt", "bitbucket", "imdb", "deezer", "raspberry-pi", "jira", "docker", "screenpal", "bluetooth", "gitter", "d-and-d", "microblog", "cc-diners-club", "gg-circle", "pied-piper-hat", "kickstarter-k", "yandex", "readme", "html5", "sellsy", "sass", "wirsindhandwerk", "wsh", "buromobelexperte", "salesforce", "octopus-deploy", "medapps", "ns8", "pinterest-p", "apper", "fort-awesome", "waze", "cc-jcb", "snapchat-ghost", "snapchat", "fantasy-flight-games", "rust", "wix", "behance-square", "square-behance", "supple", "rebel", "css3", "staylinked", "kaggle", "space-awesome", "deviantart", "cpanel", "goodreads-g", "git-square", "square-git", "square-tumblr", "tumblr-square", "trello", "creative-commons-nc-jp", "get-pocket", "perbyte", "grunt", "weebly", "connectdevelop", "leanpub", "black-tie", "themeco", "python", "android", "bots", "free-code-camp", "hornbill", "js", "ideal", "git", "dev", "sketch", "yandex-international", "cc-amex", "uber", "github", "php", "alipay", "youtube", "skyatlas", "firefox-browser", "replyd", "suse", "jenkins", "twitter", "rockrms", "pinterest", "buffer", "npm", "yammer", "btc", "dribbble", "stumbleupon-circle", "internet-explorer", "stubber", "telegram-plane", "telegram", "old-republic", "odysee", "square-whatsapp", "whatsapp-square", "node-js", "edge-legacy", "slack-hash", "slack", "medrt", "usb", "tumblr", "vaadin", "quora", "square-x-twitter", "reacteurope", "medium-m", "medium", "amilia", "mixcloud", "flipboard", "viacoin", "critical-role", "sitrox", "discourse", "joomla", "mastodon", "airbnb", "wolf-pack-battalion", "buy-n-large", "gulp", "creative-commons-sampling-plus", "strava", "ember", "canadian-maple-leaf", "teamspeak", "pushed", "wordpress-simple", "nutritionix", "wodu", "google-pay", "intercom", "zhihu", "korvue", "pix", "steam-symbol", "glass", "envelope-o", "star-o", "trash-o", "file-o", "clock-o", "arrow-circle-o-down", "arrow-circle-o-up", "play-circle-o", "picture-o", "photo", "pencil-square-o", "share-square-o", "check-square-o", "times-circle-o", "check-circle-o", "bar-chart-o", "thumbs-o-up", "thumbs-o-down", "heart-o", "linkedin-square", "lemon-o", "square-o", "bookmark-o", "hdd-o", "hand-o-right", "hand-o-left", "hand-o-up", "hand-o-down", "group", "files-o", "floppy-o", "money", "comment-o", "comments-o", "flash", "lightbulb-o", "bell-o", "file-text-o", "building-o", "hospital-o", "circle-o", "folder-o", "folder-open-o", "smile-o", "frown-o", "meh-o", "keyboard-o", "flag-o", "star-half-o", "star-half-empty", "star-half-full", "calendar-o", "minus-square-o", "caret-square-o-down", "toggle-down", "caret-square-o-up", "toggle-up", "caret-square-o-right", "toggle-right", "youtube-play", "bitbucket-square", "gittip", "sun-o", "moon-o", "arrow-circle-o-right", "arrow-circle-o-left", "caret-square-o-left", "toggle-left", "dot-circle-o", "plus-square-o", "file-pdf-o", "file-word-o", "file-excel-o", "file-powerpoint-o", "file-image-o", "file-photo-o", "file-picture-o", "file-archive-o", "file-zip-o", "file-audio-o", "file-sound-o", "file-video-o", "file-movie-o", "file-code-o", "life-bouy", "life-buoy", "life-saver", "support", "circle-o-notch", "ra", "resistance", "ge", "y-combinator-square", "yc-square", "wechat", "send", "paper-plane-o", "send-o", "circle-thin", "futbol-o", "soccer-ball-o", "newspaper-o", "bell-slash-o", "cc", "intersex", "facebook-official", "yc", "battery-1", "sticky-note-o", "hourglass-o", "hand-rock-o", "hand-grab-o", "hand-paper-o", "hand-stop-o", "hand-scissors-o", "hand-lizard-o", "hand-spock-o", "hand-pointer-o", "hand-peace-o", "calendar-plus-o", "calendar-minus-o", "calendar-times-o", "calendar-check-o", "map-o", "commenting-o", "pause-circle-o", "stop-circle-o", "question-circle-o", "google-plus-official", "google-plus-circle", "fa", "handshake-o", "envelope-open-o", "address-book-o", "address-card-o", "vcard-o", "user-circle-o", "user-o", "id-card-o", "drivers-license-o", "s15", "window-close-o", "times-rectangle-o", "eercast", "snowflake-o"]
    })),
    /*!
     * Chart.js
     * http://chartjs.org/
     * Version: 1.0.2
     *
     * Copyright 2015 Nick Downie
     * Released under the MIT license
     * https://github.com/nnnick/Chart.js/blob/master/LICENSE.md
     */
    function () {
        "use strict";
        var e = this,
            t = e.Chart,
            i = function (e) {
                this.canvas = e.canvas, this.ctx = e;
                var t = function (e, t) {
                    return e["offset" + t] ? e["offset" + t] : document.defaultView.getComputedStyle(e).getPropertyValue(t)
                },
                    i = this.width = t(e.canvas, "Width"),
                    a = this.height = t(e.canvas, "Height");
                e.canvas.width = i, e.canvas.height = a;
                i = this.width = e.canvas.width, a = this.height = e.canvas.height;
                return this.aspectRatio = this.width / this.height, n.retinaScale(this), this
            };
        i.defaults = {
            global: {
                animation: !0,
                animationSteps: 60,
                animationEasing: "easeOutQuart",
                showScale: !0,
                scaleOverride: !1,
                scaleSteps: null,
                scaleStepWidth: null,
                scaleStartValue: null,
                scaleLineColor: "rgba(0,0,0,.1)",
                scaleLineWidth: 1,
                scaleShowLabels: !0,
                scaleLabel: "<%=value%>",
                scaleIntegersOnly: !0,
                scaleBeginAtZero: !1,
                scaleFontFamily: "'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",
                scaleFontSize: 12,
                scaleFontStyle: "normal",
                scaleFontColor: "#666",
                responsive: !1,
                maintainAspectRatio: !0,
                showTooltips: !0,
                customTooltips: !1,
                tooltipEvents: ["mousemove", "touchstart", "touchmove", "mouseout"],
                tooltipFillColor: "rgba(0,0,0,0.8)",
                tooltipFontFamily: "'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",
                tooltipFontSize: 14,
                tooltipFontStyle: "normal",
                tooltipFontColor: "#fff",
                tooltipTitleFontFamily: "'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",
                tooltipTitleFontSize: 14,
                tooltipTitleFontStyle: "bold",
                tooltipTitleFontColor: "#fff",
                tooltipYPadding: 6,
                tooltipXPadding: 6,
                tooltipCaretSize: 8,
                tooltipCornerRadius: 6,
                tooltipXOffset: 10,
                tooltipTemplate: "<%if (label){%><%=label%>: <%}%><%= value %>",
                multiTooltipTemplate: "<%= value %>",
                multiTooltipKeyBackground: "#fff",
                onAnimationProgress: function () { },
                onAnimationComplete: function () { }
            }
        }, i.types = {};
        var n = i.helpers = {},
            a = n.each = function (e, t, i) {
                var n = Array.prototype.slice.call(arguments, 3);
                if (e)
                    if (e.length === +e.length) {
                        var a;
                        for (a = 0; a < e.length; a++) t.apply(i, [e[a], a].concat(n))
                    } else
                        for (var s in e) t.apply(i, [e[s], s].concat(n))
            },
            s = n.clone = function (e) {
                var t = {};
                return a(e, (function (i, n) {
                    e.hasOwnProperty(n) && (t[n] = i)
                })), t
            },
            o = n.extend = function (e) {
                return a(Array.prototype.slice.call(arguments, 1), (function (t) {
                    a(t, (function (i, n) {
                        t.hasOwnProperty(n) && (e[n] = i)
                    }))
                })), e
            },
            r = n.merge = function () {
                var e = Array.prototype.slice.call(arguments, 0);
                return e.unshift({}), o.apply(null, e)
            },
            l = n.indexOf = function (e, t) {
                if (Array.prototype.indexOf) return e.indexOf(t);
                for (var i = 0; i < e.length; i++)
                    if (e[i] === t) return i;
                return -1
            },
            c = (n.where = function (e, t) {
                var i = [];
                return n.each(e, (function (e) {
                    t(e) && i.push(e)
                })), i
            }, n.findNextWhere = function (e, t, i) {
                i || (i = -1);
                for (var n = i + 1; n < e.length; n++) {
                    var a = e[n];
                    if (t(a)) return a
                }
            }, n.findPreviousWhere = function (e, t, i) {
                i || (i = e.length);
                for (var n = i - 1; n >= 0; n--) {
                    var a = e[n];
                    if (t(a)) return a
                }
            }, n.inherits = function (e) {
                var t = this,
                    i = e && e.hasOwnProperty("constructor") ? e.constructor : function () {
                        return t.apply(this, arguments)
                    },
                    n = function () {
                        this.constructor = i
                    };
                return n.prototype = t.prototype, i.prototype = new n, i.extend = c, e && o(i.prototype, e), i.__super__ = t.prototype, i
            }),
            d = n.noop = function () { },
            p = n.uid = function () {
                var e = 0;
                return function () {
                    return "chart-" + e++
                }
            }(),
            u = n.warn = function (e) {
                window.console && "function" == typeof window.console.warn && console.warn(e)
            },
            h = n.amd = "function" == typeof define && define.amd,
            f = n.isNumber = function (e) {
                return !isNaN(parseFloat(e)) && isFinite(e)
            },
            m = n.max = function (e) {
                return Math.max.apply(Math, e)
            },
            g = n.min = function (e) {
                return Math.min.apply(Math, e)
            },
            v = (n.cap = function (e, t, i) {
                if (f(t)) {
                    if (e > t) return t
                } else if (f(i) && i > e) return i;
                return e
            }, n.getDecimalPlaces = function (e) {
                return e % 1 != 0 && f(e) ? e.toString().split(".")[1].length : 0
            }),
            b = n.radians = function (e) {
                return e * (Math.PI / 180)
            },
            y = (n.getAngleFromPoint = function (e, t) {
                var i = t.x - e.x,
                    n = t.y - e.y,
                    a = Math.sqrt(i * i + n * n),
                    s = 2 * Math.PI + Math.atan2(n, i);
                return 0 > i && 0 > n && (s += 2 * Math.PI), {
                    angle: s,
                    distance: a
                }
            }, n.aliasPixel = function (e) {
                return e % 2 == 0 ? 0 : .5
            }),
            w = (n.splineCurve = function (e, t, i, n) {
                var a = Math.sqrt(Math.pow(t.x - e.x, 2) + Math.pow(t.y - e.y, 2)),
                    s = Math.sqrt(Math.pow(i.x - t.x, 2) + Math.pow(i.y - t.y, 2)),
                    o = n * a / (a + s),
                    r = n * s / (a + s);
                return {
                    inner: {
                        x: t.x - o * (i.x - e.x),
                        y: t.y - o * (i.y - e.y)
                    },
                    outer: {
                        x: t.x + r * (i.x - e.x),
                        y: t.y + r * (i.y - e.y)
                    }
                }
            }, n.calculateOrderOfMagnitude = function (e) {
                return Math.floor(Math.log(e) / Math.LN10)
            }),
            _ = (n.calculateScaleRange = function (e, t, i, n, a) {
                var s = Math.floor(t / (1.5 * i)),
                    o = 2 >= s,
                    r = m(e),
                    l = g(e);
                r === l && (r += .5, l >= .5 && !n ? l -= .5 : r += .5);
                for (var c = Math.abs(r - l), d = w(c), p = Math.ceil(r / (1 * Math.pow(10, d))) * Math.pow(10, d), u = n ? 0 : Math.floor(l / (1 * Math.pow(10, d))) * Math.pow(10, d), h = p - u, f = Math.pow(10, d), v = Math.round(h / f);
                    (v > s || s > 2 * v) && !o;)
                    if (v > s) f *= 2, (v = Math.round(h / f)) % 1 != 0 && (o = !0);
                    else if (a && d >= 0) {
                        if (f / 2 % 1 != 0) break;
                        f /= 2, v = Math.round(h / f)
                    } else f /= 2, v = Math.round(h / f);
                return o && (f = h / (v = 2)), {
                    steps: v,
                    stepValue: f,
                    min: u,
                    max: u + v * f
                }
            }, n.template = function (e, t) {
                if (e instanceof Function) return e(t);
                var i = {};
                return function (e, t) {
                    var n = /\W/.test(e) ? new Function("obj", "var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('" + e.replace(/[\r\t\n]/g, " ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g, "$1\r").replace(/\t=(.*?)%>/g, "',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'") + "');}return p.join('');") : i[e] = i[e];
                    return t ? n(t) : n
                }(e, t)
            }),
            T = (n.generateLabels = function (e, t, i, n) {
                var s = new Array(t);
                return labelTemplateString && a(s, (function (t, a) {
                    s[a] = _(e, {
                        value: i + n * (a + 1)
                    })
                })), s
            }, n.easingEffects = {
                linear: function (e) {
                    return e
                },
                easeInQuad: function (e) {
                    return e * e
                },
                easeOutQuad: function (e) {
                    return -1 * e * (e - 2)
                },
                easeInOutQuad: function (e) {
                    return (e /= .5) < 1 ? .5 * e * e : -.5 * (--e * (e - 2) - 1)
                },
                easeInCubic: function (e) {
                    return e * e * e
                },
                easeOutCubic: function (e) {
                    return 1 * ((e = e / 1 - 1) * e * e + 1)
                },
                easeInOutCubic: function (e) {
                    return (e /= .5) < 1 ? .5 * e * e * e : .5 * ((e -= 2) * e * e + 2)
                },
                easeInQuart: function (e) {
                    return e * e * e * e
                },
                easeOutQuart: function (e) {
                    return -1 * ((e = e / 1 - 1) * e * e * e - 1)
                },
                easeInOutQuart: function (e) {
                    return (e /= .5) < 1 ? .5 * e * e * e * e : -.5 * ((e -= 2) * e * e * e - 2)
                },
                easeInQuint: function (e) {
                    return 1 * (e /= 1) * e * e * e * e
                },
                easeOutQuint: function (e) {
                    return 1 * ((e = e / 1 - 1) * e * e * e * e + 1)
                },
                easeInOutQuint: function (e) {
                    return (e /= .5) < 1 ? .5 * e * e * e * e * e : .5 * ((e -= 2) * e * e * e * e + 2)
                },
                easeInSine: function (e) {
                    return -1 * Math.cos(e / 1 * (Math.PI / 2)) + 1
                },
                easeOutSine: function (e) {
                    return 1 * Math.sin(e / 1 * (Math.PI / 2))
                },
                easeInOutSine: function (e) {
                    return -.5 * (Math.cos(Math.PI * e / 1) - 1)
                },
                easeInExpo: function (e) {
                    return 0 === e ? 1 : 1 * Math.pow(2, 10 * (e / 1 - 1))
                },
                easeOutExpo: function (e) {
                    return 1 === e ? 1 : 1 * (1 - Math.pow(2, -10 * e / 1))
                },
                easeInOutExpo: function (e) {
                    return 0 === e ? 0 : 1 === e ? 1 : (e /= .5) < 1 ? .5 * Math.pow(2, 10 * (e - 1)) : .5 * (2 - Math.pow(2, -10 * --e))
                },
                easeInCirc: function (e) {
                    return e >= 1 ? e : -1 * (Math.sqrt(1 - (e /= 1) * e) - 1)
                },
                easeOutCirc: function (e) {
                    return 1 * Math.sqrt(1 - (e = e / 1 - 1) * e)
                },
                easeInOutCirc: function (e) {
                    return (e /= .5) < 1 ? -.5 * (Math.sqrt(1 - e * e) - 1) : .5 * (Math.sqrt(1 - (e -= 2) * e) + 1)
                },
                easeInElastic: function (e) {
                    var t = 1.70158,
                        i = 0,
                        n = 1;
                    return 0 === e ? 0 : 1 == (e /= 1) ? 1 : (i || (i = .3), n < Math.abs(1) ? (n = 1, t = i / 4) : t = i / (2 * Math.PI) * Math.asin(1 / n), -n * Math.pow(2, 10 * (e -= 1)) * Math.sin(2 * (1 * e - t) * Math.PI / i))
                },
                easeOutElastic: function (e) {
                    var t = 1.70158,
                        i = 0,
                        n = 1;
                    return 0 === e ? 0 : 1 == (e /= 1) ? 1 : (i || (i = .3), n < Math.abs(1) ? (n = 1, t = i / 4) : t = i / (2 * Math.PI) * Math.asin(1 / n), n * Math.pow(2, -10 * e) * Math.sin(2 * (1 * e - t) * Math.PI / i) + 1)
                },
                easeInOutElastic: function (e) {
                    var t = 1.70158,
                        i = 0,
                        n = 1;
                    return 0 === e ? 0 : 2 == (e /= .5) ? 1 : (i || (i = .3 * 1.5), n < Math.abs(1) ? (n = 1, t = i / 4) : t = i / (2 * Math.PI) * Math.asin(1 / n), 1 > e ? -.5 * n * Math.pow(2, 10 * (e -= 1)) * Math.sin(2 * (1 * e - t) * Math.PI / i) : n * Math.pow(2, -10 * (e -= 1)) * Math.sin(2 * (1 * e - t) * Math.PI / i) * .5 + 1)
                },
                easeInBack: function (e) {
                    var t = 1.70158;
                    return 1 * (e /= 1) * e * ((t + 1) * e - t)
                },
                easeOutBack: function (e) {
                    var t = 1.70158;
                    return 1 * ((e = e / 1 - 1) * e * ((t + 1) * e + t) + 1)
                },
                easeInOutBack: function (e) {
                    var t = 1.70158;
                    return (e /= .5) < 1 ? .5 * e * e * ((1 + (t *= 1.525)) * e - t) : .5 * ((e -= 2) * e * ((1 + (t *= 1.525)) * e + t) + 2)
                },
                easeInBounce: function (e) {
                    return 1 - T.easeOutBounce(1 - e)
                },
                easeOutBounce: function (e) {
                    return (e /= 1) < 1 / 2.75 ? 7.5625 * e * e : 2 / 2.75 > e ? 1 * (7.5625 * (e -= 1.5 / 2.75) * e + .75) : 2.5 / 2.75 > e ? 1 * (7.5625 * (e -= 2.25 / 2.75) * e + .9375) : 1 * (7.5625 * (e -= 2.625 / 2.75) * e + .984375)
                },
                easeInOutBounce: function (e) {
                    return .5 > e ? .5 * T.easeInBounce(2 * e) : .5 * T.easeOutBounce(2 * e - 1) + .5
                }
            }),
            C = n.requestAnimFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (e) {
                return window.setTimeout(e, 1e3 / 60)
            },
            k = n.cancelAnimFrame = window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.oCancelAnimationFrame || window.msCancelAnimationFrame || function (e) {
                return window.clearTimeout(e, 1e3 / 60)
            },
            E = (n.animationLoop = function (e, t, i, n, a, s) {
                var o = 0,
                    r = T[i] || T.linear,
                    l = function () {
                        var i = ++o / t,
                            c = r(i);
                        e.call(s, c, i, o), n.call(s, c, i), t > o ? s.animationFrame = C(l) : a.apply(s)
                    };
                C(l)
            }, n.getRelativePosition = function (e) {
                var t, i, n = e.originalEvent || e,
                    a = (e.currentTarget || e.srcElement).getBoundingClientRect();
                return n.touches ? (t = n.touches[0].clientX - a.left, i = n.touches[0].clientY - a.top) : (t = n.clientX - a.left, i = n.clientY - a.top), {
                    x: t,
                    y: i
                }
            }, n.addEvent = function (e, t, i) {
                e.addEventListener ? e.addEventListener(t, i) : e.attachEvent ? e.attachEvent("on" + t, i) : e["on" + t] = i
            }),
            x = n.removeEvent = function (e, t, i) {
                e.removeEventListener ? e.removeEventListener(t, i, !1) : e.detachEvent ? e.detachEvent("on" + t, i) : e["on" + t] = d
            },
            S = (n.bindEvents = function (e, t, i) {
                e.events || (e.events = {}), a(t, (function (t) {
                    e.events[t] = function () {
                        i.apply(e, arguments)
                    }, E(e.chart.canvas, t, e.events[t])
                }))
            }, n.unbindEvents = function (e, t) {
                a(t, (function (t, i) {
                    x(e.chart.canvas, i, t)
                }))
            }),
            M = n.getMaximumWidth = function (e) {
                return e.parentNode.clientWidth
            },
            P = n.getMaximumHeight = function (e) {
                return e.parentNode.clientHeight
            },
            I = (n.getMaximumSize = n.getMaximumWidth, n.retinaScale = function (e) {
                var t = e.ctx,
                    i = e.canvas.width,
                    n = e.canvas.height;
                window.devicePixelRatio && (t.canvas.style.width = i + "px", t.canvas.style.height = n + "px", t.canvas.height = n * window.devicePixelRatio, t.canvas.width = i * window.devicePixelRatio, t.scale(window.devicePixelRatio, window.devicePixelRatio))
            }),
            O = n.clear = function (e) {
                e.ctx.clearRect(0, 0, e.width, e.height)
            },
            A = n.fontString = function (e, t, i) {
                return t + " " + e + "px " + i
            },
            L = n.longestText = function (e, t, i) {
                e.font = t;
                var n = 0;
                return a(i, (function (t) {
                    var i = e.measureText(t).width;
                    n = i > n ? i : n
                })), n
            },
            D = n.drawRoundedRectangle = function (e, t, i, n, a, s) {
                e.beginPath(), e.moveTo(t + s, i), e.lineTo(t + n - s, i), e.quadraticCurveTo(t + n, i, t + n, i + s), e.lineTo(t + n, i + a - s), e.quadraticCurveTo(t + n, i + a, t + n - s, i + a), e.lineTo(t + s, i + a), e.quadraticCurveTo(t, i + a, t, i + a - s), e.lineTo(t, i + s), e.quadraticCurveTo(t, i, t + s, i), e.closePath()
            };
        i.instances = {}, i.Type = function (e, t, n) {
            this.options = t, this.chart = n, this.id = p(), i.instances[this.id] = this, t.responsive && this.resize(), this.initialize.call(this, e)
        }, o(i.Type.prototype, {
            initialize: function () {
                return this
            },
            clear: function () {
                return O(this.chart), this
            },
            stop: function () {
                return k(this.animationFrame), this
            },
            resize: function (e) {
                this.stop();
                var t = this.chart.canvas,
                    i = M(this.chart.canvas),
                    n = this.options.maintainAspectRatio ? i / this.chart.aspectRatio : P(this.chart.canvas);
                return t.width = this.chart.width = i, t.height = this.chart.height = n, I(this.chart), "function" == typeof e && e.apply(this, Array.prototype.slice.call(arguments, 1)), this
            },
            reflow: d,
            render: function (e) {
                return e && this.reflow(), this.options.animation && !e ? n.animationLoop(this.draw, this.options.animationSteps, this.options.animationEasing, this.options.onAnimationProgress, this.options.onAnimationComplete, this) : (this.draw(), this.options.onAnimationComplete.call(this)), this
            },
            generateLegend: function () {
                return _(this.options.legendTemplate, this)
            },
            destroy: function () {
                this.clear(), S(this, this.events);
                var e = this.chart.canvas;
                e.width = this.chart.width, e.height = this.chart.height, e.style.removeProperty ? (e.style.removeProperty("width"), e.style.removeProperty("height")) : (e.style.removeAttribute("width"), e.style.removeAttribute("height")), delete i.instances[this.id]
            },
            showTooltip: function (e, t) {
                void 0 === this.activeElements && (this.activeElements = []);
                var s = function (e) {
                    var t = !1;
                    return e.length !== this.activeElements.length ? t = !0 : (a(e, (function (e, i) {
                        e !== this.activeElements[i] && (t = !0)
                    }), this), t)
                }.call(this, e);
                if (s || t) {
                    if (this.activeElements = e, this.draw(), this.options.customTooltips && this.options.customTooltips(!1), e.length > 0)
                        if (this.datasets && this.datasets.length > 1) {
                            for (var o, r, c = this.datasets.length - 1; c >= 0 && (o = this.datasets[c].points || this.datasets[c].bars || this.datasets[c].segments, -1 === (r = l(o, e[0]))); c--);
                            var d = [],
                                p = [],
                                u = function () {
                                    var e, t, i, a, s, o = [],
                                        l = [],
                                        c = [];
                                    return n.each(this.datasets, (function (t) {
                                        (e = t.points || t.bars || t.segments)[r] && e[r].hasValue() && o.push(e[r])
                                    })), n.each(o, (function (e) {
                                        l.push(e.x), c.push(e.y), d.push(n.template(this.options.multiTooltipTemplate, e)), p.push({
                                            fill: e._saved.fillColor || e.fillColor,
                                            stroke: e._saved.strokeColor || e.strokeColor
                                        })
                                    }), this), s = g(c), i = m(c), a = g(l), t = m(l), {
                                        x: a > this.chart.width / 2 ? a : t,
                                        y: (s + i) / 2
                                    }
                                }.call(this, r);
                            new i.MultiTooltip({
                                x: u.x,
                                y: u.y,
                                xPadding: this.options.tooltipXPadding,
                                yPadding: this.options.tooltipYPadding,
                                xOffset: this.options.tooltipXOffset,
                                fillColor: this.options.tooltipFillColor,
                                textColor: this.options.tooltipFontColor,
                                fontFamily: this.options.tooltipFontFamily,
                                fontStyle: this.options.tooltipFontStyle,
                                fontSize: this.options.tooltipFontSize,
                                titleTextColor: this.options.tooltipTitleFontColor,
                                titleFontFamily: this.options.tooltipTitleFontFamily,
                                titleFontStyle: this.options.tooltipTitleFontStyle,
                                titleFontSize: this.options.tooltipTitleFontSize,
                                cornerRadius: this.options.tooltipCornerRadius,
                                labels: d,
                                legendColors: p,
                                legendColorBackground: this.options.multiTooltipKeyBackground,
                                title: e[0].label,
                                chart: this.chart,
                                ctx: this.chart.ctx,
                                custom: this.options.customTooltips
                            }).draw()
                        } else a(e, (function (e) {
                            var t = e.tooltipPosition();
                            new i.Tooltip({
                                x: Math.round(t.x),
                                y: Math.round(t.y),
                                xPadding: this.options.tooltipXPadding,
                                yPadding: this.options.tooltipYPadding,
                                fillColor: this.options.tooltipFillColor,
                                textColor: this.options.tooltipFontColor,
                                fontFamily: this.options.tooltipFontFamily,
                                fontStyle: this.options.tooltipFontStyle,
                                fontSize: this.options.tooltipFontSize,
                                caretHeight: this.options.tooltipCaretSize,
                                cornerRadius: this.options.tooltipCornerRadius,
                                text: _(this.options.tooltipTemplate, e),
                                chart: this.chart,
                                custom: this.options.customTooltips
                            }).draw()
                        }), this);
                    return this
                }
            },
            toBase64Image: function () {
                return this.chart.canvas.toDataURL.apply(this.chart.canvas, arguments)
            }
        }), i.Type.extend = function (e) {
            var t = this,
                n = function () {
                    return t.apply(this, arguments)
                };
            if (n.prototype = s(t.prototype), o(n.prototype, e), n.extend = i.Type.extend, e.name || t.prototype.name) {
                var a = e.name || t.prototype.name,
                    l = i.defaults[t.prototype.name] ? s(i.defaults[t.prototype.name]) : {};
                i.defaults[a] = o(l, e.defaults), i.types[a] = n, i.prototype[a] = function (e, t) {
                    var s = r(i.defaults.global, i.defaults[a], t || {});
                    return new n(e, s, this)
                }
            } else u("Name not provided for this chart, so it hasn't been registered");
            return t
        }, i.Element = function (e) {
            o(this, e), this.initialize.apply(this, arguments), this.save()
        }, o(i.Element.prototype, {
            initialize: function () { },
            restore: function (e) {
                return e ? a(e, (function (e) {
                    this[e] = this._saved[e]
                }), this) : o(this, this._saved), this
            },
            save: function () {
                return this._saved = s(this), delete this._saved._saved, this
            },
            update: function (e) {
                return a(e, (function (e, t) {
                    this._saved[t] = this[t], this[t] = e
                }), this), this
            },
            transition: function (e, t) {
                return a(e, (function (e, i) {
                    this[i] = (e - this._saved[i]) * t + this._saved[i]
                }), this), this
            },
            tooltipPosition: function () {
                return {
                    x: this.x,
                    y: this.y
                }
            },
            hasValue: function () {
                return f(this.value)
            }
        }), i.Element.extend = c, i.Point = i.Element.extend({
            display: !0,
            inRange: function (e, t) {
                var i = this.hitDetectionRadius + this.radius;
                return Math.pow(e - this.x, 2) + Math.pow(t - this.y, 2) < Math.pow(i, 2)
            },
            draw: function () {
                if (this.display) {
                    var e = this.ctx;
                    e.beginPath(), e.arc(this.x, this.y, this.radius, 0, 2 * Math.PI), e.closePath(), e.strokeStyle = this.strokeColor, e.lineWidth = this.strokeWidth, e.fillStyle = this.fillColor, e.fill(), e.stroke()
                }
            }
        }), i.Arc = i.Element.extend({
            inRange: function (e, t) {
                var i = n.getAngleFromPoint(this, {
                    x: e,
                    y: t
                }),
                    a = i.angle >= this.startAngle && i.angle <= this.endAngle,
                    s = i.distance >= this.innerRadius && i.distance <= this.outerRadius;
                return a && s
            },
            tooltipPosition: function () {
                var e = this.startAngle + (this.endAngle - this.startAngle) / 2,
                    t = (this.outerRadius - this.innerRadius) / 2 + this.innerRadius;
                return {
                    x: this.x + Math.cos(e) * t,
                    y: this.y + Math.sin(e) * t
                }
            },
            draw: function (e) {
                var t = this.ctx;
                t.beginPath(), t.arc(this.x, this.y, this.outerRadius, this.startAngle, this.endAngle), t.arc(this.x, this.y, this.innerRadius, this.endAngle, this.startAngle, !0), t.closePath(), t.strokeStyle = this.strokeColor, t.lineWidth = this.strokeWidth, t.fillStyle = this.fillColor, t.fill(), t.lineJoin = "bevel", this.showStroke && t.stroke()
            }
        }), i.Rectangle = i.Element.extend({
            draw: function () {
                var e = this.ctx,
                    t = this.width / 2,
                    i = this.x - t,
                    n = this.x + t,
                    a = this.base - (this.base - this.y),
                    s = this.strokeWidth / 2;
                this.showStroke && (i += s, n -= s, a += s), e.beginPath(), e.fillStyle = this.fillColor, e.strokeStyle = this.strokeColor, e.lineWidth = this.strokeWidth, e.moveTo(i, this.base), e.lineTo(i, a), e.lineTo(n, a), e.lineTo(n, this.base), e.fill(), this.showStroke && e.stroke()
            },
            height: function () {
                return this.base - this.y
            },
            inRange: function (e, t) {
                return e >= this.x - this.width / 2 && e <= this.x + this.width / 2 && t >= this.y && t <= this.base
            }
        }), i.Tooltip = i.Element.extend({
            draw: function () {
                var e = this.chart.ctx;
                e.font = A(this.fontSize, this.fontStyle, this.fontFamily), this.xAlign = "center", this.yAlign = "above";
                var t = this.caretPadding = 2,
                    i = e.measureText(this.text).width + 2 * this.xPadding,
                    n = this.fontSize + 2 * this.yPadding,
                    a = n + this.caretHeight + t;
                this.x + i / 2 > this.chart.width ? this.xAlign = "left" : this.x - i / 2 < 0 && (this.xAlign = "right"), this.y - a < 0 && (this.yAlign = "below");
                var s = this.x - i / 2,
                    o = this.y - a;
                if (e.fillStyle = this.fillColor, this.custom) this.custom(this);
                else {
                    switch (this.yAlign) {
                        case "above":
                            e.beginPath(), e.moveTo(this.x, this.y - t), e.lineTo(this.x + this.caretHeight, this.y - (t + this.caretHeight)), e.lineTo(this.x - this.caretHeight, this.y - (t + this.caretHeight)), e.closePath(), e.fill();
                            break;
                        case "below":
                            o = this.y + t + this.caretHeight, e.beginPath(), e.moveTo(this.x, this.y + t), e.lineTo(this.x + this.caretHeight, this.y + t + this.caretHeight), e.lineTo(this.x - this.caretHeight, this.y + t + this.caretHeight), e.closePath(), e.fill()
                    }
                    switch (this.xAlign) {
                        case "left":
                            s = this.x - i + (this.cornerRadius + this.caretHeight);
                            break;
                        case "right":
                            s = this.x - (this.cornerRadius + this.caretHeight)
                    }
                    D(e, s, o, i, n, this.cornerRadius), e.fill(), e.fillStyle = this.textColor, e.textAlign = "center", e.textBaseline = "middle", e.fillText(this.text, s + i / 2, o + n / 2)
                }
            }
        }), i.MultiTooltip = i.Element.extend({
            initialize: function () {
                this.font = A(this.fontSize, this.fontStyle, this.fontFamily), this.titleFont = A(this.titleFontSize, this.titleFontStyle, this.titleFontFamily), this.height = this.labels.length * this.fontSize + (this.labels.length - 1) * (this.fontSize / 2) + 2 * this.yPadding + 1.5 * this.titleFontSize, this.ctx.font = this.titleFont;
                var e = this.ctx.measureText(this.title).width,
                    t = L(this.ctx, this.font, this.labels) + this.fontSize + 3,
                    i = m([t, e]);
                this.width = i + 2 * this.xPadding;
                var n = this.height / 2;
                this.y - n < 0 ? this.y = n : this.y + n > this.chart.height && (this.y = this.chart.height - n), this.x > this.chart.width / 2 ? this.x -= this.xOffset + this.width : this.x += this.xOffset
            },
            getLineHeight: function (e) {
                var t = this.y - this.height / 2 + this.yPadding,
                    i = e - 1;
                return 0 === e ? t + this.titleFontSize / 2 : t + (1.5 * this.fontSize * i + this.fontSize / 2) + 1.5 * this.titleFontSize
            },
            draw: function () {
                if (this.custom) this.custom(this);
                else {
                    D(this.ctx, this.x, this.y - this.height / 2, this.width, this.height, this.cornerRadius);
                    var e = this.ctx;
                    e.fillStyle = this.fillColor, e.fill(), e.closePath(), e.textAlign = "left", e.textBaseline = "middle", e.fillStyle = this.titleTextColor, e.font = this.titleFont, e.fillText(this.title, this.x + this.xPadding, this.getLineHeight(0)), e.font = this.font, n.each(this.labels, (function (t, i) {
                        e.fillStyle = this.textColor, e.fillText(t, this.x + this.xPadding + this.fontSize + 3, this.getLineHeight(i + 1)), e.fillStyle = this.legendColorBackground, e.fillRect(this.x + this.xPadding, this.getLineHeight(i + 1) - this.fontSize / 2, this.fontSize, this.fontSize), e.fillStyle = this.legendColors[i].fill, e.fillRect(this.x + this.xPadding, this.getLineHeight(i + 1) - this.fontSize / 2, this.fontSize, this.fontSize)
                    }), this)
                }
            }
        }), i.Scale = i.Element.extend({
            initialize: function () {
                this.fit()
            },
            buildYLabels: function () {
                this.yLabels = [];
                for (var e = v(this.stepValue), t = 0; t <= this.steps; t++) this.yLabels.push(_(this.templateString, {
                    value: (this.min + t * this.stepValue).toFixed(e)
                }));
                this.yLabelWidth = this.display && this.showLabels ? L(this.ctx, this.font, this.yLabels) : 0
            },
            addXLabel: function (e) {
                this.xLabels.push(e), this.valuesCount++, this.fit()
            },
            removeXLabel: function () {
                this.xLabels.shift(), this.valuesCount--, this.fit()
            },
            fit: function () {
                this.startPoint = this.display ? this.fontSize : 0, this.endPoint = this.display ? this.height - 1.5 * this.fontSize - 5 : this.height, this.startPoint += this.padding, this.endPoint -= this.padding;
                var e, t = this.endPoint - this.startPoint;
                for (this.calculateYRange(t), this.buildYLabels(), this.calculateXLabelRotation(); t > this.endPoint - this.startPoint;) t = this.endPoint - this.startPoint, e = this.yLabelWidth, this.calculateYRange(t), this.buildYLabels(), e < this.yLabelWidth && this.calculateXLabelRotation()
            },
            calculateXLabelRotation: function () {
                this.ctx.font = this.font;
                var e, t = this.ctx.measureText(this.xLabels[0]).width,
                    i = this.ctx.measureText(this.xLabels[this.xLabels.length - 1]).width;
                if (this.xScalePaddingRight = i / 2 + 3, this.xScalePaddingLeft = t / 2 > this.yLabelWidth + 10 ? t / 2 : this.yLabelWidth + 10, this.xLabelRotation = 0, this.display) {
                    var n, a = L(this.ctx, this.font, this.xLabels);
                    this.xLabelWidth = a;
                    for (var s = Math.floor(this.calculateX(1) - this.calculateX(0)) - 6; this.xLabelWidth > s && 0 === this.xLabelRotation || this.xLabelWidth > s && this.xLabelRotation <= 90 && this.xLabelRotation > 0;)(n = Math.cos(b(this.xLabelRotation))) * i, (e = n * t) + this.fontSize / 2 > this.yLabelWidth + 8 && (this.xScalePaddingLeft = e + this.fontSize / 2), this.xScalePaddingRight = this.fontSize / 2, this.xLabelRotation++, this.xLabelWidth = n * a;
                    this.xLabelRotation > 0 && (this.endPoint -= Math.sin(b(this.xLabelRotation)) * a + 3)
                } else this.xLabelWidth = 0, this.xScalePaddingRight = this.padding, this.xScalePaddingLeft = this.padding
            },
            calculateYRange: d,
            drawingArea: function () {
                return this.startPoint - this.endPoint
            },
            calculateY: function (e) {
                var t = this.drawingArea() / (this.min - this.max);
                return this.endPoint - t * (e - this.min)
            },
            calculateX: function (e) {
                var t = (this.xLabelRotation, this.width - (this.xScalePaddingLeft + this.xScalePaddingRight)) / Math.max(this.valuesCount - (this.offsetGridLines ? 0 : 1), 1),
                    i = t * e + this.xScalePaddingLeft;
                return this.offsetGridLines && (i += t / 2), Math.round(i)
            },
            update: function (e) {
                n.extend(this, e), this.fit()
            },
            draw: function () {
                var e = this.ctx,
                    t = (this.endPoint - this.startPoint) / this.steps,
                    i = Math.round(this.xScalePaddingLeft);
                this.display && (e.fillStyle = this.textColor, e.font = this.font, a(this.yLabels, (function (a, s) {
                    var o = this.endPoint - t * s,
                        r = Math.round(o),
                        l = this.showHorizontalLines;
                    e.textAlign = "right", e.textBaseline = "middle", this.showLabels && e.fillText(a, i - 10, o), 0 !== s || l || (l = !0), l && e.beginPath(), s > 0 ? (e.lineWidth = this.gridLineWidth, e.strokeStyle = this.gridLineColor) : (e.lineWidth = this.lineWidth, e.strokeStyle = this.lineColor), r += n.aliasPixel(e.lineWidth), l && (e.moveTo(i, r), e.lineTo(this.width, r), e.stroke(), e.closePath()), e.lineWidth = this.lineWidth, e.strokeStyle = this.lineColor, e.beginPath(), e.moveTo(i - 5, r), e.lineTo(i, r), e.stroke(), e.closePath()
                }), this), a(this.xLabels, (function (t, i) {
                    var n = this.calculateX(i) + y(this.lineWidth),
                        a = this.calculateX(i - (this.offsetGridLines ? .5 : 0)) + y(this.lineWidth),
                        s = this.xLabelRotation > 0,
                        o = this.showVerticalLines;
                    0 !== i || o || (o = !0), o && e.beginPath(), i > 0 ? (e.lineWidth = this.gridLineWidth, e.strokeStyle = this.gridLineColor) : (e.lineWidth = this.lineWidth, e.strokeStyle = this.lineColor), o && (e.moveTo(a, this.endPoint), e.lineTo(a, this.startPoint - 3), e.stroke(), e.closePath()), e.lineWidth = this.lineWidth, e.strokeStyle = this.lineColor, e.beginPath(), e.moveTo(a, this.endPoint), e.lineTo(a, this.endPoint + 5), e.stroke(), e.closePath(), e.save(), e.translate(n, s ? this.endPoint + 12 : this.endPoint + 8), e.rotate(-1 * b(this.xLabelRotation)), e.font = this.font, e.textAlign = s ? "right" : "center", e.textBaseline = s ? "middle" : "top", e.fillText(t, 0, 0), e.restore()
                }), this))
            }
        }), i.RadialScale = i.Element.extend({
            initialize: function () {
                this.size = g([this.height, this.width]), this.drawingArea = this.display ? this.size / 2 - (this.fontSize / 2 + this.backdropPaddingY) : this.size / 2
            },
            calculateCenterOffset: function (e) {
                var t = this.drawingArea / (this.max - this.min);
                return (e - this.min) * t
            },
            update: function () {
                this.lineArc ? this.drawingArea = this.display ? this.size / 2 - (this.fontSize / 2 + this.backdropPaddingY) : this.size / 2 : this.setScaleSize(), this.buildYLabels()
            },
            buildYLabels: function () {
                this.yLabels = [];
                for (var e = v(this.stepValue), t = 0; t <= this.steps; t++) this.yLabels.push(_(this.templateString, {
                    value: (this.min + t * this.stepValue).toFixed(e)
                }))
            },
            getCircumference: function () {
                return 2 * Math.PI / this.valuesCount
            },
            setScaleSize: function () {
                var e, t, i, n, a, s, o, r, l, c, d, p, u = g([this.height / 2 - this.pointLabelFontSize - 5, this.width / 2]),
                    h = this.width,
                    m = 0;
                for (this.ctx.font = A(this.pointLabelFontSize, this.pointLabelFontStyle, this.pointLabelFontFamily), t = 0; t < this.valuesCount; t++) e = this.getPointPosition(t, u), i = this.ctx.measureText(_(this.templateString, {
                    value: this.labels[t]
                })).width + 5, 0 === t || t === this.valuesCount / 2 ? (n = i / 2, e.x + n > h && (h = e.x + n, a = t), e.x - n < m && (m = e.x - n, o = t)) : t < this.valuesCount / 2 ? e.x + i > h && (h = e.x + i, a = t) : t > this.valuesCount / 2 && e.x - i < m && (m = e.x - i, o = t);
                l = m, c = Math.ceil(h - this.width), s = this.getIndexAngle(a), r = this.getIndexAngle(o), d = c / Math.sin(s + Math.PI / 2), p = l / Math.sin(r + Math.PI / 2), d = f(d) ? d : 0, p = f(p) ? p : 0, this.drawingArea = u - (p + d) / 2, this.setCenterPoint(p, d)
            },
            setCenterPoint: function (e, t) {
                var i = this.width - t - this.drawingArea,
                    n = e + this.drawingArea;
                this.xCenter = (n + i) / 2, this.yCenter = this.height / 2
            },
            getIndexAngle: function (e) {
                return e * (2 * Math.PI / this.valuesCount) - Math.PI / 2
            },
            getPointPosition: function (e, t) {
                var i = this.getIndexAngle(e);
                return {
                    x: Math.cos(i) * t + this.xCenter,
                    y: Math.sin(i) * t + this.yCenter
                }
            },
            draw: function () {
                if (this.display) {
                    var e = this.ctx;
                    if (a(this.yLabels, (function (t, i) {
                        if (i > 0) {
                            var n, a = i * (this.drawingArea / this.steps),
                                s = this.yCenter - a;
                            if (this.lineWidth > 0)
                                if (e.strokeStyle = this.lineColor, e.lineWidth = this.lineWidth, this.lineArc) e.beginPath(), e.arc(this.xCenter, this.yCenter, a, 0, 2 * Math.PI), e.closePath(), e.stroke();
                                else {
                                    e.beginPath();
                                    for (var o = 0; o < this.valuesCount; o++) n = this.getPointPosition(o, this.calculateCenterOffset(this.min + i * this.stepValue)), 0 === o ? e.moveTo(n.x, n.y) : e.lineTo(n.x, n.y);
                                    e.closePath(), e.stroke()
                                } if (this.showLabels) {
                                    if (e.font = A(this.fontSize, this.fontStyle, this.fontFamily), this.showLabelBackdrop) {
                                        var r = e.measureText(t).width;
                                        e.fillStyle = this.backdropColor, e.fillRect(this.xCenter - r / 2 - this.backdropPaddingX, s - this.fontSize / 2 - this.backdropPaddingY, r + 2 * this.backdropPaddingX, this.fontSize + 2 * this.backdropPaddingY)
                                    }
                                    e.textAlign = "center", e.textBaseline = "middle", e.fillStyle = this.fontColor, e.fillText(t, this.xCenter, s)
                                }
                        }
                    }), this), !this.lineArc) {
                        e.lineWidth = this.angleLineWidth, e.strokeStyle = this.angleLineColor;
                        for (var t = this.valuesCount - 1; t >= 0; t--) {
                            if (this.angleLineWidth > 0) {
                                var i = this.getPointPosition(t, this.calculateCenterOffset(this.max));
                                e.beginPath(), e.moveTo(this.xCenter, this.yCenter), e.lineTo(i.x, i.y), e.stroke(), e.closePath()
                            }
                            var n = this.getPointPosition(t, this.calculateCenterOffset(this.max) + 5);
                            e.font = A(this.pointLabelFontSize, this.pointLabelFontStyle, this.pointLabelFontFamily), e.fillStyle = this.pointLabelFontColor;
                            var s = this.labels.length,
                                o = this.labels.length / 2,
                                r = o / 2,
                                l = r > t || t > s - r,
                                c = t === r || t === s - r;
                            e.textAlign = 0 === t || t === o ? "center" : o > t ? "left" : "right", e.textBaseline = c ? "middle" : l ? "bottom" : "top", e.fillText(this.labels[t], n.x, n.y)
                        }
                    }
                }
            }
        }), n.addEvent(window, "resize", function () {
            var e;
            return function () {
                clearTimeout(e), e = setTimeout((function () {
                    a(i.instances, (function (e) {
                        e.options.responsive && e.resize(e.render, !0)
                    }))
                }), 50)
            }
        }()), h ? define((function () {
            return i
        })) : "object" == typeof module && module.exports && (module.exports = i), e.Chart = i, i.noConflict = function () {
            return e.Chart = t, i
        }
    }.call(this),
    function () {
        "use strict";
        var e = this.Chart,
            t = e.helpers;
        e.Type.extend({
            name: "Bar",
            defaults: {
                scaleBeginAtZero: !0,
                scaleShowGridLines: !0,
                scaleGridLineColor: "rgba(0,0,0,.05)",
                scaleGridLineWidth: 1,
                scaleShowHorizontalLines: !0,
                scaleShowVerticalLines: !0,
                barShowStroke: !0,
                barStrokeWidth: 2,
                barValueSpacing: 5,
                barDatasetSpacing: 1,
                legendTemplate: '<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'
            },
            initialize: function (i) {
                var n = this.options;
                this.ScaleClass = e.Scale.extend({
                    offsetGridLines: !0,
                    calculateBarX: function (e, t, i) {
                        var a = this.calculateBaseWidth(),
                            s = this.calculateX(i) - a / 2,
                            o = this.calculateBarWidth(e);
                        return s + o * t + t * n.barDatasetSpacing + o / 2
                    },
                    calculateBaseWidth: function () {
                        return this.calculateX(1) - this.calculateX(0) - 2 * n.barValueSpacing
                    },
                    calculateBarWidth: function (e) {
                        return (this.calculateBaseWidth() - (e - 1) * n.barDatasetSpacing) / e
                    }
                }), this.datasets = [], this.options.showTooltips && t.bindEvents(this, this.options.tooltipEvents, (function (e) {
                    var i = "mouseout" !== e.type ? this.getBarsAtEvent(e) : [];
                    this.eachBars((function (e) {
                        e.restore(["fillColor", "strokeColor"])
                    })), t.each(i, (function (e) {
                        e.fillColor = e.highlightFill, e.strokeColor = e.highlightStroke
                    })), this.showTooltip(i)
                })), this.BarClass = e.Rectangle.extend({
                    strokeWidth: this.options.barStrokeWidth,
                    showStroke: this.options.barShowStroke,
                    ctx: this.chart.ctx
                }), t.each(i.datasets, (function (e) {
                    var n = {
                        label: e.label || null,
                        fillColor: e.fillColor,
                        strokeColor: e.strokeColor,
                        bars: []
                    };
                    this.datasets.push(n), t.each(e.data, (function (t, a) {
                        n.bars.push(new this.BarClass({
                            value: t,
                            label: i.labels[a],
                            datasetLabel: e.label,
                            strokeColor: e.strokeColor,
                            fillColor: e.fillColor,
                            highlightFill: e.highlightFill || e.fillColor,
                            highlightStroke: e.highlightStroke || e.strokeColor
                        }))
                    }), this)
                }), this), this.buildScale(i.labels), this.BarClass.prototype.base = this.scale.endPoint, this.eachBars((function (e, i, n) {
                    t.extend(e, {
                        width: this.scale.calculateBarWidth(this.datasets.length),
                        x: this.scale.calculateBarX(this.datasets.length, n, i),
                        y: this.scale.endPoint
                    }), e.save()
                }), this), this.render()
            },
            update: function () {
                this.scale.update(), t.each(this.activeElements, (function (e) {
                    e.restore(["fillColor", "strokeColor"])
                })), this.eachBars((function (e) {
                    e.save()
                })), this.render()
            },
            eachBars: function (e) {
                t.each(this.datasets, (function (i, n) {
                    t.each(i.bars, e, this, n)
                }), this)
            },
            getBarsAtEvent: function (e) {
                for (var i, n = [], a = t.getRelativePosition(e), s = function (e) {
                    n.push(e.bars[i])
                }, o = 0; o < this.datasets.length; o++)
                    for (i = 0; i < this.datasets[o].bars.length; i++)
                        if (this.datasets[o].bars[i].inRange(a.x, a.y)) return t.each(this.datasets, s), n;
                return n
            },
            buildScale: function (e) {
                var i = this,
                    n = function () {
                        var e = [];
                        return i.eachBars((function (t) {
                            e.push(t.value)
                        })), e
                    },
                    a = {
                        templateString: this.options.scaleLabel,
                        height: this.chart.height,
                        width: this.chart.width,
                        ctx: this.chart.ctx,
                        textColor: this.options.scaleFontColor,
                        fontSize: this.options.scaleFontSize,
                        fontStyle: this.options.scaleFontStyle,
                        fontFamily: this.options.scaleFontFamily,
                        valuesCount: e.length,
                        beginAtZero: this.options.scaleBeginAtZero,
                        integersOnly: this.options.scaleIntegersOnly,
                        calculateYRange: function (e) {
                            var i = t.calculateScaleRange(n(), e, this.fontSize, this.beginAtZero, this.integersOnly);
                            t.extend(this, i)
                        },
                        xLabels: e,
                        font: t.fontString(this.options.scaleFontSize, this.options.scaleFontStyle, this.options.scaleFontFamily),
                        lineWidth: this.options.scaleLineWidth,
                        lineColor: this.options.scaleLineColor,
                        showHorizontalLines: this.options.scaleShowHorizontalLines,
                        showVerticalLines: this.options.scaleShowVerticalLines,
                        gridLineWidth: this.options.scaleShowGridLines ? this.options.scaleGridLineWidth : 0,
                        gridLineColor: this.options.scaleShowGridLines ? this.options.scaleGridLineColor : "rgba(0,0,0,0)",
                        padding: this.options.showScale ? 0 : this.options.barShowStroke ? this.options.barStrokeWidth : 0,
                        showLabels: this.options.scaleShowLabels,
                        display: this.options.showScale
                    };
                this.options.scaleOverride && t.extend(a, {
                    calculateYRange: t.noop,
                    steps: this.options.scaleSteps,
                    stepValue: this.options.scaleStepWidth,
                    min: this.options.scaleStartValue,
                    max: this.options.scaleStartValue + this.options.scaleSteps * this.options.scaleStepWidth
                }), this.scale = new this.ScaleClass(a)
            },
            addData: function (e, i) {
                t.each(e, (function (e, t) {
                    this.datasets[t].bars.push(new this.BarClass({
                        value: e,
                        label: i,
                        x: this.scale.calculateBarX(this.datasets.length, t, this.scale.valuesCount + 1),
                        y: this.scale.endPoint,
                        width: this.scale.calculateBarWidth(this.datasets.length),
                        base: this.scale.endPoint,
                        strokeColor: this.datasets[t].strokeColor,
                        fillColor: this.datasets[t].fillColor
                    }))
                }), this), this.scale.addXLabel(i), this.update()
            },
            removeData: function () {
                this.scale.removeXLabel(), t.each(this.datasets, (function (e) {
                    e.bars.shift()
                }), this), this.update()
            },
            reflow: function () {
                t.extend(this.BarClass.prototype, {
                    y: this.scale.endPoint,
                    base: this.scale.endPoint
                });
                var e = t.extend({
                    height: this.chart.height,
                    width: this.chart.width
                });
                this.scale.update(e)
            },
            draw: function (e) {
                var i = e || 1;
                this.clear(), this.chart.ctx, this.scale.draw(i), t.each(this.datasets, (function (e, n) {
                    t.each(e.bars, (function (e, t) {
                        e.hasValue() && (e.base = this.scale.endPoint, e.transition({
                            x: this.scale.calculateBarX(this.datasets.length, n, t),
                            y: this.scale.calculateY(e.value),
                            width: this.scale.calculateBarWidth(this.datasets.length)
                        }, i).draw())
                    }), this)
                }), this)
            }
        })
    }.call(this),
    function () {
        "use strict";
        var e = this.Chart,
            t = e.helpers,
            i = {
                segmentShowStroke: !0,
                segmentStrokeColor: "#fff",
                segmentStrokeWidth: 2,
                percentageInnerCutout: 50,
                animationSteps: 100,
                animationEasing: "easeOutBounce",
                animateRotate: !0,
                animateScale: !1,
                legendTemplate: '<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'
            };
        e.Type.extend({
            name: "Doughnut",
            defaults: i,
            initialize: function (i) {
                this.segments = [], this.outerRadius = (t.min([this.chart.width, this.chart.height]) - this.options.segmentStrokeWidth / 2) / 2, this.SegmentArc = e.Arc.extend({
                    ctx: this.chart.ctx,
                    x: this.chart.width / 2,
                    y: this.chart.height / 2
                }), this.options.showTooltips && t.bindEvents(this, this.options.tooltipEvents, (function (e) {
                    var i = "mouseout" !== e.type ? this.getSegmentsAtEvent(e) : [];
                    t.each(this.segments, (function (e) {
                        e.restore(["fillColor"])
                    })), t.each(i, (function (e) {
                        e.fillColor = e.highlightColor
                    })), this.showTooltip(i)
                })), this.calculateTotal(i), t.each(i, (function (e, t) {
                    this.addData(e, t, !0)
                }), this), this.render()
            },
            getSegmentsAtEvent: function (e) {
                var i = [],
                    n = t.getRelativePosition(e);
                return t.each(this.segments, (function (e) {
                    e.inRange(n.x, n.y) && i.push(e)
                }), this), i
            },
            addData: function (e, t, i) {
                var n = t || this.segments.length;
                this.segments.splice(n, 0, new this.SegmentArc({
                    value: e.value,
                    outerRadius: this.options.animateScale ? 0 : this.outerRadius,
                    innerRadius: this.options.animateScale ? 0 : this.outerRadius / 100 * this.options.percentageInnerCutout,
                    fillColor: e.color,
                    highlightColor: e.highlight || e.color,
                    showStroke: this.options.segmentShowStroke,
                    strokeWidth: this.options.segmentStrokeWidth,
                    strokeColor: this.options.segmentStrokeColor,
                    startAngle: 1.5 * Math.PI,
                    circumference: this.options.animateRotate ? 0 : this.calculateCircumference(e.value),
                    label: e.label
                })), i || (this.reflow(), this.update())
            },
            calculateCircumference: function (e) {
                return 2 * Math.PI * (Math.abs(e) / this.total)
            },
            calculateTotal: function (e) {
                this.total = 0, t.each(e, (function (e) {
                    this.total += Math.abs(e.value)
                }), this)
            },
            update: function () {
                this.calculateTotal(this.segments), t.each(this.activeElements, (function (e) {
                    e.restore(["fillColor"])
                })), t.each(this.segments, (function (e) {
                    e.save()
                })), this.render()
            },
            removeData: function (e) {
                var i = t.isNumber(e) ? e : this.segments.length - 1;
                this.segments.splice(i, 1), this.reflow(), this.update()
            },
            reflow: function () {
                t.extend(this.SegmentArc.prototype, {
                    x: this.chart.width / 2,
                    y: this.chart.height / 2
                }), this.outerRadius = (t.min([this.chart.width, this.chart.height]) - this.options.segmentStrokeWidth / 2) / 2, t.each(this.segments, (function (e) {
                    e.update({
                        outerRadius: this.outerRadius,
                        innerRadius: this.outerRadius / 100 * this.options.percentageInnerCutout
                    })
                }), this)
            },
            draw: function (e) {
                var i = e || 1;
                this.clear(), t.each(this.segments, (function (e, t) {
                    e.transition({
                        circumference: this.calculateCircumference(e.value),
                        outerRadius: this.outerRadius,
                        innerRadius: this.outerRadius / 100 * this.options.percentageInnerCutout
                    }, i), e.endAngle = e.startAngle + e.circumference, e.draw(), 0 === t && (e.startAngle = 1.5 * Math.PI), t < this.segments.length - 1 && (this.segments[t + 1].startAngle = e.endAngle)
                }), this)
            }
        }), e.types.Doughnut.extend({
            name: "Pie",
            defaults: t.merge(i, {
                percentageInnerCutout: 0
            })
        })
    }.call(this),
    function () {
        "use strict";
        var e = this.Chart,
            t = e.helpers;
        e.Type.extend({
            name: "Line",
            defaults: {
                scaleShowGridLines: !0,
                scaleGridLineColor: "rgba(0,0,0,.05)",
                scaleGridLineWidth: 1,
                scaleShowHorizontalLines: !0,
                scaleShowVerticalLines: !0,
                bezierCurve: !0,
                bezierCurveTension: .4,
                pointDot: !0,
                pointDotRadius: 4,
                pointDotStrokeWidth: 1,
                pointHitDetectionRadius: 20,
                datasetStroke: !0,
                datasetStrokeWidth: 2,
                datasetFill: !0,
                legendTemplate: '<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'
            },
            initialize: function (i) {
                this.PointClass = e.Point.extend({
                    strokeWidth: this.options.pointDotStrokeWidth,
                    radius: this.options.pointDotRadius,
                    display: this.options.pointDot,
                    hitDetectionRadius: this.options.pointHitDetectionRadius,
                    ctx: this.chart.ctx,
                    inRange: function (e) {
                        return Math.pow(e - this.x, 2) < Math.pow(this.radius + this.hitDetectionRadius, 2)
                    }
                }), this.datasets = [], this.options.showTooltips && t.bindEvents(this, this.options.tooltipEvents, (function (e) {
                    var i = "mouseout" !== e.type ? this.getPointsAtEvent(e) : [];
                    this.eachPoints((function (e) {
                        e.restore(["fillColor", "strokeColor"])
                    })), t.each(i, (function (e) {
                        e.fillColor = e.highlightFill, e.strokeColor = e.highlightStroke
                    })), this.showTooltip(i)
                })), t.each(i.datasets, (function (e) {
                    var n = {
                        label: e.label || null,
                        fillColor: e.fillColor,
                        strokeColor: e.strokeColor,
                        pointColor: e.pointColor,
                        pointStrokeColor: e.pointStrokeColor,
                        points: []
                    };
                    this.datasets.push(n), t.each(e.data, (function (t, a) {
                        n.points.push(new this.PointClass({
                            value: t,
                            label: i.labels[a],
                            datasetLabel: e.label,
                            strokeColor: e.pointStrokeColor,
                            fillColor: e.pointColor,
                            highlightFill: e.pointHighlightFill || e.pointColor,
                            highlightStroke: e.pointHighlightStroke || e.pointStrokeColor
                        }))
                    }), this), this.buildScale(i.labels), this.eachPoints((function (e, i) {
                        t.extend(e, {
                            x: this.scale.calculateX(i),
                            y: this.scale.endPoint
                        }), e.save()
                    }), this)
                }), this), this.render()
            },
            update: function () {
                this.scale.update(), t.each(this.activeElements, (function (e) {
                    e.restore(["fillColor", "strokeColor"])
                })), this.eachPoints((function (e) {
                    e.save()
                })), this.render()
            },
            eachPoints: function (e) {
                t.each(this.datasets, (function (i) {
                    t.each(i.points, e, this)
                }), this)
            },
            getPointsAtEvent: function (e) {
                var i = [],
                    n = t.getRelativePosition(e);
                return t.each(this.datasets, (function (e) {
                    t.each(e.points, (function (e) {
                        e.inRange(n.x, n.y) && i.push(e)
                    }))
                }), this), i
            },
            buildScale: function (i) {
                var n = this,
                    a = {
                        templateString: this.options.scaleLabel,
                        height: this.chart.height,
                        width: this.chart.width,
                        ctx: this.chart.ctx,
                        textColor: this.options.scaleFontColor,
                        fontSize: this.options.scaleFontSize,
                        fontStyle: this.options.scaleFontStyle,
                        fontFamily: this.options.scaleFontFamily,
                        valuesCount: i.length,
                        beginAtZero: this.options.scaleBeginAtZero,
                        integersOnly: this.options.scaleIntegersOnly,
                        calculateYRange: function (e) {
                            var i = t.calculateScaleRange(function () {
                                var e = [];
                                return n.eachPoints((function (t) {
                                    e.push(t.value)
                                })), e
                            }(), e, this.fontSize, this.beginAtZero, this.integersOnly);
                            t.extend(this, i)
                        },
                        xLabels: i,
                        font: t.fontString(this.options.scaleFontSize, this.options.scaleFontStyle, this.options.scaleFontFamily),
                        lineWidth: this.options.scaleLineWidth,
                        lineColor: this.options.scaleLineColor,
                        showHorizontalLines: this.options.scaleShowHorizontalLines,
                        showVerticalLines: this.options.scaleShowVerticalLines,
                        gridLineWidth: this.options.scaleShowGridLines ? this.options.scaleGridLineWidth : 0,
                        gridLineColor: this.options.scaleShowGridLines ? this.options.scaleGridLineColor : "rgba(0,0,0,0)",
                        padding: this.options.showScale ? 0 : this.options.pointDotRadius + this.options.pointDotStrokeWidth,
                        showLabels: this.options.scaleShowLabels,
                        display: this.options.showScale
                    };
                this.options.scaleOverride && t.extend(a, {
                    calculateYRange: t.noop,
                    steps: this.options.scaleSteps,
                    stepValue: this.options.scaleStepWidth,
                    min: this.options.scaleStartValue,
                    max: this.options.scaleStartValue + this.options.scaleSteps * this.options.scaleStepWidth
                }), this.scale = new e.Scale(a)
            },
            addData: function (e, i) {
                t.each(e, (function (e, t) {
                    this.datasets[t].points.push(new this.PointClass({
                        value: e,
                        label: i,
                        x: this.scale.calculateX(this.scale.valuesCount + 1),
                        y: this.scale.endPoint,
                        strokeColor: this.datasets[t].pointStrokeColor,
                        fillColor: this.datasets[t].pointColor
                    }))
                }), this), this.scale.addXLabel(i), this.update()
            },
            removeData: function () {
                this.scale.removeXLabel(), t.each(this.datasets, (function (e) {
                    e.points.shift()
                }), this), this.update()
            },
            reflow: function () {
                var e = t.extend({
                    height: this.chart.height,
                    width: this.chart.width
                });
                this.scale.update(e)
            },
            draw: function (e) {
                var i = e || 1;
                this.clear();
                var n = this.chart.ctx,
                    a = function (e) {
                        return null !== e.value
                    },
                    s = function (e, i, n) {
                        return t.findPreviousWhere(i, a, n) || e
                    };
                this.scale.draw(i), t.each(this.datasets, (function (e) {
                    var o = t.where(e.points, a);
                    t.each(e.points, (function (e, t) {
                        e.hasValue() && e.transition({
                            y: this.scale.calculateY(e.value),
                            x: this.scale.calculateX(t)
                        }, i)
                    }), this), this.options.bezierCurve && t.each(o, (function (e, i) {
                        var n = i > 0 && i < o.length - 1 ? this.options.bezierCurveTension : 0;
                        e.controlPoints = t.splineCurve(s(e, o, i), e, function (e, i, n) {
                            return t.findNextWhere(i, a, n) || e
                        }(e, o, i), n), e.controlPoints.outer.y > this.scale.endPoint ? e.controlPoints.outer.y = this.scale.endPoint : e.controlPoints.outer.y < this.scale.startPoint && (e.controlPoints.outer.y = this.scale.startPoint), e.controlPoints.inner.y > this.scale.endPoint ? e.controlPoints.inner.y = this.scale.endPoint : e.controlPoints.inner.y < this.scale.startPoint && (e.controlPoints.inner.y = this.scale.startPoint)
                    }), this), n.lineWidth = this.options.datasetStrokeWidth, n.strokeStyle = e.strokeColor, n.beginPath(), t.each(o, (function (e, t) {
                        if (0 === t) n.moveTo(e.x, e.y);
                        else if (this.options.bezierCurve) {
                            var i = s(e, o, t);
                            n.bezierCurveTo(i.controlPoints.outer.x, i.controlPoints.outer.y, e.controlPoints.inner.x, e.controlPoints.inner.y, e.x, e.y)
                        } else n.lineTo(e.x, e.y)
                    }), this), n.stroke(), this.options.datasetFill && o.length > 0 && (n.lineTo(o[o.length - 1].x, this.scale.endPoint), n.lineTo(o[0].x, this.scale.endPoint), n.fillStyle = e.fillColor, n.closePath(), n.fill()), t.each(o, (function (e) {
                        e.draw()
                    }))
                }), this)
            }
        })
    }.call(this),
    function () {
        "use strict";
        var e = this.Chart,
            t = e.helpers;
        e.Type.extend({
            name: "PolarArea",
            defaults: {
                scaleShowLabelBackdrop: !0,
                scaleBackdropColor: "rgba(255,255,255,0.75)",
                scaleBeginAtZero: !0,
                scaleBackdropPaddingY: 2,
                scaleBackdropPaddingX: 2,
                scaleShowLine: !0,
                segmentShowStroke: !0,
                segmentStrokeColor: "#fff",
                segmentStrokeWidth: 2,
                animationSteps: 100,
                animationEasing: "easeOutBounce",
                animateRotate: !0,
                animateScale: !1,
                legendTemplate: '<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'
            },
            initialize: function (i) {
                this.segments = [], this.SegmentArc = e.Arc.extend({
                    showStroke: this.options.segmentShowStroke,
                    strokeWidth: this.options.segmentStrokeWidth,
                    strokeColor: this.options.segmentStrokeColor,
                    ctx: this.chart.ctx,
                    innerRadius: 0,
                    x: this.chart.width / 2,
                    y: this.chart.height / 2
                }), this.scale = new e.RadialScale({
                    display: this.options.showScale,
                    fontStyle: this.options.scaleFontStyle,
                    fontSize: this.options.scaleFontSize,
                    fontFamily: this.options.scaleFontFamily,
                    fontColor: this.options.scaleFontColor,
                    showLabels: this.options.scaleShowLabels,
                    showLabelBackdrop: this.options.scaleShowLabelBackdrop,
                    backdropColor: this.options.scaleBackdropColor,
                    backdropPaddingY: this.options.scaleBackdropPaddingY,
                    backdropPaddingX: this.options.scaleBackdropPaddingX,
                    lineWidth: this.options.scaleShowLine ? this.options.scaleLineWidth : 0,
                    lineColor: this.options.scaleLineColor,
                    lineArc: !0,
                    width: this.chart.width,
                    height: this.chart.height,
                    xCenter: this.chart.width / 2,
                    yCenter: this.chart.height / 2,
                    ctx: this.chart.ctx,
                    templateString: this.options.scaleLabel,
                    valuesCount: i.length
                }), this.updateScaleRange(i), this.scale.update(), t.each(i, (function (e, t) {
                    this.addData(e, t, !0)
                }), this), this.options.showTooltips && t.bindEvents(this, this.options.tooltipEvents, (function (e) {
                    var i = "mouseout" !== e.type ? this.getSegmentsAtEvent(e) : [];
                    t.each(this.segments, (function (e) {
                        e.restore(["fillColor"])
                    })), t.each(i, (function (e) {
                        e.fillColor = e.highlightColor
                    })), this.showTooltip(i)
                })), this.render()
            },
            getSegmentsAtEvent: function (e) {
                var i = [],
                    n = t.getRelativePosition(e);
                return t.each(this.segments, (function (e) {
                    e.inRange(n.x, n.y) && i.push(e)
                }), this), i
            },
            addData: function (e, t, i) {
                var n = t || this.segments.length;
                this.segments.splice(n, 0, new this.SegmentArc({
                    fillColor: e.color,
                    highlightColor: e.highlight || e.color,
                    label: e.label,
                    value: e.value,
                    outerRadius: this.options.animateScale ? 0 : this.scale.calculateCenterOffset(e.value),
                    circumference: this.options.animateRotate ? 0 : this.scale.getCircumference(),
                    startAngle: 1.5 * Math.PI
                })), i || (this.reflow(), this.update())
            },
            removeData: function (e) {
                var i = t.isNumber(e) ? e : this.segments.length - 1;
                this.segments.splice(i, 1), this.reflow(), this.update()
            },
            calculateTotal: function (e) {
                this.total = 0, t.each(e, (function (e) {
                    this.total += e.value
                }), this), this.scale.valuesCount = this.segments.length
            },
            updateScaleRange: function (e) {
                var i = [];
                t.each(e, (function (e) {
                    i.push(e.value)
                }));
                var n = this.options.scaleOverride ? {
                    steps: this.options.scaleSteps,
                    stepValue: this.options.scaleStepWidth,
                    min: this.options.scaleStartValue,
                    max: this.options.scaleStartValue + this.options.scaleSteps * this.options.scaleStepWidth
                } : t.calculateScaleRange(i, t.min([this.chart.width, this.chart.height]) / 2, this.options.scaleFontSize, this.options.scaleBeginAtZero, this.options.scaleIntegersOnly);
                t.extend(this.scale, n, {
                    size: t.min([this.chart.width, this.chart.height]),
                    xCenter: this.chart.width / 2,
                    yCenter: this.chart.height / 2
                })
            },
            update: function () {
                this.calculateTotal(this.segments), t.each(this.segments, (function (e) {
                    e.save()
                })), this.reflow(), this.render()
            },
            reflow: function () {
                t.extend(this.SegmentArc.prototype, {
                    x: this.chart.width / 2,
                    y: this.chart.height / 2
                }), this.updateScaleRange(this.segments), this.scale.update(), t.extend(this.scale, {
                    xCenter: this.chart.width / 2,
                    yCenter: this.chart.height / 2
                }), t.each(this.segments, (function (e) {
                    e.update({
                        outerRadius: this.scale.calculateCenterOffset(e.value)
                    })
                }), this)
            },
            draw: function (e) {
                var i = e || 1;
                this.clear(), t.each(this.segments, (function (e, t) {
                    e.transition({
                        circumference: this.scale.getCircumference(),
                        outerRadius: this.scale.calculateCenterOffset(e.value)
                    }, i), e.endAngle = e.startAngle + e.circumference, 0 === t && (e.startAngle = 1.5 * Math.PI), t < this.segments.length - 1 && (this.segments[t + 1].startAngle = e.endAngle), e.draw()
                }), this), this.scale.draw()
            }
        })
    }.call(this),
    function () {
        "use strict";
        var e = this.Chart,
            t = e.helpers;
        e.Type.extend({
            name: "Radar",
            defaults: {
                scaleShowLine: !0,
                angleShowLineOut: !0,
                scaleShowLabels: !1,
                scaleBeginAtZero: !0,
                angleLineColor: "rgba(0,0,0,.1)",
                angleLineWidth: 1,
                pointLabelFontFamily: "'Arial'",
                pointLabelFontStyle: "normal",
                pointLabelFontSize: 10,
                pointLabelFontColor: "#666",
                pointDot: !0,
                pointDotRadius: 3,
                pointDotStrokeWidth: 1,
                pointHitDetectionRadius: 20,
                datasetStroke: !0,
                datasetStrokeWidth: 2,
                datasetFill: !0,
                legendTemplate: '<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'
            },
            initialize: function (i) {
                this.PointClass = e.Point.extend({
                    strokeWidth: this.options.pointDotStrokeWidth,
                    radius: this.options.pointDotRadius,
                    display: this.options.pointDot,
                    hitDetectionRadius: this.options.pointHitDetectionRadius,
                    ctx: this.chart.ctx
                }), this.datasets = [], this.buildScale(i), this.options.showTooltips && t.bindEvents(this, this.options.tooltipEvents, (function (e) {
                    var i = "mouseout" !== e.type ? this.getPointsAtEvent(e) : [];
                    this.eachPoints((function (e) {
                        e.restore(["fillColor", "strokeColor"])
                    })), t.each(i, (function (e) {
                        e.fillColor = e.highlightFill, e.strokeColor = e.highlightStroke
                    })), this.showTooltip(i)
                })), t.each(i.datasets, (function (e) {
                    var n = {
                        label: e.label || null,
                        fillColor: e.fillColor,
                        strokeColor: e.strokeColor,
                        pointColor: e.pointColor,
                        pointStrokeColor: e.pointStrokeColor,
                        points: []
                    };
                    this.datasets.push(n), t.each(e.data, (function (t, a) {
                        var s;
                        this.scale.animation || (s = this.scale.getPointPosition(a, this.scale.calculateCenterOffset(t))), n.points.push(new this.PointClass({
                            value: t,
                            label: i.labels[a],
                            datasetLabel: e.label,
                            x: this.options.animation ? this.scale.xCenter : s.x,
                            y: this.options.animation ? this.scale.yCenter : s.y,
                            strokeColor: e.pointStrokeColor,
                            fillColor: e.pointColor,
                            highlightFill: e.pointHighlightFill || e.pointColor,
                            highlightStroke: e.pointHighlightStroke || e.pointStrokeColor
                        }))
                    }), this)
                }), this), this.render()
            },
            eachPoints: function (e) {
                t.each(this.datasets, (function (i) {
                    t.each(i.points, e, this)
                }), this)
            },
            getPointsAtEvent: function (e) {
                var i = t.getRelativePosition(e),
                    n = t.getAngleFromPoint({
                        x: this.scale.xCenter,
                        y: this.scale.yCenter
                    }, i),
                    a = 2 * Math.PI / this.scale.valuesCount,
                    s = Math.round((n.angle - 1.5 * Math.PI) / a),
                    o = [];
                return (s >= this.scale.valuesCount || 0 > s) && (s = 0), n.distance <= this.scale.drawingArea && t.each(this.datasets, (function (e) {
                    o.push(e.points[s])
                })), o
            },
            buildScale: function (t) {
                this.scale = new e.RadialScale({
                    display: this.options.showScale,
                    fontStyle: this.options.scaleFontStyle,
                    fontSize: this.options.scaleFontSize,
                    fontFamily: this.options.scaleFontFamily,
                    fontColor: this.options.scaleFontColor,
                    showLabels: this.options.scaleShowLabels,
                    showLabelBackdrop: this.options.scaleShowLabelBackdrop,
                    backdropColor: this.options.scaleBackdropColor,
                    backdropPaddingY: this.options.scaleBackdropPaddingY,
                    backdropPaddingX: this.options.scaleBackdropPaddingX,
                    lineWidth: this.options.scaleShowLine ? this.options.scaleLineWidth : 0,
                    lineColor: this.options.scaleLineColor,
                    angleLineColor: this.options.angleLineColor,
                    angleLineWidth: this.options.angleShowLineOut ? this.options.angleLineWidth : 0,
                    pointLabelFontColor: this.options.pointLabelFontColor,
                    pointLabelFontSize: this.options.pointLabelFontSize,
                    pointLabelFontFamily: this.options.pointLabelFontFamily,
                    pointLabelFontStyle: this.options.pointLabelFontStyle,
                    height: this.chart.height,
                    width: this.chart.width,
                    xCenter: this.chart.width / 2,
                    yCenter: this.chart.height / 2,
                    ctx: this.chart.ctx,
                    templateString: this.options.scaleLabel,
                    labels: t.labels,
                    valuesCount: t.datasets[0].data.length
                }), this.scale.setScaleSize(), this.updateScaleRange(t.datasets), this.scale.buildYLabels()
            },
            updateScaleRange: function (e) {
                var i = function () {
                    var i = [];
                    return t.each(e, (function (e) {
                        e.data ? i = i.concat(e.data) : t.each(e.points, (function (e) {
                            i.push(e.value)
                        }))
                    })), i
                }(),
                    n = this.options.scaleOverride ? {
                        steps: this.options.scaleSteps,
                        stepValue: this.options.scaleStepWidth,
                        min: this.options.scaleStartValue,
                        max: this.options.scaleStartValue + this.options.scaleSteps * this.options.scaleStepWidth
                    } : t.calculateScaleRange(i, t.min([this.chart.width, this.chart.height]) / 2, this.options.scaleFontSize, this.options.scaleBeginAtZero, this.options.scaleIntegersOnly);
                t.extend(this.scale, n)
            },
            addData: function (e, i) {
                this.scale.valuesCount++, t.each(e, (function (e, t) {
                    var n = this.scale.getPointPosition(this.scale.valuesCount, this.scale.calculateCenterOffset(e));
                    this.datasets[t].points.push(new this.PointClass({
                        value: e,
                        label: i,
                        x: n.x,
                        y: n.y,
                        strokeColor: this.datasets[t].pointStrokeColor,
                        fillColor: this.datasets[t].pointColor
                    }))
                }), this), this.scale.labels.push(i), this.reflow(), this.update()
            },
            removeData: function () {
                this.scale.valuesCount--, this.scale.labels.shift(), t.each(this.datasets, (function (e) {
                    e.points.shift()
                }), this), this.reflow(), this.update()
            },
            update: function () {
                this.eachPoints((function (e) {
                    e.save()
                })), this.reflow(), this.render()
            },
            reflow: function () {
                t.extend(this.scale, {
                    width: this.chart.width,
                    height: this.chart.height,
                    size: t.min([this.chart.width, this.chart.height]),
                    xCenter: this.chart.width / 2,
                    yCenter: this.chart.height / 2
                }), this.updateScaleRange(this.datasets), this.scale.setScaleSize(), this.scale.buildYLabels()
            },
            draw: function (e) {
                var i = e || 1,
                    n = this.chart.ctx;
                this.clear(), this.scale.draw(), t.each(this.datasets, (function (e) {
                    t.each(e.points, (function (e, t) {
                        e.hasValue() && e.transition(this.scale.getPointPosition(t, this.scale.calculateCenterOffset(e.value)), i)
                    }), this), n.lineWidth = this.options.datasetStrokeWidth, n.strokeStyle = e.strokeColor, n.beginPath(), t.each(e.points, (function (e, t) {
                        0 === t ? n.moveTo(e.x, e.y) : n.lineTo(e.x, e.y)
                    }), this), n.closePath(), n.stroke(), n.fillStyle = e.fillColor, n.fill(), t.each(e.points, (function (e) {
                        e.hasValue() && e.draw()
                    }))
                }), this)
            }
        })
    }.call(this),
    function (e) {
        function t() {
            a = function (e) {
                return n + "-" + e
            }, s = function (e) {
                return n + "-" + e
            }, o = function (e) {
                return e + "." + n
            }, e.each([a, s, o], (function (e, t) {
                t.add = function (e) {
                    for (var i in e = e.split(" ")) t[e[i]] = t(e[i])
                }
            })), a.add("touch desktop scale-1 scale-2 scale-3 wrapper opened opening fixed inline hover slider slide loading noanimation fastanimation"), s.add("slide anchor"), o.add("open opening close closing prev next slideTo sliding click pinch scroll resize orientationchange load loading loaded transitionend webkitTransitionEnd"), r = {
                complObject: function (t, i) {
                    return e.isPlainObject(t) || (t = i), t
                },
                complBoolean: function (e, t) {
                    return "boolean" != typeof e && (e = t), e
                },
                complNumber: function (t, i) {
                    return e.isNumeric(t) || (t = i), t
                },
                complString: function (e, t) {
                    return "string" != typeof e && (e = t), e
                },
                isPercentage: function (e) {
                    return "string" == typeof e && "%" == e.slice(-1)
                },
                getPercentage: function (e) {
                    return parseInt(e.slice(0, -1))
                },
                resizeRatio: function (e, t, i, n, a) {
                    var s = t.width(),
                        o = t.height();
                    i && s > i && (s = i), n && o > n && (o = n), a > s / o ? o = s / a : s = o * a, e.width(s).height(o)
                },
                transitionend: function (e, t, i) {
                    var n = !1,
                        a = function () {
                            n || t.call(e[0]), n = !0
                        };
                    e.one(o.transitionend, a), e.one(o.webkitTransitionEnd, a), setTimeout(a, 1.1 * i)
                },
                setViewportScale: function () {
                    if (l.viewportScale) {
                        var e = l.viewportScale.getScale();
                        void 0 !== e && (e = 1 / e, l.$body.removeClass(a["scale-1"]).removeClass(a["scale-2"]).removeClass(a["scale-3"]).addClass(a["scale-" + Math.max(Math.min(Math.round(e), 3), 1)]))
                    }
                }
            }, (l = {
                $wndw: e(window),
                $html: e("html"),
                $body: e("body"),
                scrollPosition: 0,
                viewportScale: null,
                viewportScaleInterval: null
            }).$body.addClass(e[i].support.touch ? a.touch : a.desktop), l.$wndw.on(o.scroll, (function (e) {
                l.$body.hasClass(a.opened) && (window.scrollTo(0, l.scrollPosition), e.preventDefault(), e.stopPropagation(), e.stopImmediatePropagation())
            })), !l.viewportScale && e[i].support.touch && "undefined" != typeof FlameViewportScale && (l.viewportScale = new FlameViewportScale, r.setViewportScale(), l.$wndw.on(o.orientationchange + " " + o.resize, (function () {
                l.viewportScaleInterval && (clearTimeout(l.viewportScaleInterval), l.viewportScaleInterval = null), l.viewportScaleInterval = setTimeout((function () {
                    r.setViewportScale()
                }), 500)
            }))), e[i]._c = a, e[i]._d = s, e[i]._e = o, e[i]._f = r, e[i]._g = l
        }
        var i = "tosrus",
            n = "tos";
        if (!e[i]) {
            var a = {},
                s = {},
                o = {},
                r = {},
                l = {};
            e[i] = function (e, t, i) {
                return this.$node = e, this.opts = t, this.conf = i, this.vars = {}, this.nodes = {}, this.slides = {}, this._init(), this
            }, e[i].prototype = {
                _init: function () {
                    var t = this;
                    this._complementOptions(), this.vars.fixed = "window" == this.opts.wrapper.target, this.nodes.$wrpr = e('<div class="' + a.wrapper + '" />'), this.nodes.$sldr = e('<div class="' + a.slider + '" />').appendTo(this.nodes.$wrpr), this.nodes.$wrpr.addClass(this.vars.fixed ? a.fixed : a.inline).addClass(a("fx-" + this.opts.effect)).addClass(a(this.opts.slides.scale)).addClass(this.opts.wrapper.classes), this.nodes.$wrpr.on(o.open + " " + o.close + " " + o.prev + " " + o.next + " " + o.slideTo, (function (e) {
                        var i = (e = (arguments = Array.prototype.slice.call(arguments)).shift()).type;
                        e.stopPropagation(), "function" == typeof t[i] && t[i].apply(t, arguments)
                    })).on(o.opening + " " + o.closing + " " + o.sliding + " " + o.loading + " " + o.loaded, (function (e) {
                        e.stopPropagation()
                    })).on(o.click, (function (i) {
                        switch (i.stopPropagation(), t.opts.wrapper.onClick) {
                            case "toggleUI":
                                t.nodes.$wrpr.toggleClass(a.hover);
                                break;
                            case "close":
                                e(i.target).is("img") || t.close()
                        }
                    })), this.nodes.$anchors = this._initAnchors(), this.nodes.$slides = this._initSlides(), this.slides.total = this.nodes.$slides.length, this.slides.visible = this.opts.slides.visible, this.slides.index = 0, this.vars.opened = !0;
                    for (var n = 0; n < e[i].addons.length; n++) e.isFunction(this["_addon_" + e[i].addons[n]]) && this["_addon_" + e[i].addons[n]]();
                    for (var s = 0; s < e[i].ui.length; s++) this.nodes.$wrpr.find("." + a[e[i].ui[s]]).length && this.nodes.$wrpr.addClass(a("has-" + e[i].ui[s]));
                    "close" == this.opts.wrapper.onClick && (this.nodes.$uibg || e().add(this.nodes.$capt || e()).add(this.nodes.$pagr || e()).on(o.click, (function (e) {
                        e.stopPropagation()
                    }))), this.vars.fixed ? (this.nodes.$wrpr.appendTo(l.$body), this.close(!0)) : (this.nodes.$wrpr.appendTo(this.opts.wrapper.target), this.opts.show ? (this.vars.opened = !1, this.open(0, !0)) : this.close(!0))
                },
                open: function (t, i) {
                    var n = this;
                    this.vars.opened || (this.vars.fixed && (l.scrollPosition = l.$wndw.scrollTop(), l.$body.addClass(a.opened), r.setViewportScale()), i ? this.nodes.$wrpr.addClass(a.opening).trigger(o.opening, [t, i]) : setTimeout((function () {
                        n.nodes.$wrpr.addClass(a.opening).trigger(o.opening, [t, i])
                    }), 5), this.nodes.$wrpr.addClass(a.hover).addClass(a.opened)), this.vars.opened = !0, this._loadContents(), e.isNumeric(t) && (i = i || !this.vars.opened, this.slideTo(t, i))
                },
                close: function (t) {
                    this.vars.opened && (this.vars.fixed && l.$body.removeClass(a.opened), t ? this.nodes.$wrpr.removeClass(a.opened) : r.transitionend(this.nodes.$wrpr, (function () {
                        e(this).removeClass(a.opened)
                    }), this.conf.transitionDuration), this.nodes.$wrpr.removeClass(a.hover).removeClass(a.opening).trigger(o.closing, [this.slides.index, t])), this.vars.opened = !1
                },
                prev: function (t, i) {
                    e.isNumeric(t) || (t = this.opts.slides.slide), this.slideTo(this.slides.index - t, i)
                },
                next: function (t, i) {
                    e.isNumeric(t) || (t = this.opts.slides.slide), this.slideTo(this.slides.index + t, i)
                },
                slideTo: function (t, n) {
                    if (!this.vars.opened) return !1;
                    if (!e.isNumeric(t)) return !1;
                    var s = !0;
                    if (0 > t) {
                        var l = 0 == this.slides.index;
                        this.opts.infinite ? t = l ? this.slides.total - this.slides.visible : 0 : (t = 0, l && (s = !1))
                    }
                    if (t + this.slides.visible > this.slides.total) {
                        var c = this.slides.index + this.slides.visible >= this.slides.total;
                        this.opts.infinite ? t = c ? 0 : this.slides.total - this.slides.visible : (t = this.slides.total - this.slides.visible, c && (s = !1))
                    }
                    if (this.slides.index = t, this._loadContents(), s) {
                        var d = 0 - this.slides.index * this.opts.slides.width + this.opts.slides.offset;
                        for (var p in this.slides.widthPercentage && (d += "%"), n && (this.nodes.$sldr.addClass(a.noanimation), r.transitionend(this.nodes.$sldr, (function () {
                            e(this).removeClass(a.noanimation)
                        }), 5)), e[i].effects)
                            if (p == this.opts.effect) {
                                e[i].effects[p].call(this, d, n);
                                break
                            } this.nodes.$wrpr.trigger(o.sliding, [t, n])
                    }
                },
                _initAnchors: function () {
                    var t = this,
                        n = e();
                    if (this.$node.is("a"))
                        for (var a in e[i].media) n = n.add(this.$node.filter((function () {
                            if (t.opts.media[a] && t.opts.media[a].filterAnchors) {
                                var n = t.opts.media[a].filterAnchors.call(t, e(this));
                                if ("boolean" == typeof n) return n
                            }
                            return e[i].media[a].filterAnchors.call(t, e(this))
                        })));
                    return n
                },
                _initSlides: function () {
                    return this[this.$node.is("a") ? "_initSlidesFromAnchors" : "_initSlidesFromContent"](), this.nodes.$sldr.children().css("width", this.opts.slides.width + (this.slides.widthPercentage ? "%" : "px"))
                },
                _initSlidesFromAnchors: function () {
                    var t = this;
                    this.nodes.$anchors.each((function (i) {
                        var n = e(this),
                            r = e('<div class="' + a.slide + " " + a.loading + '" />').data(s.anchor, n).appendTo(t.nodes.$sldr);
                        n.data(s.slide, r).on(o.click, (function (e) {
                            e.preventDefault(), t.open(i)
                        }))
                    }))
                },
                _initSlidesFromContent: function () {
                    var t = this;
                    this.$node.children().each((function () {
                        var n = e(this);
                        for (var s in e('<div class="' + a.slide + '" />').append(n).appendTo(t.nodes.$sldr), e[i].media) {
                            var o = null;
                            if (t.opts.media[s] && t.opts.media[s].filterSlides && (o = t.opts.media[s].filterSlides.call(t, n)), "boolean" != typeof o && (o = e[i].media[s].filterSlides.call(t, n)), o) {
                                e[i].media[s].initSlides.call(t, n), n.parent().addClass(a(s));
                                break
                            }
                        }
                    }))
                },
                _loadContents: function () {
                    var e = this;
                    switch (this.opts.slides.load) {
                        case "all":
                            this._loadContent(0, this.slides.total);
                            break;
                        case "visible":
                            this._loadContent(this.slides.index, this.slides.index + this.slides.visible);
                            break;
                        default:
                            this._loadContent(this.slides.index, this.slides.index + this.slides.visible), setTimeout((function () {
                                e._loadContent(e.slides.index - e.slides.visible, e.slides.index), e._loadContent(e.slides.index + e.slides.visible, e.slides.index + 2 * e.slides.visible)
                            }), this.conf.transitionDuration)
                    }
                },
                _loadContent: function (t, n) {
                    var r = this;
                    this.nodes.$slides.slice(t, n).each((function () {
                        var t = e(this);
                        if (0 == t.children().length) {
                            var n = t.data(s.anchor),
                                l = n.attr("href");
                            for (var c in e[i].media) {
                                var d = null;
                                if (r.opts.media[c] && r.opts.media[c].filterAnchors && (d = r.opts.media[c].filterAnchors.call(r, n)), "boolean" != typeof d && (d = e[i].media[c].filterAnchors.call(r, n)), d) {
                                    e[i].media[c].initAnchors.call(r, t, l), t.addClass(a(c));
                                    break
                                }
                            }
                            t.trigger(o.loading, [t.data(s.anchor)])
                        }
                    }))
                },
                _complementOptions: function () {
                    if (void 0 === this.opts.wrapper.target && (this.opts.wrapper.target = this.$node.is("a") ? "window" : this.$node), "window" != this.opts.wrapper.target && "string" == typeof this.opts.wrapper.target && (this.opts.wrapper.target = e(this.opts.wrapper.target)), this.opts.show = r.complBoolean(this.opts.show, "window" != this.opts.wrapper.target), e.isNumeric(this.opts.slides.width)) this.slides.widthPercentage = !1, this.opts.slides.visible = r.complNumber(this.opts.slides.visible, 1);
                    else {
                        var t = !!r.isPercentage(this.opts.slides.width) && r.getPercentage(this.opts.slides.width);
                        this.slides.widthPercentage = !0, this.opts.slides.visible = r.complNumber(this.opts.slides.visible, t ? Math.floor(100 / t) : 1), this.opts.slides.width = t || Math.ceil(1e4 / this.opts.slides.visible) / 100
                    }
                    this.opts.slides.slide = r.complNumber(this.opts.slides.slide, this.opts.slides.visible), this.opts.slides.offset = r.isPercentage(this.opts.slides.offset) ? r.getPercentage(this.opts.slides.offset) : r.complNumber(this.opts.slides.offset, 0)
                },
                _uniqueID: function () {
                    return this.__uniqueID || (this.__uniqueID = 0), this.__uniqueID++, a("uid-" + this.__uniqueID)
                }
            }, e.fn[i] = function (n, a, s, o) {
                l.$wndw || t(), n = e.extend(!0, {}, e[i].defaults, n), n = e.extend(!0, {}, n, e[i].support.touch ? s : a), o = e.extend(!0, {}, e[i].configuration, o);
                var r = new e[i](this, n, o);
                return this.data(i, r), r.nodes.$wrpr
            }, e[i].support = {
                touch: "ontouchstart" in window.document || navigator.msMaxTouchPoints
            }, e[i].defaults = {
                infinite: !1,
                effect: "slide",
                wrapper: {
                    classes: "",
                    onClick: "toggleUI"
                },
                slides: {
                    offset: 0,
                    scale: "fit",
                    load: "near-visible",
                    visible: 1
                },
                media: {}
            }, e[i].configuration = {
                transitionDuration: 400
            }, e[i].constants = {}, e[i].debug = function () { }, e[i].deprecated = function (e, t) {
                "undefined" != typeof console && void 0 !== console.warn && console.warn(i + ": " + e + " is deprecated, use " + t + " instead.")
            }, e[i].effects = {
                slide: function (e) {
                    this.nodes.$sldr.css("left", e)
                },
                fade: function (t) {
                    r.transitionend(this.nodes.$sldr, (function () {
                        e(this).css("left", t).css("opacity", 1)
                    }), this.conf.transitionDuration), this.nodes.$sldr.css("opacity", 0)
                }
            }, e[i].version = "2.4.2", e[i].media = {}, e[i].addons = [], e[i].ui = []
        }
    }(jQuery),
    function (e) {
        var t, i = "tosrus",
            n = "autoplay",
            a = !1;
        e[i].prototype["_addon_" + n] = function () {
            a || (e[i]._c, e[i]._d, t = e[i]._e, e[i]._f, e[i]._g, t.add("mouseover mouseout"), a = !0);
            var s = this,
                o = this.opts[n];
            o.play && (this.opts.infinite = !0, this.nodes.$wrpr.on(t.sliding, (function () {
                s.autoplay()
            })), o.pauseOnHover && this.nodes.$wrpr.on(t.mouseover, (function () {
                s.autostop()
            })).on(t.mouseout, (function () {
                s.autoplay()
            })), this.autoplay())
        }, e[i].prototype.autoplay = function () {
            var e = this;
            this.autostop(), this.vars.autoplay = setTimeout((function () {
                e.next()
            }), this.opts[n].timeout)
        }, e[i].prototype.autostop = function () {
            this.vars.autoplay && clearTimeout(this.vars.autoplay)
        }, e[i].defaults[n] = {
            play: !1,
            timeout: 4e3,
            pauseOnHover: !1
        }, e[i].addons.push(n)
    }(jQuery),
    function (e) {
        function t(t, i) {
            return e('<a class="' + n[t] + i + '" href="#"><span></span></a>')
        }

        function i(e, t, i, n) {
            t.on(a.click, (function (t) {
                t.preventDefault(), t.stopPropagation(), e.trigger(a[i], [n])
            }))
        }
        var n, a, s = "tosrus",
            o = "buttons",
            r = !1;
        e[s].prototype["_addon_" + o] = function () {
            r || (n = e[s]._c, e[s]._d, a = e[s]._e, e[s]._f, e[s]._g, n.add("prev next close disabled"), r = !0);
            var l = this,
                c = this.opts[o];
            this.nodes.$prev = null, this.nodes.$next = null, this.nodes.$clse = null, ("boolean" == typeof c || "string" == typeof c && "inline" == c) && (c = {
                prev: c,
                next: c
            }), void 0 === c.close && (c.close = this.vars.fixed), this.nodes.$slides.length < 2 && (c.prev = !1, c.next = !1), e.each({
                prev: "prev",
                next: "next",
                close: "clse"
            }, (function (s, o) {
                c[s] && ("string" == typeof c[s] && "inline" == c[s] ? l.vars.fixed && "close" != s && l.nodes.$slides.on(a.loading, (function () {
                    var a = t(s, " " + n.inline)["prev" == s ? "prependTo" : "appendTo"](this);
                    i(l.nodes.$wrpr, a, s, 1), l.opts.infinite || ("prev" == s && e(this).is(":first-child") || "next" == s && e(this).is(":last-child")) && a.addClass(n.disabled)
                })) : ("string" == typeof c[s] && (c[s] = e(c[s])), l.nodes["$" + o] = c[s] instanceof e ? c[s] : t(s, "").appendTo(l.nodes.$wrpr), i(l.nodes.$wrpr, l.nodes["$" + o], s, null)))
            })), this.opts.infinite || (this.updateButtons(), this.nodes.$wrpr.on(a.sliding, (function () {
                l.updateButtons()
            })))
        }, e[s].prototype.updateButtons = function () {
            this.nodes.$prev && this.nodes.$prev[(this.slides.index < 1 ? "add" : "remove") + "Class"](n.disabled), this.nodes.$next && this.nodes.$next[(this.slides.index >= this.slides.total - this.slides.visible ? "add" : "remove") + "Class"](n.disabled)
        }, e[s].defaults[o] = {
            prev: !e[s].support.touch,
            next: !e[s].support.touch
        }, e[s].addons.push(o), e[s].ui.push("prev"), e[s].ui.push("next"), e[s].ui.push("close")
    }(jQuery),
    function (e) {
        var t, i, n, a = "tosrus",
            s = "caption",
            o = !1;
        e[a].prototype["_addon_" + s] = function () {
            o || (t = e[a]._c, i = e[a]._d, n = e[a]._e, e[a]._f, e[a]._g, t.add("caption uibg"), i.add("caption"), o = !0);
            var r = this,
                l = this.opts[s];
            if (l.add) {
                l.attributes = l.attributes || [], "string" == typeof l.target && (l.target = e(l.target)), l.target instanceof e ? this.nodes.$capt = l.target : (this.nodes.$capt = e('<div class="' + t.caption + '" />').appendTo(this.nodes.$wrpr), this.nodes.$uibg || (this.nodes.$uibg = e('<div class="' + t.uibg + '" />').prependTo(this.nodes.$wrpr)));
                for (var c = 0, d = this.slides.visible; d > c; c++) e('<div class="' + t.caption + "-" + c + '" />').css("width", this.opts.slides.width + (this.slides.widthPercentage ? "%" : "px")).appendTo(this.nodes.$capt);
                this.nodes.$slides.each((function () {
                    var t = e(this),
                        n = r.vars.fixed ? t.data(i.anchor) : t.children();
                    t.data(i.caption, "");
                    for (var a = 0, s = l.attributes.length; s > a; a++) {
                        var o = n.attr(l.attributes[a]);
                        if (o && o.length) {
                            t.data(i.caption, o);
                            break
                        }
                    }
                })), this.nodes.$wrpr.on(n.sliding, (function () {
                    for (var e = 0, t = r.slides.visible; t > e; e++) r.nodes.$capt.children().eq(e).html(r.nodes.$sldr.children().eq(r.slides.index + e).data(i.caption) || "")
                }))
            }
        }, e[a].defaults[s] = {
            add: !1,
            target: null,
            attributes: ["title", "alt", "rel"]
        }, e[a].addons.push(s), e[a].ui.push("caption")
    }(jQuery),
    function (e) {
        if ("function" == typeof Hammer) {
            var t, i, n, a = "tosrus",
                s = "drag",
                o = !1;
            e[a].prototype["_addon_" + s] = function () {
                o || (t = e[a]._c, e[a]._d, i = e[a]._e, n = e[a]._f, e[a]._g, o = !0);
                var r = this;
                if (this.opts[s] && "slide" == this.opts.effect) {
                    if (Hammer.VERSION < 2) return void e[a].deprecated("Older version of the Hammer library", "version 2 or newer");
                    if (this.nodes.$slides.length > 1) {
                        var l = 0,
                            c = !1,
                            d = !1;
                        new Hammer(this.nodes.$wrpr[0]).on("panstart panleft panright panend swipeleft swiperight", (function (e) {
                            e.preventDefault()
                        })).on("panstart", (function () {
                            r.nodes.$sldr.addClass(t.noanimation)
                        })).on("panleft panright", (function (e) {
                            switch (l = e.deltaX, d = !1, e.direction) {
                                case 2:
                                    c = "left";
                                    break;
                                case 4:
                                    c = "right";
                                    break;
                                default:
                                    c = !1
                            }("left" == c && r.slides.index + r.slides.visible >= r.slides.total || "right" == c && 0 == r.slides.index) && (l /= 2.5), r.nodes.$sldr.css("margin-left", Math.round(l))
                        })).on("swipeleft swiperight", (function () {
                            d = !0
                        })).on("panend", (function () {
                            if (r.nodes.$sldr.removeClass(t.noanimation).addClass(t.fastanimation), n.transitionend(r.nodes.$sldr, (function () {
                                r.nodes.$sldr.removeClass(t.fastanimation)
                            }), r.conf.transitionDuration / 2), r.nodes.$sldr.css("margin-left", 0), "left" == c || "right" == c) {
                                if (d) var e = r.slides.visible;
                                else {
                                    var a = r.nodes.$slides.first().width();
                                    e = Math.floor((Math.abs(l) + a / 2) / a)
                                }
                                e > 0 && r.nodes.$wrpr.trigger(i["left" == c ? "next" : "prev"], [e])
                            }
                            c = !1
                        }))
                    }
                }
            }, e[a].defaults[s] = e[a].support.touch, e[a].addons.push(s)
        }
    }(jQuery),
    function (e) {
        var t, i = "tosrus",
            n = "keys",
            a = !1;
        e[i].prototype["_addon_" + n] = function () {
            a || (e[i]._c, e[i]._d, t = e[i]._e, e[i]._f, e[i]._g, t.add("keyup"), a = !0);
            var s = this,
                o = this.opts[n];
            if ("boolean" == typeof o && o && (o = {
                prev: !0,
                next: !0,
                close: !0
            }), e.isPlainObject(o)) {
                for (var r in e[i].constants[n]) "boolean" == typeof o[r] && o[r] && (o[r] = e[i].constants[n][r]);
                this.nodes.$slides.length < 2 && (o.prev = !1, o.next = !1), e(document).on(t.keyup, (function (e) {
                    if (s.vars.opened) {
                        var i = !1;
                        switch (e.keyCode) {
                            case o.prev:
                                i = t.prev;
                                break;
                            case o.next:
                                i = t.next;
                                break;
                            case o.close:
                                i = t.close
                        }
                        i && (e.preventDefault(), e.stopPropagation(), s.nodes.$wrpr.trigger(i))
                    }
                }))
            }
        }, e[i].defaults[n] = !1, e[i].constants[n] = {
            prev: 37,
            next: 39,
            close: 27
        }, e[i].addons.push(n)
    }(jQuery),
    function (e) {
        var t, i, n, a = "tosrus",
            s = "pagination",
            o = !1;
        e[a].prototype["_addon_" + s] = function () {
            o || (t = e[a]._c, i = e[a]._d, n = e[a]._e, e[a]._f, e[a]._g, t.add("pagination selected uibg bullets thumbnails"), o = !0);
            var r = this,
                l = this.opts[s];
            if (this.nodes.$slides.length < 2 && (l.add = !1), l.add) {
                if ("string" == typeof l.target && (l.target = e(l.target)), l.target instanceof e ? this.nodes.$pagr = l.target : (this.nodes.$pagr = e('<div class="' + t.pagination + " " + t[l.type] + '" />').appendTo(this.nodes.$wrpr), this.nodes.$uibg || (this.nodes.$uibg = e('<div class="' + t.uibg + '" />').prependTo(this.nodes.$wrpr))), "function" != typeof l.anchorBuilder)
                    if ("thumbnails" === l.type) {
                        var c = '<a href="#" style="background-image: url(',
                            d = ');"></a>';
                        l.anchorBuilder = this.vars.fixed ? function () {
                            return c + e(this).data(i.anchor).attr("href") + d
                        } : function () {
                            return c + e(this).find("img").attr("src") + d
                        }
                    } else l.anchorBuilder = function () {
                        return '<a href="#"></a>'
                    };
                this.nodes.$slides.each((function (t) {
                    e(l.anchorBuilder.call(this, t + 1)).appendTo(r.nodes.$pagr).on(n.click, (function (e) {
                        e.preventDefault(), e.stopPropagation(), r.nodes.$wrpr.trigger(n.slideTo, [t])
                    }))
                })), this.updatePagination(), this.nodes.$wrpr.on(n.sliding, (function () {
                    r.updatePagination()
                }))
            }
        }, e[a].prototype.updatePagination = function () {
            this.nodes.$pagr && this.nodes.$pagr.children().removeClass(t.selected).eq(this.slides.index).addClass(t.selected)
        }, e[a].defaults[s] = {
            add: !1,
            type: "bullets",
            target: null,
            anchorBuilder: null
        }, e[a].addons.push(s), e[a].ui.push("pagination"), e[a].ui.push("bullets"), e[a].ui.push("thumbnails")
    }(jQuery),
    function (e) {
        var t = "tosrus",
            i = "html";
        e[t].media[i] = {
            filterAnchors: function (t) {
                var i = t.attr("href");
                return "#" == i.slice(0, 1) && e(i).is("div")
            },
            initAnchors: function (i, n) {
                e('<div class="' + e[t]._c("html") + '" />').append(e(n)).appendTo(i), i.removeClass(e[t]._c.loading).trigger(e[t]._e.loaded)
            },
            filterSlides: function (e) {
                return e.is("div")
            },
            initSlides: function () { }
        }, e[t].defaults.media[i] = {}
    }(jQuery),
    function (e) {
        var t = "tosrus",
            i = "image";
        e[t].media[i] = {
            filterAnchors: function (t) {
                return e.inArray(t.attr("href").toLowerCase().split(".").pop().split("?")[0], ["jpg", "jpe", "jpeg", "gif", "png"]) > -1
            },
            initAnchors: function (i, n) {
                e('<img border="0" />').on(e[t]._e.load, (function (n) {
                    n.stopPropagation(), i.removeClass(e[t]._c.loading).trigger(e[t]._e.loaded)
                })).appendTo(i).attr("src", n)
            },
            filterSlides: function (e) {
                return e.is("img")
            },
            initSlides: function () { }
        }, e[t].defaults.media[i] = {}
    }(jQuery),
    function (e) {
        function t(t) {
            function d() {
                p.length && (p.attr("src", ""), p.attr("src", h))
            }
            c || (i = e[r]._c, n = e[r]._d, a = e[r]._e, s = e[r]._f, o = e[r]._g, n.add("ratio maxWidth maxHeight"), c = !0);
            var p = t.children(),
                u = t.data(e[r]._d.anchor) || e(),
                h = p.attr("src"),
                f = u.data(n.ratio) || this.opts[l].ratio,
                m = u.data(n.maxWidth) || this.opts[l].maxWidth,
                g = u.data(n.maxHeight) || this.opts[l].maxHeight;
            t.removeClass(i.loading).trigger(a.loaded).on(a.loading, (function () {
                s.resizeRatio(p, t, m, g, f)
            })), this.nodes.$wrpr.on(a.sliding, (function () {
                d()
            })).on(a.closing, (function () {
                d()
            })), o.$wndw.on(a.resize, (function () {
                s.resizeRatio(p, t, m, g, f)
            }))
        }
        var i, n, a, s, o, r = "tosrus",
            l = "vimeo",
            c = !1;
        e[r].media[l] = {
            filterAnchors: function (e) {
                return e.attr("href").toLowerCase().indexOf("vimeo.com/") > -1
            },
            initAnchors: function (i, n) {
                var a = this._uniqueID();
                n = n.split("vimeo.com/")[1].split("?")[0] + "?api=1&player_id=" + a, e('<iframe id="' + a + '" src="http://player.vimeo.com/video/' + n + '" frameborder="0" allowfullscreen />').appendTo(i), t.call(this, i)
            },
            filterSlides: function (e) {
                return !(!e.is("iframe") || !e.attr("src")) && e.attr("src").toLowerCase().indexOf("vimeo.com/video/") > -1
            },
            initSlides: function (e) {
                t.call(this, e)
            }
        }, e[r].defaults.media[l] = {}, e[r].defaults[l] = {
            ratio: 16 / 9,
            maxWidth: !1,
            maxHeight: !1
        }
    }(jQuery),
    function (e) {
        function t(t) {
            function d(e) {
                p.length && p[0].contentWindow.postMessage('{ "event": "command", "func": "' + e + 'Video" }', "*")
            }
            c || (i = e[r]._c, n = e[r]._d, a = e[r]._e, s = e[r]._f, o = e[r]._g, n.add("ratio maxWidth maxHeight"), c = !0);
            var p = t.children(),
                u = t.data(e[r]._d.anchor) || e(),
                h = u.data(n.ratio) || this.opts[l].ratio,
                f = u.data(n.maxWidth) || this.opts[l].maxWidth,
                m = u.data(n.maxHeight) || this.opts[l].maxHeight;
            t.removeClass(i.loading).trigger(a.loaded).on(a.loading, (function () {
                s.resizeRatio(p, t, f, m, h)
            })), this.nodes.$wrpr.on(a.sliding, (function () {
                d("pause")
            })).on(a.closing, (function () {
                d("stop")
            })), o.$wndw.on(a.resize, (function () {
                s.resizeRatio(p, t, f, m, h)
            }))
        }
        var i, n, a, s, o, r = "tosrus",
            l = "youtube",
            c = !1;
        e[r].media[l] = {
            filterAnchors: function (e) {
                return e.attr("href").toLowerCase().indexOf("youtube.com/watch?v=") > -1
            },
            initAnchors: function (i, n) {
                var a = n;
                n = n.split("?v=")[1].split("&")[0], this.opts[l].imageLink ? (n = "http://img.youtube.com/vi/" + n + "/0.jpg", e('<a href="' + a + '" class="' + e[r]._c("play") + '" target="_blank" />').appendTo(i), e('<img border="0" />').on(e[r]._e.load, (function (t) {
                    t.stopPropagation(), i.removeClass(e[r]._c.loading).trigger(e[r]._e.loaded)
                })).appendTo(i).attr("src", n)) : (e('<iframe src="http://www.youtube.com/embed/' + n + '?enablejsapi=1" frameborder="0" allowfullscreen />').appendTo(i), t.call(this, i))
            },
            filterSlides: function (e) {
                return !(!e.is("iframe") || !e.attr("src")) && e.attr("src").toLowerCase().indexOf("youtube.com/embed/") > -1
            },
            initSlides: function (e) {
                t.call(this, e)
            }
        }, e[r].defaults.media[l] = {}, e[r].defaults[l] = {
            ratio: 16 / 9,
            maxWidth: !1,
            maxHeight: !1,
            imageLink: e[r].support.touch
        }
    }(jQuery),
    /*!
     *  CodeMirror
       Generated on 05/03/2020
       Version: 5.52.0

       CodeMirror Library:
       - codemirror.js
       Modes:
       - css.js
       - htmlmixed.js
       - javascript.js
       - sql.js
       - xml.js
       Add-ons:
       - match-brackets.js
       - active-line.js
       - fullscreen.js
     */
    function (e, t) {
        "object" == typeof exports && "undefined" != typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define(t) : e.CodeMirror = t()
    }(this, (function () {
        "use strict";
        var e = navigator.userAgent,
            t = navigator.platform,
            i = /gecko\/\d/i.test(e),
            n = /MSIE \d/.test(e),
            a = /Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),
            s = /Edge\/(\d+)/.exec(e),
            o = n || a || s,
            r = o && (n ? document.documentMode || 6 : +(s || a)[1]),
            l = !s && /WebKit\//.test(e),
            c = l && /Qt\/\d+\.\d+/.test(e),
            d = !s && /Chrome\//.test(e),
            p = /Opera\//.test(e),
            u = /Apple Computer/.test(navigator.vendor),
            h = /Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),
            f = /PhantomJS/.test(e),
            m = !s && /AppleWebKit/.test(e) && /Mobile\/\w+/.test(e),
            g = /Android/.test(e),
            v = m || g || /webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),
            b = m || /Mac/.test(t),
            y = /\bCrOS\b/.test(e),
            w = /win/i.test(t),
            _ = p && e.match(/Version\/(\d*\.\d*)/);
        _ && (_ = Number(_[1])), _ && _ >= 15 && (p = !1, l = !0);
        var T = b && (c || p && (null == _ || _ < 12.11)),
            C = i || o && r >= 9;

        function k(e) {
            return new RegExp("(^|\\s)" + e + "(?:$|\\s)\\s*")
        }
        var E, x = function (e, t) {
            var i = e.className,
                n = k(t).exec(i);
            if (n) {
                var a = i.slice(n.index + n[0].length);
                e.className = i.slice(0, n.index) + (a ? n[1] + a : "")
            }
        };

        function S(e) {
            for (var t = e.childNodes.length; t > 0; --t) e.removeChild(e.firstChild);
            return e
        }

        function M(e, t) {
            return S(e).appendChild(t)
        }

        function P(e, t, i, n) {
            var a = document.createElement(e);
            if (i && (a.className = i), n && (a.style.cssText = n), "string" == typeof t) a.appendChild(document.createTextNode(t));
            else if (t)
                for (var s = 0; s < t.length; ++s) a.appendChild(t[s]);
            return a
        }

        function I(e, t, i, n) {
            var a = P(e, t, i, n);
            return a.setAttribute("role", "presentation"), a
        }

        function O(e, t) {
            if (3 == t.nodeType && (t = t.parentNode), e.contains) return e.contains(t);
            do {
                if (11 == t.nodeType && (t = t.host), t == e) return !0
            } while (t = t.parentNode)
        }

        function A() {
            var e;
            try {
                e = document.activeElement
            } catch (t) {
                e = document.body || null
            }
            for (; e && e.shadowRoot && e.shadowRoot.activeElement;) e = e.shadowRoot.activeElement;
            return e
        }

        function L(e, t) {
            var i = e.className;
            k(t).test(i) || (e.className += (i ? " " : "") + t)
        }

        function D(e, t) {
            for (var i = e.split(" "), n = 0; n < i.length; n++) i[n] && !k(i[n]).test(t) && (t += " " + i[n]);
            return t
        }
        E = document.createRange ? function (e, t, i, n) {
            var a = document.createRange();
            return a.setEnd(n || e, i), a.setStart(e, t), a
        } : function (e, t, i) {
            var n = document.body.createTextRange();
            try {
                n.moveToElementText(e.parentNode)
            } catch (e) {
                return n
            }
            return n.collapse(!0), n.moveEnd("character", i), n.moveStart("character", t), n
        };
        var N = function (e) {
            e.select()
        };

        function R(e) {
            var t = Array.prototype.slice.call(arguments, 1);
            return function () {
                return e.apply(null, t)
            }
        }

        function W(e, t, i) {
            for (var n in t || (t = {}), e) !e.hasOwnProperty(n) || !1 === i && t.hasOwnProperty(n) || (t[n] = e[n]);
            return t
        }

        function F(e, t, i, n, a) {
            null == t && -1 == (t = e.search(/[^\s\u00a0]/)) && (t = e.length);
            for (var s = n || 0, o = a || 0; ;) {
                var r = e.indexOf("\t", s);
                if (r < 0 || r >= t) return o + (t - s);
                o += r - s, o += i - o % i, s = r + 1
            }
        }
        m ? N = function (e) {
            e.selectionStart = 0, e.selectionEnd = e.value.length
        } : o && (N = function (e) {
            try {
                e.select()
            } catch (e) { }
        });
        var B = function () {
            this.id = null, this.f = null, this.time = 0, this.handler = R(this.onTimeout, this)
        };

        function U(e, t) {
            for (var i = 0; i < e.length; ++i)
                if (e[i] == t) return i;
            return -1
        }
        B.prototype.onTimeout = function (e) {
            e.id = 0, e.time <= +new Date ? e.f() : setTimeout(e.handler, e.time - +new Date)
        }, B.prototype.set = function (e, t) {
            this.f = t;
            var i = +new Date + e;
            (!this.id || i < this.time) && (clearTimeout(this.id), this.id = setTimeout(this.handler, e), this.time = i)
        };
        var H = 30,
            z = {
                toString: function () {
                    return "CodeMirror.Pass"
                }
            },
            G = {
                scroll: !1
            },
            $ = {
                origin: "*mouse"
            },
            q = {
                origin: "+move"
            };

        function j(e, t, i) {
            for (var n = 0, a = 0; ;) {
                var s = e.indexOf("\t", n); - 1 == s && (s = e.length);
                var o = s - n;
                if (s == e.length || a + o >= t) return n + Math.min(o, t - a);
                if (a += s - n, n = s + 1, (a += i - a % i) >= t) return n
            }
        }
        var V = [""];

        function Y(e) {
            for (; V.length <= e;) V.push(K(V) + " ");
            return V[e]
        }

        function K(e) {
            return e[e.length - 1]
        }

        function X(e, t) {
            for (var i = [], n = 0; n < e.length; n++) i[n] = t(e[n], n);
            return i
        }

        function Q() { }

        function J(e, t) {
            var i;
            return Object.create ? i = Object.create(e) : (Q.prototype = e, i = new Q), t && W(t, i), i
        }
        var Z = /[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;

        function ee(e) {
            return /\w/.test(e) || e > "Â€" && (e.toUpperCase() != e.toLowerCase() || Z.test(e))
        }

        function te(e, t) {
            return t ? !!(t.source.indexOf("\\w") > -1 && ee(e)) || t.test(e) : ee(e)
        }

        function ie(e) {
            for (var t in e)
                if (e.hasOwnProperty(t) && e[t]) return !1;
            return !0
        }
        var ne = /[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;

        function ae(e) {
            return e.charCodeAt(0) >= 768 && ne.test(e)
        }

        function se(e, t, i) {
            for (;
                (i < 0 ? t > 0 : t < e.length) && ae(e.charAt(t));) t += i;
            return t
        }

        function oe(e, t, i) {
            for (var n = t > i ? -1 : 1; ;) {
                if (t == i) return t;
                var a = (t + i) / 2,
                    s = n < 0 ? Math.ceil(a) : Math.floor(a);
                if (s == t) return e(s) ? t : i;
                e(s) ? i = s : t = s + n
            }
        }
        var re = null;

        function le(e, t, i) {
            var n;
            re = null;
            for (var a = 0; a < e.length; ++a) {
                var s = e[a];
                if (s.from < t && s.to > t) return a;
                s.to == t && (s.from != s.to && "before" == i ? n = a : re = a), s.from == t && (s.from != s.to && "before" != i ? n = a : re = a)
            }
            return null != n ? n : re
        }
        var ce = function () {
            var e = /[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,
                t = /[stwN]/,
                i = /[LRr]/,
                n = /[Lb1n]/,
                a = /[1n]/;

            function s(e, t, i) {
                this.level = e, this.from = t, this.to = i
            }
            return function (o, r) {
                var l = "ltr" == r ? "L" : "R";
                if (0 == o.length || "ltr" == r && !e.test(o)) return !1;
                for (var c, d = o.length, p = [], u = 0; u < d; ++u) p.push((c = o.charCodeAt(u)) <= 247 ? "bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(c) : 1424 <= c && c <= 1524 ? "R" : 1536 <= c && c <= 1785 ? "nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(c - 1536) : 1774 <= c && c <= 2220 ? "r" : 8192 <= c && c <= 8203 ? "w" : 8204 == c ? "b" : "L");
                for (var h = 0, f = l; h < d; ++h) {
                    var m = p[h];
                    "m" == m ? p[h] = f : f = m
                }
                for (var g = 0, v = l; g < d; ++g) {
                    var b = p[g];
                    "1" == b && "r" == v ? p[g] = "n" : i.test(b) && (v = b, "r" == b && (p[g] = "R"))
                }
                for (var y = 1, w = p[0]; y < d - 1; ++y) {
                    var _ = p[y];
                    "+" == _ && "1" == w && "1" == p[y + 1] ? p[y] = "1" : "," != _ || w != p[y + 1] || "1" != w && "n" != w || (p[y] = w), w = _
                }
                for (var T = 0; T < d; ++T) {
                    var C = p[T];
                    if ("," == C) p[T] = "N";
                    else if ("%" == C) {
                        var k = void 0;
                        for (k = T + 1; k < d && "%" == p[k]; ++k);
                        for (var E = T && "!" == p[T - 1] || k < d && "1" == p[k] ? "1" : "N", x = T; x < k; ++x) p[x] = E;
                        T = k - 1
                    }
                }
                for (var S = 0, M = l; S < d; ++S) {
                    var P = p[S];
                    "L" == M && "1" == P ? p[S] = "L" : i.test(P) && (M = P)
                }
                for (var I = 0; I < d; ++I)
                    if (t.test(p[I])) {
                        var O = void 0;
                        for (O = I + 1; O < d && t.test(p[O]); ++O);
                        for (var A = "L" == (I ? p[I - 1] : l), L = A == ("L" == (O < d ? p[O] : l)) ? A ? "L" : "R" : l, D = I; D < O; ++D) p[D] = L;
                        I = O - 1
                    } for (var N, R = [], W = 0; W < d;)
                    if (n.test(p[W])) {
                        var F = W;
                        for (++W; W < d && n.test(p[W]); ++W);
                        R.push(new s(0, F, W))
                    } else {
                        var B = W,
                            U = R.length,
                            H = "rtl" == r ? 1 : 0;
                        for (++W; W < d && "L" != p[W]; ++W);
                        for (var z = B; z < W;)
                            if (a.test(p[z])) {
                                B < z && (R.splice(U, 0, new s(1, B, z)), U += H);
                                var G = z;
                                for (++z; z < W && a.test(p[z]); ++z);
                                R.splice(U, 0, new s(2, G, z)), U += H, B = z
                            } else ++z;
                        B < W && R.splice(U, 0, new s(1, B, W))
                    } return "ltr" == r && (1 == R[0].level && (N = o.match(/^\s+/)) && (R[0].from = N[0].length, R.unshift(new s(0, 0, N[0].length))), 1 == K(R).level && (N = o.match(/\s+$/)) && (K(R).to -= N[0].length, R.push(new s(0, d - N[0].length, d)))), "rtl" == r ? R.reverse() : R
            }
        }();

        function de(e, t) {
            var i = e.order;
            return null == i && (i = e.order = ce(e.text, t)), i
        }
        var pe = [],
            ue = function (e, t, i) {
                if (e.addEventListener) e.addEventListener(t, i, !1);
                else if (e.attachEvent) e.attachEvent("on" + t, i);
                else {
                    var n = e._handlers || (e._handlers = {});
                    n[t] = (n[t] || pe).concat(i)
                }
            };

        function he(e, t) {
            return e._handlers && e._handlers[t] || pe
        }

        function fe(e, t, i) {
            if (e.removeEventListener) e.removeEventListener(t, i, !1);
            else if (e.detachEvent) e.detachEvent("on" + t, i);
            else {
                var n = e._handlers,
                    a = n && n[t];
                if (a) {
                    var s = U(a, i);
                    s > -1 && (n[t] = a.slice(0, s).concat(a.slice(s + 1)))
                }
            }
        }

        function me(e, t) {
            var i = he(e, t);
            if (i.length)
                for (var n = Array.prototype.slice.call(arguments, 2), a = 0; a < i.length; ++a) i[a].apply(null, n)
        }

        function ge(e, t, i) {
            return "string" == typeof t && (t = {
                type: t,
                preventDefault: function () {
                    this.defaultPrevented = !0
                }
            }), me(e, i || t.type, e, t), Te(t) || t.codemirrorIgnore
        }

        function ve(e) {
            var t = e._handlers && e._handlers.cursorActivity;
            if (t)
                for (var i = e.curOp.cursorActivityHandlers || (e.curOp.cursorActivityHandlers = []), n = 0; n < t.length; ++n) - 1 == U(i, t[n]) && i.push(t[n])
        }

        function be(e, t) {
            return he(e, t).length > 0
        }

        function ye(e) {
            e.prototype.on = function (e, t) {
                ue(this, e, t)
            }, e.prototype.off = function (e, t) {
                fe(this, e, t)
            }
        }

        function we(e) {
            e.preventDefault ? e.preventDefault() : e.returnValue = !1
        }

        function _e(e) {
            e.stopPropagation ? e.stopPropagation() : e.cancelBubble = !0
        }

        function Te(e) {
            return null != e.defaultPrevented ? e.defaultPrevented : 0 == e.returnValue
        }

        function Ce(e) {
            we(e), _e(e)
        }

        function ke(e) {
            return e.target || e.srcElement
        }

        function Ee(e) {
            var t = e.which;
            return null == t && (1 & e.button ? t = 1 : 2 & e.button ? t = 3 : 4 & e.button && (t = 2)), b && e.ctrlKey && 1 == t && (t = 3), t
        }
        var xe, Se, Me = function () {
            if (o && r < 9) return !1;
            var e = P("div");
            return "draggable" in e || "dragDrop" in e
        }();

        function Pe(e) {
            if (null == xe) {
                var t = P("span", "â€‹");
                M(e, P("span", [t, document.createTextNode("x")])), 0 != e.firstChild.offsetHeight && (xe = t.offsetWidth <= 1 && t.offsetHeight > 2 && !(o && r < 8))
            }
            var i = xe ? P("span", "â€‹") : P("span", "Â ", null, "display: inline-block; width: 1px; margin-right: -1px");
            return i.setAttribute("cm-text", ""), i
        }

        function Ie(e) {
            if (null != Se) return Se;
            var t = M(e, document.createTextNode("AØ®A")),
                i = E(t, 0, 1).getBoundingClientRect(),
                n = E(t, 1, 2).getBoundingClientRect();
            return S(e), !(!i || i.left == i.right) && (Se = n.right - i.right < 3)
        }
        var Oe, Ae = 3 != "\n\nb".split(/\n/).length ? function (e) {
            for (var t = 0, i = [], n = e.length; t <= n;) {
                var a = e.indexOf("\n", t); - 1 == a && (a = e.length);
                var s = e.slice(t, "\r" == e.charAt(a - 1) ? a - 1 : a),
                    o = s.indexOf("\r"); - 1 != o ? (i.push(s.slice(0, o)), t += o + 1) : (i.push(s), t = a + 1)
            }
            return i
        } : function (e) {
            return e.split(/\r\n?|\n/)
        },
            Le = window.getSelection ? function (e) {
                try {
                    return e.selectionStart != e.selectionEnd
                } catch (e) {
                    return !1
                }
            } : function (e) {
                var t;
                try {
                    t = e.ownerDocument.selection.createRange()
                } catch (e) { }
                return !(!t || t.parentElement() != e) && 0 != t.compareEndPoints("StartToEnd", t)
            },
            De = "oncopy" in (Oe = P("div")) || (Oe.setAttribute("oncopy", "return;"), "function" == typeof Oe.oncopy),
            Ne = null;
        var Re = {},
            We = {};

        function Fe(e, t) {
            arguments.length > 2 && (t.dependencies = Array.prototype.slice.call(arguments, 2)), Re[e] = t
        }

        function Be(e) {
            if ("string" == typeof e && We.hasOwnProperty(e)) e = We[e];
            else if (e && "string" == typeof e.name && We.hasOwnProperty(e.name)) {
                var t = We[e.name];
                "string" == typeof t && (t = {
                    name: t
                }), (e = J(t, e)).name = t.name
            } else {
                if ("string" == typeof e && /^[\w\-]+\/[\w\-]+\+xml$/.test(e)) return Be("application/xml");
                if ("string" == typeof e && /^[\w\-]+\/[\w\-]+\+json$/.test(e)) return Be("application/json")
            }
            return "string" == typeof e ? {
                name: e
            } : e || {
                name: "null"
            }
        }

        function Ue(e, t) {
            t = Be(t);
            var i = Re[t.name];
            if (!i) return Ue(e, "text/plain");
            var n = i(e, t);
            if (He.hasOwnProperty(t.name)) {
                var a = He[t.name];
                for (var s in a) a.hasOwnProperty(s) && (n.hasOwnProperty(s) && (n["_" + s] = n[s]), n[s] = a[s])
            }
            if (n.name = t.name, t.helperType && (n.helperType = t.helperType), t.modeProps)
                for (var o in t.modeProps) n[o] = t.modeProps[o];
            return n
        }
        var He = {};

        function ze(e, t) {
            W(t, He.hasOwnProperty(e) ? He[e] : He[e] = {})
        }

        function Ge(e, t) {
            if (!0 === t) return t;
            if (e.copyState) return e.copyState(t);
            var i = {};
            for (var n in t) {
                var a = t[n];
                a instanceof Array && (a = a.concat([])), i[n] = a
            }
            return i
        }

        function $e(e, t) {
            for (var i; e.innerMode && (i = e.innerMode(t)) && i.mode != e;) t = i.state, e = i.mode;
            return i || {
                mode: e,
                state: t
            }
        }

        function qe(e, t, i) {
            return !e.startState || e.startState(t, i)
        }
        var je = function (e, t, i) {
            this.pos = this.start = 0, this.string = e, this.tabSize = t || 8, this.lastColumnPos = this.lastColumnValue = 0, this.lineStart = 0, this.lineOracle = i
        };

        function Ve(e, t) {
            if ((t -= e.first) < 0 || t >= e.size) throw new Error("There is no line " + (t + e.first) + " in the document.");
            for (var i = e; !i.lines;)
                for (var n = 0; ; ++n) {
                    var a = i.children[n],
                        s = a.chunkSize();
                    if (t < s) {
                        i = a;
                        break
                    }
                    t -= s
                }
            return i.lines[t]
        }

        function Ye(e, t, i) {
            var n = [],
                a = t.line;
            return e.iter(t.line, i.line + 1, (function (e) {
                var s = e.text;
                a == i.line && (s = s.slice(0, i.ch)), a == t.line && (s = s.slice(t.ch)), n.push(s), ++a
            })), n
        }

        function Ke(e, t, i) {
            var n = [];
            return e.iter(t, i, (function (e) {
                n.push(e.text)
            })), n
        }

        function Xe(e, t) {
            var i = t - e.height;
            if (i)
                for (var n = e; n; n = n.parent) n.height += i
        }

        function Qe(e) {
            if (null == e.parent) return null;
            for (var t = e.parent, i = U(t.lines, e), n = t.parent; n; t = n, n = n.parent)
                for (var a = 0; n.children[a] != t; ++a) i += n.children[a].chunkSize();
            return i + t.first
        }

        function Je(e, t) {
            var i = e.first;
            e: do {
                for (var n = 0; n < e.children.length; ++n) {
                    var a = e.children[n],
                        s = a.height;
                    if (t < s) {
                        e = a;
                        continue e
                    }
                    t -= s, i += a.chunkSize()
                }
                return i
            } while (!e.lines);
            for (var o = 0; o < e.lines.length; ++o) {
                var r = e.lines[o].height;
                if (t < r) break;
                t -= r
            }
            return i + o
        }

        function Ze(e, t) {
            return t >= e.first && t < e.first + e.size
        }

        function et(e, t) {
            return String(e.lineNumberFormatter(t + e.firstLineNumber))
        }

        function tt(e, t, i) {
            if (void 0 === i && (i = null), !(this instanceof tt)) return new tt(e, t, i);
            this.line = e, this.ch = t, this.sticky = i
        }

        function it(e, t) {
            return e.line - t.line || e.ch - t.ch
        }

        function nt(e, t) {
            return e.sticky == t.sticky && 0 == it(e, t)
        }

        function at(e) {
            return tt(e.line, e.ch)
        }

        function st(e, t) {
            return it(e, t) < 0 ? t : e
        }

        function ot(e, t) {
            return it(e, t) < 0 ? e : t
        }

        function rt(e, t) {
            return Math.max(e.first, Math.min(t, e.first + e.size - 1))
        }

        function lt(e, t) {
            if (t.line < e.first) return tt(e.first, 0);
            var i = e.first + e.size - 1;
            return t.line > i ? tt(i, Ve(e, i).text.length) : function (e, t) {
                var i = e.ch;
                return null == i || i > t ? tt(e.line, t) : i < 0 ? tt(e.line, 0) : e
            }(t, Ve(e, t.line).text.length)
        }

        function ct(e, t) {
            for (var i = [], n = 0; n < t.length; n++) i[n] = lt(e, t[n]);
            return i
        }
        je.prototype.eol = function () {
            return this.pos >= this.string.length
        }, je.prototype.sol = function () {
            return this.pos == this.lineStart
        }, je.prototype.peek = function () {
            return this.string.charAt(this.pos) || void 0
        }, je.prototype.next = function () {
            if (this.pos < this.string.length) return this.string.charAt(this.pos++)
        }, je.prototype.eat = function (e) {
            var t = this.string.charAt(this.pos);
            if ("string" == typeof e ? t == e : t && (e.test ? e.test(t) : e(t))) return ++this.pos, t
        }, je.prototype.eatWhile = function (e) {
            for (var t = this.pos; this.eat(e););
            return this.pos > t
        }, je.prototype.eatSpace = function () {
            for (var e = this.pos;
                /[\s\u00a0]/.test(this.string.charAt(this.pos));) ++this.pos;
            return this.pos > e
        }, je.prototype.skipToEnd = function () {
            this.pos = this.string.length
        }, je.prototype.skipTo = function (e) {
            var t = this.string.indexOf(e, this.pos);
            if (t > -1) return this.pos = t, !0
        }, je.prototype.backUp = function (e) {
            this.pos -= e
        }, je.prototype.column = function () {
            return this.lastColumnPos < this.start && (this.lastColumnValue = F(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue), this.lastColumnPos = this.start), this.lastColumnValue - (this.lineStart ? F(this.string, this.lineStart, this.tabSize) : 0)
        }, je.prototype.indentation = function () {
            return F(this.string, null, this.tabSize) - (this.lineStart ? F(this.string, this.lineStart, this.tabSize) : 0)
        }, je.prototype.match = function (e, t, i) {
            if ("string" != typeof e) {
                var n = this.string.slice(this.pos).match(e);
                return n && n.index > 0 ? null : (n && !1 !== t && (this.pos += n[0].length), n)
            }
            var a = function (e) {
                return i ? e.toLowerCase() : e
            };
            if (a(this.string.substr(this.pos, e.length)) == a(e)) return !1 !== t && (this.pos += e.length), !0
        }, je.prototype.current = function () {
            return this.string.slice(this.start, this.pos)
        }, je.prototype.hideFirstChars = function (e, t) {
            this.lineStart += e;
            try {
                return t()
            } finally {
                this.lineStart -= e
            }
        }, je.prototype.lookAhead = function (e) {
            var t = this.lineOracle;
            return t && t.lookAhead(e)
        }, je.prototype.baseToken = function () {
            var e = this.lineOracle;
            return e && e.baseToken(this.pos)
        };
        var dt = function (e, t) {
            this.state = e, this.lookAhead = t
        },
            pt = function (e, t, i, n) {
                this.state = t, this.doc = e, this.line = i, this.maxLookAhead = n || 0, this.baseTokens = null, this.baseTokenPos = 1
            };

        function ut(e, t, i, n) {
            var a = [e.state.modeGen],
                s = {};
            _t(e, t.text, e.doc.mode, i, (function (e, t) {
                return a.push(e, t)
            }), s, n);
            for (var o = i.state, r = function (n) {
                i.baseTokens = a;
                var r = e.state.overlays[n],
                    l = 1,
                    c = 0;
                i.state = !0, _t(e, t.text, r.mode, i, (function (e, t) {
                    for (var i = l; c < e;) {
                        var n = a[l];
                        n > e && a.splice(l, 1, e, a[l + 1], n), l += 2, c = Math.min(e, n)
                    }
                    if (t)
                        if (r.opaque) a.splice(i, l - i, e, "overlay " + t), l = i + 2;
                        else
                            for (; i < l; i += 2) {
                                var s = a[i + 1];
                                a[i + 1] = (s ? s + " " : "") + "overlay " + t
                            }
                }), s), i.state = o, i.baseTokens = null, i.baseTokenPos = 1
            }, l = 0; l < e.state.overlays.length; ++l) r(l);
            return {
                styles: a,
                classes: s.bgClass || s.textClass ? s : null
            }
        }

        function ht(e, t, i) {
            if (!t.styles || t.styles[0] != e.state.modeGen) {
                var n = ft(e, Qe(t)),
                    a = t.text.length > e.options.maxHighlightLength && Ge(e.doc.mode, n.state),
                    s = ut(e, t, n);
                a && (n.state = a), t.stateAfter = n.save(!a), t.styles = s.styles, s.classes ? t.styleClasses = s.classes : t.styleClasses && (t.styleClasses = null), i === e.doc.highlightFrontier && (e.doc.modeFrontier = Math.max(e.doc.modeFrontier, ++e.doc.highlightFrontier))
            }
            return t.styles
        }

        function ft(e, t, i) {
            var n = e.doc,
                a = e.display;
            if (!n.mode.startState) return new pt(n, !0, t);
            var s = function (e, t, i) {
                for (var n, a, s = e.doc, o = i ? -1 : t - (e.doc.mode.innerMode ? 1e3 : 100), r = t; r > o; --r) {
                    if (r <= s.first) return s.first;
                    var l = Ve(s, r - 1),
                        c = l.stateAfter;
                    if (c && (!i || r + (c instanceof dt ? c.lookAhead : 0) <= s.modeFrontier)) return r;
                    var d = F(l.text, null, e.options.tabSize);
                    (null == a || n > d) && (a = r - 1, n = d)
                }
                return a
            }(e, t, i),
                o = s > n.first && Ve(n, s - 1).stateAfter,
                r = o ? pt.fromSaved(n, o, s) : new pt(n, qe(n.mode), s);
            return n.iter(s, t, (function (i) {
                mt(e, i.text, r);
                var n = r.line;
                i.stateAfter = n == t - 1 || n % 5 == 0 || n >= a.viewFrom && n < a.viewTo ? r.save() : null, r.nextLine()
            })), i && (n.modeFrontier = r.line), r
        }

        function mt(e, t, i, n) {
            var a = e.doc.mode,
                s = new je(t, e.options.tabSize, i);
            for (s.start = s.pos = n || 0, "" == t && gt(a, i.state); !s.eol();) vt(a, s, i.state), s.start = s.pos
        }

        function gt(e, t) {
            if (e.blankLine) return e.blankLine(t);
            if (e.innerMode) {
                var i = $e(e, t);
                return i.mode.blankLine ? i.mode.blankLine(i.state) : void 0
            }
        }

        function vt(e, t, i, n) {
            for (var a = 0; a < 10; a++) {
                n && (n[0] = $e(e, i).mode);
                var s = e.token(t, i);
                if (t.pos > t.start) return s
            }
            throw new Error("Mode " + e.name + " failed to advance stream.")
        }
        pt.prototype.lookAhead = function (e) {
            var t = this.doc.getLine(this.line + e);
            return null != t && e > this.maxLookAhead && (this.maxLookAhead = e), t
        }, pt.prototype.baseToken = function (e) {
            if (!this.baseTokens) return null;
            for (; this.baseTokens[this.baseTokenPos] <= e;) this.baseTokenPos += 2;
            var t = this.baseTokens[this.baseTokenPos + 1];
            return {
                type: t && t.replace(/( |^)overlay .*/, ""),
                size: this.baseTokens[this.baseTokenPos] - e
            }
        }, pt.prototype.nextLine = function () {
            this.line++, this.maxLookAhead > 0 && this.maxLookAhead--
        }, pt.fromSaved = function (e, t, i) {
            return t instanceof dt ? new pt(e, Ge(e.mode, t.state), i, t.lookAhead) : new pt(e, Ge(e.mode, t), i)
        }, pt.prototype.save = function (e) {
            var t = !1 !== e ? Ge(this.doc.mode, this.state) : this.state;
            return this.maxLookAhead > 0 ? new dt(t, this.maxLookAhead) : t
        };
        var bt = function (e, t, i) {
            this.start = e.start, this.end = e.pos, this.string = e.current(), this.type = t || null, this.state = i
        };

        function yt(e, t, i, n) {
            var a, s, o = e.doc,
                r = o.mode,
                l = Ve(o, (t = lt(o, t)).line),
                c = ft(e, t.line, i),
                d = new je(l.text, e.options.tabSize, c);
            for (n && (s = []);
                (n || d.pos < t.ch) && !d.eol();) d.start = d.pos, a = vt(r, d, c.state), n && s.push(new bt(d, a, Ge(o.mode, c.state)));
            return n ? s : new bt(d, a, c.state)
        }

        function wt(e, t) {
            if (e)
                for (; ;) {
                    var i = e.match(/(?:^|\s+)line-(background-)?(\S+)/);
                    if (!i) break;
                    e = e.slice(0, i.index) + e.slice(i.index + i[0].length);
                    var n = i[1] ? "bgClass" : "textClass";
                    null == t[n] ? t[n] = i[2] : new RegExp("(?:^|s)" + i[2] + "(?:$|s)").test(t[n]) || (t[n] += " " + i[2])
                }
            return e
        }

        function _t(e, t, i, n, a, s, o) {
            var r = i.flattenSpans;
            null == r && (r = e.options.flattenSpans);
            var l, c = 0,
                d = null,
                p = new je(t, e.options.tabSize, n),
                u = e.options.addModeClass && [null];
            for ("" == t && wt(gt(i, n.state), s); !p.eol();) {
                if (p.pos > e.options.maxHighlightLength ? (r = !1, o && mt(e, t, n, p.pos), p.pos = t.length, l = null) : l = wt(vt(i, p, n.state, u), s), u) {
                    var h = u[0].name;
                    h && (l = "m-" + (l ? h + " " + l : h))
                }
                if (!r || d != l) {
                    for (; c < p.start;) a(c = Math.min(p.start, c + 5e3), d);
                    d = l
                }
                p.start = p.pos
            }
            for (; c < p.pos;) {
                var f = Math.min(p.pos, c + 5e3);
                a(f, d), c = f
            }
        }
        var Tt = !1,
            Ct = !1;

        function kt(e, t, i) {
            this.marker = e, this.from = t, this.to = i
        }

        function Et(e, t) {
            if (e)
                for (var i = 0; i < e.length; ++i) {
                    var n = e[i];
                    if (n.marker == t) return n
                }
        }

        function xt(e, t) {
            for (var i, n = 0; n < e.length; ++n) e[n] != t && (i || (i = [])).push(e[n]);
            return i
        }

        function St(e, t) {
            if (t.full) return null;
            var i = Ze(e, t.from.line) && Ve(e, t.from.line).markedSpans,
                n = Ze(e, t.to.line) && Ve(e, t.to.line).markedSpans;
            if (!i && !n) return null;
            var a = t.from.ch,
                s = t.to.ch,
                o = 0 == it(t.from, t.to),
                r = function (e, t, i) {
                    var n;
                    if (e)
                        for (var a = 0; a < e.length; ++a) {
                            var s = e[a],
                                o = s.marker;
                            if (null == s.from || (o.inclusiveLeft ? s.from <= t : s.from < t) || s.from == t && "bookmark" == o.type && (!i || !s.marker.insertLeft)) {
                                var r = null == s.to || (o.inclusiveRight ? s.to >= t : s.to > t);
                                (n || (n = [])).push(new kt(o, s.from, r ? null : s.to))
                            }
                        }
                    return n
                }(i, a, o),
                l = function (e, t, i) {
                    var n;
                    if (e)
                        for (var a = 0; a < e.length; ++a) {
                            var s = e[a],
                                o = s.marker;
                            if (null == s.to || (o.inclusiveRight ? s.to >= t : s.to > t) || s.from == t && "bookmark" == o.type && (!i || s.marker.insertLeft)) {
                                var r = null == s.from || (o.inclusiveLeft ? s.from <= t : s.from < t);
                                (n || (n = [])).push(new kt(o, r ? null : s.from - t, null == s.to ? null : s.to - t))
                            }
                        }
                    return n
                }(n, s, o),
                c = 1 == t.text.length,
                d = K(t.text).length + (c ? a : 0);
            if (r)
                for (var p = 0; p < r.length; ++p) {
                    var u = r[p];
                    if (null == u.to) {
                        var h = Et(l, u.marker);
                        h ? c && (u.to = null == h.to ? null : h.to + d) : u.to = a
                    }
                }
            if (l)
                for (var f = 0; f < l.length; ++f) {
                    var m = l[f];
                    if (null != m.to && (m.to += d), null == m.from) Et(r, m.marker) || (m.from = d, c && (r || (r = [])).push(m));
                    else m.from += d, c && (r || (r = [])).push(m)
                }
            r && (r = Mt(r)), l && l != r && (l = Mt(l));
            var g = [r];
            if (!c) {
                var v, b = t.text.length - 2;
                if (b > 0 && r)
                    for (var y = 0; y < r.length; ++y) null == r[y].to && (v || (v = [])).push(new kt(r[y].marker, null, null));
                for (var w = 0; w < b; ++w) g.push(v);
                g.push(l)
            }
            return g
        }

        function Mt(e) {
            for (var t = 0; t < e.length; ++t) {
                var i = e[t];
                null != i.from && i.from == i.to && !1 !== i.marker.clearWhenEmpty && e.splice(t--, 1)
            }
            return e.length ? e : null
        }

        function Pt(e) {
            var t = e.markedSpans;
            if (t) {
                for (var i = 0; i < t.length; ++i) t[i].marker.detachLine(e);
                e.markedSpans = null
            }
        }

        function It(e, t) {
            if (t) {
                for (var i = 0; i < t.length; ++i) t[i].marker.attachLine(e);
                e.markedSpans = t
            }
        }

        function Ot(e) {
            return e.inclusiveLeft ? -1 : 0
        }

        function At(e) {
            return e.inclusiveRight ? 1 : 0
        }

        function Lt(e, t) {
            var i = e.lines.length - t.lines.length;
            if (0 != i) return i;
            var n = e.find(),
                a = t.find(),
                s = it(n.from, a.from) || Ot(e) - Ot(t);
            if (s) return -s;
            var o = it(n.to, a.to) || At(e) - At(t);
            return o || t.id - e.id
        }

        function Dt(e, t) {
            var i, n = Ct && e.markedSpans;
            if (n)
                for (var a = void 0, s = 0; s < n.length; ++s)(a = n[s]).marker.collapsed && null == (t ? a.from : a.to) && (!i || Lt(i, a.marker) < 0) && (i = a.marker);
            return i
        }

        function Nt(e) {
            return Dt(e, !0)
        }

        function Rt(e) {
            return Dt(e, !1)
        }

        function Wt(e, t) {
            var i, n = Ct && e.markedSpans;
            if (n)
                for (var a = 0; a < n.length; ++a) {
                    var s = n[a];
                    s.marker.collapsed && (null == s.from || s.from < t) && (null == s.to || s.to > t) && (!i || Lt(i, s.marker) < 0) && (i = s.marker)
                }
            return i
        }

        function Ft(e, t, i, n, a) {
            var s = Ve(e, t),
                o = Ct && s.markedSpans;
            if (o)
                for (var r = 0; r < o.length; ++r) {
                    var l = o[r];
                    if (l.marker.collapsed) {
                        var c = l.marker.find(0),
                            d = it(c.from, i) || Ot(l.marker) - Ot(a),
                            p = it(c.to, n) || At(l.marker) - At(a);
                        if (!(d >= 0 && p <= 0 || d <= 0 && p >= 0) && (d <= 0 && (l.marker.inclusiveRight && a.inclusiveLeft ? it(c.to, i) >= 0 : it(c.to, i) > 0) || d >= 0 && (l.marker.inclusiveRight && a.inclusiveLeft ? it(c.from, n) <= 0 : it(c.from, n) < 0))) return !0
                    }
                }
        }

        function Bt(e) {
            for (var t; t = Nt(e);) e = t.find(-1, !0).line;
            return e
        }

        function Ut(e, t) {
            var i = Ve(e, t),
                n = Bt(i);
            return i == n ? t : Qe(n)
        }

        function Ht(e, t) {
            if (t > e.lastLine()) return t;
            var i, n = Ve(e, t);
            if (!zt(e, n)) return t;
            for (; i = Rt(n);) n = i.find(1, !0).line;
            return Qe(n) + 1
        }

        function zt(e, t) {
            var i = Ct && t.markedSpans;
            if (i)
                for (var n = void 0, a = 0; a < i.length; ++a)
                    if ((n = i[a]).marker.collapsed) {
                        if (null == n.from) return !0;
                        if (!n.marker.widgetNode && 0 == n.from && n.marker.inclusiveLeft && Gt(e, t, n)) return !0
                    }
        }

        function Gt(e, t, i) {
            if (null == i.to) {
                var n = i.marker.find(1, !0);
                return Gt(e, n.line, Et(n.line.markedSpans, i.marker))
            }
            if (i.marker.inclusiveRight && i.to == t.text.length) return !0;
            for (var a = void 0, s = 0; s < t.markedSpans.length; ++s)
                if ((a = t.markedSpans[s]).marker.collapsed && !a.marker.widgetNode && a.from == i.to && (null == a.to || a.to != i.from) && (a.marker.inclusiveLeft || i.marker.inclusiveRight) && Gt(e, t, a)) return !0
        }

        function $t(e) {
            for (var t = 0, i = (e = Bt(e)).parent, n = 0; n < i.lines.length; ++n) {
                var a = i.lines[n];
                if (a == e) break;
                t += a.height
            }
            for (var s = i.parent; s; s = (i = s).parent)
                for (var o = 0; o < s.children.length; ++o) {
                    var r = s.children[o];
                    if (r == i) break;
                    t += r.height
                }
            return t
        }

        function qt(e) {
            if (0 == e.height) return 0;
            for (var t, i = e.text.length, n = e; t = Nt(n);) {
                var a = t.find(0, !0);
                n = a.from.line, i += a.from.ch - a.to.ch
            }
            for (n = e; t = Rt(n);) {
                var s = t.find(0, !0);
                i -= n.text.length - s.from.ch, i += (n = s.to.line).text.length - s.to.ch
            }
            return i
        }

        function jt(e) {
            var t = e.display,
                i = e.doc;
            t.maxLine = Ve(i, i.first), t.maxLineLength = qt(t.maxLine), t.maxLineChanged = !0, i.iter((function (e) {
                var i = qt(e);
                i > t.maxLineLength && (t.maxLineLength = i, t.maxLine = e)
            }))
        }
        var Vt = function (e, t, i) {
            this.text = e, It(this, t), this.height = i ? i(this) : 1
        };

        function Yt(e) {
            e.parent = null, Pt(e)
        }
        Vt.prototype.lineNo = function () {
            return Qe(this)
        }, ye(Vt);
        var Kt = {},
            Xt = {};

        function Qt(e, t) {
            if (!e || /^\s*$/.test(e)) return null;
            var i = t.addModeClass ? Xt : Kt;
            return i[e] || (i[e] = e.replace(/\S+/g, "cm-$&"))
        }

        function Jt(e, t) {
            var i = I("span", null, null, l ? "padding-right: .1px" : null),
                n = {
                    pre: I("pre", [i], "CodeMirror-line"),
                    content: i,
                    col: 0,
                    pos: 0,
                    cm: e,
                    trailingSpace: !1,
                    splitSpaces: e.getOption("lineWrapping")
                };
            t.measure = {};
            for (var a = 0; a <= (t.rest ? t.rest.length : 0); a++) {
                var s = a ? t.rest[a - 1] : t.line,
                    o = void 0;
                n.pos = 0, n.addToken = ei, Ie(e.display.measure) && (o = de(s, e.doc.direction)) && (n.addToken = ti(n.addToken, o)), n.map = [], ni(s, n, ht(e, s, t != e.display.externalMeasured && Qe(s))), s.styleClasses && (s.styleClasses.bgClass && (n.bgClass = D(s.styleClasses.bgClass, n.bgClass || "")), s.styleClasses.textClass && (n.textClass = D(s.styleClasses.textClass, n.textClass || ""))), 0 == n.map.length && n.map.push(0, 0, n.content.appendChild(Pe(e.display.measure))), 0 == a ? (t.measure.map = n.map, t.measure.cache = {}) : ((t.measure.maps || (t.measure.maps = [])).push(n.map), (t.measure.caches || (t.measure.caches = [])).push({}))
            }
            if (l) {
                var r = n.content.lastChild;
                (/\bcm-tab\b/.test(r.className) || r.querySelector && r.querySelector(".cm-tab")) && (n.content.className = "cm-tab-wrap-hack")
            }
            return me(e, "renderLine", e, t.line, n.pre), n.pre.className && (n.textClass = D(n.pre.className, n.textClass || "")), n
        }

        function Zt(e) {
            var t = P("span", "â€¢", "cm-invalidchar");
            return t.title = "\\u" + e.charCodeAt(0).toString(16), t.setAttribute("aria-label", t.title), t
        }

        function ei(e, t, i, n, a, s, l) {
            if (t) {
                var c, d = e.splitSpaces ? function (e, t) {
                    if (e.length > 1 && !/  /.test(e)) return e;
                    for (var i = t, n = "", a = 0; a < e.length; a++) {
                        var s = e.charAt(a);
                        " " != s || !i || a != e.length - 1 && 32 != e.charCodeAt(a + 1) || (s = "Â "), n += s, i = " " == s
                    }
                    return n
                }(t, e.trailingSpace) : t,
                    p = e.cm.state.specialChars,
                    u = !1;
                if (p.test(t)) {
                    c = document.createDocumentFragment();
                    for (var h = 0; ;) {
                        p.lastIndex = h;
                        var f = p.exec(t),
                            m = f ? f.index - h : t.length - h;
                        if (m) {
                            var g = document.createTextNode(d.slice(h, h + m));
                            o && r < 9 ? c.appendChild(P("span", [g])) : c.appendChild(g), e.map.push(e.pos, e.pos + m, g), e.col += m, e.pos += m
                        }
                        if (!f) break;
                        h += m + 1;
                        var v = void 0;
                        if ("\t" == f[0]) {
                            var b = e.cm.options.tabSize,
                                y = b - e.col % b;
                            (v = c.appendChild(P("span", Y(y), "cm-tab"))).setAttribute("role", "presentation"), v.setAttribute("cm-text", "\t"), e.col += y
                        } else "\r" == f[0] || "\n" == f[0] ? ((v = c.appendChild(P("span", "\r" == f[0] ? "â" : "â¤", "cm-invalidchar"))).setAttribute("cm-text", f[0]), e.col += 1) : ((v = e.cm.options.specialCharPlaceholder(f[0])).setAttribute("cm-text", f[0]), o && r < 9 ? c.appendChild(P("span", [v])) : c.appendChild(v), e.col += 1);
                        e.map.push(e.pos, e.pos + 1, v), e.pos++
                    }
                } else e.col += t.length, c = document.createTextNode(d), e.map.push(e.pos, e.pos + t.length, c), o && r < 9 && (u = !0), e.pos += t.length;
                if (e.trailingSpace = 32 == d.charCodeAt(t.length - 1), i || n || a || u || s) {
                    var w = i || "";
                    n && (w += n), a && (w += a);
                    var _ = P("span", [c], w, s);
                    if (l)
                        for (var T in l) l.hasOwnProperty(T) && "style" != T && "class" != T && _.setAttribute(T, l[T]);
                    return e.content.appendChild(_)
                }
                e.content.appendChild(c)
            }
        }

        function ti(e, t) {
            return function (i, n, a, s, o, r, l) {
                a = a ? a + " cm-force-border" : "cm-force-border";
                for (var c = i.pos, d = c + n.length; ;) {
                    for (var p = void 0, u = 0; u < t.length && !((p = t[u]).to > c && p.from <= c); u++);
                    if (p.to >= d) return e(i, n, a, s, o, r, l);
                    e(i, n.slice(0, p.to - c), a, s, null, r, l), s = null, n = n.slice(p.to - c), c = p.to
                }
            }
        }

        function ii(e, t, i, n) {
            var a = !n && i.widgetNode;
            a && e.map.push(e.pos, e.pos + t, a), !n && e.cm.display.input.needsContentAttribute && (a || (a = e.content.appendChild(document.createElement("span"))), a.setAttribute("cm-marker", i.id)), a && (e.cm.display.input.setUneditable(a), e.content.appendChild(a)), e.pos += t, e.trailingSpace = !1
        }

        function ni(e, t, i) {
            var n = e.markedSpans,
                a = e.text,
                s = 0;
            if (n)
                for (var o, r, l, c, d, p, u, h = a.length, f = 0, m = 1, g = "", v = 0; ;) {
                    if (v == f) {
                        l = c = d = r = "", u = null, p = null, v = 1 / 0;
                        for (var b = [], y = void 0, w = 0; w < n.length; ++w) {
                            var _ = n[w],
                                T = _.marker;
                            if ("bookmark" == T.type && _.from == f && T.widgetNode) b.push(T);
                            else if (_.from <= f && (null == _.to || _.to > f || T.collapsed && _.to == f && _.from == f)) {
                                if (null != _.to && _.to != f && v > _.to && (v = _.to, c = ""), T.className && (l += " " + T.className), T.css && (r = (r ? r + ";" : "") + T.css), T.startStyle && _.from == f && (d += " " + T.startStyle), T.endStyle && _.to == v && (y || (y = [])).push(T.endStyle, _.to), T.title && ((u || (u = {})).title = T.title), T.attributes)
                                    for (var C in T.attributes) (u || (u = {}))[C] = T.attributes[C];
                                T.collapsed && (!p || Lt(p.marker, T) < 0) && (p = _)
                            } else _.from > f && v > _.from && (v = _.from)
                        }
                        if (y)
                            for (var k = 0; k < y.length; k += 2) y[k + 1] == v && (c += " " + y[k]);
                        if (!p || p.from == f)
                            for (var E = 0; E < b.length; ++E) ii(t, 0, b[E]);
                        if (p && (p.from || 0) == f) {
                            if (ii(t, (null == p.to ? h + 1 : p.to) - f, p.marker, null == p.from), null == p.to) return;
                            p.to == f && (p = !1)
                        }
                    }
                    if (f >= h) break;
                    for (var x = Math.min(h, v); ;) {
                        if (g) {
                            var S = f + g.length;
                            if (!p) {
                                var M = S > x ? g.slice(0, x - f) : g;
                                t.addToken(t, M, o ? o + l : l, d, f + M.length == v ? c : "", r, u)
                            }
                            if (S >= x) {
                                g = g.slice(x - f), f = x;
                                break
                            }
                            f = S, d = ""
                        }
                        g = a.slice(s, s = i[m++]), o = Qt(i[m++], t.cm.options)
                    }
                } else
                for (var P = 1; P < i.length; P += 2) t.addToken(t, a.slice(s, s = i[P]), Qt(i[P + 1], t.cm.options))
        }

        function ai(e, t, i) {
            this.line = t, this.rest = function (e) {
                for (var t, i; t = Rt(e);) e = t.find(1, !0).line, (i || (i = [])).push(e);
                return i
            }(t), this.size = this.rest ? Qe(K(this.rest)) - i + 1 : 1, this.node = this.text = null, this.hidden = zt(e, t)
        }

        function si(e, t, i) {
            for (var n, a = [], s = t; s < i; s = n) {
                var o = new ai(e.doc, Ve(e.doc, s), s);
                n = s + o.size, a.push(o)
            }
            return a
        }
        var oi = null;
        var ri = null;

        function li(e, t) {
            var i = he(e, t);
            if (i.length) {
                var n, a = Array.prototype.slice.call(arguments, 2);
                oi ? n = oi.delayedCallbacks : ri ? n = ri : (n = ri = [], setTimeout(ci, 0));
                for (var s = function (e) {
                    n.push((function () {
                        return i[e].apply(null, a)
                    }))
                }, o = 0; o < i.length; ++o) s(o)
            }
        }

        function ci() {
            var e = ri;
            ri = null;
            for (var t = 0; t < e.length; ++t) e[t]()
        }

        function di(e, t, i, n) {
            for (var a = 0; a < t.changes.length; a++) {
                var s = t.changes[a];
                "text" == s ? hi(e, t) : "gutter" == s ? mi(e, t, i, n) : "class" == s ? fi(e, t) : "widget" == s && gi(e, t, n)
            }
            t.changes = null
        }

        function pi(e) {
            return e.node == e.text && (e.node = P("div", null, null, "position: relative"), e.text.parentNode && e.text.parentNode.replaceChild(e.node, e.text), e.node.appendChild(e.text), o && r < 8 && (e.node.style.zIndex = 2)), e.node
        }

        function ui(e, t) {
            var i = e.display.externalMeasured;
            return i && i.line == t.line ? (e.display.externalMeasured = null, t.measure = i.measure, i.built) : Jt(e, t)
        }

        function hi(e, t) {
            var i = t.text.className,
                n = ui(e, t);
            t.text == t.node && (t.node = n.pre), t.text.parentNode.replaceChild(n.pre, t.text), t.text = n.pre, n.bgClass != t.bgClass || n.textClass != t.textClass ? (t.bgClass = n.bgClass, t.textClass = n.textClass, fi(e, t)) : i && (t.text.className = i)
        }

        function fi(e, t) {
            ! function (e, t) {
                var i = t.bgClass ? t.bgClass + " " + (t.line.bgClass || "") : t.line.bgClass;
                if (i && (i += " CodeMirror-linebackground"), t.background) i ? t.background.className = i : (t.background.parentNode.removeChild(t.background), t.background = null);
                else if (i) {
                    var n = pi(t);
                    t.background = n.insertBefore(P("div", null, i), n.firstChild), e.display.input.setUneditable(t.background)
                }
            }(e, t), t.line.wrapClass ? pi(t).className = t.line.wrapClass : t.node != t.text && (t.node.className = "");
            var i = t.textClass ? t.textClass + " " + (t.line.textClass || "") : t.line.textClass;
            t.text.className = i || ""
        }

        function mi(e, t, i, n) {
            if (t.gutter && (t.node.removeChild(t.gutter), t.gutter = null), t.gutterBackground && (t.node.removeChild(t.gutterBackground), t.gutterBackground = null), t.line.gutterClass) {
                var a = pi(t);
                t.gutterBackground = P("div", null, "CodeMirror-gutter-background " + t.line.gutterClass, "left: " + (e.options.fixedGutter ? n.fixedPos : -n.gutterTotalWidth) + "px; width: " + n.gutterTotalWidth + "px"), e.display.input.setUneditable(t.gutterBackground), a.insertBefore(t.gutterBackground, t.text)
            }
            var s = t.line.gutterMarkers;
            if (e.options.lineNumbers || s) {
                var o = pi(t),
                    r = t.gutter = P("div", null, "CodeMirror-gutter-wrapper", "left: " + (e.options.fixedGutter ? n.fixedPos : -n.gutterTotalWidth) + "px");
                if (e.display.input.setUneditable(r), o.insertBefore(r, t.text), t.line.gutterClass && (r.className += " " + t.line.gutterClass), !e.options.lineNumbers || s && s["CodeMirror-linenumbers"] || (t.lineNumber = r.appendChild(P("div", et(e.options, i), "CodeMirror-linenumber CodeMirror-gutter-elt", "left: " + n.gutterLeft["CodeMirror-linenumbers"] + "px; width: " + e.display.lineNumInnerWidth + "px"))), s)
                    for (var l = 0; l < e.display.gutterSpecs.length; ++l) {
                        var c = e.display.gutterSpecs[l].className,
                            d = s.hasOwnProperty(c) && s[c];
                        d && r.appendChild(P("div", [d], "CodeMirror-gutter-elt", "left: " + n.gutterLeft[c] + "px; width: " + n.gutterWidth[c] + "px"))
                    }
            }
        }

        function gi(e, t, i) {
            t.alignable && (t.alignable = null);
            for (var n = k("CodeMirror-linewidget"), a = t.node.firstChild, s = void 0; a; a = s) s = a.nextSibling, n.test(a.className) && t.node.removeChild(a);
            bi(e, t, i)
        }

        function vi(e, t, i, n) {
            var a = ui(e, t);
            return t.text = t.node = a.pre, a.bgClass && (t.bgClass = a.bgClass), a.textClass && (t.textClass = a.textClass), fi(e, t), mi(e, t, i, n), bi(e, t, n), t.node
        }

        function bi(e, t, i) {
            if (yi(e, t.line, t, i, !0), t.rest)
                for (var n = 0; n < t.rest.length; n++) yi(e, t.rest[n], t, i, !1)
        }

        function yi(e, t, i, n, a) {
            if (t.widgets)
                for (var s = pi(i), o = 0, r = t.widgets; o < r.length; ++o) {
                    var l = r[o],
                        c = P("div", [l.node], "CodeMirror-linewidget" + (l.className ? " " + l.className : ""));
                    l.handleMouseEvents || c.setAttribute("cm-ignore-events", "true"), wi(l, c, i, n), e.display.input.setUneditable(c), a && l.above ? s.insertBefore(c, i.gutter || i.text) : s.appendChild(c), li(l, "redraw")
                }
        }

        function wi(e, t, i, n) {
            if (e.noHScroll) {
                (i.alignable || (i.alignable = [])).push(t);
                var a = n.wrapperWidth;
                t.style.left = n.fixedPos + "px", e.coverGutter || (a -= n.gutterTotalWidth, t.style.paddingLeft = n.gutterTotalWidth + "px"), t.style.width = a + "px"
            }
            e.coverGutter && (t.style.zIndex = 5, t.style.position = "relative", e.noHScroll || (t.style.marginLeft = -n.gutterTotalWidth + "px"))
        }

        function _i(e) {
            if (null != e.height) return e.height;
            var t = e.doc.cm;
            if (!t) return 0;
            if (!O(document.body, e.node)) {
                var i = "position: relative;";
                e.coverGutter && (i += "margin-left: -" + t.display.gutters.offsetWidth + "px;"), e.noHScroll && (i += "width: " + t.display.wrapper.clientWidth + "px;"), M(t.display.measure, P("div", [e.node], null, i))
            }
            return e.height = e.node.parentNode.offsetHeight
        }

        function Ti(e, t) {
            for (var i = ke(t); i != e.wrapper; i = i.parentNode)
                if (!i || 1 == i.nodeType && "true" == i.getAttribute("cm-ignore-events") || i.parentNode == e.sizer && i != e.mover) return !0
        }

        function Ci(e) {
            return e.lineSpace.offsetTop
        }

        function ki(e) {
            return e.mover.offsetHeight - e.lineSpace.offsetHeight
        }

        function Ei(e) {
            if (e.cachedPaddingH) return e.cachedPaddingH;
            var t = M(e.measure, P("pre", "x", "CodeMirror-line-like")),
                i = window.getComputedStyle ? window.getComputedStyle(t) : t.currentStyle,
                n = {
                    left: parseInt(i.paddingLeft),
                    right: parseInt(i.paddingRight)
                };
            return isNaN(n.left) || isNaN(n.right) || (e.cachedPaddingH = n), n
        }

        function xi(e) {
            return H - e.display.nativeBarWidth
        }

        function Si(e) {
            return e.display.scroller.clientWidth - xi(e) - e.display.barWidth
        }

        function Mi(e) {
            return e.display.scroller.clientHeight - xi(e) - e.display.barHeight
        }

        function Pi(e, t, i) {
            if (e.line == t) return {
                map: e.measure.map,
                cache: e.measure.cache
            };
            for (var n = 0; n < e.rest.length; n++)
                if (e.rest[n] == t) return {
                    map: e.measure.maps[n],
                    cache: e.measure.caches[n]
                };
            for (var a = 0; a < e.rest.length; a++)
                if (Qe(e.rest[a]) > i) return {
                    map: e.measure.maps[a],
                    cache: e.measure.caches[a],
                    before: !0
                }
        }

        function Ii(e, t, i, n) {
            return Li(e, Ai(e, t), i, n)
        }

        function Oi(e, t) {
            if (t >= e.display.viewFrom && t < e.display.viewTo) return e.display.view[pn(e, t)];
            var i = e.display.externalMeasured;
            return i && t >= i.lineN && t < i.lineN + i.size ? i : void 0
        }

        function Ai(e, t) {
            var i = Qe(t),
                n = Oi(e, i);
            n && !n.text ? n = null : n && n.changes && (di(e, n, i, on(e)), e.curOp.forceUpdate = !0), n || (n = function (e, t) {
                var i = Qe(t = Bt(t)),
                    n = e.display.externalMeasured = new ai(e.doc, t, i);
                n.lineN = i;
                var a = n.built = Jt(e, n);
                return n.text = a.pre, M(e.display.lineMeasure, a.pre), n
            }(e, t));
            var a = Pi(n, t, i);
            return {
                line: t,
                view: n,
                rect: null,
                map: a.map,
                cache: a.cache,
                before: a.before,
                hasHeights: !1
            }
        }

        function Li(e, t, i, n, a) {
            t.before && (i = -1);
            var s, l = i + (n || "");
            return t.cache.hasOwnProperty(l) ? s = t.cache[l] : (t.rect || (t.rect = t.view.text.getBoundingClientRect()), t.hasHeights || (! function (e, t, i) {
                var n = e.options.lineWrapping,
                    a = n && Si(e);
                if (!t.measure.heights || n && t.measure.width != a) {
                    var s = t.measure.heights = [];
                    if (n) {
                        t.measure.width = a;
                        for (var o = t.text.firstChild.getClientRects(), r = 0; r < o.length - 1; r++) {
                            var l = o[r],
                                c = o[r + 1];
                            Math.abs(l.bottom - c.bottom) > 2 && s.push((l.bottom + c.top) / 2 - i.top)
                        }
                    }
                    s.push(i.bottom - i.top)
                }
            }(e, t.view, t.rect), t.hasHeights = !0), s = function (e, t, i, n) {
                var a, s = Ri(t.map, i, n),
                    l = s.node,
                    c = s.start,
                    d = s.end,
                    p = s.collapse;
                if (3 == l.nodeType) {
                    for (var u = 0; u < 4; u++) {
                        for (; c && ae(t.line.text.charAt(s.coverStart + c));) --c;
                        for (; s.coverStart + d < s.coverEnd && ae(t.line.text.charAt(s.coverStart + d));) ++d;
                        if ((a = o && r < 9 && 0 == c && d == s.coverEnd - s.coverStart ? l.parentNode.getBoundingClientRect() : Wi(E(l, c, d).getClientRects(), n)).left || a.right || 0 == c) break;
                        d = c, c -= 1, p = "right"
                    }
                    o && r < 11 && (a = function (e, t) {
                        if (!window.screen || null == screen.logicalXDPI || screen.logicalXDPI == screen.deviceXDPI || ! function (e) {
                            if (null != Ne) return Ne;
                            var t = M(e, P("span", "x")),
                                i = t.getBoundingClientRect(),
                                n = E(t, 0, 1).getBoundingClientRect();
                            return Ne = Math.abs(i.left - n.left) > 1
                        }(e)) return t;
                        var i = screen.logicalXDPI / screen.deviceXDPI,
                            n = screen.logicalYDPI / screen.deviceYDPI;
                        return {
                            left: t.left * i,
                            right: t.right * i,
                            top: t.top * n,
                            bottom: t.bottom * n
                        }
                    }(e.display.measure, a))
                } else {
                    var h;
                    c > 0 && (p = n = "right"), a = e.options.lineWrapping && (h = l.getClientRects()).length > 1 ? h["right" == n ? h.length - 1 : 0] : l.getBoundingClientRect()
                }
                if (o && r < 9 && !c && (!a || !a.left && !a.right)) {
                    var f = l.parentNode.getClientRects()[0];
                    a = f ? {
                        left: f.left,
                        right: f.left + sn(e.display),
                        top: f.top,
                        bottom: f.bottom
                    } : Ni
                }
                for (var m = a.top - t.rect.top, g = a.bottom - t.rect.top, v = (m + g) / 2, b = t.view.measure.heights, y = 0; y < b.length - 1 && !(v < b[y]); y++);
                var w = y ? b[y - 1] : 0,
                    _ = b[y],
                    T = {
                        left: ("right" == p ? a.right : a.left) - t.rect.left,
                        right: ("left" == p ? a.left : a.right) - t.rect.left,
                        top: w,
                        bottom: _
                    };
                a.left || a.right || (T.bogus = !0);
                e.options.singleCursorHeightPerLine || (T.rtop = m, T.rbottom = g);
                return T
            }(e, t, i, n), s.bogus || (t.cache[l] = s)), {
                left: s.left,
                right: s.right,
                top: a ? s.rtop : s.top,
                bottom: a ? s.rbottom : s.bottom
            }
        }
        var Di, Ni = {
            left: 0,
            right: 0,
            top: 0,
            bottom: 0
        };

        function Ri(e, t, i) {
            for (var n, a, s, o, r, l, c = 0; c < e.length; c += 3)
                if (r = e[c], l = e[c + 1], t < r ? (a = 0, s = 1, o = "left") : t < l ? s = (a = t - r) + 1 : (c == e.length - 3 || t == l && e[c + 3] > t) && (a = (s = l - r) - 1, t >= l && (o = "right")), null != a) {
                    if (n = e[c + 2], r == l && i == (n.insertLeft ? "left" : "right") && (o = i), "left" == i && 0 == a)
                        for (; c && e[c - 2] == e[c - 3] && e[c - 1].insertLeft;) n = e[2 + (c -= 3)], o = "left";
                    if ("right" == i && a == l - r)
                        for (; c < e.length - 3 && e[c + 3] == e[c + 4] && !e[c + 5].insertLeft;) n = e[(c += 3) + 2], o = "right";
                    break
                } return {
                    node: n,
                    start: a,
                    end: s,
                    collapse: o,
                    coverStart: r,
                    coverEnd: l
                }
        }

        function Wi(e, t) {
            var i = Ni;
            if ("left" == t)
                for (var n = 0; n < e.length && (i = e[n]).left == i.right; n++);
            else
                for (var a = e.length - 1; a >= 0 && (i = e[a]).left == i.right; a--);
            return i
        }

        function Fi(e) {
            if (e.measure && (e.measure.cache = {}, e.measure.heights = null, e.rest))
                for (var t = 0; t < e.rest.length; t++) e.measure.caches[t] = {}
        }

        function Bi(e) {
            e.display.externalMeasure = null, S(e.display.lineMeasure);
            for (var t = 0; t < e.display.view.length; t++) Fi(e.display.view[t])
        }

        function Ui(e) {
            Bi(e), e.display.cachedCharWidth = e.display.cachedTextHeight = e.display.cachedPaddingH = null, e.options.lineWrapping || (e.display.maxLineChanged = !0), e.display.lineNumChars = null
        }

        function Hi() {
            return d && g ? -(document.body.getBoundingClientRect().left - parseInt(getComputedStyle(document.body).marginLeft)) : window.pageXOffset || (document.documentElement || document.body).scrollLeft
        }

        function zi() {
            return d && g ? -(document.body.getBoundingClientRect().top - parseInt(getComputedStyle(document.body).marginTop)) : window.pageYOffset || (document.documentElement || document.body).scrollTop
        }

        function Gi(e) {
            var t = 0;
            if (e.widgets)
                for (var i = 0; i < e.widgets.length; ++i) e.widgets[i].above && (t += _i(e.widgets[i]));
            return t
        }

        function $i(e, t, i, n, a) {
            if (!a) {
                var s = Gi(t);
                i.top += s, i.bottom += s
            }
            if ("line" == n) return i;
            n || (n = "local");
            var o = $t(t);
            if ("local" == n ? o += Ci(e.display) : o -= e.display.viewOffset, "page" == n || "window" == n) {
                var r = e.display.lineSpace.getBoundingClientRect();
                o += r.top + ("window" == n ? 0 : zi());
                var l = r.left + ("window" == n ? 0 : Hi());
                i.left += l, i.right += l
            }
            return i.top += o, i.bottom += o, i
        }

        function qi(e, t, i) {
            if ("div" == i) return t;
            var n = t.left,
                a = t.top;
            if ("page" == i) n -= Hi(), a -= zi();
            else if ("local" == i || !i) {
                var s = e.display.sizer.getBoundingClientRect();
                n += s.left, a += s.top
            }
            var o = e.display.lineSpace.getBoundingClientRect();
            return {
                left: n - o.left,
                top: a - o.top
            }
        }

        function ji(e, t, i, n, a) {
            return n || (n = Ve(e.doc, t.line)), $i(e, n, Ii(e, n, t.ch, a), i)
        }

        function Vi(e, t, i, n, a, s) {
            function o(t, o) {
                var r = Li(e, a, t, o ? "right" : "left", s);
                return o ? r.left = r.right : r.right = r.left, $i(e, n, r, i)
            }
            n = n || Ve(e.doc, t.line), a || (a = Ai(e, n));
            var r = de(n, e.doc.direction),
                l = t.ch,
                c = t.sticky;
            if (l >= n.text.length ? (l = n.text.length, c = "before") : l <= 0 && (l = 0, c = "after"), !r) return o("before" == c ? l - 1 : l, "before" == c);

            function d(e, t, i) {
                return o(i ? e - 1 : e, 1 == r[t].level != i)
            }
            var p = le(r, l, c),
                u = re,
                h = d(l, p, "before" == c);
            return null != u && (h.other = d(l, u, "before" != c)), h
        }

        function Yi(e, t) {
            var i = 0;
            t = lt(e.doc, t), e.options.lineWrapping || (i = sn(e.display) * t.ch);
            var n = Ve(e.doc, t.line),
                a = $t(n) + Ci(e.display);
            return {
                left: i,
                right: i,
                top: a,
                bottom: a + n.height
            }
        }

        function Ki(e, t, i, n, a) {
            var s = tt(e, t, i);
            return s.xRel = a, n && (s.outside = n), s
        }

        function Xi(e, t, i) {
            var n = e.doc;
            if ((i += e.display.viewOffset) < 0) return Ki(n.first, 0, null, -1, -1);
            var a = Je(n, i),
                s = n.first + n.size - 1;
            if (a > s) return Ki(n.first + n.size - 1, Ve(n, s).text.length, null, 1, 1);
            t < 0 && (t = 0);
            for (var o = Ve(n, a); ;) {
                var r = en(e, o, a, t, i),
                    l = Wt(o, r.ch + (r.xRel > 0 || r.outside > 0 ? 1 : 0));
                if (!l) return r;
                var c = l.find(1);
                if (c.line == a) return c;
                o = Ve(n, a = c.line)
            }
        }

        function Qi(e, t, i, n) {
            n -= Gi(t);
            var a = t.text.length,
                s = oe((function (t) {
                    return Li(e, i, t - 1).bottom <= n
                }), a, 0);
            return {
                begin: s,
                end: a = oe((function (t) {
                    return Li(e, i, t).top > n
                }), s, a)
            }
        }

        function Ji(e, t, i, n) {
            return i || (i = Ai(e, t)), Qi(e, t, i, $i(e, t, Li(e, i, n), "line").top)
        }

        function Zi(e, t, i, n) {
            return !(e.bottom <= i) && (e.top > i || (n ? e.left : e.right) > t)
        }

        function en(e, t, i, n, a) {
            a -= $t(t);
            var s = Ai(e, t),
                o = Gi(t),
                r = 0,
                l = t.text.length,
                c = !0,
                d = de(t, e.doc.direction);
            if (d) {
                var p = (e.options.lineWrapping ? nn : tn)(e, t, i, s, d, n, a);
                r = (c = 1 != p.level) ? p.from : p.to - 1, l = c ? p.to : p.from - 1
            }
            var u, h, f = null,
                m = null,
                g = oe((function (t) {
                    var i = Li(e, s, t);
                    return i.top += o, i.bottom += o, !!Zi(i, n, a, !1) && (i.top <= a && i.left <= n && (f = t, m = i), !0)
                }), r, l),
                v = !1;
            if (m) {
                var b = n - m.left < m.right - n,
                    y = b == c;
                g = f + (y ? 0 : 1), h = y ? "after" : "before", u = b ? m.left : m.right
            } else {
                c || g != l && g != r || g++, h = 0 == g ? "after" : g == t.text.length ? "before" : Li(e, s, g - (c ? 1 : 0)).bottom + o <= a == c ? "after" : "before";
                var w = Vi(e, tt(i, g, h), "line", t, s);
                u = w.left, v = a < w.top ? -1 : a >= w.bottom ? 1 : 0
            }
            return Ki(i, g = se(t.text, g, 1), h, v, n - u)
        }

        function tn(e, t, i, n, a, s, o) {
            var r = oe((function (r) {
                var l = a[r],
                    c = 1 != l.level;
                return Zi(Vi(e, tt(i, c ? l.to : l.from, c ? "before" : "after"), "line", t, n), s, o, !0)
            }), 0, a.length - 1),
                l = a[r];
            if (r > 0) {
                var c = 1 != l.level,
                    d = Vi(e, tt(i, c ? l.from : l.to, c ? "after" : "before"), "line", t, n);
                Zi(d, s, o, !0) && d.top > o && (l = a[r - 1])
            }
            return l
        }

        function nn(e, t, i, n, a, s, o) {
            var r = Qi(e, t, n, o),
                l = r.begin,
                c = r.end;
            /\s/.test(t.text.charAt(c - 1)) && c--;
            for (var d = null, p = null, u = 0; u < a.length; u++) {
                var h = a[u];
                if (!(h.from >= c || h.to <= l)) {
                    var f = Li(e, n, 1 != h.level ? Math.min(c, h.to) - 1 : Math.max(l, h.from)).right,
                        m = f < s ? s - f + 1e9 : f - s;
                    (!d || p > m) && (d = h, p = m)
                }
            }
            return d || (d = a[a.length - 1]), d.from < l && (d = {
                from: l,
                to: d.to,
                level: d.level
            }), d.to > c && (d = {
                from: d.from,
                to: c,
                level: d.level
            }), d
        }

        function an(e) {
            if (null != e.cachedTextHeight) return e.cachedTextHeight;
            if (null == Di) {
                Di = P("pre", null, "CodeMirror-line-like");
                for (var t = 0; t < 49; ++t) Di.appendChild(document.createTextNode("x")), Di.appendChild(P("br"));
                Di.appendChild(document.createTextNode("x"))
            }
            M(e.measure, Di);
            var i = Di.offsetHeight / 50;
            return i > 3 && (e.cachedTextHeight = i), S(e.measure), i || 1
        }

        function sn(e) {
            if (null != e.cachedCharWidth) return e.cachedCharWidth;
            var t = P("span", "xxxxxxxxxx"),
                i = P("pre", [t], "CodeMirror-line-like");
            M(e.measure, i);
            var n = t.getBoundingClientRect(),
                a = (n.right - n.left) / 10;
            return a > 2 && (e.cachedCharWidth = a), a || 10
        }

        function on(e) {
            for (var t = e.display, i = {}, n = {}, a = t.gutters.clientLeft, s = t.gutters.firstChild, o = 0; s; s = s.nextSibling, ++o) {
                var r = e.display.gutterSpecs[o].className;
                i[r] = s.offsetLeft + s.clientLeft + a, n[r] = s.clientWidth
            }
            return {
                fixedPos: rn(t),
                gutterTotalWidth: t.gutters.offsetWidth,
                gutterLeft: i,
                gutterWidth: n,
                wrapperWidth: t.wrapper.clientWidth
            }
        }

        function rn(e) {
            return e.scroller.getBoundingClientRect().left - e.sizer.getBoundingClientRect().left
        }

        function ln(e) {
            var t = an(e.display),
                i = e.options.lineWrapping,
                n = i && Math.max(5, e.display.scroller.clientWidth / sn(e.display) - 3);
            return function (a) {
                if (zt(e.doc, a)) return 0;
                var s = 0;
                if (a.widgets)
                    for (var o = 0; o < a.widgets.length; o++) a.widgets[o].height && (s += a.widgets[o].height);
                return i ? s + (Math.ceil(a.text.length / n) || 1) * t : s + t
            }
        }

        function cn(e) {
            var t = e.doc,
                i = ln(e);
            t.iter((function (e) {
                var t = i(e);
                t != e.height && Xe(e, t)
            }))
        }

        function dn(e, t, i, n) {
            var a = e.display;
            if (!i && "true" == ke(t).getAttribute("cm-not-content")) return null;
            var s, o, r = a.lineSpace.getBoundingClientRect();
            try {
                s = t.clientX - r.left, o = t.clientY - r.top
            } catch (t) {
                return null
            }
            var l, c = Xi(e, s, o);
            if (n && c.xRel > 0 && (l = Ve(e.doc, c.line).text).length == c.ch) {
                var d = F(l, l.length, e.options.tabSize) - l.length;
                c = tt(c.line, Math.max(0, Math.round((s - Ei(e.display).left) / sn(e.display)) - d))
            }
            return c
        }

        function pn(e, t) {
            if (t >= e.display.viewTo) return null;
            if ((t -= e.display.viewFrom) < 0) return null;
            for (var i = e.display.view, n = 0; n < i.length; n++)
                if ((t -= i[n].size) < 0) return n
        }

        function un(e, t, i, n) {
            null == t && (t = e.doc.first), null == i && (i = e.doc.first + e.doc.size), n || (n = 0);
            var a = e.display;
            if (n && i < a.viewTo && (null == a.updateLineNumbers || a.updateLineNumbers > t) && (a.updateLineNumbers = t), e.curOp.viewChanged = !0, t >= a.viewTo) Ct && Ut(e.doc, t) < a.viewTo && fn(e);
            else if (i <= a.viewFrom) Ct && Ht(e.doc, i + n) > a.viewFrom ? fn(e) : (a.viewFrom += n, a.viewTo += n);
            else if (t <= a.viewFrom && i >= a.viewTo) fn(e);
            else if (t <= a.viewFrom) {
                var s = mn(e, i, i + n, 1);
                s ? (a.view = a.view.slice(s.index), a.viewFrom = s.lineN, a.viewTo += n) : fn(e)
            } else if (i >= a.viewTo) {
                var o = mn(e, t, t, -1);
                o ? (a.view = a.view.slice(0, o.index), a.viewTo = o.lineN) : fn(e)
            } else {
                var r = mn(e, t, t, -1),
                    l = mn(e, i, i + n, 1);
                r && l ? (a.view = a.view.slice(0, r.index).concat(si(e, r.lineN, l.lineN)).concat(a.view.slice(l.index)), a.viewTo += n) : fn(e)
            }
            var c = a.externalMeasured;
            c && (i < c.lineN ? c.lineN += n : t < c.lineN + c.size && (a.externalMeasured = null))
        }

        function hn(e, t, i) {
            e.curOp.viewChanged = !0;
            var n = e.display,
                a = e.display.externalMeasured;
            if (a && t >= a.lineN && t < a.lineN + a.size && (n.externalMeasured = null), !(t < n.viewFrom || t >= n.viewTo)) {
                var s = n.view[pn(e, t)];
                if (null != s.node) {
                    var o = s.changes || (s.changes = []); - 1 == U(o, i) && o.push(i)
                }
            }
        }

        function fn(e) {
            e.display.viewFrom = e.display.viewTo = e.doc.first, e.display.view = [], e.display.viewOffset = 0
        }

        function mn(e, t, i, n) {
            var a, s = pn(e, t),
                o = e.display.view;
            if (!Ct || i == e.doc.first + e.doc.size) return {
                index: s,
                lineN: i
            };
            for (var r = e.display.viewFrom, l = 0; l < s; l++) r += o[l].size;
            if (r != t) {
                if (n > 0) {
                    if (s == o.length - 1) return null;
                    a = r + o[s].size - t, s++
                } else a = r - t;
                t += a, i += a
            }
            for (; Ut(e.doc, i) != i;) {
                if (s == (n < 0 ? 0 : o.length - 1)) return null;
                i += n * o[s - (n < 0 ? 1 : 0)].size, s += n
            }
            return {
                index: s,
                lineN: i
            }
        }

        function gn(e) {
            for (var t = e.display.view, i = 0, n = 0; n < t.length; n++) {
                var a = t[n];
                a.hidden || a.node && !a.changes || ++i
            }
            return i
        }

        function vn(e) {
            e.display.input.showSelection(e.display.input.prepareSelection())
        }

        function bn(e, t) {
            void 0 === t && (t = !0);
            for (var i = e.doc, n = {}, a = n.cursors = document.createDocumentFragment(), s = n.selection = document.createDocumentFragment(), o = 0; o < i.sel.ranges.length; o++)
                if (t || o != i.sel.primIndex) {
                    var r = i.sel.ranges[o];
                    if (!(r.from().line >= e.display.viewTo || r.to().line < e.display.viewFrom)) {
                        var l = r.empty();
                        (l || e.options.showCursorWhenSelecting) && yn(e, r.head, a), l || _n(e, r, s)
                    }
                } return n
        }

        function yn(e, t, i) {
            var n = Vi(e, t, "div", null, null, !e.options.singleCursorHeightPerLine),
                a = i.appendChild(P("div", "Â ", "CodeMirror-cursor"));
            if (a.style.left = n.left + "px", a.style.top = n.top + "px", a.style.height = Math.max(0, n.bottom - n.top) * e.options.cursorHeight + "px", n.other) {
                var s = i.appendChild(P("div", "Â ", "CodeMirror-cursor CodeMirror-secondarycursor"));
                s.style.display = "", s.style.left = n.other.left + "px", s.style.top = n.other.top + "px", s.style.height = .85 * (n.other.bottom - n.other.top) + "px"
            }
        }

        function wn(e, t) {
            return e.top - t.top || e.left - t.left
        }

        function _n(e, t, i) {
            var n = e.display,
                a = e.doc,
                s = document.createDocumentFragment(),
                o = Ei(e.display),
                r = o.left,
                l = Math.max(n.sizerWidth, Si(e) - n.sizer.offsetLeft) - o.right,
                c = "ltr" == a.direction;

            function d(e, t, i, n) {
                t < 0 && (t = 0), t = Math.round(t), n = Math.round(n), s.appendChild(P("div", null, "CodeMirror-selected", "position: absolute; left: " + e + "px;\n                             top: " + t + "px; width: " + (null == i ? l - e : i) + "px;\n                             height: " + (n - t) + "px"))
            }

            function p(t, i, n) {
                var s, o, p = Ve(a, t),
                    u = p.text.length;

                function h(i, n) {
                    return ji(e, tt(t, i), "div", p, n)
                }

                function f(t, i, n) {
                    var a = Ji(e, p, null, t),
                        s = "ltr" == i == ("after" == n) ? "left" : "right";
                    return h("after" == n ? a.begin : a.end - (/\s/.test(p.text.charAt(a.end - 1)) ? 2 : 1), s)[s]
                }
                var m = de(p, a.direction);
                return function (e, t, i, n) {
                    if (!e) return n(t, i, "ltr", 0);
                    for (var a = !1, s = 0; s < e.length; ++s) {
                        var o = e[s];
                        (o.from < i && o.to > t || t == i && o.to == t) && (n(Math.max(o.from, t), Math.min(o.to, i), 1 == o.level ? "rtl" : "ltr", s), a = !0)
                    }
                    a || n(t, i, "ltr")
                }(m, i || 0, null == n ? u : n, (function (e, t, a, p) {
                    var g = "ltr" == a,
                        v = h(e, g ? "left" : "right"),
                        b = h(t - 1, g ? "right" : "left"),
                        y = null == i && 0 == e,
                        w = null == n && t == u,
                        _ = 0 == p,
                        T = !m || p == m.length - 1;
                    if (b.top - v.top <= 3) {
                        var C = (c ? w : y) && T,
                            k = (c ? y : w) && _ ? r : (g ? v : b).left,
                            E = C ? l : (g ? b : v).right;
                        d(k, v.top, E - k, v.bottom)
                    } else {
                        var x, S, M, P;
                        g ? (x = c && y && _ ? r : v.left, S = c ? l : f(e, a, "before"), M = c ? r : f(t, a, "after"), P = c && w && T ? l : b.right) : (x = c ? f(e, a, "before") : r, S = !c && y && _ ? l : v.right, M = !c && w && T ? r : b.left, P = c ? f(t, a, "after") : l), d(x, v.top, S - x, v.bottom), v.bottom < b.top && d(r, v.bottom, null, b.top), d(M, b.top, P - M, b.bottom)
                    } (!s || wn(v, s) < 0) && (s = v), wn(b, s) < 0 && (s = b), (!o || wn(v, o) < 0) && (o = v), wn(b, o) < 0 && (o = b)
                })), {
                    start: s,
                    end: o
                }
            }
            var u = t.from(),
                h = t.to();
            if (u.line == h.line) p(u.line, u.ch, h.ch);
            else {
                var f = Ve(a, u.line),
                    m = Ve(a, h.line),
                    g = Bt(f) == Bt(m),
                    v = p(u.line, u.ch, g ? f.text.length + 1 : null).end,
                    b = p(h.line, g ? 0 : null, h.ch).start;
                g && (v.top < b.top - 2 ? (d(v.right, v.top, null, v.bottom), d(r, b.top, b.left, b.bottom)) : d(v.right, v.top, b.left - v.right, v.bottom)), v.bottom < b.top && d(r, v.bottom, null, b.top)
            }
            i.appendChild(s)
        }

        function Tn(e) {
            if (e.state.focused) {
                var t = e.display;
                clearInterval(t.blinker);
                var i = !0;
                t.cursorDiv.style.visibility = "", e.options.cursorBlinkRate > 0 ? t.blinker = setInterval((function () {
                    return t.cursorDiv.style.visibility = (i = !i) ? "" : "hidden"
                }), e.options.cursorBlinkRate) : e.options.cursorBlinkRate < 0 && (t.cursorDiv.style.visibility = "hidden")
            }
        }

        function Cn(e) {
            e.state.focused || (e.display.input.focus(), En(e))
        }

        function kn(e) {
            e.state.delayingBlurEvent = !0, setTimeout((function () {
                e.state.delayingBlurEvent && (e.state.delayingBlurEvent = !1, xn(e))
            }), 100)
        }

        function En(e, t) {
            e.state.delayingBlurEvent && (e.state.delayingBlurEvent = !1), "nocursor" != e.options.readOnly && (e.state.focused || (me(e, "focus", e, t), e.state.focused = !0, L(e.display.wrapper, "CodeMirror-focused"), e.curOp || e.display.selForContextMenu == e.doc.sel || (e.display.input.reset(), l && setTimeout((function () {
                return e.display.input.reset(!0)
            }), 20)), e.display.input.receivedFocus()), Tn(e))
        }

        function xn(e, t) {
            e.state.delayingBlurEvent || (e.state.focused && (me(e, "blur", e, t), e.state.focused = !1, x(e.display.wrapper, "CodeMirror-focused")), clearInterval(e.display.blinker), setTimeout((function () {
                e.state.focused || (e.display.shift = !1)
            }), 150))
        }

        function Sn(e) {
            for (var t = e.display, i = t.lineDiv.offsetTop, n = 0; n < t.view.length; n++) {
                var a = t.view[n],
                    s = e.options.lineWrapping,
                    l = void 0,
                    c = 0;
                if (!a.hidden) {
                    if (o && r < 8) {
                        var d = a.node.offsetTop + a.node.offsetHeight;
                        l = d - i, i = d
                    } else {
                        var p = a.node.getBoundingClientRect();
                        l = p.bottom - p.top, !s && a.text.firstChild && (c = a.text.firstChild.getBoundingClientRect().right - p.left - 1)
                    }
                    var u = a.line.height - l;
                    if ((u > .005 || u < -.005) && (Xe(a.line, l), Mn(a.line), a.rest))
                        for (var h = 0; h < a.rest.length; h++) Mn(a.rest[h]);
                    if (c > e.display.sizerWidth) {
                        var f = Math.ceil(c / sn(e.display));
                        f > e.display.maxLineLength && (e.display.maxLineLength = f, e.display.maxLine = a.line, e.display.maxLineChanged = !0)
                    }
                }
            }
        }

        function Mn(e) {
            if (e.widgets)
                for (var t = 0; t < e.widgets.length; ++t) {
                    var i = e.widgets[t],
                        n = i.node.parentNode;
                    n && (i.height = n.offsetHeight)
                }
        }

        function Pn(e, t, i) {
            var n = i && null != i.top ? Math.max(0, i.top) : e.scroller.scrollTop;
            n = Math.floor(n - Ci(e));
            var a = i && null != i.bottom ? i.bottom : n + e.wrapper.clientHeight,
                s = Je(t, n),
                o = Je(t, a);
            if (i && i.ensure) {
                var r = i.ensure.from.line,
                    l = i.ensure.to.line;
                r < s ? (s = r, o = Je(t, $t(Ve(t, r)) + e.wrapper.clientHeight)) : Math.min(l, t.lastLine()) >= o && (s = Je(t, $t(Ve(t, l)) - e.wrapper.clientHeight), o = l)
            }
            return {
                from: s,
                to: Math.max(o, s + 1)
            }
        }

        function In(e, t) {
            var i = e.display,
                n = an(e.display);
            t.top < 0 && (t.top = 0);
            var a = e.curOp && null != e.curOp.scrollTop ? e.curOp.scrollTop : i.scroller.scrollTop,
                s = Mi(e),
                o = {};
            t.bottom - t.top > s && (t.bottom = t.top + s);
            var r = e.doc.height + ki(i),
                l = t.top < n,
                c = t.bottom > r - n;
            if (t.top < a) o.scrollTop = l ? 0 : t.top;
            else if (t.bottom > a + s) {
                var d = Math.min(t.top, (c ? r : t.bottom) - s);
                d != a && (o.scrollTop = d)
            }
            var p = e.curOp && null != e.curOp.scrollLeft ? e.curOp.scrollLeft : i.scroller.scrollLeft,
                u = Si(e) - (e.options.fixedGutter ? i.gutters.offsetWidth : 0),
                h = t.right - t.left > u;
            return h && (t.right = t.left + u), t.left < 10 ? o.scrollLeft = 0 : t.left < p ? o.scrollLeft = Math.max(0, t.left - (h ? 0 : 10)) : t.right > u + p - 3 && (o.scrollLeft = t.right + (h ? 0 : 10) - u), o
        }

        function On(e, t) {
            null != t && (Dn(e), e.curOp.scrollTop = (null == e.curOp.scrollTop ? e.doc.scrollTop : e.curOp.scrollTop) + t)
        }

        function An(e) {
            Dn(e);
            var t = e.getCursor();
            e.curOp.scrollToPos = {
                from: t,
                to: t,
                margin: e.options.cursorScrollMargin
            }
        }

        function Ln(e, t, i) {
            null == t && null == i || Dn(e), null != t && (e.curOp.scrollLeft = t), null != i && (e.curOp.scrollTop = i)
        }

        function Dn(e) {
            var t = e.curOp.scrollToPos;
            t && (e.curOp.scrollToPos = null, Nn(e, Yi(e, t.from), Yi(e, t.to), t.margin))
        }

        function Nn(e, t, i, n) {
            var a = In(e, {
                left: Math.min(t.left, i.left),
                top: Math.min(t.top, i.top) - n,
                right: Math.max(t.right, i.right),
                bottom: Math.max(t.bottom, i.bottom) + n
            });
            Ln(e, a.scrollLeft, a.scrollTop)
        }

        function Rn(e, t) {
            Math.abs(e.doc.scrollTop - t) < 2 || (i || ca(e, {
                top: t
            }), Wn(e, t, !0), i && ca(e), aa(e, 100))
        }

        function Wn(e, t, i) {
            t = Math.max(0, Math.min(e.display.scroller.scrollHeight - e.display.scroller.clientHeight, t)), (e.display.scroller.scrollTop != t || i) && (e.doc.scrollTop = t, e.display.scrollbars.setScrollTop(t), e.display.scroller.scrollTop != t && (e.display.scroller.scrollTop = t))
        }

        function Fn(e, t, i, n) {
            t = Math.max(0, Math.min(t, e.display.scroller.scrollWidth - e.display.scroller.clientWidth)), (i ? t == e.doc.scrollLeft : Math.abs(e.doc.scrollLeft - t) < 2) && !n || (e.doc.scrollLeft = t, ua(e), e.display.scroller.scrollLeft != t && (e.display.scroller.scrollLeft = t), e.display.scrollbars.setScrollLeft(t))
        }

        function Bn(e) {
            var t = e.display,
                i = t.gutters.offsetWidth,
                n = Math.round(e.doc.height + ki(e.display));
            return {
                clientHeight: t.scroller.clientHeight,
                viewHeight: t.wrapper.clientHeight,
                scrollWidth: t.scroller.scrollWidth,
                clientWidth: t.scroller.clientWidth,
                viewWidth: t.wrapper.clientWidth,
                barLeft: e.options.fixedGutter ? i : 0,
                docHeight: n,
                scrollHeight: n + xi(e) + t.barHeight,
                nativeBarWidth: t.nativeBarWidth,
                gutterWidth: i
            }
        }
        var Un = function (e, t, i) {
            this.cm = i;
            var n = this.vert = P("div", [P("div", null, null, "min-width: 1px")], "CodeMirror-vscrollbar"),
                a = this.horiz = P("div", [P("div", null, null, "height: 100%; min-height: 1px")], "CodeMirror-hscrollbar");
            n.tabIndex = a.tabIndex = -1, e(n), e(a), ue(n, "scroll", (function () {
                n.clientHeight && t(n.scrollTop, "vertical")
            })), ue(a, "scroll", (function () {
                a.clientWidth && t(a.scrollLeft, "horizontal")
            })), this.checkedZeroWidth = !1, o && r < 8 && (this.horiz.style.minHeight = this.vert.style.minWidth = "18px")
        };
        Un.prototype.update = function (e) {
            var t = e.scrollWidth > e.clientWidth + 1,
                i = e.scrollHeight > e.clientHeight + 1,
                n = e.nativeBarWidth;
            if (i) {
                this.vert.style.display = "block", this.vert.style.bottom = t ? n + "px" : "0";
                var a = e.viewHeight - (t ? n : 0);
                this.vert.firstChild.style.height = Math.max(0, e.scrollHeight - e.clientHeight + a) + "px"
            } else this.vert.style.display = "", this.vert.firstChild.style.height = "0";
            if (t) {
                this.horiz.style.display = "block", this.horiz.style.right = i ? n + "px" : "0", this.horiz.style.left = e.barLeft + "px";
                var s = e.viewWidth - e.barLeft - (i ? n : 0);
                this.horiz.firstChild.style.width = Math.max(0, e.scrollWidth - e.clientWidth + s) + "px"
            } else this.horiz.style.display = "", this.horiz.firstChild.style.width = "0";
            return !this.checkedZeroWidth && e.clientHeight > 0 && (0 == n && this.zeroWidthHack(), this.checkedZeroWidth = !0), {
                right: i ? n : 0,
                bottom: t ? n : 0
            }
        }, Un.prototype.setScrollLeft = function (e) {
            this.horiz.scrollLeft != e && (this.horiz.scrollLeft = e), this.disableHoriz && this.enableZeroWidthBar(this.horiz, this.disableHoriz, "horiz")
        }, Un.prototype.setScrollTop = function (e) {
            this.vert.scrollTop != e && (this.vert.scrollTop = e), this.disableVert && this.enableZeroWidthBar(this.vert, this.disableVert, "vert")
        }, Un.prototype.zeroWidthHack = function () {
            var e = b && !h ? "12px" : "18px";
            this.horiz.style.height = this.vert.style.width = e, this.horiz.style.pointerEvents = this.vert.style.pointerEvents = "none", this.disableHoriz = new B, this.disableVert = new B
        }, Un.prototype.enableZeroWidthBar = function (e, t, i) {
            e.style.pointerEvents = "auto", t.set(1e3, (function n() {
                var a = e.getBoundingClientRect();
                ("vert" == i ? document.elementFromPoint(a.right - 1, (a.top + a.bottom) / 2) : document.elementFromPoint((a.right + a.left) / 2, a.bottom - 1)) != e ? e.style.pointerEvents = "none" : t.set(1e3, n)
            }))
        }, Un.prototype.clear = function () {
            var e = this.horiz.parentNode;
            e.removeChild(this.horiz), e.removeChild(this.vert)
        };
        var Hn = function () { };

        function zn(e, t) {
            t || (t = Bn(e));
            var i = e.display.barWidth,
                n = e.display.barHeight;
            Gn(e, t);
            for (var a = 0; a < 4 && i != e.display.barWidth || n != e.display.barHeight; a++) i != e.display.barWidth && e.options.lineWrapping && Sn(e), Gn(e, Bn(e)), i = e.display.barWidth, n = e.display.barHeight
        }

        function Gn(e, t) {
            var i = e.display,
                n = i.scrollbars.update(t);
            i.sizer.style.paddingRight = (i.barWidth = n.right) + "px", i.sizer.style.paddingBottom = (i.barHeight = n.bottom) + "px", i.heightForcer.style.borderBottom = n.bottom + "px solid transparent", n.right && n.bottom ? (i.scrollbarFiller.style.display = "block", i.scrollbarFiller.style.height = n.bottom + "px", i.scrollbarFiller.style.width = n.right + "px") : i.scrollbarFiller.style.display = "", n.bottom && e.options.coverGutterNextToScrollbar && e.options.fixedGutter ? (i.gutterFiller.style.display = "block", i.gutterFiller.style.height = n.bottom + "px", i.gutterFiller.style.width = t.gutterWidth + "px") : i.gutterFiller.style.display = ""
        }
        Hn.prototype.update = function () {
            return {
                bottom: 0,
                right: 0
            }
        }, Hn.prototype.setScrollLeft = function () { }, Hn.prototype.setScrollTop = function () { }, Hn.prototype.clear = function () { };
        var $n = {
            native: Un,
            null: Hn
        };

        function qn(e) {
            e.display.scrollbars && (e.display.scrollbars.clear(), e.display.scrollbars.addClass && x(e.display.wrapper, e.display.scrollbars.addClass)), e.display.scrollbars = new $n[e.options.scrollbarStyle]((function (t) {
                e.display.wrapper.insertBefore(t, e.display.scrollbarFiller), ue(t, "mousedown", (function () {
                    e.state.focused && setTimeout((function () {
                        return e.display.input.focus()
                    }), 0)
                })), t.setAttribute("cm-not-content", "true")
            }), (function (t, i) {
                "horizontal" == i ? Fn(e, t) : Rn(e, t)
            }), e), e.display.scrollbars.addClass && L(e.display.wrapper, e.display.scrollbars.addClass)
        }
        var jn = 0;

        function Vn(e) {
            var t;
            e.curOp = {
                cm: e,
                viewChanged: !1,
                startHeight: e.doc.height,
                forceUpdate: !1,
                updateInput: 0,
                typing: !1,
                changeObjs: null,
                cursorActivityHandlers: null,
                cursorActivityCalled: 0,
                selectionChanged: !1,
                updateMaxLine: !1,
                scrollLeft: null,
                scrollTop: null,
                scrollToPos: null,
                focus: !1,
                id: ++jn
            }, t = e.curOp, oi ? oi.ops.push(t) : t.ownsGroup = oi = {
                ops: [t],
                delayedCallbacks: []
            }
        }

        function Yn(e) {
            var t = e.curOp;
            t && function (e, t) {
                var i = e.ownsGroup;
                if (i) try {
                    ! function (e) {
                        var t = e.delayedCallbacks,
                            i = 0;
                        do {
                            for (; i < t.length; i++) t[i].call(null);
                            for (var n = 0; n < e.ops.length; n++) {
                                var a = e.ops[n];
                                if (a.cursorActivityHandlers)
                                    for (; a.cursorActivityCalled < a.cursorActivityHandlers.length;) a.cursorActivityHandlers[a.cursorActivityCalled++].call(null, a.cm)
                            }
                        } while (i < t.length)
                    }(i)
                } finally {
                        oi = null, t(i)
                    }
            }(t, (function (e) {
                for (var t = 0; t < e.ops.length; t++) e.ops[t].cm.curOp = null;
                ! function (e) {
                    for (var t = e.ops, i = 0; i < t.length; i++) Kn(t[i]);
                    for (var n = 0; n < t.length; n++) Xn(t[n]);
                    for (var a = 0; a < t.length; a++) Qn(t[a]);
                    for (var s = 0; s < t.length; s++) Jn(t[s]);
                    for (var o = 0; o < t.length; o++) Zn(t[o])
                }(e)
            }))
        }

        function Kn(e) {
            var t = e.cm,
                i = t.display;
            ! function (e) {
                var t = e.display;
                !t.scrollbarsClipped && t.scroller.offsetWidth && (t.nativeBarWidth = t.scroller.offsetWidth - t.scroller.clientWidth, t.heightForcer.style.height = xi(e) + "px", t.sizer.style.marginBottom = -t.nativeBarWidth + "px", t.sizer.style.borderRightWidth = xi(e) + "px", t.scrollbarsClipped = !0)
            }(t), e.updateMaxLine && jt(t), e.mustUpdate = e.viewChanged || e.forceUpdate || null != e.scrollTop || e.scrollToPos && (e.scrollToPos.from.line < i.viewFrom || e.scrollToPos.to.line >= i.viewTo) || i.maxLineChanged && t.options.lineWrapping, e.update = e.mustUpdate && new oa(t, e.mustUpdate && {
                top: e.scrollTop,
                ensure: e.scrollToPos
            }, e.forceUpdate)
        }

        function Xn(e) {
            e.updatedDisplay = e.mustUpdate && ra(e.cm, e.update)
        }

        function Qn(e) {
            var t = e.cm,
                i = t.display;
            e.updatedDisplay && Sn(t), e.barMeasure = Bn(t), i.maxLineChanged && !t.options.lineWrapping && (e.adjustWidthTo = Ii(t, i.maxLine, i.maxLine.text.length).left + 3, t.display.sizerWidth = e.adjustWidthTo, e.barMeasure.scrollWidth = Math.max(i.scroller.clientWidth, i.sizer.offsetLeft + e.adjustWidthTo + xi(t) + t.display.barWidth), e.maxScrollLeft = Math.max(0, i.sizer.offsetLeft + e.adjustWidthTo - Si(t))), (e.updatedDisplay || e.selectionChanged) && (e.preparedSelection = i.input.prepareSelection())
        }

        function Jn(e) {
            var t = e.cm;
            null != e.adjustWidthTo && (t.display.sizer.style.minWidth = e.adjustWidthTo + "px", e.maxScrollLeft < t.doc.scrollLeft && Fn(t, Math.min(t.display.scroller.scrollLeft, e.maxScrollLeft), !0), t.display.maxLineChanged = !1);
            var i = e.focus && e.focus == A();
            e.preparedSelection && t.display.input.showSelection(e.preparedSelection, i), (e.updatedDisplay || e.startHeight != t.doc.height) && zn(t, e.barMeasure), e.updatedDisplay && pa(t, e.barMeasure), e.selectionChanged && Tn(t), t.state.focused && e.updateInput && t.display.input.reset(e.typing), i && Cn(e.cm)
        }

        function Zn(e) {
            var t = e.cm,
                i = t.display,
                n = t.doc;
            if (e.updatedDisplay && la(t, e.update), null == i.wheelStartX || null == e.scrollTop && null == e.scrollLeft && !e.scrollToPos || (i.wheelStartX = i.wheelStartY = null), null != e.scrollTop && Wn(t, e.scrollTop, e.forceScroll), null != e.scrollLeft && Fn(t, e.scrollLeft, !0, !0), e.scrollToPos) {
                var a = function (e, t, i, n) {
                    var a;
                    null == n && (n = 0), e.options.lineWrapping || t != i || (i = "before" == (t = t.ch ? tt(t.line, "before" == t.sticky ? t.ch - 1 : t.ch, "after") : t).sticky ? tt(t.line, t.ch + 1, "before") : t);
                    for (var s = 0; s < 5; s++) {
                        var o = !1,
                            r = Vi(e, t),
                            l = i && i != t ? Vi(e, i) : r,
                            c = In(e, a = {
                                left: Math.min(r.left, l.left),
                                top: Math.min(r.top, l.top) - n,
                                right: Math.max(r.left, l.left),
                                bottom: Math.max(r.bottom, l.bottom) + n
                            }),
                            d = e.doc.scrollTop,
                            p = e.doc.scrollLeft;
                        if (null != c.scrollTop && (Rn(e, c.scrollTop), Math.abs(e.doc.scrollTop - d) > 1 && (o = !0)), null != c.scrollLeft && (Fn(e, c.scrollLeft), Math.abs(e.doc.scrollLeft - p) > 1 && (o = !0)), !o) break
                    }
                    return a
                }(t, lt(n, e.scrollToPos.from), lt(n, e.scrollToPos.to), e.scrollToPos.margin);
                ! function (e, t) {
                    if (!ge(e, "scrollCursorIntoView")) {
                        var i = e.display,
                            n = i.sizer.getBoundingClientRect(),
                            a = null;
                        if (t.top + n.top < 0 ? a = !0 : t.bottom + n.top > (window.innerHeight || document.documentElement.clientHeight) && (a = !1), null != a && !f) {
                            var s = P("div", "â€‹", null, "position: absolute;\n                         top: " + (t.top - i.viewOffset - Ci(e.display)) + "px;\n                         height: " + (t.bottom - t.top + xi(e) + i.barHeight) + "px;\n                         left: " + t.left + "px; width: " + Math.max(2, t.right - t.left) + "px;");
                            e.display.lineSpace.appendChild(s), s.scrollIntoView(a), e.display.lineSpace.removeChild(s)
                        }
                    }
                }(t, a)
            }
            var s = e.maybeHiddenMarkers,
                o = e.maybeUnhiddenMarkers;
            if (s)
                for (var r = 0; r < s.length; ++r) s[r].lines.length || me(s[r], "hide");
            if (o)
                for (var l = 0; l < o.length; ++l) o[l].lines.length && me(o[l], "unhide");
            i.wrapper.offsetHeight && (n.scrollTop = t.display.scroller.scrollTop), e.changeObjs && me(t, "changes", t, e.changeObjs), e.update && e.update.finish()
        }

        function ea(e, t) {
            if (e.curOp) return t();
            Vn(e);
            try {
                return t()
            } finally {
                Yn(e)
            }
        }

        function ta(e, t) {
            return function () {
                if (e.curOp) return t.apply(e, arguments);
                Vn(e);
                try {
                    return t.apply(e, arguments)
                } finally {
                    Yn(e)
                }
            }
        }

        function ia(e) {
            return function () {
                if (this.curOp) return e.apply(this, arguments);
                Vn(this);
                try {
                    return e.apply(this, arguments)
                } finally {
                    Yn(this)
                }
            }
        }

        function na(e) {
            return function () {
                var t = this.cm;
                if (!t || t.curOp) return e.apply(this, arguments);
                Vn(t);
                try {
                    return e.apply(this, arguments)
                } finally {
                    Yn(t)
                }
            }
        }

        function aa(e, t) {
            e.doc.highlightFrontier < e.display.viewTo && e.state.highlight.set(t, R(sa, e))
        }

        function sa(e) {
            var t = e.doc;
            if (!(t.highlightFrontier >= e.display.viewTo)) {
                var i = +new Date + e.options.workTime,
                    n = ft(e, t.highlightFrontier),
                    a = [];
                t.iter(n.line, Math.min(t.first + t.size, e.display.viewTo + 500), (function (s) {
                    if (n.line >= e.display.viewFrom) {
                        var o = s.styles,
                            r = s.text.length > e.options.maxHighlightLength ? Ge(t.mode, n.state) : null,
                            l = ut(e, s, n, !0);
                        r && (n.state = r), s.styles = l.styles;
                        var c = s.styleClasses,
                            d = l.classes;
                        d ? s.styleClasses = d : c && (s.styleClasses = null);
                        for (var p = !o || o.length != s.styles.length || c != d && (!c || !d || c.bgClass != d.bgClass || c.textClass != d.textClass), u = 0; !p && u < o.length; ++u) p = o[u] != s.styles[u];
                        p && a.push(n.line), s.stateAfter = n.save(), n.nextLine()
                    } else s.text.length <= e.options.maxHighlightLength && mt(e, s.text, n), s.stateAfter = n.line % 5 == 0 ? n.save() : null, n.nextLine();
                    if (+new Date > i) return aa(e, e.options.workDelay), !0
                })), t.highlightFrontier = n.line, t.modeFrontier = Math.max(t.modeFrontier, n.line), a.length && ea(e, (function () {
                    for (var t = 0; t < a.length; t++) hn(e, a[t], "text")
                }))
            }
        }
        var oa = function (e, t, i) {
            var n = e.display;
            this.viewport = t, this.visible = Pn(n, e.doc, t), this.editorIsHidden = !n.wrapper.offsetWidth, this.wrapperHeight = n.wrapper.clientHeight, this.wrapperWidth = n.wrapper.clientWidth, this.oldDisplayWidth = Si(e), this.force = i, this.dims = on(e), this.events = []
        };

        function ra(e, t) {
            var i = e.display,
                n = e.doc;
            if (t.editorIsHidden) return fn(e), !1;
            if (!t.force && t.visible.from >= i.viewFrom && t.visible.to <= i.viewTo && (null == i.updateLineNumbers || i.updateLineNumbers >= i.viewTo) && i.renderedView == i.view && 0 == gn(e)) return !1;
            ha(e) && (fn(e), t.dims = on(e));
            var a = n.first + n.size,
                s = Math.max(t.visible.from - e.options.viewportMargin, n.first),
                o = Math.min(a, t.visible.to + e.options.viewportMargin);
            i.viewFrom < s && s - i.viewFrom < 20 && (s = Math.max(n.first, i.viewFrom)), i.viewTo > o && i.viewTo - o < 20 && (o = Math.min(a, i.viewTo)), Ct && (s = Ut(e.doc, s), o = Ht(e.doc, o));
            var r = s != i.viewFrom || o != i.viewTo || i.lastWrapHeight != t.wrapperHeight || i.lastWrapWidth != t.wrapperWidth;
            ! function (e, t, i) {
                var n = e.display;
                0 == n.view.length || t >= n.viewTo || i <= n.viewFrom ? (n.view = si(e, t, i), n.viewFrom = t) : (n.viewFrom > t ? n.view = si(e, t, n.viewFrom).concat(n.view) : n.viewFrom < t && (n.view = n.view.slice(pn(e, t))), n.viewFrom = t, n.viewTo < i ? n.view = n.view.concat(si(e, n.viewTo, i)) : n.viewTo > i && (n.view = n.view.slice(0, pn(e, i)))), n.viewTo = i
            }(e, s, o), i.viewOffset = $t(Ve(e.doc, i.viewFrom)), e.display.mover.style.top = i.viewOffset + "px";
            var c = gn(e);
            if (!r && 0 == c && !t.force && i.renderedView == i.view && (null == i.updateLineNumbers || i.updateLineNumbers >= i.viewTo)) return !1;
            var d = function (e) {
                if (e.hasFocus()) return null;
                var t = A();
                if (!t || !O(e.display.lineDiv, t)) return null;
                var i = {
                    activeElt: t
                };
                if (window.getSelection) {
                    var n = window.getSelection();
                    n.anchorNode && n.extend && O(e.display.lineDiv, n.anchorNode) && (i.anchorNode = n.anchorNode, i.anchorOffset = n.anchorOffset, i.focusNode = n.focusNode, i.focusOffset = n.focusOffset)
                }
                return i
            }(e);
            return c > 4 && (i.lineDiv.style.display = "none"),
                function (e, t, i) {
                    var n = e.display,
                        a = e.options.lineNumbers,
                        s = n.lineDiv,
                        o = s.firstChild;

                    function r(t) {
                        var i = t.nextSibling;
                        return l && b && e.display.currentWheelTarget == t ? t.style.display = "none" : t.parentNode.removeChild(t), i
                    }
                    for (var c = n.view, d = n.viewFrom, p = 0; p < c.length; p++) {
                        var u = c[p];
                        if (u.hidden);
                        else if (u.node && u.node.parentNode == s) {
                            for (; o != u.node;) o = r(o);
                            var h = a && null != t && t <= d && u.lineNumber;
                            u.changes && (U(u.changes, "gutter") > -1 && (h = !1), di(e, u, d, i)), h && (S(u.lineNumber), u.lineNumber.appendChild(document.createTextNode(et(e.options, d)))), o = u.node.nextSibling
                        } else {
                            var f = vi(e, u, d, i);
                            s.insertBefore(f, o)
                        }
                        d += u.size
                    }
                    for (; o;) o = r(o)
                }(e, i.updateLineNumbers, t.dims), c > 4 && (i.lineDiv.style.display = ""), i.renderedView = i.view,
                function (e) {
                    if (e && e.activeElt && e.activeElt != A() && (e.activeElt.focus(), e.anchorNode && O(document.body, e.anchorNode) && O(document.body, e.focusNode))) {
                        var t = window.getSelection(),
                            i = document.createRange();
                        i.setEnd(e.anchorNode, e.anchorOffset), i.collapse(!1), t.removeAllRanges(), t.addRange(i), t.extend(e.focusNode, e.focusOffset)
                    }
                }(d), S(i.cursorDiv), S(i.selectionDiv), i.gutters.style.height = i.sizer.style.minHeight = 0, r && (i.lastWrapHeight = t.wrapperHeight, i.lastWrapWidth = t.wrapperWidth, aa(e, 400)), i.updateLineNumbers = null, !0
        }

        function la(e, t) {
            for (var i = t.viewport, n = !0;
                (n && e.options.lineWrapping && t.oldDisplayWidth != Si(e) || (i && null != i.top && (i = {
                    top: Math.min(e.doc.height + ki(e.display) - Mi(e), i.top)
                }), t.visible = Pn(e.display, e.doc, i), !(t.visible.from >= e.display.viewFrom && t.visible.to <= e.display.viewTo))) && ra(e, t); n = !1) {
                Sn(e);
                var a = Bn(e);
                vn(e), zn(e, a), pa(e, a), t.force = !1
            }
            t.signal(e, "update", e), e.display.viewFrom == e.display.reportedViewFrom && e.display.viewTo == e.display.reportedViewTo || (t.signal(e, "viewportChange", e, e.display.viewFrom, e.display.viewTo), e.display.reportedViewFrom = e.display.viewFrom, e.display.reportedViewTo = e.display.viewTo)
        }

        function ca(e, t) {
            var i = new oa(e, t);
            if (ra(e, i)) {
                Sn(e), la(e, i);
                var n = Bn(e);
                vn(e), zn(e, n), pa(e, n), i.finish()
            }
        }

        function da(e) {
            var t = e.gutters.offsetWidth;
            e.sizer.style.marginLeft = t + "px"
        }

        function pa(e, t) {
            e.display.sizer.style.minHeight = t.docHeight + "px", e.display.heightForcer.style.top = t.docHeight + "px", e.display.gutters.style.height = t.docHeight + e.display.barHeight + xi(e) + "px"
        }

        function ua(e) {
            var t = e.display,
                i = t.view;
            if (t.alignWidgets || t.gutters.firstChild && e.options.fixedGutter) {
                for (var n = rn(t) - t.scroller.scrollLeft + e.doc.scrollLeft, a = t.gutters.offsetWidth, s = n + "px", o = 0; o < i.length; o++)
                    if (!i[o].hidden) {
                        e.options.fixedGutter && (i[o].gutter && (i[o].gutter.style.left = s), i[o].gutterBackground && (i[o].gutterBackground.style.left = s));
                        var r = i[o].alignable;
                        if (r)
                            for (var l = 0; l < r.length; l++) r[l].style.left = s
                    } e.options.fixedGutter && (t.gutters.style.left = n + a + "px")
            }
        }

        function ha(e) {
            if (!e.options.lineNumbers) return !1;
            var t = e.doc,
                i = et(e.options, t.first + t.size - 1),
                n = e.display;
            if (i.length != n.lineNumChars) {
                var a = n.measure.appendChild(P("div", [P("div", i)], "CodeMirror-linenumber CodeMirror-gutter-elt")),
                    s = a.firstChild.offsetWidth,
                    o = a.offsetWidth - s;
                return n.lineGutter.style.width = "", n.lineNumInnerWidth = Math.max(s, n.lineGutter.offsetWidth - o) + 1, n.lineNumWidth = n.lineNumInnerWidth + o, n.lineNumChars = n.lineNumInnerWidth ? i.length : -1, n.lineGutter.style.width = n.lineNumWidth + "px", da(e.display), !0
            }
            return !1
        }

        function fa(e, t) {
            for (var i = [], n = !1, a = 0; a < e.length; a++) {
                var s = e[a],
                    o = null;
                if ("string" != typeof s && (o = s.style, s = s.className), "CodeMirror-linenumbers" == s) {
                    if (!t) continue;
                    n = !0
                }
                i.push({
                    className: s,
                    style: o
                })
            }
            return t && !n && i.push({
                className: "CodeMirror-linenumbers",
                style: null
            }), i
        }

        function ma(e) {
            var t = e.gutters,
                i = e.gutterSpecs;
            S(t), e.lineGutter = null;
            for (var n = 0; n < i.length; ++n) {
                var a = i[n],
                    s = a.className,
                    o = a.style,
                    r = t.appendChild(P("div", null, "CodeMirror-gutter " + s));
                o && (r.style.cssText = o), "CodeMirror-linenumbers" == s && (e.lineGutter = r, r.style.width = (e.lineNumWidth || 1) + "px")
            }
            t.style.display = i.length ? "" : "none", da(e)
        }

        function ga(e) {
            ma(e.display), un(e), ua(e)
        }

        function va(e, t, n, a) {
            var s = this;
            this.input = n, s.scrollbarFiller = P("div", null, "CodeMirror-scrollbar-filler"), s.scrollbarFiller.setAttribute("cm-not-content", "true"), s.gutterFiller = P("div", null, "CodeMirror-gutter-filler"), s.gutterFiller.setAttribute("cm-not-content", "true"), s.lineDiv = I("div", null, "CodeMirror-code"), s.selectionDiv = P("div", null, null, "position: relative; z-index: 1"), s.cursorDiv = P("div", null, "CodeMirror-cursors"), s.measure = P("div", null, "CodeMirror-measure"), s.lineMeasure = P("div", null, "CodeMirror-measure"), s.lineSpace = I("div", [s.measure, s.lineMeasure, s.selectionDiv, s.cursorDiv, s.lineDiv], null, "position: relative; outline: none");
            var c = I("div", [s.lineSpace], "CodeMirror-lines");
            s.mover = P("div", [c], null, "position: relative"), s.sizer = P("div", [s.mover], "CodeMirror-sizer"), s.sizerWidth = null, s.heightForcer = P("div", null, null, "position: absolute; height: " + H + "px; width: 1px;"), s.gutters = P("div", null, "CodeMirror-gutters"), s.lineGutter = null, s.scroller = P("div", [s.sizer, s.heightForcer, s.gutters], "CodeMirror-scroll"), s.scroller.setAttribute("tabIndex", "-1"), s.wrapper = P("div", [s.scrollbarFiller, s.gutterFiller, s.scroller], "CodeMirror"), o && r < 8 && (s.gutters.style.zIndex = -1, s.scroller.style.paddingRight = 0), l || i && v || (s.scroller.draggable = !0), e && (e.appendChild ? e.appendChild(s.wrapper) : e(s.wrapper)), s.viewFrom = s.viewTo = t.first, s.reportedViewFrom = s.reportedViewTo = t.first, s.view = [], s.renderedView = null, s.externalMeasured = null, s.viewOffset = 0, s.lastWrapHeight = s.lastWrapWidth = 0, s.updateLineNumbers = null, s.nativeBarWidth = s.barHeight = s.barWidth = 0, s.scrollbarsClipped = !1, s.lineNumWidth = s.lineNumInnerWidth = s.lineNumChars = null, s.alignWidgets = !1, s.cachedCharWidth = s.cachedTextHeight = s.cachedPaddingH = null, s.maxLine = null, s.maxLineLength = 0, s.maxLineChanged = !1, s.wheelDX = s.wheelDY = s.wheelStartX = s.wheelStartY = null, s.shift = !1, s.selForContextMenu = null, s.activeTouch = null, s.gutterSpecs = fa(a.gutters, a.lineNumbers), ma(s), n.init(s)
        }
        oa.prototype.signal = function (e, t) {
            be(e, t) && this.events.push(arguments)
        }, oa.prototype.finish = function () {
            for (var e = 0; e < this.events.length; e++) me.apply(null, this.events[e])
        };
        var ba = 0,
            ya = null;

        function wa(e) {
            var t = e.wheelDeltaX,
                i = e.wheelDeltaY;
            return null == t && e.detail && e.axis == e.HORIZONTAL_AXIS && (t = e.detail), null == i && e.detail && e.axis == e.VERTICAL_AXIS ? i = e.detail : null == i && (i = e.wheelDelta), {
                x: t,
                y: i
            }
        }

        function _a(e) {
            var t = wa(e);
            return t.x *= ya, t.y *= ya, t
        }

        function Ta(e, t) {
            var n = wa(t),
                a = n.x,
                s = n.y,
                o = e.display,
                r = o.scroller,
                c = r.scrollWidth > r.clientWidth,
                d = r.scrollHeight > r.clientHeight;
            if (a && c || s && d) {
                if (s && b && l) e: for (var u = t.target, h = o.view; u != r; u = u.parentNode)
                    for (var f = 0; f < h.length; f++)
                        if (h[f].node == u) {
                            e.display.currentWheelTarget = u;
                            break e
                        } if (a && !i && !p && null != ya) return s && d && Rn(e, Math.max(0, r.scrollTop + s * ya)), Fn(e, Math.max(0, r.scrollLeft + a * ya)), (!s || s && d) && we(t), void (o.wheelStartX = null);
                if (s && null != ya) {
                    var m = s * ya,
                        g = e.doc.scrollTop,
                        v = g + o.wrapper.clientHeight;
                    m < 0 ? g = Math.max(0, g + m - 50) : v = Math.min(e.doc.height, v + m + 50), ca(e, {
                        top: g,
                        bottom: v
                    })
                }
                ba < 20 && (null == o.wheelStartX ? (o.wheelStartX = r.scrollLeft, o.wheelStartY = r.scrollTop, o.wheelDX = a, o.wheelDY = s, setTimeout((function () {
                    if (null != o.wheelStartX) {
                        var e = r.scrollLeft - o.wheelStartX,
                            t = r.scrollTop - o.wheelStartY,
                            i = t && o.wheelDY && t / o.wheelDY || e && o.wheelDX && e / o.wheelDX;
                        o.wheelStartX = o.wheelStartY = null, i && (ya = (ya * ba + i) / (ba + 1), ++ba)
                    }
                }), 200)) : (o.wheelDX += a, o.wheelDY += s))
            }
        }
        o ? ya = -.53 : i ? ya = 15 : d ? ya = -.7 : u && (ya = -1 / 3);
        var Ca = function (e, t) {
            this.ranges = e, this.primIndex = t
        };
        Ca.prototype.primary = function () {
            return this.ranges[this.primIndex]
        }, Ca.prototype.equals = function (e) {
            if (e == this) return !0;
            if (e.primIndex != this.primIndex || e.ranges.length != this.ranges.length) return !1;
            for (var t = 0; t < this.ranges.length; t++) {
                var i = this.ranges[t],
                    n = e.ranges[t];
                if (!nt(i.anchor, n.anchor) || !nt(i.head, n.head)) return !1
            }
            return !0
        }, Ca.prototype.deepCopy = function () {
            for (var e = [], t = 0; t < this.ranges.length; t++) e[t] = new ka(at(this.ranges[t].anchor), at(this.ranges[t].head));
            return new Ca(e, this.primIndex)
        }, Ca.prototype.somethingSelected = function () {
            for (var e = 0; e < this.ranges.length; e++)
                if (!this.ranges[e].empty()) return !0;
            return !1
        }, Ca.prototype.contains = function (e, t) {
            t || (t = e);
            for (var i = 0; i < this.ranges.length; i++) {
                var n = this.ranges[i];
                if (it(t, n.from()) >= 0 && it(e, n.to()) <= 0) return i
            }
            return -1
        };
        var ka = function (e, t) {
            this.anchor = e, this.head = t
        };

        function Ea(e, t, i) {
            var n = e && e.options.selectionsMayTouch,
                a = t[i];
            t.sort((function (e, t) {
                return it(e.from(), t.from())
            })), i = U(t, a);
            for (var s = 1; s < t.length; s++) {
                var o = t[s],
                    r = t[s - 1],
                    l = it(r.to(), o.from());
                if (n && !o.empty() ? l > 0 : l >= 0) {
                    var c = ot(r.from(), o.from()),
                        d = st(r.to(), o.to()),
                        p = r.empty() ? o.from() == o.head : r.from() == r.head;
                    s <= i && --i, t.splice(--s, 2, new ka(p ? d : c, p ? c : d))
                }
            }
            return new Ca(t, i)
        }

        function xa(e, t) {
            return new Ca([new ka(e, t || e)], 0)
        }

        function Sa(e) {
            return e.text ? tt(e.from.line + e.text.length - 1, K(e.text).length + (1 == e.text.length ? e.from.ch : 0)) : e.to
        }

        function Ma(e, t) {
            if (it(e, t.from) < 0) return e;
            if (it(e, t.to) <= 0) return Sa(t);
            var i = e.line + t.text.length - (t.to.line - t.from.line) - 1,
                n = e.ch;
            return e.line == t.to.line && (n += Sa(t).ch - t.to.ch), tt(i, n)
        }

        function Pa(e, t) {
            for (var i = [], n = 0; n < e.sel.ranges.length; n++) {
                var a = e.sel.ranges[n];
                i.push(new ka(Ma(a.anchor, t), Ma(a.head, t)))
            }
            return Ea(e.cm, i, e.sel.primIndex)
        }

        function Ia(e, t, i) {
            return e.line == t.line ? tt(i.line, e.ch - t.ch + i.ch) : tt(i.line + (e.line - t.line), e.ch)
        }

        function Oa(e) {
            e.doc.mode = Ue(e.options, e.doc.modeOption), Aa(e)
        }

        function Aa(e) {
            e.doc.iter((function (e) {
                e.stateAfter && (e.stateAfter = null), e.styles && (e.styles = null)
            })), e.doc.modeFrontier = e.doc.highlightFrontier = e.doc.first, aa(e, 100), e.state.modeGen++, e.curOp && un(e)
        }

        function La(e, t) {
            return 0 == t.from.ch && 0 == t.to.ch && "" == K(t.text) && (!e.cm || e.cm.options.wholeLineUpdateBefore)
        }

        function Da(e, t, i, n) {
            function a(e) {
                return i ? i[e] : null
            }

            function s(e, i, a) {
                ! function (e, t, i, n) {
                    e.text = t, e.stateAfter && (e.stateAfter = null), e.styles && (e.styles = null), null != e.order && (e.order = null), Pt(e), It(e, i);
                    var a = n ? n(e) : 1;
                    a != e.height && Xe(e, a)
                }(e, i, a, n), li(e, "change", e, t)
            }

            function o(e, t) {
                for (var i = [], s = e; s < t; ++s) i.push(new Vt(c[s], a(s), n));
                return i
            }
            var r = t.from,
                l = t.to,
                c = t.text,
                d = Ve(e, r.line),
                p = Ve(e, l.line),
                u = K(c),
                h = a(c.length - 1),
                f = l.line - r.line;
            if (t.full) e.insert(0, o(0, c.length)), e.remove(c.length, e.size - c.length);
            else if (La(e, t)) {
                var m = o(0, c.length - 1);
                s(p, p.text, h), f && e.remove(r.line, f), m.length && e.insert(r.line, m)
            } else if (d == p)
                if (1 == c.length) s(d, d.text.slice(0, r.ch) + u + d.text.slice(l.ch), h);
                else {
                    var g = o(1, c.length - 1);
                    g.push(new Vt(u + d.text.slice(l.ch), h, n)), s(d, d.text.slice(0, r.ch) + c[0], a(0)), e.insert(r.line + 1, g)
                }
            else if (1 == c.length) s(d, d.text.slice(0, r.ch) + c[0] + p.text.slice(l.ch), a(0)), e.remove(r.line + 1, f);
            else {
                s(d, d.text.slice(0, r.ch) + c[0], a(0)), s(p, u + p.text.slice(l.ch), h);
                var v = o(1, c.length - 1);
                f > 1 && e.remove(r.line + 1, f - 1), e.insert(r.line + 1, v)
            }
            li(e, "change", e, t)
        }

        function Na(e, t, i) {
            ! function e(n, a, s) {
                if (n.linked)
                    for (var o = 0; o < n.linked.length; ++o) {
                        var r = n.linked[o];
                        if (r.doc != a) {
                            var l = s && r.sharedHist;
                            i && !l || (t(r.doc, l), e(r.doc, n, l))
                        }
                    }
            }(e, null, !0)
        }

        function Ra(e, t) {
            if (t.cm) throw new Error("This document is already in use.");
            e.doc = t, t.cm = e, cn(e), Oa(e), Wa(e), e.options.lineWrapping || jt(e), e.options.mode = t.modeOption, un(e)
        }

        function Wa(e) {
            ("rtl" == e.doc.direction ? L : x)(e.display.lineDiv, "CodeMirror-rtl")
        }

        function Fa(e) {
            this.done = [], this.undone = [], this.undoDepth = 1 / 0, this.lastModTime = this.lastSelTime = 0, this.lastOp = this.lastSelOp = null, this.lastOrigin = this.lastSelOrigin = null, this.generation = this.maxGeneration = e || 1
        }

        function Ba(e, t) {
            var i = {
                from: at(t.from),
                to: Sa(t),
                text: Ye(e, t.from, t.to)
            };
            return $a(e, i, t.from.line, t.to.line + 1), Na(e, (function (e) {
                return $a(e, i, t.from.line, t.to.line + 1)
            }), !0), i
        }

        function Ua(e) {
            for (; e.length;) {
                if (!K(e).ranges) break;
                e.pop()
            }
        }

        function Ha(e, t, i, n) {
            var a = e.history;
            a.undone.length = 0;
            var s, o, r = +new Date;
            if ((a.lastOp == n || a.lastOrigin == t.origin && t.origin && ("+" == t.origin.charAt(0) && a.lastModTime > r - (e.cm ? e.cm.options.historyEventDelay : 500) || "*" == t.origin.charAt(0))) && (s = function (e, t) {
                return t ? (Ua(e.done), K(e.done)) : e.done.length && !K(e.done).ranges ? K(e.done) : e.done.length > 1 && !e.done[e.done.length - 2].ranges ? (e.done.pop(), K(e.done)) : void 0
            }(a, a.lastOp == n))) o = K(s.changes), 0 == it(t.from, t.to) && 0 == it(t.from, o.to) ? o.to = Sa(t) : s.changes.push(Ba(e, t));
            else {
                var l = K(a.done);
                for (l && l.ranges || Ga(e.sel, a.done), s = {
                    changes: [Ba(e, t)],
                    generation: a.generation
                }, a.done.push(s); a.done.length > a.undoDepth;) a.done.shift(), a.done[0].ranges || a.done.shift()
            }
            a.done.push(i), a.generation = ++a.maxGeneration, a.lastModTime = a.lastSelTime = r, a.lastOp = a.lastSelOp = n, a.lastOrigin = a.lastSelOrigin = t.origin, o || me(e, "historyAdded")
        }

        function za(e, t, i, n) {
            var a = e.history,
                s = n && n.origin;
            i == a.lastSelOp || s && a.lastSelOrigin == s && (a.lastModTime == a.lastSelTime && a.lastOrigin == s || function (e, t, i, n) {
                var a = t.charAt(0);
                return "*" == a || "+" == a && i.ranges.length == n.ranges.length && i.somethingSelected() == n.somethingSelected() && new Date - e.history.lastSelTime <= (e.cm ? e.cm.options.historyEventDelay : 500)
            }(e, s, K(a.done), t)) ? a.done[a.done.length - 1] = t : Ga(t, a.done), a.lastSelTime = +new Date, a.lastSelOrigin = s, a.lastSelOp = i, n && !1 !== n.clearRedo && Ua(a.undone)
        }

        function Ga(e, t) {
            var i = K(t);
            i && i.ranges && i.equals(e) || t.push(e)
        }

        function $a(e, t, i, n) {
            var a = t["spans_" + e.id],
                s = 0;
            e.iter(Math.max(e.first, i), Math.min(e.first + e.size, n), (function (i) {
                i.markedSpans && ((a || (a = t["spans_" + e.id] = {}))[s] = i.markedSpans), ++s
            }))
        }

        function qa(e) {
            if (!e) return null;
            for (var t, i = 0; i < e.length; ++i) e[i].marker.explicitlyCleared ? t || (t = e.slice(0, i)) : t && t.push(e[i]);
            return t ? t.length ? t : null : e
        }

        function ja(e, t) {
            var i = function (e, t) {
                var i = t["spans_" + e.id];
                if (!i) return null;
                for (var n = [], a = 0; a < t.text.length; ++a) n.push(qa(i[a]));
                return n
            }(e, t),
                n = St(e, t);
            if (!i) return n;
            if (!n) return i;
            for (var a = 0; a < i.length; ++a) {
                var s = i[a],
                    o = n[a];
                if (s && o) e: for (var r = 0; r < o.length; ++r) {
                    for (var l = o[r], c = 0; c < s.length; ++c)
                        if (s[c].marker == l.marker) continue e;
                    s.push(l)
                } else o && (i[a] = o)
            }
            return i
        }

        function Va(e, t, i) {
            for (var n = [], a = 0; a < e.length; ++a) {
                var s = e[a];
                if (s.ranges) n.push(i ? Ca.prototype.deepCopy.call(s) : s);
                else {
                    var o = s.changes,
                        r = [];
                    n.push({
                        changes: r
                    });
                    for (var l = 0; l < o.length; ++l) {
                        var c = o[l],
                            d = void 0;
                        if (r.push({
                            from: c.from,
                            to: c.to,
                            text: c.text
                        }), t)
                            for (var p in c) (d = p.match(/^spans_(\d+)$/)) && U(t, Number(d[1])) > -1 && (K(r)[p] = c[p], delete c[p])
                    }
                }
            }
            return n
        }

        function Ya(e, t, i, n) {
            if (n) {
                var a = e.anchor;
                if (i) {
                    var s = it(t, a) < 0;
                    s != it(i, a) < 0 ? (a = t, t = i) : s != it(t, i) < 0 && (t = i)
                }
                return new ka(a, t)
            }
            return new ka(i || t, t)
        }

        function Ka(e, t, i, n, a) {
            null == a && (a = e.cm && (e.cm.display.shift || e.extend)), es(e, new Ca([Ya(e.sel.primary(), t, i, a)], 0), n)
        }

        function Xa(e, t, i) {
            for (var n = [], a = e.cm && (e.cm.display.shift || e.extend), s = 0; s < e.sel.ranges.length; s++) n[s] = Ya(e.sel.ranges[s], t[s], null, a);
            es(e, Ea(e.cm, n, e.sel.primIndex), i)
        }

        function Qa(e, t, i, n) {
            var a = e.sel.ranges.slice(0);
            a[t] = i, es(e, Ea(e.cm, a, e.sel.primIndex), n)
        }

        function Ja(e, t, i, n) {
            es(e, xa(t, i), n)
        }

        function Za(e, t, i) {
            var n = e.history.done,
                a = K(n);
            a && a.ranges ? (n[n.length - 1] = t, ts(e, t, i)) : es(e, t, i)
        }

        function es(e, t, i) {
            ts(e, t, i), za(e, e.sel, e.cm ? e.cm.curOp.id : NaN, i)
        }

        function ts(e, t, i) {
            (be(e, "beforeSelectionChange") || e.cm && be(e.cm, "beforeSelectionChange")) && (t = function (e, t, i) {
                var n = {
                    ranges: t.ranges,
                    update: function (t) {
                        this.ranges = [];
                        for (var i = 0; i < t.length; i++) this.ranges[i] = new ka(lt(e, t[i].anchor), lt(e, t[i].head))
                    },
                    origin: i && i.origin
                };
                return me(e, "beforeSelectionChange", e, n), e.cm && me(e.cm, "beforeSelectionChange", e.cm, n), n.ranges != t.ranges ? Ea(e.cm, n.ranges, n.ranges.length - 1) : t
            }(e, t, i));
            var n = i && i.bias || (it(t.primary().head, e.sel.primary().head) < 0 ? -1 : 1);
            is(e, as(e, t, n, !0)), i && !1 === i.scroll || !e.cm || An(e.cm)
        }

        function is(e, t) {
            t.equals(e.sel) || (e.sel = t, e.cm && (e.cm.curOp.updateInput = 1, e.cm.curOp.selectionChanged = !0, ve(e.cm)), li(e, "cursorActivity", e))
        }

        function ns(e) {
            is(e, as(e, e.sel, null, !1))
        }

        function as(e, t, i, n) {
            for (var a, s = 0; s < t.ranges.length; s++) {
                var o = t.ranges[s],
                    r = t.ranges.length == e.sel.ranges.length && e.sel.ranges[s],
                    l = os(e, o.anchor, r && r.anchor, i, n),
                    c = os(e, o.head, r && r.head, i, n);
                (a || l != o.anchor || c != o.head) && (a || (a = t.ranges.slice(0, s)), a[s] = new ka(l, c))
            }
            return a ? Ea(e.cm, a, t.primIndex) : t
        }

        function ss(e, t, i, n, a) {
            var s = Ve(e, t.line);
            if (s.markedSpans)
                for (var o = 0; o < s.markedSpans.length; ++o) {
                    var r = s.markedSpans[o],
                        l = r.marker,
                        c = "selectLeft" in l ? !l.selectLeft : l.inclusiveLeft,
                        d = "selectRight" in l ? !l.selectRight : l.inclusiveRight;
                    if ((null == r.from || (c ? r.from <= t.ch : r.from < t.ch)) && (null == r.to || (d ? r.to >= t.ch : r.to > t.ch))) {
                        if (a && (me(l, "beforeCursorEnter"), l.explicitlyCleared)) {
                            if (s.markedSpans) {
                                --o;
                                continue
                            }
                            break
                        }
                        if (!l.atomic) continue;
                        if (i) {
                            var p = l.find(n < 0 ? 1 : -1),
                                u = void 0;
                            if ((n < 0 ? d : c) && (p = rs(e, p, -n, p && p.line == t.line ? s : null)), p && p.line == t.line && (u = it(p, i)) && (n < 0 ? u < 0 : u > 0)) return ss(e, p, t, n, a)
                        }
                        var h = l.find(n < 0 ? -1 : 1);
                        return (n < 0 ? c : d) && (h = rs(e, h, n, h.line == t.line ? s : null)), h ? ss(e, h, t, n, a) : null
                    }
                }
            return t
        }

        function os(e, t, i, n, a) {
            var s = n || 1,
                o = ss(e, t, i, s, a) || !a && ss(e, t, i, s, !0) || ss(e, t, i, -s, a) || !a && ss(e, t, i, -s, !0);
            return o || (e.cantEdit = !0, tt(e.first, 0))
        }

        function rs(e, t, i, n) {
            return i < 0 && 0 == t.ch ? t.line > e.first ? lt(e, tt(t.line - 1)) : null : i > 0 && t.ch == (n || Ve(e, t.line)).text.length ? t.line < e.first + e.size - 1 ? tt(t.line + 1, 0) : null : new tt(t.line, t.ch + i)
        }

        function ls(e) {
            e.setSelection(tt(e.firstLine(), 0), tt(e.lastLine()), G)
        }

        function cs(e, t, i) {
            var n = {
                canceled: !1,
                from: t.from,
                to: t.to,
                text: t.text,
                origin: t.origin,
                cancel: function () {
                    return n.canceled = !0
                }
            };
            return i && (n.update = function (t, i, a, s) {
                t && (n.from = lt(e, t)), i && (n.to = lt(e, i)), a && (n.text = a), void 0 !== s && (n.origin = s)
            }), me(e, "beforeChange", e, n), e.cm && me(e.cm, "beforeChange", e.cm, n), n.canceled ? (e.cm && (e.cm.curOp.updateInput = 2), null) : {
                from: n.from,
                to: n.to,
                text: n.text,
                origin: n.origin
            }
        }

        function ds(e, t, i) {
            if (e.cm) {
                if (!e.cm.curOp) return ta(e.cm, ds)(e, t, i);
                if (e.cm.state.suppressEdits) return
            }
            if (!(be(e, "beforeChange") || e.cm && be(e.cm, "beforeChange")) || (t = cs(e, t, !0))) {
                var n = Tt && !i && function (e, t, i) {
                    var n = null;
                    if (e.iter(t.line, i.line + 1, (function (e) {
                        if (e.markedSpans)
                            for (var t = 0; t < e.markedSpans.length; ++t) {
                                var i = e.markedSpans[t].marker;
                                !i.readOnly || n && -1 != U(n, i) || (n || (n = [])).push(i)
                            }
                    })), !n) return null;
                    for (var a = [{
                        from: t,
                        to: i
                    }], s = 0; s < n.length; ++s)
                        for (var o = n[s], r = o.find(0), l = 0; l < a.length; ++l) {
                            var c = a[l];
                            if (!(it(c.to, r.from) < 0 || it(c.from, r.to) > 0)) {
                                var d = [l, 1],
                                    p = it(c.from, r.from),
                                    u = it(c.to, r.to);
                                (p < 0 || !o.inclusiveLeft && !p) && d.push({
                                    from: c.from,
                                    to: r.from
                                }), (u > 0 || !o.inclusiveRight && !u) && d.push({
                                    from: r.to,
                                    to: c.to
                                }), a.splice.apply(a, d), l += d.length - 3
                            }
                        }
                    return a
                }(e, t.from, t.to);
                if (n)
                    for (var a = n.length - 1; a >= 0; --a) ps(e, {
                        from: n[a].from,
                        to: n[a].to,
                        text: a ? [""] : t.text,
                        origin: t.origin
                    });
                else ps(e, t)
            }
        }

        function ps(e, t) {
            if (1 != t.text.length || "" != t.text[0] || 0 != it(t.from, t.to)) {
                var i = Pa(e, t);
                Ha(e, t, i, e.cm ? e.cm.curOp.id : NaN), fs(e, t, i, St(e, t));
                var n = [];
                Na(e, (function (e, i) {
                    i || -1 != U(n, e.history) || (bs(e.history, t), n.push(e.history)), fs(e, t, null, St(e, t))
                }))
            }
        }

        function us(e, t, i) {
            var n = e.cm && e.cm.state.suppressEdits;
            if (!n || i) {
                for (var a, s = e.history, o = e.sel, r = "undo" == t ? s.done : s.undone, l = "undo" == t ? s.undone : s.done, c = 0; c < r.length && (a = r[c], i ? !a.ranges || a.equals(e.sel) : a.ranges); c++);
                if (c != r.length) {
                    for (s.lastOrigin = s.lastSelOrigin = null; ;) {
                        if (!(a = r.pop()).ranges) {
                            if (n) return void r.push(a);
                            break
                        }
                        if (Ga(a, l), i && !a.equals(e.sel)) return void es(e, a, {
                            clearRedo: !1
                        });
                        o = a
                    }
                    var d = [];
                    Ga(o, l), l.push({
                        changes: d,
                        generation: s.generation
                    }), s.generation = a.generation || ++s.maxGeneration;
                    for (var p = be(e, "beforeChange") || e.cm && be(e.cm, "beforeChange"), u = function (i) {
                        var n = a.changes[i];
                        if (n.origin = t, p && !cs(e, n, !1)) return r.length = 0, {};
                        d.push(Ba(e, n));
                        var s = i ? Pa(e, n) : K(r);
                        fs(e, n, s, ja(e, n)), !i && e.cm && e.cm.scrollIntoView({
                            from: n.from,
                            to: Sa(n)
                        });
                        var o = [];
                        Na(e, (function (e, t) {
                            t || -1 != U(o, e.history) || (bs(e.history, n), o.push(e.history)), fs(e, n, null, ja(e, n))
                        }))
                    }, h = a.changes.length - 1; h >= 0; --h) {
                        var f = u(h);
                        if (f) return f.v
                    }
                }
            }
        }

        function hs(e, t) {
            if (0 != t && (e.first += t, e.sel = new Ca(X(e.sel.ranges, (function (e) {
                return new ka(tt(e.anchor.line + t, e.anchor.ch), tt(e.head.line + t, e.head.ch))
            })), e.sel.primIndex), e.cm)) {
                un(e.cm, e.first, e.first - t, t);
                for (var i = e.cm.display, n = i.viewFrom; n < i.viewTo; n++) hn(e.cm, n, "gutter")
            }
        }

        function fs(e, t, i, n) {
            if (e.cm && !e.cm.curOp) return ta(e.cm, fs)(e, t, i, n);
            if (t.to.line < e.first) hs(e, t.text.length - 1 - (t.to.line - t.from.line));
            else if (!(t.from.line > e.lastLine())) {
                if (t.from.line < e.first) {
                    var a = t.text.length - 1 - (e.first - t.from.line);
                    hs(e, a), t = {
                        from: tt(e.first, 0),
                        to: tt(t.to.line + a, t.to.ch),
                        text: [K(t.text)],
                        origin: t.origin
                    }
                }
                var s = e.lastLine();
                t.to.line > s && (t = {
                    from: t.from,
                    to: tt(s, Ve(e, s).text.length),
                    text: [t.text[0]],
                    origin: t.origin
                }), t.removed = Ye(e, t.from, t.to), i || (i = Pa(e, t)), e.cm ? function (e, t, i) {
                    var n = e.doc,
                        a = e.display,
                        s = t.from,
                        o = t.to,
                        r = !1,
                        l = s.line;
                    e.options.lineWrapping || (l = Qe(Bt(Ve(n, s.line))), n.iter(l, o.line + 1, (function (e) {
                        if (e == a.maxLine) return r = !0, !0
                    })));
                    n.sel.contains(t.from, t.to) > -1 && ve(e);
                    Da(n, t, i, ln(e)), e.options.lineWrapping || (n.iter(l, s.line + t.text.length, (function (e) {
                        var t = qt(e);
                        t > a.maxLineLength && (a.maxLine = e, a.maxLineLength = t, a.maxLineChanged = !0, r = !1)
                    })), r && (e.curOp.updateMaxLine = !0));
                    (function (e, t) {
                        if (e.modeFrontier = Math.min(e.modeFrontier, t), !(e.highlightFrontier < t - 10)) {
                            for (var i = e.first, n = t - 1; n > i; n--) {
                                var a = Ve(e, n).stateAfter;
                                if (a && (!(a instanceof dt) || n + a.lookAhead < t)) {
                                    i = n + 1;
                                    break
                                }
                            }
                            e.highlightFrontier = Math.min(e.highlightFrontier, i)
                        }
                    })(n, s.line), aa(e, 400);
                    var c = t.text.length - (o.line - s.line) - 1;
                    t.full ? un(e) : s.line != o.line || 1 != t.text.length || La(e.doc, t) ? un(e, s.line, o.line + 1, c) : hn(e, s.line, "text");
                    var d = be(e, "changes"),
                        p = be(e, "change");
                    if (p || d) {
                        var u = {
                            from: s,
                            to: o,
                            text: t.text,
                            removed: t.removed,
                            origin: t.origin
                        };
                        p && li(e, "change", e, u), d && (e.curOp.changeObjs || (e.curOp.changeObjs = [])).push(u)
                    }
                    e.display.selForContextMenu = null
                }(e.cm, t, n) : Da(e, t, n), ts(e, i, G), e.cantEdit && os(e, tt(e.firstLine(), 0)) && (e.cantEdit = !1)
            }
        }

        function ms(e, t, i, n, a) {
            var s;
            n || (n = i), it(n, i) < 0 && (i = (s = [n, i])[0], n = s[1]), "string" == typeof t && (t = e.splitLines(t)), ds(e, {
                from: i,
                to: n,
                text: t,
                origin: a
            })
        }

        function gs(e, t, i, n) {
            i < e.line ? e.line += n : t < e.line && (e.line = t, e.ch = 0)
        }

        function vs(e, t, i, n) {
            for (var a = 0; a < e.length; ++a) {
                var s = e[a],
                    o = !0;
                if (s.ranges) {
                    s.copied || ((s = e[a] = s.deepCopy()).copied = !0);
                    for (var r = 0; r < s.ranges.length; r++) gs(s.ranges[r].anchor, t, i, n), gs(s.ranges[r].head, t, i, n)
                } else {
                    for (var l = 0; l < s.changes.length; ++l) {
                        var c = s.changes[l];
                        if (i < c.from.line) c.from = tt(c.from.line + n, c.from.ch), c.to = tt(c.to.line + n, c.to.ch);
                        else if (t <= c.to.line) {
                            o = !1;
                            break
                        }
                    }
                    o || (e.splice(0, a + 1), a = 0)
                }
            }
        }

        function bs(e, t) {
            var i = t.from.line,
                n = t.to.line,
                a = t.text.length - (n - i) - 1;
            vs(e.done, i, n, a), vs(e.undone, i, n, a)
        }

        function ys(e, t, i, n) {
            var a = t,
                s = t;
            return "number" == typeof t ? s = Ve(e, rt(e, t)) : a = Qe(t), null == a ? null : (n(s, a) && e.cm && hn(e.cm, a, i), s)
        }

        function ws(e) {
            this.lines = e, this.parent = null;
            for (var t = 0, i = 0; i < e.length; ++i) e[i].parent = this, t += e[i].height;
            this.height = t
        }

        function _s(e) {
            this.children = e;
            for (var t = 0, i = 0, n = 0; n < e.length; ++n) {
                var a = e[n];
                t += a.chunkSize(), i += a.height, a.parent = this
            }
            this.size = t, this.height = i, this.parent = null
        }
        ka.prototype.from = function () {
            return ot(this.anchor, this.head)
        }, ka.prototype.to = function () {
            return st(this.anchor, this.head)
        }, ka.prototype.empty = function () {
            return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch
        }, ws.prototype = {
            chunkSize: function () {
                return this.lines.length
            },
            removeInner: function (e, t) {
                for (var i = e, n = e + t; i < n; ++i) {
                    var a = this.lines[i];
                    this.height -= a.height, Yt(a), li(a, "delete")
                }
                this.lines.splice(e, t)
            },
            collapse: function (e) {
                e.push.apply(e, this.lines)
            },
            insertInner: function (e, t, i) {
                this.height += i, this.lines = this.lines.slice(0, e).concat(t).concat(this.lines.slice(e));
                for (var n = 0; n < t.length; ++n) t[n].parent = this
            },
            iterN: function (e, t, i) {
                for (var n = e + t; e < n; ++e)
                    if (i(this.lines[e])) return !0
            }
        }, _s.prototype = {
            chunkSize: function () {
                return this.size
            },
            removeInner: function (e, t) {
                var i = this;
                this.size -= t;
                for (var n = 0; n < this.children.length; ++n) {
                    var a = i.children[n],
                        s = a.chunkSize();
                    if (e < s) {
                        var o = Math.min(t, s - e),
                            r = a.height;
                        if (a.removeInner(e, o), i.height -= r - a.height, s == o && (i.children.splice(n--, 1), a.parent = null), 0 == (t -= o)) break;
                        e = 0
                    } else e -= s
                }
                if (this.size - t < 25 && (this.children.length > 1 || !(this.children[0] instanceof ws))) {
                    var l = [];
                    this.collapse(l), this.children = [new ws(l)], this.children[0].parent = this
                }
            },
            collapse: function (e) {
                for (var t = 0; t < this.children.length; ++t) this.children[t].collapse(e)
            },
            insertInner: function (e, t, i) {
                var n = this;
                this.size += t.length, this.height += i;
                for (var a = 0; a < this.children.length; ++a) {
                    var s = n.children[a],
                        o = s.chunkSize();
                    if (e <= o) {
                        if (s.insertInner(e, t, i), s.lines && s.lines.length > 50) {
                            for (var r = s.lines.length % 25 + 25, l = r; l < s.lines.length;) {
                                var c = new ws(s.lines.slice(l, l += 25));
                                s.height -= c.height, n.children.splice(++a, 0, c), c.parent = n
                            }
                            s.lines = s.lines.slice(0, r), n.maybeSpill()
                        }
                        break
                    }
                    e -= o
                }
            },
            maybeSpill: function () {
                if (!(this.children.length <= 10)) {
                    var e = this;
                    do {
                        var t = new _s(e.children.splice(e.children.length - 5, 5));
                        if (e.parent) {
                            e.size -= t.size, e.height -= t.height;
                            var i = U(e.parent.children, e);
                            e.parent.children.splice(i + 1, 0, t)
                        } else {
                            var n = new _s(e.children);
                            n.parent = e, e.children = [n, t], e = n
                        }
                        t.parent = e.parent
                    } while (e.children.length > 10);
                    e.parent.maybeSpill()
                }
            },
            iterN: function (e, t, i) {
                for (var n = 0; n < this.children.length; ++n) {
                    var a = this.children[n],
                        s = a.chunkSize();
                    if (e < s) {
                        var o = Math.min(t, s - e);
                        if (a.iterN(e, o, i)) return !0;
                        if (0 == (t -= o)) break;
                        e = 0
                    } else e -= s
                }
            }
        };
        var Ts = function (e, t, i) {
            if (i)
                for (var n in i) i.hasOwnProperty(n) && (this[n] = i[n]);
            this.doc = e, this.node = t
        };

        function Cs(e, t, i) {
            $t(t) < (e.curOp && e.curOp.scrollTop || e.doc.scrollTop) && On(e, i)
        }
        Ts.prototype.clear = function () {
            var e = this.doc.cm,
                t = this.line.widgets,
                i = this.line,
                n = Qe(i);
            if (null != n && t) {
                for (var a = 0; a < t.length; ++a) t[a] == this && t.splice(a--, 1);
                t.length || (i.widgets = null);
                var s = _i(this);
                Xe(i, Math.max(0, i.height - s)), e && (ea(e, (function () {
                    Cs(e, i, -s), hn(e, n, "widget")
                })), li(e, "lineWidgetCleared", e, this, n))
            }
        }, Ts.prototype.changed = function () {
            var e = this,
                t = this.height,
                i = this.doc.cm,
                n = this.line;
            this.height = null;
            var a = _i(this) - t;
            a && (zt(this.doc, n) || Xe(n, n.height + a), i && ea(i, (function () {
                i.curOp.forceUpdate = !0, Cs(i, n, a), li(i, "lineWidgetChanged", i, e, Qe(n))
            })))
        }, ye(Ts);
        var ks = 0,
            Es = function (e, t) {
                this.lines = [], this.type = t, this.doc = e, this.id = ++ks
            };

        function xs(e, t, i, n, a) {
            if (n && n.shared) return function (e, t, i, n, a) {
                n = W(n), n.shared = !1;
                var s = [xs(e, t, i, n, a)],
                    o = s[0],
                    r = n.widgetNode;
                return Na(e, (function (e) {
                    r && (n.widgetNode = r.cloneNode(!0)), s.push(xs(e, lt(e, t), lt(e, i), n, a));
                    for (var l = 0; l < e.linked.length; ++l)
                        if (e.linked[l].isParent) return;
                    o = K(s)
                })), new Ss(s, o)
            }(e, t, i, n, a);
            if (e.cm && !e.cm.curOp) return ta(e.cm, xs)(e, t, i, n, a);
            var s = new Es(e, a),
                o = it(t, i);
            if (n && W(n, s, !1), o > 0 || 0 == o && !1 !== s.clearWhenEmpty) return s;
            if (s.replacedWith && (s.collapsed = !0, s.widgetNode = I("span", [s.replacedWith], "CodeMirror-widget"), n.handleMouseEvents || s.widgetNode.setAttribute("cm-ignore-events", "true"), n.insertLeft && (s.widgetNode.insertLeft = !0)), s.collapsed) {
                if (Ft(e, t.line, t, i, s) || t.line != i.line && Ft(e, i.line, t, i, s)) throw new Error("Inserting collapsed marker partially overlapping an existing one");
                Ct = !0
            }
            s.addToHistory && Ha(e, {
                from: t,
                to: i,
                origin: "markText"
            }, e.sel, NaN);
            var r, l = t.line,
                c = e.cm;
            if (e.iter(l, i.line + 1, (function (e) {
                c && s.collapsed && !c.options.lineWrapping && Bt(e) == c.display.maxLine && (r = !0), s.collapsed && l != t.line && Xe(e, 0),
                    function (e, t) {
                        e.markedSpans = e.markedSpans ? e.markedSpans.concat([t]) : [t], t.marker.attachLine(e)
                    }(e, new kt(s, l == t.line ? t.ch : null, l == i.line ? i.ch : null)), ++l
            })), s.collapsed && e.iter(t.line, i.line + 1, (function (t) {
                zt(e, t) && Xe(t, 0)
            })), s.clearOnEnter && ue(s, "beforeCursorEnter", (function () {
                return s.clear()
            })), s.readOnly && (Tt = !0, (e.history.done.length || e.history.undone.length) && e.clearHistory()), s.collapsed && (s.id = ++ks, s.atomic = !0), c) {
                if (r && (c.curOp.updateMaxLine = !0), s.collapsed) un(c, t.line, i.line + 1);
                else if (s.className || s.startStyle || s.endStyle || s.css || s.attributes || s.title)
                    for (var d = t.line; d <= i.line; d++) hn(c, d, "text");
                s.atomic && ns(c.doc), li(c, "markerAdded", c, s)
            }
            return s
        }
        Es.prototype.clear = function () {
            var e = this;
            if (!this.explicitlyCleared) {
                var t = this.doc.cm,
                    i = t && !t.curOp;
                if (i && Vn(t), be(this, "clear")) {
                    var n = this.find();
                    n && li(this, "clear", n.from, n.to)
                }
                for (var a = null, s = null, o = 0; o < this.lines.length; ++o) {
                    var r = e.lines[o],
                        l = Et(r.markedSpans, e);
                    t && !e.collapsed ? hn(t, Qe(r), "text") : t && (null != l.to && (s = Qe(r)), null != l.from && (a = Qe(r))), r.markedSpans = xt(r.markedSpans, l), null == l.from && e.collapsed && !zt(e.doc, r) && t && Xe(r, an(t.display))
                }
                if (t && this.collapsed && !t.options.lineWrapping)
                    for (var c = 0; c < this.lines.length; ++c) {
                        var d = Bt(e.lines[c]),
                            p = qt(d);
                        p > t.display.maxLineLength && (t.display.maxLine = d, t.display.maxLineLength = p, t.display.maxLineChanged = !0)
                    }
                null != a && t && this.collapsed && un(t, a, s + 1), this.lines.length = 0, this.explicitlyCleared = !0, this.atomic && this.doc.cantEdit && (this.doc.cantEdit = !1, t && ns(t.doc)), t && li(t, "markerCleared", t, this, a, s), i && Yn(t), this.parent && this.parent.clear()
            }
        }, Es.prototype.find = function (e, t) {
            var i, n;
            null == e && "bookmark" == this.type && (e = 1);
            for (var a = 0; a < this.lines.length; ++a) {
                var s = this.lines[a],
                    o = Et(s.markedSpans, this);
                if (null != o.from && (i = tt(t ? s : Qe(s), o.from), -1 == e)) return i;
                if (null != o.to && (n = tt(t ? s : Qe(s), o.to), 1 == e)) return n
            }
            return i && {
                from: i,
                to: n
            }
        }, Es.prototype.changed = function () {
            var e = this,
                t = this.find(-1, !0),
                i = this,
                n = this.doc.cm;
            t && n && ea(n, (function () {
                var a = t.line,
                    s = Qe(t.line),
                    o = Oi(n, s);
                if (o && (Fi(o), n.curOp.selectionChanged = n.curOp.forceUpdate = !0), n.curOp.updateMaxLine = !0, !zt(i.doc, a) && null != i.height) {
                    var r = i.height;
                    i.height = null;
                    var l = _i(i) - r;
                    l && Xe(a, a.height + l)
                }
                li(n, "markerChanged", n, e)
            }))
        }, Es.prototype.attachLine = function (e) {
            if (!this.lines.length && this.doc.cm) {
                var t = this.doc.cm.curOp;
                t.maybeHiddenMarkers && -1 != U(t.maybeHiddenMarkers, this) || (t.maybeUnhiddenMarkers || (t.maybeUnhiddenMarkers = [])).push(this)
            }
            this.lines.push(e)
        }, Es.prototype.detachLine = function (e) {
            if (this.lines.splice(U(this.lines, e), 1), !this.lines.length && this.doc.cm) {
                var t = this.doc.cm.curOp;
                (t.maybeHiddenMarkers || (t.maybeHiddenMarkers = [])).push(this)
            }
        }, ye(Es);
        var Ss = function (e, t) {
            this.markers = e, this.primary = t;
            for (var i = 0; i < e.length; ++i) e[i].parent = this
        };

        function Ms(e) {
            return e.findMarks(tt(e.first, 0), e.clipPos(tt(e.lastLine())), (function (e) {
                return e.parent
            }))
        }

        function Ps(e) {
            for (var t = function (t) {
                var i = e[t],
                    n = [i.primary.doc];
                Na(i.primary.doc, (function (e) {
                    return n.push(e)
                }));
                for (var a = 0; a < i.markers.length; a++) {
                    var s = i.markers[a]; - 1 == U(n, s.doc) && (s.parent = null, i.markers.splice(a--, 1))
                }
            }, i = 0; i < e.length; i++) t(i)
        }
        Ss.prototype.clear = function () {
            if (!this.explicitlyCleared) {
                this.explicitlyCleared = !0;
                for (var e = 0; e < this.markers.length; ++e) this.markers[e].clear();
                li(this, "clear")
            }
        }, Ss.prototype.find = function (e, t) {
            return this.primary.find(e, t)
        }, ye(Ss);
        var Is = 0,
            Os = function (e, t, i, n, a) {
                if (!(this instanceof Os)) return new Os(e, t, i, n, a);
                null == i && (i = 0), _s.call(this, [new ws([new Vt("", null)])]), this.first = i, this.scrollTop = this.scrollLeft = 0, this.cantEdit = !1, this.cleanGeneration = 1, this.modeFrontier = this.highlightFrontier = i;
                var s = tt(i, 0);
                this.sel = xa(s), this.history = new Fa(null), this.id = ++Is, this.modeOption = t, this.lineSep = n, this.direction = "rtl" == a ? "rtl" : "ltr", this.extend = !1, "string" == typeof e && (e = this.splitLines(e)), Da(this, {
                    from: s,
                    to: s,
                    text: e
                }), es(this, xa(s), G)
            };
        Os.prototype = J(_s.prototype, {
            constructor: Os,
            iter: function (e, t, i) {
                i ? this.iterN(e - this.first, t - e, i) : this.iterN(this.first, this.first + this.size, e)
            },
            insert: function (e, t) {
                for (var i = 0, n = 0; n < t.length; ++n) i += t[n].height;
                this.insertInner(e - this.first, t, i)
            },
            remove: function (e, t) {
                this.removeInner(e - this.first, t)
            },
            getValue: function (e) {
                var t = Ke(this, this.first, this.first + this.size);
                return !1 === e ? t : t.join(e || this.lineSeparator())
            },
            setValue: na((function (e) {
                var t = tt(this.first, 0),
                    i = this.first + this.size - 1;
                ds(this, {
                    from: t,
                    to: tt(i, Ve(this, i).text.length),
                    text: this.splitLines(e),
                    origin: "setValue",
                    full: !0
                }, !0), this.cm && Ln(this.cm, 0, 0), es(this, xa(t), G)
            })),
            replaceRange: function (e, t, i, n) {
                ms(this, e, t = lt(this, t), i = i ? lt(this, i) : t, n)
            },
            getRange: function (e, t, i) {
                var n = Ye(this, lt(this, e), lt(this, t));
                return !1 === i ? n : n.join(i || this.lineSeparator())
            },
            getLine: function (e) {
                var t = this.getLineHandle(e);
                return t && t.text
            },
            getLineHandle: function (e) {
                if (Ze(this, e)) return Ve(this, e)
            },
            getLineNumber: function (e) {
                return Qe(e)
            },
            getLineHandleVisualStart: function (e) {
                return "number" == typeof e && (e = Ve(this, e)), Bt(e)
            },
            lineCount: function () {
                return this.size
            },
            firstLine: function () {
                return this.first
            },
            lastLine: function () {
                return this.first + this.size - 1
            },
            clipPos: function (e) {
                return lt(this, e)
            },
            getCursor: function (e) {
                var t = this.sel.primary();
                return null == e || "head" == e ? t.head : "anchor" == e ? t.anchor : "end" == e || "to" == e || !1 === e ? t.to() : t.from()
            },
            listSelections: function () {
                return this.sel.ranges
            },
            somethingSelected: function () {
                return this.sel.somethingSelected()
            },
            setCursor: na((function (e, t, i) {
                Ja(this, lt(this, "number" == typeof e ? tt(e, t || 0) : e), null, i)
            })),
            setSelection: na((function (e, t, i) {
                Ja(this, lt(this, e), lt(this, t || e), i)
            })),
            extendSelection: na((function (e, t, i) {
                Ka(this, lt(this, e), t && lt(this, t), i)
            })),
            extendSelections: na((function (e, t) {
                Xa(this, ct(this, e), t)
            })),
            extendSelectionsBy: na((function (e, t) {
                Xa(this, ct(this, X(this.sel.ranges, e)), t)
            })),
            setSelections: na((function (e, t, i) {
                if (e.length) {
                    for (var n = [], a = 0; a < e.length; a++) n[a] = new ka(lt(this, e[a].anchor), lt(this, e[a].head));
                    null == t && (t = Math.min(e.length - 1, this.sel.primIndex)), es(this, Ea(this.cm, n, t), i)
                }
            })),
            addSelection: na((function (e, t, i) {
                var n = this.sel.ranges.slice(0);
                n.push(new ka(lt(this, e), lt(this, t || e))), es(this, Ea(this.cm, n, n.length - 1), i)
            })),
            getSelection: function (e) {
                for (var t, i = this.sel.ranges, n = 0; n < i.length; n++) {
                    var a = Ye(this, i[n].from(), i[n].to());
                    t = t ? t.concat(a) : a
                }
                return !1 === e ? t : t.join(e || this.lineSeparator())
            },
            getSelections: function (e) {
                for (var t = [], i = this.sel.ranges, n = 0; n < i.length; n++) {
                    var a = Ye(this, i[n].from(), i[n].to());
                    !1 !== e && (a = a.join(e || this.lineSeparator())), t[n] = a
                }
                return t
            },
            replaceSelection: function (e, t, i) {
                for (var n = [], a = 0; a < this.sel.ranges.length; a++) n[a] = e;
                this.replaceSelections(n, t, i || "+input")
            },
            replaceSelections: na((function (e, t, i) {
                for (var n = [], a = this.sel, s = 0; s < a.ranges.length; s++) {
                    var o = a.ranges[s];
                    n[s] = {
                        from: o.from(),
                        to: o.to(),
                        text: this.splitLines(e[s]),
                        origin: i
                    }
                }
                for (var r = t && "end" != t && function (e, t, i) {
                    for (var n = [], a = tt(e.first, 0), s = a, o = 0; o < t.length; o++) {
                        var r = t[o],
                            l = Ia(r.from, a, s),
                            c = Ia(Sa(r), a, s);
                        if (a = r.to, s = c, "around" == i) {
                            var d = e.sel.ranges[o],
                                p = it(d.head, d.anchor) < 0;
                            n[o] = new ka(p ? c : l, p ? l : c)
                        } else n[o] = new ka(l, l)
                    }
                    return new Ca(n, e.sel.primIndex)
                }(this, n, t), l = n.length - 1; l >= 0; l--) ds(this, n[l]);
                r ? Za(this, r) : this.cm && An(this.cm)
            })),
            undo: na((function () {
                us(this, "undo")
            })),
            redo: na((function () {
                us(this, "redo")
            })),
            undoSelection: na((function () {
                us(this, "undo", !0)
            })),
            redoSelection: na((function () {
                us(this, "redo", !0)
            })),
            setExtending: function (e) {
                this.extend = e
            },
            getExtending: function () {
                return this.extend
            },
            historySize: function () {
                for (var e = this.history, t = 0, i = 0, n = 0; n < e.done.length; n++) e.done[n].ranges || ++t;
                for (var a = 0; a < e.undone.length; a++) e.undone[a].ranges || ++i;
                return {
                    undo: t,
                    redo: i
                }
            },
            clearHistory: function () {
                var e = this;
                this.history = new Fa(this.history.maxGeneration), Na(this, (function (t) {
                    return t.history = e.history
                }), !0)
            },
            markClean: function () {
                this.cleanGeneration = this.changeGeneration(!0)
            },
            changeGeneration: function (e) {
                return e && (this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null), this.history.generation
            },
            isClean: function (e) {
                return this.history.generation == (e || this.cleanGeneration)
            },
            getHistory: function () {
                return {
                    done: Va(this.history.done),
                    undone: Va(this.history.undone)
                }
            },
            setHistory: function (e) {
                var t = this.history = new Fa(this.history.maxGeneration);
                t.done = Va(e.done.slice(0), null, !0), t.undone = Va(e.undone.slice(0), null, !0)
            },
            setGutterMarker: na((function (e, t, i) {
                return ys(this, e, "gutter", (function (e) {
                    var n = e.gutterMarkers || (e.gutterMarkers = {});
                    return n[t] = i, !i && ie(n) && (e.gutterMarkers = null), !0
                }))
            })),
            clearGutter: na((function (e) {
                var t = this;
                this.iter((function (i) {
                    i.gutterMarkers && i.gutterMarkers[e] && ys(t, i, "gutter", (function () {
                        return i.gutterMarkers[e] = null, ie(i.gutterMarkers) && (i.gutterMarkers = null), !0
                    }))
                }))
            })),
            lineInfo: function (e) {
                var t;
                if ("number" == typeof e) {
                    if (!Ze(this, e)) return null;
                    if (t = e, !(e = Ve(this, e))) return null
                } else if (null == (t = Qe(e))) return null;
                return {
                    line: t,
                    handle: e,
                    text: e.text,
                    gutterMarkers: e.gutterMarkers,
                    textClass: e.textClass,
                    bgClass: e.bgClass,
                    wrapClass: e.wrapClass,
                    widgets: e.widgets
                }
            },
            addLineClass: na((function (e, t, i) {
                return ys(this, e, "gutter" == t ? "gutter" : "class", (function (e) {
                    var n = "text" == t ? "textClass" : "background" == t ? "bgClass" : "gutter" == t ? "gutterClass" : "wrapClass";
                    if (e[n]) {
                        if (k(i).test(e[n])) return !1;
                        e[n] += " " + i
                    } else e[n] = i;
                    return !0
                }))
            })),
            removeLineClass: na((function (e, t, i) {
                return ys(this, e, "gutter" == t ? "gutter" : "class", (function (e) {
                    var n = "text" == t ? "textClass" : "background" == t ? "bgClass" : "gutter" == t ? "gutterClass" : "wrapClass",
                        a = e[n];
                    if (!a) return !1;
                    if (null == i) e[n] = null;
                    else {
                        var s = a.match(k(i));
                        if (!s) return !1;
                        var o = s.index + s[0].length;
                        e[n] = a.slice(0, s.index) + (s.index && o != a.length ? " " : "") + a.slice(o) || null
                    }
                    return !0
                }))
            })),
            addLineWidget: na((function (e, t, i) {
                return function (e, t, i, n) {
                    var a = new Ts(e, i, n),
                        s = e.cm;
                    return s && a.noHScroll && (s.display.alignWidgets = !0), ys(e, t, "widget", (function (t) {
                        var i = t.widgets || (t.widgets = []);
                        if (null == a.insertAt ? i.push(a) : i.splice(Math.min(i.length - 1, Math.max(0, a.insertAt)), 0, a), a.line = t, s && !zt(e, t)) {
                            var n = $t(t) < e.scrollTop;
                            Xe(t, t.height + _i(a)), n && On(s, a.height), s.curOp.forceUpdate = !0
                        }
                        return !0
                    })), s && li(s, "lineWidgetAdded", s, a, "number" == typeof t ? t : Qe(t)), a
                }(this, e, t, i)
            })),
            removeLineWidget: function (e) {
                e.clear()
            },
            markText: function (e, t, i) {
                return xs(this, lt(this, e), lt(this, t), i, i && i.type || "range")
            },
            setBookmark: function (e, t) {
                var i = {
                    replacedWith: t && (null == t.nodeType ? t.widget : t),
                    insertLeft: t && t.insertLeft,
                    clearWhenEmpty: !1,
                    shared: t && t.shared,
                    handleMouseEvents: t && t.handleMouseEvents
                };
                return xs(this, e = lt(this, e), e, i, "bookmark")
            },
            findMarksAt: function (e) {
                var t = [],
                    i = Ve(this, (e = lt(this, e)).line).markedSpans;
                if (i)
                    for (var n = 0; n < i.length; ++n) {
                        var a = i[n];
                        (null == a.from || a.from <= e.ch) && (null == a.to || a.to >= e.ch) && t.push(a.marker.parent || a.marker)
                    }
                return t
            },
            findMarks: function (e, t, i) {
                e = lt(this, e), t = lt(this, t);
                var n = [],
                    a = e.line;
                return this.iter(e.line, t.line + 1, (function (s) {
                    var o = s.markedSpans;
                    if (o)
                        for (var r = 0; r < o.length; r++) {
                            var l = o[r];
                            null != l.to && a == e.line && e.ch >= l.to || null == l.from && a != e.line || null != l.from && a == t.line && l.from >= t.ch || i && !i(l.marker) || n.push(l.marker.parent || l.marker)
                        } ++a
                })), n
            },
            getAllMarks: function () {
                var e = [];
                return this.iter((function (t) {
                    var i = t.markedSpans;
                    if (i)
                        for (var n = 0; n < i.length; ++n) null != i[n].from && e.push(i[n].marker)
                })), e
            },
            posFromIndex: function (e) {
                var t, i = this.first,
                    n = this.lineSeparator().length;
                return this.iter((function (a) {
                    var s = a.text.length + n;
                    if (s > e) return t = e, !0;
                    e -= s, ++i
                })), lt(this, tt(i, t))
            },
            indexFromPos: function (e) {
                var t = (e = lt(this, e)).ch;
                if (e.line < this.first || e.ch < 0) return 0;
                var i = this.lineSeparator().length;
                return this.iter(this.first, e.line, (function (e) {
                    t += e.text.length + i
                })), t
            },
            copy: function (e) {
                var t = new Os(Ke(this, this.first, this.first + this.size), this.modeOption, this.first, this.lineSep, this.direction);
                return t.scrollTop = this.scrollTop, t.scrollLeft = this.scrollLeft, t.sel = this.sel, t.extend = !1, e && (t.history.undoDepth = this.history.undoDepth, t.setHistory(this.getHistory())), t
            },
            linkedDoc: function (e) {
                e || (e = {});
                var t = this.first,
                    i = this.first + this.size;
                null != e.from && e.from > t && (t = e.from), null != e.to && e.to < i && (i = e.to);
                var n = new Os(Ke(this, t, i), e.mode || this.modeOption, t, this.lineSep, this.direction);
                return e.sharedHist && (n.history = this.history), (this.linked || (this.linked = [])).push({
                    doc: n,
                    sharedHist: e.sharedHist
                }), n.linked = [{
                    doc: this,
                    isParent: !0,
                    sharedHist: e.sharedHist
                }],
                    function (e, t) {
                        for (var i = 0; i < t.length; i++) {
                            var n = t[i],
                                a = n.find(),
                                s = e.clipPos(a.from),
                                o = e.clipPos(a.to);
                            if (it(s, o)) {
                                var r = xs(e, s, o, n.primary, n.primary.type);
                                n.markers.push(r), r.parent = n
                            }
                        }
                    }(n, Ms(this)), n
            },
            unlinkDoc: function (e) {
                var t = this;
                if (e instanceof Mo && (e = e.doc), this.linked)
                    for (var i = 0; i < this.linked.length; ++i) {
                        if (t.linked[i].doc == e) {
                            t.linked.splice(i, 1), e.unlinkDoc(t), Ps(Ms(t));
                            break
                        }
                    }
                if (e.history == this.history) {
                    var n = [e.id];
                    Na(e, (function (e) {
                        return n.push(e.id)
                    }), !0), e.history = new Fa(null), e.history.done = Va(this.history.done, n), e.history.undone = Va(this.history.undone, n)
                }
            },
            iterLinkedDocs: function (e) {
                Na(this, e)
            },
            getMode: function () {
                return this.mode
            },
            getEditor: function () {
                return this.cm
            },
            splitLines: function (e) {
                return this.lineSep ? e.split(this.lineSep) : Ae(e)
            },
            lineSeparator: function () {
                return this.lineSep || "\n"
            },
            setDirection: na((function (e) {
                var t;
                ("rtl" != e && (e = "ltr"), e != this.direction) && (this.direction = e, this.iter((function (e) {
                    return e.order = null
                })), this.cm && ea(t = this.cm, (function () {
                    Wa(t), un(t)
                })))
            }))
        }), Os.prototype.eachLine = Os.prototype.iter;
        var As = 0;

        function Ls(e) {
            var t = this;
            if (Ds(t), !ge(t, e) && !Ti(t.display, e)) {
                we(e), o && (As = +new Date);
                var i = dn(t, e, !0),
                    n = e.dataTransfer.files;
                if (i && !t.isReadOnly())
                    if (n && n.length && window.FileReader && window.File)
                        for (var a = n.length, s = Array(a), r = 0, l = function () {
                            ++r == a && ta(t, (function () {
                                var e = {
                                    from: i = lt(t.doc, i),
                                    to: i,
                                    text: t.doc.splitLines(s.filter((function (e) {
                                        return null != e
                                    })).join(t.doc.lineSeparator())),
                                    origin: "paste"
                                };
                                ds(t.doc, e), Za(t.doc, xa(lt(t.doc, i), lt(t.doc, Sa(e))))
                            }))()
                        }, c = function (e, i) {
                            if (t.options.allowDropFileTypes && -1 == U(t.options.allowDropFileTypes, e.type)) l();
                            else {
                                var n = new FileReader;
                                n.onerror = function () {
                                    return l()
                                }, n.onload = function () {
                                    var e = n.result;
                                    /[\x00-\x08\x0e-\x1f]{2}/.test(e) || (s[i] = e), l()
                                }, n.readAsText(e)
                            }
                        }, d = 0; d < n.length; d++) c(n[d], d);
                    else {
                        if (t.state.draggingText && t.doc.sel.contains(i) > -1) return t.state.draggingText(e), void setTimeout((function () {
                            return t.display.input.focus()
                        }), 20);
                        try {
                            var p = e.dataTransfer.getData("Text");
                            if (p) {
                                var u;
                                if (t.state.draggingText && !t.state.draggingText.copy && (u = t.listSelections()), ts(t.doc, xa(i, i)), u)
                                    for (var h = 0; h < u.length; ++h) ms(t.doc, "", u[h].anchor, u[h].head, "drag");
                                t.replaceSelection(p, "around", "paste"), t.display.input.focus()
                            }
                        } catch (e) { }
                    }
            }
        }

        function Ds(e) {
            e.display.dragCursor && (e.display.lineSpace.removeChild(e.display.dragCursor), e.display.dragCursor = null)
        }

        function Ns(e) {
            if (document.getElementsByClassName) {
                for (var t = document.getElementsByClassName("CodeMirror"), i = [], n = 0; n < t.length; n++) {
                    var a = t[n].CodeMirror;
                    a && i.push(a)
                }
                i.length && i[0].operation((function () {
                    for (var t = 0; t < i.length; t++) e(i[t])
                }))
            }
        }
        var Rs = !1;

        function Ws() {
            var e;
            Rs || (ue(window, "resize", (function () {
                null == e && (e = setTimeout((function () {
                    e = null, Ns(Fs)
                }), 100))
            })), ue(window, "blur", (function () {
                return Ns(xn)
            })), Rs = !0)
        }

        function Fs(e) {
            var t = e.display;
            t.cachedCharWidth = t.cachedTextHeight = t.cachedPaddingH = null, t.scrollbarsClipped = !1, e.setSize()
        }
        for (var Bs = {
            3: "Pause",
            8: "Backspace",
            9: "Tab",
            13: "Enter",
            16: "Shift",
            17: "Ctrl",
            18: "Alt",
            19: "Pause",
            20: "CapsLock",
            27: "Esc",
            32: "Space",
            33: "PageUp",
            34: "PageDown",
            35: "End",
            36: "Home",
            37: "Left",
            38: "Up",
            39: "Right",
            40: "Down",
            44: "PrintScrn",
            45: "Insert",
            46: "Delete",
            59: ";",
            61: "=",
            91: "Mod",
            92: "Mod",
            93: "Mod",
            106: "*",
            107: "=",
            109: "-",
            110: ".",
            111: "/",
            145: "ScrollLock",
            173: "-",
            186: ";",
            187: "=",
            188: ",",
            189: "-",
            190: ".",
            191: "/",
            192: "`",
            219: "[",
            220: "\\",
            221: "]",
            222: "'",
            63232: "Up",
            63233: "Down",
            63234: "Left",
            63235: "Right",
            63272: "Delete",
            63273: "Home",
            63275: "End",
            63276: "PageUp",
            63277: "PageDown",
            63302: "Insert"
        }, Us = 0; Us < 10; Us++) Bs[Us + 48] = Bs[Us + 96] = String(Us);
        for (var Hs = 65; Hs <= 90; Hs++) Bs[Hs] = String.fromCharCode(Hs);
        for (var zs = 1; zs <= 12; zs++) Bs[zs + 111] = Bs[zs + 63235] = "F" + zs;
        var Gs = {};

        function $s(e) {
            var t, i, n, a, s = e.split(/-(?!$)/);
            e = s[s.length - 1];
            for (var o = 0; o < s.length - 1; o++) {
                var r = s[o];
                if (/^(cmd|meta|m)$/i.test(r)) a = !0;
                else if (/^a(lt)?$/i.test(r)) t = !0;
                else if (/^(c|ctrl|control)$/i.test(r)) i = !0;
                else {
                    if (!/^s(hift)?$/i.test(r)) throw new Error("Unrecognized modifier name: " + r);
                    n = !0
                }
            }
            return t && (e = "Alt-" + e), i && (e = "Ctrl-" + e), a && (e = "Cmd-" + e), n && (e = "Shift-" + e), e
        }

        function qs(e) {
            var t = {};
            for (var i in e)
                if (e.hasOwnProperty(i)) {
                    var n = e[i];
                    if (/^(name|fallthrough|(de|at)tach)$/.test(i)) continue;
                    if ("..." == n) {
                        delete e[i];
                        continue
                    }
                    for (var a = X(i.split(" "), $s), s = 0; s < a.length; s++) {
                        var o = void 0,
                            r = void 0;
                        s == a.length - 1 ? (r = a.join(" "), o = n) : (r = a.slice(0, s + 1).join(" "), o = "...");
                        var l = t[r];
                        if (l) {
                            if (l != o) throw new Error("Inconsistent bindings for " + r)
                        } else t[r] = o
                    }
                    delete e[i]
                } for (var c in t) e[c] = t[c];
            return e
        }

        function js(e, t, i, n) {
            var a = (t = Xs(t)).call ? t.call(e, n) : t[e];
            if (!1 === a) return "nothing";
            if ("..." === a) return "multi";
            if (null != a && i(a)) return "handled";
            if (t.fallthrough) {
                if ("[object Array]" != Object.prototype.toString.call(t.fallthrough)) return js(e, t.fallthrough, i, n);
                for (var s = 0; s < t.fallthrough.length; s++) {
                    var o = js(e, t.fallthrough[s], i, n);
                    if (o) return o
                }
            }
        }

        function Vs(e) {
            var t = "string" == typeof e ? e : Bs[e.keyCode];
            return "Ctrl" == t || "Alt" == t || "Shift" == t || "Mod" == t
        }

        function Ys(e, t, i) {
            var n = e;
            return t.altKey && "Alt" != n && (e = "Alt-" + e), (T ? t.metaKey : t.ctrlKey) && "Ctrl" != n && (e = "Ctrl-" + e), (T ? t.ctrlKey : t.metaKey) && "Cmd" != n && (e = "Cmd-" + e), !i && t.shiftKey && "Shift" != n && (e = "Shift-" + e), e
        }

        function Ks(e, t) {
            if (p && 34 == e.keyCode && e.char) return !1;
            var i = Bs[e.keyCode];
            return null != i && !e.altGraphKey && (3 == e.keyCode && e.code && (i = e.code), Ys(i, e, t))
        }

        function Xs(e) {
            return "string" == typeof e ? Gs[e] : e
        }

        function Qs(e, t) {
            for (var i = e.doc.sel.ranges, n = [], a = 0; a < i.length; a++) {
                for (var s = t(i[a]); n.length && it(s.from, K(n).to) <= 0;) {
                    var o = n.pop();
                    if (it(o.from, s.from) < 0) {
                        s.from = o.from;
                        break
                    }
                }
                n.push(s)
            }
            ea(e, (function () {
                for (var t = n.length - 1; t >= 0; t--) ms(e.doc, "", n[t].from, n[t].to, "+delete");
                An(e)
            }))
        }

        function Js(e, t, i) {
            var n = se(e.text, t + i, i);
            return n < 0 || n > e.text.length ? null : n
        }

        function Zs(e, t, i) {
            var n = Js(e, t.ch, i);
            return null == n ? null : new tt(t.line, n, i < 0 ? "after" : "before")
        }

        function eo(e, t, i, n, a) {
            if (e) {
                "rtl" == t.doc.direction && (a = -a);
                var s = de(i, t.doc.direction);
                if (s) {
                    var o, r = a < 0 ? K(s) : s[0],
                        l = a < 0 == (1 == r.level) ? "after" : "before";
                    if (r.level > 0 || "rtl" == t.doc.direction) {
                        var c = Ai(t, i);
                        o = a < 0 ? i.text.length - 1 : 0;
                        var d = Li(t, c, o).top;
                        o = oe((function (e) {
                            return Li(t, c, e).top == d
                        }), a < 0 == (1 == r.level) ? r.from : r.to - 1, o), "before" == l && (o = Js(i, o, 1))
                    } else o = a < 0 ? r.to : r.from;
                    return new tt(n, o, l)
                }
            }
            return new tt(n, a < 0 ? i.text.length : 0, a < 0 ? "before" : "after")
        }
        Gs.basic = {
            Left: "goCharLeft",
            Right: "goCharRight",
            Up: "goLineUp",
            Down: "goLineDown",
            End: "goLineEnd",
            Home: "goLineStartSmart",
            PageUp: "goPageUp",
            PageDown: "goPageDown",
            Delete: "delCharAfter",
            Backspace: "delCharBefore",
            "Shift-Backspace": "delCharBefore",
            Tab: "defaultTab",
            "Shift-Tab": "indentAuto",
            Enter: "newlineAndIndent",
            Insert: "toggleOverwrite",
            Esc: "singleSelection"
        }, Gs.pcDefault = {
            "Ctrl-A": "selectAll",
            "Ctrl-D": "deleteLine",
            "Ctrl-Z": "undo",
            "Shift-Ctrl-Z": "redo",
            "Ctrl-Y": "redo",
            "Ctrl-Home": "goDocStart",
            "Ctrl-End": "goDocEnd",
            "Ctrl-Up": "goLineUp",
            "Ctrl-Down": "goLineDown",
            "Ctrl-Left": "goGroupLeft",
            "Ctrl-Right": "goGroupRight",
            "Alt-Left": "goLineStart",
            "Alt-Right": "goLineEnd",
            "Ctrl-Backspace": "delGroupBefore",
            "Ctrl-Delete": "delGroupAfter",
            "Ctrl-S": "save",
            "Ctrl-F": "find",
            "Ctrl-G": "findNext",
            "Shift-Ctrl-G": "findPrev",
            "Shift-Ctrl-F": "replace",
            "Shift-Ctrl-R": "replaceAll",
            "Ctrl-[": "indentLess",
            "Ctrl-]": "indentMore",
            "Ctrl-U": "undoSelection",
            "Shift-Ctrl-U": "redoSelection",
            "Alt-U": "redoSelection",
            fallthrough: "basic"
        }, Gs.emacsy = {
            "Ctrl-F": "goCharRight",
            "Ctrl-B": "goCharLeft",
            "Ctrl-P": "goLineUp",
            "Ctrl-N": "goLineDown",
            "Alt-F": "goWordRight",
            "Alt-B": "goWordLeft",
            "Ctrl-A": "goLineStart",
            "Ctrl-E": "goLineEnd",
            "Ctrl-V": "goPageDown",
            "Shift-Ctrl-V": "goPageUp",
            "Ctrl-D": "delCharAfter",
            "Ctrl-H": "delCharBefore",
            "Alt-D": "delWordAfter",
            "Alt-Backspace": "delWordBefore",
            "Ctrl-K": "killLine",
            "Ctrl-T": "transposeChars",
            "Ctrl-O": "openLine"
        }, Gs.macDefault = {
            "Cmd-A": "selectAll",
            "Cmd-D": "deleteLine",
            "Cmd-Z": "undo",
            "Shift-Cmd-Z": "redo",
            "Cmd-Y": "redo",
            "Cmd-Home": "goDocStart",
            "Cmd-Up": "goDocStart",
            "Cmd-End": "goDocEnd",
            "Cmd-Down": "goDocEnd",
            "Alt-Left": "goGroupLeft",
            "Alt-Right": "goGroupRight",
            "Cmd-Left": "goLineLeft",
            "Cmd-Right": "goLineRight",
            "Alt-Backspace": "delGroupBefore",
            "Ctrl-Alt-Backspace": "delGroupAfter",
            "Alt-Delete": "delGroupAfter",
            "Cmd-S": "save",
            "Cmd-F": "find",
            "Cmd-G": "findNext",
            "Shift-Cmd-G": "findPrev",
            "Cmd-Alt-F": "replace",
            "Shift-Cmd-Alt-F": "replaceAll",
            "Cmd-[": "indentLess",
            "Cmd-]": "indentMore",
            "Cmd-Backspace": "delWrappedLineLeft",
            "Cmd-Delete": "delWrappedLineRight",
            "Cmd-U": "undoSelection",
            "Shift-Cmd-U": "redoSelection",
            "Ctrl-Up": "goDocStart",
            "Ctrl-Down": "goDocEnd",
            fallthrough: ["basic", "emacsy"]
        }, Gs.default = b ? Gs.macDefault : Gs.pcDefault;
        var to = {
            selectAll: ls,
            singleSelection: function (e) {
                return e.setSelection(e.getCursor("anchor"), e.getCursor("head"), G)
            },
            killLine: function (e) {
                return Qs(e, (function (t) {
                    if (t.empty()) {
                        var i = Ve(e.doc, t.head.line).text.length;
                        return t.head.ch == i && t.head.line < e.lastLine() ? {
                            from: t.head,
                            to: tt(t.head.line + 1, 0)
                        } : {
                            from: t.head,
                            to: tt(t.head.line, i)
                        }
                    }
                    return {
                        from: t.from(),
                        to: t.to()
                    }
                }))
            },
            deleteLine: function (e) {
                return Qs(e, (function (t) {
                    return {
                        from: tt(t.from().line, 0),
                        to: lt(e.doc, tt(t.to().line + 1, 0))
                    }
                }))
            },
            delLineLeft: function (e) {
                return Qs(e, (function (e) {
                    return {
                        from: tt(e.from().line, 0),
                        to: e.from()
                    }
                }))
            },
            delWrappedLineLeft: function (e) {
                return Qs(e, (function (t) {
                    var i = e.charCoords(t.head, "div").top + 5;
                    return {
                        from: e.coordsChar({
                            left: 0,
                            top: i
                        }, "div"),
                        to: t.from()
                    }
                }))
            },
            delWrappedLineRight: function (e) {
                return Qs(e, (function (t) {
                    var i = e.charCoords(t.head, "div").top + 5,
                        n = e.coordsChar({
                            left: e.display.lineDiv.offsetWidth + 100,
                            top: i
                        }, "div");
                    return {
                        from: t.from(),
                        to: n
                    }
                }))
            },
            undo: function (e) {
                return e.undo()
            },
            redo: function (e) {
                return e.redo()
            },
            undoSelection: function (e) {
                return e.undoSelection()
            },
            redoSelection: function (e) {
                return e.redoSelection()
            },
            goDocStart: function (e) {
                return e.extendSelection(tt(e.firstLine(), 0))
            },
            goDocEnd: function (e) {
                return e.extendSelection(tt(e.lastLine()))
            },
            goLineStart: function (e) {
                return e.extendSelectionsBy((function (t) {
                    return io(e, t.head.line)
                }), {
                    origin: "+move",
                    bias: 1
                })
            },
            goLineStartSmart: function (e) {
                return e.extendSelectionsBy((function (t) {
                    return no(e, t.head)
                }), {
                    origin: "+move",
                    bias: 1
                })
            },
            goLineEnd: function (e) {
                return e.extendSelectionsBy((function (t) {
                    return function (e, t) {
                        var i = Ve(e.doc, t),
                            n = function (e) {
                                for (var t; t = Rt(e);) e = t.find(1, !0).line;
                                return e
                            }(i);
                        n != i && (t = Qe(n));
                        return eo(!0, e, i, t, -1)
                    }(e, t.head.line)
                }), {
                    origin: "+move",
                    bias: -1
                })
            },
            goLineRight: function (e) {
                return e.extendSelectionsBy((function (t) {
                    var i = e.cursorCoords(t.head, "div").top + 5;
                    return e.coordsChar({
                        left: e.display.lineDiv.offsetWidth + 100,
                        top: i
                    }, "div")
                }), q)
            },
            goLineLeft: function (e) {
                return e.extendSelectionsBy((function (t) {
                    var i = e.cursorCoords(t.head, "div").top + 5;
                    return e.coordsChar({
                        left: 0,
                        top: i
                    }, "div")
                }), q)
            },
            goLineLeftSmart: function (e) {
                return e.extendSelectionsBy((function (t) {
                    var i = e.cursorCoords(t.head, "div").top + 5,
                        n = e.coordsChar({
                            left: 0,
                            top: i
                        }, "div");
                    return n.ch < e.getLine(n.line).search(/\S/) ? no(e, t.head) : n
                }), q)
            },
            goLineUp: function (e) {
                return e.moveV(-1, "line")
            },
            goLineDown: function (e) {
                return e.moveV(1, "line")
            },
            goPageUp: function (e) {
                return e.moveV(-1, "page")
            },
            goPageDown: function (e) {
                return e.moveV(1, "page")
            },
            goCharLeft: function (e) {
                return e.moveH(-1, "char")
            },
            goCharRight: function (e) {
                return e.moveH(1, "char")
            },
            goColumnLeft: function (e) {
                return e.moveH(-1, "column")
            },
            goColumnRight: function (e) {
                return e.moveH(1, "column")
            },
            goWordLeft: function (e) {
                return e.moveH(-1, "word")
            },
            goGroupRight: function (e) {
                return e.moveH(1, "group")
            },
            goGroupLeft: function (e) {
                return e.moveH(-1, "group")
            },
            goWordRight: function (e) {
                return e.moveH(1, "word")
            },
            delCharBefore: function (e) {
                return e.deleteH(-1, "char")
            },
            delCharAfter: function (e) {
                return e.deleteH(1, "char")
            },
            delWordBefore: function (e) {
                return e.deleteH(-1, "word")
            },
            delWordAfter: function (e) {
                return e.deleteH(1, "word")
            },
            delGroupBefore: function (e) {
                return e.deleteH(-1, "group")
            },
            delGroupAfter: function (e) {
                return e.deleteH(1, "group")
            },
            indentAuto: function (e) {
                return e.indentSelection("smart")
            },
            indentMore: function (e) {
                return e.indentSelection("add")
            },
            indentLess: function (e) {
                return e.indentSelection("subtract")
            },
            insertTab: function (e) {
                return e.replaceSelection("\t")
            },
            insertSoftTab: function (e) {
                for (var t = [], i = e.listSelections(), n = e.options.tabSize, a = 0; a < i.length; a++) {
                    var s = i[a].from(),
                        o = F(e.getLine(s.line), s.ch, n);
                    t.push(Y(n - o % n))
                }
                e.replaceSelections(t)
            },
            defaultTab: function (e) {
                e.somethingSelected() ? e.indentSelection("add") : e.execCommand("insertTab")
            },
            transposeChars: function (e) {
                return ea(e, (function () {
                    for (var t = e.listSelections(), i = [], n = 0; n < t.length; n++)
                        if (t[n].empty()) {
                            var a = t[n].head,
                                s = Ve(e.doc, a.line).text;
                            if (s)
                                if (a.ch == s.length && (a = new tt(a.line, a.ch - 1)), a.ch > 0) a = new tt(a.line, a.ch + 1), e.replaceRange(s.charAt(a.ch - 1) + s.charAt(a.ch - 2), tt(a.line, a.ch - 2), a, "+transpose");
                                else if (a.line > e.doc.first) {
                                    var o = Ve(e.doc, a.line - 1).text;
                                    o && (a = new tt(a.line, 1), e.replaceRange(s.charAt(0) + e.doc.lineSeparator() + o.charAt(o.length - 1), tt(a.line - 1, o.length - 1), a, "+transpose"))
                                }
                            i.push(new ka(a, a))
                        } e.setSelections(i)
                }))
            },
            newlineAndIndent: function (e) {
                return ea(e, (function () {
                    for (var t = e.listSelections(), i = t.length - 1; i >= 0; i--) e.replaceRange(e.doc.lineSeparator(), t[i].anchor, t[i].head, "+input");
                    t = e.listSelections();
                    for (var n = 0; n < t.length; n++) e.indentLine(t[n].from().line, null, !0);
                    An(e)
                }))
            },
            openLine: function (e) {
                return e.replaceSelection("\n", "start")
            },
            toggleOverwrite: function (e) {
                return e.toggleOverwrite()
            }
        };

        function io(e, t) {
            var i = Ve(e.doc, t),
                n = Bt(i);
            return n != i && (t = Qe(n)), eo(!0, e, n, t, 1)
        }

        function no(e, t) {
            var i = io(e, t.line),
                n = Ve(e.doc, i.line),
                a = de(n, e.doc.direction);
            if (!a || 0 == a[0].level) {
                var s = Math.max(i.ch, n.text.search(/\S/)),
                    o = t.line == i.line && t.ch <= s && t.ch;
                return tt(i.line, o ? 0 : s, i.sticky)
            }
            return i
        }

        function ao(e, t, i) {
            if ("string" == typeof t && !(t = to[t])) return !1;
            e.display.input.ensurePolled();
            var n = e.display.shift,
                a = !1;
            try {
                e.isReadOnly() && (e.state.suppressEdits = !0), i && (e.display.shift = !1), a = t(e) != z
            } finally {
                e.display.shift = n, e.state.suppressEdits = !1
            }
            return a
        }
        var so = new B;

        function oo(e, t, i, n) {
            var a = e.state.keySeq;
            if (a) {
                if (Vs(t)) return "handled";
                if (/\'$/.test(t) ? e.state.keySeq = null : so.set(50, (function () {
                    e.state.keySeq == a && (e.state.keySeq = null, e.display.input.reset())
                })), ro(e, a + " " + t, i, n)) return !0
            }
            return ro(e, t, i, n)
        }

        function ro(e, t, i, n) {
            var a = function (e, t, i) {
                for (var n = 0; n < e.state.keyMaps.length; n++) {
                    var a = js(t, e.state.keyMaps[n], i, e);
                    if (a) return a
                }
                return e.options.extraKeys && js(t, e.options.extraKeys, i, e) || js(t, e.options.keyMap, i, e)
            }(e, t, n);
            return "multi" == a && (e.state.keySeq = t), "handled" == a && li(e, "keyHandled", e, t, i), "handled" != a && "multi" != a || (we(i), Tn(e)), !!a
        }

        function lo(e, t) {
            var i = Ks(t, !0);
            return !!i && (t.shiftKey && !e.state.keySeq ? oo(e, "Shift-" + i, t, (function (t) {
                return ao(e, t, !0)
            })) || oo(e, i, t, (function (t) {
                if ("string" == typeof t ? /^go[A-Z]/.test(t) : t.motion) return ao(e, t)
            })) : oo(e, i, t, (function (t) {
                return ao(e, t)
            })))
        }
        var co = null;

        function po(e) {
            var t = this;
            if (t.curOp.focus = A(), !ge(t, e)) {
                o && r < 11 && 27 == e.keyCode && (e.returnValue = !1);
                var n = e.keyCode;
                t.display.shift = 16 == n || e.shiftKey;
                var a = lo(t, e);
                p && (co = a ? n : null, a || 88 != n || De || !(b ? e.metaKey : e.ctrlKey) || t.replaceSelection("", null, "cut")), i && !b && !a && 46 == n && e.shiftKey && !e.ctrlKey && document.execCommand && document.execCommand("cut"), 18 != n || /\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className) || function (e) {
                    var t = e.display.lineDiv;

                    function i(e) {
                        18 != e.keyCode && e.altKey || (x(t, "CodeMirror-crosshair"), fe(document, "keyup", i), fe(document, "mouseover", i))
                    }
                    L(t, "CodeMirror-crosshair"), ue(document, "keyup", i), ue(document, "mouseover", i)
                }(t)
            }
        }

        function uo(e) {
            16 == e.keyCode && (this.doc.sel.shift = !1), ge(this, e)
        }

        function ho(e) {
            var t = this;
            if (!(Ti(t.display, e) || ge(t, e) || e.ctrlKey && !e.altKey || b && e.metaKey)) {
                var i = e.keyCode,
                    n = e.charCode;
                if (p && i == co) return co = null, void we(e);
                if (!p || e.which && !(e.which < 10) || !lo(t, e)) {
                    var a = String.fromCharCode(null == n ? i : n);
                    "\b" != a && (function (e, t, i) {
                        return oo(e, "'" + i + "'", t, (function (t) {
                            return ao(e, t, !0)
                        }))
                    }(t, e, a) || t.display.input.onKeyPress(e))
                }
            }
        }
        var fo, mo, go = function (e, t, i) {
            this.time = e, this.pos = t, this.button = i
        };

        function vo(e) {
            var t = this,
                i = t.display;
            if (!(ge(t, e) || i.activeTouch && i.input.supportsTouch()))
                if (i.input.ensurePolled(), i.shift = e.shiftKey, Ti(i, e)) l || (i.scroller.draggable = !1, setTimeout((function () {
                    return i.scroller.draggable = !0
                }), 100));
                else if (!wo(t, e)) {
                    var n = dn(t, e),
                        a = Ee(e),
                        s = n ? function (e, t) {
                            var i = +new Date;
                            return mo && mo.compare(i, e, t) ? (fo = mo = null, "triple") : fo && fo.compare(i, e, t) ? (mo = new go(i, e, t), fo = null, "double") : (fo = new go(i, e, t), mo = null, "single")
                        }(n, a) : "single";
                    window.focus(), 1 == a && t.state.selectingText && t.state.selectingText(e), n && function (e, t, i, n, a) {
                        var s = "Click";
                        "double" == n ? s = "Double" + s : "triple" == n && (s = "Triple" + s);
                        return s = (1 == t ? "Left" : 2 == t ? "Middle" : "Right") + s, oo(e, Ys(s, a), a, (function (t) {
                            if ("string" == typeof t && (t = to[t]), !t) return !1;
                            var n = !1;
                            try {
                                e.isReadOnly() && (e.state.suppressEdits = !0), n = t(e, i) != z
                            } finally {
                                e.state.suppressEdits = !1
                            }
                            return n
                        }))
                    }(t, a, n, s, e) || (1 == a ? n ? function (e, t, i, n) {
                        o ? setTimeout(R(Cn, e), 0) : e.curOp.focus = A();
                        var a, s = function (e, t, i) {
                            var n = e.getOption("configureMouse"),
                                a = n ? n(e, t, i) : {};
                            if (null == a.unit) {
                                var s = y ? i.shiftKey && i.metaKey : i.altKey;
                                a.unit = s ? "rectangle" : "single" == t ? "char" : "double" == t ? "word" : "line"
                            } (null == a.extend || e.doc.extend) && (a.extend = e.doc.extend || i.shiftKey);
                            null == a.addNew && (a.addNew = b ? i.metaKey : i.ctrlKey);
                            null == a.moveOnDrag && (a.moveOnDrag = !(b ? i.altKey : i.ctrlKey));
                            return a
                        }(e, i, n),
                            c = e.doc.sel;
                        e.options.dragDrop && Me && !e.isReadOnly() && "single" == i && (a = c.contains(t)) > -1 && (it((a = c.ranges[a]).from(), t) < 0 || t.xRel > 0) && (it(a.to(), t) > 0 || t.xRel < 0) ? function (e, t, i, n) {
                            var a = e.display,
                                s = !1,
                                c = ta(e, (function (t) {
                                    l && (a.scroller.draggable = !1), e.state.draggingText = !1, fe(a.wrapper.ownerDocument, "mouseup", c), fe(a.wrapper.ownerDocument, "mousemove", d), fe(a.scroller, "dragstart", p), fe(a.scroller, "drop", c), s || (we(t), n.addNew || Ka(e.doc, i, null, null, n.extend), l || o && 9 == r ? setTimeout((function () {
                                        a.wrapper.ownerDocument.body.focus(), a.input.focus()
                                    }), 20) : a.input.focus())
                                })),
                                d = function (e) {
                                    s = s || Math.abs(t.clientX - e.clientX) + Math.abs(t.clientY - e.clientY) >= 10
                                },
                                p = function () {
                                    return s = !0
                                };
                            l && (a.scroller.draggable = !0);
                            e.state.draggingText = c, c.copy = !n.moveOnDrag, a.scroller.dragDrop && a.scroller.dragDrop();
                            ue(a.wrapper.ownerDocument, "mouseup", c), ue(a.wrapper.ownerDocument, "mousemove", d), ue(a.scroller, "dragstart", p), ue(a.scroller, "drop", c), kn(e), setTimeout((function () {
                                return a.input.focus()
                            }), 20)
                        }(e, n, t, s) : function (e, t, i, n) {
                            var a = e.display,
                                s = e.doc;
                            we(t);
                            var o, r, l = s.sel,
                                c = l.ranges;
                            n.addNew && !n.extend ? (r = s.sel.contains(i), o = r > -1 ? c[r] : new ka(i, i)) : (o = s.sel.primary(), r = s.sel.primIndex);
                            if ("rectangle" == n.unit) n.addNew || (o = new ka(i, i)), i = dn(e, t, !0, !0), r = -1;
                            else {
                                var d = bo(e, i, n.unit);
                                o = n.extend ? Ya(o, d.anchor, d.head, n.extend) : d
                            }
                            n.addNew ? -1 == r ? (r = c.length, es(s, Ea(e, c.concat([o]), r), {
                                scroll: !1,
                                origin: "*mouse"
                            })) : c.length > 1 && c[r].empty() && "char" == n.unit && !n.extend ? (es(s, Ea(e, c.slice(0, r).concat(c.slice(r + 1)), 0), {
                                scroll: !1,
                                origin: "*mouse"
                            }), l = s.sel) : Qa(s, r, o, $) : (r = 0, es(s, new Ca([o], 0), $), l = s.sel);
                            var p = i;

                            function u(t) {
                                if (0 != it(p, t))
                                    if (p = t, "rectangle" == n.unit) {
                                        for (var a = [], c = e.options.tabSize, d = F(Ve(s, i.line).text, i.ch, c), u = F(Ve(s, t.line).text, t.ch, c), h = Math.min(d, u), f = Math.max(d, u), m = Math.min(i.line, t.line), g = Math.min(e.lastLine(), Math.max(i.line, t.line)); m <= g; m++) {
                                            var v = Ve(s, m).text,
                                                b = j(v, h, c);
                                            h == f ? a.push(new ka(tt(m, b), tt(m, b))) : v.length > b && a.push(new ka(tt(m, b), tt(m, j(v, f, c))))
                                        }
                                        a.length || a.push(new ka(i, i)), es(s, Ea(e, l.ranges.slice(0, r).concat(a), r), {
                                            origin: "*mouse",
                                            scroll: !1
                                        }), e.scrollIntoView(t)
                                    } else {
                                        var y, w = o,
                                            _ = bo(e, t, n.unit),
                                            T = w.anchor;
                                        it(_.anchor, T) > 0 ? (y = _.head, T = ot(w.from(), _.anchor)) : (y = _.anchor, T = st(w.to(), _.head));
                                        var C = l.ranges.slice(0);
                                        C[r] = function (e, t) {
                                            var i = t.anchor,
                                                n = t.head,
                                                a = Ve(e.doc, i.line);
                                            if (0 == it(i, n) && i.sticky == n.sticky) return t;
                                            var s = de(a);
                                            if (!s) return t;
                                            var o = le(s, i.ch, i.sticky),
                                                r = s[o];
                                            if (r.from != i.ch && r.to != i.ch) return t;
                                            var l, c = o + (r.from == i.ch == (1 != r.level) ? 0 : 1);
                                            if (0 == c || c == s.length) return t;
                                            if (n.line != i.line) l = (n.line - i.line) * ("ltr" == e.doc.direction ? 1 : -1) > 0;
                                            else {
                                                var d = le(s, n.ch, n.sticky),
                                                    p = d - o || (n.ch - i.ch) * (1 == r.level ? -1 : 1);
                                                l = d == c - 1 || d == c ? p < 0 : p > 0
                                            }
                                            var u = s[c + (l ? -1 : 0)],
                                                h = l == (1 == u.level),
                                                f = h ? u.from : u.to,
                                                m = h ? "after" : "before";
                                            return i.ch == f && i.sticky == m ? t : new ka(new tt(i.line, f, m), n)
                                        }(e, new ka(lt(s, T), y)), es(s, Ea(e, C, r), $)
                                    }
                            }
                            var h = a.wrapper.getBoundingClientRect(),
                                f = 0;

                            function m(t) {
                                var i = ++f,
                                    o = dn(e, t, !0, "rectangle" == n.unit);
                                if (o)
                                    if (0 != it(o, p)) {
                                        e.curOp.focus = A(), u(o);
                                        var r = Pn(a, s);
                                        (o.line >= r.to || o.line < r.from) && setTimeout(ta(e, (function () {
                                            f == i && m(t)
                                        })), 150)
                                    } else {
                                        var l = t.clientY < h.top ? -20 : t.clientY > h.bottom ? 20 : 0;
                                        l && setTimeout(ta(e, (function () {
                                            f == i && (a.scroller.scrollTop += l, m(t))
                                        })), 50)
                                    }
                            }

                            function g(t) {
                                e.state.selectingText = !1, f = 1 / 0, t && (we(t), a.input.focus()), fe(a.wrapper.ownerDocument, "mousemove", v), fe(a.wrapper.ownerDocument, "mouseup", b), s.history.lastSelOrigin = null
                            }
                            var v = ta(e, (function (e) {
                                0 !== e.buttons && Ee(e) ? m(e) : g(e)
                            })),
                                b = ta(e, g);
                            e.state.selectingText = b, ue(a.wrapper.ownerDocument, "mousemove", v), ue(a.wrapper.ownerDocument, "mouseup", b)
                        }(e, n, t, s)
                    }(t, n, s, e) : ke(e) == i.scroller && we(e) : 2 == a ? (n && Ka(t.doc, n), setTimeout((function () {
                        return i.input.focus()
                    }), 20)) : 3 == a && (C ? t.display.input.onContextMenu(e) : kn(t)))
                }
        }

        function bo(e, t, i) {
            if ("char" == i) return new ka(t, t);
            if ("word" == i) return e.findWordAt(t);
            if ("line" == i) return new ka(tt(t.line, 0), lt(e.doc, tt(t.line + 1, 0)));
            var n = i(e, t);
            return new ka(n.from, n.to)
        }

        function yo(e, t, i, n) {
            var a, s;
            if (t.touches) a = t.touches[0].clientX, s = t.touches[0].clientY;
            else try {
                a = t.clientX, s = t.clientY
            } catch (t) {
                return !1
            }
            if (a >= Math.floor(e.display.gutters.getBoundingClientRect().right)) return !1;
            n && we(t);
            var o = e.display,
                r = o.lineDiv.getBoundingClientRect();
            if (s > r.bottom || !be(e, i)) return Te(t);
            s -= r.top - o.viewOffset;
            for (var l = 0; l < e.display.gutterSpecs.length; ++l) {
                var c = o.gutters.childNodes[l];
                if (c && c.getBoundingClientRect().right >= a) return me(e, i, e, Je(e.doc, s), e.display.gutterSpecs[l].className, t), Te(t)
            }
        }

        function wo(e, t) {
            return yo(e, t, "gutterClick", !0)
        }

        function _o(e, t) {
            Ti(e.display, t) || function (e, t) {
                if (!be(e, "gutterContextMenu")) return !1;
                return yo(e, t, "gutterContextMenu", !1)
            }(e, t) || ge(e, t, "contextmenu") || C || e.display.input.onContextMenu(t)
        }

        function To(e) {
            e.display.wrapper.className = e.display.wrapper.className.replace(/\s*cm-s-\S+/g, "") + e.options.theme.replace(/(^|\s)\s*/g, " cm-s-"), Ui(e)
        }
        go.prototype.compare = function (e, t, i) {
            return this.time + 400 > e && 0 == it(t, this.pos) && i == this.button
        };
        var Co = {
            toString: function () {
                return "CodeMirror.Init"
            }
        },
            ko = {},
            Eo = {};

        function xo(e, t, i) {
            if (!t != !(i && i != Co)) {
                var n = e.display.dragFunctions,
                    a = t ? ue : fe;
                a(e.display.scroller, "dragstart", n.start), a(e.display.scroller, "dragenter", n.enter), a(e.display.scroller, "dragover", n.over), a(e.display.scroller, "dragleave", n.leave), a(e.display.scroller, "drop", n.drop)
            }
        }

        function So(e) {
            e.options.lineWrapping ? (L(e.display.wrapper, "CodeMirror-wrap"), e.display.sizer.style.minWidth = "", e.display.sizerWidth = null) : (x(e.display.wrapper, "CodeMirror-wrap"), jt(e)), cn(e), un(e), Ui(e), setTimeout((function () {
                return zn(e)
            }), 100)
        }

        function Mo(e, t) {
            var i = this;
            if (!(this instanceof Mo)) return new Mo(e, t);
            this.options = t = t ? W(t) : {}, W(ko, t, !1);
            var n = t.value;
            "string" == typeof n ? n = new Os(n, t.mode, null, t.lineSeparator, t.direction) : t.mode && (n.modeOption = t.mode), this.doc = n;
            var a = new Mo.inputStyles[t.inputStyle](this),
                s = this.display = new va(e, n, a, t);
            for (var c in s.wrapper.CodeMirror = this, To(this), t.lineWrapping && (this.display.wrapper.className += " CodeMirror-wrap"), qn(this), this.state = {
                keyMaps: [],
                overlays: [],
                modeGen: 0,
                overwrite: !1,
                delayingBlurEvent: !1,
                focused: !1,
                suppressEdits: !1,
                pasteIncoming: -1,
                cutIncoming: -1,
                selectingText: !1,
                draggingText: !1,
                highlight: new B,
                keySeq: null,
                specialChars: null
            }, t.autofocus && !v && s.input.focus(), o && r < 11 && setTimeout((function () {
                return i.display.input.reset(!0)
            }), 20),
                function (e) {
                    var t = e.display;
                    ue(t.scroller, "mousedown", ta(e, vo)), ue(t.scroller, "dblclick", o && r < 11 ? ta(e, (function (t) {
                        if (!ge(e, t)) {
                            var i = dn(e, t);
                            if (i && !wo(e, t) && !Ti(e.display, t)) {
                                we(t);
                                var n = e.findWordAt(i);
                                Ka(e.doc, n.anchor, n.head)
                            }
                        }
                    })) : function (t) {
                        return ge(e, t) || we(t)
                    });
                    ue(t.scroller, "contextmenu", (function (t) {
                        return _o(e, t)
                    })), ue(t.input.getField(), "contextmenu", (function (i) {
                        t.scroller.contains(i.target) || _o(e, i)
                    }));
                    var i, n = {
                        end: 0
                    };

                    function a() {
                        t.activeTouch && (i = setTimeout((function () {
                            return t.activeTouch = null
                        }), 1e3), (n = t.activeTouch).end = +new Date)
                    }

                    function s(e) {
                        if (1 != e.touches.length) return !1;
                        var t = e.touches[0];
                        return t.radiusX <= 1 && t.radiusY <= 1
                    }

                    function l(e, t) {
                        if (null == t.left) return !0;
                        var i = t.left - e.left,
                            n = t.top - e.top;
                        return i * i + n * n > 400
                    }
                    ue(t.scroller, "touchstart", (function (a) {
                        if (!ge(e, a) && !s(a) && !wo(e, a)) {
                            t.input.ensurePolled(), clearTimeout(i);
                            var o = +new Date;
                            t.activeTouch = {
                                start: o,
                                moved: !1,
                                prev: o - n.end <= 300 ? n : null
                            }, 1 == a.touches.length && (t.activeTouch.left = a.touches[0].pageX, t.activeTouch.top = a.touches[0].pageY)
                        }
                    })), ue(t.scroller, "touchmove", (function () {
                        t.activeTouch && (t.activeTouch.moved = !0)
                    })), ue(t.scroller, "touchend", (function (i) {
                        var n = t.activeTouch;
                        if (n && !Ti(t, i) && null != n.left && !n.moved && new Date - n.start < 300) {
                            var s, o = e.coordsChar(t.activeTouch, "page");
                            s = !n.prev || l(n, n.prev) ? new ka(o, o) : !n.prev.prev || l(n, n.prev.prev) ? e.findWordAt(o) : new ka(tt(o.line, 0), lt(e.doc, tt(o.line + 1, 0))), e.setSelection(s.anchor, s.head), e.focus(), we(i)
                        }
                        a()
                    })), ue(t.scroller, "touchcancel", a), ue(t.scroller, "scroll", (function () {
                        t.scroller.clientHeight && (Rn(e, t.scroller.scrollTop), Fn(e, t.scroller.scrollLeft, !0), me(e, "scroll", e))
                    })), ue(t.scroller, "mousewheel", (function (t) {
                        return Ta(e, t)
                    })), ue(t.scroller, "DOMMouseScroll", (function (t) {
                        return Ta(e, t)
                    })), ue(t.wrapper, "scroll", (function () {
                        return t.wrapper.scrollTop = t.wrapper.scrollLeft = 0
                    })), t.dragFunctions = {
                        enter: function (t) {
                            ge(e, t) || Ce(t)
                        },
                        over: function (t) {
                            ge(e, t) || (! function (e, t) {
                                var i = dn(e, t);
                                if (i) {
                                    var n = document.createDocumentFragment();
                                    yn(e, i, n), e.display.dragCursor || (e.display.dragCursor = P("div", null, "CodeMirror-cursors CodeMirror-dragcursors"), e.display.lineSpace.insertBefore(e.display.dragCursor, e.display.cursorDiv)), M(e.display.dragCursor, n)
                                }
                            }(e, t), Ce(t))
                        },
                        start: function (t) {
                            return function (e, t) {
                                if (o && (!e.state.draggingText || +new Date - As < 100)) Ce(t);
                                else if (!ge(e, t) && !Ti(e.display, t) && (t.dataTransfer.setData("Text", e.getSelection()), t.dataTransfer.effectAllowed = "copyMove", t.dataTransfer.setDragImage && !u)) {
                                    var i = P("img", null, null, "position: fixed; left: 0; top: 0;");
                                    i.src = "data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==", p && (i.width = i.height = 1, e.display.wrapper.appendChild(i), i._top = i.offsetTop), t.dataTransfer.setDragImage(i, 0, 0), p && i.parentNode.removeChild(i)
                                }
                            }(e, t)
                        },
                        drop: ta(e, Ls),
                        leave: function (t) {
                            ge(e, t) || Ds(e)
                        }
                    };
                    var c = t.input.getField();
                    ue(c, "keyup", (function (t) {
                        return uo.call(e, t)
                    })), ue(c, "keydown", ta(e, po)), ue(c, "keypress", ta(e, ho)), ue(c, "focus", (function (t) {
                        return En(e, t)
                    })), ue(c, "blur", (function (t) {
                        return xn(e, t)
                    }))
                }(this), Ws(), Vn(this), this.curOp.forceUpdate = !0, Ra(this, n), t.autofocus && !v || this.hasFocus() ? setTimeout(R(En, this), 20) : xn(this), Eo) Eo.hasOwnProperty(c) && Eo[c](i, t[c], Co);
            ha(this), t.finishInit && t.finishInit(this);
            for (var d = 0; d < Po.length; ++d) Po[d](i);
            Yn(this), l && t.lineWrapping && "optimizelegibility" == getComputedStyle(s.lineDiv).textRendering && (s.lineDiv.style.textRendering = "auto")
        }
        Mo.defaults = ko, Mo.optionHandlers = Eo;
        var Po = [];

        function Io(e, t, i, n) {
            var a, s = e.doc;
            null == i && (i = "add"), "smart" == i && (s.mode.indent ? a = ft(e, t).state : i = "prev");
            var o = e.options.tabSize,
                r = Ve(s, t),
                l = F(r.text, null, o);
            r.stateAfter && (r.stateAfter = null);
            var c, d = r.text.match(/^\s*/)[0];
            if (n || /\S/.test(r.text)) {
                if ("smart" == i && ((c = s.mode.indent(a, r.text.slice(d.length), r.text)) == z || c > 150)) {
                    if (!n) return;
                    i = "prev"
                }
            } else c = 0, i = "not";
            "prev" == i ? c = t > s.first ? F(Ve(s, t - 1).text, null, o) : 0 : "add" == i ? c = l + e.options.indentUnit : "subtract" == i ? c = l - e.options.indentUnit : "number" == typeof i && (c = l + i), c = Math.max(0, c);
            var p = "",
                u = 0;
            if (e.options.indentWithTabs)
                for (var h = Math.floor(c / o); h; --h) u += o, p += "\t";
            if (u < c && (p += Y(c - u)), p != d) return ms(s, p, tt(t, 0), tt(t, d.length), "+input"), r.stateAfter = null, !0;
            for (var f = 0; f < s.sel.ranges.length; f++) {
                var m = s.sel.ranges[f];
                if (m.head.line == t && m.head.ch < d.length) {
                    var g = tt(t, d.length);
                    Qa(s, f, new ka(g, g));
                    break
                }
            }
        }
        Mo.defineInitHook = function (e) {
            return Po.push(e)
        };
        var Oo = null;

        function Ao(e) {
            Oo = e
        }

        function Lo(e, t, i, n, a) {
            var s = e.doc;
            e.display.shift = !1, n || (n = s.sel);
            var o = +new Date - 200,
                r = "paste" == a || e.state.pasteIncoming > o,
                l = Ae(t),
                c = null;
            if (r && n.ranges.length > 1)
                if (Oo && Oo.text.join("\n") == t) {
                    if (n.ranges.length % Oo.text.length == 0) {
                        c = [];
                        for (var d = 0; d < Oo.text.length; d++) c.push(s.splitLines(Oo.text[d]))
                    }
                } else l.length == n.ranges.length && e.options.pasteLinesPerSelection && (c = X(l, (function (e) {
                    return [e]
                })));
            for (var p = e.curOp.updateInput, u = n.ranges.length - 1; u >= 0; u--) {
                var h = n.ranges[u],
                    f = h.from(),
                    m = h.to();
                h.empty() && (i && i > 0 ? f = tt(f.line, f.ch - i) : e.state.overwrite && !r ? m = tt(m.line, Math.min(Ve(s, m.line).text.length, m.ch + K(l).length)) : r && Oo && Oo.lineWise && Oo.text.join("\n") == t && (f = m = tt(f.line, 0)));
                var g = {
                    from: f,
                    to: m,
                    text: c ? c[u % c.length] : l,
                    origin: a || (r ? "paste" : e.state.cutIncoming > o ? "cut" : "+input")
                };
                ds(e.doc, g), li(e, "inputRead", e, g)
            }
            t && !r && No(e, t), An(e), e.curOp.updateInput < 2 && (e.curOp.updateInput = p), e.curOp.typing = !0, e.state.pasteIncoming = e.state.cutIncoming = -1
        }

        function Do(e, t) {
            var i = e.clipboardData && e.clipboardData.getData("Text");
            if (i) return e.preventDefault(), t.isReadOnly() || t.options.disableInput || ea(t, (function () {
                return Lo(t, i, 0, null, "paste")
            })), !0
        }

        function No(e, t) {
            if (e.options.electricChars && e.options.smartIndent)
                for (var i = e.doc.sel, n = i.ranges.length - 1; n >= 0; n--) {
                    var a = i.ranges[n];
                    if (!(a.head.ch > 100 || n && i.ranges[n - 1].head.line == a.head.line)) {
                        var s = e.getModeAt(a.head),
                            o = !1;
                        if (s.electricChars) {
                            for (var r = 0; r < s.electricChars.length; r++)
                                if (t.indexOf(s.electricChars.charAt(r)) > -1) {
                                    o = Io(e, a.head.line, "smart");
                                    break
                                }
                        } else s.electricInput && s.electricInput.test(Ve(e.doc, a.head.line).text.slice(0, a.head.ch)) && (o = Io(e, a.head.line, "smart"));
                        o && li(e, "electricInput", e, a.head.line)
                    }
                }
        }

        function Ro(e) {
            for (var t = [], i = [], n = 0; n < e.doc.sel.ranges.length; n++) {
                var a = e.doc.sel.ranges[n].head.line,
                    s = {
                        anchor: tt(a, 0),
                        head: tt(a + 1, 0)
                    };
                i.push(s), t.push(e.getRange(s.anchor, s.head))
            }
            return {
                text: t,
                ranges: i
            }
        }

        function Wo(e, t, i, n) {
            e.setAttribute("autocorrect", i ? "" : "off"), e.setAttribute("autocapitalize", n ? "" : "off"), e.setAttribute("spellcheck", !!t)
        }

        function Fo() {
            var e = P("textarea", null, null, "position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),
                t = P("div", [e], null, "overflow: hidden; position: relative; width: 3px; height: 0px;");
            return l ? e.style.width = "1000px" : e.setAttribute("wrap", "off"), m && (e.style.border = "1px solid black"), Wo(e), t
        }

        function Bo(e, t, i, n, a) {
            var s = t,
                o = i,
                r = Ve(e, t.line),
                l = a && "rtl" == e.direction ? -i : i;

            function c(n) {
                var s, o;
                if (s = a ? function (e, t, i, n) {
                    var a = de(t, e.doc.direction);
                    if (!a) return Zs(t, i, n);
                    i.ch >= t.text.length ? (i.ch = t.text.length, i.sticky = "before") : i.ch <= 0 && (i.ch = 0, i.sticky = "after");
                    var s = le(a, i.ch, i.sticky),
                        o = a[s];
                    if ("ltr" == e.doc.direction && o.level % 2 == 0 && (n > 0 ? o.to > i.ch : o.from < i.ch)) return Zs(t, i, n);
                    var r, l = function (e, i) {
                        return Js(t, e instanceof tt ? e.ch : e, i)
                    },
                        c = function (i) {
                            return e.options.lineWrapping ? (r = r || Ai(e, t), Ji(e, t, r, i)) : {
                                begin: 0,
                                end: t.text.length
                            }
                        },
                        d = c("before" == i.sticky ? l(i, -1) : i.ch);
                    if ("rtl" == e.doc.direction || 1 == o.level) {
                        var p = 1 == o.level == n < 0,
                            u = l(i, p ? 1 : -1);
                        if (null != u && (p ? u <= o.to && u <= d.end : u >= o.from && u >= d.begin)) {
                            var h = p ? "before" : "after";
                            return new tt(i.line, u, h)
                        }
                    }
                    var f = function (e, t, n) {
                        for (var s = function (e, t) {
                            return t ? new tt(i.line, l(e, 1), "before") : new tt(i.line, e, "after")
                        }; e >= 0 && e < a.length; e += t) {
                            var o = a[e],
                                r = t > 0 == (1 != o.level),
                                c = r ? n.begin : l(n.end, -1);
                            if (o.from <= c && c < o.to) return s(c, r);
                            if (c = r ? o.from : l(o.to, -1), n.begin <= c && c < n.end) return s(c, r)
                        }
                    },
                        m = f(s + n, n, d);
                    if (m) return m;
                    var g = n > 0 ? d.end : l(d.begin, -1);
                    return null == g || n > 0 && g == t.text.length || !(m = f(n > 0 ? 0 : a.length - 1, n, c(g))) ? null : m
                }(e.cm, r, t, i) : Zs(r, t, i), null == s) {
                    if (n || (o = t.line + l) < e.first || o >= e.first + e.size || (t = new tt(o, t.ch, t.sticky), !(r = Ve(e, o)))) return !1;
                    t = eo(a, e.cm, r, t.line, l)
                } else t = s;
                return !0
            }
            if ("char" == n) c();
            else if ("column" == n) c(!0);
            else if ("word" == n || "group" == n)
                for (var d = null, p = "group" == n, u = e.cm && e.cm.getHelper(t, "wordChars"), h = !0; !(i < 0) || c(!h); h = !1) {
                    var f = r.text.charAt(t.ch) || "\n",
                        m = te(f, u) ? "w" : p && "\n" == f ? "n" : !p || /\s/.test(f) ? null : "p";
                    if (!p || h || m || (m = "s"), d && d != m) {
                        i < 0 && (i = 1, c(), t.sticky = "after");
                        break
                    }
                    if (m && (d = m), i > 0 && !c(!h)) break
                }
            var g = os(e, t, s, o, !0);
            return nt(s, g) && (g.hitSide = !0), g
        }

        function Uo(e, t, i, n) {
            var a, s, o = e.doc,
                r = t.left;
            if ("page" == n) {
                var l = Math.min(e.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight),
                    c = Math.max(l - .5 * an(e.display), 3);
                a = (i > 0 ? t.bottom : t.top) + i * c
            } else "line" == n && (a = i > 0 ? t.bottom + 3 : t.top - 3);
            for (;
                (s = Xi(e, r, a)).outside;) {
                if (i < 0 ? a <= 0 : a >= o.height) {
                    s.hitSide = !0;
                    break
                }
                a += 5 * i
            }
            return s
        }
        var Ho = function (e) {
            this.cm = e, this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null, this.polling = new B, this.composing = null, this.gracePeriod = !1, this.readDOMTimeout = null
        };

        function zo(e, t) {
            var i = Oi(e, t.line);
            if (!i || i.hidden) return null;
            var n = Ve(e.doc, t.line),
                a = Pi(i, n, t.line),
                s = de(n, e.doc.direction),
                o = "left";
            s && (o = le(s, t.ch) % 2 ? "right" : "left");
            var r = Ri(a.map, t.ch, o);
            return r.offset = "right" == r.collapse ? r.end : r.start, r
        }

        function Go(e, t) {
            return t && (e.bad = !0), e
        }

        function $o(e, t, i) {
            var n;
            if (t == e.display.lineDiv) {
                if (!(n = e.display.lineDiv.childNodes[i])) return Go(e.clipPos(tt(e.display.viewTo - 1)), !0);
                t = null, i = 0
            } else
                for (n = t; ; n = n.parentNode) {
                    if (!n || n == e.display.lineDiv) return null;
                    if (n.parentNode && n.parentNode == e.display.lineDiv) break
                }
            for (var a = 0; a < e.display.view.length; a++) {
                var s = e.display.view[a];
                if (s.node == n) return qo(s, t, i)
            }
        }

        function qo(e, t, i) {
            var n = e.text.firstChild,
                a = !1;
            if (!t || !O(n, t)) return Go(tt(Qe(e.line), 0), !0);
            if (t == n && (a = !0, t = n.childNodes[i], i = 0, !t)) {
                var s = e.rest ? K(e.rest) : e.line;
                return Go(tt(Qe(s), s.text.length), a)
            }
            var o = 3 == t.nodeType ? t : null,
                r = t;
            for (o || 1 != t.childNodes.length || 3 != t.firstChild.nodeType || (o = t.firstChild, i && (i = o.nodeValue.length)); r.parentNode != n;) r = r.parentNode;
            var l = e.measure,
                c = l.maps;

            function d(t, i, n) {
                for (var a = -1; a < (c ? c.length : 0); a++)
                    for (var s = a < 0 ? l.map : c[a], o = 0; o < s.length; o += 3) {
                        var r = s[o + 2];
                        if (r == t || r == i) {
                            var d = Qe(a < 0 ? e.line : e.rest[a]),
                                p = s[o] + n;
                            return (n < 0 || r != t) && (p = s[o + (n ? 1 : 0)]), tt(d, p)
                        }
                    }
            }
            var p = d(o, r, i);
            if (p) return Go(p, a);
            for (var u = r.nextSibling, h = o ? o.nodeValue.length - i : 0; u; u = u.nextSibling) {
                if (p = d(u, u.firstChild, 0)) return Go(tt(p.line, p.ch - h), a);
                h += u.textContent.length
            }
            for (var f = r.previousSibling, m = i; f; f = f.previousSibling) {
                if (p = d(f, f.firstChild, -1)) return Go(tt(p.line, p.ch + m), a);
                m += f.textContent.length
            }
        }
        Ho.prototype.init = function (e) {
            var t = this,
                i = this,
                n = i.cm,
                a = i.div = e.lineDiv;

            function s(e) {
                if (!ge(n, e)) {
                    if (n.somethingSelected()) Ao({
                        lineWise: !1,
                        text: n.getSelections()
                    }), "cut" == e.type && n.replaceSelection("", null, "cut");
                    else {
                        if (!n.options.lineWiseCopyCut) return;
                        var t = Ro(n);
                        Ao({
                            lineWise: !0,
                            text: t.text
                        }), "cut" == e.type && n.operation((function () {
                            n.setSelections(t.ranges, 0, G), n.replaceSelection("", null, "cut")
                        }))
                    }
                    if (e.clipboardData) {
                        e.clipboardData.clearData();
                        var s = Oo.text.join("\n");
                        if (e.clipboardData.setData("Text", s), e.clipboardData.getData("Text") == s) return void e.preventDefault()
                    }
                    var o = Fo(),
                        r = o.firstChild;
                    n.display.lineSpace.insertBefore(o, n.display.lineSpace.firstChild), r.value = Oo.text.join("\n");
                    var l = document.activeElement;
                    N(r), setTimeout((function () {
                        n.display.lineSpace.removeChild(o), l.focus(), l == a && i.showPrimarySelection()
                    }), 50)
                }
            }
            Wo(a, n.options.spellcheck, n.options.autocorrect, n.options.autocapitalize), ue(a, "paste", (function (e) {
                ge(n, e) || Do(e, n) || r <= 11 && setTimeout(ta(n, (function () {
                    return t.updateFromDOM()
                })), 20)
            })), ue(a, "compositionstart", (function (e) {
                t.composing = {
                    data: e.data,
                    done: !1
                }
            })), ue(a, "compositionupdate", (function (e) {
                t.composing || (t.composing = {
                    data: e.data,
                    done: !1
                })
            })), ue(a, "compositionend", (function (e) {
                t.composing && (e.data != t.composing.data && t.readFromDOMSoon(), t.composing.done = !0)
            })), ue(a, "touchstart", (function () {
                return i.forceCompositionEnd()
            })), ue(a, "input", (function () {
                t.composing || t.readFromDOMSoon()
            })), ue(a, "copy", s), ue(a, "cut", s)
        }, Ho.prototype.prepareSelection = function () {
            var e = bn(this.cm, !1);
            return e.focus = this.cm.state.focused, e
        }, Ho.prototype.showSelection = function (e, t) {
            e && this.cm.display.view.length && ((e.focus || t) && this.showPrimarySelection(), this.showMultipleSelections(e))
        }, Ho.prototype.getSelection = function () {
            return this.cm.display.wrapper.ownerDocument.getSelection()
        }, Ho.prototype.showPrimarySelection = function () {
            var e = this.getSelection(),
                t = this.cm,
                n = t.doc.sel.primary(),
                a = n.from(),
                s = n.to();
            if (t.display.viewTo == t.display.viewFrom || a.line >= t.display.viewTo || s.line < t.display.viewFrom) e.removeAllRanges();
            else {
                var o = $o(t, e.anchorNode, e.anchorOffset),
                    r = $o(t, e.focusNode, e.focusOffset);
                if (!o || o.bad || !r || r.bad || 0 != it(ot(o, r), a) || 0 != it(st(o, r), s)) {
                    var l = t.display.view,
                        c = a.line >= t.display.viewFrom && zo(t, a) || {
                            node: l[0].measure.map[2],
                            offset: 0
                        },
                        d = s.line < t.display.viewTo && zo(t, s);
                    if (!d) {
                        var p = l[l.length - 1].measure,
                            u = p.maps ? p.maps[p.maps.length - 1] : p.map;
                        d = {
                            node: u[u.length - 1],
                            offset: u[u.length - 2] - u[u.length - 3]
                        }
                    }
                    if (c && d) {
                        var h, f = e.rangeCount && e.getRangeAt(0);
                        try {
                            h = E(c.node, c.offset, d.offset, d.node)
                        } catch (e) { }
                        h && (!i && t.state.focused ? (e.collapse(c.node, c.offset), h.collapsed || (e.removeAllRanges(), e.addRange(h))) : (e.removeAllRanges(), e.addRange(h)), f && null == e.anchorNode ? e.addRange(f) : i && this.startGracePeriod()), this.rememberSelection()
                    } else e.removeAllRanges()
                }
            }
        }, Ho.prototype.startGracePeriod = function () {
            var e = this;
            clearTimeout(this.gracePeriod), this.gracePeriod = setTimeout((function () {
                e.gracePeriod = !1, e.selectionChanged() && e.cm.operation((function () {
                    return e.cm.curOp.selectionChanged = !0
                }))
            }), 20)
        }, Ho.prototype.showMultipleSelections = function (e) {
            M(this.cm.display.cursorDiv, e.cursors), M(this.cm.display.selectionDiv, e.selection)
        }, Ho.prototype.rememberSelection = function () {
            var e = this.getSelection();
            this.lastAnchorNode = e.anchorNode, this.lastAnchorOffset = e.anchorOffset, this.lastFocusNode = e.focusNode, this.lastFocusOffset = e.focusOffset
        }, Ho.prototype.selectionInEditor = function () {
            var e = this.getSelection();
            if (!e.rangeCount) return !1;
            var t = e.getRangeAt(0).commonAncestorContainer;
            return O(this.div, t)
        }, Ho.prototype.focus = function () {
            "nocursor" != this.cm.options.readOnly && (this.selectionInEditor() || this.showSelection(this.prepareSelection(), !0), this.div.focus())
        }, Ho.prototype.blur = function () {
            this.div.blur()
        }, Ho.prototype.getField = function () {
            return this.div
        }, Ho.prototype.supportsTouch = function () {
            return !0
        }, Ho.prototype.receivedFocus = function () {
            var e = this;
            this.selectionInEditor() ? this.pollSelection() : ea(this.cm, (function () {
                return e.cm.curOp.selectionChanged = !0
            })), this.polling.set(this.cm.options.pollInterval, (function t() {
                e.cm.state.focused && (e.pollSelection(), e.polling.set(e.cm.options.pollInterval, t))
            }))
        }, Ho.prototype.selectionChanged = function () {
            var e = this.getSelection();
            return e.anchorNode != this.lastAnchorNode || e.anchorOffset != this.lastAnchorOffset || e.focusNode != this.lastFocusNode || e.focusOffset != this.lastFocusOffset
        }, Ho.prototype.pollSelection = function () {
            if (null == this.readDOMTimeout && !this.gracePeriod && this.selectionChanged()) {
                var e = this.getSelection(),
                    t = this.cm;
                if (g && d && this.cm.display.gutterSpecs.length && function (e) {
                    for (var t = e; t; t = t.parentNode)
                        if (/CodeMirror-gutter-wrapper/.test(t.className)) return !0;
                    return !1
                }(e.anchorNode)) return this.cm.triggerOnKeyDown({
                    type: "keydown",
                    keyCode: 8,
                    preventDefault: Math.abs
                }), this.blur(), void this.focus();
                if (!this.composing) {
                    this.rememberSelection();
                    var i = $o(t, e.anchorNode, e.anchorOffset),
                        n = $o(t, e.focusNode, e.focusOffset);
                    i && n && ea(t, (function () {
                        es(t.doc, xa(i, n), G), (i.bad || n.bad) && (t.curOp.selectionChanged = !0)
                    }))
                }
            }
        }, Ho.prototype.pollContent = function () {
            null != this.readDOMTimeout && (clearTimeout(this.readDOMTimeout), this.readDOMTimeout = null);
            var e, t, i, n = this.cm,
                a = n.display,
                s = n.doc.sel.primary(),
                o = s.from(),
                r = s.to();
            if (0 == o.ch && o.line > n.firstLine() && (o = tt(o.line - 1, Ve(n.doc, o.line - 1).length)), r.ch == Ve(n.doc, r.line).text.length && r.line < n.lastLine() && (r = tt(r.line + 1, 0)), o.line < a.viewFrom || r.line > a.viewTo - 1) return !1;
            o.line == a.viewFrom || 0 == (e = pn(n, o.line)) ? (t = Qe(a.view[0].line), i = a.view[0].node) : (t = Qe(a.view[e].line), i = a.view[e - 1].node.nextSibling);
            var l, c, d = pn(n, r.line);
            if (d == a.view.length - 1 ? (l = a.viewTo - 1, c = a.lineDiv.lastChild) : (l = Qe(a.view[d + 1].line) - 1, c = a.view[d + 1].node.previousSibling), !i) return !1;
            for (var p = n.doc.splitLines(function (e, t, i, n, a) {
                var s = "",
                    o = !1,
                    r = e.doc.lineSeparator(),
                    l = !1;

                function c(e) {
                    return function (t) {
                        return t.id == e
                    }
                }

                function d() {
                    o && (s += r, l && (s += r), o = l = !1)
                }

                function p(e) {
                    e && (d(), s += e)
                }

                function u(t) {
                    if (1 == t.nodeType) {
                        var i = t.getAttribute("cm-text");
                        if (i) return void p(i);
                        var s, h = t.getAttribute("cm-marker");
                        if (h) {
                            var f = e.findMarks(tt(n, 0), tt(a + 1, 0), c(+h));
                            return void (f.length && (s = f[0].find(0)) && p(Ye(e.doc, s.from, s.to).join(r)))
                        }
                        if ("false" == t.getAttribute("contenteditable")) return;
                        var m = /^(pre|div|p|li|table|br)$/i.test(t.nodeName);
                        if (!/^br$/i.test(t.nodeName) && 0 == t.textContent.length) return;
                        m && d();
                        for (var g = 0; g < t.childNodes.length; g++) u(t.childNodes[g]);
                        /^(pre|p)$/i.test(t.nodeName) && (l = !0), m && (o = !0)
                    } else 3 == t.nodeType && p(t.nodeValue.replace(/\u200b/g, "").replace(/\u00a0/g, " "))
                }
                for (; u(t), t != i;) t = t.nextSibling, l = !1;
                return s
            }(n, i, c, t, l)), u = Ye(n.doc, tt(t, 0), tt(l, Ve(n.doc, l).text.length)); p.length > 1 && u.length > 1;)
                if (K(p) == K(u)) p.pop(), u.pop(), l--;
                else {
                    if (p[0] != u[0]) break;
                    p.shift(), u.shift(), t++
                } for (var h = 0, f = 0, m = p[0], g = u[0], v = Math.min(m.length, g.length); h < v && m.charCodeAt(h) == g.charCodeAt(h);) ++h;
            for (var b = K(p), y = K(u), w = Math.min(b.length - (1 == p.length ? h : 0), y.length - (1 == u.length ? h : 0)); f < w && b.charCodeAt(b.length - f - 1) == y.charCodeAt(y.length - f - 1);) ++f;
            if (1 == p.length && 1 == u.length && t == o.line)
                for (; h && h > o.ch && b.charCodeAt(b.length - f - 1) == y.charCodeAt(y.length - f - 1);) h--, f++;
            p[p.length - 1] = b.slice(0, b.length - f).replace(/^\u200b+/, ""), p[0] = p[0].slice(h).replace(/\u200b+$/, "");
            var _ = tt(t, h),
                T = tt(l, u.length ? K(u).length - f : 0);
            return p.length > 1 || p[0] || it(_, T) ? (ms(n.doc, p, _, T, "+input"), !0) : void 0
        }, Ho.prototype.ensurePolled = function () {
            this.forceCompositionEnd()
        }, Ho.prototype.reset = function () {
            this.forceCompositionEnd()
        }, Ho.prototype.forceCompositionEnd = function () {
            this.composing && (clearTimeout(this.readDOMTimeout), this.composing = null, this.updateFromDOM(), this.div.blur(), this.div.focus())
        }, Ho.prototype.readFromDOMSoon = function () {
            var e = this;
            null == this.readDOMTimeout && (this.readDOMTimeout = setTimeout((function () {
                if (e.readDOMTimeout = null, e.composing) {
                    if (!e.composing.done) return;
                    e.composing = null
                }
                e.updateFromDOM()
            }), 80))
        }, Ho.prototype.updateFromDOM = function () {
            var e = this;
            !this.cm.isReadOnly() && this.pollContent() || ea(this.cm, (function () {
                return un(e.cm)
            }))
        }, Ho.prototype.setUneditable = function (e) {
            e.contentEditable = "false"
        }, Ho.prototype.onKeyPress = function (e) {
            0 == e.charCode || this.composing || (e.preventDefault(), this.cm.isReadOnly() || ta(this.cm, Lo)(this.cm, String.fromCharCode(null == e.charCode ? e.keyCode : e.charCode), 0))
        }, Ho.prototype.readOnlyChanged = function (e) {
            this.div.contentEditable = String("nocursor" != e)
        }, Ho.prototype.onContextMenu = function () { }, Ho.prototype.resetPosition = function () { }, Ho.prototype.needsContentAttribute = !0;
        var jo = function (e) {
            this.cm = e, this.prevInput = "", this.pollingFast = !1, this.polling = new B, this.hasSelection = !1, this.composing = null
        };
        jo.prototype.init = function (e) {
            var t = this,
                i = this,
                n = this.cm;
            this.createField(e);
            var a = this.textarea;

            function s(e) {
                if (!ge(n, e)) {
                    if (n.somethingSelected()) Ao({
                        lineWise: !1,
                        text: n.getSelections()
                    });
                    else {
                        if (!n.options.lineWiseCopyCut) return;
                        var t = Ro(n);
                        Ao({
                            lineWise: !0,
                            text: t.text
                        }), "cut" == e.type ? n.setSelections(t.ranges, null, G) : (i.prevInput = "", a.value = t.text.join("\n"), N(a))
                    }
                    "cut" == e.type && (n.state.cutIncoming = +new Date)
                }
            }
            e.wrapper.insertBefore(this.wrapper, e.wrapper.firstChild), m && (a.style.width = "0px"), ue(a, "input", (function () {
                o && r >= 9 && t.hasSelection && (t.hasSelection = null), i.poll()
            })), ue(a, "paste", (function (e) {
                ge(n, e) || Do(e, n) || (n.state.pasteIncoming = +new Date, i.fastPoll())
            })), ue(a, "cut", s), ue(a, "copy", s), ue(e.scroller, "paste", (function (t) {
                if (!Ti(e, t) && !ge(n, t)) {
                    if (!a.dispatchEvent) return n.state.pasteIncoming = +new Date, void i.focus();
                    var s = new Event("paste");
                    s.clipboardData = t.clipboardData, a.dispatchEvent(s)
                }
            })), ue(e.lineSpace, "selectstart", (function (t) {
                Ti(e, t) || we(t)
            })), ue(a, "compositionstart", (function () {
                var e = n.getCursor("from");
                i.composing && i.composing.range.clear(), i.composing = {
                    start: e,
                    range: n.markText(e, n.getCursor("to"), {
                        className: "CodeMirror-composing"
                    })
                }
            })), ue(a, "compositionend", (function () {
                i.composing && (i.poll(), i.composing.range.clear(), i.composing = null)
            }))
        }, jo.prototype.createField = function (e) {
            this.wrapper = Fo(), this.textarea = this.wrapper.firstChild
        }, jo.prototype.prepareSelection = function () {
            var e = this.cm,
                t = e.display,
                i = e.doc,
                n = bn(e);
            if (e.options.moveInputWithCursor) {
                var a = Vi(e, i.sel.primary().head, "div"),
                    s = t.wrapper.getBoundingClientRect(),
                    o = t.lineDiv.getBoundingClientRect();
                n.teTop = Math.max(0, Math.min(t.wrapper.clientHeight - 10, a.top + o.top - s.top)), n.teLeft = Math.max(0, Math.min(t.wrapper.clientWidth - 10, a.left + o.left - s.left))
            }
            return n
        }, jo.prototype.showSelection = function (e) {
            var t = this.cm.display;
            M(t.cursorDiv, e.cursors), M(t.selectionDiv, e.selection), null != e.teTop && (this.wrapper.style.top = e.teTop + "px", this.wrapper.style.left = e.teLeft + "px")
        }, jo.prototype.reset = function (e) {
            if (!this.contextMenuPending && !this.composing) {
                var t = this.cm;
                if (t.somethingSelected()) {
                    this.prevInput = "";
                    var i = t.getSelection();
                    this.textarea.value = i, t.state.focused && N(this.textarea), o && r >= 9 && (this.hasSelection = i)
                } else e || (this.prevInput = this.textarea.value = "", o && r >= 9 && (this.hasSelection = null))
            }
        }, jo.prototype.getField = function () {
            return this.textarea
        }, jo.prototype.supportsTouch = function () {
            return !1
        }, jo.prototype.focus = function () {
            if ("nocursor" != this.cm.options.readOnly && (!v || A() != this.textarea)) try {
                this.textarea.focus()
            } catch (e) { }
        }, jo.prototype.blur = function () {
            this.textarea.blur()
        }, jo.prototype.resetPosition = function () {
            this.wrapper.style.top = this.wrapper.style.left = 0
        }, jo.prototype.receivedFocus = function () {
            this.slowPoll()
        }, jo.prototype.slowPoll = function () {
            var e = this;
            this.pollingFast || this.polling.set(this.cm.options.pollInterval, (function () {
                e.poll(), e.cm.state.focused && e.slowPoll()
            }))
        }, jo.prototype.fastPoll = function () {
            var e = !1,
                t = this;
            t.pollingFast = !0, t.polling.set(20, (function i() {
                t.poll() || e ? (t.pollingFast = !1, t.slowPoll()) : (e = !0, t.polling.set(60, i))
            }))
        }, jo.prototype.poll = function () {
            var e = this,
                t = this.cm,
                i = this.textarea,
                n = this.prevInput;
            if (this.contextMenuPending || !t.state.focused || Le(i) && !n && !this.composing || t.isReadOnly() || t.options.disableInput || t.state.keySeq) return !1;
            var a = i.value;
            if (a == n && !t.somethingSelected()) return !1;
            if (o && r >= 9 && this.hasSelection === a || b && /[\uf700-\uf7ff]/.test(a)) return t.display.input.reset(), !1;
            if (t.doc.sel == t.display.selForContextMenu) {
                var s = a.charCodeAt(0);
                if (8203 != s || n || (n = "â€‹"), 8666 == s) return this.reset(), this.cm.execCommand("undo")
            }
            for (var l = 0, c = Math.min(n.length, a.length); l < c && n.charCodeAt(l) == a.charCodeAt(l);) ++l;
            return ea(t, (function () {
                Lo(t, a.slice(l), n.length - l, null, e.composing ? "*compose" : null), a.length > 1e3 || a.indexOf("\n") > -1 ? i.value = e.prevInput = "" : e.prevInput = a, e.composing && (e.composing.range.clear(), e.composing.range = t.markText(e.composing.start, t.getCursor("to"), {
                    className: "CodeMirror-composing"
                }))
            })), !0
        }, jo.prototype.ensurePolled = function () {
            this.pollingFast && this.poll() && (this.pollingFast = !1)
        }, jo.prototype.onKeyPress = function () {
            o && r >= 9 && (this.hasSelection = null), this.fastPoll()
        }, jo.prototype.onContextMenu = function (e) {
            var t = this,
                i = t.cm,
                n = i.display,
                a = t.textarea;
            t.contextMenuPending && t.contextMenuPending();
            var s = dn(i, e),
                c = n.scroller.scrollTop;
            if (s && !p) {
                i.options.resetSelectionOnContextMenu && -1 == i.doc.sel.contains(s) && ta(i, es)(i.doc, xa(s), G);
                var d, u = a.style.cssText,
                    h = t.wrapper.style.cssText,
                    f = t.wrapper.offsetParent.getBoundingClientRect();
                if (t.wrapper.style.cssText = "position: static", a.style.cssText = "position: absolute; width: 30px; height: 30px;\n      top: " + (e.clientY - f.top - 5) + "px; left: " + (e.clientX - f.left - 5) + "px;\n      z-index: 1000; background: " + (o ? "rgba(255, 255, 255, .05)" : "transparent") + ";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);", l && (d = window.scrollY), n.input.focus(), l && window.scrollTo(null, d), n.input.reset(), i.somethingSelected() || (a.value = t.prevInput = " "), t.contextMenuPending = v, n.selForContextMenu = i.doc.sel, clearTimeout(n.detectingSelectAll), o && r >= 9 && g(), C) {
                    Ce(e);
                    var m = function () {
                        fe(window, "mouseup", m), setTimeout(v, 20)
                    };
                    ue(window, "mouseup", m)
                } else setTimeout(v, 50)
            }

            function g() {
                if (null != a.selectionStart) {
                    var e = i.somethingSelected(),
                        s = "â€‹" + (e ? a.value : "");
                    a.value = "â‡š", a.value = s, t.prevInput = e ? "" : "â€‹", a.selectionStart = 1, a.selectionEnd = s.length, n.selForContextMenu = i.doc.sel
                }
            }

            function v() {
                if (t.contextMenuPending == v && (t.contextMenuPending = !1, t.wrapper.style.cssText = h, a.style.cssText = u, o && r < 9 && n.scrollbars.setScrollTop(n.scroller.scrollTop = c), null != a.selectionStart)) {
                    (!o || o && r < 9) && g();
                    var e = 0,
                        s = function () {
                            n.selForContextMenu == i.doc.sel && 0 == a.selectionStart && a.selectionEnd > 0 && "â€‹" == t.prevInput ? ta(i, ls)(i) : e++ < 10 ? n.detectingSelectAll = setTimeout(s, 500) : (n.selForContextMenu = null, n.input.reset())
                        };
                    n.detectingSelectAll = setTimeout(s, 200)
                }
            }
        }, jo.prototype.readOnlyChanged = function (e) {
            e || this.reset(), this.textarea.disabled = "nocursor" == e
        }, jo.prototype.setUneditable = function () { }, jo.prototype.needsContentAttribute = !1,
            function (e) {
                var t = e.optionHandlers;

                function i(i, n, a, s) {
                    e.defaults[i] = n, a && (t[i] = s ? function (e, t, i) {
                        i != Co && a(e, t, i)
                    } : a)
                }
                e.defineOption = i, e.Init = Co, i("value", "", (function (e, t) {
                    return e.setValue(t)
                }), !0), i("mode", null, (function (e, t) {
                    e.doc.modeOption = t, Oa(e)
                }), !0), i("indentUnit", 2, Oa, !0), i("indentWithTabs", !1), i("smartIndent", !0), i("tabSize", 4, (function (e) {
                    Aa(e), Ui(e), un(e)
                }), !0), i("lineSeparator", null, (function (e, t) {
                    if (e.doc.lineSep = t, t) {
                        var i = [],
                            n = e.doc.first;
                        e.doc.iter((function (e) {
                            for (var a = 0; ;) {
                                var s = e.text.indexOf(t, a);
                                if (-1 == s) break;
                                a = s + t.length, i.push(tt(n, s))
                            }
                            n++
                        }));
                        for (var a = i.length - 1; a >= 0; a--) ms(e.doc, t, i[a], tt(i[a].line, i[a].ch + t.length))
                    }
                })), i("specialChars", /[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g, (function (e, t, i) {
                    e.state.specialChars = new RegExp(t.source + (t.test("\t") ? "" : "|\t"), "g"), i != Co && e.refresh()
                })), i("specialCharPlaceholder", Zt, (function (e) {
                    return e.refresh()
                }), !0), i("electricChars", !0), i("inputStyle", v ? "contenteditable" : "textarea", (function () {
                    throw new Error("inputStyle can not (yet) be changed in a running editor")
                }), !0), i("spellcheck", !1, (function (e, t) {
                    return e.getInputField().spellcheck = t
                }), !0), i("autocorrect", !1, (function (e, t) {
                    return e.getInputField().autocorrect = t
                }), !0), i("autocapitalize", !1, (function (e, t) {
                    return e.getInputField().autocapitalize = t
                }), !0), i("rtlMoveVisually", !w), i("wholeLineUpdateBefore", !0), i("theme", "default", (function (e) {
                    To(e), ga(e)
                }), !0), i("keyMap", "default", (function (e, t, i) {
                    var n = Xs(t),
                        a = i != Co && Xs(i);
                    a && a.detach && a.detach(e, n), n.attach && n.attach(e, a || null)
                })), i("extraKeys", null), i("configureMouse", null), i("lineWrapping", !1, So, !0), i("gutters", [], (function (e, t) {
                    e.display.gutterSpecs = fa(t, e.options.lineNumbers), ga(e)
                }), !0), i("fixedGutter", !0, (function (e, t) {
                    e.display.gutters.style.left = t ? rn(e.display) + "px" : "0", e.refresh()
                }), !0), i("coverGutterNextToScrollbar", !1, (function (e) {
                    return zn(e)
                }), !0), i("scrollbarStyle", "native", (function (e) {
                    qn(e), zn(e), e.display.scrollbars.setScrollTop(e.doc.scrollTop), e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)
                }), !0), i("lineNumbers", !1, (function (e, t) {
                    e.display.gutterSpecs = fa(e.options.gutters, t), ga(e)
                }), !0), i("firstLineNumber", 1, ga, !0), i("lineNumberFormatter", (function (e) {
                    return e
                }), ga, !0), i("showCursorWhenSelecting", !1, vn, !0), i("resetSelectionOnContextMenu", !0), i("lineWiseCopyCut", !0), i("pasteLinesPerSelection", !0), i("selectionsMayTouch", !1), i("readOnly", !1, (function (e, t) {
                    "nocursor" == t && (xn(e), e.display.input.blur()), e.display.input.readOnlyChanged(t)
                })), i("disableInput", !1, (function (e, t) {
                    t || e.display.input.reset()
                }), !0), i("dragDrop", !0, xo), i("allowDropFileTypes", null), i("cursorBlinkRate", 530), i("cursorScrollMargin", 0), i("cursorHeight", 1, vn, !0), i("singleCursorHeightPerLine", !0, vn, !0), i("workTime", 100), i("workDelay", 100), i("flattenSpans", !0, Aa, !0), i("addModeClass", !1, Aa, !0), i("pollInterval", 100), i("undoDepth", 200, (function (e, t) {
                    return e.doc.history.undoDepth = t
                })), i("historyEventDelay", 1250), i("viewportMargin", 10, (function (e) {
                    return e.refresh()
                }), !0), i("maxHighlightLength", 1e4, Aa, !0), i("moveInputWithCursor", !0, (function (e, t) {
                    t || e.display.input.resetPosition()
                })), i("tabindex", null, (function (e, t) {
                    return e.display.input.getField().tabIndex = t || ""
                })), i("autofocus", null), i("direction", "ltr", (function (e, t) {
                    return e.doc.setDirection(t)
                }), !0), i("phrases", null)
            }(Mo),
            function (e) {
                var t = e.optionHandlers,
                    i = e.helpers = {};
                e.prototype = {
                    constructor: e,
                    focus: function () {
                        window.focus(), this.display.input.focus()
                    },
                    setOption: function (e, i) {
                        var n = this.options,
                            a = n[e];
                        n[e] == i && "mode" != e || (n[e] = i, t.hasOwnProperty(e) && ta(this, t[e])(this, i, a), me(this, "optionChange", this, e))
                    },
                    getOption: function (e) {
                        return this.options[e]
                    },
                    getDoc: function () {
                        return this.doc
                    },
                    addKeyMap: function (e, t) {
                        this.state.keyMaps[t ? "push" : "unshift"](Xs(e))
                    },
                    removeKeyMap: function (e) {
                        for (var t = this.state.keyMaps, i = 0; i < t.length; ++i)
                            if (t[i] == e || t[i].name == e) return t.splice(i, 1), !0
                    },
                    addOverlay: ia((function (t, i) {
                        var n = t.token ? t : e.getMode(this.options, t);
                        if (n.startState) throw new Error("Overlays may not be stateful.");
                        ! function (e, t, i) {
                            for (var n = 0, a = i(t); n < e.length && i(e[n]) <= a;) n++;
                            e.splice(n, 0, t)
                        }(this.state.overlays, {
                            mode: n,
                            modeSpec: t,
                            opaque: i && i.opaque,
                            priority: i && i.priority || 0
                        }, (function (e) {
                            return e.priority
                        })), this.state.modeGen++, un(this)
                    })),
                    removeOverlay: ia((function (e) {
                        for (var t = this.state.overlays, i = 0; i < t.length; ++i) {
                            var n = t[i].modeSpec;
                            if (n == e || "string" == typeof e && n.name == e) return t.splice(i, 1), this.state.modeGen++, void un(this)
                        }
                    })),
                    indentLine: ia((function (e, t, i) {
                        "string" != typeof t && "number" != typeof t && (t = null == t ? this.options.smartIndent ? "smart" : "prev" : t ? "add" : "subtract"), Ze(this.doc, e) && Io(this, e, t, i)
                    })),
                    indentSelection: ia((function (e) {
                        for (var t = this, i = this.doc.sel.ranges, n = -1, a = 0; a < i.length; a++) {
                            var s = i[a];
                            if (s.empty()) s.head.line > n && (Io(t, s.head.line, e, !0), n = s.head.line, a == t.doc.sel.primIndex && An(t));
                            else {
                                var o = s.from(),
                                    r = s.to(),
                                    l = Math.max(n, o.line);
                                n = Math.min(t.lastLine(), r.line - (r.ch ? 0 : 1)) + 1;
                                for (var c = l; c < n; ++c) Io(t, c, e);
                                var d = t.doc.sel.ranges;
                                0 == o.ch && i.length == d.length && d[a].from().ch > 0 && Qa(t.doc, a, new ka(o, d[a].to()), G)
                            }
                        }
                    })),
                    getTokenAt: function (e, t) {
                        return yt(this, e, t)
                    },
                    getLineTokens: function (e, t) {
                        return yt(this, tt(e), t, !0)
                    },
                    getTokenTypeAt: function (e) {
                        e = lt(this.doc, e);
                        var t, i = ht(this, Ve(this.doc, e.line)),
                            n = 0,
                            a = (i.length - 1) / 2,
                            s = e.ch;
                        if (0 == s) t = i[2];
                        else
                            for (; ;) {
                                var o = n + a >> 1;
                                if ((o ? i[2 * o - 1] : 0) >= s) a = o;
                                else {
                                    if (!(i[2 * o + 1] < s)) {
                                        t = i[2 * o + 2];
                                        break
                                    }
                                    n = o + 1
                                }
                            }
                        var r = t ? t.indexOf("overlay ") : -1;
                        return r < 0 ? t : 0 == r ? null : t.slice(0, r - 1)
                    },
                    getModeAt: function (t) {
                        var i = this.doc.mode;
                        return i.innerMode ? e.innerMode(i, this.getTokenAt(t).state).mode : i
                    },
                    getHelper: function (e, t) {
                        return this.getHelpers(e, t)[0]
                    },
                    getHelpers: function (e, t) {
                        var n = [];
                        if (!i.hasOwnProperty(t)) return n;
                        var a = i[t],
                            s = this.getModeAt(e);
                        if ("string" == typeof s[t]) a[s[t]] && n.push(a[s[t]]);
                        else if (s[t])
                            for (var o = 0; o < s[t].length; o++) {
                                var r = a[s[t][o]];
                                r && n.push(r)
                            } else s.helperType && a[s.helperType] ? n.push(a[s.helperType]) : a[s.name] && n.push(a[s.name]);
                        for (var l = 0; l < a._global.length; l++) {
                            var c = a._global[l];
                            c.pred(s, this) && -1 == U(n, c.val) && n.push(c.val)
                        }
                        return n
                    },
                    getStateAfter: function (e, t) {
                        var i = this.doc;
                        return ft(this, (e = rt(i, null == e ? i.first + i.size - 1 : e)) + 1, t).state
                    },
                    cursorCoords: function (e, t) {
                        var i = this.doc.sel.primary();
                        return Vi(this, null == e ? i.head : "object" == typeof e ? lt(this.doc, e) : e ? i.from() : i.to(), t || "page")
                    },
                    charCoords: function (e, t) {
                        return ji(this, lt(this.doc, e), t || "page")
                    },
                    coordsChar: function (e, t) {
                        return Xi(this, (e = qi(this, e, t || "page")).left, e.top)
                    },
                    lineAtHeight: function (e, t) {
                        return e = qi(this, {
                            top: e,
                            left: 0
                        }, t || "page").top, Je(this.doc, e + this.display.viewOffset)
                    },
                    heightAtLine: function (e, t, i) {
                        var n, a = !1;
                        if ("number" == typeof e) {
                            var s = this.doc.first + this.doc.size - 1;
                            e < this.doc.first ? e = this.doc.first : e > s && (e = s, a = !0), n = Ve(this.doc, e)
                        } else n = e;
                        return $i(this, n, {
                            top: 0,
                            left: 0
                        }, t || "page", i || a).top + (a ? this.doc.height - $t(n) : 0)
                    },
                    defaultTextHeight: function () {
                        return an(this.display)
                    },
                    defaultCharWidth: function () {
                        return sn(this.display)
                    },
                    getViewport: function () {
                        return {
                            from: this.display.viewFrom,
                            to: this.display.viewTo
                        }
                    },
                    addWidget: function (e, t, i, n, a) {
                        var s, o, r, l = this.display,
                            c = (e = Vi(this, lt(this.doc, e))).bottom,
                            d = e.left;
                        if (t.style.position = "absolute", t.setAttribute("cm-ignore-events", "true"), this.display.input.setUneditable(t), l.sizer.appendChild(t), "over" == n) c = e.top;
                        else if ("above" == n || "near" == n) {
                            var p = Math.max(l.wrapper.clientHeight, this.doc.height),
                                u = Math.max(l.sizer.clientWidth, l.lineSpace.clientWidth);
                            ("above" == n || e.bottom + t.offsetHeight > p) && e.top > t.offsetHeight ? c = e.top - t.offsetHeight : e.bottom + t.offsetHeight <= p && (c = e.bottom), d + t.offsetWidth > u && (d = u - t.offsetWidth)
                        }
                        t.style.top = c + "px", t.style.left = t.style.right = "", "right" == a ? (d = l.sizer.clientWidth - t.offsetWidth, t.style.right = "0px") : ("left" == a ? d = 0 : "middle" == a && (d = (l.sizer.clientWidth - t.offsetWidth) / 2), t.style.left = d + "px"), i && (s = this, o = {
                            left: d,
                            top: c,
                            right: d + t.offsetWidth,
                            bottom: c + t.offsetHeight
                        }, null != (r = In(s, o)).scrollTop && Rn(s, r.scrollTop), null != r.scrollLeft && Fn(s, r.scrollLeft))
                    },
                    triggerOnKeyDown: ia(po),
                    triggerOnKeyPress: ia(ho),
                    triggerOnKeyUp: uo,
                    triggerOnMouseDown: ia(vo),
                    execCommand: function (e) {
                        if (to.hasOwnProperty(e)) return to[e].call(null, this)
                    },
                    triggerElectric: ia((function (e) {
                        No(this, e)
                    })),
                    findPosH: function (e, t, i, n) {
                        var a = 1;
                        t < 0 && (a = -1, t = -t);
                        for (var s = lt(this.doc, e), o = 0; o < t && !(s = Bo(this.doc, s, a, i, n)).hitSide; ++o);
                        return s
                    },
                    moveH: ia((function (e, t) {
                        var i = this;
                        this.extendSelectionsBy((function (n) {
                            return i.display.shift || i.doc.extend || n.empty() ? Bo(i.doc, n.head, e, t, i.options.rtlMoveVisually) : e < 0 ? n.from() : n.to()
                        }), q)
                    })),
                    deleteH: ia((function (e, t) {
                        var i = this.doc.sel,
                            n = this.doc;
                        i.somethingSelected() ? n.replaceSelection("", null, "+delete") : Qs(this, (function (i) {
                            var a = Bo(n, i.head, e, t, !1);
                            return e < 0 ? {
                                from: a,
                                to: i.head
                            } : {
                                from: i.head,
                                to: a
                            }
                        }))
                    })),
                    findPosV: function (e, t, i, n) {
                        var a = 1,
                            s = n;
                        t < 0 && (a = -1, t = -t);
                        for (var o = lt(this.doc, e), r = 0; r < t; ++r) {
                            var l = Vi(this, o, "div");
                            if (null == s ? s = l.left : l.left = s, (o = Uo(this, l, a, i)).hitSide) break
                        }
                        return o
                    },
                    moveV: ia((function (e, t) {
                        var i = this,
                            n = this.doc,
                            a = [],
                            s = !this.display.shift && !n.extend && n.sel.somethingSelected();
                        if (n.extendSelectionsBy((function (o) {
                            if (s) return e < 0 ? o.from() : o.to();
                            var r = Vi(i, o.head, "div");
                            null != o.goalColumn && (r.left = o.goalColumn), a.push(r.left);
                            var l = Uo(i, r, e, t);
                            return "page" == t && o == n.sel.primary() && On(i, ji(i, l, "div").top - r.top), l
                        }), q), a.length)
                            for (var o = 0; o < n.sel.ranges.length; o++) n.sel.ranges[o].goalColumn = a[o]
                    })),
                    findWordAt: function (e) {
                        var t = Ve(this.doc, e.line).text,
                            i = e.ch,
                            n = e.ch;
                        if (t) {
                            var a = this.getHelper(e, "wordChars");
                            "before" != e.sticky && n != t.length || !i ? ++n : --i;
                            for (var s = t.charAt(i), o = te(s, a) ? function (e) {
                                return te(e, a)
                            } : /\s/.test(s) ? function (e) {
                                return /\s/.test(e)
                            } : function (e) {
                                return !/\s/.test(e) && !te(e)
                            }; i > 0 && o(t.charAt(i - 1));) --i;
                            for (; n < t.length && o(t.charAt(n));) ++n
                        }
                        return new ka(tt(e.line, i), tt(e.line, n))
                    },
                    toggleOverwrite: function (e) {
                        null != e && e == this.state.overwrite || ((this.state.overwrite = !this.state.overwrite) ? L(this.display.cursorDiv, "CodeMirror-overwrite") : x(this.display.cursorDiv, "CodeMirror-overwrite"), me(this, "overwriteToggle", this, this.state.overwrite))
                    },
                    hasFocus: function () {
                        return this.display.input.getField() == A()
                    },
                    isReadOnly: function () {
                        return !(!this.options.readOnly && !this.doc.cantEdit)
                    },
                    scrollTo: ia((function (e, t) {
                        Ln(this, e, t)
                    })),
                    getScrollInfo: function () {
                        var e = this.display.scroller;
                        return {
                            left: e.scrollLeft,
                            top: e.scrollTop,
                            height: e.scrollHeight - xi(this) - this.display.barHeight,
                            width: e.scrollWidth - xi(this) - this.display.barWidth,
                            clientHeight: Mi(this),
                            clientWidth: Si(this)
                        }
                    },
                    scrollIntoView: ia((function (e, t) {
                        null == e ? (e = {
                            from: this.doc.sel.primary().head,
                            to: null
                        }, null == t && (t = this.options.cursorScrollMargin)) : "number" == typeof e ? e = {
                            from: tt(e, 0),
                            to: null
                        } : null == e.from && (e = {
                            from: e,
                            to: null
                        }), e.to || (e.to = e.from), e.margin = t || 0, null != e.from.line ? function (e, t) {
                            Dn(e), e.curOp.scrollToPos = t
                        }(this, e) : Nn(this, e.from, e.to, e.margin)
                    })),
                    setSize: ia((function (e, t) {
                        var i = this,
                            n = function (e) {
                                return "number" == typeof e || /^\d+$/.test(String(e)) ? e + "px" : e
                            };
                        null != e && (this.display.wrapper.style.width = n(e)), null != t && (this.display.wrapper.style.height = n(t)), this.options.lineWrapping && Bi(this);
                        var a = this.display.viewFrom;
                        this.doc.iter(a, this.display.viewTo, (function (e) {
                            if (e.widgets)
                                for (var t = 0; t < e.widgets.length; t++)
                                    if (e.widgets[t].noHScroll) {
                                        hn(i, a, "widget");
                                        break
                                    } ++a
                        })), this.curOp.forceUpdate = !0, me(this, "refresh", this)
                    })),
                    operation: function (e) {
                        return ea(this, e)
                    },
                    startOperation: function () {
                        return Vn(this)
                    },
                    endOperation: function () {
                        return Yn(this)
                    },
                    refresh: ia((function () {
                        var e = this.display.cachedTextHeight;
                        un(this), this.curOp.forceUpdate = !0, Ui(this), Ln(this, this.doc.scrollLeft, this.doc.scrollTop), da(this.display), (null == e || Math.abs(e - an(this.display)) > .5) && cn(this), me(this, "refresh", this)
                    })),
                    swapDoc: ia((function (e) {
                        var t = this.doc;
                        return t.cm = null, this.state.selectingText && this.state.selectingText(), Ra(this, e), Ui(this), this.display.input.reset(), Ln(this, e.scrollLeft, e.scrollTop), this.curOp.forceScroll = !0, li(this, "swapDoc", this, t), t
                    })),
                    phrase: function (e) {
                        var t = this.options.phrases;
                        return t && Object.prototype.hasOwnProperty.call(t, e) ? t[e] : e
                    },
                    getInputField: function () {
                        return this.display.input.getField()
                    },
                    getWrapperElement: function () {
                        return this.display.wrapper
                    },
                    getScrollerElement: function () {
                        return this.display.scroller
                    },
                    getGutterElement: function () {
                        return this.display.gutters
                    }
                }, ye(e), e.registerHelper = function (t, n, a) {
                    i.hasOwnProperty(t) || (i[t] = e[t] = {
                        _global: []
                    }), i[t][n] = a
                }, e.registerGlobalHelper = function (t, n, a, s) {
                    e.registerHelper(t, n, s), i[t]._global.push({
                        pred: a,
                        val: s
                    })
                }
            }(Mo);
        var Vo = "iter insert remove copy getEditor constructor".split(" ");
        for (var Yo in Os.prototype) Os.prototype.hasOwnProperty(Yo) && U(Vo, Yo) < 0 && (Mo.prototype[Yo] = function (e) {
            return function () {
                return e.apply(this.doc, arguments)
            }
        }(Os.prototype[Yo]));
        return ye(Os), Mo.inputStyles = {
            textarea: jo,
            contenteditable: Ho
        }, Mo.defineMode = function (e) {
            Mo.defaults.mode || "null" == e || (Mo.defaults.mode = e), Fe.apply(this, arguments)
        }, Mo.defineMIME = function (e, t) {
            We[e] = t
        }, Mo.defineMode("null", (function () {
            return {
                token: function (e) {
                    return e.skipToEnd()
                }
            }
        })), Mo.defineMIME("text/plain", "null"), Mo.defineExtension = function (e, t) {
            Mo.prototype[e] = t
        }, Mo.defineDocExtension = function (e, t) {
            Os.prototype[e] = t
        }, Mo.fromTextArea = function (e, t) {
            if ((t = t ? W(t) : {}).value = e.value, !t.tabindex && e.tabIndex && (t.tabindex = e.tabIndex), !t.placeholder && e.placeholder && (t.placeholder = e.placeholder), null == t.autofocus) {
                var i = A();
                t.autofocus = i == e || null != e.getAttribute("autofocus") && i == document.body
            }

            function n() {
                e.value = r.getValue()
            }
            var a;
            if (e.form && (ue(e.form, "submit", n), !t.leaveSubmitMethodAlone)) {
                var s = e.form;
                a = s.submit;
                try {
                    var o = s.submit = function () {
                        n(), s.submit = a, s.submit(), s.submit = o
                    }
                } catch (e) { }
            }
            t.finishInit = function (i) {
                i.save = n, i.getTextArea = function () {
                    return e
                }, i.toTextArea = function () {
                    i.toTextArea = isNaN, n(), e.parentNode.removeChild(i.getWrapperElement()), e.style.display = "", e.form && (fe(e.form, "submit", n), t.leaveSubmitMethodAlone || "function" != typeof e.form.submit || (e.form.submit = a))
                }
            }, e.style.display = "none";
            var r = Mo((function (t) {
                return e.parentNode.insertBefore(t, e.nextSibling)
            }), t);
            return r
        },
            function (e) {
                e.off = fe, e.on = ue, e.wheelEventPixels = _a, e.Doc = Os, e.splitLines = Ae, e.countColumn = F, e.findColumn = j, e.isWordChar = ee, e.Pass = z, e.signal = me, e.Line = Vt, e.changeEnd = Sa, e.scrollbarModel = $n, e.Pos = tt, e.cmpPos = it, e.modes = Re, e.mimeModes = We, e.resolveMode = Be, e.getMode = Ue, e.modeExtensions = He, e.extendMode = ze, e.copyState = Ge, e.startState = qe, e.innerMode = $e, e.commands = to, e.keyMap = Gs, e.keyName = Ks, e.isModifierKey = Vs, e.lookupKey = js, e.normalizeKeyMap = qs, e.StringStream = je, e.SharedTextMarker = Ss, e.TextMarker = Es, e.LineWidget = Ts, e.e_preventDefault = we, e.e_stopPropagation = _e, e.e_stop = Ce, e.addClass = L, e.contains = O, e.rmClass = x, e.keyNames = Bs
            }(Mo), Mo.version = "5.52.0", Mo
    })),
    function (e) {
        "object" == typeof exports && "object" == typeof module ? e(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define(["../../lib/codemirror"], e) : e(CodeMirror)
    }((function (e) {
        "use strict";

        function t(e) {
            for (var t = {}, i = 0; i < e.length; ++i) t[e[i].toLowerCase()] = !0;
            return t
        }
        e.defineMode("css", (function (t, i) {
            var n = i.inline;
            i.propertyKeywords || (i = e.resolveMode("text/css"));
            var a, s, o = t.indentUnit,
                r = i.tokenHooks,
                l = i.documentTypes || {},
                c = i.mediaTypes || {},
                d = i.mediaFeatures || {},
                p = i.mediaValueKeywords || {},
                u = i.propertyKeywords || {},
                h = i.nonStandardPropertyKeywords || {},
                f = i.fontProperties || {},
                m = i.counterDescriptors || {},
                g = i.colorKeywords || {},
                v = i.valueKeywords || {},
                b = i.allowNested,
                y = i.lineComment,
                w = !0 === i.supportsAtComponent;

            function _(e, t) {
                return a = t, e
            }

            function T(e, t) {
                var i = e.next();
                if (r[i]) {
                    var n = r[i](e, t);
                    if (!1 !== n) return n
                }
                return "@" == i ? (e.eatWhile(/[\w\\\-]/), _("def", e.current())) : "=" == i || ("~" == i || "|" == i) && e.eat("=") ? _(null, "compare") : '"' == i || "'" == i ? (t.tokenize = C(i), t.tokenize(e, t)) : "#" == i ? (e.eatWhile(/[\w\\\-]/), _("atom", "hash")) : "!" == i ? (e.match(/^\s*\w*/), _("keyword", "important")) : /\d/.test(i) || "." == i && e.eat(/\d/) ? (e.eatWhile(/[\w.%]/), _("number", "unit")) : "-" !== i ? /[,+>*\/]/.test(i) ? _(null, "select-op") : "." == i && e.match(/^-?[_a-z][_a-z0-9-]*/i) ? _("qualifier", "qualifier") : /[:;{}\[\]\(\)]/.test(i) ? _(null, i) : e.match(/[\w-.]+(?=\()/) ? (/^(url(-prefix)?|domain|regexp)$/.test(e.current().toLowerCase()) && (t.tokenize = k), _("variable callee", "variable")) : /[\w\\\-]/.test(i) ? (e.eatWhile(/[\w\\\-]/), _("property", "word")) : _(null, null) : /[\d.]/.test(e.peek()) ? (e.eatWhile(/[\w.%]/), _("number", "unit")) : e.match(/^-[\w\\\-]*/) ? (e.eatWhile(/[\w\\\-]/), e.match(/^\s*:/, !1) ? _("variable-2", "variable-definition") : _("variable-2", "variable")) : e.match(/^\w+-/) ? _("meta", "meta") : void 0
            }

            function C(e) {
                return function (t, i) {
                    for (var n, a = !1; null != (n = t.next());) {
                        if (n == e && !a) {
                            ")" == e && t.backUp(1);
                            break
                        }
                        a = !a && "\\" == n
                    }
                    return (n == e || !a && ")" != e) && (i.tokenize = null), _("string", "string")
                }
            }

            function k(e, t) {
                return e.next(), e.match(/\s*[\"\')]/, !1) ? t.tokenize = null : t.tokenize = C(")"), _(null, "(")
            }

            function E(e, t, i) {
                this.type = e, this.indent = t, this.prev = i
            }

            function x(e, t, i, n) {
                return e.context = new E(i, t.indentation() + (!1 === n ? 0 : o), e.context), i
            }

            function S(e) {
                return e.context.prev && (e.context = e.context.prev), e.context.type
            }

            function M(e, t, i) {
                return O[i.context.type](e, t, i)
            }

            function P(e, t, i, n) {
                for (var a = n || 1; a > 0; a--) i.context = i.context.prev;
                return M(e, t, i)
            }

            function I(e) {
                var t = e.current().toLowerCase();
                s = v.hasOwnProperty(t) ? "atom" : g.hasOwnProperty(t) ? "keyword" : "variable"
            }
            var O = {
                top: function (e, t, i) {
                    if ("{" == e) return x(i, t, "block");
                    if ("}" == e && i.context.prev) return S(i);
                    if (w && /@component/i.test(e)) return x(i, t, "atComponentBlock");
                    if (/^@(-moz-)?document$/i.test(e)) return x(i, t, "documentTypes");
                    if (/^@(media|supports|(-moz-)?document|import)$/i.test(e)) return x(i, t, "atBlock");
                    if (/^@(font-face|counter-style)/i.test(e)) return i.stateArg = e, "restricted_atBlock_before";
                    if (/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(e)) return "keyframes";
                    if (e && "@" == e.charAt(0)) return x(i, t, "at");
                    if ("hash" == e) s = "builtin";
                    else if ("word" == e) s = "tag";
                    else {
                        if ("variable-definition" == e) return "maybeprop";
                        if ("interpolation" == e) return x(i, t, "interpolation");
                        if (":" == e) return "pseudo";
                        if (b && "(" == e) return x(i, t, "parens")
                    }
                    return i.context.type
                },
                block: function (e, t, i) {
                    if ("word" == e) {
                        var n = t.current().toLowerCase();
                        return u.hasOwnProperty(n) ? (s = "property", "maybeprop") : h.hasOwnProperty(n) ? (s = "string-2", "maybeprop") : b ? (s = t.match(/^\s*:(?:\s|$)/, !1) ? "property" : "tag", "block") : (s += " error", "maybeprop")
                    }
                    return "meta" == e ? "block" : b || "hash" != e && "qualifier" != e ? O.top(e, t, i) : (s = "error", "block")
                },
                maybeprop: function (e, t, i) {
                    return ":" == e ? x(i, t, "prop") : M(e, t, i)
                },
                prop: function (e, t, i) {
                    if (";" == e) return S(i);
                    if ("{" == e && b) return x(i, t, "propBlock");
                    if ("}" == e || "{" == e) return P(e, t, i);
                    if ("(" == e) return x(i, t, "parens");
                    if ("hash" != e || /^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(t.current())) {
                        if ("word" == e) I(t);
                        else if ("interpolation" == e) return x(i, t, "interpolation")
                    } else s += " error";
                    return "prop"
                },
                propBlock: function (e, t, i) {
                    return "}" == e ? S(i) : "word" == e ? (s = "property", "maybeprop") : i.context.type
                },
                parens: function (e, t, i) {
                    return "{" == e || "}" == e ? P(e, t, i) : ")" == e ? S(i) : "(" == e ? x(i, t, "parens") : "interpolation" == e ? x(i, t, "interpolation") : ("word" == e && I(t), "parens")
                },
                pseudo: function (e, t, i) {
                    return "meta" == e ? "pseudo" : "word" == e ? (s = "variable-3", i.context.type) : M(e, t, i)
                },
                documentTypes: function (e, t, i) {
                    return "word" == e && l.hasOwnProperty(t.current()) ? (s = "tag", i.context.type) : O.atBlock(e, t, i)
                },
                atBlock: function (e, t, i) {
                    if ("(" == e) return x(i, t, "atBlock_parens");
                    if ("}" == e || ";" == e) return P(e, t, i);
                    if ("{" == e) return S(i) && x(i, t, b ? "block" : "top");
                    if ("interpolation" == e) return x(i, t, "interpolation");
                    if ("word" == e) {
                        var n = t.current().toLowerCase();
                        s = "only" == n || "not" == n || "and" == n || "or" == n ? "keyword" : c.hasOwnProperty(n) ? "attribute" : d.hasOwnProperty(n) ? "property" : p.hasOwnProperty(n) ? "keyword" : u.hasOwnProperty(n) ? "property" : h.hasOwnProperty(n) ? "string-2" : v.hasOwnProperty(n) ? "atom" : g.hasOwnProperty(n) ? "keyword" : "error"
                    }
                    return i.context.type
                },
                atComponentBlock: function (e, t, i) {
                    return "}" == e ? P(e, t, i) : "{" == e ? S(i) && x(i, t, b ? "block" : "top", !1) : ("word" == e && (s = "error"), i.context.type)
                },
                atBlock_parens: function (e, t, i) {
                    return ")" == e ? S(i) : "{" == e || "}" == e ? P(e, t, i, 2) : O.atBlock(e, t, i)
                },
                restricted_atBlock_before: function (e, t, i) {
                    return "{" == e ? x(i, t, "restricted_atBlock") : "word" == e && "@counter-style" == i.stateArg ? (s = "variable", "restricted_atBlock_before") : M(e, t, i)
                },
                restricted_atBlock: function (e, t, i) {
                    return "}" == e ? (i.stateArg = null, S(i)) : "word" == e ? (s = "@font-face" == i.stateArg && !f.hasOwnProperty(t.current().toLowerCase()) || "@counter-style" == i.stateArg && !m.hasOwnProperty(t.current().toLowerCase()) ? "error" : "property", "maybeprop") : "restricted_atBlock"
                },
                keyframes: function (e, t, i) {
                    return "word" == e ? (s = "variable", "keyframes") : "{" == e ? x(i, t, "top") : M(e, t, i)
                },
                at: function (e, t, i) {
                    return ";" == e ? S(i) : "{" == e || "}" == e ? P(e, t, i) : ("word" == e ? s = "tag" : "hash" == e && (s = "builtin"), "at")
                },
                interpolation: function (e, t, i) {
                    return "}" == e ? S(i) : "{" == e || ";" == e ? P(e, t, i) : ("word" == e ? s = "variable" : "variable" != e && "(" != e && ")" != e && (s = "error"), "interpolation")
                }
            };
            return {
                startState: function (e) {
                    return {
                        tokenize: null,
                        state: n ? "block" : "top",
                        stateArg: null,
                        context: new E(n ? "block" : "top", e || 0, null)
                    }
                },
                token: function (e, t) {
                    if (!t.tokenize && e.eatSpace()) return null;
                    var i = (t.tokenize || T)(e, t);
                    return i && "object" == typeof i && (a = i[1], i = i[0]), s = i, "comment" != a && (t.state = O[t.state](a, e, t)), s
                },
                indent: function (e, t) {
                    var i = e.context,
                        n = t && t.charAt(0),
                        a = i.indent;
                    return "prop" != i.type || "}" != n && ")" != n || (i = i.prev), i.prev && ("}" != n || "block" != i.type && "top" != i.type && "interpolation" != i.type && "restricted_atBlock" != i.type ? (")" != n || "parens" != i.type && "atBlock_parens" != i.type) && ("{" != n || "at" != i.type && "atBlock" != i.type) || (a = Math.max(0, i.indent - o)) : a = (i = i.prev).indent), a
                },
                electricChars: "}",
                blockCommentStart: "/*",
                blockCommentEnd: "*/",
                blockCommentContinue: " * ",
                lineComment: y,
                fold: "brace"
            }
        }));
        var i = ["domain", "regexp", "url", "url-prefix"],
            n = t(i),
            a = ["all", "aural", "braille", "handheld", "print", "projection", "screen", "tty", "tv", "embossed"],
            s = t(a),
            o = ["width", "min-width", "max-width", "height", "min-height", "max-height", "device-width", "min-device-width", "max-device-width", "device-height", "min-device-height", "max-device-height", "aspect-ratio", "min-aspect-ratio", "max-aspect-ratio", "device-aspect-ratio", "min-device-aspect-ratio", "max-device-aspect-ratio", "color", "min-color", "max-color", "color-index", "min-color-index", "max-color-index", "monochrome", "min-monochrome", "max-monochrome", "resolution", "min-resolution", "max-resolution", "scan", "grid", "orientation", "device-pixel-ratio", "min-device-pixel-ratio", "max-device-pixel-ratio", "pointer", "any-pointer", "hover", "any-hover"],
            r = t(o),
            l = ["landscape", "portrait", "none", "coarse", "fine", "on-demand", "hover", "interlace", "progressive"],
            c = t(l),
            d = ["align-content", "align-items", "align-self", "alignment-adjust", "alignment-baseline", "anchor-point", "animation", "animation-delay", "animation-direction", "animation-duration", "animation-fill-mode", "animation-iteration-count", "animation-name", "animation-play-state", "animation-timing-function", "appearance", "azimuth", "backface-visibility", "background", "background-attachment", "background-blend-mode", "background-clip", "background-color", "background-image", "background-origin", "background-position", "background-repeat", "background-size", "baseline-shift", "binding", "bleed", "bookmark-label", "bookmark-level", "bookmark-state", "bookmark-target", "border", "border-bottom", "border-bottom-color", "border-bottom-left-radius", "border-bottom-right-radius", "border-bottom-style", "border-bottom-width", "border-collapse", "border-color", "border-image", "border-image-outset", "border-image-repeat", "border-image-slice", "border-image-source", "border-image-width", "border-left", "border-left-color", "border-left-style", "border-left-width", "border-radius", "border-right", "border-right-color", "border-right-style", "border-right-width", "border-spacing", "border-style", "border-top", "border-top-color", "border-top-left-radius", "border-top-right-radius", "border-top-style", "border-top-width", "border-width", "bottom", "box-decoration-break", "box-shadow", "box-sizing", "break-after", "break-before", "break-inside", "caption-side", "caret-color", "clear", "clip", "color", "color-profile", "column-count", "column-fill", "column-gap", "column-rule", "column-rule-color", "column-rule-style", "column-rule-width", "column-span", "column-width", "columns", "content", "counter-increment", "counter-reset", "crop", "cue", "cue-after", "cue-before", "cursor", "direction", "display", "dominant-baseline", "drop-initial-after-adjust", "drop-initial-after-align", "drop-initial-before-adjust", "drop-initial-before-align", "drop-initial-size", "drop-initial-value", "elevation", "empty-cells", "fit", "fit-position", "flex", "flex-basis", "flex-direction", "flex-flow", "flex-grow", "flex-shrink", "flex-wrap", "float", "float-offset", "flow-from", "flow-into", "font", "font-feature-settings", "font-family", "font-kerning", "font-language-override", "font-size", "font-size-adjust", "font-stretch", "font-style", "font-synthesis", "font-variant", "font-variant-alternates", "font-variant-caps", "font-variant-east-asian", "font-variant-ligatures", "font-variant-numeric", "font-variant-position", "font-weight", "grid", "grid-area", "grid-auto-columns", "grid-auto-flow", "grid-auto-rows", "grid-column", "grid-column-end", "grid-column-gap", "grid-column-start", "grid-gap", "grid-row", "grid-row-end", "grid-row-gap", "grid-row-start", "grid-template", "grid-template-areas", "grid-template-columns", "grid-template-rows", "hanging-punctuation", "height", "hyphens", "icon", "image-orientation", "image-rendering", "image-resolution", "inline-box-align", "justify-content", "justify-items", "justify-self", "left", "letter-spacing", "line-break", "line-height", "line-stacking", "line-stacking-ruby", "line-stacking-shift", "line-stacking-strategy", "list-style", "list-style-image", "list-style-position", "list-style-type", "margin", "margin-bottom", "margin-left", "margin-right", "margin-top", "marks", "marquee-direction", "marquee-loop", "marquee-play-count", "marquee-speed", "marquee-style", "max-height", "max-width", "min-height", "min-width", "mix-blend-mode", "move-to", "nav-down", "nav-index", "nav-left", "nav-right", "nav-up", "object-fit", "object-position", "opacity", "order", "orphans", "outline", "outline-color", "outline-offset", "outline-style", "outline-width", "overflow", "overflow-style", "overflow-wrap", "overflow-x", "overflow-y", "padding", "padding-bottom", "padding-left", "padding-right", "padding-top", "page", "page-break-after", "page-break-before", "page-break-inside", "page-policy", "pause", "pause-after", "pause-before", "perspective", "perspective-origin", "pitch", "pitch-range", "place-content", "place-items", "place-self", "play-during", "position", "presentation-level", "punctuation-trim", "quotes", "region-break-after", "region-break-before", "region-break-inside", "region-fragment", "rendering-intent", "resize", "rest", "rest-after", "rest-before", "richness", "right", "rotation", "rotation-point", "ruby-align", "ruby-overhang", "ruby-position", "ruby-span", "shape-image-threshold", "shape-inside", "shape-margin", "shape-outside", "size", "speak", "speak-as", "speak-header", "speak-numeral", "speak-punctuation", "speech-rate", "stress", "string-set", "tab-size", "table-layout", "target", "target-name", "target-new", "target-position", "text-align", "text-align-last", "text-decoration", "text-decoration-color", "text-decoration-line", "text-decoration-skip", "text-decoration-style", "text-emphasis", "text-emphasis-color", "text-emphasis-position", "text-emphasis-style", "text-height", "text-indent", "text-justify", "text-outline", "text-overflow", "text-shadow", "text-size-adjust", "text-space-collapse", "text-transform", "text-underline-position", "text-wrap", "top", "transform", "transform-origin", "transform-style", "transition", "transition-delay", "transition-duration", "transition-property", "transition-timing-function", "unicode-bidi", "user-select", "vertical-align", "visibility", "voice-balance", "voice-duration", "voice-family", "voice-pitch", "voice-range", "voice-rate", "voice-stress", "voice-volume", "volume", "white-space", "widows", "width", "will-change", "word-break", "word-spacing", "word-wrap", "z-index", "clip-path", "clip-rule", "mask", "enable-background", "filter", "flood-color", "flood-opacity", "lighting-color", "stop-color", "stop-opacity", "pointer-events", "color-interpolation", "color-interpolation-filters", "color-rendering", "fill", "fill-opacity", "fill-rule", "image-rendering", "marker", "marker-end", "marker-mid", "marker-start", "shape-rendering", "stroke", "stroke-dasharray", "stroke-dashoffset", "stroke-linecap", "stroke-linejoin", "stroke-miterlimit", "stroke-opacity", "stroke-width", "text-rendering", "baseline-shift", "dominant-baseline", "glyph-orientation-horizontal", "glyph-orientation-vertical", "text-anchor", "writing-mode"],
            p = t(d),
            u = ["scrollbar-arrow-color", "scrollbar-base-color", "scrollbar-dark-shadow-color", "scrollbar-face-color", "scrollbar-highlight-color", "scrollbar-shadow-color", "scrollbar-3d-light-color", "scrollbar-track-color", "shape-inside", "searchfield-cancel-button", "searchfield-decoration", "searchfield-results-button", "searchfield-results-decoration", "zoom"],
            h = t(u),
            f = t(["font-family", "src", "unicode-range", "font-variant", "font-feature-settings", "font-stretch", "font-weight", "font-style"]),
            m = t(["additive-symbols", "fallback", "negative", "pad", "prefix", "range", "speak-as", "suffix", "symbols", "system"]),
            g = ["aliceblue", "antiquewhite", "aqua", "aquamarine", "azure", "beige", "bisque", "black", "blanchedalmond", "blue", "blueviolet", "brown", "burlywood", "cadetblue", "chartreuse", "chocolate", "coral", "cornflowerblue", "cornsilk", "crimson", "cyan", "darkblue", "darkcyan", "darkgoldenrod", "darkgray", "darkgreen", "darkkhaki", "darkmagenta", "darkolivegreen", "darkorange", "darkorchid", "darkred", "darksalmon", "darkseagreen", "darkslateblue", "darkslategray", "darkturquoise", "darkviolet", "deeppink", "deepskyblue", "dimgray", "dodgerblue", "firebrick", "floralwhite", "forestgreen", "fuchsia", "gainsboro", "ghostwhite", "gold", "goldenrod", "gray", "grey", "green", "greenyellow", "honeydew", "hotpink", "indianred", "indigo", "ivory", "khaki", "lavender", "lavenderblush", "lawngreen", "lemonchiffon", "lightblue", "lightcoral", "lightcyan", "lightgoldenrodyellow", "lightgray", "lightgreen", "lightpink", "lightsalmon", "lightseagreen", "lightskyblue", "lightslategray", "lightsteelblue", "lightyellow", "lime", "limegreen", "linen", "magenta", "maroon", "mediumaquamarine", "mediumblue", "mediumorchid", "mediumpurple", "mediumseagreen", "mediumslateblue", "mediumspringgreen", "mediumturquoise", "mediumvioletred", "midnightblue", "mintcream", "mistyrose", "moccasin", "navajowhite", "navy", "oldlace", "olive", "olivedrab", "orange", "orangered", "orchid", "palegoldenrod", "palegreen", "paleturquoise", "palevioletred", "papayawhip", "peachpuff", "peru", "pink", "plum", "powderblue", "purple", "rebeccapurple", "red", "rosybrown", "royalblue", "saddlebrown", "salmon", "sandybrown", "seagreen", "seashell", "sienna", "silver", "skyblue", "slateblue", "slategray", "snow", "springgreen", "steelblue", "tan", "teal", "thistle", "tomato", "turquoise", "violet", "wheat", "white", "whitesmoke", "yellow", "yellowgreen"],
            v = t(g),
            b = ["above", "absolute", "activeborder", "additive", "activecaption", "afar", "after-white-space", "ahead", "alias", "all", "all-scroll", "alphabetic", "alternate", "always", "amharic", "amharic-abegede", "antialiased", "appworkspace", "arabic-indic", "armenian", "asterisks", "attr", "auto", "auto-flow", "avoid", "avoid-column", "avoid-page", "avoid-region", "background", "backwards", "baseline", "below", "bidi-override", "binary", "bengali", "blink", "block", "block-axis", "bold", "bolder", "border", "border-box", "both", "bottom", "break", "break-all", "break-word", "bullets", "button", "button-bevel", "buttonface", "buttonhighlight", "buttonshadow", "buttontext", "calc", "cambodian", "capitalize", "caps-lock-indicator", "caption", "captiontext", "caret", "cell", "center", "checkbox", "circle", "cjk-decimal", "cjk-earthly-branch", "cjk-heavenly-stem", "cjk-ideographic", "clear", "clip", "close-quote", "col-resize", "collapse", "color", "color-burn", "color-dodge", "column", "column-reverse", "compact", "condensed", "contain", "content", "contents", "content-box", "context-menu", "continuous", "copy", "counter", "counters", "cover", "crop", "cross", "crosshair", "currentcolor", "cursive", "cyclic", "darken", "dashed", "decimal", "decimal-leading-zero", "default", "default-button", "dense", "destination-atop", "destination-in", "destination-out", "destination-over", "devanagari", "difference", "disc", "discard", "disclosure-closed", "disclosure-open", "document", "dot-dash", "dot-dot-dash", "dotted", "double", "down", "e-resize", "ease", "ease-in", "ease-in-out", "ease-out", "element", "ellipse", "ellipsis", "embed", "end", "ethiopic", "ethiopic-abegede", "ethiopic-abegede-am-et", "ethiopic-abegede-gez", "ethiopic-abegede-ti-er", "ethiopic-abegede-ti-et", "ethiopic-halehame-aa-er", "ethiopic-halehame-aa-et", "ethiopic-halehame-am-et", "ethiopic-halehame-gez", "ethiopic-halehame-om-et", "ethiopic-halehame-sid-et", "ethiopic-halehame-so-et", "ethiopic-halehame-ti-er", "ethiopic-halehame-ti-et", "ethiopic-halehame-tig", "ethiopic-numeric", "ew-resize", "exclusion", "expanded", "extends", "extra-condensed", "extra-expanded", "fantasy", "fast", "fill", "fixed", "flat", "flex", "flex-end", "flex-start", "footnotes", "forwards", "from", "geometricPrecision", "georgian", "graytext", "grid", "groove", "gujarati", "gurmukhi", "hand", "hangul", "hangul-consonant", "hard-light", "hebrew", "help", "hidden", "hide", "higher", "highlight", "highlighttext", "hiragana", "hiragana-iroha", "horizontal", "hsl", "hsla", "hue", "icon", "ignore", "inactiveborder", "inactivecaption", "inactivecaptiontext", "infinite", "infobackground", "infotext", "inherit", "initial", "inline", "inline-axis", "inline-block", "inline-flex", "inline-grid", "inline-table", "inset", "inside", "intrinsic", "invert", "italic", "japanese-formal", "japanese-informal", "justify", "kannada", "katakana", "katakana-iroha", "keep-all", "khmer", "korean-hangul-formal", "korean-hanja-formal", "korean-hanja-informal", "landscape", "lao", "large", "larger", "left", "level", "lighter", "lighten", "line-through", "linear", "linear-gradient", "lines", "list-item", "listbox", "listitem", "local", "logical", "loud", "lower", "lower-alpha", "lower-armenian", "lower-greek", "lower-hexadecimal", "lower-latin", "lower-norwegian", "lower-roman", "lowercase", "ltr", "luminosity", "malayalam", "match", "matrix", "matrix3d", "media-controls-background", "media-current-time-display", "media-fullscreen-button", "media-mute-button", "media-play-button", "media-return-to-realtime-button", "media-rewind-button", "media-seek-back-button", "media-seek-forward-button", "media-slider", "media-sliderthumb", "media-time-remaining-display", "media-volume-slider", "media-volume-slider-container", "media-volume-sliderthumb", "medium", "menu", "menulist", "menulist-button", "menulist-text", "menulist-textfield", "menutext", "message-box", "middle", "min-intrinsic", "mix", "mongolian", "monospace", "move", "multiple", "multiply", "myanmar", "n-resize", "narrower", "ne-resize", "nesw-resize", "no-close-quote", "no-drop", "no-open-quote", "no-repeat", "none", "normal", "not-allowed", "nowrap", "ns-resize", "numbers", "numeric", "nw-resize", "nwse-resize", "oblique", "octal", "opacity", "open-quote", "optimizeLegibility", "optimizeSpeed", "oriya", "oromo", "outset", "outside", "outside-shape", "overlay", "overline", "padding", "padding-box", "painted", "page", "paused", "persian", "perspective", "plus-darker", "plus-lighter", "pointer", "polygon", "portrait", "pre", "pre-line", "pre-wrap", "preserve-3d", "progress", "push-button", "radial-gradient", "radio", "read-only", "read-write", "read-write-plaintext-only", "rectangle", "region", "relative", "repeat", "repeating-linear-gradient", "repeating-radial-gradient", "repeat-x", "repeat-y", "reset", "reverse", "rgb", "rgba", "ridge", "right", "rotate", "rotate3d", "rotateX", "rotateY", "rotateZ", "round", "row", "row-resize", "row-reverse", "rtl", "run-in", "running", "s-resize", "sans-serif", "saturation", "scale", "scale3d", "scaleX", "scaleY", "scaleZ", "screen", "scroll", "scrollbar", "scroll-position", "se-resize", "searchfield", "searchfield-cancel-button", "searchfield-decoration", "searchfield-results-button", "searchfield-results-decoration", "self-start", "self-end", "semi-condensed", "semi-expanded", "separate", "serif", "show", "sidama", "simp-chinese-formal", "simp-chinese-informal", "single", "skew", "skewX", "skewY", "skip-white-space", "slide", "slider-horizontal", "slider-vertical", "sliderthumb-horizontal", "sliderthumb-vertical", "slow", "small", "small-caps", "small-caption", "smaller", "soft-light", "solid", "somali", "source-atop", "source-in", "source-out", "source-over", "space", "space-around", "space-between", "space-evenly", "spell-out", "square", "square-button", "start", "static", "status-bar", "stretch", "stroke", "sub", "subpixel-antialiased", "super", "sw-resize", "symbolic", "symbols", "system-ui", "table", "table-caption", "table-cell", "table-column", "table-column-group", "table-footer-group", "table-header-group", "table-row", "table-row-group", "tamil", "telugu", "text", "text-bottom", "text-top", "textarea", "textfield", "thai", "thick", "thin", "threeddarkshadow", "threedface", "threedhighlight", "threedlightshadow", "threedshadow", "tibetan", "tigre", "tigrinya-er", "tigrinya-er-abegede", "tigrinya-et", "tigrinya-et-abegede", "to", "top", "trad-chinese-formal", "trad-chinese-informal", "transform", "translate", "translate3d", "translateX", "translateY", "translateZ", "transparent", "ultra-condensed", "ultra-expanded", "underline", "unset", "up", "upper-alpha", "upper-armenian", "upper-greek", "upper-hexadecimal", "upper-latin", "upper-norwegian", "upper-roman", "uppercase", "urdu", "url", "var", "vertical", "vertical-text", "visible", "visibleFill", "visiblePainted", "visibleStroke", "visual", "w-resize", "wait", "wave", "wider", "window", "windowframe", "windowtext", "words", "wrap", "wrap-reverse", "x-large", "x-small", "xor", "xx-large", "xx-small"],
            y = t(b),
            w = i.concat(a).concat(o).concat(l).concat(d).concat(u).concat(g).concat(b);

        function _(e, t) {
            for (var i, n = !1; null != (i = e.next());) {
                if (n && "/" == i) {
                    t.tokenize = null;
                    break
                }
                n = "*" == i
            }
            return ["comment", "comment"]
        }
        e.registerHelper("hintWords", "css", w), e.defineMIME("text/css", {
            documentTypes: n,
            mediaTypes: s,
            mediaFeatures: r,
            mediaValueKeywords: c,
            propertyKeywords: p,
            nonStandardPropertyKeywords: h,
            fontProperties: f,
            counterDescriptors: m,
            colorKeywords: v,
            valueKeywords: y,
            tokenHooks: {
                "/": function (e, t) {
                    return !!e.eat("*") && (t.tokenize = _, _(e, t))
                }
            },
            name: "css"
        }), e.defineMIME("text/x-scss", {
            mediaTypes: s,
            mediaFeatures: r,
            mediaValueKeywords: c,
            propertyKeywords: p,
            nonStandardPropertyKeywords: h,
            colorKeywords: v,
            valueKeywords: y,
            fontProperties: f,
            allowNested: !0,
            lineComment: "//",
            tokenHooks: {
                "/": function (e, t) {
                    return e.eat("/") ? (e.skipToEnd(), ["comment", "comment"]) : e.eat("*") ? (t.tokenize = _, _(e, t)) : ["operator", "operator"]
                },
                ":": function (e) {
                    return !!e.match(/\s*\{/, !1) && [null, null]
                },
                $: function (e) {
                    return e.match(/^[\w-]+/), e.match(/^\s*:/, !1) ? ["variable-2", "variable-definition"] : ["variable-2", "variable"]
                },
                "#": function (e) {
                    return !!e.eat("{") && [null, "interpolation"]
                }
            },
            name: "css",
            helperType: "scss"
        }), e.defineMIME("text/x-less", {
            mediaTypes: s,
            mediaFeatures: r,
            mediaValueKeywords: c,
            propertyKeywords: p,
            nonStandardPropertyKeywords: h,
            colorKeywords: v,
            valueKeywords: y,
            fontProperties: f,
            allowNested: !0,
            lineComment: "//",
            tokenHooks: {
                "/": function (e, t) {
                    return e.eat("/") ? (e.skipToEnd(), ["comment", "comment"]) : e.eat("*") ? (t.tokenize = _, _(e, t)) : ["operator", "operator"]
                },
                "@": function (e) {
                    return e.eat("{") ? [null, "interpolation"] : !e.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i, !1) && (e.eatWhile(/[\w\\\-]/), e.match(/^\s*:/, !1) ? ["variable-2", "variable-definition"] : ["variable-2", "variable"])
                },
                "&": function () {
                    return ["atom", "atom"]
                }
            },
            name: "css",
            helperType: "less"
        }), e.defineMIME("text/x-gss", {
            documentTypes: n,
            mediaTypes: s,
            mediaFeatures: r,
            propertyKeywords: p,
            nonStandardPropertyKeywords: h,
            fontProperties: f,
            counterDescriptors: m,
            colorKeywords: v,
            valueKeywords: y,
            supportsAtComponent: !0,
            tokenHooks: {
                "/": function (e, t) {
                    return !!e.eat("*") && (t.tokenize = _, _(e, t))
                }
            },
            name: "css",
            helperType: "gss"
        })
    })),
    function (e) {
        "object" == typeof exports && "object" == typeof module ? e(require("../../lib/codemirror"), require("../xml/xml"), require("../javascript/javascript"), require("../css/css")) : "function" == typeof define && define.amd ? define(["../../lib/codemirror", "../xml/xml", "../javascript/javascript", "../css/css"], e) : e(CodeMirror)
    }((function (e) {
        "use strict";
        var t = {
            script: [
                ["lang", /(javascript|babel)/i, "javascript"],
                ["type", /^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i, "javascript"],
                ["type", /./, "text/plain"],
                [null, null, "javascript"]
            ],
            style: [
                ["lang", /^css$/i, "css"],
                ["type", /^(text\/)?(x-)?(stylesheet|css)$/i, "css"],
                ["type", /./, "text/plain"],
                [null, null, "css"]
            ]
        };
        var i = {};

        function n(e, t) {
            var n = e.match(function (e) {
                var t = i[e];
                return t || (i[e] = new RegExp("\\s+" + e + "\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*"))
            }(t));
            return n ? /^\s*(.*?)\s*$/.exec(n[2])[1] : ""
        }

        function a(e, t) {
            return new RegExp((t ? "^" : "") + "</s*" + e + "s*>", "i")
        }

        function s(e, t) {
            for (var i in e)
                for (var n = t[i] || (t[i] = []), a = e[i], s = a.length - 1; s >= 0; s--) n.unshift(a[s])
        }
        e.defineMode("htmlmixed", (function (i, o) {
            var r = e.getMode(i, {
                name: "xml",
                htmlMode: !0,
                multilineTagIndentFactor: o.multilineTagIndentFactor,
                multilineTagIndentPastTag: o.multilineTagIndentPastTag
            }),
                l = {},
                c = o && o.tags,
                d = o && o.scriptTypes;
            if (s(t, l), c && s(c, l), d)
                for (var p = d.length - 1; p >= 0; p--) l.script.unshift(["type", d[p].matches, d[p].mode]);

            function u(t, s) {
                var o, c = r.token(t, s.htmlState),
                    d = /\btag\b/.test(c);
                if (d && !/[<>\s\/]/.test(t.current()) && (o = s.htmlState.tagName && s.htmlState.tagName.toLowerCase()) && l.hasOwnProperty(o)) s.inTag = o + " ";
                else if (s.inTag && d && />$/.test(t.current())) {
                    var p = /^([\S]+) (.*)/.exec(s.inTag);
                    s.inTag = null;
                    var h = ">" == t.current() && function (e, t) {
                        for (var i = 0; i < e.length; i++) {
                            var a = e[i];
                            if (!a[0] || a[1].test(n(t, a[0]))) return a[2]
                        }
                    }(l[p[1]], p[2]),
                        f = e.getMode(i, h),
                        m = a(p[1], !0),
                        g = a(p[1], !1);
                    s.token = function (e, t) {
                        return e.match(m, !1) ? (t.token = u, t.localState = t.localMode = null, null) : function (e, t, i) {
                            var n = e.current(),
                                a = n.search(t);
                            return a > -1 ? e.backUp(n.length - a) : n.match(/<\/?$/) && (e.backUp(n.length), e.match(t, !1) || e.match(n)), i
                        }(e, g, t.localMode.token(e, t.localState))
                    }, s.localMode = f, s.localState = e.startState(f, r.indent(s.htmlState, "", ""))
                } else s.inTag && (s.inTag += t.current(), t.eol() && (s.inTag += " "));
                return c
            }
            return {
                startState: function () {
                    return {
                        token: u,
                        inTag: null,
                        localMode: null,
                        localState: null,
                        htmlState: e.startState(r)
                    }
                },
                copyState: function (t) {
                    var i;
                    return t.localState && (i = e.copyState(t.localMode, t.localState)), {
                        token: t.token,
                        inTag: t.inTag,
                        localMode: t.localMode,
                        localState: i,
                        htmlState: e.copyState(r, t.htmlState)
                    }
                },
                token: function (e, t) {
                    return t.token(e, t)
                },
                indent: function (t, i, n) {
                    return !t.localMode || /^\s*<\//.test(i) ? r.indent(t.htmlState, i, n) : t.localMode.indent ? t.localMode.indent(t.localState, i, n) : e.Pass
                },
                innerMode: function (e) {
                    return {
                        state: e.localState || e.htmlState,
                        mode: e.localMode || r
                    }
                }
            }
        }), "xml", "javascript", "css"), e.defineMIME("text/html", "htmlmixed")
    })),
    function (e) {
        "object" == typeof exports && "object" == typeof module ? e(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define(["../../lib/codemirror"], e) : e(CodeMirror)
    }((function (e) {
        "use strict";
        e.defineMode("javascript", (function (t, i) {
            var n, a, s = t.indentUnit,
                o = i.statementIndent,
                r = i.jsonld,
                l = i.json || r,
                c = i.typescript,
                d = i.wordCharacters || /[\w$\xa1-\uffff]/,
                p = function () {
                    function e(e) {
                        return {
                            type: e,
                            style: "keyword"
                        }
                    }
                    var t = e("keyword a"),
                        i = e("keyword b"),
                        n = e("keyword c"),
                        a = e("keyword d"),
                        s = e("operator"),
                        o = {
                            type: "atom",
                            style: "atom"
                        };
                    return {
                        if: e("if"),
                        while: t,
                        with: t,
                        else: i,
                        do: i,
                        try: i,
                        finally: i,
                        return: a,
                        break: a,
                        continue: a,
                        new: e("new"),
                        delete: n,
                        void: n,
                        throw: n,
                        debugger: e("debugger"),
                        var: e("var"),
                        const: e("var"),
                        let: e("var"),
                        function: e("function"),
                        catch: e("catch"),
                        for: e("for"),
                        switch: e("switch"),
                        case: e("case"),
                        default: e("default"),
                        in: s,
                        typeof: s,
                        instanceof: s,
                        true: o,
                        false: o,
                        null: o,
                        undefined: o,
                        NaN: o,
                        Infinity: o,
                        this: e("this"),
                        class: e("class"),
                        super: e("atom"),
                        yield: n,
                        export: e("export"),
                        import: e("import"),
                        extends: n,
                        await: n
                    }
                }(),
                u = /[+\-*&%=<>!?|~^@]/,
                h = /^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;

            function f(e, t, i) {
                return n = e, a = i, t
            }

            function m(e, t) {
                var i, n = e.next();
                if ('"' == n || "'" == n) return t.tokenize = (i = n, function (e, t) {
                    var n, a = !1;
                    if (r && "@" == e.peek() && e.match(h)) return t.tokenize = m, f("jsonld-keyword", "meta");
                    for (; null != (n = e.next()) && (n != i || a);) a = !a && "\\" == n;
                    return a || (t.tokenize = m), f("string", "string")
                }), t.tokenize(e, t);
                if ("." == n && e.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/)) return f("number", "number");
                if ("." == n && e.match("..")) return f("spread", "meta");
                if (/[\[\]{}\(\),;\:\.]/.test(n)) return f(n);
                if ("=" == n && e.eat(">")) return f("=>", "operator");
                if ("0" == n && e.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/)) return f("number", "number");
                if (/\d/.test(n)) return e.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/), f("number", "number");
                if ("/" == n) return e.eat("*") ? (t.tokenize = g, g(e, t)) : e.eat("/") ? (e.skipToEnd(), f("comment", "comment")) : Ke(e, t, 1) ? (function (e) {
                    for (var t, i = !1, n = !1; null != (t = e.next());) {
                        if (!i) {
                            if ("/" == t && !n) return;
                            "[" == t ? n = !0 : n && "]" == t && (n = !1)
                        }
                        i = !i && "\\" == t
                    }
                }(e), e.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/), f("regexp", "string-2")) : (e.eat("="), f("operator", "operator", e.current()));
                if ("`" == n) return t.tokenize = v, v(e, t);
                if ("#" == n) return e.skipToEnd(), f("error", "error");
                if ("<" == n && e.match("!--") || "-" == n && e.match("->")) return e.skipToEnd(), f("comment", "comment");
                if (u.test(n)) return ">" == n && t.lexical && ">" == t.lexical.type || (e.eat("=") ? "!" != n && "=" != n || e.eat("=") : /[<>*+\-]/.test(n) && (e.eat(n), ">" == n && e.eat(n))), f("operator", "operator", e.current());
                if (d.test(n)) {
                    e.eatWhile(d);
                    var a = e.current();
                    if ("." != t.lastType) {
                        if (p.propertyIsEnumerable(a)) {
                            var s = p[a];
                            return f(s.type, s.style, a)
                        }
                        if ("async" == a && e.match(/^(\s|\/\*.*?\*\/)*[\[\(\w]/, !1)) return f("async", "keyword", a)
                    }
                    return f("variable", "variable", a)
                }
            }

            function g(e, t) {
                for (var i, n = !1; i = e.next();) {
                    if ("/" == i && n) {
                        t.tokenize = m;
                        break
                    }
                    n = "*" == i
                }
                return f("comment", "comment")
            }

            function v(e, t) {
                for (var i, n = !1; null != (i = e.next());) {
                    if (!n && ("`" == i || "$" == i && e.eat("{"))) {
                        t.tokenize = m;
                        break
                    }
                    n = !n && "\\" == i
                }
                return f("quasi", "string-2", e.current())
            }
            var b = "([{}])";

            function y(e, t) {
                t.fatArrowAt && (t.fatArrowAt = null);
                var i = e.string.indexOf("=>", e.start);
                if (!(i < 0)) {
                    if (c) {
                        var n = /:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(e.string.slice(e.start, i));
                        n && (i = n.index)
                    }
                    for (var a = 0, s = !1, o = i - 1; o >= 0; --o) {
                        var r = e.string.charAt(o),
                            l = b.indexOf(r);
                        if (l >= 0 && l < 3) {
                            if (!a) {
                                ++o;
                                break
                            }
                            if (0 == --a) {
                                "(" == r && (s = !0);
                                break
                            }
                        } else if (l >= 3 && l < 6) ++a;
                        else if (d.test(r)) s = !0;
                        else if (/["'\/`]/.test(r))
                            for (; ; --o) {
                                if (0 == o) return;
                                if (e.string.charAt(o - 1) == r && "\\" != e.string.charAt(o - 2)) {
                                    o--;
                                    break
                                }
                            } else if (s && !a) {
                                ++o;
                                break
                            }
                    }
                    s && !a && (t.fatArrowAt = o)
                }
            }
            var w = {
                atom: !0,
                number: !0,
                variable: !0,
                string: !0,
                regexp: !0,
                this: !0,
                "jsonld-keyword": !0
            };

            function _(e, t, i, n, a, s) {
                this.indented = e, this.column = t, this.type = i, this.prev = a, this.info = s, null != n && (this.align = n)
            }

            function T(e, t) {
                for (var i = e.localVars; i; i = i.next)
                    if (i.name == t) return !0;
                for (var n = e.context; n; n = n.prev)
                    for (i = n.vars; i; i = i.next)
                        if (i.name == t) return !0
            }
            var C = {
                state: null,
                column: null,
                marked: null,
                cc: null
            };

            function k() {
                for (var e = arguments.length - 1; e >= 0; e--) C.cc.push(arguments[e])
            }

            function E() {
                return k.apply(null, arguments), !0
            }

            function x(e, t) {
                for (var i = t; i; i = i.next)
                    if (i.name == e) return !0;
                return !1
            }

            function S(e) {
                var t = C.state;
                if (C.marked = "def", t.context)
                    if ("var" == t.lexical.info && t.context && t.context.block) {
                        var n = M(e, t.context);
                        if (null != n) return void (t.context = n)
                    } else if (!x(e, t.localVars)) return void (t.localVars = new O(e, t.localVars));
                i.globalVars && !x(e, t.globalVars) && (t.globalVars = new O(e, t.globalVars))
            }

            function M(e, t) {
                if (t) {
                    if (t.block) {
                        var i = M(e, t.prev);
                        return i ? i == t.prev ? t : new I(i, t.vars, !0) : null
                    }
                    return x(e, t.vars) ? t : new I(t.prev, new O(e, t.vars), !1)
                }
                return null
            }

            function P(e) {
                return "public" == e || "private" == e || "protected" == e || "abstract" == e || "readonly" == e
            }

            function I(e, t, i) {
                this.prev = e, this.vars = t, this.block = i
            }

            function O(e, t) {
                this.name = e, this.next = t
            }
            var A = new O("this", new O("arguments", null));

            function L() {
                C.state.context = new I(C.state.context, C.state.localVars, !1), C.state.localVars = A
            }

            function D() {
                C.state.context = new I(C.state.context, C.state.localVars, !0), C.state.localVars = null
            }

            function N() {
                C.state.localVars = C.state.context.vars, C.state.context = C.state.context.prev
            }

            function R(e, t) {
                var i = function () {
                    var i = C.state,
                        n = i.indented;
                    if ("stat" == i.lexical.type) n = i.lexical.indented;
                    else
                        for (var a = i.lexical; a && ")" == a.type && a.align; a = a.prev) n = a.indented;
                    i.lexical = new _(n, C.stream.column(), e, null, i.lexical, t)
                };
                return i.lex = !0, i
            }

            function W() {
                var e = C.state;
                e.lexical.prev && (")" == e.lexical.type && (e.indented = e.lexical.indented), e.lexical = e.lexical.prev)
            }

            function F(e) {
                return function t(i) {
                    return i == e ? E() : ";" == e || "}" == i || ")" == i || "]" == i ? k() : E(t)
                }
            }

            function B(e, t) {
                return "var" == e ? E(R("vardef", t), we, F(";"), W) : "keyword a" == e ? E(R("form"), G, B, W) : "keyword b" == e ? E(R("form"), B, W) : "keyword d" == e ? C.stream.match(/^\s*$/, !1) ? E() : E(R("stat"), q, F(";"), W) : "debugger" == e ? E(F(";")) : "{" == e ? E(R("}"), D, re, W, N) : ";" == e ? E() : "if" == e ? ("else" == C.state.lexical.info && C.state.cc[C.state.cc.length - 1] == W && C.state.cc.pop()(), E(R("form"), G, B, W, xe)) : "function" == e ? E(Ie) : "for" == e ? E(R("form"), Se, B, W) : "class" == e || c && "interface" == t ? (C.marked = "keyword", E(R("form", "class" == e ? e : t), Ne, W)) : "variable" == e ? c && "declare" == t ? (C.marked = "keyword", E(B)) : c && ("module" == t || "enum" == t || "type" == t) && C.stream.match(/^\s*\w/, !1) ? (C.marked = "keyword", "enum" == t ? E(Ve) : "type" == t ? E(Ae, F("operator"), ue, F(";")) : E(R("form"), _e, F("{"), R("}"), re, W, W)) : c && "namespace" == t ? (C.marked = "keyword", E(R("form"), H, B, W)) : c && "abstract" == t ? (C.marked = "keyword", E(B)) : E(R("stat"), ee) : "switch" == e ? E(R("form"), G, F("{"), R("}", "switch"), D, re, W, W, N) : "case" == e ? E(H, F(":")) : "default" == e ? E(F(":")) : "catch" == e ? E(R("form"), L, U, B, W, N) : "export" == e ? E(R("stat"), Be, W) : "import" == e ? E(R("stat"), He, W) : "async" == e ? E(B) : "@" == t ? E(H, B) : k(R("stat"), H, F(";"), W)
            }

            function U(e) {
                if ("(" == e) return E(Le, F(")"))
            }

            function H(e, t) {
                return $(e, t, !1)
            }

            function z(e, t) {
                return $(e, t, !0)
            }

            function G(e) {
                return "(" != e ? k() : E(R(")"), H, F(")"), W)
            }

            function $(e, t, i) {
                if (C.state.fatArrowAt == C.stream.start) {
                    var n = i ? Q : X;
                    if ("(" == e) return E(L, R(")"), se(Le, ")"), W, F("=>"), n, N);
                    if ("variable" == e) return k(L, _e, F("=>"), n, N)
                }
                var a = i ? V : j;
                return w.hasOwnProperty(e) ? E(a) : "function" == e ? E(Ie, a) : "class" == e || c && "interface" == t ? (C.marked = "keyword", E(R("form"), De, W)) : "keyword c" == e || "async" == e ? E(i ? z : H) : "(" == e ? E(R(")"), q, F(")"), W, a) : "operator" == e || "spread" == e ? E(i ? z : H) : "[" == e ? E(R("]"), je, W, a) : "{" == e ? oe(ie, "}", null, a) : "quasi" == e ? k(Y, a) : "new" == e ? E(function (e) {
                    return function (t) {
                        return "." == t ? E(e ? Z : J) : "variable" == t && c ? E(ve, e ? V : j) : k(e ? z : H)
                    }
                }(i)) : "import" == e ? E(H) : E()
            }

            function q(e) {
                return e.match(/[;\}\)\],]/) ? k() : k(H)
            }

            function j(e, t) {
                return "," == e ? E(q) : V(e, t, !1)
            }

            function V(e, t, i) {
                var n = 0 == i ? j : V,
                    a = 0 == i ? H : z;
                return "=>" == e ? E(L, i ? Q : X, N) : "operator" == e ? /\+\+|--/.test(t) || c && "!" == t ? E(n) : c && "<" == t && C.stream.match(/^([^>]|<.*?>)*>\s*\(/, !1) ? E(R(">"), se(ue, ">"), W, n) : "?" == t ? E(H, F(":"), a) : E(a) : "quasi" == e ? k(Y, n) : ";" != e ? "(" == e ? oe(z, ")", "call", n) : "." == e ? E(te, n) : "[" == e ? E(R("]"), q, F("]"), W, n) : c && "as" == t ? (C.marked = "keyword", E(ue, n)) : "regexp" == e ? (C.state.lastType = C.marked = "operator", C.stream.backUp(C.stream.pos - C.stream.start - 1), E(a)) : void 0 : void 0
            }

            function Y(e, t) {
                return "quasi" != e ? k() : "${" != t.slice(t.length - 2) ? E(Y) : E(H, K)
            }

            function K(e) {
                if ("}" == e) return C.marked = "string-2", C.state.tokenize = v, E(Y)
            }

            function X(e) {
                return y(C.stream, C.state), k("{" == e ? B : H)
            }

            function Q(e) {
                return y(C.stream, C.state), k("{" == e ? B : z)
            }

            function J(e, t) {
                if ("target" == t) return C.marked = "keyword", E(j)
            }

            function Z(e, t) {
                if ("target" == t) return C.marked = "keyword", E(V)
            }

            function ee(e) {
                return ":" == e ? E(W, B) : k(j, F(";"), W)
            }

            function te(e) {
                if ("variable" == e) return C.marked = "property", E()
            }

            function ie(e, t) {
                return "async" == e ? (C.marked = "property", E(ie)) : "variable" == e || "keyword" == C.style ? (C.marked = "property", "get" == t || "set" == t ? E(ne) : (c && C.state.fatArrowAt == C.stream.start && (i = C.stream.match(/^\s*:\s*/, !1)) && (C.state.fatArrowAt = C.stream.pos + i[0].length), E(ae))) : "number" == e || "string" == e ? (C.marked = r ? "property" : C.style + " property", E(ae)) : "jsonld-keyword" == e ? E(ae) : c && P(t) ? (C.marked = "keyword", E(ie)) : "[" == e ? E(H, le, F("]"), ae) : "spread" == e ? E(z, ae) : "*" == t ? (C.marked = "keyword", E(ie)) : ":" == e ? k(ae) : void 0;
                var i
            }

            function ne(e) {
                return "variable" != e ? k(ae) : (C.marked = "property", E(Ie))
            }

            function ae(e) {
                return ":" == e ? E(z) : "(" == e ? k(Ie) : void 0
            }

            function se(e, t, i) {
                function n(a, s) {
                    if (i ? i.indexOf(a) > -1 : "," == a) {
                        var o = C.state.lexical;
                        return "call" == o.info && (o.pos = (o.pos || 0) + 1), E((function (i, n) {
                            return i == t || n == t ? k() : k(e)
                        }), n)
                    }
                    return a == t || s == t ? E() : i && i.indexOf(";") > -1 ? k(e) : E(F(t))
                }
                return function (i, a) {
                    return i == t || a == t ? E() : k(e, n)
                }
            }

            function oe(e, t, i) {
                for (var n = 3; n < arguments.length; n++) C.cc.push(arguments[n]);
                return E(R(t, i), se(e, t), W)
            }

            function re(e) {
                return "}" == e ? E() : k(B, re)
            }

            function le(e, t) {
                if (c) {
                    if (":" == e) return E(ue);
                    if ("?" == t) return E(le)
                }
            }

            function ce(e, t) {
                if (c && (":" == e || "in" == t)) return E(ue)
            }

            function de(e) {
                if (c && ":" == e) return C.stream.match(/^\s*\w+\s+is\b/, !1) ? E(H, pe, ue) : E(ue)
            }

            function pe(e, t) {
                if ("is" == t) return C.marked = "keyword", E()
            }

            function ue(e, t) {
                return "keyof" == t || "typeof" == t || "infer" == t ? (C.marked = "keyword", E("typeof" == t ? z : ue)) : "variable" == e || "void" == t ? (C.marked = "type", E(ge)) : "|" == t || "&" == t ? E(ue) : "string" == e || "number" == e || "atom" == e ? E(ge) : "[" == e ? E(R("]"), se(ue, "]", ","), W, ge) : "{" == e ? E(R("}"), se(fe, "}", ",;"), W, ge) : "(" == e ? E(se(me, ")"), he, ge) : "<" == e ? E(se(ue, ">"), ue) : void 0
            }

            function he(e) {
                if ("=>" == e) return E(ue)
            }

            function fe(e, t) {
                return "variable" == e || "keyword" == C.style ? (C.marked = "property", E(fe)) : "?" == t || "number" == e || "string" == e ? E(fe) : ":" == e ? E(ue) : "[" == e ? E(F("variable"), ce, F("]"), fe) : "(" == e ? k(Oe, fe) : void 0
            }

            function me(e, t) {
                return "variable" == e && C.stream.match(/^\s*[?:]/, !1) || "?" == t ? E(me) : ":" == e ? E(ue) : "spread" == e ? E(me) : k(ue)
            }

            function ge(e, t) {
                return "<" == t ? E(R(">"), se(ue, ">"), W, ge) : "|" == t || "." == e || "&" == t ? E(ue) : "[" == e ? E(ue, F("]"), ge) : "extends" == t || "implements" == t ? (C.marked = "keyword", E(ue)) : "?" == t ? E(ue, F(":"), ue) : void 0
            }

            function ve(e, t) {
                if ("<" == t) return E(R(">"), se(ue, ">"), W, ge)
            }

            function be() {
                return k(ue, ye)
            }

            function ye(e, t) {
                if ("=" == t) return E(ue)
            }

            function we(e, t) {
                return "enum" == t ? (C.marked = "keyword", E(Ve)) : k(_e, le, ke, Ee)
            }

            function _e(e, t) {
                return c && P(t) ? (C.marked = "keyword", E(_e)) : "variable" == e ? (S(t), E()) : "spread" == e ? E(_e) : "[" == e ? oe(Ce, "]") : "{" == e ? oe(Te, "}") : void 0
            }

            function Te(e, t) {
                return "variable" != e || C.stream.match(/^\s*:/, !1) ? ("variable" == e && (C.marked = "property"), "spread" == e ? E(_e) : "}" == e ? k() : "[" == e ? E(H, F("]"), F(":"), Te) : E(F(":"), _e, ke)) : (S(t), E(ke))
            }

            function Ce() {
                return k(_e, ke)
            }

            function ke(e, t) {
                if ("=" == t) return E(z)
            }

            function Ee(e) {
                if ("," == e) return E(we)
            }

            function xe(e, t) {
                if ("keyword b" == e && "else" == t) return E(R("form", "else"), B, W)
            }

            function Se(e, t) {
                return "await" == t ? E(Se) : "(" == e ? E(R(")"), Me, W) : void 0
            }

            function Me(e) {
                return "var" == e ? E(we, Pe) : "variable" == e ? E(Pe) : k(Pe)
            }

            function Pe(e, t) {
                return ")" == e ? E() : ";" == e ? E(Pe) : "in" == t || "of" == t ? (C.marked = "keyword", E(H, Pe)) : k(H, Pe)
            }

            function Ie(e, t) {
                return "*" == t ? (C.marked = "keyword", E(Ie)) : "variable" == e ? (S(t), E(Ie)) : "(" == e ? E(L, R(")"), se(Le, ")"), W, de, B, N) : c && "<" == t ? E(R(">"), se(be, ">"), W, Ie) : void 0
            }

            function Oe(e, t) {
                return "*" == t ? (C.marked = "keyword", E(Oe)) : "variable" == e ? (S(t), E(Oe)) : "(" == e ? E(L, R(")"), se(Le, ")"), W, de, N) : c && "<" == t ? E(R(">"), se(be, ">"), W, Oe) : void 0
            }

            function Ae(e, t) {
                return "keyword" == e || "variable" == e ? (C.marked = "type", E(Ae)) : "<" == t ? E(R(">"), se(be, ">"), W) : void 0
            }

            function Le(e, t) {
                return "@" == t && E(H, Le), "spread" == e ? E(Le) : c && P(t) ? (C.marked = "keyword", E(Le)) : c && "this" == e ? E(le, ke) : k(_e, le, ke)
            }

            function De(e, t) {
                return "variable" == e ? Ne(e, t) : Re(e, t)
            }

            function Ne(e, t) {
                if ("variable" == e) return S(t), E(Re)
            }

            function Re(e, t) {
                return "<" == t ? E(R(">"), se(be, ">"), W, Re) : "extends" == t || "implements" == t || c && "," == e ? ("implements" == t && (C.marked = "keyword"), E(c ? ue : H, Re)) : "{" == e ? E(R("}"), We, W) : void 0
            }

            function We(e, t) {
                return "async" == e || "variable" == e && ("static" == t || "get" == t || "set" == t || c && P(t)) && C.stream.match(/^\s+[\w$\xa1-\uffff]/, !1) ? (C.marked = "keyword", E(We)) : "variable" == e || "keyword" == C.style ? (C.marked = "property", E(c ? Fe : Ie, We)) : "number" == e || "string" == e ? E(c ? Fe : Ie, We) : "[" == e ? E(H, le, F("]"), c ? Fe : Ie, We) : "*" == t ? (C.marked = "keyword", E(We)) : c && "(" == e ? k(Oe, We) : ";" == e || "," == e ? E(We) : "}" == e ? E() : "@" == t ? E(H, We) : void 0
            }

            function Fe(e, t) {
                if ("?" == t) return E(Fe);
                if (":" == e) return E(ue, ke);
                if ("=" == t) return E(z);
                var i = C.state.lexical.prev;
                return k(i && "interface" == i.info ? Oe : Ie)
            }

            function Be(e, t) {
                return "*" == t ? (C.marked = "keyword", E(qe, F(";"))) : "default" == t ? (C.marked = "keyword", E(H, F(";"))) : "{" == e ? E(se(Ue, "}"), qe, F(";")) : k(B)
            }

            function Ue(e, t) {
                return "as" == t ? (C.marked = "keyword", E(F("variable"))) : "variable" == e ? k(z, Ue) : void 0
            }

            function He(e) {
                return "string" == e ? E() : "(" == e ? k(H) : k(ze, Ge, qe)
            }

            function ze(e, t) {
                return "{" == e ? oe(ze, "}") : ("variable" == e && S(t), "*" == t && (C.marked = "keyword"), E($e))
            }

            function Ge(e) {
                if ("," == e) return E(ze, Ge)
            }

            function $e(e, t) {
                if ("as" == t) return C.marked = "keyword", E(ze)
            }

            function qe(e, t) {
                if ("from" == t) return C.marked = "keyword", E(H)
            }

            function je(e) {
                return "]" == e ? E() : k(se(z, "]"))
            }

            function Ve() {
                return k(R("form"), _e, F("{"), R("}"), se(Ye, "}"), W, W)
            }

            function Ye() {
                return k(_e, ke)
            }

            function Ke(e, t, i) {
                return t.tokenize == m && /^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(t.lastType) || "quasi" == t.lastType && /\{\s*$/.test(e.string.slice(0, e.pos - (i || 0)))
            }
            return N.lex = !0, W.lex = !0, {
                startState: function (e) {
                    var t = {
                        tokenize: m,
                        lastType: "sof",
                        cc: [],
                        lexical: new _((e || 0) - s, 0, "block", !1),
                        localVars: i.localVars,
                        context: i.localVars && new I(null, null, !1),
                        indented: e || 0
                    };
                    return i.globalVars && "object" == typeof i.globalVars && (t.globalVars = i.globalVars), t
                },
                token: function (e, t) {
                    if (e.sol() && (t.lexical.hasOwnProperty("align") || (t.lexical.align = !1), t.indented = e.indentation(), y(e, t)), t.tokenize != g && e.eatSpace()) return null;
                    var i = t.tokenize(e, t);
                    return "comment" == n ? i : (t.lastType = "operator" != n || "++" != a && "--" != a ? n : "incdec", function (e, t, i, n, a) {
                        var s = e.cc;
                        for (C.state = e, C.stream = a, C.marked = null, C.cc = s, C.style = t, e.lexical.hasOwnProperty("align") || (e.lexical.align = !0); ;)
                            if ((s.length ? s.pop() : l ? H : B)(i, n)) {
                                for (; s.length && s[s.length - 1].lex;) s.pop()();
                                return C.marked ? C.marked : "variable" == i && T(e, n) ? "variable-2" : t
                            }
                    }(t, i, n, a, e))
                },
                indent: function (t, n) {
                    if (t.tokenize == g) return e.Pass;
                    if (t.tokenize != m) return 0;
                    var a, r = n && n.charAt(0),
                        l = t.lexical;
                    if (!/^\s*else\b/.test(n))
                        for (var c = t.cc.length - 1; c >= 0; --c) {
                            var d = t.cc[c];
                            if (d == W) l = l.prev;
                            else if (d != xe) break
                        }
                    for (;
                        ("stat" == l.type || "form" == l.type) && ("}" == r || (a = t.cc[t.cc.length - 1]) && (a == j || a == V) && !/^[,\.=+\-*:?[\(]/.test(n));) l = l.prev;
                    o && ")" == l.type && "stat" == l.prev.type && (l = l.prev);
                    var p = l.type,
                        h = r == p;
                    return "vardef" == p ? l.indented + ("operator" == t.lastType || "," == t.lastType ? l.info.length + 1 : 0) : "form" == p && "{" == r ? l.indented : "form" == p ? l.indented + s : "stat" == p ? l.indented + (function (e, t) {
                        return "operator" == e.lastType || "," == e.lastType || u.test(t.charAt(0)) || /[,.]/.test(t.charAt(0))
                    }(t, n) ? o || s : 0) : "switch" != l.info || h || 0 == i.doubleIndentSwitch ? l.align ? l.column + (h ? 0 : 1) : l.indented + (h ? 0 : s) : l.indented + (/^(?:case|default)\b/.test(n) ? s : 2 * s)
                },
                electricInput: /^\s*(?:case .*?:|default:|\{|\})$/,
                blockCommentStart: l ? null : "/*",
                blockCommentEnd: l ? null : "*/",
                blockCommentContinue: l ? null : " * ",
                lineComment: l ? null : "//",
                fold: "brace",
                closeBrackets: "()[]{}''\"\"``",
                helperType: l ? "json" : "javascript",
                jsonldMode: r,
                jsonMode: l,
                expressionAllowed: Ke,
                skipExpression: function (e) {
                    var t = e.cc[e.cc.length - 1];
                    t != H && t != z || e.cc.pop()
                }
            }
        })), e.registerHelper("wordChars", "javascript", /[\w$]/), e.defineMIME("text/javascript", "javascript"), e.defineMIME("text/ecmascript", "javascript"), e.defineMIME("application/javascript", "javascript"), e.defineMIME("application/x-javascript", "javascript"), e.defineMIME("application/ecmascript", "javascript"), e.defineMIME("application/json", {
            name: "javascript",
            json: !0
        }), e.defineMIME("application/x-json", {
            name: "javascript",
            json: !0
        }), e.defineMIME("application/ld+json", {
            name: "javascript",
            jsonld: !0
        }), e.defineMIME("text/typescript", {
            name: "javascript",
            typescript: !0
        }), e.defineMIME("application/typescript", {
            name: "javascript",
            typescript: !0
        })
    })),
    function (e) {
        "object" == typeof exports && "object" == typeof module ? e(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define(["../../lib/codemirror"], e) : e(CodeMirror)
    }((function (e) {
        "use strict";

        function t(e) {
            for (var t; null != (t = e.next());)
                if ("`" == t && !e.eat("`")) return "variable-2";
            return e.backUp(e.current().length - 1), e.eatWhile(/\w/) ? "variable-2" : null
        }

        function i(e) {
            return e.eat("@") && (e.match(/^session\./), e.match(/^local\./), e.match(/^global\./)), e.eat("'") ? (e.match(/^.*'/), "variable-2") : e.eat('"') ? (e.match(/^.*"/), "variable-2") : e.eat("`") ? (e.match(/^.*`/), "variable-2") : e.match(/^[0-9a-zA-Z$\.\_]+/) ? "variable-2" : null
        }

        function n(e) {
            return e.eat("N") ? "atom" : e.match(/^[a-zA-Z.#!?]/) ? "variable-2" : null
        }
        e.defineMode("sql", (function (t, i) {
            var n = i.client || {},
                r = i.atoms || {
                    false: !0,
                    true: !0,
                    null: !0
                },
                l = i.builtin || s(o),
                c = i.keywords || s(a),
                d = i.operatorChars || /^[*+\-%<>!=&|~^\/]/,
                p = i.support || {},
                u = i.hooks || {},
                h = i.dateSQL || {
                    date: !0,
                    time: !0,
                    timestamp: !0
                },
                f = !1 !== i.backslashStringEscapes,
                m = i.brackets || /^[\{}\(\)\[\]]/,
                g = i.punctuation || /^[;.,:]/;

            function v(e, t) {
                var i = e.next();
                if (u[i]) {
                    var a = u[i](e, t);
                    if (!1 !== a) return a
                }
                if (p.hexNumber && ("0" == i && e.match(/^[xX][0-9a-fA-F]+/) || ("x" == i || "X" == i) && e.match(/^'[0-9a-fA-F]+'/))) return "number";
                if (p.binaryNumber && (("b" == i || "B" == i) && e.match(/^'[01]+'/) || "0" == i && e.match(/^b[01]+/))) return "number";
                if (i.charCodeAt(0) > 47 && i.charCodeAt(0) < 58) return e.match(/^[0-9]*(\.[0-9]+)?([eE][-+]?[0-9]+)?/), p.decimallessFloat && e.match(/^\.(?!\.)/), "number";
                if ("?" == i && (e.eatSpace() || e.eol() || e.eat(";"))) return "variable-3";
                if ("'" == i || '"' == i && p.doubleQuote) return t.tokenize = b(i), t.tokenize(e, t);
                if ((p.nCharCast && ("n" == i || "N" == i) || p.charsetCast && "_" == i && e.match(/[a-z][a-z0-9]*/i)) && ("'" == e.peek() || '"' == e.peek())) return "keyword";
                if (p.escapeConstant && ("e" == i || "E" == i) && ("'" == e.peek() || '"' == e.peek() && p.doubleQuote)) return t.tokenize = function (e, t) {
                    return (t.tokenize = b(e.next(), !0))(e, t)
                }, "keyword";
                if (p.commentSlashSlash && "/" == i && e.eat("/")) return e.skipToEnd(), "comment";
                if (p.commentHash && "#" == i || "-" == i && e.eat("-") && (!p.commentSpaceRequired || e.eat(" "))) return e.skipToEnd(), "comment";
                if ("/" == i && e.eat("*")) return t.tokenize = y(1), t.tokenize(e, t);
                if ("." != i) {
                    if (d.test(i)) return e.eatWhile(d), "operator";
                    if (m.test(i)) return "bracket";
                    if (g.test(i)) return e.eatWhile(g), "punctuation";
                    if ("{" == i && (e.match(/^( )*(d|D|t|T|ts|TS)( )*'[^']*'( )*}/) || e.match(/^( )*(d|D|t|T|ts|TS)( )*"[^"]*"( )*}/))) return "number";
                    e.eatWhile(/^[_\w\d]/);
                    var s = e.current().toLowerCase();
                    return h.hasOwnProperty(s) && (e.match(/^( )+'[^']*'/) || e.match(/^( )+"[^"]*"/)) ? "number" : r.hasOwnProperty(s) ? "atom" : l.hasOwnProperty(s) ? "builtin" : c.hasOwnProperty(s) ? "keyword" : n.hasOwnProperty(s) ? "string-2" : null
                }
                return p.zerolessFloat && e.match(/^(?:\d+(?:e[+-]?\d+)?)/i) ? "number" : e.match(/^\.+/) ? null : p.ODBCdotTable && e.match(/^[\w\d_]+/) ? "variable-2" : void 0
            }

            function b(e, t) {
                return function (i, n) {
                    for (var a, s = !1; null != (a = i.next());) {
                        if (a == e && !s) {
                            n.tokenize = v;
                            break
                        }
                        s = (f || t) && !s && "\\" == a
                    }
                    return "string"
                }
            }

            function y(e) {
                return function (t, i) {
                    var n = t.match(/^.*?(\/\*|\*\/)/);
                    return n ? "/*" == n[1] ? i.tokenize = y(e + 1) : i.tokenize = e > 1 ? y(e - 1) : v : t.skipToEnd(), "comment"
                }
            }

            function w(e, t, i) {
                t.context = {
                    prev: t.context,
                    indent: e.indentation(),
                    col: e.column(),
                    type: i
                }
            }
            return {
                startState: function () {
                    return {
                        tokenize: v,
                        context: null
                    }
                },
                token: function (e, t) {
                    if (e.sol() && t.context && null == t.context.align && (t.context.align = !1), t.tokenize == v && e.eatSpace()) return null;
                    var i = t.tokenize(e, t);
                    if ("comment" == i) return i;
                    t.context && null == t.context.align && (t.context.align = !0);
                    var n = e.current();
                    return "(" == n ? w(e, t, ")") : "[" == n ? w(e, t, "]") : t.context && t.context.type == n && function (e) {
                        e.indent = e.context.indent, e.context = e.context.prev
                    }(t), i
                },
                indent: function (i, n) {
                    var a = i.context;
                    if (!a) return e.Pass;
                    var s = n.charAt(0) == a.type;
                    return a.align ? a.col + (s ? 0 : 1) : a.indent + (s ? 0 : t.indentUnit)
                },
                blockCommentStart: "/*",
                blockCommentEnd: "*/",
                lineComment: p.commentSlashSlash ? "//" : p.commentHash ? "#" : "--",
                closeBrackets: "()[]{}''\"\"``"
            }
        }));
        var a = "alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where limit ";

        function s(e) {
            for (var t = {}, i = e.split(" "), n = 0; n < i.length; ++n) t[i[n]] = !0;
            return t
        }
        var o = "bool boolean bit blob enum long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision real date datetime year unsigned signed decimal numeric";
        e.defineMIME("text/x-sql", {
            name: "sql",
            keywords: s(a + "begin"),
            builtin: s(o),
            atoms: s("false true null unknown"),
            dateSQL: s("date time timestamp"),
            support: s("ODBCdotTable doubleQuote binaryNumber hexNumber")
        }), e.defineMIME("text/x-mssql", {
            name: "sql",
            client: s("$partition binary_checksum checksum connectionproperty context_info current_request_id error_line error_message error_number error_procedure error_severity error_state formatmessage get_filestream_transaction_context getansinull host_id host_name isnull isnumeric min_active_rowversion newid newsequentialid rowcount_big xact_state object_id"),
            keywords: s(a + "begin trigger proc view index for add constraint key primary foreign collate clustered nonclustered declare exec go if use index holdlock nolock nowait paglock readcommitted readcommittedlock readpast readuncommitted repeatableread rowlock serializable snapshot tablock tablockx updlock with"),
            builtin: s("bigint numeric bit smallint decimal smallmoney int tinyint money float real char varchar text nchar nvarchar ntext binary varbinary image cursor timestamp hierarchyid uniqueidentifier sql_variant xml table "),
            atoms: s("is not null like and or in left right between inner outer join all any some cross unpivot pivot exists"),
            operatorChars: /^[*+\-%<>!=^\&|\/]/,
            brackets: /^[\{}\(\)]/,
            punctuation: /^[;.,:/]/,
            backslashStringEscapes: !1,
            dateSQL: s("date datetimeoffset datetime2 smalldatetime datetime time"),
            hooks: {
                "@": i
            }
        }), e.defineMIME("text/x-mysql", {
            name: "sql",
            client: s("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),
            keywords: s(a + "accessible action add after algorithm all analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general get global grant grants group group_concat handler hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show signal slave slow smallint snapshot soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),
            builtin: s("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),
            atoms: s("false true null unknown"),
            operatorChars: /^[*+\-%<>!=&|^]/,
            dateSQL: s("date time timestamp"),
            support: s("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),
            hooks: {
                "@": i,
                "`": t,
                "\\": n
            }
        }), e.defineMIME("text/x-mariadb", {
            name: "sql",
            client: s("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),
            keywords: s(a + "accessible action add after algorithm all always analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general generated get global grant grants group groupby_concat handler hard hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password persistent phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show shutdown signal slave slow smallint snapshot soft soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views virtual warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),
            builtin: s("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),
            atoms: s("false true null unknown"),
            operatorChars: /^[*+\-%<>!=&|^]/,
            dateSQL: s("date time timestamp"),
            support: s("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),
            hooks: {
                "@": i,
                "`": t,
                "\\": n
            }
        }), e.defineMIME("text/x-sqlite", {
            name: "sql",
            client: s("auth backup bail binary changes check clone databases dbinfo dump echo eqp exit explain fullschema headers help import imposter indexes iotrace limit lint load log mode nullvalue once open output print prompt quit read restore save scanstats schema separator session shell show stats system tables testcase timeout timer trace vfsinfo vfslist vfsname width"),
            keywords: s(a + "abort action add after all analyze attach autoincrement before begin cascade case cast check collate column commit conflict constraint cross current_date current_time current_timestamp database default deferrable deferred detach each else end escape except exclusive exists explain fail for foreign full glob if ignore immediate index indexed initially inner instead intersect isnull key left limit match natural no notnull null of offset outer plan pragma primary query raise recursive references regexp reindex release rename replace restrict right rollback row savepoint temp temporary then to transaction trigger unique using vacuum view virtual when with without"),
            builtin: s("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text clob bigint int int2 int8 integer float double char varchar date datetime year unsigned signed numeric real"),
            atoms: s("null current_date current_time current_timestamp"),
            operatorChars: /^[*+\-%<>!=&|/~]/,
            dateSQL: s("date time timestamp datetime"),
            support: s("decimallessFloat zerolessFloat"),
            identifierQuote: '"',
            hooks: {
                "@": i,
                ":": i,
                "?": i,
                $: i,
                '"': function (e) {
                    for (var t; null != (t = e.next());)
                        if ('"' == t && !e.eat('"')) return "variable-2";
                    return e.backUp(e.current().length - 1), e.eatWhile(/\w/) ? "variable-2" : null
                },
                "`": t
            }
        }), e.defineMIME("text/x-cassandra", {
            name: "sql",
            client: {},
            keywords: s("add all allow alter and any apply as asc authorize batch begin by clustering columnfamily compact consistency count create custom delete desc distinct drop each_quorum exists filtering from grant if in index insert into key keyspace keyspaces level limit local_one local_quorum modify nan norecursive nosuperuser not of on one order password permission permissions primary quorum rename revoke schema select set storage superuser table three to token truncate ttl two type unlogged update use user users using values where with writetime"),
            builtin: s("ascii bigint blob boolean counter decimal double float frozen inet int list map static text timestamp timeuuid tuple uuid varchar varint"),
            atoms: s("false true infinity NaN"),
            operatorChars: /^[<>=]/,
            dateSQL: {},
            support: s("commentSlashSlash decimallessFloat"),
            hooks: {}
        }), e.defineMIME("text/x-plsql", {
            name: "sql",
            client: s("appinfo arraysize autocommit autoprint autorecovery autotrace blockterminator break btitle cmdsep colsep compatibility compute concat copycommit copytypecheck define describe echo editfile embedded escape exec execute feedback flagger flush heading headsep instance linesize lno loboffset logsource long longchunksize markup native newpage numformat numwidth pagesize pause pno recsep recsepchar release repfooter repheader serveroutput shiftinout show showmode size spool sqlblanklines sqlcase sqlcode sqlcontinue sqlnumber sqlpluscompatibility sqlprefix sqlprompt sqlterminator suffix tab term termout time timing trimout trimspool ttitle underline verify version wrap"),
            keywords: s("abort accept access add all alter and any array arraylen as asc assert assign at attributes audit authorization avg base_table begin between binary_integer body boolean by case cast char char_base check close cluster clusters colauth column comment commit compress connect connected constant constraint crash create current currval cursor data_base database date dba deallocate debugoff debugon decimal declare default definition delay delete desc digits dispose distinct do drop else elseif elsif enable end entry escape exception exception_init exchange exclusive exists exit external fast fetch file for force form from function generic goto grant group having identified if immediate in increment index indexes indicator initial initrans insert interface intersect into is key level library like limited local lock log logging long loop master maxextents maxtrans member minextents minus mislabel mode modify multiset new next no noaudit nocompress nologging noparallel not nowait number_base object of off offline on online only open option or order out package parallel partition pctfree pctincrease pctused pls_integer positive positiven pragma primary prior private privileges procedure public raise range raw read rebuild record ref references refresh release rename replace resource restrict return returning returns reverse revoke rollback row rowid rowlabel rownum rows run savepoint schema segment select separate session set share snapshot some space split sql start statement storage subtype successful synonym tabauth table tables tablespace task terminate then to trigger truncate type union unique unlimited unrecoverable unusable update use using validate value values variable view views when whenever where while with work"),
            builtin: s("abs acos add_months ascii asin atan atan2 average bfile bfilename bigserial bit blob ceil character chartorowid chr clob concat convert cos cosh count dec decode deref dual dump dup_val_on_index empty error exp false float floor found glb greatest hextoraw initcap instr instrb int integer isopen last_day least length lengthb ln lower lpad ltrim lub make_ref max min mlslabel mod months_between natural naturaln nchar nclob new_time next_day nextval nls_charset_decl_len nls_charset_id nls_charset_name nls_initcap nls_lower nls_sort nls_upper nlssort no_data_found notfound null number numeric nvarchar2 nvl others power rawtohex real reftohex round rowcount rowidtochar rowtype rpad rtrim serial sign signtype sin sinh smallint soundex sqlcode sqlerrm sqrt stddev string substr substrb sum sysdate tan tanh to_char text to_date to_label to_multi_byte to_number to_single_byte translate true trunc uid unlogged upper user userenv varchar varchar2 variance varying vsize xml"),
            operatorChars: /^[*\/+\-%<>!=~]/,
            dateSQL: s("date time timestamp"),
            support: s("doubleQuote nCharCast zerolessFloat binaryNumber hexNumber")
        }), e.defineMIME("text/x-hive", {
            name: "sql",
            keywords: s("select alter $elem$ $key$ $value$ add after all analyze and archive as asc before between binary both bucket buckets by cascade case cast change cluster clustered clusterstatus collection column columns comment compute concatenate continue create cross cursor data database databases dbproperties deferred delete delimited desc describe directory disable distinct distribute drop else enable end escaped exclusive exists explain export extended external fetch fields fileformat first format formatted from full function functions grant group having hold_ddltime idxproperties if import in index indexes inpath inputdriver inputformat insert intersect into is items join keys lateral left like limit lines load local location lock locks mapjoin materialized minus msck no_drop nocompress not of offline on option or order out outer outputdriver outputformat overwrite partition partitioned partitions percent plus preserve procedure purge range rcfile read readonly reads rebuild recordreader recordwriter recover reduce regexp rename repair replace restrict revoke right rlike row schema schemas semi sequencefile serde serdeproperties set shared show show_database sort sorted ssl statistics stored streamtable table tables tablesample tblproperties temporary terminated textfile then tmp to touch transform trigger unarchive undo union uniquejoin unlock update use using utc utc_tmestamp view when where while with admin authorization char compact compactions conf cube current current_date current_timestamp day decimal defined dependency directories elem_type exchange file following for grouping hour ignore inner interval jar less logical macro minute month more none noscan over owner partialscan preceding pretty principals protection reload rewrite role roles rollup rows second server sets skewed transactions truncate unbounded unset uri user values window year"),
            builtin: s("bool boolean long timestamp tinyint smallint bigint int float double date datetime unsigned string array struct map uniontype key_type utctimestamp value_type varchar"),
            atoms: s("false true null unknown"),
            operatorChars: /^[*+\-%<>!=]/,
            dateSQL: s("date timestamp"),
            support: s("ODBCdotTable doubleQuote binaryNumber hexNumber")
        }), e.defineMIME("text/x-pgsql", {
            name: "sql",
            client: s("source"),
            keywords: s(a + "a abort abs absent absolute access according action ada add admin after aggregate alias all allocate also alter always analyse analyze and any are array array_agg array_max_cardinality as asc asensitive assert assertion assignment asymmetric at atomic attach attribute attributes authorization avg backward base64 before begin begin_frame begin_partition bernoulli between bigint binary bit bit_length blob blocked bom boolean both breadth by c cache call called cardinality cascade cascaded case cast catalog catalog_name ceil ceiling chain char char_length character character_length character_set_catalog character_set_name character_set_schema characteristics characters check checkpoint class class_origin clob close cluster coalesce cobol collate collation collation_catalog collation_name collation_schema collect column column_name columns command_function command_function_code comment comments commit committed concurrently condition condition_number configuration conflict connect connection connection_name constant constraint constraint_catalog constraint_name constraint_schema constraints constructor contains content continue control conversion convert copy corr corresponding cost count covar_pop covar_samp create cross csv cube cume_dist current current_catalog current_date current_default_transform_group current_path current_role current_row current_schema current_time current_timestamp current_transform_group_for_type current_user cursor cursor_name cycle data database datalink datatype date datetime_interval_code datetime_interval_precision day db deallocate debug dec decimal declare default defaults deferrable deferred defined definer degree delete delimiter delimiters dense_rank depends depth deref derived desc describe descriptor detach detail deterministic diagnostics dictionary disable discard disconnect dispatch distinct dlnewcopy dlpreviouscopy dlurlcomplete dlurlcompleteonly dlurlcompletewrite dlurlpath dlurlpathonly dlurlpathwrite dlurlscheme dlurlserver dlvalue do document domain double drop dump dynamic dynamic_function dynamic_function_code each element else elseif elsif empty enable encoding encrypted end end_frame end_partition endexec enforced enum equals errcode error escape event every except exception exclude excluding exclusive exec execute exists exit exp explain expression extension external extract false family fetch file filter final first first_value flag float floor following for force foreach foreign fortran forward found frame_row free freeze from fs full function functions fusion g general generated get global go goto grant granted greatest group grouping groups handler having header hex hierarchy hint hold hour id identity if ignore ilike immediate immediately immutable implementation implicit import in include including increment indent index indexes indicator info inherit inherits initially inline inner inout input insensitive insert instance instantiable instead int integer integrity intersect intersection interval into invoker is isnull isolation join k key key_member key_type label lag language large last last_value lateral lead leading leakproof least left length level library like like_regex limit link listen ln load local localtime localtimestamp location locator lock locked log logged loop lower m map mapping match matched materialized max max_cardinality maxvalue member merge message message_length message_octet_length message_text method min minute minvalue mod mode modifies module month more move multiset mumps name names namespace national natural nchar nclob nesting new next nfc nfd nfkc nfkd nil no none normalize normalized not nothing notice notify notnull nowait nth_value ntile null nullable nullif nulls number numeric object occurrences_regex octet_length octets of off offset oids old on only open operator option options or order ordering ordinality others out outer output over overlaps overlay overriding owned owner p pad parallel parameter parameter_mode parameter_name parameter_ordinal_position parameter_specific_catalog parameter_specific_name parameter_specific_schema parser partial partition pascal passing passthrough password path percent percent_rank percentile_cont percentile_disc perform period permission pg_context pg_datatype_name pg_exception_context pg_exception_detail pg_exception_hint placing plans pli policy portion position position_regex power precedes preceding precision prepare prepared preserve primary print_strict_params prior privileges procedural procedure procedures program public publication query quote raise range rank read reads real reassign recheck recovery recursive ref references referencing refresh regr_avgx regr_avgy regr_count regr_intercept regr_r2 regr_slope regr_sxx regr_sxy regr_syy reindex relative release rename repeatable replace replica requiring reset respect restart restore restrict result result_oid return returned_cardinality returned_length returned_octet_length returned_sqlstate returning returns reverse revoke right role rollback rollup routine routine_catalog routine_name routine_schema routines row row_count row_number rows rowtype rule savepoint scale schema schema_name schemas scope scope_catalog scope_name scope_schema scroll search second section security select selective self sensitive sequence sequences serializable server server_name session session_user set setof sets share show similar simple size skip slice smallint snapshot some source space specific specific_name specifictype sql sqlcode sqlerror sqlexception sqlstate sqlwarning sqrt stable stacked standalone start state statement static statistics stddev_pop stddev_samp stdin stdout storage strict strip structure style subclass_origin submultiset subscription substring substring_regex succeeds sum symmetric sysid system system_time system_user t table table_name tables tablesample tablespace temp template temporary text then ties time timestamp timezone_hour timezone_minute to token top_level_count trailing transaction transaction_active transactions_committed transactions_rolled_back transform transforms translate translate_regex translation treat trigger trigger_catalog trigger_name trigger_schema trim trim_array true truncate trusted type types uescape unbounded uncommitted under unencrypted union unique unknown unlink unlisten unlogged unnamed unnest until untyped update upper uri usage use_column use_variable user user_defined_type_catalog user_defined_type_code user_defined_type_name user_defined_type_schema using vacuum valid validate validator value value_of values var_pop var_samp varbinary varchar variable_conflict variadic varying verbose version versioning view views volatile warning when whenever where while whitespace width_bucket window with within without work wrapper write xml xmlagg xmlattributes xmlbinary xmlcast xmlcomment xmlconcat xmldeclaration xmldocument xmlelement xmlexists xmlforest xmliterate xmlnamespaces xmlparse xmlpi xmlquery xmlroot xmlschema xmlserialize xmltable xmltext xmlvalidate year yes zone"),
            builtin: s("bigint int8 bigserial serial8 bit varying varbit boolean bool box bytea character char varchar cidr circle date double precision float8 inet integer int int4 interval json jsonb line lseg macaddr macaddr8 money numeric decimal path pg_lsn point polygon real float4 smallint int2 smallserial serial2 serial serial4 text time without zone with timetz timestamp timestamptz tsquery tsvector txid_snapshot uuid xml"),
            atoms: s("false true null unknown"),
            operatorChars: /^[*\/+\-%<>!=&|^\/#@?~]/,
            backslashStringEscapes: !1,
            dateSQL: s("date time timestamp"),
            support: s("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber nCharCast charsetCast escapeConstant")
        }), e.defineMIME("text/x-gql", {
            name: "sql",
            keywords: s("ancestor and asc by contains desc descendant distinct from group has in is limit offset on order select superset where"),
            atoms: s("false true"),
            builtin: s("blob datetime first key __key__ string integer double boolean null"),
            operatorChars: /^[*+\-%<>!=]/
        }), e.defineMIME("text/x-gpsql", {
            name: "sql",
            client: s("source"),
            keywords: s("abort absolute access action active add admin after aggregate all also alter always analyse analyze and any array as asc assertion assignment asymmetric at authorization backward before begin between bigint binary bit boolean both by cache called cascade cascaded case cast chain char character characteristics check checkpoint class close cluster coalesce codegen collate column comment commit committed concurrency concurrently configuration connection constraint constraints contains content continue conversion copy cost cpu_rate_limit create createdb createexttable createrole createuser cross csv cube current current_catalog current_date current_role current_schema current_time current_timestamp current_user cursor cycle data database day deallocate dec decimal declare decode default defaults deferrable deferred definer delete delimiter delimiters deny desc dictionary disable discard distinct distributed do document domain double drop dxl each else enable encoding encrypted end enum errors escape every except exchange exclude excluding exclusive execute exists explain extension external extract false family fetch fields filespace fill filter first float following for force foreign format forward freeze from full function global grant granted greatest group group_id grouping handler hash having header hold host hour identity if ignore ilike immediate immutable implicit in including inclusive increment index indexes inherit inherits initially inline inner inout input insensitive insert instead int integer intersect interval into invoker is isnull isolation join key language large last leading least left level like limit list listen load local localtime localtimestamp location lock log login mapping master match maxvalue median merge minute minvalue missing mode modifies modify month move name names national natural nchar new newline next no nocreatedb nocreateexttable nocreaterole nocreateuser noinherit nologin none noovercommit nosuperuser not nothing notify notnull nowait null nullif nulls numeric object of off offset oids old on only operator option options or order ordered others out outer over overcommit overlaps overlay owned owner parser partial partition partitions passing password percent percentile_cont percentile_disc placing plans position preceding precision prepare prepared preserve primary prior privileges procedural procedure protocol queue quote randomly range read readable reads real reassign recheck recursive ref references reindex reject relative release rename repeatable replace replica reset resource restart restrict returning returns revoke right role rollback rollup rootpartition row rows rule savepoint scatter schema scroll search second security segment select sequence serializable session session_user set setof sets share show similar simple smallint some split sql stable standalone start statement statistics stdin stdout storage strict strip subpartition subpartitions substring superuser symmetric sysid system table tablespace temp template temporary text then threshold ties time timestamp to trailing transaction treat trigger trim true truncate trusted type unbounded uncommitted unencrypted union unique unknown unlisten until update user using vacuum valid validation validator value values varchar variadic varying verbose version view volatile web when where whitespace window with within without work writable write xml xmlattributes xmlconcat xmlelement xmlexists xmlforest xmlparse xmlpi xmlroot xmlserialize year yes zone"),
            builtin: s("bigint int8 bigserial serial8 bit varying varbit boolean bool box bytea character char varchar cidr circle date double precision float float8 inet integer int int4 interval json jsonb line lseg macaddr macaddr8 money numeric decimal path pg_lsn point polygon real float4 smallint int2 smallserial serial2 serial serial4 text time without zone with timetz timestamp timestamptz tsquery tsvector txid_snapshot uuid xml"),
            atoms: s("false true null unknown"),
            operatorChars: /^[*+\-%<>!=&|^\/#@?~]/,
            dateSQL: s("date time timestamp"),
            support: s("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber nCharCast charsetCast")
        }), e.defineMIME("text/x-sparksql", {
            name: "sql",
            keywords: s("add after all alter analyze and anti archive array as asc at between bucket buckets by cache cascade case cast change clear cluster clustered codegen collection column columns comment commit compact compactions compute concatenate cost create cross cube current current_date current_timestamp database databases datata dbproperties defined delete delimited deny desc describe dfs directories distinct distribute drop else end escaped except exchange exists explain export extended external false fields fileformat first following for format formatted from full function functions global grant group grouping having if ignore import in index indexes inner inpath inputformat insert intersect interval into is items join keys last lateral lazy left like limit lines list load local location lock locks logical macro map minus msck natural no not null nulls of on optimize option options or order out outer outputformat over overwrite partition partitioned partitions percent preceding principals purge range recordreader recordwriter recover reduce refresh regexp rename repair replace reset restrict revoke right rlike role roles rollback rollup row rows schema schemas select semi separated serde serdeproperties set sets show skewed sort sorted start statistics stored stratify struct table tables tablesample tblproperties temp temporary terminated then to touch transaction transactions transform true truncate unarchive unbounded uncache union unlock unset use using values view when where window with"),
            builtin: s("tinyint smallint int bigint boolean float double string binary timestamp decimal array map struct uniontype delimited serde sequencefile textfile rcfile inputformat outputformat"),
            atoms: s("false true null"),
            operatorChars: /^[*\/+\-%<>!=~&|^]/,
            dateSQL: s("date time timestamp"),
            support: s("ODBCdotTable doubleQuote zerolessFloat")
        }), e.defineMIME("text/x-esper", {
            name: "sql",
            client: s("source"),
            keywords: s("alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where limit after all and as at asc avedev avg between by case cast coalesce count create current_timestamp day days delete define desc distinct else end escape events every exists false first from full group having hour hours in inner insert instanceof into irstream is istream join last lastweekday left limit like max match_recognize matches median measures metadatasql min minute minutes msec millisecond milliseconds not null offset on or order outer output partition pattern prev prior regexp retain-union retain-intersection right rstream sec second seconds select set some snapshot sql stddev sum then true unidirectional until update variable weekday when where window"),
            builtin: {},
            atoms: s("false true null"),
            operatorChars: /^[*+\-%<>!=&|^\/#@?~]/,
            dateSQL: s("time"),
            support: s("decimallessFloat zerolessFloat binaryNumber hexNumber")
        })
    })),
    function (e) {
        "object" == typeof exports && "object" == typeof module ? e(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define(["../../lib/codemirror"], e) : e(CodeMirror)
    }((function (e) {
        "use strict";
        var t = {
            autoSelfClosers: {
                area: !0,
                base: !0,
                br: !0,
                col: !0,
                command: !0,
                embed: !0,
                frame: !0,
                hr: !0,
                img: !0,
                input: !0,
                keygen: !0,
                link: !0,
                meta: !0,
                param: !0,
                source: !0,
                track: !0,
                wbr: !0,
                menuitem: !0
            },
            implicitlyClosed: {
                dd: !0,
                li: !0,
                optgroup: !0,
                option: !0,
                p: !0,
                rp: !0,
                rt: !0,
                tbody: !0,
                td: !0,
                tfoot: !0,
                th: !0,
                tr: !0
            },
            contextGrabbers: {
                dd: {
                    dd: !0,
                    dt: !0
                },
                dt: {
                    dd: !0,
                    dt: !0
                },
                li: {
                    li: !0
                },
                option: {
                    option: !0,
                    optgroup: !0
                },
                optgroup: {
                    optgroup: !0
                },
                p: {
                    address: !0,
                    article: !0,
                    aside: !0,
                    blockquote: !0,
                    dir: !0,
                    div: !0,
                    dl: !0,
                    fieldset: !0,
                    footer: !0,
                    form: !0,
                    h1: !0,
                    h2: !0,
                    h3: !0,
                    h4: !0,
                    h5: !0,
                    h6: !0,
                    header: !0,
                    hgroup: !0,
                    hr: !0,
                    menu: !0,
                    nav: !0,
                    ol: !0,
                    p: !0,
                    pre: !0,
                    section: !0,
                    table: !0,
                    ul: !0
                },
                rp: {
                    rp: !0,
                    rt: !0
                },
                rt: {
                    rp: !0,
                    rt: !0
                },
                tbody: {
                    tbody: !0,
                    tfoot: !0
                },
                td: {
                    td: !0,
                    th: !0
                },
                tfoot: {
                    tbody: !0
                },
                th: {
                    td: !0,
                    th: !0
                },
                thead: {
                    tbody: !0,
                    tfoot: !0
                },
                tr: {
                    tr: !0
                }
            },
            doNotIndent: {
                pre: !0
            },
            allowUnquoted: !0,
            allowMissing: !0,
            caseFold: !0
        },
            i = {
                autoSelfClosers: {},
                implicitlyClosed: {},
                contextGrabbers: {},
                doNotIndent: {},
                allowUnquoted: !1,
                allowMissing: !1,
                allowMissingTagName: !1,
                caseFold: !1
            };
        e.defineMode("xml", (function (n, a) {
            var s, o, r = n.indentUnit,
                l = {},
                c = a.htmlMode ? t : i;
            for (var d in c) l[d] = c[d];
            for (var d in a) l[d] = a[d];

            function p(e, t) {
                function i(i) {
                    return t.tokenize = i, i(e, t)
                }
                var n = e.next();
                return "<" == n ? e.eat("!") ? e.eat("[") ? e.match("CDATA[") ? i(h("atom", "]]>")) : null : e.match("--") ? i(h("comment", "--\x3e")) : e.match("DOCTYPE", !0, !0) ? (e.eatWhile(/[\w\._\-]/), i(f(1))) : null : e.eat("?") ? (e.eatWhile(/[\w\._\-]/), t.tokenize = h("meta", "?>"), "meta") : (s = e.eat("/") ? "closeTag" : "openTag", t.tokenize = u, "tag bracket") : "&" == n ? (e.eat("#") ? e.eat("x") ? e.eatWhile(/[a-fA-F\d]/) && e.eat(";") : e.eatWhile(/[\d]/) && e.eat(";") : e.eatWhile(/[\w\.\-:]/) && e.eat(";")) ? "atom" : "error" : (e.eatWhile(/[^&<]/), null)
            }

            function u(e, t) {
                var i, n, a = e.next();
                if (">" == a || "/" == a && e.eat(">")) return t.tokenize = p, s = ">" == a ? "endTag" : "selfcloseTag", "tag bracket";
                if ("=" == a) return s = "equals", null;
                if ("<" == a) {
                    t.tokenize = p, t.state = b, t.tagName = t.tagStart = null;
                    var o = t.tokenize(e, t);
                    return o ? o + " tag error" : "tag error"
                }
                return /[\'\"]/.test(a) ? (t.tokenize = (i = a, n = function (e, t) {
                    for (; !e.eol();)
                        if (e.next() == i) {
                            t.tokenize = u;
                            break
                        } return "string"
                }, n.isInAttribute = !0, n), t.stringStartCol = e.column(), t.tokenize(e, t)) : (e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/), "word")
            }

            function h(e, t) {
                return function (i, n) {
                    for (; !i.eol();) {
                        if (i.match(t)) {
                            n.tokenize = p;
                            break
                        }
                        i.next()
                    }
                    return e
                }
            }

            function f(e) {
                return function (t, i) {
                    for (var n; null != (n = t.next());) {
                        if ("<" == n) return i.tokenize = f(e + 1), i.tokenize(t, i);
                        if (">" == n) {
                            if (1 == e) {
                                i.tokenize = p;
                                break
                            }
                            return i.tokenize = f(e - 1), i.tokenize(t, i)
                        }
                    }
                    return "meta"
                }
            }

            function m(e, t, i) {
                this.prev = e.context, this.tagName = t, this.indent = e.indented, this.startOfLine = i, (l.doNotIndent.hasOwnProperty(t) || e.context && e.context.noIndent) && (this.noIndent = !0)
            }

            function g(e) {
                e.context && (e.context = e.context.prev)
            }

            function v(e, t) {
                for (var i; ;) {
                    if (!e.context) return;
                    if (i = e.context.tagName, !l.contextGrabbers.hasOwnProperty(i) || !l.contextGrabbers[i].hasOwnProperty(t)) return;
                    g(e)
                }
            }

            function b(e, t, i) {
                return "openTag" == e ? (i.tagStart = t.column(), y) : "closeTag" == e ? w : b
            }

            function y(e, t, i) {
                return "word" == e ? (i.tagName = t.current(), o = "tag", C) : l.allowMissingTagName && "endTag" == e ? (o = "tag bracket", C(e, t, i)) : (o = "error", y)
            }

            function w(e, t, i) {
                if ("word" == e) {
                    var n = t.current();
                    return i.context && i.context.tagName != n && l.implicitlyClosed.hasOwnProperty(i.context.tagName) && g(i), i.context && i.context.tagName == n || !1 === l.matchClosing ? (o = "tag", _) : (o = "tag error", T)
                }
                return l.allowMissingTagName && "endTag" == e ? (o = "tag bracket", _(e, t, i)) : (o = "error", T)
            }

            function _(e, t, i) {
                return "endTag" != e ? (o = "error", _) : (g(i), b)
            }

            function T(e, t, i) {
                return o = "error", _(e, 0, i)
            }

            function C(e, t, i) {
                if ("word" == e) return o = "attribute", k;
                if ("endTag" == e || "selfcloseTag" == e) {
                    var n = i.tagName,
                        a = i.tagStart;
                    return i.tagName = i.tagStart = null, "selfcloseTag" == e || l.autoSelfClosers.hasOwnProperty(n) ? v(i, n) : (v(i, n), i.context = new m(i, n, a == i.indented)), b
                }
                return o = "error", C
            }

            function k(e, t, i) {
                return "equals" == e ? E : (l.allowMissing || (o = "error"), C(e, 0, i))
            }

            function E(e, t, i) {
                return "string" == e ? x : "word" == e && l.allowUnquoted ? (o = "string", C) : (o = "error", C(e, 0, i))
            }

            function x(e, t, i) {
                return "string" == e ? x : C(e, 0, i)
            }
            return p.isInText = !0, {
                startState: function (e) {
                    var t = {
                        tokenize: p,
                        state: b,
                        indented: e || 0,
                        tagName: null,
                        tagStart: null,
                        context: null
                    };
                    return null != e && (t.baseIndent = e), t
                },
                token: function (e, t) {
                    if (!t.tagName && e.sol() && (t.indented = e.indentation()), e.eatSpace()) return null;
                    s = null;
                    var i = t.tokenize(e, t);
                    return (i || s) && "comment" != i && (o = null, t.state = t.state(s || i, e, t), o && (i = "error" == o ? i + " error" : o)), i
                },
                indent: function (t, i, n) {
                    var a = t.context;
                    if (t.tokenize.isInAttribute) return t.tagStart == t.indented ? t.stringStartCol + 1 : t.indented + r;
                    if (a && a.noIndent) return e.Pass;
                    if (t.tokenize != u && t.tokenize != p) return n ? n.match(/^(\s*)/)[0].length : 0;
                    if (t.tagName) return !1 !== l.multilineTagIndentPastTag ? t.tagStart + t.tagName.length + 2 : t.tagStart + r * (l.multilineTagIndentFactor || 1);
                    if (l.alignCDATA && /<!\[CDATA\[/.test(i)) return 0;
                    var s = i && /^<(\/)?([\w_:\.-]*)/.exec(i);
                    if (s && s[1])
                        for (; a;) {
                            if (a.tagName == s[2]) {
                                a = a.prev;
                                break
                            }
                            if (!l.implicitlyClosed.hasOwnProperty(a.tagName)) break;
                            a = a.prev
                        } else if (s)
                        for (; a;) {
                            var o = l.contextGrabbers[a.tagName];
                            if (!o || !o.hasOwnProperty(s[2])) break;
                            a = a.prev
                        }
                    for (; a && a.prev && !a.startOfLine;) a = a.prev;
                    return a ? a.indent + r : t.baseIndent || 0
                },
                electricInput: /<\/[\s\w:]+>$/,
                blockCommentStart: "\x3c!--",
                blockCommentEnd: "--\x3e",
                configuration: l.htmlMode ? "html" : "xml",
                helperType: l.htmlMode ? "html" : "xml",
                skipAttribute: function (e) {
                    e.state == E && (e.state = C)
                },
                xmlCurrentTag: function (e) {
                    return e.tagName ? {
                        name: e.tagName,
                        close: "closeTag" == e.type
                    } : null
                },
                xmlCurrentContext: function (e) {
                    for (var t = [], i = e.context; i; i = i.prev) i.tagName && t.push(i.tagName);
                    return t.reverse()
                }
            }
        })), e.defineMIME("text/xml", "xml"), e.defineMIME("application/xml", "xml"), e.mimeModes.hasOwnProperty("text/html") || e.defineMIME("text/html", {
            name: "xml",
            htmlMode: !0
        })
    })),
    function (e) {
        "object" == typeof exports && "object" == typeof module ? e(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define(["../../lib/codemirror"], e) : e(CodeMirror)
    }((function (e) {
        var t = /MSIE \d/.test(navigator.userAgent) && (null == document.documentMode || document.documentMode < 8),
            i = e.Pos,
            n = {
                "(": ")>",
                ")": "(<",
                "[": "]>",
                "]": "[<",
                "{": "}>",
                "}": "{<",
                "<": ">>",
                ">": "<<"
            };

        function a(e) {
            return e && e.bracketRegex || /[(){}[\]]/
        }

        function s(e, t, s) {
            var r = e.getLineHandle(t.line),
                l = t.ch - 1,
                c = s && s.afterCursor;
            null == c && (c = /(^| )cm-fat-cursor($| )/.test(e.getWrapperElement().className));
            var d = a(s),
                p = !c && l >= 0 && d.test(r.text.charAt(l)) && n[r.text.charAt(l)] || d.test(r.text.charAt(l + 1)) && n[r.text.charAt(++l)];
            if (!p) return null;
            var u = ">" == p.charAt(1) ? 1 : -1;
            if (s && s.strict && u > 0 != (l == t.ch)) return null;
            var h = e.getTokenTypeAt(i(t.line, l + 1)),
                f = o(e, i(t.line, l + (u > 0 ? 1 : 0)), u, h || null, s);
            return null == f ? null : {
                from: i(t.line, l),
                to: f && f.pos,
                match: f && f.ch == p.charAt(0),
                forward: u > 0
            }
        }

        function o(e, t, s, o, r) {
            for (var l = r && r.maxScanLineLength || 1e4, c = r && r.maxScanLines || 1e3, d = [], p = a(r), u = s > 0 ? Math.min(t.line + c, e.lastLine() + 1) : Math.max(e.firstLine() - 1, t.line - c), h = t.line; h != u; h += s) {
                var f = e.getLine(h);
                if (f) {
                    var m = s > 0 ? 0 : f.length - 1,
                        g = s > 0 ? f.length : -1;
                    if (!(f.length > l))
                        for (h == t.line && (m = t.ch - (s < 0 ? 1 : 0)); m != g; m += s) {
                            var v = f.charAt(m);
                            if (p.test(v) && (void 0 === o || e.getTokenTypeAt(i(h, m + 1)) == o)) {
                                var b = n[v];
                                if (b && ">" == b.charAt(1) == s > 0) d.push(v);
                                else {
                                    if (!d.length) return {
                                        pos: i(h, m),
                                        ch: v
                                    };
                                    d.pop()
                                }
                            }
                        }
                }
            }
            return h - s != (s > 0 ? e.lastLine() : e.firstLine()) && null
        }

        function r(e, n, a) {
            for (var o = e.state.matchBrackets.maxHighlightLineLength || 1e3, r = [], l = e.listSelections(), c = 0; c < l.length; c++) {
                var d = l[c].empty() && s(e, l[c].head, a);
                if (d && e.getLine(d.from.line).length <= o) {
                    var p = d.match ? "CodeMirror-matchingbracket" : "CodeMirror-nonmatchingbracket";
                    r.push(e.markText(d.from, i(d.from.line, d.from.ch + 1), {
                        className: p
                    })), d.to && e.getLine(d.to.line).length <= o && r.push(e.markText(d.to, i(d.to.line, d.to.ch + 1), {
                        className: p
                    }))
                }
            }
            if (r.length) {
                t && e.state.focused && e.focus();
                var u = function () {
                    e.operation((function () {
                        for (var e = 0; e < r.length; e++) r[e].clear()
                    }))
                };
                if (!n) return u;
                setTimeout(u, 800)
            }
        }

        function l(e) {
            e.operation((function () {
                e.state.matchBrackets.currentlyHighlighted && (e.state.matchBrackets.currentlyHighlighted(), e.state.matchBrackets.currentlyHighlighted = null), e.state.matchBrackets.currentlyHighlighted = r(e, !1, e.state.matchBrackets)
            }))
        }
        e.defineOption("matchBrackets", !1, (function (t, i, n) {
            n && n != e.Init && (t.off("cursorActivity", l), t.state.matchBrackets && t.state.matchBrackets.currentlyHighlighted && (t.state.matchBrackets.currentlyHighlighted(), t.state.matchBrackets.currentlyHighlighted = null)), i && (t.state.matchBrackets = "object" == typeof i ? i : {}, t.on("cursorActivity", l))
        })), e.defineExtension("matchBrackets", (function () {
            r(this, !0)
        })), e.defineExtension("findMatchingBracket", (function (e, t, i) {
            return (i || "boolean" == typeof t) && (i ? (i.strict = t, t = i) : t = t ? {
                strict: !0
            } : null), s(this, e, t)
        })), e.defineExtension("scanForBracket", (function (e, t, i, n) {
            return o(this, e, t, i, n)
        }))
    })),
    function (e) {
        "object" == typeof exports && "object" == typeof module ? e(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define(["../../lib/codemirror"], e) : e(CodeMirror)
    }((function (e) {
        "use strict";
        var t = "CodeMirror-activeline",
            i = "CodeMirror-activeline-background",
            n = "CodeMirror-activeline-gutter";

        function a(e) {
            for (var a = 0; a < e.state.activeLines.length; a++) e.removeLineClass(e.state.activeLines[a], "wrap", t), e.removeLineClass(e.state.activeLines[a], "background", i), e.removeLineClass(e.state.activeLines[a], "gutter", n)
        }

        function s(e, s) {
            for (var o = [], r = 0; r < s.length; r++) {
                var l = s[r],
                    c = e.getOption("styleActiveLine");
                if ("object" == typeof c && c.nonEmpty ? l.anchor.line == l.head.line : l.empty()) {
                    var d = e.getLineHandleVisualStart(l.head.line);
                    o[o.length - 1] != d && o.push(d)
                }
            } (function (e, t) {
                if (e.length != t.length) return !1;
                for (var i = 0; i < e.length; i++)
                    if (e[i] != t[i]) return !1;
                return !0
            })(e.state.activeLines, o) || e.operation((function () {
                a(e);
                for (var s = 0; s < o.length; s++) e.addLineClass(o[s], "wrap", t), e.addLineClass(o[s], "background", i), e.addLineClass(o[s], "gutter", n);
                e.state.activeLines = o
            }))
        }

        function o(e, t) {
            s(e, t.ranges)
        }
        e.defineOption("styleActiveLine", !1, (function (t, i, n) {
            var r = n != e.Init && n;
            i != r && (r && (t.off("beforeSelectionChange", o), a(t), delete t.state.activeLines), i && (t.state.activeLines = [], s(t, t.listSelections()), t.on("beforeSelectionChange", o)))
        }))
    })),
    function (e) {
        "object" == typeof exports && "object" == typeof module ? e(require("../../lib/codemirror")) : "function" == typeof define && define.amd ? define(["../../lib/codemirror"], e) : e(CodeMirror)
    }((function (e) {
        "use strict";
        e.defineOption("fullScreen", !1, (function (t, i, n) {
            n == e.Init && (n = !1), !n != !i && (i ? function (e) {
                var t = e.getWrapperElement();
                e.state.fullScreenRestore = {
                    scrollTop: window.pageYOffset,
                    scrollLeft: window.pageXOffset,
                    width: t.style.width,
                    height: t.style.height
                }, t.style.width = "", t.style.height = "auto", t.className += " CodeMirror-fullscreen", document.documentElement.style.overflow = "hidden", e.refresh()
            }(t) : function (e) {
                var t = e.getWrapperElement();
                t.className = t.className.replace(/\s*CodeMirror-fullscreen\b/, ""), document.documentElement.style.overflow = "";
                var i = e.state.fullScreenRestore;
                t.style.width = i.width, t.style.height = i.height, window.scrollTo(i.scrollLeft, i.scrollTop), e.refresh()
            }(t))
        }))
    })), window.WebsiteSettings = function () {
        var e = {},
            t = {};
        return {
            set: function (i, n) {
                n && (t = n), (e = i || {}).showCookiesDisclaimer = e.showCookiesDisclaimer || "0", e.cookiesDisclaimerText = e.cookiesDisclaimerText || M.DEFAULT_COOKIE_DISCLAIMER
            },
            getSettings: function () {
                return e || {}
            },
            getMenu: function () {
                return t || {}
            },
            getDateFormat: function () {
                return (e || {}).dateFormat || "uk"
            },
            getDateFormatPattern: function () {
                return "uk" === WebsiteSettings.getDateFormat() ? "dd/mm/yy" : "mm/dd/yy"
            },
            getTimeFormatPattern: function () {
                return "uk" === WebsiteSettings.getDateFormat() ? "HH:mm" : "hh:mm TT"
            },
            save: function (e, t) {
                WebsiteSettings.saveWithMenu(e, null, t)
            },
            saveWithMenu: function (e, t, i) {
                Tools.makeWebsiteRequest({
                    action: "saveWebsiteSettings",
                    method: "post",
                    data: {
                        settings: JSON.stringify(e),
                        menu: t ? JSON.stringify(t) : null
                    },
                    onOk: function () {
                        (i || dummy)()
                    }
                })
            }
        }
    }();
var Permission = {
    MASTER: 0,
    WEBSITE: 1,
    BLOG: 2,
    PORTFOLIO: 3,
    BILLING: 4,
    DOMAIN: 5,
    ACCESS: 6,
    THEMES: 7,
    MESSAGES: 8,
    ANALYTICS: 9,
    MEMBERS: 10,
    STORE: 11,
    FUNNELS: 12,
    ADD_SITES: 13
};
window.Website = window.Website || {}, mergeUnique(window.Website, {
    id: "",
    hash: "",
    textAssistEnabled: !1,
    activeSite: null,
    projectId: "",
    rootDomain: "",
    pageGroups: [],
    websiteTitle: "",
    websiteTimezone: "",
    websiteTimezoneName: "",
    virtualPages: [],
    funnels: [],
    popups: [],
    pageTemplates: null,
    automationTemplates: null,
    saveInProggress: !1,
    hasAccessToWebsite: !1,
    hasAccessToPortfolio: !1,
    hasAccessToBlog: !1,
    hasAccessToStore: !1,
    templateName: "",
    pagePrefix: "/me/website",
    virtualPagePrefix: "/me",
    storeCurrency: "",
    storeCurrencySymbol: "",
    storeCurrencyPositionAtLeft: !0,
    storeProcess: "cart",
    storePriceWithTax: !0,
    storeWeightUnit: "",
    BLOG_PAGE_ID: -2,
    PORTFOLIO_PAGE_ID: -3,
    STORE_PAGE_ID: -4,
    templatePopups: null,
    templateBlocks: null,
    emailSettings: null,
    globalStyling: {},
    appsSettings: null,
    memberGroups: [],
    subscriptionInfo: null,
    homePage: null,
    funnelTemplates: null,
    projectWebsites: [],
    crmProperties: [],
    crmTags: [],
    platformVars: null,
    personalizationFields: [],
    redirectRules: [],
    projectName: "",
    canAddWebsitesToProject: !1,
    canAddFunnelsToWebsite: !1,
    currentUserIsProjectOwner: !1,
    permissions: 0,
    minPlanForStoreSubscriptions: "",
    storeSubscriptionAvailable: !1,
    globalWidgets: null,
    webhooks: null,
    apiKey: null,
    bookingOperators: [],
    bookingServices: [],
    bookingOperatorsLimit: 0,
    bookingServicesLimit: 0,
    marketing: {},
    addons: [],
    emailMarketingSettings: null,
    activeImports: null,
    countdownGeneratorUrlBase: "",
    shouldUpgradeStripe: !1,
    firstOrderTime: 0,
    onImportExportTaskStarted: function (e) {
        Website.activeImports = Website.activeImports || [], Website.activeImports.push(e), WebComponents.State().set(Website)
    },
    getSystemPages: function (e) {
        for (var t = 0; t < Website.systemPages.length; ++t)
            if (Website.systemPages[t].link === e) return Website.systemPages[t];
        return null
    },
    getSystemPagesInOrder: function (e) {
        return ["system/404", "system/no-permissions", "system/protected", "system/member", "system/member-auth", "system/product", "system/products", "system/cart", "system/checkout", "system/order-completed", "system/order-processing", "system/order-canceled", "system/order-error", "system/order-download-file", "system/double-optin-confirmed", "system/builder-login", "system/builder-register", "system/builder-reset-pass"]
    },
    getSystemPagePreviewUrl: function (e) {
        e.startsWith("/") && (e = e.substr(1));
        var t = "/" + (Website.getPageById(Website.STORE_PAGE_ID) || {
            link: "store"
        }).link;
        switch (e) {
            case "system/404":
                return "/" + Tools.getTimestamp();
            case "system/cart":
                return t + "/cart";
            case "system/checkout":
                return t + "/checkout";
            case "system/member":
                return "/member";
            case "system/no-permissions":
            case "system/protected":
                return "/";
            case "system/member-auth":
            case "system/signin":
            case "system/signup":
                return "/signin";
            case "system/product":
            case "system/products":
                return t;
            case "system/order-processing":
                return "/_process_order";
            case "system/order-completed":
                return t + "/checkout/completed";
            case "system/order-canceled":
                return t + "/checkout/canceled";
            case "system/order-error":
                return t + "/checkout/error";
            case "system/order-download-file":
                return "/dl";
            case "system/builder-login":
                return "/login";
            case "system/builder-register":
                return "/register";
            case "system/builder-reset-pass":
                return "/PasswordReset";
            case "system/double-optin-confirmed":
                return "/contact-optin-confirmed";
            default:
                return e
        }
    },
    getSystemPageName: function (e) {
        switch (e) {
            case "system/404":
                return M.PAGE_NOT_FOUND_NAME;
            case "system/cart":
                return M.CART_NAME;
            case "system/checkout":
                return M.STORE_CHECKOUT_NAME;
            case "system/member":
                return M.MEMBER_DETAILS_NAME;
            case "system/no-permissions":
                return M.NOT_ENOUGH_PERMISSIONS_NAME;
            case "system/protected":
                return M.PAGE_PROTECTED_NAME;
            case "system/member-auth":
            case "system/signin":
            case "system/signup":
                return M.MEMBER_LOGIN_NAME;
            case "system/product":
                return M.STORE_PRODUCT_NAME;
            case "system/products":
                return M.STORE_CATALOG_NAME;
            case "system/order-processing":
                return M.ORDER_PROCESSING_NAME;
            case "system/order-completed":
                return M.ORDER_COMPLETED_NAME;
            case "system/order-canceled":
                return M.ORDER_CANCELED_NAME;
            case "system/order-error":
                return M.ORDER_ERROR_NAME;
            case "system/order-download-file":
                return M.DOWNLOAD_FILE_NAME;
            case "system/builder-login":
                return M.BUILDER_LOGIN_NAME;
            case "system/builder-register":
                return M.BUILDER_REG_NAME;
            case "system/builder-reset-pass":
                return M.BUILDER_PASS_RESET_NAME;
            case "system/double-optin-confirmed":
                return M.PAGE_DOUBLE_OPT_IN_CONFIRMED;
            default:
                return ""
        }
    },
    getSystemPageDescription: function (e) {
        switch (e) {
            case "system/404":
                return M.PAGE_404_DESC;
            case "system/cart":
                return M.PAGE_CART_DESC;
            case "system/checkout":
                return M.PAGE_CHECKOUT_DESC;
            case "system/member":
                return M.PAGE_MEMBER_DETAILS_DESC;
            case "system/no-permissions":
                return M.PAGE_NO_PERMISSIONS_DESC;
            case "system/protected":
                return M.PAGE_PROTECTED_DESC;
            case "system/member-auth":
            case "system/signin":
            case "system/signup":
                return M.PAGE_MEMBER_AUTH_DESC;
            case "system/product":
                return M.PAGE_PRODUCT_DESC;
            case "system/products":
                return M.PAGE_CATALOG_DESC;
            case "system/order-processing":
                return M.PAGE_ORDER_PROCESSING_DESC;
            case "system/order-completed":
                return M.PAGE_ORDER_COMPLETE_DESC;
            case "system/order-canceled":
                return M.PAGE_ORDER_CANCELED_DESC;
            case "system/order-error":
                return M.PAGE_ORDER_ERROR_DESC;
            case "system/order-download-file":
                return M.PAGE_ORDER_DOWNLOAD_DESC;
            case "system/builder-login":
                return M.PAGE_BUILDER_LOGIN_DESC;
            case "system/builder-register":
                return M.PAGE_BUILDER_REG_DESC;
            case "system/builder-reset-pass":
                return M.PAGE_BUILDER_RECOVER_PASS_DESC;
            default:
                return ""
        }
    },
    getActiveSite: function () {
        return this.activeSite || {}
    },
    hasPermission: function (e) {
        if (this.currentUserIsProjectOwner) return !0;
        if (e === Permission.MASTER) return !1;
        var t = 1 << e;
        return (this.permissions & t) === t
    },
    getAciveModal: function () {
        var e = Hooks.active.hook.activePage;
        return e && "websitePage" === e.name && e.modal ? e.modal : null
    },
    getActiveFunnel: function () {
        return Hooks.active.hook.activePage && Hooks.active.hook.activePage.getActiveFunnel ? Hooks.active.hook.activePage.getActiveFunnel() : null
    },
    getActiveFunnelStep: function () {
        return Hooks.active.hook.activePage && Hooks.active.hook.activePage.getActiveFunnelStep ? Hooks.active.hook.activePage.getActiveFunnelStep() : null
    },
    getActiveBuilderPage: function () {
        var e = Website.getActiveFunnelStep();
        if (null !== e && "PAGE" === e.type) return e.page;
        var t = Hooks.active.hook.activePage.getAdminPageUrl() || "";
        return 0 === t.indexOf(Website.virtualPagePrefix + "/blog") ? Website.getPageById(Website.BLOG_PAGE_ID) : 0 === t.indexOf(Website.virtualPagePrefix + "/portfolio") ? Website.getPageById(Website.PORTFOLIO_PAGE_ID) : (0 === (t = t.substr(Website.pagePrefix.length)).indexOf("/") && (t = t.substr(1)), "" === t ? Website.getHomepage() : Website.getPageByUrl(t))
    },
    isFunnelWebsite: function () {
        return "FUNNEL" === Website.getActiveSite().type
    },
    getProjectWebsiteById: function (e) {
        return getById(Website.projectWebsites, e)
    },
    openPage: function (e) {
        for (var t = this.pagePrefix, i = 0; i < this.virtualPages.length; ++i)
            if (this.virtualPages[i].link === e) {
                t = this.virtualPagePrefix;
                break
            } CPanel.goToUrl(t + "/" + e)
    },
    getMemberGroupById: function (e) {
        return getById(this.memberGroups, e)
    },
    removeMemberGroupById: function (e) {
        for (var t = 0; t < this.memberGroups.length; ++t)
            if (this.memberGroups[t].id === e) return void this.memberGroups.splice(t, 1)
    },
    addMemberGroup: function (e) {
        this.memberGroups.push(e)
    },
    setFunnel: function (e) {
        var t = getById(Website.funnels, e.id);
        if (t)
            for (var i in e) t[i] = e[i]
    },
    getPageHeaderByUrl: function (e) {
        if (e === contextPath + Website.pagePrefix) return Website.getHomepage().headerType;
        for (var t = 0; t < this.pageGroups.length; ++t)
            for (var i = this.pageGroups[t].pages, n = 0; n < i.length; ++n)
                if (contextPath + Website.pagePrefix + "/" + i[n].link === e) return i[n].headerType;
        for (t = 0; t < this.virtualPages.length; ++t)
            if (0 === e.indexOf(contextPath + "/me/" + this.virtualPages[t].link)) return this.virtualPages[t].headerType;
        return 0
    },
    getGroups: function () {
        return Website.pageGroups
    },
    getGroupById: function (e) {
        return e = parse(e, -1), getById(this.pageGroups, e)
    },
    getGroupByPageId: function (e) {
        if ((e = parse(e, -1, !0)) < 0) return null;
        for (var t = 0; t < Website.pageGroups.length; ++t)
            for (var i = 0; i < Website.pageGroups[t].pages.length; ++i)
                if (Website.pageGroups[t].pages[i].id === e) return Website.pageGroups[t];
        return null
    },
    getPopupById: function (e) {
        return e = parse(e, -1, !0), getById(this.popups, e)
    },
    getFunnelStepById: function (e, t) {
        return getById(e.steps, t)
    },
    getFunnelById: function (e) {
        return getById(this.funnels, e)
    },
    removeFunnelById: function (e) {
        for (var t = 0; t < Website.funnels.length; ++t)
            if (Website.funnels[t].id === e) return Website.funnels.splice(t, 1), !0
    },
    getFunnelByUrl: function (e, t) {
        for (var i = 0; i < Website.funnels.length; ++i)
            if (t && Website.funnels[i].url.toLowerCase() === e.toLowerCase() || Website.funnels[i].url === e) return Website.funnels[i];
        return null
    },
    getFirstRealPage: function () {
        for (var e = 0; e < Website.pageGroups.length; ++e)
            for (var t = 0; t < Website.pageGroups[e].pages.length; ++t)
                if (Website.pageGroups[e].pages.length > 0) return Website.pageGroups[e].pages[0];
        return null
    },
    getPageById: function (e) {
        if ((e = parse(e, -1, !0)) < 0)
            for (var t = 0; t < Website.virtualPages.length; ++t)
                if (Website.virtualPages[t].id === e) return Website.virtualPages[t];
        for (var i = 0; i < Website.pageGroups.length; ++i)
            for (var n = 0; n < Website.pageGroups[i].pages.length; ++n)
                if (Website.pageGroups[i].pages[n].id === e) return Website.pageGroups[i].pages[n];
        return null
    },
    savePage: function (e, t, i, n) {
        i = i || dummy, n = n || dummy, Website.saveInProggress || (Website.saveInProggress = !0, e && "/" !== e || !Website.homePage || (e = "/" + Website.getHomepageLink()), t.url = e, Tools.makeWebsiteRequest({
            action: "update",
            method: "post",
            data: t,
            onOk: i,
            onNotOk: function (e) {
                CPanel.showError(e.message), n()
            },
            onRequestError: function () {
                CPanel.showError(M.ERR_UPS), n()
            },
            always: function () {
                Website.saveInProggress = !1
            }
        }))
    },
    getHomepageLink: function () {
        if (Website.homePage) {
            if (Website.homePage.isFunnel) {
                var e = Website.getFunnelById(Website.homePage.id);
                return e && e.steps.length ? e.url + "/" + e.steps[0].page.link : ""
            }
            return Website.getPageById(Website.homePage.id).link
        }
        return ""
    },
    getHomepage: function () {
        if (Website.homePage.isFunnel) {
            var e = Website.getFunnelById(Website.homePage.id);
            return e && e.steps.length ? e.steps[0].page : {}
        }
        return Website.getPageById(Website.homePage.id)
    },
    isHomepage: function (e, t) {
        return Website.homePage.isFunnel === t && Website.homePage.id === e
    },
    setHomepage: function (e, t, i) {
        i = i || dummy, Tools.makeWebsiteRequest({
            action: "setHomepage",
            data: {
                id: e.id,
                isFunnel: t
            },
            onOk: function (n) {
                Website.homePage = {
                    id: e.id,
                    isFunnel: t
                }, i()
            }
        })
    },
    getPageByUrl: function (e) {
        for (var t = 0; t < Website.virtualPages.length; ++t)
            if (Website.virtualPages[t].link === e) return Website.virtualPages[t];
        for (var i = 0; i < Website.pageGroups.length; ++i)
            for (var n = 0; n < Website.pageGroups[i].pages.length; ++n)
                if (Website.pageGroups[i].pages[n].link === e) return Website.pageGroups[i].pages[n];
        for (t = 0; t < Website.systemPages.length; ++t)
            if (Website.systemPages[t].link === e) return Website.systemPages[t];
        return null
    },
    getTemplatePopups: function (e) {
        null === Website.templatePopups ? Tools.makeWebsiteRequest({
            action: "listTemplatePopups",
            method: "get",
            onOk: function (t) {
                Website.templatePopups = t.data, e(Website.templatePopups)
            }
        }) : e(Website.templatePopups)
    },
    getTemplateBlocks: function (e) {
        null === Website.templateBlocks ? Tools.makeWebsiteRequest({
            action: "listTemplateBlocks",
            method: "get",
            onOk: function (t) {
                Website.templateBlocks = t.data, e(Website.templateBlocks)
            }
        }) : e(Website.templateBlocks)
    },
    addPopup: function (e, t) {
        Tools.makeWebsiteRequest({
            action: "addPopup",
            method: "get",
            data: {
                clone: e || -1
            },
            onOk: function (e) {
                Website.popups.push(e.data), (t || dummy)(e.data.id)
            }
        })
    },
    __onNewPageAdded: function (e, t, i, n) {
        var a = i.data;
        if ("NO_PAGES_AVAILABLE" === a) Tools.showWindow({
            title: "",
            icon: Popup.ICON_ERROR,
            width: 450,
            markup: Templates.get("pagesLimitReachedMarkup"),
            showCloseButton: !0,
            customClass: Popup.CUSTOM_CLASS_ERROR_DIALOG,
            action: {
                onShow: function (e, t) {
                    t.find('[data-action="openBilling"]').click((function () {
                        e.close(), CPanel.goToUrl("/me/settings/billing")
                    }))
                }
            }
        });
        else if (t) {
            for (var s = a, o = 0; o < Website.funnels.length; ++o)
                if (Website.funnels[o].id === a.funnelId) {
                    Website.funnels[o] = s;
                    break
                } n(s)
        } else {
            var r = {
                id: a.id,
                name: a.name,
                link: a.link,
                title: a.title,
                description: a.description,
                isPublic: a.isPublic,
                headerType: a.headerType,
                security: a.security,
                meta: a.meta
            };
            a.id > 0 ? e.pages.push(r) : (Website.virtualPages.push(r), Website.virtualPages.sort((function (e, t) {
                return e.id < t.id ? 1 : -1
            }))), n(r)
        }
    },
    clonePage: function (e, t) {
        Tools.makeWebsiteRequest({
            action: "clonePage",
            data: {
                id: e
            },
            onOk: function (i) {
                var n = Website.getGroupByPageId(e);
                Website.__onNewPageAdded(n, !1, i, t)
            }
        })
    },
    addPage: function (e, t) {
        t = t || dummy;
        var i = "";
        if ("password" === e.securityType) i = e.securityPassword;
        else if ("members" === e.securityType && $.isArray(e.securityGroups)) {
            for (var n = [], a = 0; a < e.securityGroups.length; ++a) n.push(e.securityGroups[a].id);
            i = n.join(",")
        }
        var s = e.group;
        Tools.makeWebsiteRequest({
            action: "createPage",
            data: {
                name: e.name,
                url: e.url,
                dublicatedPage: e.page,
                group: s,
                title: e.title,
                description: e.description,
                isPublic: e.isPublic ? "1" : "0",
                headerType: e.headerType,
                securityType: e.securityType,
                securityValue: i,
                meta: null === e.meta ? null : JSON.stringify(e.meta),
                funnelId: e.funnelId ? e.funnelId : 0,
                toCheckoutStepId: e.toCheckoutStepId ? e.toCheckoutStepId : 0
            },
            method: "post",
            onOk: function (i) {
                var n = Website.getGroupById(s);
                Website.__onNewPageAdded(n, !!e.funnelId, i, t)
            }
        })
    },
    addGroup: function (e, t) {
        t = t || dummy, Tools.makeWebsiteRequest({
            action: "createGroup",
            data: {
                name: e
            },
            method: "post",
            onOk: function (i) {
                var n = {
                    id: (i = i.data).id,
                    name: e,
                    pages: []
                };
                Website.pageGroups.push(n), t(n)
            }
        })
    },
    deleteGroup: function (e, t) {
        t = t || dummy, Tools.makeWebsiteRequest({
            action: "deleteGroup",
            data: {
                id: e
            },
            method: "post",
            onOk: function (i) {
                e = parse(e, -1);
                for (var n = 0; n < Website.pageGroups.length; ++n)
                    if (Website.pageGroups[n].id === e) {
                        Website.pageGroups.splice(n, 1);
                        break
                    } t()
            }
        })
    },
    updateGroup: function (e, t, i) {
        i = i || dummy, Tools.makeWebsiteRequest({
            action: "updateGroup",
            data: {
                id: e,
                name: t
            },
            method: "post",
            onOk: function (t) {
                var n = Website.getGroupById(e);
                n.name = t.data, i(n)
            }
        })
    },
    updatePageMeta: function (e, t, i, n) {
        n = n || dummy, Tools.makeWebsiteRequest({
            action: "updatePageMeta",
            data: {
                url: e,
                type: t,
                data: JSON.stringify(i)
            },
            method: "post",
            onOk: function (e) {
                n()
            }
        })
    },
    updatePage: function (e) {
        var t = e.page,
            i = e.pageId;
        e.onSuccess = e.onSuccess || dummy;
        var n = "";
        if ("password" === e.securityType) n = e.securityPassword;
        else if ("members" === e.securityType && $.isArray(e.securityGroups)) {
            for (var a = [], s = 0; s < e.securityGroups.length; ++s) a.push(e.securityGroups[s].id);
            n = a.join(",")
        }
        Tools.makeWebsiteRequest({
            action: "updatePageInformation",
            incrementModCount: !0,
            data: {
                id: i,
                name: e.name,
                url: e.link,
                title: e.title,
                group: e.group,
                description: e.description,
                isPublic: e.isPublic ? "1" : "0",
                headerType: e.headerType,
                securityType: e.securityType,
                securityValue: n,
                funnelId: e.funnelId,
                funnelStepId: e.funnelStepId,
                meta: e.meta ? JSON.stringify(e.meta) : null
            },
            method: "post",
            onOk: function (n) {
                n = n.data, t.name = n.name, t.title = n.title, t.link = n.link, t.description = n.description, t.isPublic = n.isPublic, t.headerType = n.headerType, t.security = n.security, t.meta = n.meta;
                var a = !1;
                if (i > 0) {
                    var s = Website.getGroupByPageId(i),
                        o = Website.getGroupById(parse(e.group, -1, !0));
                    if (null !== s && null !== o && o.id !== s.id)
                        for (var r = 0; r < s.pages.length; ++r)
                            if (s.pages[r].id === i) {
                                s.pages.splice(r, 1), o.pages.push(t), o.pages.sort((function (e, t) {
                                    return e.id - t.id
                                })), a = !0;
                                break
                            }
                }
                e.onSuccess(t, a)
            }
        })
    },
    movePageToFunnel: function (e, t, i, n) {
        var a = Website.getPageById(e);
        Website.homePage.isFunnel || Website.homePage.id !== e ? Tools.makeWebsiteRequest({
            action: "movePageToFunnel",
            data: {
                id: e,
                siteId: t,
                funnelId: i
            },
            method: "post",
            onOk: function (i) {
                for (var s = i.data, o = 0; o < Website.pageGroups.length; ++o)
                    for (var r = Website.pageGroups[o], l = 0; l < r.pages.length; ++l)
                        if (r.pages[l].id === e) {
                            r.pages.splice(l, 1);
                            break
                        } if (Website.getActiveSite().id === t)
                    for (var c = 0; c < Website.funnels.length; ++c)
                        if (Website.funnels[c].id === s.id) {
                            Website.funnels[c] = s;
                            break
                        } (n || dummy)(s, a)
            }
        }) : Tools.showError(M.ERR_CANT_MOVE_HOMEPAGE)
    },
    deletePage: function (e, t) {
        t = t || dummy, Tools.makeWebsiteRequest({
            action: "deletePage",
            data: {
                id: e
            },
            method: "post",
            onOk: function (i) {
                if ((e = parse(e, -1, !0)) < 0) {
                    for (var n = 0; n < Website.virtualPages.length; ++n)
                        if (Website.virtualPages[n].id === e) {
                            Website.virtualPages.splice(n, 1);
                            break
                        }
                } else
                    for (var a = 0; a < Website.pageGroups.length; ++a)
                        for (var s = Website.pageGroups[a], o = 0; o < s.pages.length; ++o)
                            if (s.pages[o].id === e) {
                                s.pages.splice(o, 1);
                                break
                            } t()
            }
        })
    },
    deletePopup: function (e, t) {
        t = t || dummy, Tools.makeWebsiteRequest({
            action: "deletePopup",
            data: {
                id: e
            },
            method: "post",
            onOk: function (i) {
                for (var n = 0; n < Website.popups.length; ++n)
                    if (Website.popups[n].id === e) return Website.popups.splice(n, 1), void (t || dummy)()
            }
        })
    },
    clonePopup: function (e, t) {
        t = t || dummy, Tools.makeWebsiteRequest({
            action: "clonePopup",
            data: {
                id: e.id
            },
            method: "post",
            onOk: function (i) {
                var n = {
                    id: i.data.id,
                    name: e.name
                };
                Website.popups.push(n), t(n)
            }
        })
    },
    addVirtualPage: function (e, t) {
        for (var i = "blog" === e ? 0 : "portfolio" === e ? 1 : 2, n = [M.BLOG_TITLE, M.PORTFOLIO_TITLE, M.STORE_TITLE], a = ["other|" + Website.BLOG_PAGE_ID, "other|" + Website.PORTFOLIO_PAGE_ID, "other|" + Website.STORE_PAGE_ID], s = ["blog", "portfolio", "store"][i], o = 1; ;) {
            if (null === Website.getPageByUrl(s)) break;
            s += ++o
        }
        var r = Website.getGroups()[0].id,
            l = n[i],
            c = a[i];
        Website.addPage({
            name: l,
            url: s,
            page: c,
            group: r,
            title: l,
            description: "",
            isPublic: !0,
            headerType: 0,
            securityType: "public",
            password: "password",
            selectedGroups: [],
            meta: null
        }, (function (e) {
            (t || dummy)(e)
        }))
    },
    selectPage: function (e) {
        LinkPicker.selectLink(e)
    },
    isAweberEnabled: function () {
        return !!((Website.appsSettings || {}).aweber || {}).accountId
    },
    isSpeedyEnabled: function () {
        return Website.appsSettings && Website.appsSettings.speedy && Website.appsSettings.speedy.active
    },
    isMailchimpEnabled: function () {
        return !!((Website.appsSettings || {}).mailchimp || {}).key
    },
    isMailerliteEnabled: function () {
        return !!((Website.appsSettings || {}).mailerlite || {}).key
    },
    isMoosendEnabled: function () {
        return !!((Website.appsSettings || {}).moosend || {}).key
    },
    isGetResponseEnabled: function () {
        return !!((Website.appsSettings || {}).getresponse || {}).key
    },
    isActiveCampaignEnabled: function () {
        return !!((Website.appsSettings || {}).activecampaign || {}).key
    },
    isMarketingEnabled: function () {
        return !1 !== window.marketingModuleEnabled
    },
    isKeapEnabled: function () {
        return !!((Website.appsSettings || {}).keap || {}).accessToken
    },
    isTwilioEnabled: function () {
        return !(!Website.appsSettings || !Website.appsSettings.twilio)
    },
    isMessagingEnabled: function () {
        return Website.isTwilioEnabled()
    },
    _selectAppLists: function (e, t, i) {
        mergeUnique(i, {
            isModal: !0,
            title: e,
            description: "",
            lists: [],
            onSelect: dummy
        }), Tools.makeWebsiteRequest({
            action: t,
            onOk: function (e) {
                var t = e.data || [],
                    n = WebPlatform.intersect(t, i.lists, !0, (function (e, t) {
                        return e.first === t
                    }));
                Tools.chooseMultiple({
                    isModal: i.isModal,
                    title: i.title,
                    message: i.description,
                    items: t,
                    selectedItems: n,
                    allowEmptySelection: !0,
                    getItemText: function (e) {
                        return e.second
                    },
                    getItemId: function (e) {
                        return e.first
                    },
                    onSelect: function (e) {
                        for (var t = [], n = 0; n < e.length; ++n) t.push(e[n].first);
                        i.onSelect(t)
                    }
                })
            }
        })
    },
    saveTag: function (e, t, i) {
        Tools.makeWebsiteRequest({
            action: "saveTag",
            data: {
                id: e,
                tag: t.trim()
            },
            onOk: function (t) {
                var n = t.data;
                e < 1 ? Website.crmTags.push(n) : Website.crmTags[indexOfId(Website.crmTags, e)] = n, (i || dummy)(n)
            }
        })
    },
    selectAweberLists: function (e) {
        this._selectAppLists(M.MAILCHIMP_SETTINGS, "getAweberLists", e)
    },
    selectMoosendLists: function (e) {
        this._selectAppLists(M.MOOSEND_SETTINGS, "getMoosendLists", e)
    },
    selectMailchimpLists: function (e) {
        this._selectAppLists(M.MAILCHIMP_SETTINGS, "getMailchimpLists", e)
    },
    selectMailerliteLists: function (e) {
        this._selectAppLists(M.MAILERLITE_SETTINGS, "getMailerliteLists", e)
    },
    selectGetResponseLists: function (e) {
        this._selectAppLists(M.GETRESPONSE_SETTINGS, "getGetResponseLists", e)
    },
    selectActiveCampaignLists: function (e) {
        this._selectAppLists(M.ACTIVECAMPAIGN_SETTINGS, "getActiveCampaignLists", e)
    },
    selectMarketingLists: function (e) {
        Tools.makeWebsiteRequest({
            action: "getMarketingListsWithoutCount",
            onOk: function (t) {
                var i = t.data || [],
                    n = WebPlatform.intersect(i, e.lists, !0, (function (e, t) {
                        return e.id == t
                    }));
                UITools.selectMarketingLists(i, n, (function (t) {
                    var i = [];
                    t.forEach((function (e) {
                        i.push(e.id)
                    })), e.onSelect(i)
                }))
            }
        })
    },
    selectKeapLists: function (e) {
        this._selectAppLists("Keap Settings", "getKeapTags", e)
    },
    EMPTY_EMAIL_SETTINGS: {
        host: "",
        port: "",
        user: "",
        pass: "",
        email: "",
        name: ""
    },
    saveGlobalStyling: function (e, t, i) {
        var n = 1,
            a = function () {
                --n < 1 && (i || dummy)()
            };
        e && (++n, Tools.makeWebsiteRequest({
            action: "saveGlobalStyling",
            method: "post",
            data: {
                globalStyling: JSON.stringify(e)
            },
            onOk: function () {
                Website.globalStyling = e, a()
            }
        })), t && (++n, Website.updatePageMeta(Hooks.active.hook.activePage.getClientPageUrl(), "style", t, a)), a()
    },
    setCurrencySymbols: function (e, t, i) {
        WebPlatform.Store.currency = e, WebPlatform.Store.currencySymbol = t, WebPlatform.Store.currencySymbolAtLeft = i, Website.storeCurrency = e, Website.storeCurrencySymbol = t, Website.storeCurrencyPositionAtLeft = i
    },
    loadPageTemplates: function (e) {
        null !== Website.pageTemplates ? e(Website.pageTemplates) : Tools.makeWebsiteRequest({
            action: "getPageTemplates",
            onOk: function (t) {
                Website.pageTemplates = t.data || [], e(Website.pageTemplates)
            }
        })
    },
    loadAutomationTemplates: function (e) {
        null !== Website.automationTemplates ? e(Website.automationTemplates) : Tools.makeWebsiteRequest({
            action: "getAutomationTemplates",
            onOk: function (t) {
                Website.automationTemplates = t.data || [], e(Website.automationTemplates)
            }
        })
    },
    addNewFunnel: function (e, t, i, n, a) {
        Tools.showWindow({
            isModal: !0,
            width: 520,
            customClass: "funnels-popup",
            markup: Templates.get("newFunnelSettingsMarkup"),
            noTitle: !0,
            noNav: !0,
            action: {
                onShow: function (e, t) { }
            },
            buttons: [Button(M.SAVE, Button.CLASS_MIDDLE_BLUE, (function (s, o) {
                var r = o.find('input[name="funnelName"]').val();
                ! function (e, a, s) {
                    Tools.makeWebsiteRequest({
                        action: "createFunnel",
                        data: {
                            template: e,
                            name: a,
                            toWebsite: t,
                            url: Tools.urlFromString(a, !0),
                            brandColor: i,
                            fields: JSON.stringify(n || [])
                        },
                        onOk: function (e) {
                            var t = e.data,
                                i = t.site,
                                n = t.funnel;
                            if (Website.id === i.id) {
                                Website.funnels.push(n);
                                for (var a = 0; a < Website.projectWebsites.length; ++a)
                                    if (Website.projectWebsites[a].id === i.id) {
                                        Website.projectWebsites[a] = i;
                                        break
                                    }
                            } else Website.projectWebsites.push(i);
                            s(n, i)
                        }
                    })
                }(e, r, (function (e, t) {
                    s.close(), a(e, t)
                }))
            })), Button.MIDDLE_CANCEL]
        })
    },
    init: function (e) {
        var t = !1,
            i = !1,
            n = null,
            a = function () {
                WebsiteSettings.set(n.settings || {}, n.menu || {}), GlobalStyling.enableFonts(Website.globalStyling), e && (e(), e = null), a = null, n = null, (Website.projectWebsites.length > 1 || Website.canAddWebsitesToProject || Website.canAddFunnelsToWebsite) && $(".switch-funnel-site").removeClass("none")
            };
        Tools.makeWebsiteRequest({
            action: "getWebsiteData",
            onOk: function (e) {
                var s = e.data;
                Website.hash = s.hash || "", Website.textAssistEnabled = !0 === s.textAssistEnabled, Website.subscriptionInfo = s.subscriptionInfo || {}, Website.pageGroups = s.pageGroups || [], Website.virtualPages = s.virtualPages || [], Website.systemPages = s.systemPages || [], Website.funnels = s.funnels || [], Website.popups = s.popups || [], Website.templateName = s.templateName || "", Website.websiteTitle = s.websiteTitle || "", Website.websiteTimezone = s.timezone || "UTC", Website.websiteTimezoneName = s.timezoneName || "UTC", Website.storeProcess = s.storeProcess, Website.storePriceWithTax = s.storePriceWithTax, Website.storeWeightUnit = s.storeWeightUnit || "kg", Website.memberGroups = s.memberGroups || [], Website.hasAccessToWebsite = s.accessWebsite, Website.hasAccessToPortfolio = s.accessPortfolio, Website.hasAccessToBlog = s.accessBlog, Website.hasAccessToStore = s.accessStore, Website.emailSettings = mergeUnique(s.emailSettings || {}, Website.EMPTY_EMAIL_SETTINGS, !0), Website.appsSettings = s.appsSettings || {}, Website.globalStyling = s.globalStyling || {}, Website.homePage = s.homePage, Website.globalStyling.colors = Website.globalStyling.colors || {}, Website.globalStyling.fonts = Website.globalStyling.fonts || [], Website.activeSite = getById(s.projectWebsites || [], Website.id), Website.projectWebsites = s.projectWebsites || [], Website.crmProperties = s.crmProperties || [], Website.crmTags = s.crmTags || [], Website.platformVars = s.platformVars || null, Website.personalizationFields = s.personalizationFields || [], Website.redirectRules = s.redirectRules || [], Website.projectName = s.projectName || "", Website.canAddWebsitesToProject = !0 === s.canAddWebsitesToProject, Website.canAddFunnelsToWebsite = !0 === s.canAddFunnelsToWebsite, Website.permissions = s.permissions || 0, Website.minPlanForStoreSubscriptions = s.minPlanForStoreSubscriptions, Website.storeSubscriptionAvailable = s.storeSubscriptionAvailable, Website.globalWidgets = s.globalWidgets || {}, Website.webhooks = s.webhooks || [], Website.apiKey = s.apiKey || "", Website.bookingOperators = s.bookingOperators || [], Website.bookingServices = s.bookingServices || [], Website.bookingOperatorsLimit = s.bookingOperatorsLimit || 0, Website.bookingServicesLimit = s.bookingServicesLimit || 0, Website.onboarding = s.onboarding || null, Website.marketing = s.marketing || {}, Website.addons = s.addons || [], Website.emailMarketingSettings = s.emailMarketingSettings || {}, Website.activeImports = s.activeImports || null, Website.countdownGeneratorUrlBase = s.countdownGeneratorUrlBase || "", Website.shouldUpgradeStripe = !!s.shouldUpgradeStripe, Website.firstOrderTime = s.firstOrderTime, s.templateWebsite && (Website.templateWebsite = !0), s.templateFunnel && (Website.templateFunnel = !0), Website.currentUserIsProjectOwner = -1 === Website.permissions, mergeUnique(Website.globalStyling.colors, {
                    primary: "#3e3e3e",
                    background: "#ffffff",
                    text: "#3e3e3e",
                    secondary1: "#028090",
                    secondary2: "#00A896",
                    secondary3: "#02C39A",
                    secondary4: "#F0F3BD"
                }), Website.setCurrencySymbols(s.storeCurrency || "USD", s.storeCurrencySymbol || "$", 0 === s.storeCurrencyPosition), n = s.settings || {}, i = !0, t && a(), WebComponents.State().set(Website), $body[Website.textAssistEnabled ? "addClass" : "removeClass"]("text-assist");
                try {
                    WebPlatform.Events.trigger(window, WebPlatform.Events.CONFIGURATION_CHANGED, Tools.getEventData(window.location.pathname))
                } catch (e) {
                    Log.error(e)
                }
            },
            onNotOk: function (e) {
                e.accessDenied && (n = {}, subscriptionInfo = {}, Website.emailSettings = null, Website.appsSettings = {}, Website.pageGroups = [], Website.virtualPages = [], Website.systemPages = [], Website.funnels = [], Website.popups = [], Website.websiteTitle = "", Website.websiteTimezone = "", Website.websiteTimezoneName = "", Website.storeWeightUnit = "", Website.memberGroups = [], Website.hasAccessToWebsite = !1, Website.hasAccessToPortfolio = !1, Website.hasAccessToBlog = !1, Website.hasAccessToStore = !1, Website.homePage = {}, Website.globalStyling = {}, Website.setCurrencySymbols("", "", !0), i = !0, t && a())
            }
        }), Tools.loadGridScripts((function () {
            t = !0, i && a()
        }))
    }
});
var Hook = function () {
    return {
        init: dummy,
        onDeactivate: dummy,
        onActivate: dummy,
        type: "",
        baseUrl: "",
        params: "",
        scriptBase: "",
        container: null,
        getInnerPage: FuncNotImplemented,
        invoke: function (e, t) {
            var i = !1;
            null !== this.activePage && (i = this.activePage.invoke(e, t)), !i && t in this && this[t](e)
        },
        activePage: null,
        pages: {},
        getContainer: function () {
            return this.container
        },
        getNavClass: dummy,
        onBeforeUrlLoad: dummy,
        shouldRefresh: function () {
            this.params = decodeURIComponent(CPanel.currentPage.replace(this.baseUrl, ""));
            var e = this.getInnerPage();
            if (null === e) return !1;
            $.isPlainObject(e) && !isUndefined(e.script) && (e = e.name);
            var t = this.pages[e];
            return t && t.initialized && this.activePage === t && t.hasAccess && t.samePageNavigationChangeWillRefresh
        },
        onRefresh: function (e) {
            this.activePage.onRefresh(e)
        },
        onUrlLoad: function (e) {
            var t = this;
            this.params = decodeURIComponent(CPanel.currentPage.replace(this.baseUrl, ""));
            var i = this.getInnerPage();
            if (null !== i) {
                var n = i;
                $.isPlainObject(i) && !isUndefined(i.script) && (n = i.script, i = i.name);
                var a = t.pages[i],
                    s = !isUndefined(a);
                s && a.initialized ? (t.activePage = a, a.show(e)) : (Hooks.addPageLoadCallback(i, (function (i) {
                    t.activePage = i, i.show(e)
                })), s || Tools.getScript(t.scriptBase + n + ".js").done((function (e, t) {
                    Log.log("loaded page: " + i)
                })).fail((function (e, t, i) {
                    Log.error(i), CPanel.showError(M.ERR_UNABLE_TO_LOAD_SCRIPTS)
                })))
            }
        },
        onAfterUrlLoad: dummy,
        onUrlUnload: function () {
            null !== this.activePage && (this.activePage.hide(), this.activePage = null)
        },
        onReady: function () {
            this.onAfterUrlLoad();
            try {
                WebPlatform.Events.trigger(window, WebPlatform.Events.PAGE_LOADED, Tools.getEventData(window.location.pathname))
            } catch (e) {
                Log.error(e)
            }
            CPanel.hideLoadingBar(Hooks.LOADING_BAR_NAME)
        }
    }
},
    Hooks = {
        LOADING_BAR_NAME: "HookLoadingBar",
        active: null,
        isNavHidden: !1,
        navigationClass: null,
        _pageLoadCallbacks: {},
        _hookLoadCallbacks: {},
        _mainLoadingBar: null,
        items: [],
        showMainLoadingBar: function (e, t) {
            null === Hooks._mainLoadingBar && (Hooks._mainLoadingBar = $(".working-area-wrapper-inner"));
            var i = Hooks._mainLoadingBar;
            null !== this.active && this.active === t && (i = this.active.hook.getContainer()), e = e || dummy, Hooks._mainLoadingBar.scrollTop(0), CPanel.showLoadingBar(Hooks.LOADING_BAR_NAME, i, e, !0)
        },
        hideMainLoadingBar: function () {
            CPanel.hideLoadingBar(Hooks.LOADING_BAR_NAME)
        },
        addHookLoadCallback: function (e, t) {
            Hooks._hookLoadCallbacks[e] ? Hooks._hookLoadCallbacks[e].push(t) : Hooks._hookLoadCallbacks[e] = [t]
        },
        addPageLoadCallback: function (e, t) {
            Hooks._pageLoadCallbacks[e] ? Hooks._pageLoadCallbacks[e].push(t) : Hooks._pageLoadCallbacks[e] = [t]
        },
        _runHook: function (e, t) {
            var i = this;
            i.active === e && i.active.hook && i.active.hook.shouldRefresh() ? i.active.hook.onRefresh(t) : Hooks.showMainLoadingBar((function () {
                var n = !1 === hasTemplate ? "no-nav" : e.hook.getNavClass() || "",
                    a = function () {
                        e.hook.onBeforeUrlLoad(), null !== i.active && (i.active.hook.onUrlUnload(), i.active.hook.getContainer().children(":not(.loadingBarContainer)").remove()), i.active !== e && (null !== i.active && i.active.hook.onDeactivate(), e.hook.onActivate()), e.hook.onUrlLoad(t), window.Intercom && window.Intercom("update"), i.active = e, a = null
                    };
                n !== i.navigationClass ? (i.navigationClass && $body.removeClass(i.navigationClass), i.isNavHidden || $body.addClass(n), i.navigationClass = n, a()) : a()
            }), e)
        },
        toggleNavigation: function () {
            this.isNavHidden = !this.isNavHidden, $body[this.isNavHidden ? "removeClass" : "addClass"](this.navigationClass)
        },
        notifyURLChange: function () {
            this.active && this.active.hook && this.active.hook.activePage && this.active.hook.activePage.onURLChange()
        },
        loadPage: function (e, t) {
            for (var i = 0; i < this.items.length; ++i) {
                var n = this.items[i];
                if (null !== (e.indexOf("#") > -1 ? e.substr(0, e.indexOf("#")) : e).match(n.url)) {
                    if (isUndefined(n.hook)) {
                        Hooks.addHookLoadCallback(n.url, (function (e) {
                            Hooks._runHook(e, t)
                        }));
                        var a = n.scriptBase || resources + "/scripts/";
                        Tools.getScript(a + n.scripts[0]).done((function (e, t) {
                            Log.log("loading required scripts: " + t)
                        })).fail((function (e, t, i) {
                            Log.error(i), CPanel.showError(M.ERR_UNABLE_TO_LOAD_SCRIPTS)
                        }))
                    } else this._runHook(n, t);
                    return
                }
            }
            CPanel.showError(M.ERR_INVALID_PAGE)
        },
        registerHook: function (e, t) {
            mergeUnique(t, Hook());
            for (var i = 0; i < this.items.length; ++i) {
                var n = this.items[i];
                if (e === n.type) {
                    n.hook = t, t.type = e, t.baseUrl = contextPath + "/me/" + e, t.scriptBase = n.scriptBase || resources + "/scripts/", n.hook.init();
                    for (var a = Hooks._hookLoadCallbacks[n.url] || [], s = 0; s < a.length; ++s) a[s](n);
                    return
                }
            }
        },
        registerPage: function (e, t, i, n, a) {
            for (var s = null, o = 0; o < this.items.length; ++o)
                if (e === this.items[o].type) {
                    s = this.items[o].hook;
                    break
                } if (null !== s) {
                    var r = mergeUnique(a, InnerPage);
                    s.pages[t] = r, r.init(s, s.getContainer(), t, i, n, (function (e) {
                        e.onInit();
                        for (var i = Hooks._pageLoadCallbacks[t] || [], n = 0; n < i.length; ++n) i[n](e)
                    }))
                }
        },
        init: function (e) {
            e = e || [], Array.prototype.push.apply(this.items, e)
        }
    },
    InnerPage = {
        hook: null,
        container: null,
        name: null,
        htmlSource: "",
        markup: null,
        hasAccess: !1,
        initialized: !1,
        style: null,
        invoke: function (e, t) {
            return t in this && (this[t](e), !0)
        },
        getContainer: function () {
            return this.hook.getContainer()
        },
        getActiveFunnel: function () {
            return null
        },
        getActiveFunnelStep: function () {
            return null
        },
        triggerShowOnHtmlSourceLoad: !1,
        ready: function () {
            this.hook.onReady()
        },
        show: function (e) {
            null !== this.markup ? (null !== this.style && (this.style[0].disabled = !1), this.onRenderMarkup(), this.hasAccess ? this.onShow(e) : this.ready()) : this.triggerShowOnHtmlSourceLoad = !0
        },
        onRenderMarkup: function () {
            this.container = this.hook.getContainer(), this.container.append(this.markup)
        },
        onInit: function () {
            this.initialized = !0
        },
        onShow: function (e) {
            this.ready()
        },
        onURLChange: dummy,
        onHide: dummy,
        hide: function () {
            null !== this.style && (this.style[0].disabled = !0);
            try {
                this.onHide()
            } catch (e) {
                Tools.reportJSError(e, {
                    name: this.name
                })
            }
        },
        init: function (e, t, i, n, a, s) {
            var o = this;
            this.hook = e, this.container = t, this.name = i, this.htmlSource = n, this.styleSource = a, a && (this.style = $(format(Templates.get("componentStyleDeclaration"), "resources", resources, "r", Math.random(), "name", a)), $head.append(this.style)), n ? Tools.makeWebsiteRequest({
                action: "requestAditionalPage",
                data: {
                    page: n
                },
                onOk: function (e) {
                    o.hasAccess = !1 !== e.hasAccess, o.markup = e.data, o.triggerShowOnHtmlSourceLoad && (o.triggerShowOnHtmlSourceLoad = !1), s(o, !1)
                }
            }) : (o.hasAccess = !0, null === this.markup && (this.markup = ""), s(o, !0))
        }
    },
    PopupManager = function () {
        var e = [],
            t = !1,
            i = null,
            n = 9e4,
            a = function (t) {
                if (!($body.find(".simple-tooltip:visible").length > 0) && 0 !== e.length) {
                    var i = e[e.length - 1];
                    i.isModal || i.canClose && i.close()
                }
            },
            s = function (e) {
                27 === e.keyCode && a()
            };
        return {
            init: function () {
                t || (t = !0, i = $(Templates.get("popupOverlay")).appendTo($body).click(a), $document.keyup(s))
            },
            addPopup: function (t, a) {
                a.addClass("popup-visible"), WebPlatform.onTransitionEnd(a, (function () {
                    a.addClass("no-transform")
                })), e.push(t), i.css({
                    zIndex: ++n,
                    opacity: t.isModal || t.getOptions().withDarkBackground ? .8 : 0
                }), t.setZIndex(++n), i.data("popup-added"), i.data("current-state", "add")
            },
            removePopup: function (t, a) {
                a.removeClass("no-transform popup-visible");
                for (var s = e.length - 1; s >= 0; --s)
                    if (e[s] === t) {
                        e.splice(s, 1);
                        break
                    } if (e.length > 0) {
                        t = e[e.length - 1];
                        return i.css({
                            zIndex: ++n,
                            opacity: t.isModal || t.getOptions().withDarkBackground ? .8 : 0
                        }), void t.setZIndex(++n)
                    }
                i.css("opacity", 0), i.data("current-state", "remove"), Tools.delay(300, (function () {
                    "remove" === i.data("current-state") ? i.css({
                        zIndex: -1e3
                    }) : i.removeData("current-state")
                }))
            },
            hasActivePopup: function () {
                return e.length
            },
            closeAllPopups: function (t) {
                e.length ? e[e.length - 1].close((function () {
                    PopupManager.closeAllPopups(t)
                })) : t()
            }
        }
    }(),
    CPanel = new function () {
        var e = !(!window.history || !window.history.pushState),
            t = [],
            i = [];
        this.refreshSubscriptionInformation = function () {
            if (Website.subscriptionInfo.subscription) {
                Log.log(Website.subscriptionInfo);
                Website.subscriptionInfo.subscription;
                var e = Website.subscriptionInfo.status,
                    t = Website.subscriptionInfo.isBandwidthLimitReached,
                    i = Website.subscriptionInfo.isBandwidthLimitAbove90Percent,
                    n = Website.subscriptionInfo.storageLimitReached,
                    a = $body.find(".notification-lane");
                $body.addClass("with-notification-lane"), a.removeClass("expired"), "TRIAL" === e ? a.find("span").empty().text(M.STATUS_TRIAL_MSG).end().removeClass("none") : "EXPIRED" === e ? a.addClass("expired").find("span").empty().text(M.STATUS_EXPIRED_MSG).end().removeClass("none") : t ? a.addClass("expired").find("span").empty().text(M.BANDWIDTH_LIMIT_REACHED).end().removeClass("none") : n ? a.find("span").empty().text(M.STORAGE_LIMIT_REACHED).end().removeClass("none") : i ? a.addClass("expired").find("span").empty().text(M.BANDWIDTH_LIMIT_AT_90_PERCENT).end().removeClass("none") : ($body.removeClass("with-notification-lane"), a.addClass("none"))
            }
        }, this.haveUnsavedChanges = !1;
        this.checkIfNeedsSave = function (e) {
            CPanel.haveUnsavedChanges ? CPanel.showUnsavedChangesPrompt((function () {
                CPanel.setChanged(!1), (e || dummy)(!0)
            }), dummy) : (e || dummy)(!1)
        }, this.showUnsavedChangesPrompt = function (e, t) {
            Tools.prompt(M.UNSAVED_CHANGES_TITLE, M.UNSAVED_CHANGES_MESSAGE, t, e, M.UNSAVED_CHANGES_STAY_BTN, M.UNSAVED_CHANGES_DISCARD_BTN, !1, "unsaved-changes-dlg")
        }, this.setChanged = function (e) {
            CPanel.haveUnsavedChanges = !1 !== e
        }, this.getUserWebsites = function (e) {
            e = e || dummy, Tools.makeWebsiteRequest({
                action: "listWebsites",
                onOk: function (t) {
                    userWebsites = t.data, e(userWebsites)
                }
            })
        }, this.createNewSite = function (e, t, i) {
            isUndefined(e) && (e = null), Tools.makeWebsiteRequest({
                action: "addNewWebsite",
                data: {
                    name: t || "",
                    template: e,
                    category: i
                },
                method: "post",
                onOk: function (e) {
                    window.location = e.data.redirectTo
                }
            })
        }, this.currentPage = window.location.pathname, this.loadPageOnInit = !0, this.init = function (i) {
            $window.resize(CPanel.triggerViewportChange), Hooks.init(i);
            var n = $("#cpanel-ajax-overlay");
            $document.ajaxStart((function () {
                window.HIDE_AJAX_OVERLAY && n.addClass("none"), n.show().delay(1e3).queue((function (e) {
                    $(this).addClass("slow-ajax"), e()
                }))
            })).ajaxStop((function () {
                n.removeClass("slow-ajax").clearQueue().hide(), window.HIDE_AJAX_OVERLAY && (window.HIDE_AJAX_OVERLAY = !1, n.removeClass("none"))
            })), PopupManager.init(), e && ($body.on("click", "a[rel='tab']", (function (e) {
                var t = $(this),
                    i = t.attr("href");
                return !0 === t.data("discardChanges") && CPanel.setChanged(!1), CPanel.goToUrl(i), !1
            })).mousedown((function (e) {
                $body.data("bodyclicktarget", e.target)
            })).mouseup((function (e) {
                if (0 !== t.length && e.target === $body.data("bodyclicktarget")) {
                    for (var i = []; 0 !== t.length;) {
                        var n = t.shift();
                        try {
                            !!n(e) && i.push(n)
                        } catch (e) {
                            Log.error(e)
                        }
                    }
                    t = i
                }
            })), $window.bind("popstate", (function (e) {
                var t = e && e.originalEvent && e.originalEvent.state ? e.originalEvent.state.data : null;
                window.location.pathname !== CPanel.currentPage ? CPanel.haveUnsavedChanges ? CPanel.showUnsavedChangesPrompt((function () {
                    CPanel.setChanged(!1), CPanel.currentPage = window.location.pathname, Hooks.loadPage(CPanel.currentPage, t)
                }), (function () {
                    try {
                        window.history.pushState({
                            path: CPanel.currentPage,
                            data: t
                        }, "", CPanel.currentPage)
                    } catch (e) {
                        Log.error(e)
                    }
                })) : (CPanel.currentPage = window.location.pathname, Hooks.loadPage(CPanel.currentPage, t)) : Hooks.notifyURLChange()
            }))), $body.on("click", "[rel='toggle']", (function (e) {
                if ($(e.target).hasClass("no-toggle")) e.stopPropagation();
                else {
                    var t = $(this),
                        i = $(t.data("toggle") || []);
                    Tools.toggleElement(i, t);
                    var n = t.data("action") || "";
                    n && Hooks.active.hook.invoke(e, n)
                }
            })), $body.on("click", '[rel="action"]', (function (e) {
                var t = $(this);
                if (!t.hasClass("disabled")) {
                    var i = t.data("action"),
                        n = t.data("target");
                    if (i)
                        if (n && n in window && i in window[n]) try {
                            window[n][i](e)
                        } catch (e) {
                            Log.error(e)
                        } else null !== Hooks.active && Hooks.active.hook.invoke(e, i)
                }
            })), $body.tooltip({
                selector: ".cpanel-tooltip, .button-tooltip, .window-tooltip",
                container: "body",
                title: function () {
                    var e = $(this).data("tooltip");
                    return T[e] || e
                },
                placement: function (e, t) {
                    return "auto " + (!0 === (t = $(t)).data("top") ? "top" : !0 === t.data("bottom") ? "bottom" : !0 === t.data("left") ? "left" : "right")
                }
            }).on("shown.bs.tooltip", ".cpanel-tooltip, .button-tooltip, .window-tooltip", (function (e, t) {
                var i = $(this);
                this.delayId && Tools.cancelDelay(this.delayId), this.delayId = Tools.delay(i.data("timeout") || 1500, (function () {
                    if (i[0].delayId = !1, jQuery.contains(document, i[0])) i.tooltip("hide");
                    else {
                        Log.log("removing forgotten tooltip...");
                        var e = i.attr("aria-describedby");
                        e ? $("#" + e).fadeOut("fast", (function () {
                            $(this).remove()
                        })) : $body.children(".tooltip").remove()
                    }
                    i = null
                }))
            })), $window.on("keydown", (function (e) {
                if (e.ctrlKey || e.metaKey)
                    for (var t = Tools._shortcutListeners, i = String.fromCharCode(e.which).toLowerCase(), n = 0; n < t.length; ++n)
                        if (t[n].key.toLowerCase() === i && !1 !== t[n].action(e.shiftKey, e.altKey)) return e.preventDefault(), !1
            })), $document.on("mousewheel DOMMouseScroll", ".cpanel-contain-scroll", (function (e) {
                var t = e.wheelDelta || e.originalEvent && e.originalEvent.wheelDelta || -e.detail,
                    i = this.scrollTop + $(this).outerHeight() - this.scrollHeight >= 0,
                    n = this.scrollTop <= 0;
                (t < 0 && i || t > 0 && n) && e.preventDefault()
            })), $(window).on("beforeunload", (function (e) {
                if (CPanel.haveUnsavedChanges) return (e || window.event).returnValue = M.UNSAVED_CHANGES_PROMPT, M.UNSAVED_CHANGES_PROMPT
            })), Website.init((function () {
                CPanel.refreshSubscriptionInformation(), CPanel.loadPageOnInit && Hooks.loadPage(CPanel.currentPage), WebComponents.onDocumentReady(), Website.shouldUpgradeStripe && WebComponents.showStripeUpgradePrompt()
            })), BindingFactory.add(Website, "websiteTitle", document.getElementById("currentWebsiteTitle"), "innerHTML")
        }, this.addBodyClickListener = function (e, i) {
            isUndefined(i) && (i = !0), i ? setTimeout($.proxy(this.addBodyClickListener, this, e, !1), 0) : t.push($.isFunction(e) ? e : dummy)
        }, this.removeBodyClickListener = function (e) {
            for (var i = 0; i < t.length; ++i) t[i] === e && t.splice(i--, 1)
        }, this.redirect = function (e) {
            CPanel.setChanged(!1), CPanel.disableUI(!1), window.location.href = e
        }, this.goToUrl = function (t, i, n) {
            if (!0 === i || t !== CPanel.currentPage) {
                var a = function () {
                    if (e) {
                        try {
                            window.history.pushState({
                                path: t,
                                data: n
                            }, "", t)
                        } catch (e) {
                            Log.error(e)
                        }
                        CPanel.currentPage = window.location.pathname, Hooks.loadPage(CPanel.currentPage, n)
                    } else window.location = t
                };
                CPanel.haveUnsavedChanges ? CPanel.showUnsavedChangesPrompt((function () {
                    CPanel.setChanged(!1), a()
                })) : a()
            }
        }, this.showError = Tools.showError, this.leaveFeedback = function () {
            Tools.showWindow({
                title: "",
                width: 535,
                markup: Templates.get("feedbackStructure"),
                customClass: "feedback-modal",
                action: {
                    onShow: function (e, t) {
                        t.find(".cpanel-popup-content").css("max-height", "none"), t.find("textarea, select, a").keyup((function (t) {
                            27 === t.keyCode && e.close()
                        })), t.find(".cpanel-popup-title").hide(), t.find(".cpanel-popup-nav").hide(), t.find(".sendFeedback").click((function () {
                            var i = t.find("select").val(),
                                n = t.find("textarea").val();
                            "" !== i && "" !== n ? (n = "(From page: " + window.location + ") - " + n, Tools.makeWebsiteRequest({
                                action: "sendFeedback",
                                data: {
                                    subject: i,
                                    message: n
                                },
                                method: "post",
                                onOk: function (t) {
                                    Tools.showAutohideMessage(1200, M.THANK_YOU), e.close()
                                }
                            })) : CPanel.showError(M.ERR_FILL_ALL_FIELDS)
                        }))
                    }
                }
            })
        }, this.showLoadingBar = function (e, t, n, a, s) {
            n = n || dummy;
            for (var o = 0; o < i.length; ++o)
                if (i[o].name === e) return void n();
            i.push(LoadingBar(e, t, n, !0 === a, s))
        }, this.hideLoadingBar = function (e, t) {
            for (var n = 0; n < i.length; ++n)
                if (i[n].name === e) return i[n].hide(t), void i.splice(n, 1);
            Tools.delay(1, t)
        }, this.VIEWPORT_CHANGE_EVENT = "mainviewportchange", this.triggerViewportChange = function () {
            $document.trigger(CPanel.VIEWPORT_CHANGE_EVENT)
        }, this.disableUI = function (e) {
            $body.find(">.cpanel-popup-overlay").addClass("disabled-ui"), !0 === e && $("#cpanel-ajax-overlay").addClass("slow-ajax")
        }, this.enableUI = function () {
            $body.find(">.cpanel-popup-overlay").removeClass("disabled-ui")
        }, this.showHelpGuide = function (e) {
            var t = $(e.target),
                i = t.data("url") || t.closest("a").data("url") || "";
            i && Tools.showInlinePopup({
                isModal: !1,
                title: "",
                width: window.helpGuideWidth || 640,
                overflowY: "hidden",
                markup: '<iframe allowfullscreen class="help-frame" src="' + i + '"></iframe>',
                action: {
                    onShow: function (e, t) { },
                    onHide: function () { }
                },
                buttons: [],
                customClass: "helpWindow"
            })
        }, this.showHelpVideos = function (e) {
            var t = $("#helpVideos");
            Tools.showInlinePopup({
                isModal: !1,
                title: "",
                width: t.data("width"),
                overflowY: "hidden",
                markup: t.html(),
                action: {
                    onShow: function (e, t) { },
                    onHide: function () { }
                },
                buttons: [],
                customClass: "helpWindow"
            })
        }, this.requestCustomerData = function (e) {
            Tools.showWindow({
                isModal: !0,
                width: 450,
                title: M.CUSTOMER_DATA_REQUEST,
                markup: Templates.get("customerDataRequestTemplate"),
                buttons: [Button(M.SEND_REQUEST, Button.CLASS_MIDDLE_BLUE, (function (e, t) {
                    var i = t.find('[name="email"]').val(),
                        n = t.find('[name="type"]').val();
                    Tools.makeWebsiteRequest({
                        action: "data-request",
                        data: {
                            type: n,
                            email: i
                        },
                        onOk: function () {
                            e.close(), Tools.showCornerMessage(3e3, M.REQUEST_SENT, Tools.TOOLTIP_TYPE_SUCCESS)
                        }
                    })
                })), Button.MIDDLE_CANCEL]
            })
        }, this.startNewProject = function () {
            Tools.prompt(M.CREATE_PROJECT_TITLE, M.CREATE_PROJECT_PROMPT, (function () {
                Tools.promptForInput(M.START_PROJECT, M.RENAME_PROJECT_MESSAGE, (function (e) {
                    Tools.makeWebsiteRequest({
                        action: "createNewProject",
                        data: {
                            name: e
                        },
                        onOk: function (e) {
                            CPanel.redirect("https://" + e.data + Website.pagePrefix)
                        }
                    })
                }))
            }))
        }, this.createNewWebsite = function () {
            Website.canAddWebsitesToProject && Tools.prompt(M.ADD_WEBSITE_TITLE, M.ADD_WEBSITE_MESSAGE, (function () {
                CPanel.createNewSite(null, null, null)
            }))
        };
        var n = -1;
        this.incrementModCount = function () {
            ++n
        }, this.checkWebsiteState = function (e) {
            n < 0 ? n = e : n !== e && (n = e, Tools.delay(300, (function () {
                Website.init((function () {
                    CPanel.refreshSubscriptionInformation()
                }))
            })))
        }, this.restoreDeletedWebsite = function () {
            Website.canAddWebsitesToProject && Tools.makeWebsiteRequest({
                action: "listDeletedWebsites",
                onOk: function (e) {
                    e.data && e.data.length ? WebComponents.Websites.listWebsites(M.RESTORE_WEBSITE, M.RESTORE_WEBSITE_MESSAGE, e.data, (function (e, t) {
                        Tools.prompt(M.RESTORE_DELETED_WEBSITE, M.RESTORE_WEBSITE_DESC, (function () {
                            Tools.makeWebsiteRequest({
                                action: "restoreDeletedWebsite",
                                data: {
                                    website: e.id
                                },
                                onOk: function (e) {
                                    t.close(), window.location.href = "https://" + e.data + "/me/website"
                                }
                            })
                        }))
                    })) : Tools.showError(M.RESTORE_WEBSITE_NO_ITEMS)
                }
            })
        }, this.restoreDeletedFunnel = function () {
            Website.canAddWebsitesToProject && Tools.makeWebsiteRequest({
                action: "listDeletedFunnels",
                onOk: function (e) {
                    e.data && e.data.length ? WebComponents.Websites.listWebsites(M.RESTORE_FUNNEL, M.RESTORE_FUNNEL_MESSAGE, e.data, (function (e, t) {
                        Tools.prompt(M.RESTORE_DELETED_FUNNEL, M.RESTORE_FUNNEL_DESC, (function () {
                            Tools.makeWebsiteRequest({
                                action: "restoreDeletedFunnel",
                                data: {
                                    funnel: e.id
                                },
                                onOk: function (e) {
                                    t.close(), window.location.href = "https://" + e.data + "/me/website"
                                }
                            })
                        }))
                    })) : Tools.showError(M.RESTORE_FUNNEL_NO_ITEMS)
                }
            })
        }, this.initiateExport = function (e, t, i) {
            Tools.makeWebsiteRequest({
                action: "export",
                data: {
                    type: e,
                    params: JSON.stringify(t)
                },
                onOk: function (t) {
                    Website.onImportExportTaskStarted(e), Tools.showWindow({
                        noNav: !0,
                        noTitle: !0,
                        width: 500,
                        withDarkBackground: !0,
                        isModal: !1,
                        showCloseButton: !0,
                        markup: format(Templates.get("confirmationMessage"), "message", i)
                    })
                }
            })
        }, this.showPop = function () {
            var e = $("#dynamicDataPopup");
            Tools.showWindow({
                isModal: !1,
                noTitle: !0,
                width: e.data("width"),
                customClass: "dynamic-data-popup",
                markup: e.html(),
                noNav: !0,
                action: {
                    onShow: function (e, t) { }
                }
            })
        }, this.showLearnPopup = function () {
            Tools.showInlinePopup({
                isModal: !1,
                noTitle: !0,
                width: 850,
                customClass: "learn-popup",
                markup: Templates.get("learnPopup"),
                noNav: !0,
                action: {
                    onShow: function (e, t) { }
                }
            })
        }, this.showProfilePopup = function (e) {
            var t = "ACTIVE" === accountStatus ? M.ACCOUNT_STATUS_ACTIVE : "TRIAL" === accountStatus ? M.ACCOUNT_STATUS_TRIAL : M.ACCOUNT_STATUS_EXPIRED,
                i = "EXPIRED" === accountStatus ? "red" : "ACTIVE" === accountStatus ? "green" : "",
                n = "ACTIVE" === accountStatus ? "none" : "";
            Tools.showFloatingPopup({
                markup: WebPlatform.escapeFormat(Templates.get("profilePopupMarkup"), "projectName", Website.projectName, "statusClass", i, "statusText", t, "upgradeClass", n),
                width: 300,
                target: e.target,
                customClass: "floating-popup-list",
                action: {
                    onShow: function (e, t) {
                        t.on("click", "a", (function () {
                            e.close()
                        }))
                    }
                }
            })
        }, this.showHelperVideo = function (e) {
            if (null !== Website.onboarding) {
                var t = $(e.currentTarget).closest("[data-key]").data("key") || "",
                    i = t && Website.onboarding[t] || "";
                if ("" !== i) {
                    var n = this.getEmbedVideo(i);
                    "" !== n && Tools.showWindow({
                        isModal: !1,
                        title: "",
                        noNav: !0,
                        withDarkBackground: !0,
                        noTitle: !0,
                        markup: format(Templates.get("introPopup"), "titleclz", "none", "textclz", "none", "title", "", "text", "", "video", n, "clz", "none"),
                        icon: Popup.ICON_ADD,
                        width: 850
                    })
                }
            }
        }, this.showHelperVideoForPage = function (e) {
            var t = WebPlatform.getObjectFromLocalStorage("show-video", {});
            if (!(null === Website.onboarding || t && t[e])) {
                var i = Website.onboarding[e] || "";
                if ("" !== i) {
                    var n = this.getEmbedVideo(i);
                    if ("" !== n) {
                        t[e] = !0, WebPlatform.setObjectToLocalStorage("show-video", t);
                        var s = a(e);
                        Tools.showWindow({
                            isModal: !1,
                            withDarkBackground: !0,
                            title: "",
                            noNav: !0,
                            noTitle: !0,
                            markup: format(Templates.get("introPopup"), "titleclz", "", "textclz", "", "title", s.title, "text", s.text, "video", n, "clz", "funnelUsers" === e ? "" : "none"),
                            icon: Popup.ICON_ADD,
                            width: 850
                        })
                    }
                }
            }
        };
        this.getEmbedVideo = function (e) {
            return -1 !== (e = function (e) {
                switch (e) {
                    case "https://vimeo.com/572560363":
                        return "https://web-repository.wistia.com/medias/upmadtjiii";
                    case "https://vimeo.com/572560749":
                        return "https://web-repository.wistia.com/medias/8ndlwjsplu";
                    case "https://vimeo.com/572561007":
                        return "https://web-repository.wistia.com/medias/sq523yau9o";
                    case "https://vimeo.com/572560538":
                        return "https://web-repository.wistia.com/medias/qsr2sxk5z5"
                }
                return e
            }(e)).indexOf("youtube") || -1 !== e.indexOf("youtu.be") ? Tools.generateYouTubeEmbed(e) : -1 !== e.indexOf("vimeo") ? Tools.generateVimeoEmbed(e) : -1 !== e.indexOf("wistia") ? Tools.generateWistiaEmbed(e) : ""
        }, this.addCustomNavigationItems = function (e) {
            for (var t = 0; t < e.length; ++t) {
                var i = e[t];
                window.hooks.push({
                    url: new RegExp("^" + contextPath + "/me/" + i.path + "$"),
                    scripts: ["modules/hooks.js"],
                    type: "custom" + t
                })
            }
            $((function () {
                for (var t = "", i = 0; i < e.length; ++i) {
                    ! function (e, i) {
                        e.tab ? t += '<a id="customAreaBtn' + i + '" href="' + e.tab + '" target="_blank" class="top-bar-nav-item"><span class="' + e.buttonClass + '">' + e.buttonLabel + "</span></a>" : (t += '<a id="customAreaBtn' + i + '" href="/me/' + e.path + '" rel="tab" class="top-bar-nav-item"><span class="' + e.buttonClass + '">' + e.buttonLabel + "</span></a>", Hooks.registerHook("custom" + i, {
                            getInnerPage: function () {
                                return "customPage" + i
                            },
                            init: function () {
                                this.container = $(".working-area-wrapper-inner")
                            },
                            getNavClass: function () {
                                return "narrow-nav"
                            },
                            onActivate: function () {
                                document.title = e.title, $("#customAreaBtn" + i).addClass("active")
                            },
                            onDeactivate: function () {
                                $("#customAreaBtn" + i).removeClass("active")
                            },
                            onAfterUrlLoad: function () { }
                        }), Hooks.registerPage("custom" + i, "customPage" + i, null, null, {
                            markup: '<div class="working-area" id="customTab' + i + '" style="height: 100%; padding: 0;overflow: hidden;"><iframe style="border: 0; width: 100%; height: 100%" src="' + e.iframe + '"></iframe></div>'
                        }))
                    }(e[i], i)
                }
                $("#marketingBtn").after(t)
            }))
        };
        var a = function (e) {
            return {
                websiteUsers: {
                    title: M.HEY + " " + userName.split(" ")[0],
                    text: M.CHECK_VIDEO
                },
                funnelUsers: {
                    title: M.HEY + " " + userName.split(" ")[0],
                    text: M.CHECK_VIDEO
                },
                booking: {
                    title: M.HEY + " " + userName.split(" ")[0],
                    text: M.CHECK_VIDEO
                },
                store: {
                    title: M.HEY + " " + userName.split(" ")[0],
                    text: M.CHECK_VIDEO
                },
                crm: {
                    title: M.HEY + " " + userName.split(" ")[0],
                    text: M.CHECK_VIDEO
                }
            }[e]
        }
    };
$((function () {
    window.$window = $(window), window.$document = $(document), window.$body = $(document.body), window.$head = $(document.head), window.isMobileView = $window.width() <= 768, Hooks.isNavHidden = window.isMobileView, !0 !== window.isIELessThan10 ? (window.location.pathname.startsWith("/me/edit-template") || window.location.pathname.startsWith("/me/edit-email-template") || $(".logo-navs-wrapper").removeClass("none"), CPanel.init(window.hooks), window.Intercom && window.intercomAppId && window.Intercom("boot", {
        app_id: window.intercomAppId,
        email: userEmail,
        name: userName,
        user_id: (platformId > 1 ? "" : "s-") + userId,
        subdomain: subdomain,
        custom_domain: customDomain,
        user_locale: locale,
        site_category: category,
        account_type: accountType,
        account_status: accountStatus,
        created_at: createdTime,
        referer: userRef,
        accepts_product_notifications: acceptsProductNotifications,
        accepts_marketing_notifications: acceptsMarketingNotifications,
        template_id: userTemplateId || -1
    }), (window.gist || window.convertfox) && (gist || convertfox).identify("" + userId, {
        email: userEmail,
        name: userName,
        subdomain: subdomain,
        custom_domain: customDomain,
        user_locale: locale,
        site_category: category,
        account_type: accountType,
        account_status: accountStatus,
        created_at: createdTime,
        referer: userRef,
        accepts_product_notifications: acceptsProductNotifications,
        accepts_marketing_notifications: acceptsMarketingNotifications,
        template_id: userTemplateId || -1
    })) : document.body.innerHTML = '<h1 style="text-align: center; padding-top: 10%; color: #e2e2e2;">' + M.ERR_BROWSER_UNSUPPORTED + "</h1>"
}));
var Binding = function (e, t) {
    var i = this,
        n = [],
        a = [],
        s = e[t],
        o = function (e) {
            s = e, n.forEach((function (t) {
                t.element[t.attribute] = e
            })), a.forEach((function (e) {
                e && e()
            }))
        };
    return Object.defineProperty(e, t, {
        get: function () {
            return s
        },
        set: o
    }), e[t] = s, {
        add: function (e, t, a) {
            var r = {
                element: e,
                attribute: t
            };
            return a && (e.addEventListener(a, (function (i) {
                o(e[t])
            })), r.event = a), n.push(r), e[t] = s, i
        },
        addListener: function (e) {
            return e && (a.push(e), e()), i
        },
        remove: function (e) {
            for (var t = 0; t < n.length; ++t) n[t].element === e && n.splice(t--, 1)
        },
        removeListener: function (e) {
            for (var t = 0; t < a.length; ++t) a[t] === e && a.splice(t--, 1)
        },
        isEmpty: function () {
            return 0 === n.length && 0 === a.length
        }
    }
},
    BindingFactory = {
        add: function (e, t, i, n, a) {
            if (i) {
                e.__bindings || (e.__bindings = {});
                var s = e.__bindings;
                s[t] || (s[t] = Binding(e, t)), s[t].add(i, n, a)
            }
        },
        addListener: function (e, t, i) {
            if (i) {
                e.__bindings || (e.__bindings = {});
                var n = e.__bindings;
                n[t] || (n[t] = Binding(e, t)), n[t].addListener(i)
            }
        },
        remove: function (e, t) {
            if (e.__bindings)
                for (var i in e.__bindings) {
                    var n = e.__bindings[i];
                    n.remove(t), n.isEmpty() && (e.__bindings[i] = null, delete e.__bindings[i])
                }
        },
        removeListener: function (e, t) {
            if (e.__bindings)
                for (var i in e.__bindings) {
                    var n = e.__bindings[i];
                    n.removeListener(t), n.isEmpty() && (e.__bindings[i] = null, delete e.__bindings[i])
                }
        }
    };
Hooks.registerHook("dashboard", {
    rootContainer: null,
    _boundElements: [],
    getInnerPage: function () {
        if (this.params.startsWith("/me/settings")) {
            var e = this.params.substring(12);
            switch (e.startsWith("/") && (e = e.substring(1)), e) {
                case "access":
                    return "settingsAccess";
                case "billing":
                    return "chargebee" === window.SystemPaymentProcessorType ? "settingsBillingChargebee" : "settingsBilling";
                case "billing/invoices":
                    return "settingsInvoices";
                case "domain":
                    return "settingsDomain";
                default:
                    return "settingsAccount"
            }
        } else {
            var t = /^\/([a-z-]+)(\/?.*)$/gi.exec(this.params.toLowerCase());
            switch (null !== t && (t = t[1]), t) {
                case "themes":
                    return "dashboardThemes";
                case "misc":
                case "misc":
                    return "dashboardMisc";
                case "wl":
                    return "dashboardWLOffer";
                case "affiliate":
                    return "dashboardAffiliate";
                case "dashboard":
                case "messages":
                    return "invalidPage";
                default:
                    return "dashboardAnalytics"
            }
        }
    },
    init: function () {
        this.container = $(".working-area-wrapper-inner")
    },
    getNavClass: function () {
        return "wide-nav"
    },
    onActivate: function () {
        if ($(".working-area-wrapper").addClass("dashboard-area"), this.rootContainer = this.container, hasTemplate) {
            var e = $(Templates.get("dashboardRootMarkup"));
            Website.hasPermission(Permission.BILLING) || e.find('[data-menu="billing"]').parent().remove(), Website.hasPermission(Permission.ACCESS) || e.find('[data-menu="access"]').parent().remove(), Website.hasPermission(Permission.ANALYTICS) || e.find('[data-menu=""]').parent().remove(), window.showAffiliateProgramDetails || e.find('[data-menu="affiliate"]').parent().remove(), platformId > 1 && e.find('[data-menu="wl"]').parent().remove(), this.rootContainer.append(e);
            var t = this.rootContainer.find('[data-role="project-name"]')[0];
            this._boundElements = [t], BindingFactory.add(Website, "projectName", t, "innerText"), document.title = Website.projectName + " - " + M.DASHBOARD_TITLE, $("#dashBtn").addClass("active")
        } else this.rootContainer.append(Templates.get("dashboardRootMarkupNoTemplate")), document.title = M.DASHBOARD_TITLE;
        this.container = this.rootContainer.find("#main-container")
    },
    onDeactivate: function () {
        $(".working-area-wrapper").removeClass("dashboard-area"), (this._boundElements || []).forEach((function (e) {
            BindingFactory.remove(Website, e)
        })), this._boundElements = null, $("#dashBtn").removeClass("active"), this.container = $(".working-area-wrapper-inner"), this.container.find(".new-dashboard-wrapper").remove(), this.rootContainer = null
    },
    onAfterUrlLoad: function () {
        var e = this.params.split("/"),
            t = 0 === e.length ? "" : e[e.length - 1];
        $(".upper-navigation").find(".active").removeClass("active").end().find('[data-menu="' + t + '"]').addClass("active");
        var i = 0,
            n = 0;
        Website.projectWebsites.forEach((function (e) {
            "WEBSITE" === e.type ? (++i, n += e.funnels) : ++n
        }));
        var a = "";
        i > 0 && (a = i + " " + (1 === i ? M.WEBSITE : M.WEBSITES)), n > 0 && (i > 0 && (a += " / "), a += n + " " + (1 === n ? M.FUNNEL : M.FUNNELS)), this.rootContainer.find('[data-role="website-count"]').text(a)
    },
    renameProject: function () {
        Tools.promptForInput(M.RENAME_PROJECT, M.RENAME_PROJECT_MESSAGE, Website.projectName, (function (e) {
            Tools.makeWebsiteRequest({
                action: "renameProject",
                method: "post",
                data: {
                    id: currentProjectId,
                    name: e
                },
                onOk: function (t) {
                    Website.projectName = e
                }
            })
        }))
    },
    switchProject: function () {
        UITools.switchProject()
    }
}), Hooks.registerPage("dashboard", "invalidPage", null, null, {
    markup: "",
    onShow: function () {
        var e = this;
        Tools.delay(10, (function () {
            e.ready(), CPanel.goToUrl("/me/dashboard")
        }))
    }
}), Hooks.registerHook("crm", {
    getInnerPage: function () {
        var e, t, i = "",
            n = "",
            a = "",
            s = /^\/([a-z]*)\/?([a-z]*)\/?([a-z]*)\/?([a-z]*)/g.exec(this.params.toLowerCase());
        switch (null !== s && (a = s[4], n = s[3], i = s[2], s = s[1]), s || (s = "contacts"), s) {
            case "lms":
                e = "lmsDashboard", t = "contacts";
                break;
            case "members":
            case "contacts":
            default:
                e = "crmContacts", t = "contacts";
                break;
            case "contact":
                e = "crmContact", t = "contacts";
                break;
            case "messages":
                e = "crmMessages", t = "messages";
                break;
            case "settings":
                switch (i) {
                    case "property":
                        e = "crmProperty", t = "settings";
                        break;
                    case "tags":
                        e = "crmSettingsTags", t = "settings";
                        break;
                    default:
                        e = "crmSettings", t = "settings"
                }
                break;
            case "bookings":
                switch (i) {
                    case "schedule":
                        e = "crmSchedule";
                        break;
                    case "operators":
                        e = "crmOperators";
                        break;
                    case "services":
                        e = "crmServices";
                        break;
                    default:
                        e = "crmBookings"
                }
                t = "bookings";
                break;
            case "booking":
                e = "crmBooking", t = "bookings";
                break;
            case "learning":
                e = "crmLearning", t = "learning";
                break;
            case "marketing":
                switch (i) {
                    case "system":
                        e = "crmSystemEmailTemplates";
                        break;
                    case "templates":
                        e = "crmEmailTemplates";
                        break;
                    case "builder":
                        e = "crmEmailBuilder";
                        break;
                    case "lists":
                        e = "crmListsAndSubscribers";
                        break;
                    case "campaigns":
                        e = "crmEmailCampaigns";
                        break;
                    case "campaign":
                        switch (n) {
                            case "overview":
                                e = "crmCampaignOverview";
                                break;
                            case "message":
                                if ("overview" === a) e = "crmMessageCampaignOverview";
                                else e = "crmMessageCampaign";
                                break;
                            default:
                                e = "crmEmailCampaign"
                        }
                        break;
                    case "design":
                        e = "crmMarketing";
                        break;
                    case "automations":
                        e = "crmAutomations";
                        break;
                    case "automation":
                        e = "crmAutomation";
                        break;
                    case "settings":
                        e = "crmEmailSettings";
                        break;
                    default:
                        e = "crmMarketingDashboard"
                }
                t = "marketing"
        }
        var o = t.startsWith("booking"),
            r = t.startsWith("marketing");
        $("#engageBtn")[r || o ? "removeClass" : "addClass"]("active"), $("#bookingBtn")[o ? "addClass" : "removeClass"]("active"), $("#marketingBtn")[r ? "addClass" : "removeClass"]("active");
        var l = $(".bookings-nav");
        l["bookings" === s ? "removeClass" : "addClass"]("none-soft"), "bookings" === t && (i = "" === i ? "bookings" : i, l.find("li").removeClass("active"), l.find("li." + i).addClass("active"));
        var c = $(".settings-nav");
        c["settings" === t ? "removeClass" : "addClass"]("none-soft"), "settings" === t && (i = "" === i ? "property" : i, c.find("li").removeClass("active"), c.find("li." + i).addClass("active"));
        var d = $(".marketing-nav");
        d["marketing" === t ? "removeClass" : "addClass"]("none-soft"), "marketing" === t && ("builder" !== (i = "" === i ? "dashboard" : i) && "campaign" !== i && "automation" !== i || d.addClass("none-soft"), d.find("li").removeClass("active"), d.find("li." + i).addClass("active"));
        var p = $(".members-navigation").find(".engage-main-nav");
        return p.find(".active").removeClass("active"), p.find('[data-tab="' + t + '"]').addClass("active"), e
    },
    init: function () {
        this.container = $(".working-area-wrapper-inner")
    },
    getNavClass: function () {
        return "members-nav"
    },
    onActivate: function () {
        $.fn.boxSelect || ($.fn.boxSelect = BookingCommon.boxSelect), document.title = "Engage!", $(".working-area-wrapper").addClass("engage-view")
    },
    onDeactivate: function () {
        $("#engageBtn").removeClass("active"), $("#bookingBtn").removeClass("active"), $("#marketingBtn").removeClass("active"), $(".working-area-wrapper").removeClass("engage-view"), $(".settings-nav").addClass("none-soft"), $(".marketing-nav").addClass("none-soft")
    },
    editMembersSettings: function () {
        Tools.showWindow({
            title: M.MEMBERS_SETTINGS,
            width: 420,
            customClass: "members-settings",
            isModal: !0,
            markup: Templates.get("membersSettingsMarkup"),
            action: {
                onShow: function (e, t) {
                    window.dynamicHeader || t.find(".headerSettingsWrapper").removeClass("none");
                    for (var i = t.find('[name="defaultGroup"]'), n = Website.memberGroups, a = "", s = 0; s < n.length; ++s) a += '<option value="' + n[s].id + '">' + escapeHtml(n[s].name) + "</option>";
                    i.append(a), Tools.makeWebsiteRequest({
                        action: "getMemberSettings",
                        onOk: function (e) {
                            var i = e.data,
                                n = i.mailchimpLists || [],
                                a = i.getresponseLists || [],
                                s = i.mailerliteLists || [],
                                o = i.moosendLists || [],
                                r = i.aweberLists || [],
                                l = i.activecampaignLists || [],
                                c = i.keapLists || [];
                            Tools.bindToView(t, {
                                defaultGroup: i.defaultGroup,
                                loginLinkType: i.loginLinkType || "none",
                                allowRegistrations: i.allowRegistrations,
                                memberApproval: i.memberApproval,
                                notifyOnReg: !!i.notifyOnRegEmail,
                                notifyOnRegEmail: i.notifyOnRegEmail
                            }), t.data("mailchimpLists", n), t.data("getresponseLists", a), t.data("mailerliteLists", s), t.data("moosendLists", o), t.data("aweberLists", r), t.data("activecampaignLists", l), t.data("keapLists", c), Website.isMailchimpEnabled() && (t.find(".mailchimp-settings-wrapper").removeClass("none"), t.find(".mailchimp-settings").click((function () {
                                Website.selectMailchimpLists({
                                    lists: n,
                                    title: M.SELECT_MAILCHIMP_LISTS,
                                    description: M.MEMBERS_SELECT_MAILCHIMP_LISTS_DESC,
                                    onSelect: function (e) {
                                        t.data("mailchimpLists", e), n = i.mailchimpLists = e
                                    }
                                })
                            }))), Website.isMailerliteEnabled() && (t.find(".mailerlite-settings-wrapper").removeClass("none"), t.find(".mailerlite-settings").click((function () {
                                Website.selectMailerliteLists({
                                    lists: s,
                                    title: M.SELECT_MAILERLITE_LISTS,
                                    description: M.SELECT_MAILERLITE_LISTS_MEMBERS_DESC,
                                    onSelect: function (e) {
                                        t.data("mailerliteLists", e), s = i.mailerliteLists = e
                                    }
                                })
                            }))), Website.isMoosendEnabled() && (t.find(".moosend-settings-wrapper").removeClass("none"), t.find(".moosend-settings").click((function () {
                                Website.selectMoosendLists({
                                    lists: o,
                                    title: M.SELECT_MOOSEND_LISTS,
                                    description: M.SELECT_MOOSEND_LISTS_MEMBERS_DESC,
                                    onSelect: function (e) {
                                        t.data("moosendLists", e), o = i.moosendLists = e
                                    }
                                })
                            }))), Website.isAweberEnabled() && (t.find(".aweber-settings-wrapper").removeClass("none"), t.find(".aweber-settings").click((function () {
                                Website.selectAweberLists({
                                    lists: r,
                                    title: M.SELECT_AWEBER_LISTS,
                                    description: M.SELECT_AWEBER_LISTS_MEMBERS_DESC,
                                    onSelect: function (e) {
                                        t.data("aweberLists", e), r = i.aweberLists = e
                                    }
                                })
                            }))), Website.isGetResponseEnabled() && (t.find(".getresponse-settings-wrapper").removeClass("none"), t.find(".getresponse-settings").click((function () {
                                Website.selectGetResponseLists({
                                    lists: a,
                                    title: M.SELECT_GETRESPONSE_LISTS,
                                    description: M.SELECT_GETRESPONSE_LISTS_MEMBERS_DESC,
                                    onSelect: function (e) {
                                        t.data("getresponseLists", e), a = i.getresponseLists = e
                                    }
                                })
                            }))), Website.isActiveCampaignEnabled() && (t.find(".activecampaign-settings-wrapper").removeClass("none"), t.find(".activecampaign-settings").click((function () {
                                Website.selectActiveCampaignLists({
                                    lists: l,
                                    title: M.SELECT_ACTIVECAMPAIGN_LISTS,
                                    description: M.SELECT_ACTIVECAMPAIGN_LISTS_MEMBERS_DESC,
                                    onSelect: function (e) {
                                        t.data("activecampaignLists", e), l = i.activecampaignLists = e
                                    }
                                })
                            }))), Website.isKeapEnabled() && (t.find(".keap-settings-wrapper").removeClass("none"), t.find(".keap-settings").click((function () {
                                Website.selectKeapLists({
                                    lists: c,
                                    title: "Select Tags",
                                    description: "Select tags to set to member contacts on new registration",
                                    onSelect: function (e) {
                                        t.data("keapLists", c), c = i.keapLists = c
                                    }
                                })
                            })))
                        }
                    })
                }
            },
            buttons: [Button(M.SAVE, Button.CLASS_MIDDLE_BLUE, (function (e, t) {
                var i = {};
                Tools.readFromView(t, {
                    defaultGroup: -1,
                    loginLinkType: "none",
                    allowRegistrations: 0,
                    memberApproval: 0,
                    notifyOnReg: 0,
                    notifyOnRegEmail: ""
                }, i), i.mailchimpLists = (t.data("mailchimpLists") || []).join(","), i.mailerliteLists = (t.data("mailerliteLists") || []).join(","), i.moosendLists = (t.data("moosendLists") || []).join(","), i.aweberLists = (t.data("aweberLists") || []).join(","), i.getresponseLists = (t.data("getresponseLists") || []).join(","), i.activecampaignLists = (t.data("activecampaignLists") || []).join(","), i.keapLists = (t.data("keapLists") || []).join(","), Tools.makeWebsiteRequest({
                    action: "saveMemberSettings",
                    data: i,
                    onOk: function (t) {
                        window.memberIconTypeInHeader = i.loginLinkType, e.close(), e = null
                    }
                })
            })), Button.MIDDLE_CANCEL]
        })
    }
}), Hooks.registerHook("store", {
    getInnerPage: function () {
        if (this.params.startsWith("/orders/")) return "storeOrder";
        if (this.params.startsWith("/products/")) return "storeProduct";
        var e = /^\/([a-z-]*)\/?/gi.exec(this.params.toLowerCase());
        switch (null !== e && (e = e[1]), e) {
            case "orders":
                return "storeOrders";
            case "discounts":
                return "storeDiscounts";
            case "settings":
                return "storeSettings";
            case "order":
                return "storeOrder";
            case "styling":
                return "storeStyling";
            case "new-affiliates":
                return "storeAffiliates";
            case "new-subscriptions":
                return "storeSubscriptionsOld";
            case "subscriptions":
                return "storeSubscriptions";
            case "products":
                return "storeProductsNew";
            case "client":
                return "storeClient";
            case "get-started":
                return "storeIntro";
            default:
                return "storeAnalytics"
        }
    },
    init: function () {
        this.container = $(".working-area-wrapper-inner")
    },
    getNavClass: function () {
        var e = decodeURIComponent(CPanel.currentPage.replace(this.baseUrl, "")),
            t = (e = (e = e.length > 0 ? e.substr(1) : e).split("/"))[0];
        return "store-nav" + (e.length > 1 && ("orders" === t || "products" === t) ? " store-nav-compact" : "")
    },
    onActivate: function () {
        document.title = M.STORE_DOC_TITLE, $(".working-area-wrapper").addClass("store-view"), $("#storeBtn").addClass("active"), 0 === Website.firstOrderTime && $("#storeNav").find('li[data-menu="get-started"]').removeClass("none"), null === Website.getPageById(Website.STORE_PAGE_ID) && !1 !== window.showStoreDisabledMessage && Tools.showWindow({
            noTitle: !0,
            width: 500,
            isModal: !0,
            markup: Templates.get("activateStoreMarkup"),
            action: {
                onShow: function (e, t) { }
            },
            buttons: [Button(M.YES, Button.CLASS_MIDDLE_BLUE, (function (e, t) {
                Website.addVirtualPage("store", (function (t) {
                    e.close()
                }))
            })), Button.MIDDLE_CANCEL]
        })
    },
    onDeactivate: function () {
        $("#storeBtn").removeClass("active"), $(".working-area-wrapper").removeClass("store-view")
    },
    onAfterUrlLoad: function () {
        var e = this.params,
            t = (e = (e = e.length > 0 ? e.substr(1) : e).split("/"))[0] || "dashboard";
        $(".store-navigation").find(".active").removeClass("active").end().find('[data-menu="' + t + '"]').addClass("active")
    },
    previewStore: function () {
        var e = null === Website.getPageById(Website.STORE_PAGE_ID) ? "" : Website.getPageById(Website.STORE_PAGE_ID).link,
            t = userDomain + "/" + e;
        Tools.showWebsitePreviewPopup({
            url: "https://" + t,
            buttonText: M.SHOW_IN_NEW_TAB,
            onButtonAction: function (e) {
                window.open(e, "_blank").focus()
            }
        })
    }
}), Hooks.registerPage("store", "storeOrders", null, null, {
    onShow: function (e) {
        this.component = WebComponents.Store.Orders.listAll(this.container[0], e), this.ready()
    },
    onHide: function () {
        WebComponents.destroy(this.component), this.component = null
    }
}), Hooks.registerPage("store", "storeProductsNew", null, null, {
    onShow: function (e) {
        this.component = WebComponents.Store.Products.listAll(this.container[0], e), this.ready()
    },
    onHide: function () {
        WebComponents.destroy(this.component), this.component = null
    }
}), Hooks.registerPage("store", "storeProduct", null, null, {
    onShow: function (e) {
        var t = this,
            i = "/products/" === this.hook.params ? 0 : WebPlatform.getUrlParameter(this.hook.params, "products", WebPlatform.URL_PARAM_INT);
        this.component = WebComponents.Store.Products.edit(this.container[0], {
            id: i,
            newProductType: e,
            onLoad: function () {
                t.ready()
            }
        })
    },
    onHide: function () {
        WebComponents.destroy(this.component), this.component = null
    },
    undo: function () {
        this.component && this.component.undo()
    },
    redo: function () {
        this.component && this.component.redo()
    }
}), Hooks.registerPage("store", "storeAnalytics", null, null, {
    onShow: function () {
        ("" === this.hook.params || "/" === this.hook.params) && 0 === Website.firstOrderTime ? setTimeout((function () {
            CPanel.goToUrl("/me/store/get-started")
        }), 5) : (this.component = WebComponents.Store.Analytics(this.container[0]), this.ready())
    },
    onHide: function () {
        WebComponents.destroy(this.component), this.component = null
    }
}), Hooks.registerPage("store", "storeIntro", null, null, {
    onShow: function () {
        this.component = WebComponents.Store.Intro(this.container[0]), this.ready()
    },
    onHide: function () {
        WebComponents.destroy(this.component), this.component = null
    }
}), Hooks.registerPage("store", "storeOrder", null, null, {
    onShow: function () {
        var e = this.hook.params.split("/"),
            t = WebPlatform.parse(e[e.length - 1], 0);
        this.component = WebComponents.Store.Orders.single(this.container[0], t), this.ready()
    },
    onHide: function () {
        WebComponents.destroy(this.component), this.component = null
    }
}), Hooks.registerPage("store", "storeSubscriptions", null, null, {
    onShow: function () {
        this.component = WebComponents.Store.Subscriptions.list(this.container[0]), this.ready()
    },
    onHide: function () {
        WebComponents.destroy(this.component), this.component = null
    }
}), Hooks.registerPage("store", "storeStyling", null, null, {
    onShow: function () {
        var e = this;
        this.component = WebComponents.Store.Styling(this.container[0]), this.component.$on("load", (function () {
            e.ready()
        }))
    },
    onHide: function () {
        WebComponents.destroy(this.component), this.component = null
    }
}), Hooks.registerPage("crm", "lmsDashboard", null, null, {
    onShow: function () {
        this.component = WebComponents.LMS.Dashboard(this.container[0]), this.ready()
    },
    onHide: function () {
        WebComponents.destroy(this.component), this.component = null
    }
}), Hooks.registerPage("crm", "crmContact", null, null, {
    onShow: function () {
        var e = this,
            t = this.hook.params.split("/"),
            i = WebPlatform.parse(t[t.length - 1], 0);
        this.component = WebComponents.Contact.create(this.container[0], i, (() => {
            e.ready()
        }))
    },
    onHide: function () {
        WebComponents.destroy(this.component), this.component = null
    }
}),
    function () {
        var e = null,
            t = null,
            i = function () {
                Cookies.get("show-video") || ("WEBSITE" === CurrentWebsiteType ? CPanel.showHelperVideoForPage("websiteUsers") : CPanel.showHelperVideoForPage("funnelUsers"))
            },
            n = function (e) {
                return e === contextPath + Website.pagePrefix || 0 === e.indexOf(contextPath + Website.pagePrefix + "/")
            },
            a = function (e) {
                $(this).tooltip("hide");
                var i = $(".pagesBtnSmall"),
                    n = Website.getAciveModal();
                Tools.showInlinePopup({
                    isModal: !1,
                    title: M.PAGES_TITLE,
                    width: 340,
                    showCloseButton: window.isMobileView,
                    selectedSlide: n && !n.funnelId ? 1 : 0,
                    noNav: !0,
                    overflowY: "hidden",
                    markup: Templates.get("showPagesDialogMarkup"),
                    action: {
                        onShow: function (e, n) {
                            t = e;
                            var a = "",
                                s = b(),
                                o = s.find('div[data-role="pages"]'),
                                r = s.find('div[data-role="popups"]'),
                                l = s.find("#groupsWrapperSmall").empty(),
                                f = "FUNNEL" === Website.getActiveSite().type,
                                m = !f && null === Website.getPageById(Website.BLOG_PAGE_ID),
                                g = !f && null === Website.getPageById(Website.PORTFOLIO_PAGE_ID),
                                y = null === Website.getPageById(Website.STORE_PAGE_ID),
                                w = !f,
                                _ = !f,
                                T = $("#addPageBtnSmall").click((function (e) {
                                    f && !y ? u() : h(e, {
                                        blog: m,
                                        portfolio: g,
                                        store: y,
                                        groups: w,
                                        page: _
                                    })
                                }));
                            if (f && !y && T.text(M.ADD_NEW_POPUP), i.addClass("active"), Website.hasAccessToWebsite && !f) {
                                for (var C = 0; C < Website.pageGroups.length; ++C) {
                                    var k = Website.pageGroups[C];
                                    a += '<li class="pageGroup" data-id="' + k.id + '">', a += '<span class="cpanel-pageGroup-header">', a += "<span>" + k.name + "</span>", a += Templates.get("pageGroupItemActions"), a += "</span>", a += '<ul class="folder-items">';
                                    for (var E = 0; E < k.pages.length; ++E) {
                                        var x = k.pages[E];
                                        a += '<li class=" system-border-color-active' + (Website.isHomepage(x.id, !1) ? " homepage" : "") + '" data-id="' + x.id + '">';
                                        var S = contextPath + Website.pagePrefix + "/" + x.link;
                                        a += '<a class="page" rel="tab" href="' + S + '" title="' + x.name + '"><span class="material-icons-outlined page-icon"> insert_drive_file </span>' + x.name + "</a>", a += Templates.get("pageItemsActions"), a += "</li>"
                                    }
                                    a += "</ul>"
                                }
                                l.append(a)
                            } else n.find("#cpanel-pages-popup").hide();
                            if (Website.hasAccessToWebsite || $("#addPageBtnSmall").remove(), a = "", Website.hasAccessToBlog || Website.hasAccessToPortfolio || Website.hasAccessToStore)
                                for (var P = 0; P < Website.virtualPages.length; ++P) {
                                    if (((x = Website.virtualPages[P]).id !== Website.BLOG_PAGE_ID || Website.hasAccessToBlog && !f) && (x.id !== Website.PORTFOLIO_PAGE_ID || Website.hasAccessToPortfolio && !f) && (x.id !== Website.STORE_PAGE_ID || Website.hasAccessToStore)) {
                                        a += '<span class="virtual-page-btn cpanel-pageGroup-header' + (Website.isHomepage(x.id, !1) ? " homepage" : "") + '" id="virtualBtn' + x.id + '" data-id="' + x.id + '">';
                                        var I = x.id === Website.BLOG_PAGE_ID ? "blog" : x.id === Website.PORTFOLIO_PAGE_ID ? "portfolio" : "store";
                                        a += '<a href="/me/' + I + '" title="' + x.name + '" rel="tab" class="link">' + x.name + "</a>", a += '<div class="page-buttons-wrapper"><a class="settings" data-role="deleteItem"><span class="material-icons-outlined page-settings-icon"> delete_outline </span></a><a class="settings" data-role="settings"><span class="material-icons-outlined page-settings-icon"> settings </span></a></div>', a += "</span>"
                                    }
                                }
                            if (Website.hasAccessToWebsite && Website.popups.length > 0) {
                                var O = "";
                                Website.popups.forEach((function (e) {
                                    O += '<div class="col20 f-left relative virtual-page-btn menu-popup-button" data-id="' + e.id + '">', O += '<a title="' + e.name + '" class="link">' + e.name + "</a>", O += '<div class="page-buttons-wrapper"><a class="more-settings-btn"><span class="material-icons-outlined page-settings-icon"> settings </span></a></div>', O += "</div>"
                                })), r.append(O)
                            } else c(r);
                            Website.hasAccessToWebsite && Website.funnels.length > 0 && Website.funnels.forEach((function (e) {
                                a += '<div class="virtual-page-funnel cpanel-pageGroup-header pageGroup ' + (!f && Website.isHomepage(e.id, !0) ? " homepage" : "") + ' folder-items-wrapper">', a += '<a title="' + e.name + '" class="link">' + e.name + "</a>", a += '<ul class="folder-items">', e.steps.forEach((function (t) {
                                    for (var i = null, n = null, s = 0; s < t.variants.length; ++s) {
                                        var o = t.variants[s];
                                        if (!o.archived)
                                            if (null === i) i = o;
                                            else if (null === n) {
                                                n = o;
                                                break
                                            }
                                    }
                                    var r = "PAGE" === t.type ? "funnel-step-page" : "funnel-step-popup";
                                    if (null !== n && (r += " with-ab-test"), a += '<li class="' + r + '">', "PAGE" === t.type) {
                                        var l = contextPath + Website.pagePrefix + "/" + e.url + "/" + t.page.link;
                                        a += '<a class="page" data-id="' + t.id + '" data-funnel="' + e.id + '" data-variant="a" rel="tab" href="' + l + (null === n ? "" : "/a") + '" title="' + t.name + '"><span class="material-icons-outlined page-icon"> insert_drive_file </span>' + t.name + (null === n ? "" : ' <span class="ab-tag">A</span>') + "</a>", null !== n && (a += '<a class="page" data-id="' + t.id + '" data-funnel="' + e.id + '" data-variant="b" rel="tab" href="' + l + '/b" title="' + t.name + '"><span class="funnel-page-name"><span class="material-icons-outlined popup-step-icon"> picture_in_picture </span>' + t.name + '</span> <span class="ab-tag">B</span></a>')
                                    } else a += '<a class="popup-item" data-id="' + t.id + '" data-funnel="' + e.id + '" data-variant="a" title="' + t.name + '"><span class="funnel-page-name"><span class="material-icons-outlined popup-step-icon"> picture_in_picture </span>' + t.name + "</span>" + (null === n ? "" : ' <span class="ab-tag">A</span>') + "</a>", null !== n && (a += '<a class="popup-item" data-id="' + t.id + '" data-funnel="' + e.id + '" data-variant="b" title="' + t.name + '"><span class="funnel-page-name"><span class="material-icons-outlined popup-step-icon"> picture_in_picture </span>' + t.name + '</span> <span class="ab-tag">B</span></a>');
                                    a += '<div class="page-buttons-wrapper"><a class="settings" data-role="settings"><span class="material-icons-outlined page-settings-icon"> settings </span></a></div>', a += "</li>"
                                })), a += "</ul></div>"
                            })), a += '<div class="pageGroup folder-items-wrapper system-pages">', a += '<span class="cpanel-pageGroup-header"><span>' + M.SYSTEM_PAGES + "</span></span>", a += '<ul class="folder-items">', Website.getSystemPagesInOrder().map(Website.getSystemPages).forEach((function (e) {
                                if (null !== e) {
                                    a += '<li class="system-border-color-active">';
                                    var t = contextPath + Website.pagePrefix + "/" + e.link,
                                        i = Website.getSystemPageName(e.link);
                                    a += '<a class="page" data-page="' + e.link + '" rel="tab" href="' + t + '" title="' + i + '"><span class="material-icons-outlined page-icon"> insert_drive_file </span>' + i + "</a>", a += '<div class="page-buttons-wrapper"><a class="settings" data-role="settings"><span class="material-icons-outlined page-settings-icon"> settings </span></a></div>', a += "</li>"
                                }
                            })), a += "</ul></div>", n.on("click", ".more-settings-btn", (function (e) {
                                e.stopPropagation(), e.preventDefault();
                                var i = $(this),
                                    n = i.closest("[data-id]");
                                n.hasClass("menu-popup-button") ? d(i, n, t) : p(i, n, t)
                            })), o.append(a), v()
                        },
                        onHide: function () {
                            t = null, i.removeClass("active"), i = null
                        }
                    },
                    buttons: [],
                    customClass: "pagesWindow"
                })
            },
            s = function (e) {
                e.stopPropagation(), e.preventDefault();
                var t = $(this).parent().parent(),
                    i = t.hasClass("virtual-page-btn");
                if (t.hasClass("cpanel-pageGroup-header") && !i) {
                    var n = t.parent(),
                        a = n.data("id");
                    Tools.prompt(M.DEL_GROUP_TITLE, M.DEL_GROUP_CONFIRM, (function () {
                        Website.deleteGroup(a, (function () {
                            n.remove(), n = null
                        }))
                    }))
                } else if (i) {
                    a = parse(t.data("id"), -1, !0);
                    Tools.prompt(M.DEL_PAGE_TITLE, M.DEL_PAGE_CONFIRM, (function () {
                        Website.deletePage(a, (function () {
                            var e = t.hasClass("active");
                            t.remove(), e && Website.openPage(Website.getHomepageLink())
                        }))
                    }))
                }
            },
            o = function (e, t, i) {
                UITools.showPageSettingsDialog({
                    page: e,
                    tab: 0,
                    onUpdated: function (e, n) {
                        if (t.attr("title", e.name).html(e.name), i.hasClass("active") && e.id >= 0) {
                            var s = contextPath + Website.pagePrefix + "/" + e.link;
                            t.attr("href", s), CPanel.goToUrl(s, !0)
                        }
                        n && a()
                    },
                    onSetAsHomepage: function () {
                        b().find(".homepage").removeClass("homepage"), t.parent().addClass("homepage")
                    }
                })
            },
            r = function () {
                var e = $(this).closest(".virtual-page-btn"),
                    t = e.find(".link"),
                    i = parse(e.data("id"), -1, !0),
                    n = Website.getPageById(i);
                o(n, t, e)
            },
            l = function (e) {
                var i = Website.getPageById(e);
                null !== i && Tools.prompt(M.DUPLICATE_PAGE, M.DUPLICATE_PAGE_CONFIRM, (function () {
                    Website.clonePage(i.id, (function (e) {
                        if (null !== t) {
                            t.close(), t = null;
                            var i = contextPath + Website.pagePrefix + "/" + e.link;
                            CPanel.goToUrl(i)
                        }
                    }))
                }))
            },
            c = function (e) {
                e.empty(), Website.hasAccessToWebsite && e.append(Templates.get("noPopupsMessage"))
            },
            d = function (t, i, n) {
                var a = parse(i.data("id"), -1, !0),
                    s = Website.getPopupById(a);
                if (null !== s) {
                    var o = [{
                        text: M.SHOW_SETTINGS,
                        icon: "fa-cog",
                        tag: "settings"
                    }, {
                        text: M.DUPLICATE,
                        icon: "fa-clone",
                        tag: "clone"
                    }, {
                        text: M.DELETE,
                        icon: "fa-trash",
                        tag: "delete"
                    }];
                    Tools.showTooltipOptions(t, o, (function (t, o, r, l) {
                        if ("settings" === l) {
                            var d = Website.getAciveModal();
                            d && d.id === a ? (n.close((function () {
                                d.popupSettings()
                            })), n = null) : w({
                                id: a,
                                showSettings: !0
                            })
                        } else if ("clone" === l) {
                            var p = i.clone();
                            Website.clonePopup(s, (function (e) {
                                p.removeClass("active").data("id", e.id), i.parent().append(p)
                            }))
                        } else "delete" === l && Tools.prompt(M.DEL_POPUP_TITLE, M.DEL_POPUP_MESSAGE, (function () {
                            var t = Website.getAciveModal();
                            t && t.id === a && e.activePage.closePopup(a), Website.deletePopup(a, (function () {
                                var e = i.closest('[data-role="popups"]');
                                i.remove(), 0 === Website.popups.length && c(e)
                            }))
                        }))
                    }))
                }
            },
            p = function (e, t, i) {
                var n = t.find(".page"),
                    a = parse(t.data("id"), -1, !0),
                    s = Website.getPageById(a),
                    r = [{
                        text: M.SHOW_SETTINGS,
                        icon: "fa-cog",
                        tag: "settings"
                    }, {
                        text: M.DUPLICATE,
                        icon: "fa-clone",
                        tag: "clone"
                    }, {
                        text: M.DELETE,
                        icon: "fa-trash",
                        tag: "delete"
                    }];
                Website.funnels.length && r.push({
                    text: M.MOVE_TO_FUNNEL,
                    icon: "fa-share",
                    tag: "move"
                }), Tools.showTooltipOptions(e, r, (function (e, r, c, d) {
                    "settings" === d ? o(s, n, t) : "clone" === d ? l(a) : "delete" === d ? Tools.prompt(M.DEL_PAGE_TITLE, M.DEL_PAGE_CONFIRM, (function () {
                        Website.deletePage(a, (function () {
                            var e = t.hasClass("active");
                            t.remove(), e && Website.openPage(Website.getHomepageLink())
                        }))
                    })) : "move" === d && function (e, t, i) {
                        UITools.selectExistingFunnel((function (t, n) {
                            Website.movePageToFunnel(e.id, t, n, (function (e, n) {
                                if (i.close(), Website.getActiveSite().id === t) CPanel.goToUrl(Website.pagePrefix + "/" + e.url + "/" + n.link + "/a?show=steps");
                                else {
                                    var a = "//" + Website.getProjectWebsiteById(t).subdomain + "." + Website.rootDomain + Website.pagePrefix + "/" + e.url + "/" + n.link + "?show=steps";
                                    CPanel.redirect(a)
                                }
                            }))
                        }))
                    }(s, 0, i)
                }))
            },
            u = function () {
                UITools.showNewPopupDialog((function (e) {
                    Website.addPopup(e, (function (e) {
                        w({
                            id: e
                        })
                    }))
                }))
            },
            h = function (e, i) {
                var n = 330;
                i.blog && (n += 120), i.portfolio && (n += 120), i.store && (n += 120), i.groups && (n += 120), i.page && (n += 120), Tools.showWindow({
                    isModal: !1,
                    title: M.ADD_NEW,
                    icon: Popup.ICON_ADD,
                    showNextTo: $(e.target),
                    showNextToOffset: {
                        x: 255,
                        y: 50
                    },
                    width: n,
                    markup: Templates.get("addPageDialogMarkupNew"),
                    action: {
                        onShow: function (e, n) {
                            var a = n.find(".add-page-wrapper");
                            a.on("click", ".add-page", (function (i) {
                                var n = $(this);
                                if (n.hasClass("page")) UITools.showNewPagePopup({}, (function (e, i) {
                                    Website.addPage(e, (function (n) {
                                        var a;
                                        if (n.id < 0) {
                                            if (null !== t) {
                                                t.close(), t = null;
                                                var s = n.id === Website.BLOG_PAGE_ID ? "/blog" : n.id === Website.PORTFOLIO_PAGE_ID ? "/portfolio" : "/store";
                                                a = contextPath + Website.virtualPagePrefix + s
                                            }
                                        } else {
                                            a = contextPath + Website.pagePrefix + "/" + n.link;
                                            var o = b().find('li.pageGroup[data-id="' + e.group + '"]'),
                                                r = $('<li class="" />').data("id", n.id);
                                            $('<a class="page" rel="tab" />').attr("href", a).attr("title", n.name).html(n.name).appendTo(r), $(Templates.get("pageItemsActions")).appendTo(r), o.find("ul").append(r)
                                        }
                                        Tools.closeAllPopups(), i(), CPanel.goToUrl(a)
                                    }))
                                })), e.close();
                                else if (n.hasClass("group")) f(), e.close();
                                else if (n.hasClass("popup")) e.close(), u();
                                else {
                                    var a = n.hasClass("blog") ? "blog" : n.hasClass("portfolio") ? "portfolio" : "store";
                                    Website.addVirtualPage(a, (function (i) {
                                        null !== t && (t.close(), t = null);
                                        var n = i.id === Website.BLOG_PAGE_ID ? "/blog" : i.id === Website.PORTFOLIO_PAGE_ID ? "/portfolio" : "/store",
                                            a = contextPath + Website.virtualPagePrefix + n;
                                        e.close(), CPanel.goToUrl(a)
                                    }))
                                }
                            })), i.blog || a.find(".add-page.blog").remove(), i.portfolio || a.find(".add-page.portfolio").remove(), i.store || a.find(".add-page.store").remove(), i.groups || a.find(".add-page.group").remove(), i.page || a.find(".add-page.page").remove()
                        }
                    }
                })
            },
            f = function () {
                Tools.showWindow({
                    isModal: !1,
                    title: M.ADD_GROUP_TITLE,
                    icon: Popup.ICON_ADD,
                    width: 350,
                    markup: Templates.get("addGroupDialogMarkup"),
                    buttons: [Button(M.ADD, Button.CLASS_MIDDLE_BLUE, (function (e, t) {
                        Website.addGroup($("#groupName").val(), (function (t) {
                            var i = $('<span class="cpanel-pageGroup-header" />').append($("<span />").html(t.name));
                            $(Templates.get("pageGroupItemActions")).appendTo(i);
                            var n = $('<li class="pageGroup" data-id="' + t.id + '"></li>').append(i).append('<ul class="folder-items" style="display: none"></ul>');
                            b().find("#groupsWrapperSmall").append(n), e.close()
                        }))
                    })), Button.MIDDLE_CANCEL]
                })
            },
            m = function (e) {
                e.hasClass("active") || (b().find(".pageGroup").not(e).removeClass("active").children("ul").slideUp("fast"), e.length > 0 && e.addClass("active").children("ul").slideDown("fast"))
            },
            g = function (e) {
                Tools.hide(e.saveButtons), CPanel.setChanged(!1), CPanel.goToUrl(CPanel.currentPage, !0)
            },
            v = function () {
                var t = b();
                if (0 !== t.length) {
                    t.find(".active").removeClass("active");
                    var i = Website.getAciveModal();
                    if (!i || i.funnelId) {
                        var n;
                        if (i) {
                            var a = t.find('.popup-item[data-id="' + i.id + '"][data-funnel="' + i.funnelId + '"][data-variant="' + i.variant + '"]').addClass("active").parent();
                            a.addClass("active"), n = a.closest(".pageGroup")
                        } else {
                            var s = e.activePage.getAdminPageUrl();
                            s !== Website.pagePrefix && s !== Website.pagePrefix + "/" || (s = Website.pagePrefix + "/" + Website.getHomepageLink());
                            var o = t.find('a[href="' + s + '"]');
                            0 === o.length && (s.endsWith("/a") ? s = s.substring(0, s.length - 2) : s += "/a", o = t.find('a[href="' + s + '"]'));
                            var r = o.parent();
                            r.addClass("active"), (r.hasClass("funnel-step-page") || r.hasClass("funnel-step-popup")) && o.addClass("active"), n = o.parentsUntil(".pagesWindow", ".pageGroup")
                        }
                        m(n)
                    } else t.find('.menu-popup-button[data-id="' + i.id + '"]').addClass("active")
                }
            },
            b = function () {
                return $("#websiteMenuWrapper")
            },
            y = function () {
                var t = $("#previewButtonSmall"),
                    i = "//" + userDomain,
                    n = e.activePage.getActiveFunnel();
                if (e.activePage.getClientPageUrl().startsWith("/system/")) i += Website.getSystemPagePreviewUrl(e.activePage.getClientPageUrl());
                else if (null !== n) {
                    var a = e.activePage.getClientPageUrl(),
                        s = a.split(/\//g),
                        o = s[s.length - 1].toLowerCase();
                    "a" === o || "b" === o ? (s.splice(s.length - 1, 1), a = s.join("/")) : o = "a", i += a + "?v=" + Tools.tick() + "&variant=" + o + "&preview=__PREVIEW_ONLY", funnelStep = e.activePage.getActiveFunnelStep()
                } else i += e.activePage.getClientPageUrl() + "?preview=1&v=" + Tools.tick();
                Tools.showWebsitePreviewPopup({
                    url: i,
                    buttonText: M.SHOW_IN_NEW_TAB,
                    onButtonAction: function (e) {
                        window.open(e, "_blank").focus()
                    },
                    onShow: function () {
                        t.addClass("active")
                    },
                    onHide: function () {
                        t.removeClass("active"), t = null
                    }
                })
            },
            w = function (t) {
                if ("websitePage" === e.activePage.name) {
                    var i = e.activePage.modal;
                    if (i && t.id === i.id && (!t.funnelId || t.funnelId === i.funnelId && t.variant === i.variant)) return;
                    e.activePage.showPopup(t)
                } else if (null === Website.homePage || Website.homePage.id < 0) {
                    var n = Website.getFirstRealPage();
                    if (null === n) return;
                    CPanel.goToUrl(Website.pagePrefix + "/" + n.link, !1, {
                        showPopup: t
                    })
                } else CPanel.goToUrl(Website.pagePrefix, !1, {
                    showPopup: t
                })
            },
            _ = function (t) {
                e = t, Website.hasAccessToBlog || Website.hasAccessToPortfolio || Website.hasAccessToWebsite ? (Website.hasAccessToWebsite || $("#themeSettingsBtnSmall").remove(), Website.hasAccessToWebsite || ($("#globalStyling").remove(), $(".funnels-show-btn").remove()), $document.on("click.websiteHook", '.pagesWindow .deleteItem, .pagesWindow a[data-role="deleteItem"]', s).on("click.websiteHook", "#previewButtonSmall", y).on("click.websiteHook", ".pagesBtnSmall", a).on("click.websiteHook", '.virtual-page-btn a[data-role="settings"]', r).on("click.websiteHook", '.pageGroup a[data-role="settings"]', (function (e) {
                    e.stopPropagation(), e.preventDefault();
                    var t = $(this),
                        i = t.parent(),
                        n = i.closest(".pageGroup");
                    n.hasClass("virtual-page-funnel") ? function (e) {
                        var t = e.closest("li").find(".page"),
                            i = Website.getFunnelById(WebPlatform.parse(t.data("funnel"))),
                            n = WebPlatform.parse(t.data("id"));
                        if (null !== i) {
                            for (var a = null, s = 0; s < i.steps.length; ++s)
                                if (i.steps[s].id === n) {
                                    a = i.steps[s];
                                    break
                                } null !== i && "PAGE" === a.type && UITools.showPageSettingsDialog({
                                    page: a.page,
                                    tab: 0,
                                    funnelId: i.id,
                                    funnelStepId: a.id,
                                    onUpdated: function (e) {
                                        t.attr("title", e.name).find(".funnel-page-name").text(e.name), t.each((function (n) {
                                            var a = $(this),
                                                s = t.length > 1 ? "/" + (0 === n ? "a" : "b") : "",
                                                o = contextPath + Website.pagePrefix + "/" + i.url + "/" + e.link + s;
                                            a.attr("href", o), a.hasClass("active") && CPanel.goToUrl(o, !0)
                                        }))
                                    }
                                })
                        }
                    }(t) : n.hasClass("system-pages") ? function (e) {
                        var t = e.closest("li").find(".page").data("page"),
                            i = Website.getPageByUrl(t),
                            n = Website.getSystemPageName(t),
                            a = Website.getSystemPageDescription(t);
                        Tools.showWindow({
                            isModal: !0,
                            title: M.SETTINGS,
                            icon: Popup.ICON_ADD,
                            width: 400,
                            markup: escapeFormat(Templates.get("editSystemPageDialogMarkup"), "name", n, "description", a),
                            action: {
                                onShow: function (e, t) {
                                    t.find('[name="useSecondaryHeader"]').prop("checked", 0 !== i.headerType)
                                }
                            },
                            buttons: [Button(M.RESET_PAGE, Button.CLASS_MIDDLE_BLUE, (function (e, i) {
                                Tools.prompt(M.RESET_SYSTEM_PAGE_TITLE, M.RESET_SYSTEM_PAGE_MESSAGE, (function () {
                                    Tools.makeWebsiteRequest({
                                        action: "resetSystemPage",
                                        data: {
                                            link: t
                                        },
                                        onOk: function () {
                                            CPanel.goToUrl(contextPath + Website.pagePrefix + "/" + t, !0), e.close()
                                        }
                                    })
                                }))
                            }), Button.FLOAT_LEFT), Button(M.SAVE, Button.CLASS_MIDDLE_BLUE, (function (e, n) {
                                var a = n.find('[name="useSecondaryHeader"]').is(":checked") ? 1 : 0;
                                Tools.makeWebsiteRequest({
                                    action: "updateSystemPageInformation",
                                    data: {
                                        link: t,
                                        headerType: a
                                    },
                                    onOk: function () {
                                        i.headerType = a, CPanel.goToUrl(contextPath + Website.pagePrefix + "/" + t, !0), e.close()
                                    }
                                })
                            })), Button.MIDDLE_CANCEL]
                        })
                    }(t) : function (e, t) {
                        var i = t.data("id");
                        Tools.showWindow({
                            isModal: !1,
                            title: M.EDIT_GROUP_TITLE,
                            icon: Popup.ICON_EDIT,
                            width: 350,
                            markup: Templates.get("addGroupDialogMarkup"),
                            action: {
                                onShow: function (t, i) {
                                    i.find('input[name="groupName"]').val(e.prev().text())
                                }
                            },
                            buttons: [Button(M.SAVE, Button.CLASS_MIDDLE_BLUE, (function (t, n) {
                                Website.updateGroup(i, $("#groupName").val(), (function (t) {
                                    e.prev().html(t.name)
                                })), t.close()
                            })), Button.MIDDLE_CANCEL]
                        })
                    }(i, n)
                })).on("click.websiteHook", ".popup-item", (function (e) {
                    var t = $(this),
                        i = t.parent(),
                        n = i.hasClass("funnel-step-popup") ? t : i,
                        a = n.data("id"),
                        s = n.data("funnel"),
                        o = n.data("variant") || "a";
                    w({
                        id: a,
                        funnelId: s,
                        variant: o
                    })
                })).on("click.websiteHook", ".menu-popup-button", (function (e) {
                    w({
                        id: $(this).data("id")
                    })
                })).on("click.websiteHook", "#addWidgetBtnSmall", (function (t) {
                    e.activePage.grid && e.activePage.grid.showAddWidgetDialog(t)
                })).on("click.websiteHook", ".cpanel-pageGroup-header", (function () {
                    var e = $(this).closest(".pageGroup");
                    e.hasClass("active") ? function (e) {
                        e.removeClass("active").children("ul").slideUp("fast")
                    }(e) : m(e)
                })).on("click.websiteHook", "#globalStyling", (function (e) {
                    GlobalStyling.edit()
                })).on("click.websiteHook", "#themeSettingsBtn, #themeSettingsBtnSmall", (function (e) {
                    Website.settingsUI.show()
                }))) : e.navigationButtons.hide()
            },
            T = function (e) {
                e.modal ? e.savePopup() : e.megaMenu ? e.saveMegaMenu() : e.savePage()
            },
            C = function (e) {
                var t = $(".viewport-buttons");
                t.length < 1 || t.find(".active").removeClass("active").end().find('a[data-size="' + e + '"]').addClass("active")
            },
            k = function (e, t, i) {
                "PAGE" === t.type ? CPanel.goToUrl(Website.pagePrefix + "/" + e.url + "/" + t.page.link + "/" + i, !0) : Hooks.active.hook.activePage.showPopup({
                    id: t.id,
                    funnelId: e.id,
                    variant: i,
                    showPrimaryWidgetSettings: !1
                })
            };
        Hooks.registerHook("website", {
            contentWrapper: null,
            navigationButtons: null,
            currentView: "",
            getInnerPage: function () {
                return null === Website.homePage ? "websitePage" : "" === this.params || "/" === this.params ? Website.homePage && Website.homePage.id === Website.BLOG_PAGE_ID ? (this.params = "/me/blog", "blog") : Website.homePage && Website.homePage.id === Website.PORTFOLIO_PAGE_ID ? (this.params = "/me/portfolio", "portfolio") : "websitePage" : 0 === this.params.indexOf("/me/blog") ? "blog" : 0 === this.params.indexOf("/me/portfolio") ? "portfolio" : "websitePage"
            },
            init: function () {
                this.contentWrapper = $(".working-area-wrapper"), this.container = this.contentWrapper.find(".working-area-wrapper-inner")
            },
            getContainer: function () {
                return this.container
            },
            getNavClass: function () {
                return "narrow-nav"
            },
            onActivate: function () {
                this.currentView = Cookies.get("current-view") || "desktop", this.navigationButtons = $("#websiteNav").addClass("active"), $("#webBtn").addClass("active"), document.title = M.WEBSITE_TITLE, this.contentWrapper.addClass("websiteWrapper"), _(this)
            },
            onDeactivate: function () {
                this.navigationButtons.removeClass("active"), $("#webBtn").removeClass("active"), this.contentWrapper.removeClass("websiteWrapper desktop-view tablet-view mobile-view"), $document.off(".websiteHook"), e = null, null, null !== t && t.close(), t = null, $("#style-480")[0].disabled = !0, $("#style-768")[0].disabled = !0, $("#style-1024")[0].disabled = !0, $("#style-main")[0].disabled = !0
            },
            loadStylesheet: function (e, t) {
                var i = this;
                (isUndefined(e) || null === e || "" === e) && (e = "" === i.currentView ? "desktop" : i.currentView);
                var a = i.contentWrapper.width();
                a < 1024 && "desktop" === e && (e = "tablet"), a < 840 && (e = "mobile"), n(CPanel.currentPage) || (e = "desktop"), i.contentWrapper.removeClass("desktop-view tablet-view mobile-view").addClass(e + "-view"), i.currentView = e, Cookies.set("current-view", i.currentView, {
                    expires: 1825,
                    path: "/"
                }), C(e), UITools.loadStylesheet(e, t)
            },
            onBeforeUrlLoad: function () {
                this.loadStylesheet(this.currentView)
            },
            onAfterUrlLoad: function () {
                var e = $(".viewport-buttons");
                n(CPanel.currentPage) ? e.show() : e.hide(), v()
            },
            showSettings: function () {
                Website.settingsUI.show()
            }
        }), Hooks.registerPage("website", "websitePage", null, null, {
            markup: Templates.get("websitePageMarkup"),
            grid: null,
            modal: null,
            megaMenu: null,
            saveButtons: null,
            currentPageUrl: null,
            getAdminPageUrl: function () {
                return contextPath + Website.pagePrefix + this.getClientPageUrl()
            },
            getClientPageUrl: function () {
                return this.currentPageUrl
            },
            savePage: function () {
                if (CPanel.haveUnsavedChanges && this.grid) {
                    var e = this;
                    Tools.hide(this.saveButtons);
                    var t = {},
                        i = this.grid.getSaveObject();
                    t.widgets = JSON.stringify(i.widgets), i.footerWidgetsChanged && (t.footerWidgets = JSON.stringify(i.footerWidgets)), i.headerChanged && (t.header = JSON.stringify(i.header)), Website.savePage(this.getClientPageUrl(), t, (function () {
                        Tools.showCornerMessage(3e3, M.UPDATED, Tools.TOOLTIP_TYPE_SUCCESS), CPanel.setChanged(!1)
                    }), (function () {
                        Tools.show(e.saveButtons)
                    }))
                }
            },
            onShow: function (e) {
                if (!Website.hasPermission(Permission.WEBSITE)) {
                    var t = "";
                    return t = Website.hasPermission(Permission.STORE) ? "/me/store" : Website.hasPermission(Permission.BLOG) ? "/me/blog" : Website.hasPermission(Permission.PORTFOLIO) ? "/me/portfolio" : Website.hasPermission(Permission.MEMBERS) ? "/me/crm" : "/me/dashboard", void Tools.delay(10, (function () {
                        CPanel.goToUrl(t)
                    }))
                }
                var n = this;
                if (n.currentPageUrl = this.hook.params, n.currentPageUrl.startsWith("/") || (n.currentPageUrl = "/" + n.currentPageUrl), "/" === n.currentPageUrl) {
                    if (Website.homePage && Website.homePage.id === Website.STORE_PAGE_ID) {
                        var a = Website.getFirstRealPage();
                        if (null !== a) return n.currentPageUrl = "/" + a.link, n.ready(), void CPanel.goToUrl(Website.pagePrefix + "/" + a.link, !0)
                    }
                    n.currentPageUrl = "/" + (null === Website.homePage ? "" : Website.getHomepageLink())
                }
                Tools.makeWebsiteRequest({
                    action: "requestPage",
                    data: {
                        url: n.currentPageUrl
                    },
                    method: "get",
                    onOk: function (t) {
                        var a = $("#website");
                        if (!(a.length < 1 || isUndefined(Grid)))
                            if ($(".viewport-buttons").show(), n.saveButtons = $("#websitePageSaveBtns"), !$body.hasClass("action-line-none") && function (e, t) {
                                var i = e.getActiveFunnel(),
                                    n = null === i ? null : e.getActiveFunnelStep(!0),
                                    a = primaryDomain,
                                    s = "FUNNEL" === Website.getActiveSite().type,
                                    o = null !== i && t.endsWith("/b");
                                if (t.startsWith("/") && (t = t.substr(1)), (i && t.endsWith("/a") || t.endsWith("/b")) && (t = t.substr(0, t.length - 2)), i) {
                                    var r = t.split("/");
                                    r[0] === i.url && r.splice(0, 1), t = r.join("/")
                                }
                                var l = $body.hasClass("action-line-bottom"),
                                    c = $(Templates.get(null !== i ? "funnelActionLaneMarkup" : "websiteActionLaneMarkup"));
                                e.container.prepend(c), e.container.addClass("flex " + (l ? "flex-col-reverse" : "flex-col")), C(e.hook.currentView);
                                var d = "";
                                null !== i && null !== i.host && (a = i.host), s || null === i || null !== i.host || (d = "/" + i.url);
                                var p = "/" + t;
                                i ? n && i.steps.length && i.steps[0].id === n.id && (p = "") : Website.getHomepageLink() === t && (p = "");
                                var u = a + d + p;
                                if (c.find(".action-url").text(u).attr("href", "http://" + u), i && n) {
                                    var h = 0;
                                    n.variants.forEach((function (e) {
                                        e.archived || ++h
                                    }));
                                    for (var f = h > 1, m = 0, g = !1, v = !1, b = (m = 0, 0); b < i.steps.length; ++b) {
                                        var y = i.steps[b];
                                        if ("UPSELL" !== y.kind && "DOWNSELL" !== y.kind && ++m, y.id === n.id) {
                                            g = b > 0, v = b < i.steps.length - 1, "UPSELL" === y.kind ? m += " (" + M.UPSELL + ")" : "DOWNSELL" === y.kind && (m += " (" + M.DOWNSELL + ")");
                                            break
                                        }
                                    }
                                    g || c.find(".funnel-step-back").addClass("disabled"), v || c.find(".funnel-step-next").addClass("disabled");
                                    var w = c.find('[data-role="current-step"]'),
                                        _ = '<span class="step-name">' + M.STEP + " " + m + ": " + n.name + "</span>";
                                    if (f) {
                                        var T = Website.pagePrefix + "/" + i.url + "/" + n.page.link + "/a",
                                            k = Website.pagePrefix + "/" + i.url + "/" + n.page.link + "/b";
                                        _ += '<div class="ab-test-switch">            <a rel="tab" href="' + T + '" class="' + (o ? "" : "active ") + 'rounded-effect">' + M.VERSION_A + '</a>            <a rel="tab" href="' + k + '" class="' + (o ? "active " : "") + 'rounded-effect">' + M.VERSION_B + "</a>          </div>"
                                    } else _ += '<a class="initiate-ab green rounded-effect" rel="action" data-action="startABSplitTest">' + M.START_SPLIT_TEST + "</a>";
                                    w.append(_)
                                }
                            }(n, Website.getSystemPagePreviewUrl(n.currentPageUrl)), a.html(t.data.markup || ""), Tools.addShortcutListener("s", (function (e, t) {
                                e || T(n)
                            })), n.initGrid(), Tools.delay(1e3, i), n.ready(), t = null, (e = e || {}).showPopup) n.showPopup(e.showPopup);
                            else if (e.showMegaMenu) n.showMegaMenu(e.showMegaMenu);
                            else {
                                var s = Tools.getUrlParams().show || "";
                                if ("settings" === s) Website.settingsUI.show();
                                else if ("apps" === s) Website.settingsUI.show("apps");
                                else if ("funnel-settings" === s) {
                                    var o = Website.getActiveSite(),
                                        r = Website.getActiveFunnel();
                                    "FUNNEL" === o.type || null === r ? Website.settingsUI.show() : Funnels.showFunnelSettings(o, r)
                                } else "steps" === s ? Funnels.edit() : "widgetsettings" === s ? n.grid.showPrimaryWidgetSettings() : s.startsWith("test-") && UITools.showTestWindow(s.substring(5))
                            }
                    },
                    onNotOk: function (e) {
                        n.ready()
                    },
                    onRequestError: function (e, t, i) {
                        n.ready()
                    }
                })
            },
            removeGrid: function (e) {
                null !== this.grid && (this.grid.destroy(e), this.grid = null)
            },
            initGrid: function () {
                if (Website.hasAccessToWebsite) {
                    var e = this;
                    this.grid = Grid($("#website"), {
                        hasAnchorPoints: !0,
                        canHideHeader: !0,
                        hasMobileSettings: !0,
                        onHeaderVisibilityChanged: function () {
                            e.grid && Website.updatePageMeta(e.getClientPageUrl(), "header", {
                                visible: e.grid.getHeader().isVisible()
                            })
                        },
                        onFooterVisibilityChanged: function () {
                            e.grid && Website.updatePageMeta(e.getClientPageUrl(), "footer", {
                                visible: e.grid.isFooterVisible()
                            })
                        },
                        onChange: function () {
                            CPanel.setChanged(!0), Tools.show(e.saveButtons)
                        }
                    })
                } else $("#website").addClass("disabled-grid").append('<div class="disabled-layer"></div>')
            },
            onHide: function () {
                null !== this.modal && (this.modal.close(), this.modal = null), null !== this.megaMenu && (this.megaMenu.close(), this.megaMenu = null), this.container.removeClass("flex flex-col-reverse flex-col"), Tools.removeShortcutListener("s"), Tools.hide(this.saveButtons), this.saveButtons = null, CPanel.setChanged(!1), this.removeGrid(!0), DemoTour.teardown()
            },
            changeViewport: function (e) {
                var t = $(e.currentTarget);
                t.tooltip("hide"), UITools.changeViewport(t.data("size"), this, g)
            },
            closePopup: function (e) {
                if (null !== this.modal && this.modal.id === e) {
                    var t = this;
                    this.modal.close((function () {
                        t.modal = null, t.grid = null, t.initGrid()
                    }))
                }
            },
            showPopup: function (e) {
                var i = this;
                null !== t && (t.close(), t = null), CPanel.checkIfNeedsSave((function () {
                    Tools.hide(i.saveButtons);
                    var t = function () {
                        WebPlatform.Popups.show(e, !0, (function (t, n, a) {
                            a.data("settings", n), a.find(".popup-container").append(Templates.get("popupSettingsButtons")), a.find(".popup-background-wrapper").append('<a class="background-edit-btn" rel="action" data-action="popupChangeBackground">' + M.CHANGE_BACKGROUND + "</a>"), i.modal = WebPlatform.Popups.edit(e, n, a, i), i.grid = i.modal.grid, "library" === staticUserDir && a.find(".modal-settings.active-widget-settings").prepend('<a rel="action" data-action="popupThumbSettings" class="widget-setting widget-button-default widget-button-default-text">Thumb</a>'), e.showSettings ? i.modal.popupSettings() : e.showPrimaryWidgetSettings && i.grid.showPrimaryWidgetSettings()
                        }))
                    };
                    null === i.modal && null === i.megaMenu ? (i.removeGrid(!1), Tools.delay(10, t)) : null !== i.modal ? (i.modal.close(t), i.modal = null) : (i.megaMenu.close(t), i.megaMenu = null)
                }))
            },
            closeMegaMenu: function () {
                if (null !== this.megaMenu) {
                    var e = this;
                    this.megaMenu.close((function () {
                        e.megaMenu = null, e.grid = null, e.initGrid()
                    }))
                }
            },
            showMegaMenu: function (e) {
                var t = this;
                CPanel.checkIfNeedsSave((function () {
                    Tools.hide(t.saveButtons);
                    var i = function () {
                        t.megaMenu = WebPlatform.MegaMenu.edit(e, t, (function (e) {
                            t.grid = e
                        }))
                    };
                    null === t.modal && null === t.megaMenu ? (t.removeGrid(!1), Tools.delay(10, i)) : null !== t.modal ? (t.modal.close(i), t.modal = null) : (t.megaMenu.close(i), t.megaMenu = null)
                }))
            },
            isEditingPage: function () {
                return !this.modal && !this.megaMenu
            },
            canSelectFunnelStep: function () {
                return !0
            },
            getActiveFunnel: function () {
                if (null !== this.modal) return this.modal.funnelId ? Website.getFunnelById(this.modal.funnelId) : null;
                var e = this.getClientPageUrl();
                if ("FUNNEL" === Website.getActiveSite().type && e.startsWith("/system") && (e = ""), e.startsWith("/") && (e = e.substring(1)), "" === e) return Website.homePage.isFunnel ? Website.getFunnelById(Website.homePage.id) : null;
                var t = e.split("/");
                return t.length > 1 ? Website.getFunnelByUrl(t[0]) : null
            },
            getActiveFunnelStep: function (e) {
                var t = null,
                    i = null;
                if (null !== this.modal && !0 !== e) {
                    if (null === (t = this.modal.funnelId ? Website.getFunnelById(this.modal.funnelId) : null)) return null;
                    i = t ? this.modal.id : null;
                    for (var n = 0; n < t.steps.length; ++n) {
                        if ("PAGE" !== (o = t.steps[n]).type && o.id === i) return o
                    }
                } else {
                    if ((s = this.getClientPageUrl()).startsWith("/") && (s = s.substring(1)), "" === s) {
                        if (Website.homePage.isFunnel)
                            if ((t = Website.getFunnelById(Website.homePage.id)) && t.steps.length) return t.steps[0];
                        return null
                    }
                    var a = s.split("/");
                    if (a.length > 1)
                        if (t = Website.getFunnelByUrl(a[0])) {
                            var s = a[1];
                            for (n = 0; n < t.steps.length; ++n) {
                                var o;
                                if ("PAGE" === (o = t.steps[n]).type && o.page.link === s) return o
                            }
                        }
                }
                return null
            },
            getPage: function () {
                var e = this.getClientPageUrl();
                return e.startsWith("/") && (e = e.substring(1)), "" === e ? Website.getHomepage() : Website.getPageByUrl(e)
            },
            popupSettings: function () {
                null !== this.modal && this.modal.popupSettings()
            },
            popupShowOnSettings: function (e) {
                null !== this.modal && this.modal.popupShowOnSettings(e)
            },
            popupStylingSettings: function (e) {
                null !== this.modal && this.modal.popupStylingSettings(e)
            },
            popupChangeBackground: function (e) {
                null !== this.modal && this.modal.popupChangeBackground(e)
            },
            popupThumbSettings: function (e) {
                null !== this.modal && this.modal.popupThumbSettings(e)
            },
            savePopup: function () {
                null !== this.modal && this.modal.save()
            },
            popupClosed: function (e) {
                this.modal = null, this.grid = null, e && this.initGrid()
            },
            saveMegaMenu: function () {
                null !== this.megaMenu && this.megaMenu.save()
            },
            megaMenuClosed: function (e) {
                this.megaMenu = null, this.grid = null, e && this.initGrid()
            },
            toggleFooter: function (e) {
                this.grid && this.grid.toggleFooter(!this.grid.isFooterVisible())
            },
            toggleHeader: function (e) {
                this.grid && this.grid.toggleHeader(!this.grid.getHeader().isVisible())
            },
            undo: function () {
                this.grid && this.grid.undo()
            },
            redo: function () {
                this.grid && this.grid.redo()
            },
            saveChanges: function () {
                T(this)
            },
            discardChanges: function (e) {
                g(this)
            },
            addPopup: function (e) {
                u()
            },
            actionBarUrlAction: function (e) {
                Website.settingsUI.show("domains")
            },
            startABSplitTest: function () {
                var e = this.getActiveFunnel(),
                    t = this.getActiveFunnelStep();
                null !== e && null !== t && Tools.prompt(M.START_SPLIT_TEST, M.START_SPLIT_TEST_CONFIRM, (function () {
                    Funnels.startABSplitTest(e, t, (function (e, t) {
                        k(e, t, "b")
                    }))
                }))
            },
            actionBarNextStep: function (e) {
                if (!$(e.target).hasClass("disabled")) {
                    var t = this.getActiveFunnel(),
                        i = this.getActiveFunnelStep();
                    if (null !== t && null !== i)
                        for (var n = 0; n < t.steps.length; ++n)
                            if (t.steps[n].id === i.id) {
                                n + 1 < t.steps.length && k(t, t.steps[n + 1], "a");
                                break
                            }
                }
            },
            actionBarPrevStep: function (e) {
                if (!$(e.target).hasClass("disabled")) {
                    var t = this.getActiveFunnel(),
                        i = this.getActiveFunnelStep();
                    if (null !== t && null !== i)
                        for (var n = 1; n < t.steps.length; ++n)
                            if (t.steps[n].id === i.id) {
                                k(t, t.steps[n - 1], "a");
                                break
                            }
                }
            },
            actionBarAddPage: function (e) {
                var t = "FUNNEL" === Website.getActiveSite().type,
                    i = !t && null === Website.getPageById(Website.BLOG_PAGE_ID),
                    n = !t && null === Website.getPageById(Website.PORTFOLIO_PAGE_ID),
                    a = null === Website.getPageById(Website.STORE_PAGE_ID),
                    s = !t,
                    o = !t;
                t && !a ? u() : h(e, {
                    blog: i,
                    portfolio: n,
                    store: a,
                    groups: s,
                    page: o
                })
            }
        })
    }(), WebPlatform.Popups = WebPlatform.Popups || {}, WebPlatform.Popups.edit = function (e, t, i, n) {
        var a, s, o, r, l = null,
            c = e.id,
            d = e.funnelId,
            p = e.variant,
            u = function () {
                r.fadeIn("fast"), CPanel.haveUnsavedChanges || CPanel.setChanged(!0)
            },
            h = function () {
                return "background-top" === t.backgroundType || "background-bottom" === t.backgroundType
            },
            f = function (e, t) {
                if (null !== l) {
                    try {
                        a.resizable("destroy"), o.resizable("destroy")
                    } catch (e) { }
                    CPanel.setChanged(!1), l.settings = null, l.popup = null, l.id = null, l.grid.destroy(!1), l.grid = null, l = null, WebPlatform.Popups.hide(c, (function () {
                        n && n.popupClosed(e), n = null, (t || dummy)()
                    }))
                }
            };
        return {
            id: null,
            popup: null,
            settings: null,
            grid: null,
            undo: function () {
                this.grid && this.grid.undo()
            },
            redo: function () {
                this.grid && this.grid.redo()
            },
            _init: function () {
                return (l = this).id = c, l.funnelId = d, l.variant = p, l.popup = i, l.settings = t, a = i.find(".popup-container"), o = i.find(".popup-background-wrapper"), s = a.find(".popup-content-wrapper"), r = i.find(".popup-save"), d && i.find('[data-action="popupShowOnSettings"]').remove(), a.resizable({
                    minWidth: 300,
                    grid: 2,
                    handles: "e, w",
                    stop: function () {
                        u()
                    }
                }), l.grid = Grid(s, {
                    enableUplsellWidget: e.enableUplsellWidget,
                    disableGlobalColumns: e.disableGlobalColumns,
                    hasAnchorPoints: !1,
                    inPopup: !0,
                    onChange: u,
                    widgetFilter: function (e) {
                        return "Container" !== e.value
                    },
                    getContainerFixedPositionOffset: function (e) {
                        return {
                            left: e.offset().left,
                            top: e.offset().top
                        }
                    }
                }), o.resizable({
                    handles: "n, e, s, w",
                    grid: 2,
                    start: function () { },
                    stop: function () {
                        if (h()) t.size = o.height();
                        else {
                            var e = o.width() / a.width() * 100;
                            o.css("width", e + "%"), s.css("width", 100 - e + "%"), t.size = 100 - e
                        }
                        u()
                    },
                    resize: function () {
                        if (!h()) {
                            var e = o.width(),
                                t = a.width() - e;
                            s.css("width", t)
                        }
                    }
                }), i.find(".popup-close-btn").click((function () {
                    CPanel.checkIfNeedsSave((function () {
                        f(!0)
                    }))
                })), delete this._init, this
            },
            close: function (e) {
                f(!1, e)
            },
            popupSettings: function () {
                Tools.showWindow({
                    title: M.POPUP_POSITION,
                    width: 460,
                    isModal: !1,
                    markup: Templates.get("popupSettingsStructure"),
                    action: {
                        onShow: function (e, n) {
                            var a = ["at-center", "at-right", "at-left", "fullsize", "at-top", "at-bottom"],
                                s = t.animationType;
                            Tools.addToggle(n.find(".option-select"), a.indexOf(t.position), (function (e, n) {
                                u(), i.removeClass(t.position), t.position = a[n], i.addClass(t.position)
                            }), ".popup", !0);
                            var o = $("#popupDelaySliderWrapper"),
                                r = $("#scrollDistanceSliderWrapper");
                            e.bindObject("data", t, [{
                                property: "name",
                                field: n.find('[name="name"]')
                            }, {
                                property: "showOnExit",
                                field: n.find('[name="showOnExit"]'),
                                type: "bool"
                            }, {
                                property: "showOnMobile",
                                field: n.find('[name="showOnMobile"]'),
                                type: "bool"
                            }, {
                                property: "animationType",
                                field: n.find('[name="popupAnimation"]'),
                                onChange: function () {
                                    i.removeClass("visible displayed"), WebPlatform.onTransitionEnd(i, (function () {
                                        i.removeClass(s), s = t.animationType, i.addClass(s), Tools.delay(300, (function () {
                                            i.addClass("visible displayed")
                                        }))
                                    }), 300)
                                }
                            }, {
                                property: "showPopupWithDelay",
                                field: n.find('[name="showPopupWithDelay"]'),
                                type: "bool",
                                onChange: function () {
                                    o[t.showPopupWithDelay ? "slideDown" : "slideUp"]("fast")
                                }
                            }, {
                                property: "showPopupOnScroll",
                                field: n.find('[name="showPopupOnScroll"]'),
                                type: "bool",
                                onChange: function () {
                                    r[t.showPopupOnScroll ? "slideDown" : "slideUp"]("fast")
                                }
                            }, {
                                property: "popupShowFrequency",
                                field: n.find('[name="popupShowFrequency"]')
                            }], (function () {
                                u()
                            })), o[t.showPopupWithDelay ? "show" : "hide"]("fast"), r[t.showPopupOnScroll ? "show" : "hide"]("fast"), Tools.addSlider({
                                min: 1,
                                max: 60,
                                step: 1,
                                value: t.popupDelay,
                                updatedViewSuffix: "s",
                                element: $("#popupDelaySlider"),
                                onChange: function (e) {
                                    t.popupDelay = e, u()
                                }
                            }), Tools.addSlider({
                                min: 5,
                                max: 100,
                                step: 5,
                                value: t.scrollDistance,
                                updatedViewSuffix: "%",
                                element: $("#scrollDistanceSlider"),
                                onChange: function (e) {
                                    t.scrollDistance = e, u()
                                }
                            })
                        },
                        onHide: function () { }
                    }
                })
            },
            popupShowOnSettings: function (e) {
                if (!d) {
                    var i = [{
                        id: -1
                    }],
                        n = {
                            "-1": M.ALL
                        };
                    Website.isFunnelWebsite() || Website.pageGroups.forEach((function (e) {
                        e.pages.forEach((function (e) {
                            i.push(e), n[e.id] = e.name
                        }))
                    })), Website.virtualPages.forEach((function (e) {
                        i.push(e), n[e.id] = e.name
                    })), Website.funnels.forEach((function (e) {
                        var t = M.FUNNEL + " " + e.name + " - ";
                        e.steps.forEach((function (e) {
                            "PAGE" === e.type && e.page && (i.push(e.page), n[e.page.id] = t + e.page.name)
                        }))
                    }));
                    var a = [];
                    t.pages = t.pages || [], t.pages.forEach((function (e) {
                        for (var t = 0; t < i.length; ++t)
                            if (i[t].id === e) {
                                a.push(i[t]);
                                break
                            }
                    })), Tools.chooseMultiple({
                        title: M.POPUP_SHOW_ON_SETTINGS,
                        message: "",
                        noItemsMessage: M.NOTHING_TO_SELECT,
                        items: i,
                        selectedItems: a,
                        isModal: !0,
                        getItemId: function (e) {
                            return e.id
                        },
                        getItemText: function (e) {
                            return n[e.id] || e.name
                        },
                        onSelect: function (e) {
                            t.pages = [];
                            for (var i = 0; i < e.length; ++i) t.pages.push(e[i].id);
                            u()
                        }
                    })
                }
            },
            popupStylingSettings: function (e) {
                Tools.showWindow({
                    title: M.POPUP_LAYOUT,
                    isModal: !1,
                    width: 400,
                    markup: Templates.get("popupStylingStructure"),
                    action: {
                        onShow: function (e, n) {
                            var r = i.find(".popup-content-wrapper"),
                                l = i.find(".popup-overlay"),
                                c = i.find(".popup-close-btn"),
                                d = ["", "background-top", "", "background-left", "background-none", "background-right", "", "background-bottom", ""];
                            $("#bgOverlaySettings")["at-center" === t.position ? "removeClass" : "addClass"]("none"), Tools.addToggle(n.find(".option-select"), d.indexOf(t.backgroundType), (function (e, n) {
                                var r = h(),
                                    l = (a.width(), a.height()),
                                    c = o.height();
                                i.removeClass(t.backgroundType), t.backgroundType = d[n], i.addClass(t.backgroundType);
                                var p = h();
                                r !== p && (p ? (t.size = 150, o.css("height", t.size + "px")) : (t.size = 100 - c / l * 100, o.css("width", 100 - t.size + "%"), s.css("width", t.size + "%"))), u()
                            }), ".popup", !0), t.overlayColor.startsWith("#") && (t.overlayColor = WebPlatform.hexToRgba(t.overlayColor, (100 - t.overlayTransparency) / 100));
                            var p = n.find('[name="overlayColor"]');
                            e.colorpickers = [];
                            var f = GlobalStyling.getColorFromClass(t.overlayColorClass, t.overlayColor);
                            e.colorpickers.push(Tools.addColorPicker(f, p.prev(), p, (function (e, i) {
                                t.overlayColor = e, t.overlayColorClass = i, GlobalStyling.setColorOrClassToElement(l, e, i, "bg"), u()
                            }))), f = GlobalStyling.getColorFromClass(t.closeBtnColorClass, t.closeBtnColor);
                            var m = n.find('[name="closeBtnColor"]');
                            e.colorpickers.push(Tools.addColorPicker(f, m.prev(), m, (function (e, i) {
                                t.closeBtnColor = e, t.closeBtnColorClass = i, GlobalStyling.setColorOrClassToElement(c, e, i, "foreground"), u()
                            })));
                            var g = n.find('[name="contentBackgroundColor"]');
                            f = GlobalStyling.getColorFromClass(t.contentBgColorClass, t.contentBgColor), e.colorpickers.push(Tools.addColorPicker(f, g.prev(), g, (function (e, i) {
                                t.contentBgColor = e, t.contentBgColorClass = i, GlobalStyling.setColorOrClassToElement(r, e, i, "bg"), u()
                            }))), Tools.addSlider({
                                min: 0,
                                max: 150,
                                step: 1,
                                value: t.contentPadding,
                                updatedViewSuffix: "px",
                                element: $("#paddingSizeSlider"),
                                onChange: function (e) {
                                    t.contentPadding = e, r.css("padding", e + "px"), u()
                                }
                            })
                        },
                        onBeforeHide: function (e, t) {
                            e.colorpickers && Tools.removeColorpickers(e.colorpickers)
                        }
                    }
                })
            },
            popupChangeBackground: function (e) {
                Tools.showWindow({
                    title: M.POPUP_BACKGROUND_SETTINGS,
                    isModal: !1,
                    width: 400,
                    markup: Templates.get("popupBackgroundStructure"),
                    action: {
                        onShow: function (e, n) {
                            var a = function (e, t) {
                                var i = "cover" === e.bgRepeat;
                                if ("none" !== e.bgImage) {
                                    var n = getThumbnailsFromBase(e.bgImageBase, "240x160") + e.bgImage;
                                    t.css({
                                        backgroundSize: i ? "cover" : "contain",
                                        backgroundImage: "url('" + n + "')"
                                    }).empty().append($('<span class="remove-button"></span>'))
                                } else t.css({
                                    backgroundImage: "url(" + resources + "/images/image-avatar.png)",
                                    backgroundSize: "auto"
                                }).empty().append($('<span class="add-button"></span>'))
                            },
                                s = n.find('[name="bgColor"]'),
                                o = n.find(".backgroundSelectImageHolder");
                            t.bgRepeat = "cover" === t.bgSize ? "cover" : t.bgRepeat, o.on("click", ".remove-button", (function (e) {
                                return t.bgImage = "none", t.bgImageBase = "", a(t, o), WebPlatform.Popups.setBackground(i, t), u(), e.stopPropagation(), e.preventDefault(), !1
                            })), e.colorpicker = Tools.addColorPicker(t.bgColor, s.prev(), s, (function (e) {
                                t.bgColor = e, a(t, o), WebPlatform.Popups.setBackground(i, t), u()
                            }));
                            e.bindObject("data", t, [{
                                property: "bgPosition",
                                field: n.find('[name="bgPosition"]')
                            }, {
                                property: "bgRepeat",
                                field: n.find('[name="bgRepeat"]'),
                                onChange: function () {
                                    t.bgSize = "cover" === t.bgRepeat ? "cover" : "auto"
                                }
                            }], (function () {
                                a(t, o), WebPlatform.Popups.setBackground(i, t), u()
                            }));
                            a(t, o), o.click((function () {
                                FileManager.selectFile({
                                    onCompleteCallback: function (e, n) {
                                        t.bgImage = n, t.bgImageBase = e, a(t, o), WebPlatform.Popups.setBackground(i, t), u()
                                    }
                                })
                            }))
                        },
                        onBeforeHide: function (e, t) {
                            e.colorpicker && Tools.removeColorPicker(e.colorpicker)
                        }
                    }
                })
            },
            popupThumbSettings: function (e) {
                Tools.showWindow({
                    title: "Change Thumbnail",
                    isModal: !1,
                    width: 400,
                    markup: Templates.get("popupPickThumbnailPopup"),
                    action: {
                        onShow: function (e, i) {
                            var n = function (e, t) {
                                if ("none" !== e.thumbImage) {
                                    var i = getThumbnailsFromBase(e.thumbImageBase, "240x160") + e.thumbImage;
                                    t.css({
                                        backgroundSize: "contain",
                                        backgroundImage: "url('" + i + "')"
                                    }).empty().append($('<span class="remove-button"></span>'))
                                } else t.css({
                                    backgroundImage: "url(" + resources + "/images/image-avatar.png)",
                                    backgroundSize: "auto"
                                }).empty().append($('<span class="add-button"></span>'))
                            },
                                a = i.find(".backgroundSelectImageHolder");
                            a.on("click", ".remove-button", (function (e) {
                                return t.thumbImage = "none", t.thumbImageBase = "", n(t, a), u(), e.stopPropagation(), e.preventDefault(), !1
                            })), n(t, a), a.click((function () {
                                FileManager.selectFile({
                                    onCompleteCallback: function (e, i) {
                                        t.thumbImage = i, t.thumbImageBase = e, n(t, a), u()
                                    }
                                })
                            }));
                            e.bindObject("data", t, [{
                                property: "visibleAsTemplate",
                                field: i.find('[name="visibleAsTemplate"]'),
                                type: "bool"
                            }], (function () {
                                u()
                            }))
                        }
                    }
                })
            },
            save: function () {
                var n = i.find(".popup-container"),
                    a = n.width(),
                    s = n.height(),
                    o = JSON.stringify(this.grid.getSaveObject().widgets);
                switch (t.position) {
                    case "at-center":
                    case "at-right":
                    case "at-left":
                        t.width = a, t.height = s;
                        break;
                    case "fullsize":
                        t.width = 400, t.height = 400;
                        break;
                    case "at-top":
                    case "at-bottom":
                        t.width = 400, t.height = s
                }
                t.pages = t.pages || [], Tools.makeWebsiteRequest({
                    action: "savePopup",
                    method: "post",
                    data: {
                        id: c,
                        funnelId: d,
                        variant: p,
                        name: t.name,
                        isTemplate: !!e.isTemplate,
                        settings: JSON.stringify(t),
                        content: o
                    },
                    onOk: function (e) {
                        if (d);
                        else {
                            var i = Website.getPopupById(c);
                            null !== i && (i.name = t.name)
                        }
                        r.fadeOut("fast"), CPanel.setChanged(!1), Tools.showSaveSuccessWindow()
                    }
                })
            }
        }._init()
    }, WebPlatform.MegaMenu = WebPlatform.MegaMenu || {}, WebPlatform.MegaMenu.edit = function (e, t, i) {
        var n, a, s, o = null,
            r = function () {
                s.fadeIn("fast"), CPanel.haveUnsavedChanges || CPanel.setChanged(!0)
            },
            l = function (e, i) {
                null !== o && (CPanel.setChanged(!1), o.grid.destroy(!1), o.grid = null, o = null, n.removeClass("visible"), a.removeClass("visible"), Tools.delay(300, (function () {
                    n.remove(), a.remove(), t && t.megaMenuClosed(e), t = null, (i || dummy)()
                })))
            };
        return {
            grid: null,
            _init: function () {
                return o = this, Tools.makeWebsiteRequest({
                    action: "getMegaMenu",
                    data: {
                        index: e
                    },
                    onOk: function (e) {
                        var c = t.container.find(".navigation-wrapper").find(".nav-wrapper"),
                            d = t.container.find(".theme"),
                            p = c[0].getBoundingClientRect(),
                            u = d[0].getBoundingClientRect(),
                            h = "top: " + (p.bottom - u.top) + "px; left: " + (p.left - u.left) + "px; width: " + (p.right - p.left) + "px;",
                            f = (n = $('<div class="mega-menu-wrapper" style="' + h + '"><div class="mega-menu-inner clearfix"></div></div>')).find(".mega-menu-inner");
                        f.html(e.data), f.append(Templates.get("megaMenuSettingsButtons")), s = n.find(".btn-save");
                        var m = n.find(".btn-cancel");
                        a = $('<div class="mega-menu-overlay"></div>'), d.append(a), d.append(n), o.grid = Grid(n, {
                            attachHeader: !1,
                            hasAnchorPoints: !1,
                            onChange: r,
                            widgetFilter: function (e) {
                                return "Container" !== e.value
                            },
                            getContainerFixedPositionOffset: function (e) {
                                return {
                                    left: e.offset().left,
                                    top: e.offset().top
                                }
                            }
                        }), Tools.delay(10, (function () {
                            n.addClass("visible"), a.addClass("visible")
                        })), i(o.grid), m.click((function () {
                            CPanel.checkIfNeedsSave((function () {
                                l(!0)
                            }))
                        }))
                    }
                }), delete this._init, this
            },
            close: function (e) {
                l(!1, e)
            },
            undo: function () {
                this.grid && this.grid.undo()
            },
            redo: function () {
                this.grid && this.grid.redo()
            },
            save: function () {
                var t = this.grid.getSaveObject().widgets;
                Tools.makeWebsiteRequest({
                    action: "saveMegaMenu",
                    method: "post",
                    data: {
                        index: e,
                        content: JSON.stringify(t)
                    },
                    onOk: function (e) {
                        s.fadeOut("fast"), CPanel.setChanged(!1), Tools.showSaveSuccessWindow()
                    }
                })
            }
        }._init()
    }, WebPlatform.MegaMenu.editFromMenu = function (e, t, i, n, a, s) {
        var o, r, l, c = null;
        s = s || dummy;
        var d = function () {
            l.fadeIn("fast"), CPanel.haveUnsavedChanges || CPanel.setChanged(!0)
        },
            p = function () {
                null !== c && (c.grid.destroy(!1), c.grid = null, c = null, o.removeClass("visible"), r.removeClass("visible"), Tools.delay(300, (function () {
                    o.remove(), r.remove(), s()
                })))
            };
        return {
            grid: null,
            undo: function () {
                this.grid && this.grid.undo()
            },
            redo: function () {
                this.grid && this.grid.redo()
            },
            _init: function () {
                return c = this, Tools.makeWebsiteRequest({
                    action: "renderWidgets",
                    method: "post",
                    data: {
                        widgets: JSON.stringify(e)
                    },
                    onOk: function (e) {
                        var s = "top: " + t.top + "px; left: " + t.left + "px; width: " + t.width + "px;",
                            u = (o = $('<div class="mega-menu-wrapper" style="' + s + '"><div class="mega-menu-inner clearfix"></div></div>')).find(".mega-menu-inner");
                        u.html(e.data), u.append(Templates.get("megaMenuSettingsButtons")), l = o.find(".btn-save");
                        var h = o.find(".btn-cancel");
                        r = $('<div class="mega-menu-overlay"></div>'), i.append(r), i.append(o), c.grid = Grid(o, {
                            attachHeader: !1,
                            hasAnchorPoints: !1,
                            onChange: d,
                            widgetFilter: function (e) {
                                return "Container" !== e.value
                            },
                            getContainerFixedPositionOffset: function (e) {
                                return {
                                    left: e.offset().left,
                                    top: e.offset().top
                                }
                            }
                        }), Tools.delay(10, (function () {
                            o.addClass("visible"), r.addClass("visible")
                        })), n(c.grid), h.click((function () {
                            p()
                        })), l.click((function () {
                            var e = c.grid.getSaveObject().widgets;
                            a(e), p()
                        }))
                    }
                }), delete this._init, this
            }
        }._init()
    };
var GlobalStyling = function () {
    var e = !1,
        t = !1,
        i = function (e) {
            if (e.startsWith("mobile-")) switch (e = e.replace("mobile-", "")) {
                case "p":
                case "h6":
                    return 14;
                case "h1":
                    return 48;
                case "h2":
                    return 32;
                case "h3":
                    return 26;
                case "h4":
                    return 22;
                case "h5":
                    return 18
            } else switch (e) {
                case "p":
                    return 16;
                case "h1":
                    return 72;
                case "h2":
                    return 42;
                case "h3":
                    return 32;
                case "h4":
                    return 24;
                case "h5":
                    return 18;
                case "h6":
                    return 14
            }
        },
        n = function (e, t) {
            var i = function (e, t, i) {
                if (void 0 !== i) {
                    for (var n = t.find(e), a = "", s = 0; s < i.length; ++s) a += "<li style=\"font-family: '" + i[s].fontString + "'\">" + i[s].name + '<a class="delete"></a></li>';
                    n.html(a)
                }
            };
            i(".imported-fonts-list", e, t.fonts), i(".custom-fonts-list", e, t.customFonts)
        },
        a = function (e) {
            for (var t = "", i = $("#googleFontsLink"), n = i.attr("href"), a = 0; a < e.fonts.length; ++a) t += "%7C" + e.fonts[a].url;
            baseGoogleFontsLink + t !== n && i.attr("href", baseGoogleFontsLink + t);
            var s = $("#customFonts");
            if (s.length && s.remove(), 0 !== (e.customFonts || []).length) {
                var o = "",
                    r = function (e, t) {
                        var i = t;
                        switch (t.toLowerCase()) {
                            case "otf":
                                i = "opentype";
                                break;
                            case "ttf":
                                i = "truetype"
                        }
                        return 'url("' + getFileFromBase(e.base, !0) + e.file + '") format("' + i + '")'
                    };
                for (a = 0; a < e.customFonts.length; ++a) o += '@font-face { font-family: "' + e.customFonts[a].name + '";src: ' + $.map(e.customFonts[a].url, r).join(",") + "}";
                $("head").append('<style type="text/css" id="customFonts">' + o + "</style>")
            }
        },
        s = function (t, n, a, s, r) {
            var l = (n.texts || {})[s] || {},
                c = l.spacing || 0;
            c = 0 === c ? "normal" : c + "px";
            var d = t.find(".heading").css({
                fontSize: l.size || i(s),
                letterSpacing: c,
                lineHeight: (l.height || 1) + "em",
                fontFamily: l.font || "Open Sans"
            });
            d.text(l.font || "Open Sans"), GlobalStyling.setColorOrClassToElement(d, l.color || "#3e3e3e", l.colorClass, "foreground"), r && (o(n, a), e = !0)
        },
        o = $.debounce(250, (function (e, t) {
            Widgets.renderWidget({
                type: "globalStyling",
                data: {
                    styles: e,
                    pageStyles: t
                }
            }, (function (t) {
                $(".page-layout").removeClass("style-boxed-layout style-full-width-layout").addClass("style-" + e.websiteLayout), $("#global-styles").replaceWith(t)
            }))
        }));
    return {
        getAvailableFontNames: function () {
            return $.unique($.merge(GlobalStyling.getCustomFontNames(Website.globalStyling), $.merge(GlobalStyling.getFontNames(Website.globalStyling), Tools.TEXT_EDITOR_FONTS)))
        },
        getFonts: function (e) {
            var t = [];
            return (e || []).forEach((function (e) {
                t.push(e.fontString)
            })), t
        },
        getFontNames: function (e) {
            return GlobalStyling.getFonts(e.fonts)
        },
        getCustomFontNames: function (e) {
            return GlobalStyling.getFonts(e.customFonts)
        },
        getColorFromClass: function (e, t) {
            return e && Website.globalStyling.colors[e] || t
        },
        getGlobalColorClassFromColor: function (e) {
            for (var t = ["primary", "secondary1", "secondary2", "secondary3", "secondary4"], i = 0; i < t.length; ++i) {
                var n = t[i],
                    a = Website.globalStyling.colors[n];
                if (a.toLowerCase() === e.toLowerCase()) return n;
                if (a.startsWith("#") && e.startsWith("rgba(") && e.endsWith(", 1)") && Tools.rgbaToHexNoAlpha(e).toLowerCase() === a.toLowerCase()) return n
            }
            return ""
        },
        setColorOrClassToElement: function (e, t, i, n) {
            var a = "border" === n ? "border-color-" : "bg" === n || "background" === n ? "bg-color-" : "fill" === n ? "fill-color-" : "color-",
                s = "border" === n ? "border-color" : "bg" === n || "background" === n ? "background-color" : "fill" === n ? "fill" : "color";
            e.removeClass(a + "primary " + a + "secondary1 " + a + "secondary2 " + a + "secondary3 " + a + "secondary4"), i ? e.css(s, "").addClass(a + i) : e.css(s, t)
        },
        enableFonts: a,
        edit: function () {
            var r = $.extend(!0, {}, Website.globalStyling || {}),
                l = null,
                c = null,
                d = "websitePage" === Hooks.active.hook.activePage.name;
            r.fonts = r.fonts || [], r.texts = r.texts || {}, r.colors = r.colors || {}, $("#globalStyling").addClass("active");
            var p = $("#globalWebsiteSettings");
            Tools.showInlinePopup({
                markup: p.clone(),
                width: p.data("width") + "px",
                customClass: "global-settings-window",
                action: {
                    onShow: function (p, u) {
                        ! function (t, i) {
                            t.on("click", ".add-font-btn", (function () {
                                s() ? Tools.selectFont((function (s) {
                                    for (var o = 0; o < i.fonts.length; ++o)
                                        if (s.name === i.fonts[o].name) return;
                                    i.fonts.push({
                                        name: s.name,
                                        url: s.url,
                                        fontString: s.fontString
                                    }), n(t, i), a(i), e = !0
                                })) : CPanel.showError(M.ERR_TOO_MANY_FONTS)
                            }));
                            var s = function () {
                                return (i.fonts || []).length + (i.customFonts || []).length < 8
                            },
                                o = function (s, o) {
                                    var r = o.find('input[name="name"]').val().trim(),
                                        l = o.find(".select-like.woff-file"),
                                        c = o.find(".select-like.otf-file"),
                                        d = c.data("ext"),
                                        p = [];
                                    if ("" === r && p.push(M.CUSTOM_FONT_NO_NAME), i.customFonts && i.customFonts.length)
                                        for (var u = 0; u < i.customFonts.length; u++)
                                            if (i.customFonts[u].name === r) {
                                                p.push(M.CUSTOM_FONT_NOT_UNIQUE);
                                                break
                                            } if (void 0 === l.data("file") && void 0 === c.data("file") && p.push(M.CUSTOM_FONT_NONE_UPLOADED), 0 === p.length) {
                                                var h = {};
                                                void 0 !== l.data("file") && (h.woff = {
                                                    file: l.data("file"),
                                                    base: l.data("base")
                                                }), void 0 !== c.data("file") && (h[d] = {
                                                    file: c.data("file"),
                                                    base: c.data("base")
                                                }), i.customFonts = i.customFonts || [], i.customFonts.push({
                                                    name: r,
                                                    fontString: r,
                                                    url: h
                                                }), s.close(), n(t, i), a(i), e = !0
                                            } else Tools.showError(p.join("<br/><br/>"))
                                };
                            t.on("click", ".add-custom-font-btn", (function () {
                                if (s()) {
                                    var e = function (e, t, i) {
                                        e.on("click", t, (function () {
                                            var e = $(this);
                                            FileManager.selectFile({
                                                listWoffOnly: "woff" === i,
                                                listOtfOnly: "otf" === i,
                                                listImagesOnly: !1,
                                                onCompleteCallback: function (t, n) {
                                                    var a = n.substring(n.lastIndexOf(".") + 1);
                                                    "woff" !== i || a === i ? "otf" !== i || a === i || "ttf" === a ? (e.data("file", n), e.data("base", t), e.data("ext", a), e.val(n)) : Tools.showError(M.CUSTOM_FONTS_MSG_OTF) : Tools.showError(M.CUSTOM_FONTS_MSG_WOFF)
                                                }
                                            })
                                        }))
                                    };
                                    Tools.showWindow({
                                        isModal: !0,
                                        title: M.CUSTOM_FONTS_NEW,
                                        width: 400,
                                        markup: Templates.get("globalStylingAddCustomFont"),
                                        buttons: [Button(M.ADD, Button.CLASS_MIDDLE_BLUE, o), Button.MIDDLE_CANCEL],
                                        action: {
                                            onShow: function (t, i) {
                                                e(i, ".select-like.woff-file", "woff"), e(i, ".select-like.otf-file", "otf")
                                            }
                                        }
                                    })
                                } else CPanel.showError(M.ERR_TOO_MANY_FONTS)
                            }));
                            var r = function (s, o) {
                                var r = s.closest("li").index();
                                r >= o.length || (o.splice(r, 1), n(t, i), a(i), e = !0)
                            };
                            t.on("click", ".imported-fonts-list .delete", (function () {
                                r($(this), i.fonts)
                            })), t.on("click", ".custom-fonts-list .delete", (function () {
                                r($(this), i.customFonts)
                            })), n(t, i)
                        }(u, r), d && Tools.makeWebsiteRequest({
                            action: "getPageMeta",
                            data: {
                                url: Hooks.active.hook.activePage.getClientPageUrl()
                            },
                            onOk: function (e) {
                                (c = (e.data || {}).style || {}).bgPosition = c.bgPosition || "repeat", c.bgColor = c.bgColor || "transparent", l = $.extend(!0, {}, c),
                                    function (e, i, n, a) {
                                        var s = i.find('[data-role="bgImage"]'),
                                            r = function () {
                                                if (a.bgImage) {
                                                    var e = getThumbnailsFromBase(a.bgImageBase, "240x160") + a.bgImage;
                                                    s.css({
                                                        backgroundSize: "cover",
                                                        backgroundImage: "url('" + e + "')"
                                                    }).empty().append($('<span class="remove-button"></span>'))
                                                } else s.css({
                                                    backgroundImage: "url(" + resources + "/images/image-avatar.png)",
                                                    backgroundSize: "auto"
                                                }).empty().append($('<span class="add-button"></span>'))
                                            };
                                        s.on("click", ".remove-button", (function (e) {
                                            return a.bgImage = "", a.bgImageBase = "", e.stopPropagation(), e.preventDefault(), t = !0, r(), o(n, a), !1
                                        })), s.click((function () {
                                            FileManager.selectFile({
                                                onCompleteCallback: function (e, i) {
                                                    a.bgImage = i, a.bgImageBase = e, t = !0, r(), o(n, a)
                                                }
                                            })
                                        }));
                                        var l = i.find('[name="backgroundColor"]'),
                                            c = GlobalStyling.getColorFromClass(a.bgColorClass, a.bgColor);
                                        Tools.addColorPicker(c, l.prev(), l, (function (e, i) {
                                            a.bgColor = e, a.bgColorClass = i, t = !0, o(n, a)
                                        })), e.bindObject("data", a, [{
                                            property: "bgPosition"
                                        }], (function () {
                                            t = !0, o(n, a)
                                        })), r()
                                    }(p, u.find('div[data-tab="page"]'), r, l)
                            }
                        });
                        var h = u.find(".global-left-nav ul");
                        h.find(".global-page").parent()[d ? "removeClass" : "addClass"]("none");
                        var f = u.find(".global-nav-content").children("div");
                        h.find("a").click((function () {
                            var e = $(this).data("target") || "";
                            f.hide(), f.filter('[data-tab="' + e + '"]').show(), u.addClass("nav-content-visible")
                        })), u.find(".back").click((function () {
                            u.removeClass("nav-content-visible")
                        })), p.bindObject("data", r, [{
                            property: "anchorUnderline",
                            type: "bool"
                        }, {
                            property: "anchorHoverUnderline",
                            type: "bool"
                        }, {
                            property: "websiteLayout",
                            onChange: function () {
                                u.find(".pattern-select")["boxed-layout" === r.websiteLayout ? "removeClass" : "addClass"]("none-soft")
                            }
                        }], (function () {
                            o(r, l), e = !0
                        })), u.find(".pattern-select")["boxed-layout" === r.websiteLayout ? "removeClass" : "addClass"]("none-soft");
                        var m = $("#bgPatternSelect"),
                            g = r.customBgPattern;
                        "" !== g && m.find(".custom").css("background", "url(" + content + g + ") no-repeat center center").show(), u.on("click", "#bgPatternSelect li", (function () {
                            var t = $(this);
                            if (t.hasClass("add")) FileManager.selectFile({
                                onCompleteCallback: function (t, i) {
                                    m.find(".selected").removeClass("selected"), r.bgPattern = "custom", r.customBgPattern = getFileFromBase(t, !1) + i, m.find(".custom").show().addClass("selected").find("a").css("background", "url(" + getThumbnailsFromBase(t, "72x50") + i + ") no-repeat center center"), o(r, l), e = !0
                                }
                            });
                            else {
                                m.find(".selected").removeClass("selected");
                                var i = t.data("type");
                                t.addClass("selected"), r.bgPattern = i, o(r, l), e = !0
                            }
                        })), u.find(".font-wrapper[data-setting]").click((function (e) {
                            ! function (e, t, n) {
                                var a = $(e.target).closest(".font-wrapper"),
                                    o = a.data("setting") || "";
                                if (o) {
                                    var r = t.texts[o] = t.texts[o] || {};
                                    r = mergeUnique(r, {
                                        color: "#3e3e3e",
                                        font: "Open Sans",
                                        size: i(o),
                                        spacing: 1
                                    }), Tools.showWindow({
                                        width: 420,
                                        isModal: !1,
                                        showNextTo: $(e.target),
                                        markup: Templates.get("globalStylingHeadingSettings"),
                                        action: {
                                            onShow: function (e, i) {
                                                var l = $.unique($.merge(GlobalStyling.getCustomFontNames(t), $.merge(GlobalStyling.getFontNames(t), Tools.TEXT_EDITOR_FONTS))),
                                                    c = i.find('[name="font"]'),
                                                    d = "";
                                                l.forEach((function (e) {
                                                    d += '<option value="' + e + '">' + e + "</option>"
                                                })), c.empty().append(d), e.bindObject("data", r, [{
                                                    property: "font"
                                                }], (function () {
                                                    s(a, t, n, o, !0)
                                                }));
                                                var p = i.find('[name="textColor"]'),
                                                    u = GlobalStyling.getColorFromClass(r.colorClass, r.color);
                                                Tools.addColorPicker(u, p.prev(), p, (function (e, i) {
                                                    r.color = e, r.colorClass = i, s(a, t, n, o, !0)
                                                })), Tools.addSlider({
                                                    min: 10,
                                                    max: 128,
                                                    step: 1,
                                                    value: r.size,
                                                    updateView: i.find(".headingFontSize"),
                                                    updatedViewSuffix: "px",
                                                    element: $("#headingFontSize"),
                                                    onChange: function (e) {
                                                        r.size = e, s(a, t, n, o, !0)
                                                    }
                                                }), Tools.addSlider({
                                                    min: 0,
                                                    max: 100,
                                                    step: 1,
                                                    value: 10 * r.spacing,
                                                    updateView: i.find(".headingLetterSpacing"),
                                                    updatedViewSuffix: "px",
                                                    getUpdatedViewText: function (e) {
                                                        return 0 === e ? M.NORMAL : (e / 10).toFixed(1)
                                                    },
                                                    element: $("#headingLetterSpacing"),
                                                    onChange: function (e) {
                                                        r.spacing = e / 10, s(a, t, n, o, !0)
                                                    }
                                                }), Tools.addSlider({
                                                    min: 1,
                                                    max: 30,
                                                    step: 1,
                                                    value: 10 * (r.height || 1),
                                                    updateView: i.find(".headingLineHeight"),
                                                    updatedViewSuffix: "em",
                                                    getUpdatedViewText: function (e) {
                                                        return (e / 10).toFixed(1)
                                                    },
                                                    element: $("#headingLineHeight"),
                                                    onChange: function (e) {
                                                        r.height = e / 10, s(a, t, n, o, !0)
                                                    }
                                                })
                                            }
                                        }
                                    })
                                }
                            }(e, r, l)
                        })).each((function () {
                            var e = $(this);
                            s(e, r, l, e.data("setting"), !1)
                        })), r.colors = r.colors || {}, u.find(".color-picker-input").each((function () {
                            var t = $(this),
                                i = t.attr("name");
                            i && Tools.addColorPicker(r.colors[i] || "#fefefe", t.prev(), t, (function (t) {
                                r.colors[i] = t, o(r, l), e = !0
                            }), dummy, !0)
                        })), u.find(".styling-ports a").click((function () {
                            var e = $(this);
                            if (!e.hasClass("active")) {
                                e.parent().find(".active").removeClass("active"), e.addClass("active");
                                var t = 1 === e.index();
                                $("#desktopViewFonts, #linkStylesWrapper")[t ? "addClass" : "removeClass"]("none"), $("#mobileViewFonts")[t ? "removeClass" : "addClass"]("none"), CPanel.currentPage.startsWith("/me/website") && $(".viewport-buttons").find('[data-size="' + (t ? "mobile" : "desktop") + '"]').trigger("click")
                            }
                        })).eq($(".working-area-wrapper").hasClass("mobile-view") ? 1 : 0).click(), Tools.addSlider({
                            min: 800,
                            max: 1800,
                            step: 20,
                            value: r.gridSize || 1100,
                            updatedViewSuffix: "px",
                            element: $("#gridSizeSlider"),
                            onChange: function (t) {
                                r.gridSize = t, o(r, l), e = !0
                            }
                        })
                    },
                    onBeforeHide: function (i, n, s) {
                        if (e || t) return Tools.prompt(M.UNSAVED_CHANGES_TITLE, M.GLOBAL_STYLES_UNSAVED_CHANGES_MESSAGE, (function () {
                            Website.saveGlobalStyling(e ? r : null, t ? l : null, (function () {
                                e = !1, t = !1, s()
                            }))
                        }), (function () {
                            a(Website.globalStyling), o(Website.globalStyling, c), e = !1, t = !1, s()
                        }), M.SAVE_CHANGES, M.DISCARD_CHANGES_BTN, !0, "unsaved-changes-dlg"), !1;
                        s()
                    },
                    onHide: function () {
                        $("#globalStyling").removeClass("active")
                    }
                },
                buttons: [Button(M.CONFIRM, Button.CLASS_MIDDLE_BLUE, (function (i, n) {
                    Website.saveGlobalStyling(e ? r : null, t ? l : null, (function () {
                        e = !1, t = !1, i.close()
                    }))
                })), Button(M.CANCEL, Button.CLASS_MIDDLE_GREY, (function (i, n) {
                    (e || t) && (e = !1, t = !1, a(Website.globalStyling), o(Website.globalStyling, c)), i.close()
                }))]
            })
        }
    }
}();
window.Website = window.Website || {}, Website.settingsUI = function () {
    var e, t = function (t) {
        e.data("modified", t ? "yes" : "no")
    },
        i = function (e, t, i) {
            var n = t < 0;
            field = n ? {
                name: "",
                description: "",
                tag: "new-tag",
                value: ""
            } : $.extend({}, e[t]);
            var a = [];
            n || a.push(Button(M.DELETE, Button.CLASS_MIDDLE_GREY, (function (n, a) {
                Tools.prompt(M.DELETE, M.DEL_CONFIRM, (function () {
                    e.splice(t, 1), i(), n.close()
                }))
            }), Button.FLOAT_LEFT)), a.push(Button(M.SAVE, Button.CLASS_MIDDLE_BLUE, (function (n, a) {
                "" !== field.name.trim() ? (t < 0 ? e.push(field) : e[t] = field, i(), n.close()) : Tools.showError(M.ERR_EMPTY_NAME)
            }))), a.push(Button.MIDDLE_CANCEL), Tools.showWindow({
                isModal: !0,
                width: 400,
                title: n ? M.NEW_PERSONALIZATION_TAG : M.EDIT_PERSONALIZATION_TAG,
                markup: Templates.get("websiteSettingsEditPersTagTemplate"),
                buttons: a,
                action: {
                    onShow: function (e, t) {
                        var i = t.find('[data-role="tag"]');
                        i.text("{" + field.tag + "}"), e.bindObject("data", field, [{
                            property: "name",
                            onChange: function () {
                                n && (field.tag = Tools.urlFromString(field.name.trim().toLowerCase(), !0, !0, "_"), i.text("{" + field.tag + "}"))
                            }
                        }, {
                            property: "description"
                        }])
                    }
                }
            })
        },
        n = function (e, t, i) {
            var n = t < 0;
            field = n ? {
                from: "",
                to: "",
                regex: !1,
                type: "301"
            } : $.extend({
                type: "301"
            }, e[t]);
            var a = [Button(M.SAVE, Button.CLASS_MIDDLE_BLUE, (function (n, a) {
                "" !== field.from.trim() && "" !== field.to.trim() ? (t < 0 ? e.push(field) : e[t] = field, field.regex || (field.from.startsWith("/") || (field.from = "/" + field.from), field.to.startsWith("/") || field.to.toLowerCase().startsWith("http://") || field.to.toLowerCase().startsWith("https://") || (field.to = "/" + field.to)), i(), n.close()) : Tools.showError(M.ERR_FILL_ALL_FIELDS)
            })), Button.MIDDLE_CANCEL];
            Tools.showWindow({
                isModal: !0,
                width: 400,
                title: n ? M.REDIRECT_POPUP_NEW : M.REDIRECT_POPUP_EDIT,
                markup: Templates.get("websiteSettingsEdit301RedirectTemplate"),
                buttons: a,
                action: {
                    onShow: function (e, t) {
                        e.bindObject("data", field, [{
                            property: "from"
                        }, {
                            property: "to"
                        }, {
                            property: "regex",
                            type: "bool"
                        }, {
                            property: "type"
                        }])
                    }
                }
            })
        },
        a = function (e) {
            Tools.makeWebsiteRequest({
                action: "setRedirectRules",
                method: "post",
                data: {
                    rules: JSON.stringify(e)
                },
                onOk: function () {
                    Website.redirectRules = e
                }
            })
        },
        s = function (e, t) {
            var i = (t = t || {}).funnel || null,
                n = (Website.getActiveSite(), i && i.id > 0),
                a = function (e, t, i, n, a, s) {
                    var o = $(format(Templates.get("websiteSettingsDomainRowTemplate"), "domain", i, "primary", s ? "primary-domain" : "", "type", a ? M.DOMAIN_TYPE_FUNNEL : "", "typeClass", a ? "funnel" : n ? "external" : "system", "rootDomain", window.domain, "ip", window.aRecord || "52.2.101.114"));
                    return e[t ? "prepend" : "append"](o), o
                },
                s = function (t, i) {
                    primaryDomain = i, e.find(".primary-domain").removeClass("primary-domain"), t.addClass("primary-domain")
                };
            return CPanel.showLoadingBar("domains-loader", e, (function () {
                e.append(Templates.get("websiteSettingsDomainsTemplate"));
                var o = e.find(".connect-domain-section"),
                    r = e.find(".new-domain-section");
                n && e.find('[data-role="title"]').remove();
                var l = e.find('[data-role="custom-domain"]');
                Tools.makeWebsiteRequest({
                    action: "getWebsiteDomainsInfo",
                    data: {
                        funnelId: i ? i.id : -1
                    },
                    onOk: function (c) {
                        for (var d = c.data, p = d.external || [], u = d.system, h = 0; h < p.length; ++h) a(l, !1, p[h].host, !0, p[h].funnelDomain, p[h].host === primaryDomain);
                        if (a(e.find('[data-role="system-domain"]'), !1, u, !1, !1, u === primaryDomain), d.canAddDomain) {
                            var f = function () {
                                r.slideToggle("fast"), o.slideToggle("fast")
                            };
                            e.on("click.domainSettings", 'a[data-role="toggle-new"]', f), e.on("click.domainSettings", 'a[data-role="connect"]', (function () {
                                var r = e.find('input[name="new-domain"]').val().toLowerCase();
                                UITools.connectThirdPartyDomain(r, i ? i.id : null, (function (e) {
                                    f();
                                    var i = a(l, !0, e, !0, !1, !1);
                                    s(i, e), UITools.showDomainInformation(e, i), t.domainConnected && t.domainConnected(e), n && o.hide()
                                }))
                            }))
                        } else o.hide(), e.find(".no-domain-section").show();
                        n && p.length && o.hide(), e.on("click.domainSettings", 'a[data-action="upgrade"]', (function () {
                            t.rootPopup && t.rootPopup.close(), CPanel.goToUrl("/me/settings/billing")
                        })), CPanel.hideLoadingBar("domains-loader")
                    }
                }), e.on("click.domainSettings", 'a[data-action="changeSubdomain"]', (function () {
                    var e = $(event.target).closest(".new-subdomain-wrapper").find('input[name="custom-subdomain"]').val().trim().toLowerCase();
                    "" !== e && e !== window.subdomain && Tools.prompt(M.DEL_CONFIRM, M.CHANGE_SYSTEM_DOMAIN_CONFIRM, (function () {
                        Tools.makeWebsiteRequest({
                            action: "changeSubdomain",
                            data: {
                                subdomain: e
                            },
                            onOk: function () {
                                CPanel.redirect("https://" + e + "." + window.domain + "/me/website")
                            }
                        })
                    }))
                })), e.on("click.domainSettings", ".domain-settings", (function () {
                    var i = $(this),
                        a = i.closest(".domain-item"),
                        l = a.hasClass("primary-domain"),
                        c = a.hasClass("system"),
                        d = a.hasClass("funnel"),
                        p = a.data("domain"),
                        u = [];
                    n || l || d || u.push({
                        text: M.MAKE_PRIMARY_DOMAIN,
                        icon: "fa-star",
                        tag: "make-primary",
                        tooltip: "make_primary_domain"
                    }), c ? n ? u.push({
                        text: M.CHANGE_FUNNEL_URL_TITLE,
                        icon: "fa-font",
                        tag: "change-funnel-url",
                        tooltip: "editSystemSubdomain"
                    }) : u.push({
                        text: M.CHANGE_SYSTEM_SUBDOMAIN,
                        icon: "fa-font",
                        tag: "change-subdomain",
                        tooltip: "editSystemSubdomain"
                    }) : (u.push({
                        text: M.TOGGLE_DNS,
                        icon: "fa-list",
                        tag: "show-settings",
                        tooltip: "edit_domain"
                    }), u.push({
                        text: M.DISCONNECT_DOMAIN,
                        icon: "fa-unlink",
                        tag: "disconnect",
                        tooltip: "unlink_domain"
                    })), Tools.showTooltipOptions(i, u, (function (i, n, l, c) {
                        switch (c) {
                            case "change-funnel-url":
                                (t.changeFunnelUrl || dummy)(a);
                                break;
                            case "make-primary":
                                if (t.funnel) return;
                                Tools.makeWebsiteRequest({
                                    action: "makeWebsiteDomainPrimary",
                                    data: {
                                        domain: p
                                    },
                                    onOk: function (e) {
                                        s(a, p)
                                    }
                                });
                                break;
                            case "change-subdomain":
                                if (t.funnel) return;
                                a.find(".new-subdomain-wrapper").slideToggle("fast");
                                break;
                            case "show-settings":
                                UITools.showDomainInformation(p, a);
                                break;
                            case "disconnect":
                                Tools.prompt("", M.DELETE_DOMAIN_CONFIRM, (function () {
                                    Tools.makeWebsiteRequest({
                                        action: "unlinkWebsiteDomain",
                                        data: {
                                            domain: p
                                        },
                                        onOk: function (i) {
                                            primaryDomain === p ? s(e.find(".system"), userDomain) : Website.funnels.forEach((function (e) {
                                                e.host === p && (e.host = null)
                                            })), a.remove(), o.show(), r.hide(), (t.domainDisconnected || dummy)()
                                        }
                                    })
                                }))
                        }
                    }))
                }))
            }), !0), {
                close: function (t) {
                    e.off(".domainSettings"), t()
                }
            }
        };
    return {
        show: function (o) {
            var r, l = null;
            return Tools.showInlinePopup({
                isModal: !1,
                title: "",
                noNav: !0,
                noTitle: !0,
                width: 850,
                markup: format(Templates.get("websiteSettingsPopup"), "title", "FUNNEL" === Website.getActiveSite().type ? M.FUNNEL_SETTINGS : M.WEBSITE_SETTINGS),
                action: {
                    onShow: function (c, d) {
                        r = c, Website.hasPermission(Permission.DOMAIN) || d.find('[data-show="domains"]').parent().remove(), Website.hasAccessToWebsite || d.find('[data-show="301redirects"]').parent().remove(), $("#themeSettingsBtnSmall").addClass("active"), e = d, window.dynamicHeader || d.find('a[data-open="headers"]').parent().removeClass("none"), d.on("click", "a[data-open]", (function (e) {
                            var t = $(this).data("open"),
                                i = function () {
                                    switch (t) {
                                        case "code":
                                            ! function () {
                                                var e = $.extend({}, WebsiteSettings.getSettings()),
                                                    t = !1,
                                                    i = (e.customScript || "").trim();
                                                "" !== i.replace(/\n/gi, "").trim() && (e.googleAnalytics = (e.googleAnalytics || "") + '\n\n<script type="text/javascript">\n' + i + "\n<\/script>", t = !0, e.customScript = "");
                                                var n = ["customHeaderCode", "customCSS", "googleAnalytics"],
                                                    a = ["css", "headMarkup", "bodyMarkup"];
                                                Tools.showInlinePopup({
                                                    isModal: !1,
                                                    width: 1110,
                                                    customClass: "code-settings-window",
                                                    markup: Templates.get("codeSettingsMarkup"),
                                                    action: {
                                                        onShow: function (t, i) {
                                                            for (var s = {}, o = 0; o < n.length; ++o) i.find('textarea[data-option="' + n[o] + '"]').val(e[n[o]]);
                                                            "websitePage" === Hooks.active.hook.activePage.name && Hooks.active.hook.activePage.isEditingPage() && Tools.makeWebsiteRequest({
                                                                action: "getPageMeta",
                                                                data: {
                                                                    url: Hooks.active.hook.activePage.getClientPageUrl()
                                                                },
                                                                onOk: function (e) {
                                                                    i.find("#pageCodeLinks").removeClass("none");
                                                                    for (var t = (e.data || {}).markup || {}, n = 0; n < a.length; ++n) i.find('textarea[data-option="' + a[n] + '"]').val(t[a[n]] || "")
                                                                }
                                                            }), i.on("click", ".popup-tab-trigger", (function () {
                                                                var e = $(this),
                                                                    t = e.closest("li");
                                                                if (!t.hasClass("active")) {
                                                                    i.find(".global-nav .active").removeClass("active"), t.addClass("active");
                                                                    var n = e.data("show") || "";
                                                                    if (n) {
                                                                        i.find(".popup-tab-content:not(.none)").addClass("none");
                                                                        var a = i.find('.popup-tab-content[data-tab="' + n + '"]').removeClass("none");
                                                                        s[n] || (s[n] = Tools.highlight(a.find("textarea"), {
                                                                            mode: a.data("type"),
                                                                            theme: "dark",
                                                                            onChange: function (e) {
                                                                                e.getTextArea().value = e.getValue(), i.data("modified", "yes")
                                                                            }
                                                                        }))
                                                                    }
                                                                }
                                                            })), i.find(".popup-tab-trigger").eq(0).click()
                                                        },
                                                        onBeforeHide: function (e, t) {
                                                            if ("yes" === t.data("modified")) return CPanel.showUnsavedChangesPrompt((function () {
                                                                t.data("modified", "no"), e.close()
                                                            }), dummy), !1
                                                        }
                                                    },
                                                    buttons: [Button(M.SAVE, Button.CLASS_MIDDLE_BLUE, (function (i, s) {
                                                        s.data("modified", "no");
                                                        for (var o = [], r = 1, l = function () {
                                                            0 == --r && i.close()
                                                        }, c = null, d = 0; d < n.length; ++d) {
                                                            var p = n[d],
                                                                u = s.find('[data-option="' + p + '"]').val().trim();
                                                            e[p] !== u && ("customCSS" === p && u.indexOf("<style") > -1 && (u = u.replace(/<style[^>]*>/gi, "").replace(/<\/style>/gi, "").trim()), u = Tools.sanitizeUserCode(u), (c = c || {})[p] = e[p] = u, o.push(u))
                                                        }
                                                        if (t && ((c = c || {}).customScript = ""), "websitePage" === Hooks.active.hook.activePage.name && Hooks.active.hook.activePage.isEditingPage()) {
                                                            var h = !1,
                                                                f = {};
                                                            for (d = 0; d < a.length; ++d) u = s.find('textarea[data-option="' + a[d] + '"]').val(), f[a[d]] !== u && (u = Tools.sanitizeUserCode(u), h = !0, f[a[d]] = u, o.push(u));
                                                            h && (++r, Website.updatePageMeta(Hooks.active.hook.activePage.getClientPageUrl(), "markup", f, l))
                                                        }
                                                        c && (++r, WebsiteSettings.save(c, (function () {
                                                            WebsiteSettings.set(e), l()
                                                        }))), Tools.reviewCustomCode(o), l()
                                                    })), Button.MIDDLE_CANCEL]
                                                })
                                            }();
                                            break;
                                        case "seo":
                                            var i = Website.getActiveBuilderPage(),
                                                n = i.link,
                                                a = i.headerType,
                                                s = Website.getActiveFunnel(),
                                                o = Website.getActiveFunnelStep();
                                            UITools.showPageSettingsDialog({
                                                page: i,
                                                tab: 1,
                                                funnelStepId: null === o ? 0 : o.id,
                                                funnelId: null === s ? 0 : s.id,
                                                onUpdated: function (e) {
                                                    if ((e.link !== n || a !== e.headerType) && e.id > 0) {
                                                        var t = contextPath + Website.pagePrefix + "/" + e.link;
                                                        CPanel.goToUrl(t, !0)
                                                    }
                                                },
                                                onSetAsHomepage: function () { }
                                            });
                                            break;
                                        case "files":
                                            Tools.showTooltipOptions($(e.target), [{
                                                text: M.VIEW_ALL_IMAGES,
                                                icon: "fa-image",
                                                tag: "images"
                                            }, {
                                                text: M.VIEW_ALL_FILES,
                                                icon: "fa-file",
                                                tag: "files"
                                            }], (function (e, t, i, n) {
                                                c.close((function () {
                                                    FileManager.selectFile({
                                                        listImagesOnly: "images" === n,
                                                        onCompleteCallback: null
                                                    })
                                                }))
                                            }));
                                            break;
                                        case "headers":
                                            !window.dynamicHeader && LegacyHeader && LegacyHeader.edit()
                                    }
                                };
                            "files" === t ? i() : c.close(i)
                        }));
                        var p = d.find(".web-settings-content");
                        d.on("click", 'a[data-role="save"]', (function () {
                            l && l.save((function () {
                                t(!1), Tools.showCornerMessage(800, M.UPDATED)
                            }))
                        }));
                        var u = function (e) {
                            var o = d.find('a[data-show="' + e + '"]');
                            if (!o.parent().hasClass("active")) {
                                var r = function () {
                                    var r = function () {
                                        switch (p.empty(), o.closest("ul").find(".active").removeClass("active"), o.parent().addClass("active"), e) {
                                            case "general":
                                                l = function (e) {
                                                    var i = $.extend({}, WebsiteSettings.getSettings()),
                                                        n = null;
                                                    "FUNNEL" === Website.getActiveSite().type && (n = $.extend({}, Website.getActiveFunnel().settings || {})), e.append(Templates.get("websiteSettingsGeneralTemplate"));
                                                    var a = {
                                                        websiteTitle: Website.websiteTitle
                                                    };
                                                    "FUNNEL" === Website.getActiveSite().type && (e.find('[data-role="funnel-settings"]').removeClass("none"), e.find('[name="hideProductLinks"]').prop("checked", !!n.hideProductLinks).change((function () {
                                                        n.hideProductLinks = $(this).prop("checked")
                                                    })), e.find('[name="showCheckoutButton"]').prop("checked", !!n.showCheckoutButton).change((function () {
                                                        n.showCheckoutButton = $(this).prop("checked"), e.find('[data-role="checkout-button-controls"]')[n.showCheckoutButton ? "slideDown" : "slideUp"]("fast")
                                                    })), e.find('[name="checkoutButtonStyle"]').val(n.checkoutButtonStyle || "button").change((function () {
                                                        n.checkoutButtonStyle = $(this).val()
                                                    })), e.find('[data-role="checkout-button-controls"]')[n.showCheckoutButton ? "show" : "hide"](), e.find('[name="checkoutButtonTarget"]').click((function () {
                                                        var e = $(this);
                                                        Website.selectPage({
                                                            allowEmptyCaption: !0,
                                                            allowFunnelStepPicking: !0,
                                                            activeFunnel: Website.getActiveFunnel(),
                                                            activeFunnelStep: Website.getActiveFunnelStep(),
                                                            selected: {
                                                                link: i.checkoutButtonTarget
                                                            },
                                                            onSelect: function (t) {
                                                                e.val(LinkPicker.getLinkDisplayText(t.link)), n.checkoutButtonTarget = t.link
                                                            }
                                                        })
                                                    })).val(LinkPicker.getLinkDisplayText(n.checkoutButtonTarget) || M.NEXT_FUNNEL_STEP));
                                                    var s = Tools.bind(a, [{
                                                        property: "websiteTitle"
                                                    }], (function () {
                                                        t(!0)
                                                    }), e);
                                                    e.on("click.generalSettings", ".add-image", (function () {
                                                        var e = $(this);
                                                        FileManager.selectFile({
                                                            onCompleteCallback: function (t, n) {
                                                                e.find(".add-button").removeClass("add-button").addClass("remove-button"), e.css({
                                                                    backgroundImage: "url(" + getThumbnailsFromBase(t, "160x120") + n + ")"
                                                                });
                                                                var a = e.data("name");
                                                                i[a] = getFileFromBase(t, !1) + n
                                                            }
                                                        })
                                                    })), e.on("click.generalSettings", ".remove-button", (function (e) {
                                                        e.stopPropagation(), e.preventDefault();
                                                        var t = $(this).closest(".add-image");
                                                        t.css({
                                                            backgroundImage: "url(" + resources + "/images/image-avatar.png)"
                                                        });
                                                        var n = t.data("name");
                                                        i[n] = "", t.find(".remove-button").removeClass("remove-button").addClass("add-button")
                                                    }));
                                                    for (var o = ["favicon", "shareImage"], r = 0; r < o.length; ++r) {
                                                        var l = o[r];
                                                        if (s = e.find('[data-name="' + l + '"]'), i[l]) {
                                                            var c = content + convertBaseToTemplateUrl(i[l], "160x120");
                                                            s.css({
                                                                backgroundImage: "url(" + c + ")"
                                                            }), s.find(".add-button").removeClass("add-button").addClass("remove-button")
                                                        }
                                                    }
                                                    return {
                                                        close: function (t) {
                                                            s.unbind(), e.off(".generalSettings"), t()
                                                        },
                                                        save: function (e) {
                                                            WebsiteSettings.save({
                                                                websiteTitle: a.websiteTitle,
                                                                favicon: i.favicon || "",
                                                                shareImage: i.shareImage || "",
                                                                funnelSettings: n
                                                            }, (function () {
                                                                WebsiteSettings.set(i), Website.websiteTitle = a.websiteTitle, Website.getActiveSite().name = Website.websiteTitle, "FUNNEL" === Website.getActiveSite().type && (Website.getActiveFunnel().settings = n), e()
                                                            }))
                                                        }
                                                    }
                                                }(p);
                                                break;
                                            case "domains":
                                                l = s(p, null);
                                                break;
                                            case "language":
                                                l = function (e) {
                                                    var i = $.extend({}, WebsiteSettings.getSettings());
                                                    e.append(Templates.get("websiteSettingsLanguageTemplate"));
                                                    var n = {
                                                        rtl: i.rtl || "",
                                                        websiteLanguage: i.websiteLanguage,
                                                        dateFormat: i.dateFormat,
                                                        websiteTimezone: Website.websiteTimezone
                                                    },
                                                        a = Website.websiteTimezoneName,
                                                        s = e.find('select[name="websiteLanguage"]');
                                                    8 === platformId && s.find('options[value="da"]').prop("value", "da_JK"), e.find('input[name="rtl"]').change((function () {
                                                        n.rtl = this.checked ? "rtl" : ""
                                                    })).prop("checked", "rtl" === n.rtl), e.find(".websiteTimezone").text(a).click((function () {
                                                        var e = $(this);
                                                        Tools.makeWebsiteRequest({
                                                            action: "listTimezones",
                                                            onOk: function (t) {
                                                                for (var i = $('<select class="mt-15"></select>'), s = "", o = 0; o < t.data.length; ++o) {
                                                                    var r = t.data[o];
                                                                    s += '<option value="' + r.id + '">' + r.name + "</option>"
                                                                }
                                                                i.append(s), i.change((function () {
                                                                    var t = i.find("option:selected");
                                                                    n.websiteTimezone = t.attr("value"), a = t.text(), e.text(a), i.remove(), e.removeClass("none"), i = null
                                                                })), i.val(n.websiteTimezone), e.addClass("none").after(i)
                                                            }
                                                        })
                                                    }));
                                                    var o = Tools.bind(n, [{
                                                        property: "websiteLanguage"
                                                    }, {
                                                        property: "dateFormat"
                                                    }], (function () {
                                                        t(!0)
                                                    }), e);
                                                    return {
                                                        close: function (e) {
                                                            o.unbind(), e()
                                                        },
                                                        save: function (e) {
                                                            WebsiteSettings.save(n, (function () {
                                                                i.websiteLanguage = n.websiteLanguage, i.dateFormat = n.dateFormat, i.rtl = n.rtl || "", Website.websiteTimezone = n.websiteTimezone, Website.websiteTimezoneName = a, WebsiteSettings.set(i), "rtl" === i.rtl ? $(".theme").removeClass("direction-ltr").addClass("direction-rtl") : $(".theme").removeClass("direction-rtl").addClass("direction-ltr"), e()
                                                            }))
                                                        }
                                                    }
                                                }(p);
                                                break;
                                            case "cookies":
                                                l = function (e) {
                                                    var i = $.extend({}, WebsiteSettings.getSettings());
                                                    e.append(Templates.get("websiteSettingsCookiesTemplate"));
                                                    var n = $("#cookiesDisclaimerTextWrapper");
                                                    i.showCookiesDisclaimer = i.showCookiesDisclaimer && "1" === i.showCookiesDisclaimer, i.showCookiesDisclaimer && n.removeClass("none-soft"), i.cookieInfoBtnText = i.cookieInfoBtnText || "Learn More", i.cookieAcceptBtnText = i.cookieAcceptBtnText || M.ACCEPT;
                                                    var a = Tools.bind(i, [{
                                                        property: "showCookiesDisclaimer",
                                                        type: "bool",
                                                        onChange: function () {
                                                            n[i.showCookiesDisclaimer ? "slideDown" : "slideUp"]("fast")
                                                        }
                                                    }, {
                                                        property: "cookiesDisclaimerText",
                                                        parseOptions: {
                                                            sanitizeStrings: !1
                                                        }
                                                    }, {
                                                        property: "cookieInfoBtnText"
                                                    }, {
                                                        property: "cookieAcceptBtnText"
                                                    }], (function () {
                                                        t(!0)
                                                    }), e);
                                                    return e.find(".select-like").click((function () {
                                                        var e = $(this);
                                                        Website.selectPage({
                                                            allowEmptyCaption: !0,
                                                            allowFunnelStepPicking: !1,
                                                            selected: {
                                                                link: i.cookieInfoBtnLink
                                                            },
                                                            onSelect: function (n) {
                                                                e.val(LinkPicker.getLinkDisplayText(n.link)), i.cookieInfoBtnLink = n.link, t(!0)
                                                            }
                                                        })
                                                    })).val(LinkPicker.getLinkDisplayText(i.cookieInfoBtnLink)), {
                                                        close: function (e) {
                                                            a.unbind(), e()
                                                        },
                                                        save: function (e) {
                                                            i.cookiesDisclaimerText = Tools.sanitizeUserCode(i.cookiesDisclaimerText.trim()), i.cookiesDisclaimerText || (i.cookiesDisclaimerText = M.DEFAULT_COOKIE_DISCLAIMER), WebsiteSettings.save({
                                                                showCookiesDisclaimer: i.showCookiesDisclaimer,
                                                                cookiesDisclaimerText: i.cookiesDisclaimerText,
                                                                cookieInfoBtnText: i.cookieInfoBtnText,
                                                                cookieAcceptBtnText: i.cookieAcceptBtnText,
                                                                cookieInfoBtnLink: i.cookieInfoBtnLink
                                                            }, (function () {
                                                                i.showCookiesDisclaimer = i.showCookiesDisclaimer ? "1" : "0", WebsiteSettings.set(i), e()
                                                            }))
                                                        }
                                                    }
                                                }(p);
                                                break;
                                            case "apps":
                                                l = function (e) {
                                                    Website.appsSettings = Website.appsSettings || {}, e.append(Templates.get("websiteSettingsAppsTemplate"));
                                                    var t = function (e) {
                                                        var i = Website.appsSettings.speedy || {
                                                            username: "",
                                                            password: ""
                                                        },
                                                            n = function (e, t) {
                                                                Tools.makeWebsiteRequest({
                                                                    action: "saveAppsSettings",
                                                                    method: "post",
                                                                    data: {
                                                                        app: "speedy",
                                                                        data: JSON.stringify(i)
                                                                    },
                                                                    onOk: function (n) {
                                                                        Website.appsSettings.speedy = i, e.close(), t()
                                                                    }
                                                                })
                                                            };
                                                        s("speedy") ? Tools.showWindow({
                                                            title: "Speedy " + M.SETTINGS,
                                                            width: 550,
                                                            markup: Templates.get("speedySettingsMarkup"),
                                                            showCloseButton: !0,
                                                            action: {
                                                                onShow: function (e, t) {
                                                                    var n = WebPlatform.Fulfillment.Speedy(),
                                                                        a = t.find('select[name="speedyOfficeId"]');
                                                                    t.find(".price-input").addClass(Website.storeCurrencyPositionAtLeft ? "left-sign" : "right-sign").find(".symbol-sign").text(Website.storeCurrencySymbol);
                                                                    var s = Templates.get("checkboxTemplate"),
                                                                        o = "";
                                                                    i.services.forEach((function (e) {
                                                                        o += format(s, "id", "service-" + e.id, "title", e.name, "checked", e.enabled ? "checked" : "")
                                                                    })), t.find("#servicesWrapper").append(o);
                                                                    var r = "",
                                                                        l = t.find('select[name="senderClientId"]');
                                                                    i.clients.forEach((function (e) {
                                                                        r += escapeFormat('<option value="%id%">%address%</option>', "id", e.id, "address", e.address)
                                                                    })), l.append(r), $("#speedyAddressWrapper")["address" === i.senderType ? "show" : "hide"](), $("#speedyOfficeWrapper")["address" === i.senderType ? "hide" : "show"](), $("#officeFixedPriceWrapper")[i.officeUseFixedPrice ? "show" : "hide"](), $("#addressFixedPriceWrapper")[i.addressUseFixedPrice ? "show" : "hide"](), i.preview || (i.test = !1);
                                                                    var c = e.bindObject("data", i, [{
                                                                        property: "active",
                                                                        type: "bool"
                                                                    }, {
                                                                        property: "senderName"
                                                                    }, {
                                                                        property: "senderPhone"
                                                                    }, {
                                                                        property: "senderType",
                                                                        onChange: function () {
                                                                            $("#speedyAddressWrapper")["address" === i.senderType ? "slideDown" : "slideUp"]("fast"), $("#speedyOfficeWrapper")["address" === i.senderType ? "slideUp" : "slideDown"]("fast")
                                                                        }
                                                                    }, {
                                                                        property: "senderClientId"
                                                                    }, {
                                                                        property: "deliveryPayer"
                                                                    }, {
                                                                        property: "singleParcel",
                                                                        type: "bool"
                                                                    }, {
                                                                        property: "preview",
                                                                        type: "bool",
                                                                        onChange: function () {
                                                                            i.preview || c.setTest(!1)
                                                                        }
                                                                    }, {
                                                                        property: "test",
                                                                        type: "bool",
                                                                        onChange: function () {
                                                                            i.test && c.setPreview(!0)
                                                                        }
                                                                    }, {
                                                                        property: "insurance",
                                                                        type: "bool"
                                                                    }, {
                                                                        property: "fragile",
                                                                        type: "bool"
                                                                    }, {
                                                                        property: "documents",
                                                                        type: "bool"
                                                                    }, {
                                                                        property: "postalOrder",
                                                                        type: "bool"
                                                                    }, {
                                                                        property: "returnsPayer"
                                                                    }, {
                                                                        property: "address",
                                                                        type: "bool"
                                                                    }, {
                                                                        property: "office",
                                                                        type: "bool"
                                                                    }, {
                                                                        property: "addressFreeOver",
                                                                        type: "money"
                                                                    }, {
                                                                        property: "addressErrorPrice",
                                                                        type: "money"
                                                                    }, {
                                                                        property: "officeFreeOver",
                                                                        type: "money"
                                                                    }, {
                                                                        property: "officeErrorPrice",
                                                                        type: "money"
                                                                    }, {
                                                                        property: "officeFixedPrice",
                                                                        type: "money"
                                                                    }, {
                                                                        property: "officeUseFixedPrice",
                                                                        type: "bool",
                                                                        onChange: function () {
                                                                            $("#officeFixedPriceWrapper")[i.officeUseFixedPrice ? "slideDown" : "slideUp"]("fast")
                                                                        }
                                                                    }, {
                                                                        property: "addressFixedPrice",
                                                                        type: "money"
                                                                    }, {
                                                                        property: "addressUseFixedPrice",
                                                                        type: "bool",
                                                                        onChange: function () {
                                                                            $("#addressFixedPriceWrapper")[i.addressUseFixedPrice ? "slideDown" : "slideUp"]("fast")
                                                                        }
                                                                    }]);
                                                                    n.autocompleteCities(i.speedyCity || "", 100, t.find('input[name="speedyCity"]'), (function (e) {
                                                                        e.id !== i.speedyCityId && (i.speedyCity = e.name, i.speedyCityId = e.id, i.speedyOfficeId = "", n.loadOffices(100, i.speedyCityId, i.speedyOfficeId, a, dummy))
                                                                    })), a.change((function () {
                                                                        i.speedyOfficeId = +this.value
                                                                    })), i.speedyCityId && n.loadOffices(100, i.speedyCityId, i.speedyOfficeId, a, dummy)
                                                                }
                                                            },
                                                            buttons: [Button(M.DISCONNECT, Button.CLASS_MIDDLE_GREY, (function (e, t) {
                                                                e.close(), o("speedy")
                                                            }), Button.FLOAT_LEFT), Button(M.SAVE, Button.CLASS_MIDDLE_BLUE, (function (a, s) {
                                                                if (i.senderPhone)
                                                                    if ("address" !== i.senderType || i.senderClientId)
                                                                        if ("address" === i.senderType || i.speedyOfficeId)
                                                                            if (i.office || i.address) {
                                                                                var o = s.find("#servicesWrapper"),
                                                                                    r = !1;
                                                                                i.services.forEach((function (e) {
                                                                                    e.enabled = o.find('[name="service-' + e.id + '"]').prop("checked"), r = r || e.enabled
                                                                                })), r ? n(a, (function () {
                                                                                    a.close(), t(e)
                                                                                })) : Tools.showError(M.SPEEDY_SELECT_SERVICE)
                                                                            } else Tools.showError(M.SPEEDY_ACTIVATE_ORIGIN);
                                                                        else Tools.showError(M.SPEEDY_SELECT_ORIGIN);
                                                                    else Tools.showError(M.SPEEDY_SELECT_ORIGIN);
                                                                else Tools.showError(M.ENTER_SENDER_PHONE)
                                                            })), Button.MIDDLE_CANCEL]
                                                        }) : Tools.showWindow({
                                                            title: "Speedy Settings",
                                                            width: 500,
                                                            markup: Templates.get("speedyConnectMarkup"),
                                                            showCloseButton: !0,
                                                            action: {
                                                                onShow: function (e, t) { }
                                                            },
                                                            buttons: [Button(M.LOGIN, Button.CLASS_MIDDLE_BLUE, (function (a, s) {
                                                                var o = s.find('input[name="username"]').val(),
                                                                    r = s.find('input[name="password"]').val();
                                                                Tools.makeWebsiteRequest({
                                                                    action: "shippingServiceRequest",
                                                                    method: "post",
                                                                    data: {
                                                                        provider: "speedy",
                                                                        type: "connect",
                                                                        username: o,
                                                                        password: r
                                                                    },
                                                                    onOk: function (s) {
                                                                        var l = s.data,
                                                                            c = [],
                                                                            d = [];
                                                                        (l.clients || []).forEach((function (e) {
                                                                            c.push({
                                                                                id: e.clientId,
                                                                                address: e.address.fullAddressString,
                                                                                name: e.clientName,
                                                                                phone: e.phones && e.phones.length ? e.phones[0].number : "",
                                                                                privatePerson: e.privatePerson
                                                                            })
                                                                        })), c.sort((function (e, t) {
                                                                            for (e = e.id, t = t.id; e < 1e14;) e *= 10;
                                                                            for (; t < 1e14;) t *= 10;
                                                                            return e - t
                                                                        })), (l.services || []).forEach((function (e) {
                                                                            "PARCEL" === e.cargoType && e.additionalServices && e.additionalServices.cod && "ALLOWED" === e.additionalServices.cod.allowance && d.push({
                                                                                id: e.id,
                                                                                name: e.name,
                                                                                enabled: !0
                                                                            })
                                                                        })), i = {
                                                                            username: o,
                                                                            password: r,
                                                                            services: d,
                                                                            clients: c,
                                                                            active: !0,
                                                                            senderName: "",
                                                                            senderPhone: "",
                                                                            senderType: "address",
                                                                            senderClientId: 0,
                                                                            speedyCity: "",
                                                                            speedyCityId: "",
                                                                            speedyOfficeId: 0,
                                                                            deliveryPayer: "receiver",
                                                                            singleParcel: !0,
                                                                            preview: !0,
                                                                            test: !0,
                                                                            insurance: !1,
                                                                            fragile: !1,
                                                                            documents: !1,
                                                                            postalOrder: !1,
                                                                            returnsPayer: "receiver",
                                                                            address: !0,
                                                                            office: !0,
                                                                            addressFreeOver: null,
                                                                            addressErrorPrice: 7,
                                                                            officeFreeOver: null,
                                                                            officeErrorPrice: 6
                                                                        }, c.length && (i.senderName = c[0].name || "", i.senderPhone = c[0].phone || "", i.senderClientId = c[0].id, i.privatePerson = c[0].privatePerson), n(a, (function () {
                                                                            e(), t(e)
                                                                        }))
                                                                    }
                                                                })
                                                            }))]
                                                        })
                                                    },
                                                        i = function (e, t) {
                                                            var i = Website.appsSettings[e] || {
                                                                key: "",
                                                                host: ""
                                                            },
                                                                n = [Button(M.SAVE_AND_VERIFY, Button.CLASS_MIDDLE_BLUE, (function (n, a) {
                                                                    i.key = i.key.trim() || "", i.host = i.host.trim().split(".")[0] || "";
                                                                    var s = i.host.split("://");
                                                                    s.length > 1 && (i.host = s[1]), Tools.makeWebsiteRequest({
                                                                        action: "saveAppsSettings",
                                                                        method: "post",
                                                                        data: {
                                                                            app: e,
                                                                            key: i.key,
                                                                            host: i.host
                                                                        },
                                                                        onOk: function (a) {
                                                                            Website.appsSettings[e] = i, n.close(), (t || dummy)()
                                                                        }
                                                                    })
                                                                }), Button.FLOAT_IGNORE), Button.MIDDLE_CANCEL];
                                                            s(e) && n.push(Button(M.DISCONNECT, Button.CLASS_MIDDLE_GREY, (function (t, i) {
                                                                t.close(), o(e)
                                                            }), Button.FLOAT_LEFT)), Tools.showWindow({
                                                                title: M.SETTINGS,
                                                                width: 500,
                                                                markup: Templates.get("activecampaignSettingsMarkup"),
                                                                showCloseButton: !0,
                                                                action: {
                                                                    onShow: function (e, t) {
                                                                        e.bindObject("data", i, [{
                                                                            property: "key",
                                                                            field: t.find('[name="activecampaignKey"]'),
                                                                            type: "string"
                                                                        }, {
                                                                            property: "host",
                                                                            field: t.find('[name="activecampaignHost"]'),
                                                                            type: "string"
                                                                        }])
                                                                    }
                                                                },
                                                                buttons: n
                                                            })
                                                        },
                                                        n = [{
                                                            type: "mailchimp",
                                                            typeName: "MailChimp",
                                                            image: resources + "/images/app-mailchimp.png?v=" + resourcesVersion,
                                                            description: M.MAILCHIMP_DESC,
                                                            edit: function (e) {
                                                                var t = Website.appsSettings.mailchimp || {
                                                                    key: ""
                                                                },
                                                                    i = [Button(M.SAVE_AND_VERIFY, Button.CLASS_MIDDLE_BLUE, (function (i, n) {
                                                                        t.key = t.key.trim() || "", Tools.makeWebsiteRequest({
                                                                            action: "saveAppsSettings",
                                                                            method: "post",
                                                                            data: {
                                                                                app: "mailchimp",
                                                                                key: t.key || "",
                                                                                enableDoubleOptIn: !0 === t.enableDoubleOptIn
                                                                            },
                                                                            onOk: function (n) {
                                                                                Website.appsSettings.mailchimp = t, i.close(), (e || dummy)()
                                                                            }
                                                                        })
                                                                    }), Button.FLOAT_IGNORE), Button.MIDDLE_CANCEL];
                                                                s("mailchimp") && i.push(Button(M.DISCONNECT, Button.CLASS_MIDDLE_GREY, (function (e, t) {
                                                                    e.close(), o("mailchimp")
                                                                }), Button.FLOAT_LEFT)), Tools.showWindow({
                                                                    title: M.MAILCHIMP_SETTINGS,
                                                                    width: 500,
                                                                    markup: Templates.get("mailchimpSettingsMarkup"),
                                                                    showCloseButton: !0,
                                                                    action: {
                                                                        onShow: function (e, i) {
                                                                            e.bindObject("data", t, [{
                                                                                property: "key",
                                                                                field: i.find('[name="mailchimpKey"]'),
                                                                                type: "string"
                                                                            }, {
                                                                                property: "enableDoubleOptIn",
                                                                                field: i.find('[name="enableDoubleOptIn"]'),
                                                                                type: "bool"
                                                                            }])
                                                                        }
                                                                    },
                                                                    buttons: i
                                                                })
                                                            }
                                                        }, {
                                                            type: "mailerlite",
                                                            typeName: "MailerLite",
                                                            image: resources + "/images/mailerlite.png?v=" + resourcesVersion,
                                                            description: M.MAILERLITE_DESC,
                                                            edit: function (e) {
                                                                var t = Website.appsSettings.mailerlite || {
                                                                    key: ""
                                                                },
                                                                    i = [Button(M.SAVE_AND_VERIFY, Button.CLASS_MIDDLE_BLUE, (function (i, n) {
                                                                        t.key = t.key.trim() || "", Tools.makeWebsiteRequest({
                                                                            action: "saveAppsSettings",
                                                                            method: "post",
                                                                            data: {
                                                                                app: "mailerlite",
                                                                                key: t.key
                                                                            },
                                                                            onOk: function (n) {
                                                                                Website.appsSettings.mailerlite = t, i.close(), (e || dummy)()
                                                                            }
                                                                        })
                                                                    }), Button.FLOAT_IGNORE), Button.MIDDLE_CANCEL];
                                                                s("mailerlite") && i.push(Button(M.DISCONNECT, Button.CLASS_MIDDLE_GREY, (function (e, t) {
                                                                    e.close(), o("mailerlite")
                                                                }), Button.FLOAT_LEFT)), Tools.showWindow({
                                                                    title: M.MAILERLITE_SETTINGS,
                                                                    width: 500,
                                                                    markup: Templates.get("mailerliteSettingsMarkup"),
                                                                    showCloseButton: !0,
                                                                    action: {
                                                                        onShow: function (e, i) {
                                                                            e.bindObject("data", t, [{
                                                                                property: "key",
                                                                                field: i.find('[name="mailerliteKey"]'),
                                                                                type: "string"
                                                                            }])
                                                                        }
                                                                    },
                                                                    buttons: i
                                                                })
                                                            }
                                                        }, {
                                                            type: "fbpixel",
                                                            typeName: "Facebook Pixel",
                                                            image: resources + "/images/app-fbpixel.png?v=" + resourcesVersion,
                                                            description: M.FB_PX_DESCRIPTION,
                                                            edit: function (e) {
                                                                var t = Website.appsSettings.fbpixel || {
                                                                    id: ""
                                                                },
                                                                    i = [Button(M.SAVE_AND_VERIFY, Button.CLASS_MIDDLE_BLUE, (function (i, n) {
                                                                        var a = t.id = t.id.trim();
                                                                        "" !== a && "" === a.replace(/\d+/, "") ? Tools.makeWebsiteRequest({
                                                                            action: "saveAppsSettings",
                                                                            method: "post",
                                                                            data: {
                                                                                app: "fbpixel",
                                                                                data: JSON.stringify(t)
                                                                            },
                                                                            onOk: function (n) {
                                                                                Website.appsSettings.fbpixel = t, i.close(), (e || dummy)()
                                                                            }
                                                                        }) : Tools.showError(M.FB_PX_INVALID_ID)
                                                                    }), Button.FLOAT_IGNORE), Button.MIDDLE_CANCEL];
                                                                s("fbpixel") && i.push(Button(M.DISCONNECT, Button.CLASS_MIDDLE_GREY, (function (e, t) {
                                                                    e.close(), o("fbpixel")
                                                                }), Button.FLOAT_LEFT));
                                                                var n = window.customFbPixelHelpUrl || "https://help.web-repository.com/article/show/129032-add-facebook-pixel-to-website-or-funnel";
                                                                Tools.showWindow({
                                                                    title: "Facebook Pixel",
                                                                    width: 500,
                                                                    markup: format(Templates.get("fbPixelSettingsMarkup"), "capiHelpArticle", n),
                                                                    showCloseButton: !0,
                                                                    action: {
                                                                        onShow: function (e, i) {
                                                                            var n = i.find('[data-role="fb-px-token-wrapper"]');
                                                                            n[t.enabled ? "removeClass" : "addClass"]("none-soft"), e.bindObject("data", t, [{
                                                                                property: "id",
                                                                                field: i.find('[name="fbpixelKey"]'),
                                                                                type: "string"
                                                                            }, {
                                                                                property: "enabled",
                                                                                type: "bool",
                                                                                onChange: function () {
                                                                                    n[t.enabled ? "slideDown" : "slideUp"]("fast")
                                                                                }
                                                                            }, {
                                                                                property: "token"
                                                                            }, {
                                                                                property: "testCode"
                                                                            }])
                                                                        }
                                                                    },
                                                                    buttons: i
                                                                })
                                                            },
                                                            connectedAppDescription: function () {
                                                                var e = primaryDomain + "/product_feed",
                                                                    t = '<a class="underline f-left" style="word-break: break-all" target="_blank" href="http://' + e + '">' + e + "</a>";
                                                                return '<span class="f-left connected-app-desc">' + format(M.FACEBOOK_PRODUCT_FEED_DESC || "", "url", t) + "</span>"
                                                            }()
                                                        }, {
                                                            type: "getresponse",
                                                            typeName: "GetResponse",
                                                            image: resources + "/images/getresponse.png?v=" + resourcesVersion,
                                                            description: M.GETRESPONSE_DESC,
                                                            edit: function (e) {
                                                                var t = Website.appsSettings.getresponse || {
                                                                    key: ""
                                                                },
                                                                    i = [Button(M.SAVE_AND_VERIFY, Button.CLASS_MIDDLE_BLUE, (function (i, n) {
                                                                        t.key = t.key.trim() || "", Tools.makeWebsiteRequest({
                                                                            action: "saveAppsSettings",
                                                                            method: "post",
                                                                            data: {
                                                                                app: "getresponse",
                                                                                key: t.key
                                                                            },
                                                                            onOk: function (n) {
                                                                                Website.appsSettings.getresponse = t, i.close(), (e || dummy)()
                                                                            }
                                                                        })
                                                                    }), Button.FLOAT_IGNORE), Button.MIDDLE_CANCEL];
                                                                s("getresponse") && i.push(Button(M.DISCONNECT, Button.CLASS_MIDDLE_GREY, (function (e, t) {
                                                                    e.close(), o("getresponse")
                                                                }), Button.FLOAT_LEFT)), Tools.showWindow({
                                                                    title: M.GETRESPONSE_SETTINGS,
                                                                    width: 500,
                                                                    markup: Templates.get("getresponseSettingsMarkup"),
                                                                    showCloseButton: !0,
                                                                    action: {
                                                                        onShow: function (e, i) {
                                                                            e.bindObject("data", t, [{
                                                                                property: "key",
                                                                                field: i.find('[name="getresponseKey"]'),
                                                                                type: "string"
                                                                            }])
                                                                        }
                                                                    },
                                                                    buttons: i
                                                                })
                                                            }
                                                        }, {
                                                            type: "activecampaign",
                                                            typeName: "ActiveCampaign",
                                                            image: resources + "/images/activecampaign.png?v=" + resourcesVersion,
                                                            description: M.ACTIVECAMPAIGN_APP_DESC,
                                                            edit: function (e) {
                                                                i("activecampaign", e)
                                                            }
                                                        }, {
                                                            type: "aweber",
                                                            typeName: "AWeber",
                                                            image: resources + "/images/aweber-logo.jpg?v=" + resourcesVersion,
                                                            description: M.AWEBER_DESC,
                                                            edit: function (e) {
                                                                s("aweber") ? o("aweber") : Tools.makeWebsiteRequest({
                                                                    action: "getOAuth2AuthorizationUrl",
                                                                    data: {
                                                                        type: "aweber"
                                                                    },
                                                                    onOk: function (e) {
                                                                        var t = e.data;
                                                                        window.location.href = t
                                                                    }
                                                                })
                                                            }
                                                        }, {
                                                            type: "moosend",
                                                            typeName: "Moosend",
                                                            image: resources + "/images/moosend.svg?v=" + resourcesVersion,
                                                            description: M.MOOSEND_DESC,
                                                            edit: function (e) {
                                                                var t = Website.appsSettings.moosend || {
                                                                    key: ""
                                                                },
                                                                    i = [Button(M.SAVE_AND_VERIFY, Button.CLASS_MIDDLE_BLUE, (function (i, n) {
                                                                        t.key = t.key.trim() || "", Tools.makeWebsiteRequest({
                                                                            action: "saveAppsSettings",
                                                                            method: "post",
                                                                            data: {
                                                                                app: "moosend",
                                                                                key: t.key
                                                                            },
                                                                            onOk: function (n) {
                                                                                Website.appsSettings.moosend = t, i.close(), (e || dummy)()
                                                                            }
                                                                        })
                                                                    }), Button.FLOAT_IGNORE), Button.MIDDLE_CANCEL];
                                                                s("moosend") && i.push(Button(M.DISCONNECT, Button.CLASS_MIDDLE_GREY, (function (e, t) {
                                                                    e.close(), o("moosend")
                                                                }), Button.FLOAT_LEFT)), Tools.showWindow({
                                                                    title: M.MOOSEND_SETTINGS,
                                                                    width: 500,
                                                                    markup: Templates.get("moosendSettingsMarkup"),
                                                                    showCloseButton: !0,
                                                                    action: {
                                                                        onShow: function (e, i) {
                                                                            e.bindObject("data", t, [{
                                                                                property: "key",
                                                                                field: i.find('[name="moosendKey"]'),
                                                                                type: "string"
                                                                            }])
                                                                        }
                                                                    },
                                                                    buttons: i
                                                                })
                                                            }
                                                        }, {
                                                            type: "webhook",
                                                            typeName: M.WEBHOOK_LABEL,
                                                            image: resources + "/images/app-webhook.png?v=" + resourcesVersion,
                                                            description: M.WEBHOOK_DESC_LABEL,
                                                            edit: function (e, t) {
                                                                var i = {};
                                                                t && (i = $.extend({}, getById(Website.webhooks, t))), mergeUnique(i, {
                                                                    id: "wh_" + WebPlatform.getRandomString(9).toLowerCase(),
                                                                    target: "",
                                                                    secret: WebPlatform.getRandomString(16),
                                                                    events: []
                                                                });
                                                                var n = [Button(M.SAVE, Button.CLASS_MIDDLE_BLUE, (function (t, n) {
                                                                    i.events = [], i.target = i.target.trim(), n.find('input[type="checkbox"]:checked').each((function () {
                                                                        i.events.push($(this).attr("name"))
                                                                    })), 0 !== i.events.length ? "" !== i.target ? (i.target.toLowerCase().startsWith("http://") || i.target.toLowerCase().startsWith("https://") || (i.target = "http://" + i.target), Tools.makeWebsiteRequest({
                                                                        action: "saveAppsSettings",
                                                                        method: "post",
                                                                        data: {
                                                                            app: "webhook",
                                                                            data: JSON.stringify(i)
                                                                        },
                                                                        onOk: function (i) {
                                                                            Website.webhooks = i.data, t.close(), e()
                                                                        }
                                                                    })) : Tools.showError("Enter your destination URL!") : Tools.showError("Select the events you're interested in!")
                                                                }), Button.FLOAT_IGNORE), Button.MIDDLE_CANCEL];
                                                                t && n.push(Button(M.DISCONNECT, Button.CLASS_MIDDLE_GREY, (function (e, i) {
                                                                    e.close(), o("webhook", t)
                                                                }), Button.FLOAT_LEFT)), Tools.showWindow({
                                                                    title: M.SETTINGS,
                                                                    width: 500,
                                                                    markup: format(Templates.get("webhookSettingsMarkup"), "secret", i.secret),
                                                                    showCloseButton: !0,
                                                                    action: {
                                                                        onShow: function (e, t) {
                                                                            e.bindObject("data", i, [{
                                                                                property: "target"
                                                                            }]), i.events.forEach((function (e) {
                                                                                t.find('input[name="' + e + '"]').prop("checked", !0)
                                                                            }))
                                                                        }
                                                                    },
                                                                    buttons: n
                                                                })
                                                            }
                                                        }, {
                                                            type: "email",
                                                            typeName: "Email Server",
                                                            image: resources + "/images/app-email.png?v=" + resourcesVersion,
                                                            description: M.EMAIL_SERVER_DESC,
                                                            edit: function (e) {
                                                                var t = Website.emailSettings,
                                                                    i = [Button(M.SAVE_AND_VERIFY, Button.CLASS_MIDDLE_BLUE, (function (i, n) {
                                                                        Tools.makeWebsiteRequest({
                                                                            action: "saveAppsSettings",
                                                                            method: "post",
                                                                            data: {
                                                                                app: "email",
                                                                                emailSettings: JSON.stringify(t || {})
                                                                            },
                                                                            onOk: function (n) {
                                                                                i.close(), Tools.showCornerMessage(1e4, M.TEST_EMAIL_SETTINGS_EMAIL_SENT, Tools.TOOLTIP_TYPE_WARNING), Website.emailSettings = t, (e || dummy)()
                                                                            }
                                                                        })
                                                                    }), Button.FLOAT_IGNORE), Button.MIDDLE_CANCEL];
                                                                s("email") && i.push(Button(M.DISCONNECT, Button.CLASS_MIDDLE_GREY, (function (e, t) {
                                                                    e.close(), o("email")
                                                                }), Button.FLOAT_LEFT)), Tools.showWindow({
                                                                    title: M.EMAIL_SERVER_SETTINGS,
                                                                    width: 500,
                                                                    markup: Templates.get("emailSettingsMarkup"),
                                                                    showCloseButton: !0,
                                                                    action: {
                                                                        onShow: function (e, i) {
                                                                            e.bindObject("data", t, [{
                                                                                property: "host",
                                                                                field: i.find('[name="smtpHost"]'),
                                                                                type: "string"
                                                                            }, {
                                                                                property: "port",
                                                                                field: i.find('[name="smtpPort"]'),
                                                                                type: "int"
                                                                            }, {
                                                                                property: "user",
                                                                                field: i.find('[name="smtpUser"]'),
                                                                                type: "string"
                                                                            }, {
                                                                                property: "pass",
                                                                                field: i.find('[name="smtpPass"]'),
                                                                                type: "string"
                                                                            }, {
                                                                                property: "email",
                                                                                field: i.find('[name="emailFrom"]'),
                                                                                type: "text"
                                                                            }, {
                                                                                property: "name",
                                                                                field: i.find('[name="fromName"]'),
                                                                                type: "string"
                                                                            }])
                                                                        }
                                                                    },
                                                                    buttons: i
                                                                })
                                                            }
                                                        }, ...window.messagingDisabled ? [] : [{
                                                            type: "twilio",
                                                            typeName: "Twilio",
                                                            image: resources + "/images/twilio.png?v=" + resourcesVersion,
                                                            description: M.TWILIO_DESC,
                                                            edit: function (e) {
                                                                var t, i, n, a = Website.appsSettings.twilio || {
                                                                    authType: TWILIO_AUTH_TYPE.AUTH_TOKEN,
                                                                    accountSid: "",
                                                                    authToken: "",
                                                                    apiKey: "",
                                                                    apiSecret: "",
                                                                    fromNumber: "",
                                                                    senderId: "",
                                                                    senderType: TWILIO_SENDER_TYPE.FROM_NUMBER,
                                                                    messagingServiceSid: "",
                                                                    testNumber: ""
                                                                },
                                                                    r = [Button(M.SAVE_AND_VERIFY, Button.CLASS_MIDDLE_BLUE, (function (t, s) {
                                                                        if (a.accountSid.length) {
                                                                            if (a.authType === TWILIO_AUTH_TYPE.API_KEY) {
                                                                                if (!a.apiKey.length) return void Tools.showError(M.INVALID_API_KEY);
                                                                                if (!a.apiSecret.length) return void Tools.showError(M.INVALID_API_SECRET);
                                                                                a.authToken = ""
                                                                            } else {
                                                                                if (!a.authToken.length) return void Tools.showError(M.INVALID_AUTH_TOKEN);
                                                                                a.apiKey = "", a.apiSecret = ""
                                                                            }
                                                                            if (a.senderType === TWILIO_SENDER_TYPE.FROM_NUMBER || !i.isEmpty()) {
                                                                                if (i.isEmpty() && !a.senderId.length) return void Tools.showError(M.INVALID_FROM_NUMBER_AND_SENDER_ID);
                                                                                if (!i.isValidNumber()) return void Tools.showError(M.INVALID_FROM_NUMBER);
                                                                                if ($("#senderIdCheck").prop("checked") && (!a.senderId.length || !/^[a-zA-Z0-9]+$/.test(a.senderId))) return void Tools.showError(M.INVALID_SENDER_ID)
                                                                            }
                                                                            a.senderType !== TWILIO_SENDER_TYPE.MESSAGING_SERVICE || a.messagingServiceSid.length ? n.isEmpty() || n.isValidNumber() ? Tools.makeWebsiteRequest({
                                                                                action: "verifyTwilioSettings",
                                                                                method: "post",
                                                                                data: {
                                                                                    settings: JSON.stringify(a),
                                                                                    recipient: a.testNumber,
                                                                                    channel: $('input[name="otpChannel"]:checked').val(),
                                                                                    persist: !0
                                                                                },
                                                                                onOk: function (i) {
                                                                                    var n = function (i, n) {
                                                                                        return Tools.makeWebsiteRequest({
                                                                                            action: "saveAppsSettings",
                                                                                            method: "post",
                                                                                            data: {
                                                                                                app: "twilio",
                                                                                                settings: JSON.stringify(a),
                                                                                                otp: i || ""
                                                                                            },
                                                                                            onOk: function (i) {
                                                                                                Website.appsSettings.twilio = a, n && n.close(), t.close(), (e || dummy)()
                                                                                            }
                                                                                        }), !1
                                                                                    };
                                                                                    if (!0 === i.data) {
                                                                                        var s = [Button(M.RESEND, Button.CLASS_MIDDLE_GREY, (function (e, t) {
                                                                                            var i = {
                                                                                                action: "sendOTP",
                                                                                                method: "post",
                                                                                                data: {
                                                                                                    recipient: a.testNumber,
                                                                                                    channel: $('input[name="otpChannel"]:checked').val()
                                                                                                }
                                                                                            };
                                                                                            Tools.makeWebsiteRequest(i)
                                                                                        }), Button.FLOAT_LEFT)];
                                                                                        Tools.promptForInput(M.ENTER_VERIFICATION_CODE, M.ENTER_VERIFICATION_CODE_DESC, "", n, null, null, null, null, s)
                                                                                    } else n()
                                                                                }
                                                                            }) : Tools.showError(M.INVALID_TEST_NUMBER) : Tools.showError(M.INVALID_MESSAGING_SERVICE_SID)
                                                                        } else Tools.showError(M.INVALID_ACCOUNT_SID)
                                                                    }), Button.FLOAT_IGNORE), Button.MIDDLE_CANCEL];
                                                                s("twilio") && r.push(Button(M.DISCONNECT, Button.CLASS_MIDDLE_GREY, (function (e, t) {
                                                                    e.close(), o("twilio")
                                                                }), Button.FLOAT_LEFT)), Tools.showWindow({
                                                                    title: M.SETTINGS,
                                                                    width: 500,
                                                                    markup: Templates.get("twilioSettingsMarkup"),
                                                                    showCloseButton: !0,
                                                                    action: {
                                                                        onShow: function (e, s) {
                                                                            var o = s.find('[data-role="sender-id-wrapper"]'),
                                                                                r = s.find('[data-role="sender-id-input-wrapper"]'),
                                                                                l = s.find('[data-role="messaging-service-wrapper"]'),
                                                                                c = s.find('[data-role="otp-channel-wrapper"]'),
                                                                                d = s.find('[data-role="api-key-wrapper"]'),
                                                                                p = s.find('[data-role="auth-token-wrapper"]'),
                                                                                u = !!a.senderId?.length;
                                                                            r[u ? "removeClass" : "addClass"]("none-soft");
                                                                            var h = a.senderType === TWILIO_SENDER_TYPE.MESSAGING_SERVICE;
                                                                            o[h ? "addClass" : "removeClass"]("none-soft"), l[h ? "removeClass" : "addClass"]("none-soft");
                                                                            var f = a.authType === TWILIO_AUTH_TYPE.API_KEY;
                                                                            p[f ? "addClass" : "removeClass"]("none-soft"), d[f ? "removeClass" : "addClass"]("none-soft");
                                                                            var m = $("#apiKeyRadio"),
                                                                                g = $("#authTokenRadio"),
                                                                                v = $("#senderIdCheck"),
                                                                                b = $("#messagingServiceCheck");
                                                                            m.prop("checked", f), g.prop("checked", !f), v.prop("checked", u), b.prop("checked", h), t = a.testNumber, e.bindObject("data", a, [{
                                                                                property: "authType"
                                                                            }, {
                                                                                property: "accountSid"
                                                                            }, {
                                                                                property: "apiKey"
                                                                            }, {
                                                                                property: "apiSecret"
                                                                            }, {
                                                                                property: "authToken"
                                                                            }, {
                                                                                property: "fromNumber"
                                                                            }, {
                                                                                property: "senderId"
                                                                            }, {
                                                                                property: "senderType"
                                                                            }, {
                                                                                property: "messagingServiceSid"
                                                                            }, {
                                                                                property: "testNumber"
                                                                            }]), m.change((function () {
                                                                                p[this.checked ? "slideUp" : "slideDown"]("fast"), d[this.checked ? "slideDown" : "slideUp"]("fast"), this.checked && (a.authType = TWILIO_AUTH_TYPE.API_KEY)
                                                                            })), g.change((function () {
                                                                                d[this.checked ? "slideUp" : "slideDown"]("fast"), p[this.checked ? "slideDown" : "slideUp"]("fast"), this.checked && (a.authType = TWILIO_AUTH_TYPE.AUTH_TOKEN)
                                                                            })), v.change((function () {
                                                                                r[this.checked ? "slideDown" : "slideUp"]("fast"), this.checked || (a.senderId = "")
                                                                            })), b.change((function () {
                                                                                o[this.checked ? "slideUp" : "slideDown"]("fast"), l[this.checked ? "slideDown" : "slideUp"]("fast"), a.senderType = this.checked ? TWILIO_SENDER_TYPE.MESSAGING_SERVICE : TWILIO_SENDER_TYPE.FROM_NUMBER, this.checked || (a.messagingServiceSid = "")
                                                                            })), i = PhoneInput.wrap("#fromNumber", (function (e) {
                                                                                a.fromNumber = e
                                                                            })), n = PhoneInput.wrap("#testNumber", (function (e) {
                                                                                a.testNumber = e;
                                                                                var i = e.length && e !== t;
                                                                                c[i ? "slideDown" : "slideUp"]("fast")
                                                                            }))
                                                                        },
                                                                        onHide: function () {
                                                                            i.destroy(), n.destroy()
                                                                        }
                                                                    },
                                                                    buttons: r
                                                                })
                                                            }
                                                        }]];
                                                    (window.inTestEnvironment || window.keapEnabled) && n.unshift({
                                                        type: "keap",
                                                        typeName: "Keap / Infusionsoft",
                                                        image: resources + "/images/keap.png?v=" + resourcesVersion,
                                                        description: "Send contacts from your forms, orders and members to Keap / Infusionsoft",
                                                        edit: function (e) {
                                                            s("keap") ? o("keap") : Tools.makeWebsiteRequest({
                                                                action: "getOAuth2AuthorizationUrl",
                                                                data: {
                                                                    type: "keap"
                                                                },
                                                                onOk: function (e) {
                                                                    var t = e.data;
                                                                    window.location.href = t
                                                                }
                                                            })
                                                        }
                                                    }), ("bg" === userLocale || window.speedyEnabled) && n.push({
                                                        type: "speedy",
                                                        typeName: "Speedy",
                                                        image: resources + "/images/app-speedy.svg?v=" + resourcesVersion,
                                                        description: M.SPEEDY_DESC,
                                                        edit: t
                                                    }), (window.inTestEnvironment || 85 === platformId || window.whatsAppEnabled) && n.push({
                                                        type: "whatsapp",
                                                        typeName: "WhatsApp Button",
                                                        image: resources + "/images/app-whatsapp.png?v=" + resourcesVersion,
                                                        description: "Adds a floating WhatsApp button to your website",
                                                        edit: function (e) {
                                                            var t = Website.appsSettings.whatsapp || {
                                                                number: "",
                                                                message: "",
                                                                buttonPosition: "middle-right"
                                                            },
                                                                i = [Button(M.SAVE_AND_VERIFY, Button.CLASS_MIDDLE_BLUE, (function (i, n) {
                                                                    Tools.makeWebsiteRequest({
                                                                        action: "saveAppsSettings",
                                                                        method: "post",
                                                                        data: {
                                                                            app: "whatsapp",
                                                                            data: JSON.stringify(t)
                                                                        },
                                                                        onOk: function (n) {
                                                                            Website.appsSettings.whatsapp = t, i.close(), (e || dummy)()
                                                                        }
                                                                    })
                                                                }), Button.FLOAT_IGNORE), Button.MIDDLE_CANCEL];
                                                            s("whatsapp") && i.push(Button(M.DISCONNECT, Button.CLASS_MIDDLE_GREY, (function (e, t) {
                                                                e.close(), o("whatsapp")
                                                            }), Button.FLOAT_LEFT)), Tools.showWindow({
                                                                title: M.SETTINGS,
                                                                width: 500,
                                                                markup: Templates.get("whatsappSettingsMarkup"),
                                                                showCloseButton: !0,
                                                                action: {
                                                                    onShow: function (e, i) {
                                                                        e.bindObject("data", t, [{
                                                                            property: "number",
                                                                            type: "int",
                                                                            allowNegative: !1
                                                                        }, {
                                                                            property: "message"
                                                                        }, {
                                                                            property: "buttonPosition"
                                                                        }])
                                                                    }
                                                                },
                                                                buttons: i
                                                            })
                                                        }
                                                    }), (window.inTestEnvironment || 2474 === platformId) && n.push({
                                                        type: "clientify",
                                                        typeName: "Clientify",
                                                        image: resources + "/images/clientify.png?v=" + resourcesVersion,
                                                        description: "Connect with the Clientify CRM",
                                                        edit: function (e) {
                                                            var t = Website.appsSettings.clientify || {
                                                                key: "",
                                                                code: ""
                                                            },
                                                                i = [Button(M.SAVE_AND_VERIFY, Button.CLASS_MIDDLE_BLUE, (function (i, n) {
                                                                    t.key = (t.key || "").trim(), $.ajax({
                                                                        type: "GET",
                                                                        url: "https://api.clientify.net/v1/me/tracking-code-js/",
                                                                        dataType: "json",
                                                                        async: !1,
                                                                        success: function (n) {
                                                                            t.code = (n.tracking_code_js || "").trim(), Tools.makeWebsiteRequest({
                                                                                action: "saveAppsSettings",
                                                                                method: "post",
                                                                                data: {
                                                                                    app: "clientify",
                                                                                    data: JSON.stringify(t)
                                                                                },
                                                                                onOk: function (n) {
                                                                                    Website.appsSettings.clientify = t, i.close(), (e || dummy)()
                                                                                }
                                                                            })
                                                                        },
                                                                        error: function (e, t, i) {
                                                                            Log.error(i), Tools.showError("Wrong API Key!")
                                                                        },
                                                                        beforeSend: function (e) {
                                                                            e.setRequestHeader("Authorization", "Token " + t.key)
                                                                        }
                                                                    })
                                                                }), Button.FLOAT_IGNORE), Button.MIDDLE_CANCEL];
                                                            s("clientify") && i.push(Button(M.DISCONNECT, Button.CLASS_MIDDLE_GREY, (function (e, t) {
                                                                e.close(), o("clientify")
                                                            }), Button.FLOAT_LEFT)), Tools.showWindow({
                                                                title: M.SETTINGS,
                                                                width: 500,
                                                                markup: Templates.get("clientifySettingsMarkup"),
                                                                showCloseButton: !0,
                                                                action: {
                                                                    onShow: function (e, i) {
                                                                        e.bindObject("data", t, [{
                                                                            property: "key"
                                                                        }])
                                                                    }
                                                                },
                                                                buttons: i
                                                            })
                                                        }
                                                    }), !0 !== window.mautiveEnabled && !0 !== window.wlActiveCampaignEnabled || n.unshift({
                                                        type: "mautive",
                                                        typeName: window.wlActiveCampaignName || "Mautive",
                                                        image: window.wlActiveCampaignImage || resources + "/images/mautive.png?v=" + resourcesVersion,
                                                        description: M.ACTIVECAMPAIGN_APP_DESC,
                                                        edit: function (e) {
                                                            i("mautive", e)
                                                        }
                                                    });
                                                    var a = function (e) {
                                                        for (var t = 0; t < n.length; ++t)
                                                            if (n[t].type === e) return n[t]
                                                    },
                                                        s = function (e) {
                                                            switch (e) {
                                                                case "email":
                                                                    return Website.emailSettings?.host;
                                                                case "mailchimp":
                                                                    return Website.appsSettings?.mailchimp?.key;
                                                                case "whatsapp":
                                                                    return Website.appsSettings?.whatsapp;
                                                                case "fbpixel":
                                                                    return Website.appsSettings?.fbpixel;
                                                                case "getresponse":
                                                                    return Website.appsSettings?.getresponse?.key;
                                                                case "activecampaign":
                                                                    return Website.appsSettings?.activecampaign?.key;
                                                                case "mailerlite":
                                                                    return Website.appsSettings?.mailerlite?.key;
                                                                case "aweber":
                                                                    return Website.appsSettings?.aweber?.accountId;
                                                                case "moosend":
                                                                    return Website.appsSettings?.moosend?.key;
                                                                case "clientify":
                                                                    return Website.appsSettings?.clientify?.key;
                                                                case "mautive":
                                                                    return Website.appsSettings?.mautive?.key;
                                                                case "speedy":
                                                                    return Website.appsSettings?.speedy?.username;
                                                                case "keap":
                                                                    return Website.appsSettings?.keap?.accessToken;
                                                                case "twilio":
                                                                    return Website.appsSettings?.twilio
                                                            }
                                                            return !1
                                                        },
                                                        o = function (e, t) {
                                                            Tools.prompt(M.DISCONNECT, M.DEL_CONFIRM, (function () {
                                                                Tools.makeWebsiteRequest({
                                                                    action: "disconnectApp",
                                                                    data: {
                                                                        app: e,
                                                                        id: t
                                                                    },
                                                                    onOk: function (i) {
                                                                        if ("email" === e) Website.emailSettings = Website.EMPTY_EMAIL_SETTINGS;
                                                                        else if ("mautive" === e) M.ACTIVECAMPAIGN_SETTINGS = "Autoresponder settings", Website.appsSettings.mautive = null;
                                                                        else if ("webhook" === e) {
                                                                            var n = indexOfId(Website.webhooks, t);
                                                                            n >= 0 && Website.webhooks.splice(n, 1)
                                                                        } else Website.appsSettings[e] = null;
                                                                        r()
                                                                    }
                                                                })
                                                            }))
                                                        },
                                                        r = function () {
                                                            var t = e.find('[data-role="apps-list"]').empty(),
                                                                i = Templates.get("connectedAppMarkup"),
                                                                a = "",
                                                                o = null;
                                                            n.forEach((function (e) {
                                                                if (s(e.type)) {
                                                                    var t = "aweber" === e.type ? M.DISCONNECT : M.SETTINGS;
                                                                    a += format(i, "type", e.type, "image", e.image, "id", "", "name", e.typeName, "btnLabel", t, "desc", e.connectedAppDescription || "")
                                                                }
                                                                "webhook" === e.type && (o = e)
                                                            })), Website.webhooks && Website.webhooks.length > 0 && Website.webhooks.forEach((function (e) {
                                                                e.id.startsWith("rh_") || (a += format(i, "type", o.type, "image", o.image, "id", e.id, "name", "Webhook", "btnLabel", M.SETTINGS, "desc", ""))
                                                            })), "" === a ? t.append(Templates.get("noConnectedAppsMarkup")) : t.append(a)
                                                        };
                                                    return e.on("click", 'a[data-role="connect"]', (function () {
                                                        Tools.showWindow({
                                                            isModal: !1,
                                                            title: M.ADD_NEW_APP,
                                                            width: 650,
                                                            markup: Templates.get("newAppPopup"),
                                                            action: {
                                                                onShow: function (e, t) {
                                                                    var i = t.find(".app-list"),
                                                                        o = Templates.get("newAppMarkup"),
                                                                        l = "";
                                                                    n.forEach((function (e) {
                                                                        s(e.type) || (l += format(o, "type", e.type, "image", e.image, "name", e.typeName, "description", e.description))
                                                                    })), "" === l ? i.append(Templates.get("noAppsAvailableMarkup")) : i.append(l), t.on("click", 'a[data-role="connect"]', (function () {
                                                                        var t = a($(this).data("type"));
                                                                        e.close(), t && t.edit((function () {
                                                                            r()
                                                                        }))
                                                                    }))
                                                                }
                                                            }
                                                        })
                                                    })).on("click", 'a[data-role="settings"]', (function () {
                                                        var e = $(this),
                                                            t = e.data("id"),
                                                            i = a(e.data("type"));
                                                        i && i.edit((function () {
                                                            r()
                                                        }), t)
                                                    })).on("click", "a.reveal-button", (function () {
                                                        var e = $(this);
                                                        e.hasClass("revealed") ? (Tools.copyToClipboard(Website.apiKey), Tools.showCornerMessage(1e3, M.COPIED_TO_CLIPBOARD, Tools.TOOLTIP_TYPE_SUCCESS)) : e.addClass("revealed").text(Website.apiKey)
                                                    })), r(), {
                                                        getAppByType: a
                                                    }
                                                }(p);
                                                break;
                                            case "personalization":
                                                l = function (e) {
                                                    e.append(Templates.get("websiteSettingsPersonalizationTemplate"));
                                                    var n = Tools.cloneArray(Website.personalizationFields);
                                                    e.on("click.personalization", 'a[role="add-property"]', (function () {
                                                        i(n, -1, (function () {
                                                            t(!0), s()
                                                        }))
                                                    }));
                                                    var a = e.find('[data-role="fields"]'),
                                                        s = function () {
                                                            a.empty();
                                                            var e = Templates.get("websiteSettingsPersonalizationFieldTemplate");
                                                            n.forEach((function (t) {
                                                                a.append(escapeFormat(e, "name", t.name, "tag", t.tag, "value", t.value || "", "placeholder", t.description || ""))
                                                            }))
                                                        };
                                                    return a.on("change.personalization", "input", (function (e) {
                                                        var i = $(this).closest('[data-role="field"]');
                                                        n[i.index()].value = this.value, t(!0)
                                                    })), e.on("click.personalization", 'a[data-role="copy"]', (function (e) {
                                                        var t = $(this),
                                                            i = t.data("val");
                                                        i || (i = "{" + n[t.closest('[data-role="field"]').index()].tag + "}"), Tools.copyToClipboard(i), Tools.showCornerMessage(1e3, M.COPIED_TO_CLIPBOARD, Tools.TOOLTIP_TYPE_SUCCESS)
                                                    })), a.on("click.personalization", 'a[data-role="edit"]', (function (e) {
                                                        var a = $(this).closest('[data-role="field"]').index();
                                                        i(n, a, (function () {
                                                            t(!0), s()
                                                        }))
                                                    })), s(), {
                                                        close: function (t) {
                                                            e.off(".personalization"), t()
                                                        },
                                                        save: function (e) {
                                                            Tools.makeWebsiteRequest({
                                                                action: "setPersonalizationFields",
                                                                method: "post",
                                                                data: {
                                                                    fields: JSON.stringify(n)
                                                                },
                                                                onOk: function () {
                                                                    Website.personalizationFields = n, e()
                                                                }
                                                            })
                                                        }
                                                    }
                                                }(p);
                                                break;
                                            case "301redirects":
                                                l = function (e) {
                                                    e.append(Templates.get("websiteSettings301RedirectTemplate"));
                                                    var t = Tools.cloneArray(Website.redirectRules);
                                                    e.on("click.301redirects", 'a[data-role="new-redirect"]', (function () {
                                                        n(t, -1, (function () {
                                                            s(), a(t)
                                                        }))
                                                    })), e.on("click.301redirects", ".more-options", (function (e) {
                                                        var i = $(e.target),
                                                            o = $(this).closest('[data-role="rule-field"]').index(),
                                                            r = [{
                                                                text: M.EDIT,
                                                                icon: "fa-pencil",
                                                                tag: "edit"
                                                            }, {
                                                                text: M.DELETE_TITLE,
                                                                icon: "fa-trash",
                                                                tag: "delete"
                                                            }];
                                                        Tools.showTooltipOptions(i, r, (function (e, i, r, l) {
                                                            "edit" !== l ? "delete" === l && Tools.prompt(M.DELETE, M.DEL_CONFIRM, (function () {
                                                                t.splice(o, 1), s(), a(t)
                                                            })) : n(t, o, (function () {
                                                                s(), a(t)
                                                            }))
                                                        }))
                                                    }));
                                                    var i = e.find('[data-role="rule-fields"]'),
                                                        s = function () {
                                                            i.empty();
                                                            var e = Templates.get("websiteSettings301RedirectFieldTemplate");
                                                            t.forEach((function (t) {
                                                                i.append(escapeFormat(e, "from", t.from, "to", t.to))
                                                            })), i.is(":empty") && i.text(M.REDIRECT_LIST_EMPTY)
                                                        };
                                                    return s(), {
                                                        close: function (t) {
                                                            e.off(".301redirects"), t()
                                                        }
                                                    }
                                                }(p)
                                        }
                                    };
                                    l && l.close ? l.close(r) : r()
                                };
                                "yes" === d.data("modified") ? CPanel.showUnsavedChangesPrompt((function () {
                                    t(!1), r()
                                }), dummy) : r()
                            }
                        };
                        d.on("click", "a[data-show]", (function () {
                            u($(this).data("show"))
                        })), u(o || "general")
                    },
                    onBeforeHide: function (e, i) {
                        if ("yes" === i.data("modified")) return CPanel.showUnsavedChangesPrompt((function () {
                            t(!1), e.close()
                        }), dummy), !1
                    },
                    onHide: function () {
                        e = null, $("#themeSettingsBtnSmall").removeClass("active")
                    }
                }
            }), {
                getCurrentTab: function () {
                    return l
                },
                close: function () {
                    r && r.close()
                }
            }
        },
        showDomainSettings: s,
        showAppSettings: function (e, t) {
            var i = this.show("apps");
            if (e) {
                var n = i.getCurrentTab().getAppByType(e);
                n && n.edit((function () {
                    i && i.close(), t && t()
                }))
            }
            return {
                close: function () {
                    i.close(), i = null
                }
            }
        }
    }
}();
var Project = function () {
    var e = function (e, t, i) {
        e.stopPropagation(), e.preventDefault();
        var n = $(e.target),
            a = n.closest(".funnel-inner-wrapper"),
            s = (a.data("id"), a.data("type"));
        if ("funnel-folder" !== s) {
            var o = [];
            o.push({
                text: M.SHOW_SETTINGS,
                icon: "fa-cog",
                tag: "settings"
            }), Website.templateFunnel || (o.push({
                text: M.SHARE,
                icon: "fa-share-alt",
                tag: "share"
            }), o.push({
                text: M.DUPLICATE,
                icon: "fa-clone",
                tag: "clone"
            }), o.push({
                text: M.DELETE,
                icon: "fa-trash",
                tag: "delete"
            })), "website" !== s && o.push({
                text: M.CLEAR_STATS,
                icon: "fa-eraser",
                tag: "clear-stats"
            }), Website.templateWebsite || Website.templateFunnel || (a.hasClass("paused") ? o.push({
                text: M.MAKE_ACTIVE,
                icon: "fa-eye",
                tag: "make-active"
            }) : o.push({
                text: M.MAKE_INACTIVE,
                icon: "fa-eye-slash",
                tag: "make-inactive"
            }), "funnel" === s ? o.push({
                text: M.MOVE_TO_WEBSITE_IN_PROJECT,
                icon: "fa-arrow-right",
                tag: "move-inside-website"
            }) : "site-funnel" === s && Website.canAddWebsitesToProject && o.push({
                text: M.MOVE_OUTSIDE,
                icon: "fa-arrow-right",
                tag: "move-outside-website"
            }), "site-funnel" !== s && Website.currentUserIsProjectOwner && o.push({
                text: M.MOVE_TO_ANOTHER_PROJECT,
                icon: "fa-share",
                tag: "move-to-project"
            })), Tools.showTooltipOptions(n, o, (function (e, a, s, o) {
                var r = n.closest(".funnel-inner-wrapper"),
                    l = r.data("id"),
                    c = r.data("funnelId"),
                    d = Website.getProjectWebsiteById(l),
                    p = c || "FUNNEL" === d.type;
                if (null !== d)
                    if ("make-active" === o || "make-inactive" === o) {
                        var u = "make-active" === o;
                        UITools.toggleSiteActiveState(d, c, p, u, (function () {
                            r[u ? "removeClass" : "addClass"]("paused")
                        }))
                    } else if ("share" === o) UITools.showShareWebsiteDialog(l, p ? c || 1 : 0);
                    else if ("move-inside-website" === o) UITools.moveFunnelToWebsite(d);
                    else if ("move-outside-website" === o) UITools.moveFunnelOutsideWebsite(d, c);
                    else if ("move-to-project" === o) UITools.moveSiteToAnotherProject(d);
                    else if ("clear-stats" === o) UITools.clearStats(d, c);
                    else if ("delete" === o) {
                        var h = Website.getActiveSite(),
                            f = p ? M.DELETE_FUNNEL_TITLE : M.DELETE_WEBSITE,
                            m = p ? M.DELETE_FUNNEL_MESSAGE : M.DELETE_WEBSITE_DESC;
                        Tools.prompt(f, m, (function () {
                            Tools.makeWebsiteRequest({
                                action: "deleteProjectItem",
                                data: {
                                    subdomain: d.subdomain,
                                    funnelId: c
                                },
                                onOk: function (e) {
                                    if (r.slideUp("fast", (function () {
                                        r.remove(), r = null
                                    })), c) {
                                        var t = Website.getActiveFunnel();
                                        h.id === d.id && (Website.removeFunnelById(c), t && t.id === c && (CPanel.setChanged(!1), CPanel.goToUrl(Website.pagePrefix)))
                                    } else d.id === h.id && e.data && CPanel.redirect(e.data)
                                }
                            })
                        }), dummy, M.YES, M.CANCEL, !1, "red-popup")
                    } else if ("clone" === o) {
                        f = p ? M.DUPLICATE_FUNNEL_TITLE : M.DUPLICATE_SITE, m = p ? M.DUPLICATE_FUNNEL_MESSAGE : M.DUPLICATE_SITE_DESC;
                        Tools.prompt(f, m, (function () {
                            Tools.makeWebsiteRequest({
                                action: "duplicateProjectItem",
                                data: {
                                    subdomain: d.subdomain,
                                    funnelId: c
                                },
                                onOk: function (e) {
                                    t.close((function () {
                                        if (CPanel.setChanged(!1), c) {
                                            var t = e.data,
                                                i = Website.pagePrefix + "/" + t.url + "/" + t.steps[0].page.link;
                                            h.id === d.id ? (Website.funnels.push(t), CPanel.goToUrl(i)) : CPanel.redirect("https://" + d.subdomain + "." + Website.rootDomain + i)
                                        } else CPanel.redirect(e.data)
                                    }))
                                }
                            })
                        }), dummy, M.YES, M.NO)
                    } else if ("settings" === o) {
                        h = Website.getActiveSite();
                        t.close((function () {
                            if (c) {
                                var e = getById(i, c);
                                if (null === e) return;
                                Funnels.showFunnelSettings(d, e)
                            } else h.id === d.id ? Website.settingsUI.show() : CPanel.redirect("https://" + d.subdomain + "." + Website.rootDomain + Website.pagePrefix + "?show=settings")
                        }))
                    }
            }))
        }
    };
    return {
        showWebsitesDialog: function (t) {
            Tools.showInlinePopup({
                isModal: !1,
                selectedSlide: window.defaultWebsiteSwitcherTab || 0,
                showCloseButton: window.isMobileView,
                title: "",
                noNav: !0,
                noTitle: !0,
                width: Math.min(600, $window.width() - 60),
                markup: Templates.get("switchWebsiteContext"),
                customClass: "website-switch-dialog",
                action: {
                    onShow: function (i, n) {
                        var a = n.find('[data-type="funnels"]'),
                            s = n.find('[data-type="site-funnels"]'),
                            o = n.find('[data-type="websites"]'),
                            r = [],
                            l = -1,
                            c = Website.getActiveSite(),
                            d = Website.getActiveFunnel(),
                            p = n.find(".rounded-back-arrow"),
                            u = [],
                            h = !0,
                            f = Templates.get("switchWebsiteItem");
                        Website.canAddWebsitesToProject || n.find('[data-role="new-website-wrapper"]').remove();
                        var m = function () {
                            var e;
                            e = l > 0 ? Website.canAddFunnelsToWebsite : Website.canAddWebsitesToProject || Website.canAddFunnelsToWebsite, n.find('[data-role="new-funnel-wrapper"]')[e ? "removeClass" : "addClass"]("none")
                        },
                            g = function (e, t, i, n, a, s, o, r, l, c, d, p) {
                                var u = $(f),
                                    h = u.find('div[data-role="logo"]');
                                switch (s && u.addClass("active"), o || u.addClass("paused").find(".paused-item-tooltip").data("tooltip", "website" === t ? "pausedWebsiteInfo" : "pausedFunnelInfo"), p && u.addClass("homepage"), u.find('[data-role="name"]').text(l), u.find('[data-role="subtext"]').text(c), u.data("id", i).data("funnelId", n).data("type", t), d && u.find(".preview-icon").data("tooltip", "website" === t ? "previewWebsite" : "previewFunnel").attr("href", d), r ? h.text(r) : "funnel-folder" !== t && h.remove(), a || u.find(".funnel-controls").remove(), t) {
                                    case "funnel":
                                        u.addClass("funnel-item-view");
                                        break;
                                    case "site-funnel":
                                        u.addClass("folder-item-view");
                                        break;
                                    case "website":
                                        u.addClass("website-view");
                                        break;
                                    case "funnel-folder":
                                        u.addClass("folder-view")
                                }
                                e.append(u)
                            },
                            v = function (e, t, i) {
                                (t = t.slice()).sort((function (e, t) {
                                    return e.active === t.active ? e.id - t.id : e.active ? -1 : 1
                                }));
                                var n = s.find('[data-role="list"]').empty();
                                t.forEach((function (t) {
                                    var a = c.id === e.id && d && d.id === t.id,
                                        s = t.name.substring(0, 1).toUpperCase();
                                    t.steps = t.steps || [];
                                    var o = t.steps.length + " " + (1 === t.steps.length ? M.STEP : M.STEPS),
                                        r = "//" + e.subdomain + "." + Website.rootDomain + "/" + t.url + "?preview=__PREVIEW_ONLY",
                                        l = i && i.isFunnel && i.id === t.id;
                                    g(n, "site-funnel", e.id, t.id, !0, a, t.active, s, t.name, o, r, l)
                                })), p.show(), r = t, l = e.id
                            },
                            b = function (e, t) {
                                t = function (e) {
                                    try {
                                        let e = window.location.pathname.replace("/me/", ""),
                                            t = e.split("/");
                                        if (e.endsWith("s")) return "/me/" + e;
                                        switch (t[0]) {
                                            case "dashboard":
                                            case "settings":
                                                return "/me/" + e;
                                            case "crm":
                                                if (e.indexOf("/contact/") > 0) return "/me/crm";
                                                if (e.indexOf("booking") > 0) return "/me/crm/bookings";
                                                if (e.indexOf("campaign/overview") > 0) return "/me/crm/marketing/campaigns";
                                                if (e.endsWith("automation")) return "/me/crm/marketing/automations";
                                                if (t.length < 4) return "/me/" + e;
                                                break;
                                            case "store":
                                                if (e.indexOf("/orders/") > 0) return "/me/store/orders";
                                                if (e.indexOf("/products/") > 0) return "/me/store/products";
                                                if (t.length < 3) return "/me/" + e
                                        }
                                    } catch (e) {
                                        Log.error(e)
                                    }
                                    return e
                                }(t), CPanel.checkIfNeedsSave((function () {
                                    c.id === e.id ? i.close((function () {
                                        CPanel.goToUrl(t)
                                    })) : CPanel.redirect("https://" + e.subdomain + "." + window.domain + t)
                                }))
                            };
                        n.on("click", ".funnel-inner-wrapper", (function (e) {
                            var t = $(this);
                            if (!$(e.target).hasClass("preview-icon")) {
                                var i = Website.getProjectWebsiteById(t.data("id"));
                                if (null !== i) {
                                    var n = t.data("type");
                                    if ("funnel-folder" === n) a.fadeOut("fast", (function () {
                                        c.id === i.id ? (v(i, Website.funnels, Website.homePage), s.fadeIn("fast")) : CPanel.showLoadingBar("siteFunnels", s, (function () {
                                            Tools.makeWebsiteRequest({
                                                action: "listWebsiteFunnels",
                                                data: {
                                                    website: i.id,
                                                    subdomain: i.subdomain
                                                },
                                                onOk: function (e) {
                                                    var t = e.data;
                                                    v(i, t.funnels || [], t.homepage), s.show(), CPanel.hideLoadingBar("siteFunnels")
                                                }
                                            })
                                        }))
                                    }));
                                    else if ("site-funnel" === n) {
                                        var o = t.data("funnelId"),
                                            l = getById(r, o);
                                        null !== l && c.id === i.id ? Funnels.showSteps(l) : b(i, "/me/website/" + l.url + "/" + l.steps[0].page.link + "?show=steps")
                                    } else "FUNNEL" === i.type ? c.id === i.id && d ? Funnels.showSteps(d) : b(i, "/me/website?show=steps") : b(i, "/me/website")
                                }
                            }
                        })), n.on("click", ".back-arrow", (function () {
                            p.hide(), s.fadeOut("fast", (function () {
                                a.fadeIn("fast"), r = [], l = -1, m()
                            }))
                        })), n.on("click", 'a[data-role="createNewFunnel"]', (function () {
                            Funnels.showNewFunnelPopup((function (e) {
                                var t = function (t, n) {
                                    Website.addNewFunnel(e, l, t, n, (function (e, t) {
                                        var n = "/me/website/" + e.url + "/" + e.steps[0].page.link;
                                        t.id === Website.id ? i.close((function () {
                                            CPanel.goToUrl(n)
                                        })) : CPanel.redirect("https://" + t.subdomain + "." + Website.rootDomain + n)
                                    }))
                                };
                                l && l > 0 ? t(null, null) : e > 0 ? UITools.showPersonalizationFieldsPopup({
                                    websiteTemplateId: 0,
                                    funnelTemplateId: e,
                                    onSkip: t,
                                    onConfirm: function (e, i, n) {
                                        t(e, n)
                                    }
                                }) : t(null, null)
                            }))
                        })), n.on("click", ".more-options", (function (t) {
                            e(t, i, r)
                        })), BindingFactory.addListener(Website, "projectWebsites", (function () {
                            var e, i;
                            (u = Website.projectWebsites.slice()).sort((function (e, t) {
                                return e.active === t.active ? e.id - t.id : e.active ? -1 : 1
                            })), e = [], u.forEach((function (t) {
                                ("FUNNEL" === t.type || t.funnels > 0) && e.push(t)
                            })), a.empty(), 0 === e.length ? a.append(Templates.get("noFunnelsMessage")) : e.forEach((function (e) {
                                var t = c.id === e.id;
                                if ("FUNNEL" === e.type) {
                                    var i = e.name.substring(0, 1).toUpperCase(),
                                        n = e.domain ? e.domain : e.subdomain + "." + Website.rootDomain,
                                        s = n,
                                        o = "//" + n + "?preview=__PREVIEW_ONLY";
                                    g(a, "funnel", e.id, "", !0, t, e.active, i, e.name, s, o, !1)
                                } else s = e.funnels + " " + (1 === e.funnels ? M.FUNNEL : M.FUNNELS), g(a, "funnel-folder", e.id, "", !1, t, !0, null, e.name || M.WEBSITE, s, null, !1)
                            })), i = [], u.forEach((function (e) {
                                "FUNNEL" !== e.type && i.push(e)
                            })), o.empty(), 0 === i.length ? o.append(Templates.get("noSitesMessage")) : i.forEach((function (e) {
                                var t = c.id === e.id,
                                    i = e.domain ? e.domain : e.subdomain + "." + Website.rootDomain,
                                    n = i,
                                    a = "//" + i;
                                e.active || (a += "?preview=__PREVIEW_ONLY"), g(o, "website", e.id, "", !0, t, e.active, null, e.name || M.WEBSITE, n, a, !1)
                            })), m(), h && !0 === t && "WEBSITE" === c.type && Website.funnels.length > 0 && (a.hide(), v(c, Website.funnels, Website.homePage), s.show()), h = !1
                        }))
                    }
                }
            })
        },
        pickProject: function (e, t) {
            Project.listProjects((function (i) {
                UITools.selectFromList({
                    title: M.SELECT_PROJECT,
                    items: i,
                    withAddNewOption: !!e,
                    addNewOptionTitle: M.START_PROJECT,
                    onSelect: t
                })
            }))
        },
        listProjects: function (e) {
            Tools.makeWebsiteRequest({
                action: "getUserProjects",
                onOk: function (t) {
                    (e || dummy)(t.data)
                }
            })
        }
    }
}(),
    defaultFunnelsExplainerVideo = '<iframe style="width: 100%; height: 100%" src="https://www.youtube.com/embed/bi1-L28LIIQ?rel=0&amp;controls=1&amp;showinfo=0&amp;autoplay=1" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>',
    defaultFunnelsExplainerVideoRatio = 1.93,
    Funnels = function () {
        var e = {},
            t = 0,
            i = 0,
            n = null,
            a = [];
        const s = {
            label: M.ALL_TIME_FILTER,
            id: "all",
            from: null,
            to: null
        };
        var o = s,
            r = function (e) {
                return Website.setFunnel(e), e
            },
            l = function (e, t, i) {
                var n = "da_JK" === window.userLocale ? "da" : window.userLocale;
                "zh_JO" === window.userLocale && (n = "zh");
                for (var a = t.find(".content-wrapper"), s = t.find(".categories-wrapper ul"), o = "", r = 0; r < Website.funnelTemplates.length; ++r) {
                    var l = Website.funnelTemplates[r].name || {},
                        c = "White Label Growth" === (l.en || "").trim(),
                        d = "White Label Pro" === (l.en || "").trim();
                    (!c || window.enableAdvancedWidgets && "LOW" !== resellerType) && ((!d || window.enableAdvancedWidgets && window.proTemplatesEnabled) && (o += '<li data-idx="' + r + '"><a>' + escapeHtml(l[n] || l.en || "-") + "</a></li>"))
                }
                o += '<li><a data-action="empty" class="highlighted-list-item">' + M.EMPTY_FUNNEL + "</a></li>", s.html(o);
                var p = function (e) {
                    var t = Website.funnelTemplates[e].items;
                    a.empty();
                    for (var i = 0; i < t.length; ++i) {
                        var o = t[i],
                            r = o.settings || {};
                        d = (d = r.name || {})[n] || d.en || "";
                        var l = r.shortDescription || {};
                        l = l[n] || l.en || "";
                        var c = $(format(Templates.get("funnelLibraryItemMarkup"), "id", o.id, "thumb", o.image, "name", d, "shortDesc", l));
                        c.data("funnel", o), c.appendTo(a)
                    }
                    s.find(".active").removeClass("active"), s.find("li").eq(e).addClass("active");
                    var d = Website.funnelTemplates[e].name;
                    escapeHtml(d[n] || d.en || "-")
                };
                s.on("click", "a", (function () {
                    var t = $(this),
                        n = t.closest("li");
                    if (!n.hasClass("active")) {
                        if ("empty" === t.data("action")) return i(-1), void e.close();
                        p(n.data("idx"))
                    }
                })), Website.funnelTemplates.length && p(0)
            },
            c = function (e, t, i, n, a) {
                n = n || {}, Tools.makeWebsiteRequest({
                    action: "updateFunnelSettings",
                    method: "post",
                    data: {
                        id: e.id,
                        name: t,
                        url: i,
                        settings: JSON.stringify(n)
                    },
                    onOk: function (s) {
                        e.name = t, e.url = i, e.settings = n, (a || dummy)()
                    }
                })
            },
            d = function (e, t, i) {
                var n = $.extend({}, t.settings || {}),
                    a = ["customHeaderCode", "customCSS", "customBodyCode"];
                Tools.showWindow({
                    isModal: !0,
                    noTitle: !0,
                    noNav: !0,
                    width: 900,
                    height: "85%",
                    customClass: "code-settings-window funnel-settings",
                    markup: Templates.get("funnelSettingsMarkup"),
                    action: {
                        onShow: function (i, s) {
                            if (Website.hasPermission(Permission.DOMAIN)) {
                                var o = s.find('[data-tab="domain"]').empty();
                                Website.settingsUI.showDomainSettings(o, {
                                    funnel: t,
                                    rootPopup: e,
                                    changeFunnelUrl: function (n) {
                                        var a = t.url,
                                            s = Website.getActiveFunnel(),
                                            o = Website.getActiveFunnelStep();
                                        Tools.promptForInput(M.CHANGE_FUNNEL_URL_TITLE, M.CHANGE_FUNNEL_URL_MESSAGE, t.url, (function (r, l) {
                                            return r = Tools.urlFromString(r), c(t, t.name, r, t.settings, (function () {
                                                n.find(".funnel-system-url").text((customDomain || userDomain) + "/" + t.url), l.close(), i.close((function () {
                                                    e.close((function () {
                                                        if (a !== t.url && s && s.id === t.id) {
                                                            var e = "PAGE" === o.type ? o.page.link : s.steps[0].page.link;
                                                            CPanel.goToUrl(Website.pagePrefix + "/" + t.url + "/" + e + "/a?show=steps", !0)
                                                        }
                                                    }))
                                                }))
                                            })), !1
                                        }))
                                    },
                                    domainConnected: function (e) {
                                        t.host = e
                                    },
                                    domainDisconnected: function () {
                                        t.host = null
                                    },
                                    upgradePlan: function () {
                                        e.close()
                                    }
                                })
                            } else s.find('a[data-show="domain"]').parent().remove();
                            var r = s.find('[data-role="makeHomepage"]');
                            Website.isHomepage(t.id, !0) ? r.remove() : r.click((function () {
                                var e = $(this);
                                Tools.prompt(M.SET_AS_HOMEPAGE, M.SET_AS_HOMEPAGE_CONFIRM, (function () {
                                    Website.setHomepage(t, !0, (function () {
                                        e.fadeOut("fast", (function () {
                                            e.remove()
                                        }))
                                    }))
                                }))
                            })), s.find('[name="funnelName"]').val(t.name), s.find('[name="useGlobalCode"]').prop("checked", !1 !== n.useGlobalCode).change((function () {
                                n.useGlobalCode = $(this).prop("checked")
                            })), s.find('[name="showCheckoutButton"]').prop("checked", !!n.showCheckoutButton).change((function () {
                                n.showCheckoutButton = $(this).prop("checked"), s.find('[data-role="checkout-button-controls"]')[n.showCheckoutButton ? "slideDown" : "slideUp"]("fast")
                            })), s.find('[name="checkoutButtonStyle"]').val(n.checkoutButtonStyle || "button").change((function () {
                                n.checkoutButtonStyle = $(this).val()
                            })), s.find('[data-role="checkout-button-controls"]')[n.showCheckoutButton ? "show" : "hide"](), s.find('[name="checkoutButtonTarget"]').click((function () {
                                var e = $(this);
                                Website.selectPage({
                                    allowEmptyCaption: !0,
                                    allowFunnelStepPicking: !0,
                                    activeFunnel: t,
                                    activeFunnelStep: t.steps[0],
                                    selected: {
                                        link: n.checkoutButtonTarget
                                    },
                                    onSelect: function (t) {
                                        e.val(LinkPicker.getLinkDisplayText(t.link)), n.checkoutButtonTarget = t.link
                                    }
                                })
                            })).val(LinkPicker.getLinkDisplayText(n.checkoutButtonTarget) || M.NEXT_FUNNEL_STEP), s.find('[name="hideProductLinks"]').prop("checked", !!n.hideProductLinks).change((function () {
                                n.hideProductLinks = $(this).prop("checked")
                            }));
                            for (var l = ["favicon", "shareImage"], d = 0; d < l.length; ++d) {
                                var p = l[d];
                                if (n[p]) {
                                    var u = content + convertBaseToTemplateUrl(n[p], "160x120");
                                    s.find('[name="' + p + '"]').val(n[p]).prev().css({
                                        backgroundImage: "url(" + u + ")"
                                    }).find(".add-button").removeClass("add-button").addClass("remove-button")
                                }
                            }
                            s.on("click", ".add-image", (function () {
                                var e = $(this);
                                FileManager.selectFile({
                                    onCompleteCallback: function (t, i) {
                                        e.find(".add-button").removeClass("add-button").addClass("remove-button"), e.css({
                                            backgroundImage: "url(" + getThumbnailsFromBase(t, "160x120") + i + ")"
                                        }), e.next().val(getFileFromBase(t, !1) + i)
                                    }
                                })
                            })), s.on("click", ".remove-button", (function (e) {
                                e.stopPropagation(), e.preventDefault();
                                var t = $(this).closest(".add-image");
                                t.css({
                                    backgroundImage: "url(" + resources + "/images/image-avatar.png)"
                                }), t.next().val(""), t.find(".remove-button").removeClass("remove-button").addClass("add-button")
                            }));
                            var h = {};
                            for (d = 0; d < a.length; ++d) s.find('textarea[data-option="' + a[d] + '"]').val(t.settings[a[d]] || "");
                            s.on("click", ".popup-tab-trigger", (function (e) {
                                var t = $(this),
                                    i = t.closest("li");
                                if (!i.hasClass("active")) {
                                    s.find(".global-nav .active").removeClass("active"), i.addClass("active");
                                    var n = t.data("show") || "";
                                    if (n) {
                                        s.find(".popup-tab-content:not(.none)").addClass("none");
                                        var a = s.find('.popup-tab-content[data-tab="' + n + '"]').removeClass("none");
                                        !h[n] && a.data("type") && (h[n] = Tools.highlight(a.find("textarea"), {
                                            mode: a.data("type"),
                                            theme: "dark",
                                            onChange: function (e) {
                                                e.getTextArea().value = e.getValue(), s.data("modified", "yes")
                                            }
                                        }))
                                    }
                                }
                            })), s.find(".popup-tab-trigger").eq(0).click()
                        },
                        onBeforeHide: function (e, t) {
                            if ("yes" === t.data("modified")) return CPanel.showUnsavedChangesPrompt((function () {
                                t.data("modified", "no"), e.close()
                            }), dummy), !1
                        },
                        onHide: function (e, t) {
                            WebPlatform.delay(10, i || dummy)
                        }
                    },
                    buttons: [Button(M.SAVE, Button.CLASS_MIDDLE_BLUE, (function (e, i) {
                        for (var s = i.find('[name="funnelName"]').val(), o = 0; o < a.length; ++o) {
                            var r = i.find('[data-option="' + a[o] + '"]').val();
                            n[a[o]] = r
                        }
                        n.favicon = i.find('[name="favicon"]').val(), n.shareImage = i.find('[name="shareImage"]').val(), c(t, s, t.url, n, (function () {
                            i.data("modified", "no"), e.close()
                        }))
                    })), Button.MIDDLE_CANCEL]
                })
            },
            p = function (e, t) {
                var i = 0,
                    n = 0,
                    a = 0;
                return t.variants.forEach((function (t) {
                    var s = e[t.id] || {};
                    i += s.sessions || 0, n += s.conversions || 0, a += s.conversionValue || 0
                })), {
                    sessions: i,
                    conversions: n,
                    conversionValue: a
                }
            },
            u = function (e, t, i) {
                t.settings = t.settings || {};
                var n = t.settings.grouping || [],
                    a = [];
                e.find(".grouping-row").each((function (e, t) {
                    var i = (t = $(t)).data("label");
                    e = $(this).index();
                    a.push({
                        location: e,
                        label: i
                    })
                })), t.settings.grouping = a, ! function (e, t) {
                    if (t = t || [], (e = e || []).length !== t.length) return !0;
                    if (0 === t.length) return !0;
                    for (var i = 0; i < e.length; ++i) {
                        var n = e[i],
                            a = t[i];
                        if (n.location !== a.location || n.label !== a.label) return !0
                    }
                    return !1
                }(n, a) || c(t, t.name, t.url, t.settings), (i || dummy)()
            },
            h = function (e) {
                var t = e.find("#funnelStepsList");
                t.hasClass(".ui-sortable") && t.sortable("destroy");
                var i = e.find("#funnelStepsListOuter");
                i.hasClass(".ui-sortable") && i.sortable("destroy")
            },
            f = function (e, t) {
                m(e, t), v(e, t)
            },
            m = function (e, n) {
                var a = S(),
                    s = 0,
                    o = e.find('[data-role="funnel-summary"]'),
                    r = e.find('div[data-role="goals-target"]');
                if (0 === n.steps.length) e.addClass("funnel-empty");
                else {
                    e.removeClass("funnel-empty"), r.find(".goal-stats-inner-wrapper").remove();
                    var l = 0,
                        c = !1;
                    n.steps.forEach((function (e, t) {
                        var i = p(a, e);
                        if (0 === t && (s = i.sessions), "UPSELL" !== e.kind && "DOWNSELL" !== e.kind && ++l, e.goal) {
                            c = !0;
                            var n = Tools.calcPercent(i.sessions, s, 1) + "%",
                                o = Tools.calcPercent(i.conversions, i.sessions, 1) + "%";
                            e.goal && r.append(format(Templates.get("funnelGoalStatsRow"), "stepName", e.name, "conversionFromAll", n, "stepConversion", o, "idx", l))
                        }
                    })), e.find('[data-role="toggle-goals"]')[c ? "show" : "hide"]()
                }
                var d = Tools.calcPercent(t, s) + "%";
                o.find('[data-role="total-visitors"]').text(s.toLocaleString()), o.find('[data-role="total-sales"]').text(Tools.currencyToStrWithSymbol(i)), o.find('[data-role="sales-counts"]').text("(" + format(M.ORDERS_CONVERSION || "%x% Orders - %y% conversion", "x", t, "y", d) + ")")
            },
            g = function (e) {
                if ("UPSELL" === e.kind || "DOWNSELL" === e.kind) return !1;
                for (var t = 0; t < e.variants.length; ++t)
                    if (e.variants[t].checkout) return !0
            },
            v = function (e, t) {
                var i = e.find("#funnelStepsList");
                h(e),
                    function (e, t) {
                        var i = e.find("#funnelStepsList"),
                            n = function () {
                                WebPlatform.delay(50, (function () {
                                    var n = [];
                                    i.find('[data-role="funnel-step"]').each((function () {
                                        var e = $(this);
                                        e.hasClass("grouping-row") || n.push(e.data("id"))
                                    })), u(i, t), Tools.makeWebsiteRequest({
                                        action: "reorderFunnelSteps",
                                        data: {
                                            funnelId: t.id,
                                            newOrder: JSON.stringify(n)
                                        },
                                        onOk: function (i) {
                                            t = r(i.data), f(e, t)
                                        }
                                    })
                                }))
                            },
                            a = -1;
                        i.sortable({
                            items: ".funnel-sortable-step",
                            handle: ".funnel-step-handle",
                            containment: "parent",
                            tolerance: "pointer",
                            axis: "y",
                            start: function (e, t) {
                                i.height(i.height()), a = t.item.index()
                            },
                            beforeStop: function (e, n) {
                                if (n.item.index() !== a) {
                                    var s = i.children(".funnel-sortable-step:not(.ui-sortable-placeholder):not(.grouping-row)");
                                    if (s.length > 0) {
                                        var o = w(t, s.eq(0).children('[data-role="funnel-step"]'));
                                        o && "POPUP" === o.type && (Tools.showError(M.ERR_FUNNELS_INVALID_FIRST_STEP), i.height("auto").sortable("cancel"))
                                    }
                                }
                            },
                            stop: function (e, t) {
                                i.height("auto"), t.item.index() !== a && n()
                            }
                        });
                        var s = 0;
                        e.find("#funnelStepsListOuter").sortable({
                            items: '.upsell-step[data-role="funnel-step"]',
                            handle: ".funnel-step-handle-inner",
                            containment: "parent",
                            tolerance: "pointer",
                            axis: "y",
                            start: function (e, t) {
                                s = t.item.index()
                            },
                            stop: function (e, t) {
                                t.item.index() !== s && n()
                            }
                        })
                    }(e, t);
                var n = S(),
                    a = 0;
                i.empty();
                var s = Website.getActiveFunnelStep();
                if (0 === t.steps.length) e.find(".no-items-wrapper").show();
                else {
                    e.find(".no-items-wrapper").hide();
                    var o = null,
                        l = 0;
                    t.steps.forEach((function (e, r) {
                        var c = s && s.id === e.id,
                            d = [],
                            u = [],
                            h = !1;
                        e.variants.forEach((function (e) {
                            e.archived ? u.push(e) : (d.push(e), e.checkout && (h = !0))
                        }));
                        var f = "UPSELL" === e.kind || "DOWNSELL" === e.kind;
                        h && f && (h = !1);
                        var m = r === t.steps.length - 1,
                            g = p(n, e);
                        0 === r && (a = g.sessions);
                        var v = Tools.calcPercent(g.sessions, a, 1) + "%",
                            b = Tools.calcPercent(g.conversions, g.sessions, 1) + "%";
                        width = v;
                        var y, w = e.name;
                        y = f ? "UPSELL" === e.kind ? "â†‘" : "â†“" : ++l;
                        var _ = c ? "active" : "";
                        h && (_ += " checkout-step");
                        var T = f ? "-inner" : "",
                            C = "",
                            k = "",
                            E = "";
                        f && (C = "UPSELL" === e.kind ? "upsell" : "downsell", E = "UPSELL" === e.kind ? "arrow_upward" : "arrow_downward", k = "button-tooltip");
                        var x = $(format(Templates.get(f ? "funnelStepUpsellRow" : "funnelStepRow"), "funnelStepRowClass", _, "handle", T, "name", w, "id", e.id, "tooltipclz", k, "tooltip", C, "no", y, "goalClass", e.goal ? "is-goal" : "", "stepConversion", v, "icon", E));
                        if (h && (o = $('<div class="substeps-wrapper"><a class="add-substep" data-action="add-step" data-step="' + e.id + '">+ <span>' + M.ADD_UPSELL_OR_DOWNSELL + "</span></a></div>")), "UPSELL" !== e.kind && "DOWNSELL" !== e.kind || null === o) {
                            var S = $('<div class="col20 f-left funnel-sortable-step"></a>');
                            S.append(x), i.append(S), h ? o.appendTo(x) : o = null
                        } else o.append(x);
                        var P = x.find(".funnel-step-bar");
                        P.css("width", width);
                        var I = h || f;
                        if (d.length > 1) {
                            var O = n[d[0].id] || {},
                                A = n[d[1].id] || {},
                                L = Tools.calcPercent(O.conversions, O.sessions, 1),
                                D = Tools.calcPercent(A.conversions, A.sessions, 1);
                            P.addClass("ab-funnel-step");
                            var N = I && O.conversionValue ? WebPlatform.currToStr(O.conversionValue, Website.storeCurrencySymbol, Website.storeCurrencyPositionAtLeft, Website.storeCurrency) : "",
                                R = I && A.conversionValue ? WebPlatform.currToStr(A.conversionValue, Website.storeCurrencySymbol, Website.storeCurrencyPositionAtLeft, Website.storeCurrency) : "";
                            aClass = "ab-left " + (L >= D ? "ab-winning" : "ab-losing"), bClass = "ab-right " + (L < D ? "ab-winning" : "ab-losing"), P.append(format(Templates.get("funnelStepABPart"), "id", d[0].id, "sessions", (O.sessions || 0) + (N ? " / " + N : ""), "badge", "A", "traffic", L + "%", "abclass", aClass, "stepConversionClass", m ? "none" : "")), P.append(format(Templates.get("funnelStepABPart"), "id", d[1].id, "sessions", (A.sessions || 0) + (R ? " / " + R : ""), "badge", "B", "traffic", D + "%", "abclass", bClass, "stepConversionClass", m ? "none" : "")), P.append('<a class="ab-settings button-tooltip" data-tooltip="showABSettings"></a>')
                        } else I && g.conversionValue ? P.text(g.sessions + " / " + WebPlatform.currToStr(g.conversionValue, Website.storeCurrencySymbol, Website.storeCurrencyPositionAtLeft, Website.storeCurrency)) : P.text(g.sessions), u.length > 0 && P.append('<a class="ab-badge ab-history button-tooltip" data-tooltip="showABHistory"></a>'), m || P.append('<a class="step-conversion-badge button-tooltip" data-id="' + d[0].id + '" data-tooltip="stepConversion">' + b + "</a>"), P.append('<a class="blue ab-split button-tooltip" data-tooltip="startABTest">' + M.AB_TEST + "</a>")
                    })), (t.settings.grouping || []).forEach((function (e) {
                        var t = $(escapeFormat(Templates.get("funnelStepGroupingRow"), "name", e.label)).data("label", e.label),
                            n = i.children(".funnel-sortable-step");
                        n.length > e.location ? n.eq(e.location).before(t) : i.append(t)
                    }))
                }
            },
            b = function (n, a, s) {
                CPanel.showLoadingBar("statsLoadingBar", n, (function () {
                    var n = Tools.dateToISOStr(o && o.from ? o.from : new Date(1e3 * parseInt(createdTime))),
                        l = Tools.dateToISOStr(o && o.to ? o.to : new Date);
                    Tools.makeWebsiteRequest({
                        action: "getFunnelStatsSummary",
                        data: {
                            funnelId: a.id,
                            from: n,
                            to: l
                        },
                        onOk: function (n) {
                            var o = n.data;
                            r(o.funnel), t = o.orders, i = o.ordersTotal, e[x()] = o.stats || {}, CPanel.hideLoadingBar("statsLoadingBar"), s(a)
                        }
                    })
                }), !0)
            },
            y = function (e, t, i, n, a) {
                e.close((function () {
                    "PAGE" === i.type ? CPanel.goToUrl(Website.pagePrefix + "/" + t.url + "/" + i.page.link + "/" + n + (a ? "?show=widgetsettings" : ""), !0) : Hooks.active.hook.activePage.showPopup({
                        id: i.id,
                        funnelId: t.id,
                        variant: n,
                        showPrimaryWidgetSettings: !!a
                    })
                }))
            },
            w = function (e, t) {
                var i = t.closest('[data-role="funnel-step"]').data("id");
                return getById(e.steps, i)
            },
            _ = function (e, t) {
                var i = "//" + userDomain + "/" + t.url + "?preview=__PREVIEW_ONLY";
                e.find('[data-role="preview-link"]').attr("href", i), e.find('[data-type="name"]').text(t.name);
                var n = customDomain || userDomain;
                "FUNNEL" !== Website.getActiveSite().type && (n += "/" + t.url), t.host && (n = t.host), e.find('[data-type="url"]').text(n).attr("href", i)
            },
            T = function (e, t) {
                for (var i = (e.settings || {}).grouping || [], n = 0; n < i.length; ++n)
                    if (i[n].location === t) return i[n];
                return null
            },
            C = function (e, t, i) {
                t.settings.grouping = t.settings.grouping || [], i && (i = T(t, i.location));
                var n = i ? i.label : "";
                Tools.promptForInput("Enter group name", "Enter name for this group", n, (function (n) {
                    if ("" === (n = n.trim())) return Tools.showError(M.ERR_EMPTY_NAME), !1;
                    i ? i.label = n : t.settings.grouping.push({
                        location: $("#funnelStepsList").children(".funnel-sortable-step").length,
                        label: n
                    }), c(t, t.name, t.url, t.settings, (function () {
                        f(e, t)
                    }))
                }))
            },
            k = function (e, t) {
                t.html(Templates.get("singleFunnelSteps"));
                var i = null,
                    s = Website.getActiveSite();
                ("FUNNEL" === s.type ? s.active : e.active) || t.find(".warning-wrapper").removeClass("none");
                var l = t;
                return b(t, e, (function () {
                    f(t, e)
                })), t.on("click", '[data-role="funnel-step-name"]', (function () {
                    for (var t = $(this), i = w(e, t), a = 0, s = 0; s < i.variants.length; ++s) {
                        i.variants[s].archived || ++a
                    }
                    a > 1 ? Tools.showTooltipOptions(t, [{
                        text: M.EDIT_A,
                        icon: "fa-pencil"
                    }, {
                        text: M.EDIT_B,
                        icon: "fa-pencil"
                    }], (function (t, a, s) {
                        y(n, e, i, 0 === a ? "a" : "b")
                    })) : y(n, e, i, "a")
                })).on("click", ".ab-part", (function (t) {
                    var i = $(this).closest("div"),
                        a = w(e, i);
                    y(n, e, a, i.hasClass("ab-left") ? "a" : "b")
                })).on("click", ".more-options", (function (t) {
                    var i = $(t.target);
                    i.hasClass("group-options") ? function (e, t, i) {
                        var n = (i.settings || {}).grouping || [],
                            a = t.closest(".grouping-row");
                        if (a.length) {
                            var s = T(i, a.index());
                            s && Tools.showTooltipOptions(t, [{
                                text: M.RENAME_LABEL,
                                icon: "fa-pencil",
                                tag: "rename"
                            }, {
                                text: M.REMOVE_LABEL,
                                icon: "fa-eraser",
                                tag: "remove"
                            }], (function (t, a, o, r) {
                                "rename" === r ? C(e, i, s) : "remove" === r && Tools.prompt(M.DEL_CONFIRM, M.REMOVE_LABEL_CONFIRM, (function () {
                                    for (var t = 0; t < n.length; ++t)
                                        if (n[t].location === s.location) {
                                            n.splice(t, 1);
                                            break
                                        } c(i, i.name, i.url, i.settings, (function () {
                                            f(e, i)
                                        }))
                                }))
                            }))
                        }
                    }(l, i, e) : function (e, t, i) {
                        var a = t.closest('[data-role="funnel-step"]'),
                            s = w(i, t),
                            o = "UPSELL" === s.kind || "DOWNSELL" === s.kind,
                            l = [];
                        o && !s.goal || l.push({
                            text: s.goal ? M.REMOVE_GOAL : M.SET_AS_GOAL,
                            icon: "fa-star",
                            tag: "goal"
                        }), l.push({
                            text: M.SHOW_SETTINGS,
                            icon: "fa-cog",
                            tag: "settings"
                        }), o || (l.push({
                            text: M.DUPLICATE,
                            icon: "fa-clone",
                            tag: "duplicate"
                        }), l.push({
                            text: M.COPY_TO_ANOTHER_FUNNEL,
                            icon: "fa-clone",
                            tag: "clone"
                        })), l.push({
                            text: M.DELETE,
                            icon: "fa-trash",
                            tag: "trash"
                        }), Tools.showTooltipOptions(t, l, (function (t, l, c, d) {
                            if ("goal" === d) Tools.makeWebsiteRequest({
                                action: "updateFunnelStep",
                                data: {
                                    funnelId: i.id,
                                    stepId: s.id,
                                    name: s.name,
                                    goal: !s.goal
                                },
                                onOk: function (t) {
                                    s.goal = !s.goal, f(e, i), o || a.find(".funnel-step-percentage")[s.goal ? "addClass" : "removeClass"]("is-goal")
                                }
                            });
                            else if ("settings" === d) {
                                var p = function (e) {
                                    a.find('[data-role="funnel-step-name"][data-id="' + s.id + '"]').text(e)
                                };
                                if ("PAGE" === s.type) {
                                    var h = s.page.link,
                                        m = Website.getActiveFunnel(),
                                        g = Website.getActiveFunnelStep();
                                    UITools.showPageSettingsDialog({
                                        page: s.page,
                                        tab: 0,
                                        funnelId: i.id,
                                        funnelStepId: s.id,
                                        onUpdated: function (e) {
                                            s.page = e, s.name = e.name, p(e.name), e.link !== h && m && g && m.id === i.id && g.id === s.id && (CPanel.setChanged(!1), CPanel.goToUrl(Website.pagePrefix + "/" + i.url + "/" + e.link + "/a", !0))
                                        }
                                    })
                                } else Tools.promptForInput(M.CHANGE_STEP_NAME, M.ENTER_NAME_FOR_POPUP_STEP, s.name, (function (e) {
                                    Tools.makeWebsiteRequest({
                                        action: "updateFunnelStep",
                                        data: {
                                            funnelId: i.id,
                                            stepId: s.id,
                                            name: e,
                                            goal: s.goal
                                        },
                                        onOk: function (t) {
                                            s.name = e, p(e)
                                        }
                                    })
                                }))
                            } else if ("duplicate" === d) Tools.prompt(M.DUPLICATE_FUNNEL_STEP_TITLE, M.DUPLICATE_FUNNEL_STEP_MESSAGE, (function () {
                                Tools.makeWebsiteRequest({
                                    action: "duplicateFunnelStep",
                                    data: {
                                        id: i.id,
                                        stepId: s.id
                                    },
                                    onOk: function (t) {
                                        i = r(t.data), f(e, i)
                                    }
                                })
                            }), dummy, M.YES, M.NO);
                            else if ("clone" === d) Tools.prompt(M.DUPLICATE_FUNNEL_STEP_TITLE, M.DUPLICATE_FUNNEL_STEP_MESSAGE, (function () {
                                UITools.selectExistingFunnel((function (t, a) {
                                    Tools.makeWebsiteRequest({
                                        action: "duplicateFunnelStep",
                                        data: {
                                            id: i.id,
                                            stepId: s.id,
                                            toSiteId: t,
                                            toFunnelId: a
                                        },
                                        onOk: function (s) {
                                            var o = s.data;
                                            Website.getActiveSite().id === t ? (a === i.id ? (i = r(o), f(e, i)) : Website.setFunnel(o), Tools.showCornerMessage(3e3, M.UPDATED, Tools.TOOLTIP_TYPE_SUCCESS)) : n.close((function () {
                                                var e = "//" + Website.getProjectWebsiteById(t).subdomain + "." + Website.rootDomain + Website.pagePrefix + "/" + o.url + "/" + o.steps[0].page.link + "?show=steps";
                                                CPanel.redirect(e)
                                            }))
                                        }
                                    })
                                }))
                            }), dummy, M.YES, M.NO);
                            else if ("trash" === d) {
                                if (!o) {
                                    var v = indexOfId(i.steps, s.id) + 1;
                                    if (v < i.steps.length) {
                                        var b = i.steps[v];
                                        if ("UPSELL" === b.kind || "DOWNSELL" === b.kind) return void Tools.showError("This step has upsells. You need to remove them first")
                                    }
                                }
                                Tools.prompt(M.DELETE_FUNNEL_STEP_TITLE, M.DELETE_FUNNEL_STEP_MESSAGE, (function () {
                                    Tools.makeWebsiteRequest({
                                        action: "deleteFunnelStep",
                                        data: {
                                            funnelId: i.id,
                                            stepId: s.id
                                        },
                                        onOk: function (t) {
                                            var n = Website.getActiveFunnelStep();
                                            i = r(t.data), o ? a.closest('[data-role="upsell-step-root"]').remove() : a.closest(".funnel-sortable-step").remove(), u(e.find("#funnelStepsList"), i, (function () {
                                                f(e, i), n && n.id === s.id && CPanel.goToUrl(Website.pagePrefix)
                                            }))
                                        }
                                    })
                                }), dummy, M.YES, M.NO)
                            }
                        }))
                    }(l, i, e)
                })).on("click", ".ab-history", (function (t) {
                    var i = w(e, $(this));
                    Tools.showWindow({
                        isModal: !1,
                        showNextTo: $(t.target),
                        width: 450,
                        customClass: "funnels-popup",
                        markup: Templates.get("funnelABHistoryMarkup"),
                        noNav: !0,
                        action: {
                            onShow: function (e, t) {
                                var n = "",
                                    a = S(),
                                    s = null;
                                i.variants.forEach((function (e) {
                                    if (e.archived) {
                                        var t = Tools.dateToShortString(new Date(e.createdOn), !0, !0),
                                            i = Tools.dateToShortString(new Date(e.archivedOn), !0, !0),
                                            o = a[e.id] || {},
                                            r = Tools.calcPercent(o.conversions, o.sessions, 1) + "%",
                                            l = (o.sessions || 0) + " " + (1 === o.sessions ? M.VISITOR : M.VISITORS);
                                        n += format(Templates.get("funnelStepABHistoryRow"), "percent", r, "startDate", t, "endDate", i, "visitors", l)
                                    } else null === s && (s = e)
                                }));
                                var o = null === s ? null : a[s.id] || {},
                                    r = null === s ? "-" : Tools.calcPercent(o.conversions, o.sessions, 1) + "%",
                                    l = null === s ? "-" : (o.sessions || 0) + " " + (1 === o.sessions ? M.VISITOR : M.VISITORS);
                                t.find(".funnel-step-number").text(r), t.find(".winner-visitors").text(l), t.find(".ab-history-items").append(n)
                            }
                        },
                        buttons: []
                    })
                })).on("click", ".ab-settings", (function (t) {
                    var i = w(e, $(this));
                    Tools.showWindow({
                        isModal: !1,
                        showNextTo: $(t.target),
                        width: 550,
                        customClass: "funnels-popup",
                        markup: Templates.get("funnelActiveABSettingsMarkup"),
                        noNav: !0,
                        action: {
                            onShow: function (t, n) {
                                for (var a = null, s = null, o = 0; o < i.variants.length; ++o) {
                                    var c = i.variants[o];
                                    if (!c.archived) {
                                        if (null !== a) {
                                            s = c;
                                            break
                                        }
                                        a = c
                                    }
                                }
                                var d = S(),
                                    u = p(d, i);
                                n.find(".total-visitors-label").text(u.sessions);
                                var h = d[a.id] || {},
                                    m = d[s.id] || {},
                                    g = Tools.calcPercent(h.conversions, h.sessions, 1),
                                    v = Tools.calcPercent(m.conversions, m.sessions, 1),
                                    b = (h.sessions || 0) + " " + (1 === h.sessions ? M.VISITOR : M.VISITORS),
                                    y = (m.sessions || 0) + " " + (1 === m.sessions ? M.VISITOR : M.VISITORS),
                                    w = g >= v ? "winner" : "",
                                    _ = g < v ? "winner" : "",
                                    T = format(Templates.get("funnelStepABManualWinnerRow"), "id", a.id, "letter", "A", "rowClass", w, "percent", g + "%", "visitors", b),
                                    C = format(Templates.get("funnelStepABManualWinnerRow"), "id", s.id, "letter", "B", "rowClass", _, "percent", v + "%", "visitors", y);
                                n.find(".ab-manual-wrapper").on("click", ".winner-select-btn", (function (n) {
                                    Tools.prompt(M.SELECT_AB_WINNER_TITTLE, M.SELECT_AB_WINNER_MESSAGE, (function () {
                                        var a = $(n.target).closest(".ab-step").data("id");
                                        Tools.makeWebsiteRequest({
                                            action: "funnelSelectABWinner",
                                            data: {
                                                id: e.id,
                                                stepId: i.id,
                                                variantId: a
                                            },
                                            onOk: function (n) {
                                                t.close(), e = r(n.data), f(l, e);
                                                var a = Website.getActiveFunnelStep();
                                                a && a.id === i.id && CPanel.goToUrl(Website.pagePrefix + "/" + e.url + "/" + i.page.link, !0)
                                            }
                                        })
                                    }))
                                })).append(T + C), n.find(".addon-select").click((function () {
                                    var e = $(this);
                                    if (!e.hasClass("selected")) {
                                        var t = e.index();
                                        e.parent().find(".selected").removeClass("selected"), e.addClass("selected"), n.find(".ab-automatic-wrapper")[0 === t ? "removeClass" : "addClass"]("none"), n.find(".ab-manual-wrapper")[1 === t ? "removeClass" : "addClass"]("none")
                                    }
                                })).eq("AUTOMATIC" === i.abWinnerSelectionType ? 0 : 1).click(), n.find('[name="abThreshold"]').val(i.abThreshold)
                            }
                        },
                        buttons: [Button(M.SAVE, Button.CLASS_MIDDLE_BLUE, (function (t, n) {
                            var a = n.find(".addon-select.selected").index(),
                                s = 0 === a ? "AUTOMATIC" : "MANUAL",
                                o = 0 === a ? WebPlatform.parse(n.find('[name="abThreshold"]').val(), 5e3, !1) : 0;
                            Tools.makeWebsiteRequest({
                                action: "setFunnelStepABSettings",
                                data: {
                                    type: s,
                                    threshold: o,
                                    id: e.id,
                                    stepId: i.id
                                },
                                onOk: function (e) {
                                    i.abWinnerSelectionType = s, i.abThreshold = o, t.close()
                                }
                            })
                        })), Button.MIDDLE_CANCEL]
                    })
                })).on("click", ".ab-split", (function (t) {
                    var i = w(e, $(this));
                    Tools.showWindow({
                        isModal: !1,
                        showNextTo: $(t.target),
                        width: 380,
                        customClass: "funnels-popup",
                        markup: Templates.get("funnelABSettingsMarkup"),
                        noNav: !0,
                        noTitle: !0,
                        action: {
                            onShow: function (t, n) {
                                var a = n.find(".duplicate-page"),
                                    s = n.find(".page"),
                                    o = "PAGE" === i.type;
                                a.find("h3").text(o ? M.DUPLICATE_FUNNEL_PAGE : M.DUPLICATE_FUNNEL_POPUP), s.find("h3").text(o ? M.NEW_FUNNEL_PAGE : M.NEW_FUNNEL_POPUP);
                                var c = function (t) {
                                    Tools.makeWebsiteRequest({
                                        action: "addFunnelStepVariation",
                                        data: {
                                            funnelId: e.id,
                                            stepId: i.id,
                                            template: t
                                        },
                                        onOk: function (t) {
                                            e = r(t.data), f(l, e)
                                        }
                                    })
                                };
                                a.click((function () {
                                    t.close(), c("clone")
                                })), s.click((function () {
                                    t.close(), o ? UITools.showNewPagePopup({
                                        funnel: !0,
                                        selectTemplateOnly: !0
                                    }, (function (e) {
                                        c(e)
                                    })) : UITools.showNewPopupDialog((function (e, t) {
                                        c(e), t()
                                    }))
                                }))
                            }
                        },
                        buttons: []
                    })
                })).on("click", '[data-action="add-step"]', (function (t) {
                    var i = $(this),
                        a = 0,
                        s = !1;
                    i.hasClass("add-substep") && (a = i.data("step") || 0, s = !0);
                    var o = function () {
                        if (a) {
                            for (var t = null, i = indexOfId(e.steps, a) + 1; i < e.steps.length; ++i) {
                                if ("UPSELL" !== (s = e.steps[i]).kind && "DOWNSELL" !== s.kind) break;
                                t = s
                            }
                            t && y(n, e, t, "a", !0)
                        } else {
                            var s = e.steps[e.steps.length - 1];
                            y(n, e, s, "a", g(s))
                        }
                    },
                        c = function () {
                            UITools.showNewPagePopup({
                                funnel: !0,
                                showUpsells: a > 0
                            }, (function (t, i) {
                                t.funnelId = e.id, t.toCheckoutStepId = a, Website.addPage(t, (function (t) {
                                    e = r(t), f(l, e), o(), i()
                                }))
                            }))
                        };
                    e.steps && e.steps.length > 0 ? Tools.showWindow({
                        isModal: !1,
                        showNextTo: $(t.target),
                        width: s ? 340 : 520,
                        customClass: "funnels-popup",
                        markup: Templates.get(s ? "funnelAddSubStepMarkup" : "funnelAddStepMarkup"),
                        noNav: !0,
                        noTitle: !0,
                        action: {
                            onShow: function (t, i) {
                                i.find(".popup").click((function () {
                                    t.close(), UITools.showNewPopupDialog({
                                        showUpsells: a > 0,
                                        onPopupSelected: function (t) {
                                            Tools.makeWebsiteRequest({
                                                action: "addFunnelPopupStep",
                                                data: {
                                                    clone: t,
                                                    funnelId: e.id,
                                                    toCheckoutStepId: a
                                                },
                                                onOk: function (t) {
                                                    e = r(t.data), f(l, e), o()
                                                }
                                            })
                                        }
                                    })
                                })), i.find(".page").click((function () {
                                    t.close(), c()
                                })), i.find(".funnel-section").click((function () {
                                    t.close(), C(l, e, null)
                                }))
                            }
                        },
                        buttons: []
                    }) : c()
                })).on("click", ".step-conversion-badge", (function () {
                    var t = $(this),
                        n = $("#funnelStepsList"),
                        s = t.data("id"),
                        r = t.closest('[data-role="funnel-step"]'),
                        l = t.hasClass("active"),
                        c = function () {
                            var n = $('<div class="chart-box funnel-step-chart-box col20 f-left"></div>');
                            r.after(n), t.addClass("active");
                            var l = w(e, r),
                                c = [s];
                            t.closest(".funnel-step-bar").hasClass("ab-funnel-step") || (c = [], l.variants.forEach((function (e) {
                                c.push(e.id)
                            })));
                            var d = n[0];
                            i = WebComponents.Funnels.Stats.singleVariant(d, e, c, o), a.push(i)
                        };
                    if (i) {
                        var d = n.find(".chart-box");
                        d.length && d.slideUp("fast", (function () {
                            E(i), i = null, d.remove(), n.find(".step-conversion-badge.active").removeClass("active"), n.find(".row-with-stats").removeClass("row-with-stats"), l || c()
                        }))
                    } else c()
                })).on("click", '[data-role="toggle-goals"]', (function () {
                    var e = $(this),
                        t = e.closest(".funnel-stats");
                    t.toggleClass("goals-expanded");
                    var i = t.hasClass("goals-expanded");
                    e.find('[data-role="label"]').text(i ? M.HIDE_GOALS : M.SHOW_GOALS), e.find(".material-icons").text(i ? "keyboard_arrow_up" : "keyboard_arrow_down")
                })), {
                    hide: function (e) {
                        i && (E(i), i = null), h(t), t.off("click"), e()
                    },
                    refresh: function () {
                        i && (E(i), i = null), b(t, e, (function (e) {
                            f(t, e)
                        }))
                    }
                }
            },
            E = function (e) {
                for (var t = 0; t < a.length; ++t)
                    if (a[t] === e) {
                        a.splice(t, 1);
                        break
                    } WebComponents.destroy(e)
            },
            x = function () {
                return o && o.from && o.to ? o.from + "_" + o.to : "all"
            },
            S = function () {
                return e[x()] || {}
            },
            P = function (t, i) {
                var r = null,
                    l = "";
                Tools.showInlinePopup({
                    isModal: !1,
                    width: 1100,
                    customClass: "funnels-popup",
                    markup: Templates.get("singleFunnelMarkup"),
                    noNav: !0,
                    action: {
                        onBeforeHide: function (e, t, i) {
                            if (null !== r) return r.hide(i), r = null, !1
                        },
                        onShow: function (e, c) {
                            n = e, o = s;
                            var p = c.find('[data-role="tabs"]'),
                                u = p.find("a[data-tab]"),
                                h = c.find('[data-role="tab-content"]'),
                                m = c.find('[data-role="time-picker"]')[0],
                                g = WebComponents.Common.periodPicker(m);
                            e.bindComponent(g), g.$on("change", (function (e) {
                                var t;
                                t = e.detail.period, o = t, a.forEach((function (e) {
                                    e.$set({
                                        period: t
                                    }), e.reload && e.reload()
                                })), "steps" === l && r.refresh()
                            }));
                            var v = function (e) {
                                var i = function () {
                                    var i = c.find('[data-role="tab-root"]');
                                    switch (l && i.removeClass("funnel-tab-" + l), i.addClass("funnel-tab-" + e), l = e, p.find(".active").removeClass("active"), u.filter('[data-tab="' + e + '"]').closest("li").addClass("active"), e) {
                                        case "steps":
                                            r = k(t, h);
                                            break;
                                        case "sales-and-subs":
                                            r = function (e, t) {
                                                t.html('<div class="col20 f-left bg-white" style="padding-top: 25px"></div>');
                                                var i = t.find("div")[0],
                                                    n = WebComponents.Store.Stats.all(i, o, e.id, [], {
                                                        topPerformers: !1,
                                                        referers: !1
                                                    });
                                                return a.push(n), {
                                                    hide: function (e) {
                                                        E(n), n = null, e()
                                                    }
                                                }
                                            }(t, h);
                                            break;
                                        case "top-products":
                                            r = function (e, t) {
                                                t.html(Templates.get("singleFunnelTopProducts"));
                                                var i = t.find('[data-role="table"]')[0],
                                                    n = WebComponents.Store.Orders.listTopProducts(i, o, e.id);
                                                return a.push(n), t.find('[data-role="create-product"]').click((function () {
                                                    UITools.createNewProductFromPopup(dummy)
                                                })), {
                                                    hide: function (e) {
                                                        E(n), n = null, e()
                                                    }
                                                }
                                            }(t, h);
                                            break;
                                        case "analytics":
                                            r = function (e, t) {
                                                t.html('<div class="col20 f-left bg-white" style="padding-top: 25px"></div>');
                                                var i = t.find("div")[0],
                                                    n = WebComponents.Funnels.Stats.visitors(i, e, o);
                                                return a.push(n), {
                                                    hide: function (e) {
                                                        E(n), n = null, e()
                                                    }
                                                }
                                            }(t, h);
                                            break;
                                        case "funnel-orders":
                                            r = function (e, t) {
                                                t.html(Templates.get("singleFunnelOrdersList"));
                                                var i = t.find('[data-role="table"]')[0],
                                                    n = WebComponents.Store.Orders.listFunnelOrders(i, o, e.id, [], {
                                                        selection: !1,
                                                        openOrdersIn: "popup"
                                                    });
                                                return a.push(n), n.$on("itemsloaded", (function (e) {
                                                    t.find('[data-role="successful-orders"]').text(e.detail.count)
                                                })), {
                                                    hide: function (e) {
                                                        E(n), n = null, e()
                                                    }
                                                }
                                            }(t, h);
                                            break;
                                        case "funnel-top-performers":
                                            r = function (e, t) {
                                                t.html(Templates.get("singleFunnelTopPerformers"));
                                                var i = t.find('[data-role="table"]')[0],
                                                    n = WebComponents.Store.Orders.listTopPerformers(i, o, e.id, [], {
                                                        products: !1,
                                                        navigation: "big"
                                                    });
                                                return a.push(n), {
                                                    hide: function (e) {
                                                        E(n), n = null, e()
                                                    }
                                                }
                                            }(t, h)
                                    }
                                };
                                r ? r.hide(i) : i()
                            };
                            $("#funnels").addClass("active"), c.on("click", 'a[data-role="showOrders"]', (function () {
                                e.close(), CPanel.goToUrl(Website.virtualPagePrefix + "/store/orders", !0, {
                                    funnel: t.id
                                })
                            })).on("click", 'a[data-role="shareFunnel"]', (function (e) {
                                UITools.showShareWebsiteDialog(Website.id, t.id)
                            })).on("click", ".back-arrow", (function () {
                                e.close((function () {
                                    Project.showWebsitesDialog(!0)
                                }))
                            })).on("click", ".copy-funnel-url", (function () {
                                var e = $(this).closest(".funnel-url-copy").find('[data-type="url"]').text();
                                Tools.copyToClipboard(e), Tools.showCornerMessage(1e3, e + " " + M.COPIED_TO_CLIPBOARD, Tools.TOOLTIP_TYPE_SUCCESS)
                            })).on("click", 'a[data-role="showSettings"]', (function () {
                                "FUNNEL" === Website.getActiveSite().type ? e.close((function () {
                                    Website.settingsUI.show()
                                })) : d(e, t, (function () {
                                    _(c, t)
                                }))
                            })).on("click", 'a[data-role="showOptions"]', (function (i) {
                                ! function (e, t, i, n, a) {
                                    e.stopPropagation(), e.preventDefault();
                                    var s = [];
                                    Website.templateFunnel || (s.push({
                                        text: M.SHARE,
                                        icon: "fa-share-alt",
                                        tag: "share"
                                    }), s.push({
                                        text: M.DUPLICATE,
                                        icon: "fa-clone",
                                        tag: "clone"
                                    }), s.push({
                                        text: M.DELETE,
                                        icon: "fa-trash",
                                        tag: "delete"
                                    })), s.push({
                                        text: M.CLEAR_STATS,
                                        icon: "fa-eraser",
                                        tag: "clear-stats"
                                    }), Website.templateWebsite || Website.templateFunnel || (a.active ? s.push({
                                        text: M.MAKE_INACTIVE,
                                        icon: "fa-eye-slash",
                                        tag: "make-inactive"
                                    }) : s.push({
                                        text: M.MAKE_ACTIVE,
                                        icon: "fa-eye",
                                        tag: "make-active"
                                    }), Website.isFunnelWebsite() ? s.push({
                                        text: M.MOVE_TO_WEBSITE_IN_PROJECT,
                                        icon: "fa-arrow-right",
                                        tag: "move-inside-website"
                                    }) : Website.canAddWebsitesToProject && s.push({
                                        text: M.MOVE_OUTSIDE,
                                        icon: "fa-arrow-right",
                                        tag: "move-outside-website"
                                    }), Website.isFunnelWebsite() && Website.currentUserIsProjectOwner && s.push({
                                        text: M.MOVE_TO_ANOTHER_PROJECT,
                                        icon: "fa-share",
                                        tag: "move-to-project"
                                    })), Tools.showTooltipOptions(n, s, (function (e, n, s, o) {
                                        var r = a.id,
                                            l = Website.isFunnelWebsite(),
                                            c = Website.getActiveSite();
                                        if (null !== c) switch (o) {
                                            case "make-active":
                                            case "make-inactive":
                                                var d = "make-active" === o;
                                                UITools.toggleSiteActiveState(c, l ? 0 : a.id, !0, d, (function () {
                                                    a.active = d, d ? i.find(".warning-wrapper").addClass("none") : i.find(".warning-wrapper").removeClass("none")
                                                }));
                                                break;
                                            case "share":
                                                UITools.showShareWebsiteDialog(Website.id, a.id);
                                                break;
                                            case "move-inside-website":
                                                UITools.moveFunnelToWebsite(c);
                                                break;
                                            case "move-outside-website":
                                                UITools.moveFunnelOutsideWebsite(c, r);
                                                break;
                                            case "move-to-project":
                                                UITools.moveSiteToAnotherProject(c);
                                                break;
                                            case "clear-stats":
                                                UITools.clearStats(c, r, (function () {
                                                    b(i, a, (function (e) {
                                                        f(i, e)
                                                    }))
                                                }));
                                                break;
                                            case "delete":
                                                var p = Website.getActiveSite();
                                                Tools.prompt(M.DELETE_FUNNEL_TITLE, M.DELETE_FUNNEL_MESSAGE, (function () {
                                                    Tools.makeWebsiteRequest({
                                                        action: "deleteProjectItem",
                                                        data: {
                                                            subdomain: c.subdomain,
                                                            funnelId: r
                                                        },
                                                        onOk: function (e) {
                                                            Website.isFunnelWebsite() ? c.id === p.id && e.data && CPanel.redirect(e.data) : t.close((function () {
                                                                Website.removeFunnelById(r), CPanel.setChanged(!1), CPanel.goToUrl(Website.pagePrefix)
                                                            }))
                                                        }
                                                    })
                                                }), dummy, M.YES, M.CANCEL, !1, "red-popup");
                                                break;
                                            case "clone":
                                                Tools.prompt(M.DUPLICATE_FUNNEL_TITLE, M.DUPLICATE_FUNNEL_MESSAGE, (function () {
                                                    Tools.makeWebsiteRequest({
                                                        action: "duplicateProjectItem",
                                                        data: {
                                                            subdomain: c.subdomain,
                                                            funnelId: Website.isFunnelWebsite() ? 0 : r
                                                        },
                                                        onOk: function (e) {
                                                            if (CPanel.setChanged(!1), Website.isFunnelWebsite()) CPanel.redirect(e.data);
                                                            else {
                                                                var i = e.data,
                                                                    n = Website.pagePrefix + "/" + i.url + "/" + i.steps[0].page.link;
                                                                t.close((function () {
                                                                    Website.funnels.push(i), CPanel.goToUrl(n)
                                                                }))
                                                            }
                                                        }
                                                    })
                                                }), dummy, M.YES, M.NO)
                                        }
                                    }))
                                }(i, e, c, $(this), t)
                            })).on("click", 'a[data-role="show-tab"]', (function (e) {
                                v($(this).data("tab"))
                            })), u.click((function () {
                                var e = $(this);
                                e.hasClass("active") || v(e.data("tab"))
                            })), v("steps"), _(c, t), i && d(e, t, (function () {
                                _(c, t)
                            }))
                        },
                        onHide: function () {
                            e = {}, n = null, $("#funnels").removeClass("active")
                        }
                    }
                })
            };
        return {
            startABSplitTest: function (e, t, i) {
                var n = 0;
                t.variants.forEach((function (e) {
                    e.archived || ++n
                })), n > 1 ? Tools.showError("This step has active A/B test already!") : Tools.makeWebsiteRequest({
                    action: "addFunnelStepVariation",
                    data: {
                        funnelId: e.id,
                        stepId: t.id,
                        template: "clone"
                    },
                    onOk: function (n) {
                        e = r(n.data), (i || dummy)(e, t)
                    }
                })
            },
            edit: function () {
                var e = Website.getActiveFunnel();
                e ? P(e) : Project.showWebsitesDialog(!0)
            },
            showSteps: function (e) {
                P(e)
            },
            showNewFunnelPopup: function (e) {
                Tools.showWindow({
                    isModal: !1,
                    width: .9 * $window.width(),
                    height: "90%",
                    customClass: "funnels-popup",
                    markup: Templates.get("funnelsLibraryPopupMarkup"),
                    noNav: !0,
                    noTitle: !0,
                    withDarkBackground: !0,
                    action: {
                        onShow: function (t, i) {
                            Website.funnelTemplates ? l(t, i, e) : Tools.makeWebsiteRequest({
                                action: "getFunnelTemplates",
                                onOk: function (n) {
                                    Website.funnelTemplates = n.data, l(t, i, e)
                                }
                            }), i.on("click", '[data-action="select"]', (function () {
                                var i = $(this).closest(".page-wrapper").data("funnel") || {};
                                t.close(), e(i.id)
                            })), i.on("click", '[data-action="preview"]', (function () {
                                var i = $(this).closest(".page-wrapper").data("funnel") || {},
                                    n = $("#previewButtonSmall");
                                Tools.showFunnelPreviewPopup({
                                    funnel: i,
                                    buttonText: M.ADD_FUNNEL,
                                    onButtonAction: function () {
                                        t.close(), e(i.id)
                                    },
                                    onShow: function () {
                                        n.addClass("active")
                                    },
                                    onHide: function () {
                                        n.removeClass("active"), n = null
                                    }
                                })
                            }))
                        }
                    }
                })
            },
            showFunnelSettings: function (e, t) {
                var i = Website.getActiveSite(),
                    n = Website.getActiveFunnel(),
                    a = Website.pagePrefix + "/" + t.url + "/" + t.steps[0].page.link;
                i.id === e.id ? "FUNNEL" === i.type ? Website.settingsUI.show() : n && n.id === t.id ? P(t, !0) : CPanel.goToUrl(a + "?show=funnel-settings", !0) : CPanel.redirect("https://" + e.subdomain + "." + Website.rootDomain + a + "?show=funnel-settings")
            },
            isCheckoutStep: g
        }
    }(),
    Base = function () { },
    FlipClock;
Base.extend = function (e, t) {
    "use strict";
    var i = Base.prototype.extend;
    Base._prototyping = !0;
    var n = new this;
    i.call(n, e), n.base = function () { }, delete Base._prototyping;
    var a = n.constructor,
        s = n.constructor = function () {
            if (!Base._prototyping)
                if (this._constructing || this.constructor == s) this._constructing = !0, a.apply(this, arguments), delete this._constructing;
                else if (null !== arguments[0]) return (arguments[0].extend || i).call(arguments[0], n)
        };
    return s.ancestor = this, s.extend = this.extend, s.forEach = this.forEach, s.implement = this.implement, s.prototype = n, s.toString = this.toString, s.valueOf = function (e) {
        return "object" == e ? s : a.valueOf()
    }, i.call(s, t), "function" == typeof s.init && s.init(), s
}, Base.prototype = {
    extend: function (e, t) {
        if (arguments.length > 1) {
            var i = this[e];
            if (i && "function" == typeof t && (!i.valueOf || i.valueOf() != t.valueOf()) && /\bbase\b/.test(t)) {
                var n = t.valueOf();
                t = function () {
                    var e = this.base || Base.prototype.base;
                    this.base = i;
                    var t = n.apply(this, arguments);
                    return this.base = e, t
                }, t.valueOf = function (e) {
                    return "object" == e ? t : n
                }, t.toString = Base.toString
            }
            this[e] = t
        } else if (e) {
            var a = Base.prototype.extend;
            Base._prototyping || "function" == typeof this || (a = this.extend || a);
            for (var s = {
                toSource: null
            }, o = ["constructor", "toString", "valueOf"], r = Base._prototyping ? 0 : 1; l = o[r++];) e[l] != s[l] && a.call(this, l, e[l]);
            for (var l in e) s[l] || a.call(this, l, e[l])
        }
        return this
    }
}, Base = Base.extend({
    constructor: function () {
        this.extend(arguments[0])
    }
}, {
    ancestor: Object,
    version: "1.1",
    forEach: function (e, t, i) {
        for (var n in e) void 0 === this.prototype[n] && t.call(i, e[n], n, e)
    },
    implement: function () {
        for (var e = 0; e < arguments.length; e++) "function" == typeof arguments[e] ? arguments[e](this.prototype) : this.prototype.extend(arguments[e]);
        return this
    },
    toString: function () {
        return String(this.valueOf())
    }
}),
    /**
     * FlipClock.js
     *
     * @author     Justin Kimbrell
     * @copyright  2013 - Objective HTML, LLC
     * @licesnse   http://www.opensource.org/licenses/mit-license.php
     */
    function (e) {
        "use strict";
        (FlipClock = function (e, t, i) {
            return t instanceof Object && t instanceof Date == !1 && (i = t, t = 0), new FlipClock.Factory(e, t, i)
        }).Lang = {}, FlipClock.Base = Base.extend({
            buildDate: "2014-12-12",
            version: "0.7.7",
            constructor: function (t, i) {
                "object" != typeof t && (t = {}), "object" != typeof i && (i = {}), this.setOptions(e.extend(!0, {}, t, i))
            },
            callback: function (e) {
                if ("function" == typeof e) {
                    for (var t = [], i = 1; i <= arguments.length; i++) arguments[i] && t.push(arguments[i]);
                    e.apply(this, t)
                }
            },
            log: function (e) {
                window.console && console.log && console.log(e)
            },
            getOption: function (e) {
                return !!this[e] && this[e]
            },
            getOptions: function () {
                return this
            },
            setOption: function (e, t) {
                this[e] = t
            },
            setOptions: function (e) {
                for (var t in e) void 0 !== e[t] && this.setOption(t, e[t])
            }
        })
    }(jQuery),
    /**
     * FlipClock.js
     *
     * @author     Justin Kimbrell
     * @copyright  2013 - Objective HTML, LLC
     * @licesnse   http://www.opensource.org/licenses/mit-license.php
     */
    function (e) {
        "use strict";
        FlipClock.Face = FlipClock.Base.extend({
            autoStart: !0,
            dividers: [],
            factory: !1,
            lists: [],
            constructor: function (e, t) {
                this.dividers = [], this.lists = [], this.base(t), this.factory = e
            },
            build: function () {
                this.autoStart && this.start()
            },
            createDivider: function (t, i, n) {
                "boolean" != typeof i && i || (n = i, i = t);
                var a = ['<span class="flex-1 justify-center center-vertically ' + this.factory.classes.dot + ' top" style="font-size: ' + this.factory.size / 2 + "px; color: " + ("transparent" === this.factory.bgColor ? this.factory.color : this.factory.bgColor) + ';">&bull;</span>', '<span class="flex-1 justify-center center-vertically ' + this.factory.classes.dot + ' bottom" style="font-size: ' + this.factory.size / 2 + "px; color: " + ("transparent" === this.factory.bgColor ? this.factory.color : this.factory.bgColor) + ';">&bull;</span>'].join("");
                n && (a = ""), t = this.factory.localize(t);
                var s = ['<span class="' + this.factory.classes.divider + " " + (i || "").toLowerCase() + ' flex flex-col" style="height: ' + (this.factory.size + 10) + 'px;">', '<span class="' + this.factory.classes.label + '" style="font-size: ' + this.factory.labelSize + "px; color: " + this.factory.labelColor + '">' + (t || "") + "</span>", a, "</span>"],
                    o = e(s.join(""));
                return this.dividers.push(o), o
            },
            createList: function (e, t) {
                "object" == typeof e && (t = e, e = 0);
                var i = new FlipClock.List(this.factory, e, t);
                return this.lists.push(i), i
            },
            reset: function () {
                this.factory.time = new FlipClock.Time(this.factory, this.factory.original ? Math.round(this.factory.original) : 0, {
                    minimumDigits: this.factory.minimumDigits
                }), this.flip(this.factory.original, !1)
            },
            appendDigitToClock: function (e) {
                e.$el.append(!1)
            },
            addDigit: function (e) {
                var t = this.createList(e, {
                    classes: {
                        active: this.factory.classes.active,
                        before: this.factory.classes.before,
                        flip: this.factory.classes.flip
                    }
                });
                this.appendDigitToClock(t)
            },
            start: function () { },
            stop: function () { },
            autoIncrement: function () {
                this.factory.countdown ? this.decrement() : this.increment()
            },
            increment: function () {
                this.factory.time.addSecond()
            },
            decrement: function () {
                0 == this.factory.time.getTimeSeconds() ? this.factory.stop() : this.factory.time.subSecond()
            },
            flip: function (t, i) {
                var n = this;
                e.each(t, (function (e, t) {
                    var a = n.lists[e];
                    a ? (i || t == a.digit || a.play(), a.select(t)) : n.addDigit(t)
                }))
            }
        })
    }(jQuery),
    /**
     * FlipClock.js
     *
     * @author     Justin Kimbrell
     * @copyright  2013 - Objective HTML, LLC
     * @licesnse   http://www.opensource.org/licenses/mit-license.php
     */
    function (e) {
        "use strict";
        FlipClock.Factory = FlipClock.Base.extend({
            animationRate: 1e3,
            autoStart: !0,
            callbacks: {
                destroy: !1,
                create: !1,
                init: !1,
                interval: !1,
                start: !1,
                stop: !1,
                reset: !1
            },
            color: "#ffffff",
            bgColor: "#333333",
            labelColor: "#333333",
            labelSize: 14,
            size: 70,
            classes: {
                active: "flip-clock-active",
                before: "flip-clock-before",
                divider: "flip-clock-divider",
                dot: "flip-clock-dot",
                label: "flip-clock-label",
                flip: "flip",
                play: "play",
                wrapper: "flip-clock-wrapper"
            },
            clockFace: "HourlyCounter",
            countdown: !1,
            defaultClockFace: "HourlyCounter",
            defaultLanguage: "english",
            $el: !1,
            face: !0,
            lang: !1,
            language: "english",
            minimumDigits: 0,
            original: !1,
            running: !1,
            time: !1,
            timer: !1,
            $wrapper: !1,
            constructor: function (t, i, n) {
                n || (n = {}), this.lists = [], this.running = !1, this.base(n), this.$el = e(t).addClass(this.classes.wrapper), this.$wrapper = this.$el, this.original = i instanceof Date ? i : i ? Math.round(i) : 0, this.time = new FlipClock.Time(this, this.original, {
                    minimumDigits: this.minimumDigits,
                    animationRate: this.animationRate
                }), this.timer = new FlipClock.Timer(this, n), this.loadLanguage(this.language), this.loadClockFace(this.clockFace, n), this.autoStart && this.start()
            },
            loadClockFace: function (e, t) {
                var i, n = "Face",
                    a = !1;
                return e = e.ucfirst() + n, this.face.stop && (this.stop(), a = !0), this.$el.html(""), this.time.minimumDigits = this.minimumDigits, (i = FlipClock[e] ? new FlipClock[e](this, t) : new FlipClock[this.defaultClockFace + n](this, t)).build(), this.face = i, a && this.start(), this.face
            },
            loadLanguage: function (e) {
                var t;
                return t = FlipClock.Lang[e.ucfirst()] ? FlipClock.Lang[e.ucfirst()] : FlipClock.Lang[e] ? FlipClock.Lang[e] : FlipClock.Lang[this.defaultLanguage], this.lang = t
            },
            localize: function (e, t) {
                var i = this.lang;
                if (!e) return null;
                var n = e.toLowerCase();
                return "object" == typeof t && (i = t), i && i[n] ? i[n] : e
            },
            start: function (e) {
                var t = this;
                t.running || t.countdown && !(t.countdown && t.time.time > 0) ? t.log("Trying to start timer when countdown already at 0") : (t.face.start(t.time), t.timer.start((function () {
                    t.flip(), "function" == typeof e && e()
                })))
            },
            stop: function (e) {
                for (var t in this.face.stop(), this.timer.stop(e), this.lists) this.lists.hasOwnProperty(t) && this.lists[t].stop()
            },
            reset: function (e) {
                this.timer.reset(e), this.face.reset()
            },
            setTime: function (e) {
                this.time.time = e, this.flip(!0)
            },
            getTime: function (e) {
                return this.time
            },
            setCountdown: function (e) {
                var t = this.running;
                this.countdown = !!e, t && (this.stop(), this.start())
            },
            flip: function (e) {
                this.face.flip(!1, e)
            }
        })
    }(jQuery),
    /**
     * FlipClock.js
     *
     * @author     Justin Kimbrell
     * @copyright  2013 - Objective HTML, LLC
     * @licesnse   http://www.opensource.org/licenses/mit-license.php
     */
    function (e) {
        "use strict";
        FlipClock.List = FlipClock.Base.extend({
            digit: 0,
            classes: {
                active: "flip-clock-active",
                before: "flip-clock-before",
                flip: "flip"
            },
            factory: !1,
            $el: !1,
            $obj: !1,
            items: [],
            lastDigit: 0,
            constructor: function (e, t, i) {
                this.factory = e, this.digit = t, this.lastDigit = t, this.$el = this.createList(), this.$obj = this.$el, t > 0 && this.select(t), this.factory.$el.append(this.$el)
            },
            select: function (e) {
                if (void 0 === e ? e = this.digit : this.digit = e, this.digit != this.lastDigit) {
                    var t = this.$el.find("." + this.classes.before).removeClass(this.classes.before);
                    this.$el.find("." + this.classes.active).removeClass(this.classes.active).addClass(this.classes.before), this.appendListItem(this.classes.active, this.digit), t.remove(), this.lastDigit = this.digit
                }
            },
            play: function () {
                this.$el.addClass(this.factory.classes.play)
            },
            stop: function () {
                var e = this;
                setTimeout((function () {
                    e.$el.removeClass(e.factory.classes.play)
                }), this.factory.timer.interval)
            },
            createListItem: function (e, t) {
                var i = this.factory.size < 40 ? "border-radius: 3px;" : "";
                return ['<li class="' + (e || "") + '" style="line-height: ' + (this.factory.size + 10) + 'px;">', '<a href="javascript: void(0);">', '<div class="up">', '<div class="shadow"></div>', '<div class="inn" style="color: ' + this.factory.color + "; background-color: " + this.factory.bgColor + "; font-size: " + this.factory.size + "px; " + i + '">' + (t || "") + "</div>", "</div>", '<div class="down">', '<div class="shadow"></div>', '<div class="inn" style="color: ' + this.factory.color + "; background-color: " + this.factory.bgColor + "; font-size: " + this.factory.size + "px;" + i + '">' + (t || "") + "</div>", "</div>", "</a>", "</li>"].join("")
            },
            appendListItem: function (e, t) {
                var i = this.createListItem(e, t);
                this.$el.append(i)
            },
            createList: function () {
                var t = this.getPrevDigit() ? this.getPrevDigit() : this.digit;
                return e(['<ul class="' + this.classes.flip + " " + (this.factory.running ? this.factory.classes.play : "") + '" style="width: ' + .8 * this.factory.size + "px; height: " + (this.factory.size + 10) + 'px;">', this.createListItem(this.classes.before, t), this.createListItem(this.classes.active, this.digit), "</ul>"].join(""))
            },
            getNextDigit: function () {
                return 9 == this.digit ? 0 : this.digit + 1
            },
            getPrevDigit: function () {
                return 0 == this.digit ? 9 : this.digit - 1
            }
        })
    }(jQuery),
    /**
     * FlipClock.js
     *
     * @author     Justin Kimbrell
     * @copyright  2013 - Objective HTML, LLC
     * @licesnse   http://www.opensource.org/licenses/mit-license.php
     */
    function (e) {
        "use strict";
        String.prototype.ucfirst = function () {
            return this.substr(0, 1).toUpperCase() + this.substr(1)
        }, e.fn.FlipClock = function (t, i) {
            return new FlipClock(e(this), t, i)
        }, e.fn.flipClock = function (t, i) {
            return e.fn.FlipClock(t, i)
        }
    }(jQuery),
    /**
     * FlipClock.js
     *
     * @author     Justin Kimbrell
     * @copyright  2013 - Objective HTML, LLC
     * @licesnse   http://www.opensource.org/licenses/mit-license.php
     */
    function (e) {
        "use strict";
        FlipClock.Time = FlipClock.Base.extend({
            time: 0,
            factory: !1,
            minimumDigits: 0,
            constructor: function (e, t, i) {
                "object" != typeof i && (i = {}), i.minimumDigits || (i.minimumDigits = e.minimumDigits), this.base(i), this.factory = e, t && (this.time = t)
            },
            convertDigitsToArray: function (e) {
                var t = [];
                e = e.toString();
                for (var i = 0; i < e.length; i++) e[i].match(/^\d*$/g) && t.push(e[i]);
                return t
            },
            digit: function (e) {
                var t = this.toString(),
                    i = t.length;
                return !!t[i - e] && t[i - e]
            },
            digitize: function (t) {
                var i = [];
                if (e.each(t, (function (e, t) {
                    1 == (t = t.toString()).length && (t = "0" + t);
                    for (var n = 0; n < t.length; n++) i.push(t.charAt(n))
                })), i.length > this.minimumDigits && (this.minimumDigits = i.length), this.minimumDigits > i.length)
                    for (var n = i.length; n < this.minimumDigits; n++) i.unshift("0");
                return i
            },
            getDateObject: function () {
                return this.time instanceof Date ? this.time : new Date((new Date).getTime() + 1e3 * this.getTimeSeconds())
            },
            getDayCounter: function (e) {
                var t = [this.getDays(), this.getHours(!0), this.getMinutes(!0)];
                return e && t.push(this.getSeconds(!0)), this.digitize(t)
            },
            getDays: function (e) {
                var t = this.getTimeSeconds() / 60 / 60 / 24;
                return e && (t %= 7), Math.floor(t)
            },
            getHourCounter: function () {
                return this.digitize([this.getHours(), this.getMinutes(!0), this.getSeconds(!0)])
            },
            getHourly: function () {
                return this.getHourCounter()
            },
            getHours: function (e) {
                var t = this.getTimeSeconds() / 60 / 60;
                return e && (t %= 24), Math.floor(t)
            },
            getMilitaryTime: function (e, t) {
                void 0 === t && (t = !0), e || (e = this.getDateObject());
                var i = [e.getHours(), e.getMinutes()];
                return !0 === t && i.push(e.getSeconds()), this.digitize(i)
            },
            getMinutes: function (e) {
                var t = this.getTimeSeconds() / 60;
                return e && (t %= 60), Math.floor(t)
            },
            getMinuteCounter: function () {
                return this.digitize([this.getMinutes(), this.getSeconds(!0)])
            },
            getTimeSeconds: function (e) {
                return e || (e = new Date), this.time instanceof Date ? this.factory.countdown ? Math.max(this.time.getTime() / 1e3 - e.getTime() / 1e3, 0) : e.getTime() / 1e3 - this.time.getTime() / 1e3 : this.time
            },
            getTime: function (e, t) {
                void 0 === t && (t = !0), e || (e = this.getDateObject()), console.log(e);
                var i = e.getHours(),
                    n = [i > 12 ? i - 12 : 0 === i ? 12 : i, e.getMinutes()];
                return !0 === t && n.push(e.getSeconds()), this.digitize(n)
            },
            getSeconds: function (e) {
                var t = this.getTimeSeconds();
                return e && (60 == t ? t = 0 : t %= 60), Math.ceil(t)
            },
            getWeeks: function (e) {
                var t = this.getTimeSeconds() / 60 / 60 / 24 / 7;
                return e && (t %= 52), Math.floor(t)
            },
            removeLeadingZeros: function (t, i) {
                var n = 0,
                    a = [];
                return e.each(i, (function (e, s) {
                    e < t ? n += parseInt(i[e], 10) : a.push(i[e])
                })), 0 === n ? a : i
            },
            addSeconds: function (e) {
                this.time instanceof Date ? this.time.setSeconds(this.time.getSeconds() + e) : this.time += e
            },
            addSecond: function () {
                this.addSeconds(1)
            },
            subSeconds: function (e) {
                this.time instanceof Date ? this.time.setSeconds(this.time.getSeconds() - e) : this.time -= e
            },
            subSecond: function () {
                this.subSeconds(1)
            },
            toString: function () {
                return this.getTimeSeconds().toString()
            }
        })
    }(jQuery),
    /**
     * FlipClock.js
     *
     * @author     Justin Kimbrell
     * @copyright  2013 - Objective HTML, LLC
     * @licesnse   http://www.opensource.org/licenses/mit-license.php
     */
    function (e) {
        "use strict";
        FlipClock.Timer = FlipClock.Base.extend({
            callbacks: {
                destroy: !1,
                create: !1,
                init: !1,
                interval: !1,
                start: !1,
                stop: !1,
                reset: !1
            },
            count: 0,
            factory: !1,
            interval: 1e3,
            animationRate: 1e3,
            constructor: function (e, t) {
                this.base(t), this.factory = e, this.callback(this.callbacks.init), this.callback(this.callbacks.create)
            },
            getElapsed: function () {
                return this.count * this.interval
            },
            getElapsedTime: function () {
                return new Date(this.time + this.getElapsed())
            },
            reset: function (e) {
                clearInterval(this.timer), this.count = 0, this._setInterval(e), this.callback(this.callbacks.reset)
            },
            start: function (e) {
                this.factory.running = !0, this._createTimer(e), this.callback(this.callbacks.start)
            },
            stop: function (e) {
                this.factory.running = !1, this._clearInterval(e), this.callback(this.callbacks.stop), this.callback(e)
            },
            _clearInterval: function () {
                clearInterval(this.timer)
            },
            _createTimer: function (e) {
                this._setInterval(e)
            },
            _destroyTimer: function (e) {
                this._clearInterval(), this.timer = !1, this.callback(e), this.callback(this.callbacks.destroy)
            },
            _interval: function (e) {
                this.callback(this.callbacks.interval), this.callback(e), this.count++
            },
            _setInterval: function (e) {
                var t = this;
                t._interval(e), t.timer = setInterval((function () {
                    t._interval(e)
                }), this.interval)
            }
        })
    }(jQuery),
    function (e) {
        FlipClock.TwentyFourHourClockFace = FlipClock.Face.extend({
            constructor: function (e, t) {
                this.base(e, t)
            },
            build: function (t) {
                var i = this,
                    n = this.factory.$el.find("ul");
                this.factory.time.time || (this.factory.original = new Date, this.factory.time = new FlipClock.Time(this.factory, this.factory.original)), (t = t || this.factory.time.getMilitaryTime(!1, this.showSeconds)).length > n.length && e.each(t, (function (e, t) {
                    i.createList(t)
                })), this.createDivider(), this.createDivider(), e(this.dividers[0]).insertBefore(this.lists[this.lists.length - 2].$el), e(this.dividers[1]).insertBefore(this.lists[this.lists.length - 4].$el), this.base()
            },
            flip: function (e, t) {
                this.autoIncrement(), e = e || this.factory.time.getMilitaryTime(!1, this.showSeconds), this.base(e, t)
            }
        })
    }(jQuery),
    function (e) {
        FlipClock.CounterFace = FlipClock.Face.extend({
            shouldAutoIncrement: !1,
            constructor: function (e, t) {
                "object" != typeof t && (t = {}), e.autoStart = !!t.autoStart, t.autoStart && (this.shouldAutoIncrement = !0), e.increment = function () {
                    e.countdown = !1, e.setTime(e.getTime().getTimeSeconds() + 1)
                }, e.decrement = function () {
                    e.countdown = !0;
                    var t = e.getTime().getTimeSeconds();
                    t > 0 && e.setTime(t - 1)
                }, e.setValue = function (t) {
                    e.setTime(t)
                }, e.setCounter = function (t) {
                    e.setTime(t)
                }, this.base(e, t)
            },
            build: function () {
                var t = this,
                    i = this.factory.$el.find("ul"),
                    n = this.factory.getTime().digitize([this.factory.getTime().time]);
                n.length > i.length && e.each(n, (function (e, i) {
                    t.createList(i).select(i)
                })), e.each(this.lists, (function (e, t) {
                    t.play()
                })), this.base()
            },
            flip: function (e, t) {
                this.shouldAutoIncrement && this.autoIncrement(), e || (e = this.factory.getTime().digitize([this.factory.getTime().time])), this.base(e, t)
            },
            reset: function () {
                this.factory.time = new FlipClock.Time(this.factory, this.factory.original ? Math.round(this.factory.original) : 0), this.flip()
            }
        })
    }(jQuery),
    function (e) {
        FlipClock.DailyCounterFace = FlipClock.Face.extend({
            showSeconds: !0,
            constructor: function (e, t) {
                this.base(e, t)
            },
            build: function (t) {
                var i = this,
                    n = this.factory.$el.find("ul"),
                    a = 0;
                (t = t || this.factory.time.getDayCounter(this.showSeconds)).length > n.length && e.each(t, (function (e, t) {
                    i.createList(t)
                }));
                var s = function (t, i, n) {
                    var a = t.find(".flip-clock-label").detach();
                    t.insertBefore(i);
                    var s = e('<div class="flip-part f-left flex flex-col"></div>'),
                        o = e('<div class="digit-part flex-1"></div>'),
                        r = e('<div class="label-part flex-1"></div>');
                    s.insertBefore(i), o.append(i), o.append(n), r.append(a), s.append(o), s.append(r)
                };
                this.showSeconds ? s(e(this.createDivider("Seconds")), this.lists[this.lists.length - 2].$el, this.lists[this.lists.length - 1].$el) : a = 2, s(e(this.createDivider("Minutes")), this.lists[this.lists.length - 4 + a].$el, this.lists[this.lists.length - 4 + a + 1].$el), s(e(this.createDivider("Hours")), this.lists[this.lists.length - 6 + a].$el, this.lists[this.lists.length - 6 + a + 1].$el), s(e(this.createDivider("Days", !0)), this.lists[0].$el, this.lists[1].$el), this.base()
            },
            flip: function (e, t) {
                e || (e = this.factory.time.getDayCounter(this.showSeconds)), this.autoIncrement(), this.base(e, t)
            }
        })
    }(jQuery),
    function (e) {
        FlipClock.HourlyCounterFace = FlipClock.Face.extend({
            constructor: function (e, t) {
                this.base(e, t)
            },
            build: function (t, i) {
                var n = this,
                    a = this.factory.$el.find("ul");
                (i = i || this.factory.time.getHourCounter()).length > a.length && e.each(i, (function (e, t) {
                    n.createList(t)
                }));
                var s = function (t, i) {
                    var n = t.find(".flip-clock-label").detach();
                    t.insertBefore(i[0]);
                    var a = e('<div class="flip-part f-left flex flex-col"></div>'),
                        s = e('<div class="digit-part flex-1"></div>'),
                        o = e('<div class="label-part flex-1"></div>');
                    a.insertBefore(i[0]);
                    for (var r = 0; r < i.length; ++r) s.append(i[r]);
                    o.append(n), a.append(s), a.append(o)
                };
                if (s(e(this.createDivider("Seconds")), [this.lists[this.lists.length - 2].$el, this.lists[this.lists.length - 1].$el]), s(e(this.createDivider("Minutes")), [this.lists[this.lists.length - 4].$el, this.lists[this.lists.length - 3].$el]), !t) {
                    for (var o = [], r = 0; r < this.lists.length - 4; ++r) o.push(this.lists[r].$el);
                    s(e(this.createDivider("Hours", !0)), o)
                }
                this.base()
            },
            flip: function (e, t) {
                e || (e = this.factory.time.getHourCounter()), this.autoIncrement(), this.base(e, t)
            },
            appendDigitToClock: function (e) {
                this.base(e), this.dividers[0].insertAfter(this.dividers[0].next())
            }
        })
    }(jQuery), jQuery, FlipClock.MinuteCounterFace = FlipClock.HourlyCounterFace.extend({
        clearExcessDigits: !1,
        constructor: function (e, t) {
            this.base(e, t)
        },
        build: function () {
            this.base(!0, this.factory.time.getMinuteCounter())
        },
        flip: function (e, t) {
            e || (e = this.factory.time.getMinuteCounter()), this.base(e, t)
        }
    }),
    function (e) {
        FlipClock.TwelveHourClockFace = FlipClock.TwentyFourHourClockFace.extend({
            meridium: !1,
            meridiumText: "AM",
            build: function () {
                var t = this.factory.time.getTime(!1, this.showSeconds);
                this.base(t), this.meridiumText = this.getMeridium(), this.meridium = e(['<ul class="flip-clock-meridium">', "<li>", '<a href="#">' + this.meridiumText + "</a>", "</li>", "</ul>"].join("")), this.meridium.insertAfter(this.lists[this.lists.length - 1].$el)
            },
            flip: function (e, t) {
                this.meridiumText != this.getMeridium() && (this.meridiumText = this.getMeridium(), this.meridium.find("a").html(this.meridiumText)), this.base(this.factory.time.getTime(!1, this.showSeconds), t)
            },
            getMeridium: function () {
                return (new Date).getHours() >= 12 ? "PM" : "AM"
            },
            isPM: function () {
                return "PM" == this.getMeridium()
            },
            isAM: function () {
                return "AM" == this.getMeridium()
            }
        })
    }(jQuery), jQuery, FlipClock.Lang.Arabic = {
        years: "Ø³Ù†ÙˆØ§Øª",
        months: "Ø´Ù‡ÙˆØ±",
        days: "Ø£ÙŠØ§Ù…",
        hours: "Ø³Ø§Ø¹Ø§Øª",
        minutes: "Ø¯Ù‚Ø§Ø¦Ù‚",
        seconds: "Ø«ÙˆØ§Ù†ÙŠ"
    }, FlipClock.Lang.ar = FlipClock.Lang.Arabic, FlipClock.Lang["ar-ar"] = FlipClock.Lang.Arabic, FlipClock.Lang.arabic = FlipClock.Lang.Arabic, jQuery, FlipClock.Lang.Danish = {
        years: "Ã…r",
        months: "MÃ¥neder",
        days: "Dage",
        hours: "Timer",
        minutes: "Minutter",
        seconds: "Sekunder"
    }, FlipClock.Lang.da = FlipClock.Lang.Danish, FlipClock.Lang["da-dk"] = FlipClock.Lang.Danish, FlipClock.Lang.danish = FlipClock.Lang.Danish, jQuery, FlipClock.Lang.German = {
        years: "Jahre",
        months: "Monate",
        days: "Tage",
        hours: "Stunden",
        minutes: "Minuten",
        seconds: "Sekunden"
    }, FlipClock.Lang.de = FlipClock.Lang.German, FlipClock.Lang["de-de"] = FlipClock.Lang.German, FlipClock.Lang.german = FlipClock.Lang.German, jQuery, FlipClock.Lang.English = {
        years: "Years",
        months: "Months",
        days: "Days",
        hours: "Hours",
        minutes: "Minutes",
        seconds: "Seconds"
    }, FlipClock.Lang.en = FlipClock.Lang.English, FlipClock.Lang["en-us"] = FlipClock.Lang.English, FlipClock.Lang.english = FlipClock.Lang.English, jQuery, FlipClock.Lang.Spanish = {
        years: "AÃ±os",
        months: "Meses",
        days: "DÃ­as",
        hours: "Horas",
        minutes: "Minutos",
        seconds: "Segundos"
    }, FlipClock.Lang.es = FlipClock.Lang.Spanish, FlipClock.Lang["es-es"] = FlipClock.Lang.Spanish, FlipClock.Lang.spanish = FlipClock.Lang.Spanish, jQuery, FlipClock.Lang.Finnish = {
        years: "Vuotta",
        months: "Kuukautta",
        days: "PÃ¤ivÃ¤Ã¤",
        hours: "Tuntia",
        minutes: "Minuuttia",
        seconds: "Sekuntia"
    }, FlipClock.Lang.fi = FlipClock.Lang.Finnish, FlipClock.Lang["fi-fi"] = FlipClock.Lang.Finnish, FlipClock.Lang.finnish = FlipClock.Lang.Finnish, jQuery, FlipClock.Lang.French = {
        years: "Ans",
        months: "Mois",
        days: "Jours",
        hours: "Heures",
        minutes: "Minutes",
        seconds: "Secondes"
    }, FlipClock.Lang.fr = FlipClock.Lang.French, FlipClock.Lang["fr-ca"] = FlipClock.Lang.French, FlipClock.Lang.french = FlipClock.Lang.French, jQuery, FlipClock.Lang.Italian = {
        years: "Anni",
        months: "Mesi",
        days: "Giorni",
        hours: "Ore",
        minutes: "Minuti",
        seconds: "Secondi"
    }, FlipClock.Lang.it = FlipClock.Lang.Italian, FlipClock.Lang["it-it"] = FlipClock.Lang.Italian, FlipClock.Lang.italian = FlipClock.Lang.Italian, jQuery, FlipClock.Lang.Latvian = {
        years: "Gadi",
        months: "MÄ“neÅ¡i",
        days: "Dienas",
        hours: "Stundas",
        minutes: "MinÅ«tes",
        seconds: "Sekundes"
    }, FlipClock.Lang.lv = FlipClock.Lang.Latvian, FlipClock.Lang["lv-lv"] = FlipClock.Lang.Latvian, FlipClock.Lang.latvian = FlipClock.Lang.Latvian, jQuery, FlipClock.Lang.Dutch = {
        years: "Jaren",
        months: "Maanden",
        days: "Dagen",
        hours: "Uren",
        minutes: "Minuten",
        seconds: "Seconden"
    }, FlipClock.Lang.nl = FlipClock.Lang.Dutch, FlipClock.Lang["nl-be"] = FlipClock.Lang.Dutch, FlipClock.Lang.dutch = FlipClock.Lang.Dutch, jQuery, FlipClock.Lang.Norwegian = {
        years: "Ã…r",
        months: "MÃ¥neder",
        days: "Dager",
        hours: "Timer",
        minutes: "Minutter",
        seconds: "Sekunder"
    }, FlipClock.Lang.no = FlipClock.Lang.Norwegian, FlipClock.Lang.nb = FlipClock.Lang.Norwegian, FlipClock.Lang["no-nb"] = FlipClock.Lang.Norwegian, FlipClock.Lang.norwegian = FlipClock.Lang.Norwegian, jQuery, FlipClock.Lang.Portuguese = {
        years: "Anos",
        months: "Meses",
        days: "Dias",
        hours: "Horas",
        minutes: "Minutos",
        seconds: "Segundos"
    }, FlipClock.Lang.pt = FlipClock.Lang.Portuguese, FlipClock.Lang["pt-br"] = FlipClock.Lang.Portuguese, FlipClock.Lang.portuguese = FlipClock.Lang.Portuguese, jQuery, FlipClock.Lang.Russian = {
        years: "Ð»ÐµÑ‚",
        months: "Ð¼ÐµÑÑÑ†ÐµÐ²",
        days: "Ð´Ð½ÐµÐ¹",
        hours: "Ñ‡Ð°ÑÐ¾Ð²",
        minutes: "Ð¼Ð¸Ð½ÑƒÑ‚",
        seconds: "ÑÐµÐºÑƒÐ½Ð´"
    }, FlipClock.Lang.ru = FlipClock.Lang.Russian, FlipClock.Lang["ru-ru"] = FlipClock.Lang.Russian, FlipClock.Lang.russian = FlipClock.Lang.Russian, jQuery, FlipClock.Lang.Swedish = {
        years: "Ã…r",
        months: "MÃ¥nader",
        days: "Dagar",
        hours: "Timmar",
        minutes: "Minuter",
        seconds: "Sekunder"
    }, FlipClock.Lang.sv = FlipClock.Lang.Swedish, FlipClock.Lang["sv-se"] = FlipClock.Lang.Swedish, FlipClock.Lang.swedish = FlipClock.Lang.Swedish, jQuery, FlipClock.Lang.Chinese = {
        years: "å¹´",
        months: "æœˆ",
        days: "æ—¥",
        hours: "æ—¶",
        minutes: "åˆ†",
        seconds: "ç§’"
    }, FlipClock.Lang.zh = FlipClock.Lang.Chinese, FlipClock.Lang["zh-cn"] = FlipClock.Lang.Chinese, FlipClock.Lang.chinese = FlipClock.Lang.Chinese,
    function (e) {
        "use strict";
        "function" == typeof define && define.amd ? define(["jquery", "jquery-ui/sortable"], e) : e(window.jQuery)
    }((function (e) {
        "use strict";

        function t(e, t, i) {
            return e > t && e < t + i
        }
        e.widget("mjs.nestedSortable", e.extend({}, e.ui.sortable.prototype, {
            options: {
                disableParentChange: !1,
                doNotClear: !1,
                expandOnHover: 700,
                isAllowed: function () {
                    return !0
                },
                isTree: !1,
                listType: "ol",
                maxLevels: 0,
                protectRoot: !1,
                rootID: null,
                rtl: !1,
                startCollapsed: !1,
                tabSize: 20,
                branchClass: "mjs-nestedSortable-branch",
                collapsedClass: "mjs-nestedSortable-collapsed",
                disableNestingClass: "mjs-nestedSortable-no-nesting",
                errorClass: "mjs-nestedSortable-error",
                expandedClass: "mjs-nestedSortable-expanded",
                hoveringClass: "mjs-nestedSortable-hovering",
                leafClass: "mjs-nestedSortable-leaf",
                disabledClass: "mjs-nestedSortable-disabled"
            },
            _create: function () {
                var t = this;
                if (this.element.data("ui-sortable", this.element.data("mjs-nestedSortable")), !this.element.is(this.options.listType)) throw "nestedSortable: Please check that the listType option is set to your actual list type", new Error("nestedSortable: Please check that the listType option is set to your actual list type");
                this.options.isTree && this.options.expandOnHover && (this.options.tolerance = "intersect"), e.ui.sortable.prototype._create.apply(this, arguments), this.options.isTree && e(this.items).each((function () {
                    var e = this.item,
                        i = e.hasClass(t.options.collapsedClass),
                        n = e.hasClass(t.options.expandedClass);
                    e.children(t.options.listType).length ? (e.addClass(t.options.branchClass), i || n || (t.options.startCollapsed ? e.addClass(t.options.collapsedClass) : e.addClass(t.options.expandedClass))) : e.addClass(t.options.leafClass)
                }))
            },
            _destroy: function () {
                return this.element.removeData("mjs-nestedSortable").removeData("ui-sortable"), e.ui.sortable.prototype._destroy.apply(this, arguments)
            },
            _mouseDrag: function (t) {
                var i, n, a, s, o, r, l, c, d, p, u, h, f, m, g, v, b = this,
                    y = this.options,
                    w = !1,
                    _ = e(document);
                for (this.position = this._generatePosition(t), this.positionAbs = this._convertPositionTo("absolute"), this.lastPositionAbs || (this.lastPositionAbs = this.positionAbs), this.options.scroll && (this.scrollParent[0] !== document && "HTML" !== this.scrollParent[0].tagName ? (this.overflowOffset.top + this.scrollParent[0].offsetHeight - t.pageY < y.scrollSensitivity ? (w = this.scrollParent.scrollTop() + y.scrollSpeed, this.scrollParent.scrollTop(w)) : t.pageY - this.overflowOffset.top < y.scrollSensitivity && (w = this.scrollParent.scrollTop() - y.scrollSpeed, this.scrollParent.scrollTop(w)), this.overflowOffset.left + this.scrollParent[0].offsetWidth - t.pageX < y.scrollSensitivity ? (w = this.scrollParent.scrollLeft() + y.scrollSpeed, this.scrollParent.scrollLeft(w)) : t.pageX - this.overflowOffset.left < y.scrollSensitivity && (w = this.scrollParent.scrollLeft() - y.scrollSpeed, this.scrollParent.scrollLeft(w))) : (t.pageY - _.scrollTop() < y.scrollSensitivity ? (w = _.scrollTop() - y.scrollSpeed, _.scrollTop(w)) : e(window).height() - (t.pageY - _.scrollTop()) < y.scrollSensitivity && (w = _.scrollTop() + y.scrollSpeed, _.scrollTop(w)), t.pageX - _.scrollLeft() < y.scrollSensitivity ? (w = _.scrollLeft() - y.scrollSpeed, _.scrollLeft(w)) : e(window).width() - (t.pageX - _.scrollLeft()) < y.scrollSensitivity && (w = _.scrollLeft() + y.scrollSpeed, _.scrollLeft(w))), !1 !== w && e.ui.ddmanager && !y.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t)), this.positionAbs = this._convertPositionTo("absolute"), o = this.placeholder.offset().top, this.options.axis && "y" === this.options.axis || (this.helper[0].style.left = this.position.left + "px"), this.options.axis && "x" === this.options.axis || (this.helper[0].style.top = this.position.top + "px"), this.hovering = this.hovering ? this.hovering : null, this.mouseentered = !!this.mouseentered && this.mouseentered, function () {
                    var e = this.placeholder.parent().parent();
                    e && e.closest(".ui-sortable").length && (r = e)
                }.call(this), l = this._getLevel(this.placeholder), c = this._getChildLevels(this.helper), u = document.createElement(y.listType), i = this.items.length - 1; i >= 0; i--)
                    if (n = this.items[i], a = n.item[0], (s = this._intersectsWithPointer(n)) && n.instance === this.currentContainer) {
                        if (-1 !== a.className.indexOf(y.disabledClass))
                            if (2 === s) {
                                if ((d = this.items[i + 1]) && d.item.hasClass(y.disabledClass)) continue
                            } else if (1 === s && (p = this.items[i - 1]) && p.item.hasClass(y.disabledClass)) continue;
                        if (h = 1 === s ? "next" : "prev", !(a === this.currentItem[0] || this.placeholder[h]()[0] === a || e.contains(this.placeholder[0], a) || "semi-dynamic" === this.options.type && e.contains(this.element[0], a))) {
                            if (this.mouseentered || (e(a).mouseenter(), this.mouseentered = !0), y.isTree && e(a).hasClass(y.collapsedClass) && y.expandOnHover && (this.hovering || (e(a).addClass(y.hoveringClass), this.hovering = window.setTimeout((function () {
                                e(a).removeClass(y.collapsedClass).addClass(y.expandedClass), b.refreshPositions(), b._trigger("expand", t, b._uiHash())
                            }), y.expandOnHover))), this.direction = 1 === s ? "down" : "up", "pointer" !== this.options.tolerance && !this._intersectsWithSides(n)) break;
                            e(a).mouseleave(), this.mouseentered = !1, e(a).removeClass(y.hoveringClass), this.hovering && window.clearTimeout(this.hovering), this.hovering = null, !y.protectRoot || this.currentItem[0].parentNode === this.element[0] && a.parentNode !== this.element[0] ? y.protectRoot || this._rearrange(t, n) : this.currentItem[0].parentNode !== this.element[0] && a.parentNode === this.element[0] ? (e(a).children(y.listType).length || (a.appendChild(u), y.isTree && e(a).removeClass(y.leafClass).addClass(y.branchClass + " " + y.expandedClass)), void 0 !== (f = "down" === this.direction ? e(a).prev().children(y.listType) : e(a).children(y.listType))[0] && this._rearrange(t, null, f)) : this._rearrange(t, n), this._clearEmpty(a), this._trigger("change", t, this._uiHash());
                            break
                        }
                    } if (function () {
                        var e = this.placeholder.prev();
                        m = e.length ? e : null
                    }.call(this), null != m)
                    for (;
                        "li" !== m[0].nodeName.toLowerCase() || -1 !== m[0].className.indexOf(y.disabledClass) || m[0] === this.currentItem[0] || m[0] === this.helper[0];) {
                        if (!m[0].previousSibling) {
                            m = null;
                            break
                        }
                        m = e(m[0].previousSibling)
                    }
                if (function () {
                    var e = this.placeholder.next();
                    g = e.length ? e : null
                }.call(this), null != g)
                    for (;
                        "li" !== g[0].nodeName.toLowerCase() || -1 !== g[0].className.indexOf(y.disabledClass) || g[0] === this.currentItem[0] || g[0] === this.helper[0];) {
                        if (!g[0].nextSibling) {
                            g = null;
                            break
                        }
                        g = e(g[0].nextSibling)
                    }
                return this.beyondMaxLevels = 0, null == r || null != g || y.protectRoot && r[0].parentNode == this.element[0] || !(y.rtl && this.positionAbs.left + this.helper.outerWidth() > r.offset().left + r.outerWidth() || !y.rtl && this.positionAbs.left < r.offset().left) ? null == m || m.hasClass(y.disableNestingClass) || !(m.children(y.listType).length && m.children(y.listType).is(":visible") || !m.children(y.listType).length) || y.protectRoot && this.currentItem[0].parentNode === this.element[0] || !(y.rtl && this.positionAbs.left + this.helper.outerWidth() < m.offset().left + m.outerWidth() - y.tabSize || !y.rtl && this.positionAbs.left > m.offset().left + y.tabSize) ? this._isAllowed(r, l, l + c) : (this._isAllowed(m, l, l + c + 1), m.children(y.listType).length || (m[0].appendChild(u), y.isTree && m.removeClass(y.leafClass).addClass(y.branchClass + " " + y.expandedClass)), o && o <= m.offset().top ? m.children(y.listType).prepend(this.placeholder) : m.children(y.listType)[0].appendChild(this.placeholder[0]), void 0 !== r && this._clearEmpty(r[0]), this._trigger("change", t, this._uiHash())) : (r.after(this.placeholder[0]), v = !r.children(y.listItem).children("li:visible:not(.ui-sortable-helper)").length, y.isTree && v && r.removeClass(this.options.branchClass + " " + this.options.expandedClass).addClass(this.options.leafClass), void 0 !== r && this._clearEmpty(r[0]), this._trigger("change", t, this._uiHash())), this._contactContainers(t), e.ui.ddmanager && e.ui.ddmanager.drag(this, t), this._trigger("sort", t, this._uiHash()), this.lastPositionAbs = this.positionAbs, !1
            },
            _mouseStop: function (t) {
                this.beyondMaxLevels && (this.placeholder.removeClass(this.options.errorClass), this.domPosition.prev ? e(this.domPosition.prev).after(this.placeholder) : e(this.domPosition.parent).prepend(this.placeholder), this._trigger("revert", t, this._uiHash())), e("." + this.options.hoveringClass).mouseleave().removeClass(this.options.hoveringClass), this.mouseentered = !1, this.hovering && window.clearTimeout(this.hovering), this.hovering = null, this._relocate_event = t, this._pid_current = e(this.domPosition.parent).parent().attr("id"), this._sort_current = this.domPosition.prev ? e(this.domPosition.prev).next().index() : 0, e.ui.sortable.prototype._mouseStop.apply(this, arguments)
            },
            _intersectsWithSides: function (e) {
                var i = this.options.isTree ? .8 : .5,
                    n = t(this.positionAbs.top + this.offset.click.top, e.top + e.height * i, e.height),
                    a = t(this.positionAbs.top + this.offset.click.top, e.top - e.height * i, e.height),
                    s = t(this.positionAbs.left + this.offset.click.left, e.left + e.width / 2, e.width),
                    o = this._getDragVerticalDirection(),
                    r = this._getDragHorizontalDirection();
                return this.floating && r ? "right" === r && s || "left" === r && !s : o && ("down" === o && n || "up" === o && a)
            },
            _contactContainers: function () {
                this.options.protectRoot && this.currentItem[0].parentNode === this.element[0] || e.ui.sortable.prototype._contactContainers.apply(this, arguments)
            },
            _clear: function () {
                var t, i;
                for (e.ui.sortable.prototype._clear.apply(this, arguments), this._pid_current === this._uiHash().item.parent().parent().attr("id") && this._sort_current === this._uiHash().item.index() || this._trigger("relocate", this._relocate_event, this._uiHash()), t = this.items.length - 1; t >= 0; t--) i = this.items[t].item[0], this._clearEmpty(i)
            },
            serialize: function (t) {
                var i = e.extend({}, this.options, t),
                    n = this._getItemsAsjQuery(i && i.connected),
                    a = [];
                return e(n).each((function () {
                    var t = (e(i.item || this).attr(i.attribute || "id") || "").match(i.expression || /(.+)[-=_](.+)/),
                        n = (e(i.item || this).parent(i.listType).parent(i.items).attr(i.attribute || "id") || "").match(i.expression || /(.+)[-=_](.+)/);
                    t && a.push((i.key || t[1]) + "[" + (i.key && i.expression ? t[1] : t[2]) + "]=" + (n ? i.key && i.expression ? n[1] : n[2] : i.rootID))
                })), !a.length && i.key && a.push(i.key + "="), a.join("&")
            },
            toHierarchy: function (t) {
                var i = e.extend({}, this.options, t),
                    n = [];
                return e(this.element).children(i.items).each((function () {
                    var e = a(this);
                    n.push(e)
                })), n;

                function a(t) {
                    var n, s = (e(t).attr(i.attribute || "id") || "").match(i.expression || /(.+)[-=_](.+)/),
                        o = e(t).data();
                    if (o.nestedSortableItem && delete o.nestedSortableItem, s) return n = {
                        id: s[2]
                    }, n = e.extend({}, n, o), e(t).children(i.listType).children(i.items).length > 0 && (n.children = [], e(t).children(i.listType).children(i.items).each((function () {
                        var e = a(this);
                        n.children.push(e)
                    }))), n
                }
            },
            toArray: function (t) {
                var i = e.extend({}, this.options, t),
                    n = i.startDepthCount || 0,
                    a = [],
                    s = 1;
                return i.excludeRoot || (a.push({
                    item_id: i.rootID,
                    parent_id: null,
                    depth: n,
                    left: s,
                    right: 2 * (e(i.items, this.element).length + 1)
                }), s++), e(this.element).children(i.items).each((function () {
                    s = o(this, n, s)
                })), a = a.sort((function (e, t) {
                    return e.left - t.left
                }));

                function o(t, s, r) {
                    var l, c, d = r + 1;
                    if (e(t).children(i.listType).children(i.items).length > 0 && (s++, e(t).children(i.listType).children(i.items).each((function () {
                        d = o(e(this), s, d)
                    })), s--), l = e(t).attr(i.attribute || "id").match(i.expression || /(.+)[-=_](.+)/), c = s === n ? i.rootID : e(t).parent(i.listType).parent(i.items).attr(i.attribute || "id").match(i.expression || /(.+)[-=_](.+)/)[2], l) {
                        var p = e(t).data("name");
                        a.push({
                            id: l[2],
                            parent_id: c,
                            depth: s,
                            left: r,
                            right: d,
                            name: p
                        })
                    }
                    return r = d + 1
                }
            },
            _clearEmpty: function (t) {
                function i(t, i, n, a) {
                    a && (i = [n, n = i][0]), e(t).removeClass(i).addClass(n)
                }
                var n = this.options,
                    a = e(t).children(n.listType),
                    s = a.is(":not(:empty)"),
                    o = n.doNotClear || s || n.protectRoot && e(t)[0] === this.element[0];
                n.isTree && (i(t, n.branchClass, n.leafClass, o), o && s && i(t, n.collapsedClass, n.expandedClass)), o || a.remove()
            },
            _getLevel: function (e) {
                var t, i = 1;
                if (this.options.listType)
                    for (t = e.closest(this.options.listType); t && t.length > 0 && !t.is(".ui-sortable");) i++, t = t.parent().closest(this.options.listType);
                return i
            },
            _getChildLevels: function (t, i) {
                var n = this,
                    a = this.options,
                    s = 0;
                return i = i || 0, e(t).children(a.listType).children(a.items).each((function (e, t) {
                    s = Math.max(n._getChildLevels(t, i + 1), s)
                })), i ? s + 1 : s
            },
            _isAllowed: function (e, t, i) {
                var n = this.options,
                    a = this.placeholder.closest(".ui-sortable").nestedSortable("option", "maxLevels"),
                    s = this.currentItem.parent().parent();
                n.disableParentChange && (void 0 !== e && !s.is(e) || void 0 === e && s.is("li")) || !n.isAllowed(this.placeholder, e, this.currentItem) ? (this.placeholder.addClass(n.errorClass), this.beyondMaxLevels = a < i && 0 !== a ? i - a : 1) : a < i && 0 !== a ? (this.placeholder.addClass(n.errorClass), this.beyondMaxLevels = i - a) : (this.placeholder.removeClass(n.errorClass), this.beyondMaxLevels = 0)
            }
        })), e.mjs.nestedSortable.prototype.options = e.extend({}, e.ui.sortable.prototype.options, e.mjs.nestedSortable.prototype.options)
    }));
var UITools = {
    showEmptyCanvasMessage: function (e) {
        e.clearRect(0, 0, e.canvas.width, e.canvas.height), e.textAlign = "center", e.textBaseline = "middle";
        var t = new Image;
        t.onload = function () {
            var i = e.canvas,
                n = i.width / t.width,
                a = i.height / t.height,
                s = Math.min(n, a);
            s = Math.min(1, s);
            var o = (i.width - t.width * s) / 2,
                r = (i.height - t.height * s) / 2;
            e.clearRect(0, 0, i.width, i.height), e.drawImage(t, 0, 0, t.width, t.height, o, r, t.width * s, t.height * s)
        }, t.src = resources + "/images/no-data.png?v=2"
    },
    loadStylesheet: function (e, t) {
        var i = dummy,
            n = 0;
        t && (i = function () {
            --n <= 0 && (Tools.delay(500, (function () {
                $window.resize()
            })), CPanel.hideLoadingBar(t), CPanel.triggerViewportChange())
        });
        var a = (window.inTestEnvironment ? "" : ".min") + ".css?v=" + resourcesVersion,
            s = resources + "/t/" + Website.templateName + "/css/trunk" + a,
            o = resources + "/t/" + Website.templateName + "/css/trunk-1024" + a,
            r = resources + "/t/" + Website.templateName + "/css/trunk-768" + a,
            l = resources + "/t/" + Website.templateName + "/css/trunk-480" + a,
            c = $("#style-480"),
            d = $("#style-768"),
            p = $("#style-1024"),
            u = $("#style-main");
        0 === u.length ? (++n, (u = $('<link rel="stylesheet" id="style-main" type="text/css" href=' + s + " />")).one("load", i), $head.append(u)) : u[0].disabled = !1, 0 === p.length && (++n, (p = $('<link rel="stylesheet" id="style-1024" type="text/css" href=' + o + " disabled />")).one("load", i), $head.append(p), ++n, (d = $('<link rel="stylesheet" id="style-768" type="text/css" href=' + r + " disabled />")).one("load", i), $head.append(d)), 0 === c.length && (++n, (c = $('<link rel="stylesheet" id="style-480" type="text/css" href=' + l + " disabled />")).one("load", i), $head.append(c)), "desktop" === e ? (p[0].disabled = !0, d[0].disabled = !0, c[0].disabled = !0) : "tablet" === e ? (p[0].disabled = !1, d[0].disabled = !1, c[0].disabled = !0) : (p[0].disabled = !1, d[0].disabled = !1, c[0].disabled = !1), 0 === n && i()
    },
    changeViewport: function (e, t, i) {
        if (e !== t.hook.currentView) {
            var n = function (n) {
                if (n) t.hook.currentView = e, i(t);
                else {
                    var a = e || "desktop",
                        s = t.hook.contentWrapper.width();
                    if (s < 1024 && "desktop" === a) return void CPanel.showError(M.ERR_DESKTOP_VIEW);
                    if (s < 840 && "tablet" === a) return void CPanel.showError(M.ERR_TABLET_VIEW);
                    t.hook.currentView !== a && ($window.scrollTop(0), CPanel.showLoadingBar("stylesheetChangeLoadingBar", $("#website"), (function () {
                        t.hook.loadStylesheet(e, "stylesheetChangeLoadingBar")
                    }), !0))
                }
            };
            "desktop" === e || "desktop" === t.hook.currentView ? CPanel.checkIfNeedsSave(n) : n(!1)
        }
    },
    showNewPagePopup: function (e, t) {
        e = e || {};
        var i = function (i) {
            var n = [];
            Tools.showWindow({
                isModal: !0,
                title: M.ADD_NEW_PAGE,
                icon: Popup.ICON_ADD,
                width: 495,
                markup: Templates.get("addPageDialogMarkup"),
                action: {
                    onShow: function (t, a) {
                        e.funnel && $("#addPageGroupWrapper").hide();
                        var s = a.find('select[name="dpSelect"]').empty(),
                            o = "";
                        if ("predefined" === i.type) o += '<option value="predefined|' + i.id + '">' + i.category + " " + M.TEMPLATE + "</option>";
                        else {
                            for (var r = !1, l = 0; l < Website.pageGroups.length; ++l)
                                for (var c = Website.pageGroups[l], d = 0; d < c.pages.length; ++d) {
                                    var p = c.pages[d];
                                    r || (o += '<optgroup label="' + M.MY_PAGES + '">', r = !0), o += '<option value="page|' + p.id + '">' + p.name + "</option>"
                                }
                            r && (o += "</optgroup>"), o += '<optgroup label="' + M.OTHER_PAGES + '">', o += '<option value="other|-1"' + ("empty" === i.type ? " selected" : "") + ">" + M.BLANK_PAGE + "</option>", o += "</optgroup>"
                        }
                        if (s.append(o), e.funnel) $("#addPageGroupWrapper").hide();
                        else {
                            var u = a.find('select[name="grSelect"]').empty();
                            for (l = 0; l < Website.pageGroups.length; ++l) {
                                c = Website.pageGroups[l];
                                $("<option />").html(c.name).val(c.id).appendTo(u)
                            }
                        }
                        var h = a.find('input[name="pageUrl"]');
                        a.find('input[name="pageName"]').keyup((function () {
                            h.val(Tools.urlFromString(this.value.trim(), !0))
                        })), h.blur((function () {
                            var e = h.val().trim();
                            h.val(Tools.urlFromString(e, !1, !1))
                        })), a.find('[name="pageAccess"]').change((function () {
                            var e = $(this).val();
                            "password" === e ? (a.find(".pageMembers").slideUp("fast"), a.find(".pagePassword").slideDown("fast")) : "members" === e ? (a.find(".pagePassword").slideUp("fast"), a.find(".pageMembers").slideDown("fast")) : (a.find(".pagePassword").slideUp("fast"), a.find(".pageMembers").slideUp("fast"))
                        })), a.find(".pageMembers").find("a").click((function () {
                            Tools.chooseMultiple({
                                title: M.SELECT_MEMBER_GROUPS,
                                message: M.SELECT_MEMBER_GROUPS_DESC,
                                noItemsMessage: M.NO_MEMBER_GROUPS,
                                items: Website.memberGroups,
                                selectedItems: n,
                                isModal: !0,
                                getItemId: function (e) {
                                    return e.id
                                },
                                getItemText: function (e) {
                                    return e.name
                                },
                                onSelect: function (e) {
                                    n = e
                                }
                            })
                        })), Tools.installSEOTitleLengthChecker(a.find('input[name="pageTitle"]')), Tools.installSEODescriptionLengthChecker(a.find('textarea[name="description"]'))
                    }
                },
                buttons: [Button(M.ADD, Button.CLASS_MIDDLE_BLUE, (function (e, i) {
                    var a = i.find('input[name="pageName"]').val(),
                        s = i.find('input[name="pageUrl"]').val(),
                        o = i.find('select[name="dpSelect"]').val(),
                        r = parse(i.find('select[name="grSelect"]').val(), -1),
                        l = i.find('input[name="pageTitle"]').val(),
                        c = i.find('textarea[name="description"]').val(),
                        d = i.find('[name="isPublic"]').is(":checked"),
                        p = i.find('[name="useSecondaryHeader"]').is(":checked") ? 1 : 0,
                        u = i.find('[name="pageAccess"]').val(),
                        h = i.find('[name="pagePassword"]').val();
                    if ("" !== a && "" !== s) {
                        var f = null;
                        o.startsWith("predefined|") && (f = {
                            footer: {
                                visible: !!WebPlatform.hideNewTemplatePageFooter
                            }
                        }), t({
                            name: a,
                            url: s,
                            page: o,
                            group: r,
                            title: l,
                            description: c,
                            isPublic: d,
                            headerType: p,
                            securityType: u,
                            password: h,
                            selectedGroups: n,
                            meta: f
                        }, (function () {
                            e.close()
                        }))
                    } else CPanel.showError(M.ERR_EMPTY_NAME_URL)
                })), Button.MIDDLE_CANCEL]
            })
        };
        Tools.showWindow({
            isModal: !1,
            title: "",
            width: .9 * $window.width(),
            height: "90%",
            withDarkBackground: !0,
            showCloseButton: !0,
            customClass: "new-page-templates-popup",
            markup: Templates.get("addPageTemplates"),
            action: {
                onShow: function (n, a) {
                    Website.loadPageTemplates((function (s) {
                        var o = "da_JK" === window.userLocale ? "da" : userLocale;
                        "zh_JO" === window.userLocale && (o = "zh");
                        for (var r = null, l = a.find(".content-wrapper"), c = a.find(".categories-wrapper ul"), d = -1, p = "", u = 0; u < s.length; ++u) {
                            var h = s[u].name || {},
                                f = "White Label Growth" === (h.en || "").trim(),
                                m = "White Label Pro" === (h.en || "").trim(),
                                g = (h.en || "").toLowerCase().indexOf("upsell") > -1;
                            !e.showUpsells && g || (!f || window.enableAdvancedWidgets && "LOW" !== resellerType) && (!m || window.enableAdvancedWidgets && window.proTemplatesEnabled) && (p += '<li data-idx="' + u + '"><a>' + escapeHtml(h[o] || h.en || "-") + "</a></li>", d < 0 && (d = u), e.showUpsells && g && (d = u))
                        }
                        e.selectTemplateOnly || (p += '<li><a data-action="existing" class="highlighted-list-item">' + M.EXISTING_PAGE + "</a></li>"), p += '<li><a data-action="empty" class="highlighted-list-item">' + M.EMPTY_PAGE + "</a></li>", c.html(p);
                        var v = function (e) {
                            for (var t = "", i = s[e].items, n = 0; n < i.length; ++n) t += format(Templates.get("pageTemplateItemMarkup"), "id", i[n].id, "thumb", i[n].image);
                            l.html(t), c.find(".active").removeClass("active"), c.find('li[data-idx="' + e + '"]').addClass("active");
                            var a = s[e].name;
                            r = escapeHtml(a[o] || a.en || "-")
                        };
                        c.on("click", "a", (function () {
                            var a = $(this),
                                s = a.closest("li");
                            if (!s.hasClass("active")) {
                                var o = a.data("action");
                                if ("empty" === o || "existing" === o) return e.selectTemplateOnly ? t("other|-1", dummy) : i({
                                    type: o
                                }), void n.close();
                                v(s.data("idx"))
                            }
                        })), d > -1 && v(d), l.on("click", "a, .page-thumb", (function () {
                            var a = $(this),
                                s = a.data("action"),
                                o = a.closest(".page-wrapper").data("id");
                            "select" === s ? (n.close(), e.selectTemplateOnly ? t("predefined|" + o, dummy) : i({
                                type: "predefined",
                                id: o,
                                category: r
                            })) : Tools.showWebsitePreviewPopup({
                                url: "//" + userDomain + "/_preview?type=page&id=" + o,
                                buttonText: M.SELECT,
                                onButtonAction: function () {
                                    n.close(), e.selectTemplateOnly ? t("predefined|" + o, dummy) : i({
                                        type: "predefined",
                                        id: o,
                                        category: r
                                    })
                                }
                            })
                        }))
                    }))
                }
            }
        })
    },
    showNewPopupDialog: function (e) {
        var t;
        isFunction(e) ? (t = e, e = {}) : t = (e = e || {}).onPopupSelected || dummy, Tools.showWindow({
            isModal: !1,
            title: "",
            width: .9 * $window.width(),
            height: "90%",
            withDarkBackground: !0,
            showCloseButton: !0,
            customClass: "new-page-templates-popup new-popup-templates-popup",
            markup: Templates.get("addPopupTemplates"),
            action: {
                onShow: function (i, n) {
                    Website.getTemplatePopups((function (a) {
                        var s = "da_JK" === window.userLocale ? "da" : userLocale;
                        "zh_JO" === window.userLocale && (s = "zh");
                        for (var o = n.find(".popup-templates-inner-wrapper"), r = n.find(".categories-wrapper ul"), l = "", c = 0, d = 0; d < a.length; ++d) {
                            var p = a[d].name || {},
                                u = (p.en || "").toLowerCase().indexOf("upsell") > -1;
                            !e.showUpsells && u || (l += '<li data-idx="' + d + '"><a>' + escapeHtml(p[s] || p.en || "-") + "</a></li>", e.showUpsells && u && (c = d))
                        }
                        l += '<li><a data-action="empty" class="highlighted-list-item">' + M.EMPTY_POPUP + "</a></li>", r.html(l);
                        var h = function (e) {
                            if (!(a.length <= e)) {
                                for (var t = ["", "", ""], i = a[e].items, n = 0; n < i.length; ++n) t[n % 3] += format(Templates.get("popupTemplateItemMarkup"), "id", i[n].id, "thumb", i[n].image);
                                var s = "";
                                t.forEach((function (e) {
                                    s += '<div class="vertical-column">' + e + "</div>"
                                })), o.html(s), r.find(".active").removeClass("active"), r.find('li[data-idx="' + e + '"]').addClass("active")
                            }
                        };
                        r.on("click", "a", (function () {
                            var e = $(this),
                                n = e.closest("li");
                            if (!n.hasClass("active")) {
                                if ("empty" === e.data("action")) return i.close(), void t("-1");
                                h(n.data("idx"))
                            }
                        })), h(c), o.on("click", ".page-thumb", (function () {
                            var e = $(this).closest(".page-wrapper").data("id");
                            i.close(), t(e)
                        }))
                    }))
                }
            }
        })
    },
    showNewBlockDialog: function (e) {
        Tools.showWindow({
            isModal: !1,
            noTitle: !0,
            width: .9 * $window.width(),
            height: "90%",
            withDarkBackground: !0,
            showCloseButton: !0,
            customClass: "new-page-templates-popup new-popup-templates-popup",
            markup: Templates.get("addBlockDialogMarkup"),
            action: {
                onShow: function (t, i) {
                    Website.getTemplateBlocks((function (n) {
                        var a = "da_JK" === window.userLocale ? "da" : userLocale;
                        "zh_JO" === window.userLocale && (a = "zh");
                        for (var s = i.find(".popup-templates-inner-wrapper"), o = i.find(".categories-wrapper ul"), r = "", l = 0; l < n.length; ++l) {
                            var c = n[l].name || {};
                            r += "<li><a>" + escapeHtml(c[a] || c.en || "-") + "</a></li>"
                        }
                        r += '<li><a data-action="empty" class="highlighted-list-item">' + M.EMPTY_BLOCK + "</a></li>", o.html(r);
                        var d = function (e) {
                            if (!(n.length <= e)) {
                                for (var t = ["", "", ""], i = n[e].items, a = 0; a < i.length; ++a) t[a % 3] += format(Templates.get("blockTemplateItemMarkup"), "id", i[a].id, "thumb", i[a].image);
                                var r = "";
                                t.forEach((function (e) {
                                    r += '<div class="vertical-column">' + e + "</div>"
                                })), s.html(r), o.find(".active").removeClass("active"), o.find("li").eq(e).addClass("active")
                            }
                        };
                        o.on("click", "a", (function () {
                            var i = $(this),
                                n = i.closest("li");
                            if (!n.hasClass("active")) {
                                if ("empty" === i.data("action")) return t.close(), void e("-1");
                                d(n.index())
                            }
                        })), d(0), s.on("click", ".page-thumb", (function () {
                            var i = $(this).closest(".page-wrapper").data("id");
                            t.close(), e(i)
                        }))
                    }))
                }
            }
        })
    },
    showPageSettingsDialog: function (e) {
        var t = [],
            i = !!e.funnelId,
            n = e.page,
            a = null === n.security ? "public" : isUndefined(n.security.passwordHash) ? "members" : "password",
            s = null === n.security || isUndefined(n.security.passwordHash) ? "" : "__MASKED__",
            o = [],
            r = null;
        if (null !== n.security && $.isArray(n.security.memberGroups))
            for (var l = 0; l < n.security.memberGroups.length; ++l) {
                var c = Website.getMemberGroupById(n.security.memberGroups[l]);
                null !== c && o.push(c)
            }
        i || Website.isHomepage(n.id, !1) || t.push(Button(M.SET_AS_HOMEPAGE, Button.CLASS_MIDDLE_BLUE, (function (t, i) {
            Tools.prompt(M.SET_AS_HOMEPAGE, M.SET_AS_HOMEPAGE_CONFIRM, (function () {
                Website.setHomepage(n, !1, (function () {
                    (e.onSetAsHomepage || dummy)(), $("#setHomePageButton").fadeOut("fast")
                }))
            }))
        }), Button.FLOAT_LEFT, "setHomePageButton")), t.push(Button(M.SAVE, Button.CLASS_MIDDLE_BLUE, (function (t, i) {
            var a = i.find('input[name="pageName"]').val(),
                s = i.find('input[name="pageUrl"]').val(),
                l = i.find('input[name="pageTitle"]').val(),
                c = i.find('select[name="grSelect"]').val(),
                d = i.find('textarea[name="description"]').val(),
                p = i.find('[name="useSecondaryHeader"]').is(":checked") ? 1 : 0,
                u = i.find('[name="isPublic"]').is(":checked"),
                h = i.find('[name="pageAccess"]').val(),
                f = i.find('[name="pagePassword"]').val();
            "" !== l && "" !== s ? Website.updatePage({
                page: n,
                pageId: n.id,
                name: a,
                link: s,
                title: l,
                group: c,
                description: d,
                isPublic: u,
                headerType: p,
                securityType: h,
                securityPassword: f,
                securityGroups: o,
                meta: r,
                funnelId: e.funnelId,
                funnelStepId: e.funnelStepId,
                onSuccess: function (i, n) {
                    (e.onUpdated || dummy)(i, n), t.close()
                }
            }) : CPanel.showError(M.ERR_EMPTY_NAME_URL)
        }))), t.push(Button.MIDDLE_CANCEL), Tools.showWindow({
            isModal: !0,
            title: M.EDIT_PAGE_TITLE,
            icon: Popup.ICON_EDIT,
            width: 495,
            selectedSlide: e.tab || 0,
            markup: Templates.get("editPageDialogMarkup"),
            action: {
                onShow: function (e, t) {
                    i || Tools.makeWebsiteRequest({
                        action: "getPageMeta",
                        data: {
                            url: "/" + n.link
                        },
                        onOk: function (e) {
                            $("#shareImageWrapper").removeClass("none"), r = e.data || {};
                            var i = t.find(".add-image");
                            t.on("click", ".add-image", (function () {
                                var e = $(this);
                                FileManager.selectFile({
                                    onCompleteCallback: function (t, i) {
                                        e.find(".add-button").removeClass("add-button").addClass("remove-button"), e.css({
                                            backgroundImage: "url(" + getThumbnailsFromBase(t, "160x120") + i + ")"
                                        }), r.share = {
                                            base: t,
                                            image: i
                                        }
                                    }
                                })
                            })), t.on("click", ".remove-button", (function (e) {
                                e.stopPropagation(), e.preventDefault();
                                var t = $(this).closest(".add-image");
                                t.css({
                                    backgroundImage: "url(" + resources + "/images/image-avatar.png)"
                                }), r.share = null, t.find(".remove-button").removeClass("remove-button").addClass("add-button")
                            })), r.share && (i.css({
                                backgroundImage: "url(" + getThumbnailsFromBase(r.share.base, "160x120") + r.share.image + ")"
                            }), i.find(".add-button").removeClass("add-button").addClass("remove-button"))
                        }
                    });
                    var l = t.find('input[name="pageUrl"]'),
                        c = t.find('input[name="pageName"]'),
                        d = t.find('input[name="isPublic"]'),
                        p = t.find('select[name="grSelect"]').empty();
                    if (c.val(Tools.unescape(n.name)), l.val(Tools.unescape(n.link)), d.prop("checked", n.isPublic), i) p.hide();
                    else {
                        for (var u = 0; u < Website.pageGroups.length; ++u) {
                            var h = Website.pageGroups[u];
                            $("<option />").html(h.name).val(h.id).appendTo(p)
                        }
                        null !== (h = Website.getGroupByPageId(n.id)) && p.val(h.id), n.id > 0 && p.closest(".page-group-wrapper").removeClass("none")
                    }
                    l.blur((function () {
                        var e = l.val().trim();
                        l.val(Tools.urlFromString(e, !1, !1))
                    })), Tools.installSEOTitleLengthChecker(t.find('input[name="pageTitle"]').val(Tools.unescape(n.title))), Tools.installSEODescriptionLengthChecker(t.find('textarea[name="description"]').val(Tools.unescape(n.description))), t.find('[name="useSecondaryHeader"]').prop("checked", 0 !== n.headerType), t.find('[name="pagePassword"]').val(s), t.find('[name="pageAccess"]').val(a).change((function () {
                        var e = $(this).val();
                        "password" === e ? (t.find(".pageMembers").slideUp("fast"), t.find(".pagePassword").slideDown("fast")) : "members" === e ? (t.find(".pagePassword").slideUp("fast"), t.find(".pageMembers").slideDown("fast")) : (t.find(".pagePassword").slideUp("fast"), t.find(".pageMembers").slideUp("fast"))
                    })).change(), t.find(".pageMembers").find("a").click((function () {
                        Tools.chooseMultiple({
                            title: M.SELECT_MEMBER_GROUPS,
                            message: M.SELECT_MEMBER_GROUPS_DESC,
                            noItemsMessage: M.NO_MEMBER_GROUPS,
                            items: Website.memberGroups,
                            selectedItems: o,
                            getItemId: function (e) {
                                return e.id
                            },
                            getItemText: function (e) {
                                return e.name
                            },
                            isModal: !0,
                            onSelect: function (e) {
                                o = e
                            }
                        })
                    }));
                    let f = Website.getActiveBuilderPage();
                    if (f && f.id === n.id) {
                        let e = t.find('[data-role="seoSuggestionBtn"]');
                        e.removeClass("none").click((() => {
                            e.addClass("loading");
                            let i = $("#website .grid-row");
                            i.length || (i = $(".grid-row"));
                            let n = UITools.getTextWidgetsContent(i);
                            Tools.makeAiTextSuggestion({
                                type: "PAGE_SEO",
                                elementType: "paragraph",
                                topic: Website.websiteTitle,
                                prompt: n,
                                onComplete: i => {
                                    if (!t) return;
                                    let n = t.find('input[name="pageTitle"]'),
                                        a = t.find('textarea[name="description"]');
                                    n.length && a.length && (e.removeClass("loading"), i.labels && i.labels.title && (n.val(i.labels.title), n.keyup()), i.labels && i.labels.description && (a.val(i.labels.description), a.keyup()))
                                },
                                onError: () => {
                                    e.removeClass("loading")
                                }
                            })
                        }))
                    }
                    t.find('[data-role="text-assist"]').click((e => {
                        let i = $(e.target).closest("a").data("target"),
                            n = t.find('[name="' + i + '"]'),
                            a = n.val();
                        WebComponents.Common.showAiTextCompletionOptions(e.target, {
                            elementType: "description" === i ? "paragraph" : "heading",
                            phrase: a,
                            onComplete: e => {
                                n.val(e), n.keyup()
                            }
                        })
                    }))
                }
            },
            buttons: t
        })
    },
    getTextWidgetsContent: e => {
        let t = ["TextWidget", "HeadingWidget", "IconSection"],
            i = "";
        return e.find(".widget").filter(((e, i) => {
            let n = $(i).data("type");
            return t.indexOf(n) > -1
        })).map(((e, t) => {
            let n = Tools.getTextEditorValue($(t));
            n && (n = $(n).text()), n && ("" !== i && (i += "\n"), i += n)
        })), i
    },
    connectThirdPartyDomain: function (e, t, i) {
        (e = (e = $.trim(e.toLowerCase().replace(/((http:\/\/)|(https:\/\/)|(ftp:\/\/))?(www\.)?/gi, ""))).split("/")[0]).length > 500 && (e = e.substr(0, 500)), "" === e || e.indexOf(".") < 1 ? Tools.showError(M.ERR_INVALID_DOMAIN) : Tools.makeWebsiteRequest({
            action: "addWebsiteDomain",
            data: {
                domain: e,
                funnelId: t
            },
            onOk: function (t) {
                (i || dummy)(e)
            }
        })
    },
    showDomainInformation: function (e, t) {
        var i = t.find('[data-role="information"]');
        if (i.is(":visible")) i.slideUp("fast");
        else {
            var n = function (e, i) {
                i ? t.removeClass("not-verified").addClass("verified") : t.removeClass("verified").addClass("not-verified"), t.find(".domain-message").html(i ? M.DOMAIN_OK_MESSAGE : M.DOMAIN_ERROR_MESSAGE), CPanel.hideLoadingBar(e)
            };
            i.slideDown("fast"), CPanel.showLoadingBar(e, t, (function () {
                var t = (new Date).getTime();
                Tools.makeWebsiteRequest({
                    action: "verifyDomain",
                    data: {
                        domain: e,
                        r: t
                    },
                    onOk: function (t) {
                        n(e, t.data)
                    },
                    onNotOk: function (t) {
                        n(e, !1)
                    }
                })
            }), !0)
        }
    },
    showPopupVideo: function (e, t) {
        if (e) {
            t = t || 1.59838380897;
            var i = .7 * $window.height(),
                n = i * t,
                a = .9 * $window.width();
            a < n && (i = (n = a) / t), Tools.showWindow({
                title: "",
                width: n,
                height: i,
                overflowY: "hidden",
                markup: format(Templates.get("videoStructure"), "videosource", e),
                customClass: "video-modal",
                action: {
                    onShow: function (e, t) {
                        t.find(".cpanel-popup-content").css({
                            maxHeight: "none",
                            height: "100%"
                        }), t.find(".cpanel-popup-title").hide(), t.find(".cpanel-popup-nav").hide()
                    },
                    onHide: function () { }
                }
            })
        }
    },
    renderPaginationMarkup: function (e, t) {
        var i = "<ul>";
        return e > 0 && (e > 1 && (i += '<li><a data-page="' + (e - 1) + '"><i class="fa fa-angle-left"></i></a></li>'), i += '<li><a data-page="' + (e - 1) + '">' + e + "</a></li>"), i += '<li><a class="active" data-page="' + e + '">' + (e + 1) + "</a></li>", e + 1 < t && (i += '<li><a data-page="' + (e + 1) + '">' + (e + 2) + "</a></li>", e + 2 < t && (i += '<li><a data-page="' + (e + 1) + '"><i class="fa fa-angle-right"></i></a></li>')), i += "</ul>"
    },
    selectExistingFunnel: function (e) {
        Tools.showWindow({
            isModal: !1,
            title: M.FUNNEL_SELECT_TITLE,
            width: 450,
            markup: Templates.get("movePageToFunnelWindow"),
            action: {
                onShow: function (e, t) {
                    var i = t.find("select");
                    Tools.makeWebsiteRequest({
                        action: "listFunnels",
                        onOk: function (e) {
                            var t = e.data,
                                n = "";
                            t.forEach((function (e) {
                                var t = e.first,
                                    i = e.second;
                                "FUNNEL" === t.type ? n += '<option value="' + t.id + '|0">' + t.name + "</option>" : (n += '<optgroup label="' + M.WEBSITE + " - " + t.name + '">', i.forEach((function (e) {
                                    var i = e.first,
                                        a = e.second;
                                    n += '<option value="' + t.id + "|" + i + '">' + escapeHtml(a) + "</option>"
                                })), n += "</optgroup>")
                            })), i.empty().append(n)
                        }
                    })
                }
            },
            buttons: [Button(M.MOVE, Button.CLASS_MIDDLE_BLUE, (function (t, i) {
                var n = i.find("select").val().trim();
                if (t.close(), "" !== n) {
                    var a = n.split("|"),
                        s = WebPlatform.parse(a[0]),
                        o = WebPlatform.parse(a[1]);
                    (e || dummy)(s, o)
                }
            })), Button.MIDDLE_CANCEL]
        })
    },
    getShadowValue: function (e) {
        return e ? "none" === e.type ? "" : "box-shadow: " + e.x + "px " + e.y + "px " + e.blur + "px " + e.spread + "px " + GlobalStyling.getColorFromClass(e.colorClass, e.color) + " " + e.type + ";" : ""
    },
    buildShadow: function (e) {
        return e ? "none" === e.type ? "none" : e.x + "px " + e.y + "px " + e.blur + "px " + e.spread + "px " + GlobalStyling.getColorFromClass(e.colorClass, e.color) + " " + e.type : "none"
    },
    selectShadow: function (e, t, i) {
        e = e || {
            type: "none"
        }, Tools.showWindow({
            isModal: !1,
            title: M.SHADOW,
            width: 450,
            markup: '         <div class="popup-widget-wrapper">           <div class="input-wrapper">             <h5>' + M.SHADOW_TYPE + '</h5>             <select class="button-size-select" name="type">               <option value="none">' + M.NO_SHADOW + '</option>               <option value="">' + M.OUTER_SHADOW + '</option>               <option value="inset">' + M.INNER_SHADOW + '</option>             </select>           </div>           <div class="col20 f-left" id="settingsWrapper">             <div class="popup-input-wrapper">               <div class="input-wrapper color-pick-wrap-widgets">                 <div class="color-pick-wrap">                   <div></div>                   <input type="text" value="" class="colorpicker-selected" name="color">                 </div>                 <div class="info">                   <h5>' + M.SHADOW_COLOR + '</h5>                 </div>               </div>             </div>             <div class="popup-input-wrapper input-slider-wrapper" >               <h5 class="inline">' + M.HORIZONTAL_OFFSET + '</h5>              <div id="xSlider"></div>               <input type="text" readonly="readonly" class="slider-val">             </div>             <div class="popup-input-wrapper input-slider-wrapper" >               <h5 class="inline">' + M.VERTICAL_OFFSET + '</h5>              <div id="ySlider"></div>               <input type="text" readonly="readonly" class="slider-val">             </div>             <div class="popup-input-wrapper input-slider-wrapper" >               <h5 class="inline">' + M.BLUR_RADIUS + '</h5>              <div id="blurSlider"></div>               <input type="text" readonly="readonly" class="slider-val">             </div>             <div class="popup-input-wrapper input-slider-wrapper mb-15" >               <h5 class="inline">' + M.SPREAD_RADIUS + '</h5>              <div id="spreadSlider"></div>               <input type="text" readonly="readonly" class="slider-val">             </div>           </div>         </div>',
            action: {
                onShow: function (n, a) {
                    mergeUnique(e, {
                        x: 0,
                        y: 0,
                        blur: 25,
                        spread: 0,
                        color: "rgba(170, 170, 170, 0.25)",
                        colorClass: ""
                    }), -1 === ["none", "", "inset"].indexOf(e.type) && (e.type = "none");
                    var s = function () {
                        a.find("#settingsWrapper")["none" === e.type ? "addClass" : "removeClass"]("none")
                    },
                        o = function () {
                            var n = UITools.buildShadow(e);
                            t.css("box-shadow", n), i("none" === e.type ? {
                                type: "none"
                            } : e, n)
                        },
                        r = a.find('[name="color"]'),
                        l = GlobalStyling.getColorFromClass(e.colorClass, e.color);
                    Tools.addColorPicker(l, r.prev(), r, (function (t, i) {
                        e.color = t, e.colorClass = i, o()
                    }));
                    n.bindObject("data", e, [{
                        property: "type"
                    }], (function () {
                        s(), o()
                    })), Tools.addSlider({
                        min: -60,
                        max: 60,
                        step: 1,
                        value: e.x || 0,
                        updatedViewSuffix: "px",
                        element: $("#xSlider"),
                        onChange: function (t) {
                            e.x = t, o()
                        }
                    }), Tools.addSlider({
                        min: -60,
                        max: 60,
                        step: 1,
                        value: e.y || 0,
                        updatedViewSuffix: "px",
                        element: $("#ySlider"),
                        onChange: function (t) {
                            e.y = t, o()
                        }
                    }), Tools.addSlider({
                        min: 0,
                        max: 200,
                        step: 1,
                        value: e.blur || 20,
                        updatedViewSuffix: "px",
                        element: $("#blurSlider"),
                        onChange: function (t) {
                            e.blur = t, o()
                        }
                    }), Tools.addSlider({
                        min: -50,
                        max: 50,
                        step: 1,
                        value: e.spread || 0,
                        updatedViewSuffix: "px",
                        element: $("#spreadSlider"),
                        onChange: function (t) {
                            e.spread = t, o()
                        }
                    }), s()
                }
            }
        })
    },
    selectFromList: function (e) {
        Tools.showWindow({
            isModal: !1,
            title: e.title || M.SELECT,
            withAddNewOption: !1,
            addNewOptionTitle: M.ADD_NEW,
            noNav: !0,
            width: 500,
            markup: Templates.get("selectFromListMarkup"),
            action: {
                onShow: function (t, i) {
                    var n = i.find('[data-role="list"]'),
                        a = "",
                        s = e.items || [],
                        o = e.getItemId || function (e) {
                            return e.id || ""
                        },
                        r = e.getItemText || function (e) {
                            return e.name || ""
                        };
                    e.withAddNewOption && (a += '<div class="col20 f-left t-center mb-15"><a data-role="new" class="middle-button blue with-icon inline-block f-none">' + e.addNewOptionTitle + "</a></div>", i.on("click", 'a[data-role="new"]', (function () {
                        t.close(), t = null, (e.onSelect || dummy)(null)
                    }))), s.forEach((function (e) {
                        a += escapeFormat(Templates.get("selectFromListItemMarkup"), "id", o(e), "name", r(e))
                    })), n.append(a), i.on("click", '[data-role="row"]', (function () {
                        var i = $(this).data("id");
                        t.close();
                        for (var n = 0; n < s.length; ++n) {
                            var a = s[n];
                            if (o(a) == i) {
                                (e.onSelect || dummy)(s[n]);
                                break
                            }
                        }
                        t = null
                    }))
                }
            }
        })
    },
    createAutoResizableLazyLoadingTable: function (e) {
        if (e.scrollBody) {
            var t = e.scrollBody,
                i = $.debounce(50, (function () {
                    var i = t.height();
                    t[0].scrollHeight - (t[0].scrollTop + i) < 71 && (e.atBottom || dummy)()
                }));
            if (t.scroll(i), !0 !== e.disableResize) {
                var n = $.debounce(50, (function () {
                    var i = e.calcHorizontalScrollHeight ? e.calcHorizontalScrollHeight(e.scrollBody) : 0,
                        n = t[0].getBoundingClientRect();
                    t.css("height", Math.max($window.height() - n.top - 2 - i, 300))
                }));
                $document.on(CPanel.VIEWPORT_CHANGE_EVENT + ".lazyloadingtable", n), n()
            }
            return {
                refresh: i,
                recalcHeight: n
            }
        }
    },
    destroyAutoResizableLazyLoadingTable: function (e) {
        $document.off(".lazyloadingtable"), e.find("tbody").off(".lazyloadingtable")
    },
    showOrderDetails: function (e, t) {
        var i = e.data("id"),
            n = e.parent().find(".order-summary-wrapper");
        e.hasClass("visible") ? n.slideUp("fast") : Tools.makeWebsiteRequest({
            action: "getOrderDetails",
            data: {
                id: i
            },
            onOk: function (e) {
                var i = e.data,
                    a = $(Templates.get("storeOrderInfoRow")),
                    s = Templates.get("storeOrderInfoItemRow");
                "CANCELED" === i.status && a.find('[data-action="orderActions"]').remove();
                var o = i.hasShipping ? Tools.addrToStr(i.customerName, i.shippingAddress) : "",
                    r = Tools.addrToStr(i.customerName, i.billingAddress),
                    l = "";
                "cod" === i.paymentType ? l += M.PAYMENT_COD : "bank" === i.paymentType ? l += M.PAYMENT_BANK : "stripe" === i.paymentType ? l += M.PAYMENT_STRIPE : "braintree" === i.paymentType ? l += M.PAYMENT_BRAINTREE : "2checkout" === i.paymentType ? l += M.PAYMENT_2CHECKOUT : "paypal" === i.paymentType ? l += M.PAYMENT_PAYPAL : "no-payment" === i.paymentType ? l += "" : l += i.paymentType, l += ("no-payment" === i.paymentType ? "" : ": ") + "<b>" + Tools.currencyToStrWithSymbol(i.total) + "</b><br />", i.transactionId && (l += M.TRANSACTION_ID + ": <b>" + i.transactionId + "</b><br />");
                for (var c = 0; c < i.preShippingTaxes.length; ++c) {
                    var d = i.preShippingTaxes[c];
                    0 === (l += escapeFormat(d.name)).type && (l += "(" + d.amount + "%)"), l += ": " + Tools.currencyToStrWithSymbol(d.total) + "<br />"
                }
                i.hasShipping && i.shipping && (l += M.SHIPPING_COST + " - " + escapeFormat(i.shipping.name) + ": " + Tools.currencyToStrWithSymbol(i.shipping.cost) + "<br />");
                for (c = 0; c < i.postShippingTaxes.length; ++c) {
                    d = i.postShippingTaxes[c];
                    0 === (l += escapeFormat(d.name)).type && (l += "(" + d.amount + "%)"), l += ": " + Tools.currencyToStrWithSymbol(d.total) + "<br />"
                }
                "" === o ? a.find(".order-shipping-info-wrapper").remove() : a.find(".order-shipping-info-wrapper").find("span").html(o), i.additionalFields && i.additionalFields.length && i.additionalFields.forEach((function (e) {
                    if (e.name) {
                        var t = e.field || M.FILE;
                        r += "<br /> " + t + ': <a href="' + e.value + '" target="_blank">' + e.name + "</a>"
                    } else {
                        t = e.field || M.ADDITIONAL_INFO;
                        r += "<br /> " + t + ": " + e.value
                    }
                })), a.find(".order-billing-info-wrapper").find("span").html(r), a.find(".order-payment-info-wrapper").find("span").html(l);
                for (var p = "", u = 0; u < i.items.length; ++u) {
                    var h = i.items[u],
                        f = "";
                    if (null !== h.variation)
                        for (c = 0; c < h.variation.length; ++c) c > 0 && (f += ", "), f += h.variation[c].value;
                    if (h.additions)
                        for (c = 0; c < h.additions.length; ++c) "" !== f && (f += ", "), f += WebPlatform.escapeHtml(h.additions[c].name) + ": " + WebPlatform.escapeHtml(h.additions[c].value);
                    "" === f && (f = "-");
                    var m = resources + "/images/image-avatar.png";
                    h.images && h.images.length > 0 && (m = getThumbnailsFromBase(h.images[0].base, "72x50", !0) + h.images[0].name);
                    var g = '<img src="' + m + '" alt="">',
                        v = null === h.sku || "" === h.sku.trim() ? "-" : h.sku;
                    null === h.title && (h.title = f || "", f = ""), p += format(escapeFormat(s, "sku", v, "name", h.title, "variations", f, "quantity", h.quantity, "price", Tools.currencyToStrWithSymbol(h.price)), "thumb", g)
                }
                if (null !== i.discount) {
                    var b = null === i.discountValue ? "-" : Tools.currencyToStrWithSymbol(-i.discountValue),
                        y = M.DISCOUNT_VALUE + " " + i.discount.name + " (" + i.discount.code + ")";
                    p += escapeFormat(s, "sku", "-", "name", y, "variations", "-", "quantity", "-", "price", b, "thumb", " ")
                }
                a.find(".ordered-products-wrapper").append(p), n.data("order", i).empty().append(a).slideDown("fast"), t || n.find('a[data-action="orderActions"]').remove()
            }
        }), e.toggleClass("visible")
    },
    switchProject: function () {
        Project.listProjects((function (e) {
            var t = 0;
            e.forEach((function (e) {
                e.id === currentProjectId && (t = "ACTIVE" === e.status ? 0 : "TRIAL" === e.status ? 1 : 2)
            })), Tools.showWindow({
                isModal: !1,
                withDarkBackground: !0,
                showCloseButton: !0,
                title: "",
                noNav: !0,
                noTitle: !0,
                selectedSlide: t,
                width: 500,
                markup: Templates.get("switchProjectContextMarkup"),
                action: {
                    onShow: function (t, i) {
                        var n = i.find('[data-type="active"]'),
                            a = i.find('[data-type="trial"]'),
                            s = i.find('[data-type="expired"]');
                        e.forEach((function (e) {
                            var t = e.status,
                                i = "ACTIVE" === t ? n : "TRIAL" === t ? a : s,
                                o = $(escapeFormat(Templates.get("switchProjectContextItemMarkup"), "id", e.id, "clz", e.id === currentProjectId ? "active" : "", "name", e.name));
                            e.isOwner || o.find(".more-options").remove(), i.append(o)
                        })), i.on("click", ".project-view", (function () {
                            var e = $(this).data("id");
                            Tools.makeWebsiteRequest({
                                action: "goToProject",
                                data: {
                                    id: e
                                },
                                onOk: function (e) {
                                    window.location.href = "https://" + e.data + "/me/dashboard", WebPlatform.delay(10, (function () {
                                        CPanel.disableUI(!0)
                                    }))
                                }
                            })
                        })), i.on("click", ".more-options", (function (t) {
                            t.stopPropagation(), t.preventDefault();
                            var i = $(this),
                                n = i.closest("[data-id]"),
                                a = getById(e, n.data("id"));
                            if (a && a.isOwner) {
                                var s = [];
                                a.isOwner ? (s.push({
                                    text: M.RENAME_PROJECT,
                                    icon: "fa-pencil",
                                    tag: "rename"
                                }), s.push({
                                    text: M.DELETE,
                                    icon: "fa-trash",
                                    tag: "delete"
                                })) : s.push({
                                    text: M.LEAVE_PROJECT,
                                    icon: "fa-sign-out",
                                    tag: "leave"
                                }), Tools.showTooltipOptions(i, s, (function (e, t, i, s) {
                                    "rename" === s ? Tools.promptForInput(M.RENAME_PROJECT, M.RENAME_PROJECT_MESSAGE, a.name, (function (e) {
                                        Tools.makeWebsiteRequest({
                                            action: "renameProject",
                                            method: "post",
                                            data: {
                                                id: a.id,
                                                name: e
                                            },
                                            onOk: function (t) {
                                                a.name = e, a.id === currentProjectId && (Website.projectName = e), n.find('[data-role="name"]').text(e)
                                            }
                                        })
                                    })) : "delete" === s ? Tools.prompt(M.DELETE_PROJECT, M.DELETE_PROJECT_MESSAGE, (function () {
                                        Tools.makeWebsiteRequest({
                                            action: "deleteProject",
                                            data: {
                                                id: a.id
                                            },
                                            onOk: function (e) {
                                                a.id === currentProjectId ? CPanel.redirect(e.data) : n.slideUp("fast")
                                            }
                                        })
                                    }), dummy, M.YES, M.CANCEL, !1, "red-popup") : "leave" === s && Tools.prompt(M.LEAVE_PROJECT, M.LEAVE_PROJECT_MESSAGE, (function () {
                                        Tools.makeWebsiteRequest({
                                            action: "leaveProject",
                                            data: {
                                                id: a.id
                                            },
                                            onOk: function (e) {
                                                a.id === currentProjectId ? CPanel.redirect(e.data) : n.slideUp("fast")
                                            }
                                        })
                                    }), dummy, M.YES, M.CANCEL, !1, "red-popup")
                                }))
                            }
                        }))
                    }
                }
            })
        }))
    },
    pickTags: function (e, t, i) {
        i = i || dummy;
        var n = e.find(".tags-wrapper"),
            a = [];
        Website.crmTags.forEach((function (e) {
            a.push(e.label)
        })), t.forEach((function (e) {
            n.append($("<li></li>").text(e))
        })), n.tagit({
            caseSensitive: !1,
            allowDuplicates: !1,
            allowSpaces: !0,
            showAutocompleteOnFocus: !0,
            autocomplete: {
                position: {
                    collision: "flip"
                },
                source: function (e, i) {
                    var n = Website.crmTags || [],
                        a = [],
                        s = e.term.toLowerCase(),
                        o = !0;
                    n.forEach((function (e) {
                        var t = e.label.toLowerCase();
                        t === s && (o = !1), 0 === t.indexOf(s) && a.push(e.label)
                    })), o && a.unshift(e.term);
                    var r = [];
                    a.forEach((function (e) {
                        t.indexOf(e) < 0 && r.push(e)
                    })), i(r)
                }
            },
            animate: !1,
            deleteOnly: !0,
            readOnly: !1,
            placeholderText: M.ADD_TAGS_PLACEHOLDER,
            singleFieldDelimiter: null,
            afterTagRemoved: function (e, n) {
                var a = t.indexOf(n.tagLabel);
                a > -1 && t.splice(a, 1), i()
            },
            afterTagAdded: function (e, n) {
                if (!(t.indexOf(n.tagLabel) > -1)) {
                    t.push(n.tagLabel), i();
                    var a = -1;
                    Website.crmTags.forEach((function (e, t) {
                        e.label === n.tagLabel && (a = t)
                    })), a < 0 && Website.saveTag(-1, n.tagLabel)
                }
            }
        }), e.find("#addTags").prop("checked", t.length > 0).change((function () {
            toggleDisplay(n, this.checked, !0), this.checked || t.splice(0, t.length), i()
        })), toggleDisplay(n, t.length > 0, !0)
    },
    showPersonalizationFieldsPopup: function (e) {
        (e = e || {}).onSkip = e.onSkip || dummy, window.promptForBrandDetailsOnNewSite ? Tools.makeWebsiteRequest({
            action: "getTemplatePersonalizationFields",
            data: {
                theme: e.websiteTemplateId || -1,
                funnelId: e.funnelTemplateId || -1
            },
            onOk: function (t) {
                var i = t.data || [],
                    n = e.funnelTemplateId && e.funnelTemplateId > 0;
                n && 0 === i.length ? e.onSkip() : Tools.showWindow({
                    isModal: !0,
                    noTitle: !0,
                    width: 1050,
                    customClass: "dynamic-data-popup",
                    markup: Templates.get("initialPersonalizationValuesTemplate"),
                    noNav: !0,
                    action: {
                        onShow: function (t, a) {
                            var s = "",
                                o = [],
                                r = null,
                                l = "";
                            0 === i.length && a.addClass("no-personalization-fields"), i.forEach((function (e) {
                                l += escapeFormat('<label class="flex-none"><h5>%name%</h5><input type="text" class="tag-field" placeholder="%placeholder%" name="%tag%" /></label>', "name", e.name, "placeholder", e.description, "tag", e.tag)
                            })), a.find(".dynamic-content-inner").prepend(l);
                            var c = a.find('input[name="mainColor"]'),
                                d = GlobalStyling.getColorFromClass("primary", "rgb(82, 206, 202)");
                            Tools.addColorPicker(d, c.prev(), c, (function (e, t) {
                                s = e
                            })), a.find('[data-role="logo"]')[n ? "addClass" : "removeClass"]("none");
                            var p = function (e, t, i, n) {
                                if (u.empty(), "image" === e) {
                                    var a = "url(" + resources + "/images/image-avatar.png)";
                                    t && (a = "url(" + getThumbnailsFromBase(i, "160x120") + t + ")"), u.html('<div class="logo-preview-image" style="background-image: ' + a + ';"></div>')
                                } else u.html(n)
                            },
                                u = a.find(".logo-preview");
                            u.click((function () {
                                h(r, (function (e) {
                                    p((r = e).type, r.image, r.imageBase, r.text)
                                }))
                            })), p("image", "", "", ""), a.on("click", 'a[data-role="skip"]', (function () {
                                t.close(), e.onSkip()
                            })).on("click", 'a[data-role="continue"]', (function () {
                                t.close(), o = [], a.find(".tag-field").each((function () {
                                    var e = $(this);
                                    o.push({
                                        name: e.attr("name"),
                                        value: e.val()
                                    })
                                })), (e.onConfirm || dummy)(s, r, o)
                            }));
                            var h = function (e, t) {
                                $(this);
                                var i = (e = e || {}).type || "image",
                                    n = e.image || "",
                                    a = e.imageBase || "",
                                    s = e.text || '<span style="font-size: 42px;">LOGO</span>';
                                Tools.showWindow({
                                    title: M.EDIT_YOUR_LOGO,
                                    overflowX: "visible",
                                    overflowY: "visible",
                                    width: 400,
                                    markup: '      <div class="logo-settings-wrapper popup-widget-wrapper">         <div class="checkbox-wrapper">           <input id="useImgLogoInput" name="logoType" value="image" class="css-checkbox modify" type="radio">           <label for="useImgLogoInput" class="css-label">' + M.IMG_LOGO + "<p>" + M.USE_IMG_LOGO + '</p></label>         </div>         <div class="checkbox-wrapper">           <input id="useTextLogoInput" name="logoType" value="text" class="css-checkbox modify" type="radio">           <label for="useTextLogoInput" class="css-label">' + M.TEXT_LOGO + "<p>" + M.USE_TEXT_LOGO + '</p></label>         </div>         <a class="add-image transition-all f-left none-soft" style="height:120px;">           <span class="add-button transition-all"></span>         </a>         <div class="col20 f-left none-soft" id="textLogoToggle">           <span>' + M.EDIT_YOUR_TEXT_LOGO + '</span>           <div class="input-wrapper">             <div class="text-editor-wrapper">               <textarea name="textLogo"></textarea>             </div>           </div>         </div>       </div>',
                                    action: {
                                        onShow: function (e, t) {
                                            var o = t.find('[name="logoType"]'),
                                                r = t.find(".add-image"),
                                                l = $("#textLogoToggle");
                                            o.filter('[value="' + i + '"]').prop("checked", !0);
                                            var c = t.find(".add-image").click((function () {
                                                var e = $(this);
                                                FileManager.selectFile({
                                                    onCompleteCallback: function (t, i) {
                                                        e.css({
                                                            backgroundImage: "url(" + getThumbnailsFromBase(t, "160x120") + i + ")"
                                                        }), n = i, a = t
                                                    }
                                                })
                                            }));
                                            n && c.css("backgroundImage", "url(" + getThumbnailsFromBase(a, "160x120") + n + ")");
                                            var d = t.find("textarea");
                                            d.val(s || ""), Tools.addTextEditor({
                                                element: d,
                                                hasPersonalizationTags: !0,
                                                isMinimalistic: !0,
                                                containment: t,
                                                callbackHandler: function (e) {
                                                    "change" === e && (s = Tools.getTextEditorValue(d))
                                                }
                                            });
                                            var p = function () {
                                                r["image" === i ? "show" : "hide"](), l["text" === i ? "show" : "hide"](), $("#maxLogoHeightWrapper")["image" === i ? "show" : "hide"]()
                                            };
                                            o.change((function () {
                                                i = $(this).val(), p()
                                            })), p()
                                        }
                                    },
                                    buttons: [Button(M.SUBMIT, Button.CLASS_MIDDLE_BLUE, (function (e, o) {
                                        t({
                                            type: i,
                                            image: n,
                                            imageBase: a,
                                            text: s
                                        }), e.close()
                                    })), Button(M.CANCEL, Button.CLASS_MIDDLE_GREY, (function (e, t) {
                                        e.close()
                                    }))]
                                })
                            }
                        }
                    }
                })
            }
        }) : e.onSkip()
    },
    showTestWindow: function (e) {
        var t = $("#test-" + e);
        if (0 !== t.length) {
            var i = !0 === t.data("buttons"),
                n = i ? [Button(M.SAVE, Button.CLASS_MIDDLE_BLUE, (function (e, t) { })), Button.MIDDLE_CANCEL] : [];
            Tools.showWindow({
                isModal: !0,
                title: "Test",
                icon: Popup.ICON_ADD,
                noNav: !i,
                forceAtRight: !0 === t.data("forceRight"),
                noTitle: !1 === t.data("title"),
                width: t.data("width"),
                markup: t.html(),
                action: {
                    onShow: function (e, i) {
                        t.data("execute") && window[t.data("execute") || "dummy"](e, i)
                    }
                },
                buttons: n
            })
        }
    },
    getGradientString: function (e) {
        if (e && e.enabled) {
            var t = GlobalStyling.getColorFromClass(e.startColorClass, e.startColor),
                i = GlobalStyling.getColorFromClass(e.endColorClass, e.endColor);
            return "radial" === e.type ? "radial-gradient(circle, " + t + " 0%, " + i + " 100%)" : "linear-gradient(" + e.angle + "deg, " + i + " 0%, " + t + " 100%)"
        }
        return ""
    },
    bindGradientControls: function (e, t, i) {
        t = mergeUnique(t || {}, {
            enabled: !1,
            angle: 27,
            startColor: "",
            startColorClass: "primary",
            endColor: "",
            endColorClass: "secondary1",
            type: "linear"
        });
        var n = e.find('[data-role="gradient-wrapper"]');
        n[t.enabled ? "show" : "hide"](), e.find('input[name="enabled"]').prop("checked", t.enabled).change((function () {
            t.enabled = this.checked, n[t.enabled ? "slideDown" : "slideUp"]("fast"), i()
        })), e.find('[data-role="edit"]').click((function () {
            Tools.showWindow({
                isModal: !1,
                title: M.GRADIENT_SETTINGS,
                width: 400,
                forceAtRight: !1,
                markup: Templates.get("gradientEditMarkup"),
                action: {
                    onShow: function (e, n) {
                        var a = n.find('[name="startColor"]'),
                            s = n.find('[name="endColor"]'),
                            o = GlobalStyling.getColorFromClass(t.startColorClass, t.startColor),
                            r = GlobalStyling.getColorFromClass(t.endColorClass, t.endColor);
                        Tools.addColorPicker(o, a.prev(), a, (function (e, n) {
                            t.startColor = e, t.startColorClass = n, i()
                        })), Tools.addColorPicker(r, s.prev(), s, (function (e, n) {
                            t.endColor = e, t.endColorClass = n, i()
                        })), Tools.addSlider({
                            min: 0,
                            max: 360,
                            step: 1,
                            value: t.angle || 0,
                            updatedViewSuffix: String.fromCharCode(176),
                            element: $("#gradientAngleSlider"),
                            onChange: function (e) {
                                t.angle = e, i()
                            }
                        }), e.bindObject("data", t, [{
                            property: "type",
                            onChange: function () {
                                n.find(".input-slider-wrapper")["linear" === t.type ? "slideDown" : "slideUp"]("fast")
                            }
                        }], i), n.find(".input-slider-wrapper")["linear" === t.type ? "show" : "hide"]()
                    }
                }
            })
        }))
    },
    editProperty: function (e, t) {
        e = e ? Object.assign({}, e) : {
            id: 0
        };
        var i = null,
            n = [Button(M.SAVE_PROPERTY, Button.CLASS_MIDDLE_BLUE, (function (n, a) {
                if ("LIST" === (e = i.getData()).type)
                    if (null === e.value) e.value = [];
                    else
                        for (var s = 0; s < e.value.length; ++s) e.value[s] = e.value[s].trim(), 0 === e.value[s].length && e.value.splice(s--, 1);
                else e.value = null;
                Tools.makeWebsiteRequest({
                    action: "saveProperty",
                    method: "post",
                    data: {
                        data: JSON.stringify(e)
                    },
                    onOk: function (i) {
                        var a = i.data;
                        0 === e.id ? Website.crmProperties.push(a) : Website.crmProperties[indexOfId(Website.crmProperties, e.id)] = a, t(a), n.close()
                    }
                })
            })), Button.MIDDLE_CANCEL];
        0 !== e.id && n.push(Button(M.DELETE_PROPERTY, Button.CLASS_MIDDLE_RED, (function (i, n) {
            Tools.prompt(M.DELETE, M.DEL_CONFIRM, (function () {
                Tools.makeWebsiteRequest({
                    action: "deleteProperty",
                    data: {
                        id: e.id
                    },
                    onOk: function () {
                        Website.crmProperties.splice(indexOfId(Website.crmProperties, e.id), 1), t(e), i.close()
                    }
                })
            }))
        }), Button.FLOAT_LEFT)), Tools.showWindow({
            isModal: !0,
            title: M.CRM_PROPERTY,
            width: 550,
            forceAtRight: !1,
            action: {
                onShow: function (t, n) {
                    i = WebComponents.CRM.Property(t.getContentArea(), e), t.bindComponent(i)
                }
            },
            buttons: n
        })
    },
    selectMarketingProperty: function (e, t) {
        Tools.showWindow({
            isModal: !1,
            withDarkBackground: !0,
            showCloseButton: !0,
            title: M.SELECT_PROPERTY,
            width: 500,
            noNav: !0,
            customClass: "add-member-dialog",
            forceAtRight: !1,
            action: {
                onShow: function (i, n) {
                    i.bindComponent(WebComponents.Marketing.pickProperty(i.getContentArea(), e, (function (e) {
                        i.close(), t(e)
                    })))
                }
            }
        })
    },
    clearStats: function (e, t, i) {
        Tools.prompt(M.CLEAR_STATS_TITLE, M.CLEAR_STATS_MESSAGE, (function () {
            Tools.makeWebsiteRequest({
                action: "clearFunnelStats",
                data: {
                    subdomain: e.subdomain,
                    funnelId: t
                },
                onOk: function (e) {
                    Tools.showCornerMessage(1e3, M.UPDATED, Tools.TOOLTIP_TYPE_SUCCESS), (i || dummy)()
                }
            })
        }), dummy, M.YES, M.NO)
    },
    toggleSiteActiveState: function (e, t, i, n, a) {
        var s;
        s = n ? i ? M.FUNNEL_ACTIVATE_MSG : M.SITE_ACTIVATE_MSG : i ? M.FUNNEL_DEACTIVATE_MSG : M.SITE_DEACTIVATE_MSG, Tools.prompt(n ? M.MAKE_ACTIVE : M.MAKE_INACTIVE, s, (function () {
            Tools.makeWebsiteRequest({
                action: "changeActiveStatus",
                data: {
                    subdomain: e.subdomain,
                    funnelId: t,
                    active: n
                },
                onOk: a
            })
        }))
    },
    moveFunnelToWebsite: function (e) {
        CPanel.checkIfNeedsSave((function () {
            var t = [];
            Website.projectWebsites.forEach((function (e) {
                "WEBSITE" === e.type && t.push(e)
            })), 0 !== t.length ? UITools.selectFromList({
                title: M.SELECT_WEBSITE,
                items: t,
                getItemId: function (e) {
                    return e.id
                },
                getItemText: function (e) {
                    return e.name ? e.name : e.subdomain + "." + Website.rootDomain
                },
                onSelect: function (t) {
                    null !== t && Tools.prompt(M.MOVE_TO_WEBSITE, M.MOVE_TO_WEBSITE_DESC, (function () {
                        Tools.makeWebsiteRequest({
                            action: "moveFunnelToWebsite",
                            data: {
                                fromSubdomain: e.subdomain,
                                toSubdomain: t.subdomain
                            },
                            onOk: function (e) {
                                var i = e.data;
                                CPanel.redirect("https://" + t.subdomain + "." + Website.rootDomain + Website.pagePrefix + "/" + i.url + "/" + i.steps[0].page.link)
                            }
                        })
                    }))
                }
            }) : Tools.showError(M.NO_WEBSITES_IN_PROJECT)
        }))
    },
    moveFunnelOutsideWebsite: function (e, t) {
        CPanel.checkIfNeedsSave((function () {
            Tools.prompt(M.MOVE_TO_PROJECT, M.MOVE_TO_PROJECT_DESC, (function () {
                Tools.makeWebsiteRequest({
                    action: "moveWebsiteFunnelToProject",
                    data: {
                        subdomain: e.subdomain,
                        funnel: t
                    },
                    onOk: function (e) {
                        CPanel.redirect("https://" + e.data + "." + Website.rootDomain + Website.pagePrefix)
                    }
                })
            }))
        }))
    },
    moveSiteToAnotherProject: function (e) {
        Project.pickProject(!0, (function (t) {
            t = t || {
                id: -1
            }, CPanel.checkIfNeedsSave((function () {
                t.id === Website.projectId ? Tools.showError(M.WEBSITE_IN_PROJECT) : Tools.prompt(M.MOVE_TO_PROJECT, M.MOVE_TO_PROJECT_DESCR, (function () {
                    Tools.makeWebsiteRequest({
                        action: "moveToProject",
                        data: {
                            projectId: t.id,
                            siteId: e.id
                        },
                        onOk: function (t) {
                            CPanel.redirect("https://" + e.subdomain + "." + Website.rootDomain + Website.pagePrefix)
                        }
                    })
                }))
            }))
        }))
    },
    showShareWebsiteDialog: function (e, t) {
        var i = !!t,
            n = (t = t || 1, encodeURIComponent(btoa(e + "|" + (t + e ^ 7) + "|" + t + "|" + (i ? "f" : "w")).replace(/=/g, "")).replace(/%/g, "-")),
            a = "https://" + domain + "/cc/" + n,
            s = i ? M.SHARE_FUNNEL_TITLE : M.SHARE_WEBSITE_TITLE,
            o = i ? M.SHARE_FUNNEL_DESC : M.SHARE_WEBSITE_DESC,
            r = i ? M.SHARE_FUNNEL_WITH_AFFILIATE_DESC : M.SHARE_WEBSITE_WITH_AFFILIATE_DESC;
        Tools.showWindow({
            isModal: !1,
            width: 580,
            customClass: "funnels-popup",
            markup: format(Templates.get("funnelsShareMarkup"), "primarylink", a, "title", s, "desc", o, "aff_desc", r),
            noNav: !0,
            action: {
                onShow: function (e, t) {
                    var i = t.find('[data-role="affiliate-links"]');
                    Tools.makeWebsiteRequest({
                        action: "getAffiliateLinks",
                        onOk: function (e) {
                            var t = e.data || [];
                            if (t.length > 0) {
                                i.removeClass("none");
                                var a = "";
                                t.forEach((function (e) {
                                    a += '<option value="' + e.url + '">' + e.url + "</option>"
                                })), i.find("select").append(a).change((function () {
                                    var e = this.value,
                                        t = "https://" + domain + "/" + e + "?cc=" + n,
                                        a = i.find(".share-link");
                                    a.find("span").text(t), a.data("link", t)
                                })).change()
                            }
                        }
                    }), t.on("click", ".copy-link", (function (e) {
                        Tools.copyToClipboard($(e.target).closest(".share-link").data("link")), Tools.showCornerMessage(1e3, M.COPIED_TO_CLIPBOARD, Tools.TOOLTIP_TYPE_SUCCESS)
                    }))
                }
            },
            buttons: []
        })
    },
    createNewCrmTag: function (e) {
        Tools.promptForInput(M.CREATE_NEW_TAG, M.ENTER_TAG_VALUE, "", (function (t) {
            t = t.trim();
            var i = !1;
            Website.crmTags.forEach((function (e) {
                e.label === t.trim() && (i = !0)
            })), i ? Tools.showError(M.TAG_EXISTING) : Website.saveTag(-1, t, e)
        }))
    },
    selectTagLabels: function (e, t, i) {
        var n = [];
        (e = e || []).forEach((function (e) {
            for (var t = 0; t < Website.crmTags.length; ++t)
                if (Website.crmTags[t].label === e) {
                    n.push(Website.crmTags[t]);
                    break
                }
        })), UITools.selectTags(n, (function (e) {
            e = e.map((function (e) {
                return e.label
            })), (t || dummy)(e)
        }), i)
    },
    selectTags: function (e, t, i) {
        UITools.selectTagsExt({
            selectedTags: e,
            onTagsSelected: t,
            allowEmptySelection: i
        })
    },
    selectTagsExt: function (e) {
        e = e || {};
        var t = null,
            i = Button(M.ADD_NEW_TAG, Button.CLASS_MIDDLE_BLUE + " additional-popup-button with-icon", (function (e, i) {
                UITools.createNewCrmTag((function (e) {
                    t.addItem(e, !0)
                }))
            }), Button.FLOAT_LEFT);
        t = Tools.chooseMultiple({
            title: M.TAGS,
            message: e.message || M.SELECT_TAGS_STEP,
            noItemsMessage: M.NO_TAGS_SELECTED,
            items: Website.crmTags,
            selectedItems: e.selectedTags || [],
            isModal: !0,
            single: !0 === e.single,
            additionalButton: i,
            allowEmptySelection: !0 === e.allowEmptySelection,
            getItemId: function (e) {
                return e.id
            },
            getItemText: function (e) {
                return e.label
            },
            onSelect: e.onTagsSelected || dummy
        })
    },
    createNewMarketingList: function (e) {
        Tools.promptForInput(M.ADD_LIST, M.DESCRIBE_LIST, "", (function (t) {
            t = t.trim(), Tools.makeWebsiteRequest({
                action: "setMarketingLists",
                data: {
                    isNew: !0,
                    data: JSON.stringify({
                        name: t
                    })
                },
                onOk: function (t) {
                    var i = t.data || [];
                    i.length > 0 && e(i[i.length - 1], i)
                }
            })
        }))
    },
    selectMarketingLists: function (e, t, i) {
        var n = null,
            a = Button(M.ADD_LIST, Button.CLASS_MIDDLE_BLUE + " additional-popup-button with-icon", (function (t, i) {
                UITools.createNewMarketingList((function (t) {
                    e.push(t), n.addItem(t, !0)
                }))
            }), Button.FLOAT_LEFT);
        n = Tools.chooseMultiple({
            title: M.SELECT_LISTS2,
            message: M.SELECT_LISTS,
            noItemsMessage: M.NO_AVAILABLE_LISTS,
            items: e,
            selectedItems: t || [],
            isModal: !0,
            additionalButton: a,
            getItemId: function (e) {
                return e.id
            },
            getItemText: function (e) {
                return e.name
            },
            onSelect: i
        })
    },
    showProductCategoryEditUI: function (e, t) {
        var i = null === Website.getPageById(Website.STORE_PAGE_ID) ? "" : Website.getPageById(Website.STORE_PAGE_ID).link;
        Tools.showWindow({
            title: e.id < 0 ? M.ADD_PRODUCT_CATEGORY : M.EDIT_PRODUCT_CATEGORY,
            width: 450,
            isModal: !0,
            markup: format(Templates.get("storeProductCategoryMarkup"), "url", i),
            action: {
                onShow: function (t, i) {
                    var n = Tools.bind(e, [{
                        property: "name",
                        field: i.find('[name="categoryName"]'),
                        onChange: function (e, t) {
                            n.setUrl(t)
                        }
                    }, {
                        property: "url",
                        field: i.find('[name="categoryUrl"]'),
                        type: "url"
                    }]);
                    i.data("data", n)
                }
            },
            buttons: [Button(M.SUBMIT, Button.CLASS_MIDDLE_BLUE, (function (i, n) {
                var a = n.data("data");
                "" === a.getUrl().trim() && a.setUrl(a.getName()), t(e, (function () {
                    i.close()
                }))
            })), Button.MIDDLE_CANCEL]
        })
    },
    pickImages: function (e) {
        var t = (e.images || []).slice();
        let i = function (e, i) {
            var n = getThumbnailsFromBase(i.base, "240x160") + i.name,
                a = $(format('<div class="item-wrapper"><a class="add-image sortable-image" style="background-image: url(\'%thumb%\');" data-name="%name%" data-base="%base%">        <span class="close-button2"></span></a></div>', "thumb", n, "name", i.name, "base", i.base));
            e.append(a), a.find(".close-button2").click((function () {
                var e = $(this).closest(".item-wrapper"),
                    i = e.index();
                Tools.prompt("", M.DEL_CONFIRM, (function () {
                    t.splice(i, 1), e.remove()
                }))
            }))
        };
        Tools.showWindow({
            title: M.SELECT_IMAGES,
            width: 685,
            isModal: !1,
            showCloseButton: !window.showBuilderPopupsOnFullHeight,
            withDarkBackground: !0,
            markup: Templates.get("pickImagesPopupMarkup"),
            forceAtRight: window.showBuilderPopupsOnFullHeight,
            action: {
                onShow: function (e, n) {
                    var a = n.find(".add-button-inline"),
                        s = n.find('[data-role="image-target"]');
                    s.sortable({
                        items: ".item-wrapper",
                        tolerance: "pointer",
                        stop: function () {
                            t = [], s.find(".sortable-image").each((function (e, i) {
                                i = $(i), t.push({
                                    name: i.data("name"),
                                    base: i.data("base")
                                })
                            }))
                        }
                    }).disableSelection(), t.forEach((function (e) {
                        i(s, e)
                    })), a.click((function () {
                        FileManager.selectFile({
                            selectMultiple: !0,
                            onCompleteCallback: function (e, n) {
                                for (var a = n.length - 1; a >= 0; --a) {
                                    var o = {
                                        base: e,
                                        name: n[a]
                                    };
                                    t.push(o), i(s, o)
                                }
                            }
                        })
                    }))
                },
                onBeforeHide: function (i, n) {
                    if (!1 === (e.onClose || dummy)(t)) return !1
                }
            }
        })
    },
    pickProductVariationImages: function (e) {
        e.images = e.images || {}, Tools.showWindow({
            title: M.VARIATION_IMAGES,
            icon: Popup.ICON_ADD,
            width: 700,
            isModal: !1,
            withDarkBackground: !0,
            markup: '<div class="popup-widget-wrapper">    <div class="galleryContainer">      <div class="items-wrapper col20">        <div class="help-text-wrapper">          <span class="help-text">' + M.YOU_CAN_ADD + '</span>              </div>              <div class="col20 f-left" data-role="options"></div>            </div>          </div>        </div>',
            showCloseButton: !0,
            action: {
                onShow: function (t, i) {
                    var n = i.find('[data-role="options"]'),
                        a = function (e, t) {
                            var i = getThumbnailsFromBase(e.base, "240x160") + e.name,
                                n = format('<div class="item-wrapper">        <a class="add-image sortable-image" style="width: 134px; height: 102px; background-image: url(%thumb%)" data-name="%name%" data-base="%base%">          <span class="close-button2"></span>        </a>      </div>', "thumb", i, "name", e.name, "base", e.base);
                            t.find(".add-image-select").before(n)
                        },
                        s = function (t) {
                            var i = e.values || [];
                            return i.length <= t ? null : e.images[i[t]] || []
                        };
                    (e.values || []).forEach((function (t, i) {
                        var o = jQuery(escapeFormat('      <div class="col20 f-left flex flex-row align-center" data-role="option" data-idx="%idx%">        <div class="flex-none" style="width: 100px">%option%</div>        <div class="flex-1" data-role="images">          <a style="width: 134px; height: 102px" class="add-image add-image-select"><span class="add-button"></span></a>        </div>      </div>', "option", t, "idx", i));
                        n.append(o), e.images[t] = e.images[t] || [], e.images[t].forEach((function (e) {
                            a(e, o)
                        })), o.find('[data-role="images"]').sortable({
                            items: ".item-wrapper",
                            tolerance: "pointer",
                            stop: function () {
                                var e = jQuery(this).closest('[data-role="option"]'),
                                    t = s(e.data("idx"));
                                t.splice(0, t.length), e.find(".sortable-image").each((function (e, i) {
                                    i = jQuery(i), t.push({
                                        name: i.data("name"),
                                        base: i.data("base")
                                    })
                                }))
                            }
                        }).disableSelection()
                    })), i.on("click", ".add-image-select", (function () {
                        var e = jQuery(this).closest('[data-role="option"]');
                        FileManager.selectFile({
                            selectMultiple: !0,
                            onCompleteCallback: function (t, i) {
                                for (var n = s(e.data("idx")), o = i.length - 1; o >= 0; --o) {
                                    var r = {
                                        base: t,
                                        name: i[o]
                                    };
                                    n.push(r), a(r, e)
                                }
                            }
                        })
                    })).on("click", ".sortable-image", (function () {
                        var e = jQuery(this).closest(".item-wrapper"),
                            t = jQuery(this).closest('[data-role="option"]');
                        s(t.data("idx")).splice(e.index(), 1), e.remove()
                    }))
                }
            }
        })
    },
    createNewProductFromPopup: function (e) {
        UITools.editProductInPopup(0, e)
    },
    editProductInPopup: function (e, t) {
        Tools.showWindow({
            isModal: !1,
            withDarkBackground: !0,
            noNav: !0,
            noTitle: !0,
            width: 1200,
            forceAtRight: !0,
            action: {
                onShow: function (t, i) {
                    t.bindComponent(WebComponents.Store.Products.edit(t.getContentArea(), {
                        id: e,
                        inPopup: !0,
                        onSave: function (e) {
                            t.close(), onCreated(e)
                        }
                    }))
                },
                onBeforeHide: function (e, t, i) {
                    if (e.component().isChanged()) return CPanel.showUnsavedChangesPrompt((function () {
                        i()
                    }), dummy), !1
                }
            }
        })
    },
    setImageStyles: function (e, t) {
        Tools.showWindow({
            isModal: !1,
            noTitle: !0,
            noNav: !0,
            width: 450,
            forceAtRight: window.showBuilderPopupsOnFullHeight,
            markup: Templates.get("storeWidgetImageStyles"),
            action: {
                onShow: function (i, n) {
                    t = t || dummy, isUndefined(e.imageBorderRadius) && (e.imageBorderRadius = 10), e.imageBgColor = e.imageBgColor || "transparent", e.imageBgColorClass = e.imageBgColorClass || "", i.bindObject("data", e, [{
                        property: "imageSizeType"
                    }, {
                        property: "imageSize",
                        type: "float"
                    }], (function () {
                        t(e)
                    })), Tools.addSlider({
                        min: 0,
                        max: 150,
                        step: 2,
                        value: e.imageBorderRadius,
                        updatedViewSuffix: "px",
                        element: $("#imageBorderRadiusSlider"),
                        onChange: function (i) {
                            e.imageBorderRadius = i, t(e)
                        }
                    });
                    var a = n.find('[name="imageBgColor"]'),
                        s = GlobalStyling.getColorFromClass(e.imageBgColorClass, e.imageBgColor);
                    Tools.addColorPicker(s, a.prev(), a, (function (i, n) {
                        e.imageBgColor = i, e.imageBgColorClass = n, t(e)
                    }))
                }
            }
        })
    },
    setProductBoxStyles: function (e, t, i) {
        Tools.showWindow({
            isModal: !1,
            noTitle: !0,
            noNav: !0,
            width: 450,
            forceAtRight: window.showBuilderPopupsOnFullHeight,
            markup: Templates.get("storeWidgetProductBoxStyles"),
            action: {
                onShow: function (n, a) {
                    i = i || dummy, ["boxRadius", "boxPadding"].forEach((function (n) {
                        Tools.addSlider({
                            min: 0,
                            max: "boxPadding" === n ? 50 : 150,
                            step: "boxPadding" === n ? 1 : 2,
                            value: e[n] || 0,
                            updatedViewSuffix: "px",
                            element: $("#" + n + "Slider"),
                            onChange: function (a) {
                                e[n] = a, t.css("boxPadding" === n ? "padding" : "border-radius", a + "px"), i(e, !0)
                            }
                        })
                    }));
                    var s = a.find('[name="boxColor"]'),
                        o = GlobalStyling.getColorFromClass(e.boxColorClass, e.boxColor);
                    Tools.addColorPicker(o, s.prev(), s, (function (n, a) {
                        e.boxColor = n, e.boxColorClass = a, GlobalStyling.setColorOrClassToElement(t, n, a, "bg"), i(e, !0)
                    })), a.find('[data-role="changeShadowStyles"]').click((function () {
                        UITools.selectShadow(e.boxShadow, t, (function (t) {
                            e.boxShadow = t, i(e, !0)
                        }))
                    }))
                }
            }
        })
    },
    setProductTextStyles: function (e, t, i) {
        i = i || dummy, Tools.showWindow({
            isModal: !1,
            title: M.TEXT_STYLE,
            width: 450,
            forceAtRight: window.showBuilderPopupsOnFullHeight,
            markup: format(Templates.get("storeWidgetTextStyleMarkup"), "priceTextBoldClz", "none"),
            action: {
                onShow: function (n, a) {
                    e.text = e.text || {}, e.priceText = e.priceText || {}, e.text.size = e.text.size || 17, e.priceText.size = e.priceText.size || 18, e.text.textColor = e.text.textColor || "#3e3e3e", e.priceText.textColor = e.priceText.textColor || "#3e3e3e";
                    for (var s = [e.text, e.priceText], o = [a.find('[data-role="textLabel"]'), a.find('[data-role="priceLabel"]')], r = GlobalStyling.getAvailableFontNames(), l = '<option value=""></option>', c = 0; c < r.length; ++c) l += '<option value="' + r[c] + '">' + r[c] + "</option>";
                    s.forEach((function (e, a) {
                        var s = o[a],
                            r = t[a],
                            c = s.find('[name="textColor"]');
                        s.find('[name="fontFamily"]').html(l), e.letterSpacing = e.letterSpacing || 0;
                        var d = GlobalStyling.getColorFromClass(e.textColorClass, e.textColor),
                            p = (Tools.addColorPicker(d, c.prev(), c, (function (t, n) {
                                e.textColor = t, e.textColorClass = n, GlobalStyling.setColorOrClassToElement(r, t, n, "foreground"), i(e, !0)
                            })), s.find('[data-role="textStyles"] a').click((function () {
                                var t = $(this),
                                    n = t.data("style");
                                t.toggleClass("active");
                                var a = t.hasClass("active");
                                e[n] = a, r[a ? "addClass" : "removeClass"](n), i(e, !0)
                            })));
                        ["bold", "italic", "underline"].forEach((function (t) {
                            e[t] && p.filter('[data-style="' + t + '"]').addClass("active")
                        })), n.bindObject("data" + a, e, [{
                            property: "fontFamily",
                            field: s.find('[name="fontFamily"]'),
                            onChange: function () {
                                r.css({
                                    "font-family": e.fontFamily
                                })
                            }
                        }], (function () {
                            i(e, !0)
                        })), Tools.addSlider({
                            min: 0,
                            max: 100,
                            step: 1,
                            value: 10 * (e.letterSpacing || 0),
                            updatedViewSuffix: "",
                            getUpdatedViewText: function () {
                                return 0 === e.letterSpacing ? M.NORMAL : e.letterSpacing.toFixed(1)
                            },
                            element: s.find('[data-role="letterSpacingSlider"]'),
                            onChange: function (t) {
                                e.letterSpacing = t / 10, r.css({
                                    letterSpacing: e.letterSpacing
                                }), i(e, !0)
                            }
                        }), Tools.addSlider({
                            min: 1,
                            max: 72,
                            step: 1,
                            value: e.size,
                            updatedViewSuffix: "px",
                            element: s.find('[data-role="textSizeSlider"]'),
                            onChange: function (t) {
                                e.size = t, r.css({
                                    fontSize: e.size
                                }), i(e, !0)
                            }
                        })
                    }))
                }
            }
        })
    },
    setupStripeConnect: function () {
        Tools.makeWebsiteRequest({
            action: "connectPaymentProcessor",
            method: "post",
            data: {
                type: "stripeConnect"
            },
            onOk: function (e) {
                window.location.href = e.data
            }
        })
    }
};
WebPlatform.Fulfillment = WebPlatform.Fulfillment || {}, WebPlatform.Fulfillment.Speedy = function () {
    var e = {},
        t = {},
        i = {},
        n = {},
        a = function (t, i, n, a, s) {
            var o = function (e) {
                var t = "";
                e.forEach((function (e) {
                    var i = e.name;
                    e.address && e.address.localAddressString && (i += " - " + e.address.localAddressString), t += escapeFormat('<option value="%id%">%address%</option>', "id", e.id, "address", i)
                })), a.empty().append(t).val(n), (s || dummy)()
            },
                r = e[t + "|" + i];
            isUndefined(r) ? Tools.makeWebsiteRequest({
                action: "shippingServiceRequest",
                method: "post",
                data: {
                    provider: "speedy",
                    type: "location",
                    locationType: "office",
                    country: t || 100,
                    site: i
                },
                onOk: function (n) {
                    var a = n.data || [];
                    e[t + "|" + i] = a, o(a)
                }
            }) : o(r)
        },
        s = function (e, i, n, a) {
            n.val(e || ""), n.attr("autocomplete", "no").autocomplete({
                highlightClass: "ui-autocomplete-match",
                delay: 100,
                minLength: 1,
                autoFocus: !0,
                source: function (e, n) {
                    var a = e.term.trim(),
                        s = t[i + "|" + a];
                    isUndefined(s) ? Tools.makeWebsiteRequest({
                        action: "shippingServiceRequest",
                        method: "post",
                        data: {
                            provider: "speedy",
                            type: "location",
                            locationType: "site",
                            country: i || 100,
                            name: a
                        },
                        onOk: function (e) {
                            var s = e.data;
                            s.forEach((function (e) {
                                var t = "";
                                e.type && (t = e.type + " "), t += e.name, e.postCode && (t += ", " + e.postCode), e.region && (t += ", " + e.region), e.value = t
                            })), t[i + "|" + a] = s, n(s)
                        }
                    }) : n(s)
                },
                select: function (e, t) {
                    return n.val(t.item.name), (a || dummy)(t.item), !1
                }
            })
        },
        o = function (e, t, a, s, o, r, l) {
            o.val(t || ""), o.attr("autocomplete", "no").autocomplete({
                highlightClass: "ui-autocomplete-match",
                delay: 100,
                minLength: 1,
                autoFocus: !0,
                source: function (t, o) {
                    var r = t.term.trim(),
                        l = s();
                    ! function (e, t, a, s, o) {
                        if (0 === a || 0 === t) return [];
                        var r = "street" === e ? "street" : "complex",
                            l = "street" === e ? i : n,
                            c = t + "|" + a + "|" + s;
                        isUndefined(l[c]) ? Tools.makeWebsiteRequest({
                            action: "shippingServiceRequest",
                            method: "post",
                            data: {
                                provider: "speedy",
                                type: "location",
                                locationType: r,
                                country: t || 100,
                                site: a || 0,
                                name: s
                            },
                            onOk: function (e) {
                                var t = [];
                                (e.data || []).forEach((function (e) {
                                    t.push({
                                        id: e.id,
                                        name: e.name,
                                        value: e.name
                                    })
                                })), l[c] = t, o(t)
                            }
                        }) : o(l[c])
                    }(e, a, l, r, (function (e) {
                        o(e)
                    }))
                },
                select: function (e, t) {
                    return o.val(t.item.name), (r || dummy)(t.item), !1
                },
                change: function (e, t) {
                    l(o.val())
                }
            })
        },
        r = function (e) {
            Tools.showWindow({
                title: M.SHIPMENT_INFORMATION,
                width: 400,
                hideNav: !0,
                isModal: !1,
                showCloseButton: !0,
                withDarkBackground: !0,
                markup: Templates.get("speedyWaybillDetailsMarkup"),
                action: {
                    onShow: function (t, i) {
                        var n = ((e.extra || {}).speedy || {}).waybill || {},
                            a = i.find('[data-role="no"]'),
                            s = i.find('[data-role="price"]'),
                            o = i.find('[data-role="deliveryDate"]');
                        a.find('[data-role="value"]').text(n.id || "---"), n.price ? s.find('[data-role="value"]').text(Tools.currencyToStrWithSymbol(n.price)) : s.hide(), n.pickupDate ? o.find('[data-role="value"]').text(WebPlatform.yyyymmddDateToStrWithMonth(n.pickupDate)) : o.hide(), i.find('[data-role="print"]').attr("href", "/me/download?type=printWaybill&data=" + e.id)
                    }
                },
                buttons: []
            })
        };
    return {
        _init: function () {
            return this, delete this._init, this
        },
        fulfillOrder: function (e, t) {
            Tools.showWindow({
                title: M.SHIPMENT_INFORMATION,
                width: Math.min($window.width() - 50, 750),
                height: "95vh",
                isModal: !0,
                hideNav: !0,
                markup: Templates.get("speedyFulfillmentSettingsMarkup"),
                action: {
                    onShow: function (i, n) {
                        var l = (Website.appsSettings || {}).speedy || {},
                            c = ((e.shipping || {}).extra || {}).speedy || {},
                            d = (e.extra || {}).speedy || {},
                            p = e.shippingAddress || {},
                            u = "cod" === e.paymentType,
                            h = "receiver" === (l.deliveryPayer || "receiver") ? e.subTotal : e.total,
                            f = e.subTotal,
                            m = 0,
                            g = 0,
                            v = c.serviceId || 0,
                            b = c.officeId || 0,
                            y = d.countryId || 100,
                            w = d.siteId || 0,
                            _ = "speedy-office" === e.shipping.kind ? "office" : "address",
                            T = n.find('[data-role="actualPrice"]'),
                            C = n.find('[data-role="priceError"]');
                        n.find('[data-role="cod-sign"]').text(Website.storeCurrencySymbol), n.find('[data-role="cod-wrapper"]').addClass(Website.storeCurrencyPositionAtLeft ? "left-sign" : "right-sign");
                        var k = p.address;
                        p.address2 && (k += ", " + p.address2), n.find('[data-role="client-addr"]').text(" " + k + " "), e.items.filter((e => "PHYSICAL" === e.type)).forEach((e => {
                            g += Math.max(e.weight || 0, .1), ++m
                        })), l.singleParcel && (m = 1);
                        var E, x = "",
                            S = "",
                            P = l.services || [],
                            I = !1;
                        P.forEach((function (e) {
                            e.enabled && (x += '<option value="' + e.id + '">' + e.name + "</option>", S += '<option value="' + e.id + '">' + e.name + "</option>", e.id === v && (I = !0))
                        })), !I && P.length > 0 && (v = P[0].id), E = v;
                        var O = {
                            id: e.id,
                            senderName: l.senderName || "",
                            privatePerson: !1 !== l.privatePerson,
                            senderPhone: l.senderPhone || "",
                            senderType: l.senderType || "address",
                            senderClientId: l.senderClientId || "",
                            senderCity: l.speedyCity || "",
                            senderCityId: l.speedyCityId || 0,
                            senderOfficeId: l.speedyOfficeId || 0,
                            receiverName: e.customerName,
                            receiverPhone: p.phone || "",
                            receiverCity: p.city,
                            receiverCountryId: y,
                            receiverCityId: w,
                            receiverZip: p.zipCode,
                            receiverType: _,
                            receiverOfficeId: b,
                            receiverStreet: "",
                            receiverStreetId: "",
                            receiverStreetNo: "",
                            receiverQuarter: "",
                            receiverQuarterId: "",
                            receiverBlock: "",
                            receiverEntr: "",
                            receiverFloor: "",
                            receiverApt: "",
                            receiverNote: "",
                            payerType: l.deliveryPayer || "receiver",
                            service: v,
                            parcels: m,
                            weight: g,
                            orderNote: "",
                            insurance: !!l.insurance,
                            cod: u,
                            codValue: h,
                            insuranceValue: f,
                            preview: !!l.preview,
                            test: !!l.test,
                            fragile: !!l.fragile,
                            documents: !!l.documents,
                            returnPayer: l.returnsPayer || "receiver",
                            returnService: E,
                            provider: "speedy",
                            pickupDate: null
                        };
                        O.preview || (O.test = !1);
                        var A = n.find('[data-role="send"]').click((function () {
                            A.hasClass("disabled") || Tools.prompt(M.SEND_ORDER, M.SEND_ORDER_CONFIRM, (function () {
                                O.type = "fulfill", Tools.makeWebsiteRequest({
                                    action: "shippingServiceRequest",
                                    method: "post",
                                    data: O,
                                    onOk: function (n) {
                                        e.extra = e.extra || {}, e.extra.speedy = e.extra.speedy || {}, e.extra.speedy.waybill = n.data, i.close(), r(e), (t || dummy)()
                                    }
                                })
                            }))
                        })),
                            L = $.debounce(250, (function () {
                                O.type = "calculatePrice", T.text("..."), C.addClass("none"), Tools.makeWebsiteRequest({
                                    action: "shippingServiceRequest",
                                    method: "post",
                                    data: O,
                                    onOk: function (e) {
                                        var t = e.data;
                                        t.error ? (T.text("--"), C.removeClass("none").text(t.error), A.addClass("disabled")) : (T.text(Tools.currencyToStrWithSymbol(t.price)), C.addClass("none"), A.removeClass("disabled"))
                                    }
                                })
                            }));
                        n.find('[data-role="clientPrice"]').text(Tools.currencyToStrWithSymbol(e.shipping.cost)), n.find('[data-role="insurance"]').text(Tools.currencyToStrWithSymbol(f));
                        var D = n.find('select[name="service"]'),
                            N = n.find('select[name="returnService"]');
                        D.append(x), N.append(S);
                        var R = "",
                            W = n.find('select[name="senderClientId"]');
                        (l.clients || []).forEach((function (e) {
                            R += escapeFormat('<option value="%id%">%address%</option>', "id", e.id, "address", e.address)
                        })), W.append(R), $("#speedyAddressWrapper")["address" === O.senderType ? "show" : "hide"](), $("#speedyOfficeWrapper")["address" === O.senderType ? "hide" : "show"](), $("#receiverAddressWrapper")["address" === O.receiverType ? "show" : "hide"](), $("#receiverOfficeWrapper")["address" === O.receiverType ? "hide" : "show"](), toggleDisplay($("#codValueWrapper"), O.cod, !1);
                        var F = i.bindObject("data", O, [{
                            property: "senderName"
                        }, {
                            property: "senderPhone"
                        }, {
                            property: "senderType",
                            onChange: function () {
                                $("#speedyAddressWrapper")["address" === O.senderType ? "slideDown" : "slideUp"]("fast"), $("#speedyOfficeWrapper")["address" === O.senderType ? "slideUp" : "slideDown"]("fast")
                            }
                        }, {
                            property: "senderClientId"
                        }, {
                            property: "receiverName"
                        }, {
                            property: "receiverPhone"
                        }, {
                            property: "receiverZip"
                        }, {
                            property: "receiverType",
                            onChange: function () {
                                $("#receiverAddressWrapper")["address" === O.receiverType ? "slideDown" : "slideUp"]("fast"), $("#receiverOfficeWrapper")["address" === O.receiverType ? "slideUp" : "slideDown"]("fast")
                            }
                        }, {
                            property: "receiverStreetNo"
                        }, {
                            property: "receiverBlock"
                        }, {
                            property: "receiverEntr"
                        }, {
                            property: "receiverFloor"
                        }, {
                            property: "receiverApt"
                        }, {
                            property: "receiverNote"
                        }, {
                            property: "payerType"
                        }, {
                            property: "service"
                        }, {
                            property: "parcels"
                        }, {
                            property: "weight"
                        }, {
                            property: "pickupDate",
                            type: "date",
                            parseOptions: {
                                allowEmpty: !1,
                                defaultValue: (new Date).getTime()
                            }
                        }, {
                            property: "orderNote"
                        }, {
                            property: "insurance",
                            type: "bool"
                        }, {
                            property: "cod",
                            type: "bool",
                            onChange: function () {
                                toggleDisplay($("#codValueWrapper"), O.cod, !1)
                            }
                        }, {
                            property: "codValue"
                        }, {
                            property: "preview",
                            type: "bool",
                            onChange: function () {
                                O.preview || F.setTest(!1)
                            }
                        }, {
                            property: "test",
                            type: "bool",
                            onChange: function () {
                                O.test && F.setPreview(!0)
                            }
                        }, {
                            property: "fragile",
                            type: "bool"
                        }, {
                            property: "documents",
                            type: "bool"
                        }, {
                            property: "returnPayer"
                        }, {
                            property: "returnService"
                        }], (function (e) {
                            switch (e.property) {
                                case "senderName":
                                case "senderPhone":
                                case "receiverName":
                                case "receiverPhone":
                                case "receiverEntr":
                                case "receiverFloor":
                                case "receiverApt":
                                case "receiverNote":
                                case "orderNote":
                                    return
                            }
                            L()
                        })),
                            B = n.find('select[name="senderOfficeId"]');
                        s(O.senderCity || "", 100, n.find('input[name="senderCity"]'), (function (e) {
                            e.id !== O.senderCityId && (O.senderCity = e.name, O.senderCityId = e.id, O.senderOfficeId = "", a(100, O.senderCityId, O.senderOfficeId, B, L))
                        })), B.change((function () {
                            O.senderOfficeId = +this.value, L()
                        }));
                        var U = n.find('select[name="receiverOfficeId"]');
                        s(O.receiverCity || "", y, n.find('input[name="receiverCity"]'), (function (e) {
                            F.setReceiverZip(e.postCode), O.receiverCity = e.name, O.receiverCityId = e.id, O.receiverOfficeId = "", a(O.receiverCountryId, O.receiverCityId, O.receiverOfficeId, U, L)
                        })), U.change((function () {
                            O.receiverOfficeId = +this.value, L()
                        })), o("street", O.receiverStreet || "", y, (function () {
                            return O.receiverCityId
                        }), n.find('input[name="receiverStreet"]'), (function (e) {
                            O.receiverStreet = e.name, O.receiverStreetId = e.id, L()
                        }), (function (e) {
                            e !== O.receiverStreet && (O.receiverStreetId = "", O.receiverStreet = e, L())
                        })), o("complex", O.receiverQuarter || "", y, (function () {
                            return O.receiverCityId
                        }), n.find('input[name="receiverQuarter"]'), (function (e) {
                            O.receiverQuarter = e.name, O.receiverQuarterId = e.id, L()
                        }), (function (e) {
                            e.trim() !== O.receiverQuarter && (O.receiverQuarterId = "", O.receiverQuarter = e, L())
                        })), O.senderCityId || O.receiverCityId ? O.senderCityId ? a(100, O.senderCityId, O.senderOfficeId, B, (function () {
                            O.receiverCityId && a(O.receiverCountryId, O.receiverCityId, O.receiverOfficeId, U, L)
                        })) : a(O.receiverCountryId, O.receiverCityId, O.receiverOfficeId, U, L) : L()
                    }
                },
                buttons: []
            })
        },
        showWaybillDetails: r,
        autocompleteCities: s,
        loadOffices: a
    }._init()
};
var BookingCommon = {
    getDataById: function (e, t) {
        if (!t || !e) return null;
        for (var i = 0; i < t.length; i++)
            if (t[i].id === parseInt(e)) return t[i];
        return null
    },
    getDataByProperty: function (e, t, i) {
        if (!i || !t) return null;
        for (var n = 0; n < i.length; n++)
            if (i[n][e] === t) return i[n];
        return null
    },
    getRandomInt: function () {
        return Math.round(1e5 * Math.random())
    },
    getNextId: function (e) {
        if (!e || 0 === e.length) return BookingCommon.getRandomInt();
        var t = [],
            i = BookingCommon.getRandomInt();
        for (e.forEach((function (e) {
            t.push(e.id)
        })); - 1 !== t.indexOf(i);) i = BookingCommon.getRandomInt();
        return i
    },
    compareDates: function (e, t, i) {
        if (t = null == t ? new Date : t, !(i = null == i || i)) {
            var n = new Date(e.getFullYear(), e.getMonth(), e.getDate(), 0, 0, 0, 0),
                a = new Date(t.getFullYear(), t.getMonth(), t.getDate(), 0, 0, 0, 0);
            return BookingCommon.compareDates(n, a)
        }
        return e.getTime() > t.getTime() ? 1 : e.getTime() < t.getTime() ? 2 : 0
    },
    _setupImageSelector: function (e, t) {
        var i = t.find("#backgroundSelectImageHolder");
        e.image && Tools.setImage(i, e.image, "160x120", e.imageBase), t.find(".add-image").click((function () {
            FileManager.selectFile({
                listImagesOnly: !0,
                onCompleteCallback: function (e, t) {
                    Tools.setImage(i, t, "160x120", e)
                }
            })
        }))
    },
    showOperatorPopup: function (e, t, i, n) {
        if (n = null != n && n, (t = mergeUnique(t = null == t ? {} : t, {
            name: "",
            email: "",
            description: "",
            id: -1,
            color: "#4eb3ea"
        })).id < 0 && Website.bookingOperatorsLimit < 999 && Website.bookingOperators.length >= Website.bookingOperatorsLimit) Tools.showWindow({
            markup: format(Templates.get("warningPopup"), "title", M.NOT_ENOUGH_OPERATORS, "message", M.NOT_ENOUGH_OPERATORS_DESC, "button", M.UPGRADE),
            width: 500,
            noNav: !0,
            noTitle: !0,
            action: {
                onShow: function (e, t) {
                    t.on("click", 'a[data-role="continue"]', (function () {
                        e.close(), CPanel.goToUrl("/me/settings/billing")
                    }))
                }
            }
        });
        else {
            var a = [Button(M.SAVE, Button.CLASS_MIDDLE_BLUE, (function (t, i) {
                s(e, i, (function () {
                    t.close()
                }))
            })), Button.MIDDLE_CLOSE];
            n && -1 !== t.id && a.push(Button(M.DELETE, Button.CLASS_MIDDLE_RED, (function (e, t) {
                Tools.prompt(M.DELETE, M.DELETE_OPERATOR_CONFIRM, (function () {
                    o((function () {
                        e.close()
                    }))
                }))
            }), Button.FLOAT_LEFT));
            var s = function (e, n, a) {
                if ("" !== t.name.trim() && "" !== t.email.trim()) {
                    if (-1 === t.id)
                        if (null !== BookingCommon.getDataByProperty("email", t.email, e)) return void Tools.showError(M.OPERATOR_EMAIL_DUPLICATE);
                    var s = n.find("#backgroundSelectImageHolder");
                    t.image = s.data("image"), t.imageBase = s.data("imageBase");
                    var o = !1; - 1 === t.id && (t.id = BookingCommon.getNextId(e), o = !0), Tools.makeWebsiteRequest({
                        action: "setBookingOperators",
                        method: "post",
                        data: {
                            data: JSON.stringify(t),
                            new: o
                        },
                        onOk: function (t) {
                            e = null != t && null != t.data ? t.data : [], Website.bookingOperators = e, void 0 !== a && a(), void 0 !== i && i(e)
                        }
                    })
                } else Tools.showError(M.OPERATOR_MISSING_NAME_EMAIL)
            },
                o = function (n) {
                    Tools.makeWebsiteRequest({
                        action: "deleteBookingOperators",
                        method: "post",
                        data: {
                            id: t.id
                        },
                        onOk: function (t) {
                            e = null != t && null != t.data ? t.data : [], Website.bookingOperators = e, void 0 !== n && n(), void 0 !== i && i(e)
                        }
                    })
                },
                r = function (e) {
                    e.find(".selected-calendar-settings").text(null != t.calendarIdName ? t.calendarIdName : "Primary"), e.find(".busy-calendar-settings").text(null != t.freeBusyCalendarNames ? t.freeBusyCalendarNames.join(", ") : "Primary")
                };
            Tools.showWindow({
                isModal: !1,
                width: 500,
                title: t.id < 0 ? M.NEW_OPERATOR : M.SETTINGS,
                markup: Templates.get("bookingNewOperator"),
                buttons: a,
                action: {
                    onShow: function (i, n) {
                        BookingCommon._setupImageSelector(t, n);
                        var a = n.find('[data-role="link-google"]'),
                            o = n.find('[data-role="unlink-google"]');
                        toggleDisplay(n.find(".connected-calendar-wrapper"), !!t.token, !1), t.token ? (a.hide(), o.show(), r(n), t.connectedEmail && n.find(".connected-email").text(t.connectedEmail), n.find(".edit-calendar-settings").on("click", (function () {
                            ! function (e, t) {
                                var i, n;
                                Tools.makeWebsiteRequest({
                                    action: "googleCalendarList",
                                    data: {
                                        id: e.id
                                    },
                                    onOk: function (a) {
                                        Tools.showWindow({
                                            isModal: !1,
                                            width: 500,
                                            title: M.CHANGE_GOOGLE_SETTINGS,
                                            markup: Templates.get("bookingGoogleSettings"),
                                            action: {
                                                onShow: function (t, s) {
                                                    (i = s.find(".calendar-select")).empty(), (n = s.find(".calendar-busy-select")).empty(), a.data.forEach((function (t) {
                                                        "writer" !== t.access && "owner" !== t.access || i.append("<option value='" + t.value + "'>" + t.name + "</option>");
                                                        var a = -1 !== (e.freeBusyCalendars || ["primary"]).indexOf(t.value);
                                                        n.append("<div class='checkbox-wrapper col20 mt-5 f-left'><input id='" + t.value + "' type='checkbox' class='css-checkbox' value='" + t.value + "' " + (a ? "checked='checked'" : "") + " /><label for='" + t.value + "' class='css-label'>" + t.name + "</label></div>")
                                                    })), i.val(e.calendarId ? e.calendarId : "primary")
                                                },
                                                onHide: function () {
                                                    if (e.token) {
                                                        var a = i.val();
                                                        e.calendarId = "primary" !== a ? a : null, e.calendarIdName = "primary" !== a ? i.find(":selected").text() : null, e.freeBusyCalendars = [], e.freeBusyCalendarNames = [], $.each(n.find("input:checked"), (function () {
                                                            e.freeBusyCalendars.push($(this).val()), e.freeBusyCalendarNames.push($(this).siblings("label").text())
                                                        })), (0 === e.freeBusyCalendars.length || 1 === e.freeBusyCalendars.length && "primary" === e.freeBusyCalendars[0]) && (e.freeBusyCalendars = null, e.freeBusyCalendarNames = null)
                                                    } else e.calendarId = null, e.calendarIdName = null, e.freeBusyCalendars = null, e.freeBusyCalendarNames = null;
                                                    t()
                                                }
                                            }
                                        })
                                    }
                                })
                            }(t, (function () {
                                r(n)
                            }))
                        })), o.on("click", (function () {
                            t.token = null, t.calendarId = null, t.calendarIdName = null, t.freeBusyCalendars = null, t.freeBusyCalendarNames = null, s(e, n, (function () {
                                i.close()
                            }))
                        }))) : (o.hide(), a.show(), a.on("click", (function () {
                            s(e, n, (function () {
                                var e = function () {
                                    Tools.makeWebsiteRequest({
                                        action: "getOAuth2AuthorizationUrl",
                                        data: {
                                            type: "googleCalendar",
                                            email: t.email
                                        },
                                        onOk: function (e) {
                                            i.close(), window.location.href = e.data
                                        }
                                    })
                                };
                                window.googleAppValid, e()
                            }))
                        })));
                        var l = n.find(".color-pick-wrap div");
                        l.css("background-color", t.color ? t.color : "#ffffff"), l.click((function (e) {
                            var i = t.color ? t.color : Tools.colorFromString(t.name);
                            Tools.pickColor(i, e.currentTarget, (function (e) {
                                l.css("background-color", e), t.color = "rgba(255, 255, 255, 1)" === e ? null : e
                            }))
                        })), i.bindObject("data", t, [{
                            property: "name"
                        }, {
                            property: "description"
                        }, {
                            property: "email",
                            type: "email"
                        }], (function (e) {
                            t.color || "name" !== e.property || (t.color = Tools.colorFromString(t.name), l.css("background-color", t.color))
                        }))
                    }
                }
            })
        }
    },
    showServicesPopup: function (e, t, i, n) {
        var a;
        if (n = null != n && n, (t = mergeUnique(t = null == t ? {} : t, {
            name: "",
            description: "",
            type: "one-on-one",
            maxAttendees: 0,
            id: -1
        })).id < 0 && Website.bookingServicesLimit < 999 && Website.bookingServices.length >= Website.bookingServicesLimit) Tools.showWindow({
            markup: format(Templates.get("warningPopup"), "title", M.NOT_ENOUGH_SERVICES, "message", M.NOT_ENOUGH_SERVICES_DESC, "button", M.UPGRADE),
            width: 500,
            noNav: !0,
            noTitle: !0,
            action: {
                onShow: function (e, t) {
                    t.on("click", 'a[data-role="continue"]', (function () {
                        e.close(), CPanel.goToUrl("/me/settings/billing")
                    }))
                }
            }
        });
        else {
            var s = function (i) {
                var n = function () {
                    Tools.makeWebsiteRequest({
                        action: "setBookingServices",
                        method: "post",
                        data: {
                            data: JSON.stringify(t),
                            new: a
                        },
                        onOk: function (e) {
                            void 0 !== i && i(null != e && null != e.data ? e.data : [])
                        }
                    })
                },
                    a = !1; - 1 === t.id && (t.id = BookingCommon.getNextId(e), a = !0), "group" === t.type && t.maxAttendees < 2 && (t.type = "one-on-one"), "one-on-one" === t.type && (t.maxAttendees = 0), "group" !== t.type || a ? n() : function (e, t) {
                        Tools.makeWebsiteRequest({
                            action: "getBookings",
                            method: "get",
                            onOk: function (i) {
                                var n = !0;
                                i.data.forEach((function (t) {
                                    if (t.autoAssign) return t.operators.forEach((function (t) {
                                        if (0 !== t.services.length) return -1 !== t.services.indexOf(e) ? (n = !1, !0) : void 0
                                    })), !!n || void 0
                                })), t(n)
                            }
                        })
                    }(t.id, (function (e) {
                        e ? n() : Tools.showError("You cannot use group services with auto assign bookings.")
                    }))
            },
                o = [Button(M.SAVE, Button.CLASS_MIDDLE_BLUE, (function (e, n) {
                    if ("" !== t.name.trim()) {
                        var o = n.find("#backgroundSelectImageHolder");
                        t = Object.assign(t, {
                            duration: Math.max(a.get() || 30, 1),
                            image: o.data("image"),
                            imageBase: o.data("imageBase")
                        }), s((function (t) {
                            Website.bookingServices = t, i(t), e.close()
                        }))
                    } else Tools.showError(M.MISSING_SERVICE_NAME)
                })), Button.MIDDLE_CLOSE];
            n && -1 !== t.id && o.push(Button(M.DELETE, Button.CLASS_MIDDLE_RED, (function (e, n) {
                Tools.prompt(M.DELETE, M.DELETE_SERVICE_CONFIRM, (function () {
                    var e, n;
                    e = t.id, n = function (e) {
                        Website.bookingServices = e.data, i(e.data)
                    }, Tools.makeWebsiteRequest({
                        action: "deleteBookingServices",
                        method: "post",
                        data: {
                            id: e
                        },
                        onOk: function (e) {
                            void 0 !== n && n(e)
                        }
                    })
                })), e.close()
            }), Button.FLOAT_LEFT)), Tools.showWindow({
                isModal: !0,
                width: 500,
                title: t.id < 0 ? M.NEW_SERVICE : M.SETTINGS,
                markup: Templates.get("bookingNewService"),
                buttons: o,
                action: {
                    onShow: function (e, i) {
                        a = i.find(".service-duration").boxSelect({}), -1 !== t.id && a.set(t.duration), BookingCommon._setupImageSelector(t, i);
                        var n = i.find(".service-type-section");
                        "group" === t.type ? n.show() : n.hide();
                        var s = t.tags || [];
                        UITools.pickTags(i, s, (function () {
                            t.tags = s
                        })), e.bindObject("data", t, [{
                            property: "name"
                        }, {
                            property: "description"
                        }, {
                            property: "type"
                        }, {
                            property: "maxAttendees",
                            type: "number"
                        }], (function (e) {
                            "type" === e.property && ("group" === t.type ? n.show() : n.hide())
                        }))
                    }
                }
            })
        }
    },
    boxSelect: function (e) {
        var t = this,
            i = !1,
            n = e.dataType || "int";
        return this.on("click", ".duration-item", (function () {
            var e = $(this);
            e.parent().find(".duration-item").removeClass("active"), e.addClass("active").trigger("itemChange"), i = !0
        })), this.get = function () {
            var e = this.find(".duration-item.active"),
                t = e.data("role");
            if ("custom" === t) {
                var i = e.find("input").val() || e.data("role");
                return "int" === n ? parseInt(i) : i
            }
            return "int" === n ? parseInt(t) : t
        }, this.set = function (e) {
            this.find(".duration-item").removeClass("active");
            var t = this.find('.duration-item[data-role="' + e + '"]');
            if (t.length > 0) t.addClass("active");
            else {
                var i = this.find('.duration-item[data-role="custom"]');
                if (i.length > 0) return i.addClass("active"), void i.find("input").val(e);
                this.find(".duration-item:first").addClass("active")
            }
        }, this.reset = function () {
            i = !1, this.find(".duration-item").removeClass("active"), this.find(".duration-item:first").addClass("active"), t.trigger("itemChange")
        }, this.hasChange = function () {
            return i
        }, void 0 !== e.onChange && (this.on("itemChange", e.onChange), this.find(".duration-item input").on("change", e.onChange)), this
    },
    scheduledEvents: function (e) {
        var t = this,
            i = (e = null == e ? {} : e).data || [],
            n = Templates.get("bookingScheduledEventWrapper"),
            a = Templates.get("bookingCustomerInfo");
        this.set = function (e, t) {
            (t = null != t && t) || this.clear(), i = e || [], d(t)
        }, this.clear = function () {
            t.empty()
        }, this.setBookings = function (e) {
            e
        };
        var s = function (e) {
            var t = BookingCommon.parseDateString(e);
            return t.getFullYear() + t.getMonth() + t.getDate()
        },
            o = function (e) {
                var t = e.split(":"),
                    i = t[0] >= 12 ? "PM" : "AM";
                return t[0] = parseInt(t[0]) % 12 || 12, t[1] = ("0" + t[1]).slice(-2), t.join(":") + i
            },
            r = function (e, t) {
                return !!t && e.eventId === t.eventId && e.operatorId === t.operatorId && e.start.date === t.start.date && e.start.time === t.start.time && e.end.date === t.end.date && e.end.time === t.end.time
            },
            l = function (e, t, i) {
                if (i) {
                    var n = parseInt(t.data("count") ? t.data("count") : 0) + 1;
                    return t.text(n + " " + M.GROUP_BOOKED), void t.data("count", n)
                }
                e.name ? (t.text(e.name), e.email && t.append($("<span> (" + e.email + ")</span>"))) : t.text(e.formAnswers[0].value)
            },
            c = function (e, t, i) {
                if (i) {
                    t.find(".group-table").show();
                    var n = t.find("table"),
                        s = n.find("thead"),
                        o = n.find("tbody"),
                        r = $('<tr class="flex flex-row align-center" data-id="' + e.id + '"></tr>'),
                        l = $('<tr class="flex flex-row align-center"></tr>'),
                        c = 0;
                    return e.formAnswers.forEach((function (t) {
                        ! function (e, t, i, n, a) {
                            var s = "file" !== e.type ? escapeHtml(e.value) : '<a href="' + e.value + '" class="underline" target="_blank">' + escapeHtml(e.name) + "</a>";
                            i && i.append('<th class="flex-1">' + escapeHtml(e.field) + "</th>"), 0 !== a && 1 !== a || !n.contactId || "file" === e.type || (s = '<a href="/me/crm/contact/' + n.contactId + '" class="underline" rel="tab">' + s + "</a>"), t.append('<td class="flex-1">' + s + "</td>")
                        }(t, r, 0 === s.children().length ? l : null, e, c++)
                    })), o.append(r), void (0 === s.children().length && s.append(l))
                }
                var d = t.find(".event-form-answers");
                $.each(e.formAnswers, (function (e, t) {
                    var i = escapeHtml(t.field),
                        n = escapeHtml(t.value);
                    "file" === t.type && (n = '<a href="' + t.value + '" class="underline" target="_blank">' + escapeHtml(t.name) + "</a>");
                    var s = format(a, "label", i, "value", n);
                    d.append(s)
                }))
            },
            d = function () {
                if (0 !== i.length) {
                    var e, d, p, u, h = Templates.get("bookingScheduledEvent"),
                        f = null,
                        m = null,
                        g = null,
                        v = $(t).children(":last-child");
                    v.length > 0 && (f = (e = v).data("date"), d = e.find(".booked-items-wrapper"));
                    for (var b = 0; b < i.length; b++) {
                        var y = i[b];
                        if (f !== s(y.start.date)) {
                            f = s(y.start.date), e && t.append(e);
                            var w, _ = new Date,
                                T = BookingCommon.parseDateString(y.start.date);
                            w = T.toDateString(), 0 === BookingCommon.compareDates(_, T, !1) && (w += " (" + M.TODAY + ")"), (e = $(escapeFormat(n, "date", w))).data("date", f), d = e.find(".booked-items-wrapper")
                        }
                        var C = BookingCommon.parseDateString(y.end.date),
                            k = y.end.time.split(":");
                        C.setHours(k[0], k[1], 0, 0);
                        var E = BookingCommon.getDataById(y.operatorId, Website.bookingOperators),
                            x = 2 === BookingCommon.compareDates(C) ? "passed" : "",
                            S = $(escapeFormat(h, "id", y.id, "time", (p = y.start, u = y.end, "uk" === WebsiteSettings.getDateFormat() ? p.time + " - " + u.time : o(p.time) + " - " + o(u.time)), "eventName", y.eventData.name, "class", x)),
                            P = S.find(".more-info"),
                            I = S.find(".client"),
                            O = r(y, i[b + 1]);
                        if (null != m && r(y, m)) l(y, g.find(".client"), !0), c(y, g, !0);
                        else {
                            if (l(y, I, O), y.eventData.location && "" !== y.eventData.location.trim() && P.append(escapeFormat(a, "label", M.LOCATION, "value", y.eventData.location)), -1 !== y.serviceId) {
                                var A = BookingCommon.getDataById(y.serviceId, Website.bookingServices);
                                null !== A && P.append(escapeFormat(a, "label", M.SERVICE, "value", A.name))
                            }
                            if (E && (P.append(escapeFormat(a, "label", M.OPERATOR, "value", E.name)), E.color)) {
                                var L = S.find(".color-pick-wrap div");
                                L.css("background-color", E.color), L.show()
                            }
                            c(y, S, O), S.on("click", ".booked-event-header", (function () {
                                var e = $(this).closest(".booked-event"),
                                    t = e.find(".booked-event-info"),
                                    i = e.find(".middle-button.bordered-button");
                                e.toggleClass("open"), "none" === t.css("display") ? (i.text(M.HIDE_DETAILS), t.fadeIn("fast")) : (i.text(M.SHOW_DETAILS), t.fadeOut("fast"))
                            })), d.append(S), m = y, g = S
                        }
                    }
                    e && t.append(e)
                } else t.append(Templates.get("bookingNoDataRow"))
            };
        return t.clear(), d(), this
    },
    toUTCDateString: function (e, t) {
        return t = null == t || t, e.getFullYear() + "-" + ("0" + (e.getMonth() + 1)).slice(-2) + "-" + ("0" + e.getDate()).slice(-2) + (t ? "T00:00:00.000Z" : "")
    },
    parseDateString: function (e) {
        var t = e.split("-");
        return new Date(parseInt(t[0]), parseInt(t[1]) - 1, parseInt(t[2]))
    },
    initCalendar: function (e) {
        return e.datepicker({
            dateFormat: "us" === WebsiteSettings.getDateFormat() ? "mm/dd/yy" : "dd/mm/yy",
            monthNamesShort: [M.JAN, M.FEB, M.MAR, M.APR, M.MAY_SHORT, M.JUN, M.JUL, M.AUG, M.SEP, M.OCT, M.NOV, M.DEC],
            monthNames: [M.JANUARY, M.FEBRUARY, M.MARCH, M.APRIL, M.MAY, M.JUNE, M.JULY, M.AUGUST, M.SEPTEMBER, M.OCTOBER, M.NOVEMBER, M.DECEMBER]
        })
    },
    cancelBooking: function (e, t) {
        for (var i = [], n = $(e.currentTarget).closest(".booked-event"), a = n.find(".scrollable-table table tbody tr"), s = 0; s < a.length; s++) i.push($(a[s]).data("id"));
        Tools.prompt(M.CANCEL_SCHEDULED, M.CONFIRM_SCHEDULED, (function () {
            var e = n.data("id");
            Tools.makeWebsiteRequest({
                action: "cancelBooking",
                method: "post",
                data: {
                    id: e,
                    ids: JSON.stringify(i)
                },
                onOk: function () {
                    Tools.showAutohideMessage(5e3, "Event deleted"), t()
                }
            })
        }))
    }
};
WebPlatform.Widgets.Booking = function (e) {
    if (!WebPlatform.Widgets.shouldRender(e.container)) return null;
    var t, i, n, a, s, o, r, l, c, d, p, u, h = {},
        f = [],
        m = e.container,
        g = m.find(".booking-datepicker"),
        v = m.find(".time-select"),
        b = m.find(".calendar-section"),
        y = m.find(".form-section"),
        w = m.find(".confirmation-section"),
        _ = m.find(".selected-date-label"),
        T = m.find(".selected-time-label"),
        C = m.find(".service-section"),
        k = m.find(".operator-section"),
        E = m.find(".selected-service-name"),
        x = m.find(".selected-operator-name"),
        S = m.find(".submit-button"),
        M = !1,
        P = 0,
        I = function (e) {
            var t = [WebPlatform.Phrases["label.jan"], WebPlatform.Phrases["label.feb"], WebPlatform.Phrases["label.mar"], WebPlatform.Phrases["label.apr"], WebPlatform.Phrases["label.may_short"], WebPlatform.Phrases["label.jun"], WebPlatform.Phrases["label.jul"], WebPlatform.Phrases["label.aug"], WebPlatform.Phrases["label.sep"], WebPlatform.Phrases["label.oct"], WebPlatform.Phrases["label.nov"], WebPlatform.Phrases["label.dec"]],
                i = [WebPlatform.Phrases["label.sunday_short"], WebPlatform.Phrases["label.monday_short"], WebPlatform.Phrases["label.tuesday_short"], WebPlatform.Phrases["label.wednesday_short"], WebPlatform.Phrases["label.thursday_short"], WebPlatform.Phrases["label.friday_short"], WebPlatform.Phrases["label.saturday_short"]],
                n = e.getDate(),
                a = e.getMonth(),
                s = e.getFullYear();
            return i[e.getDay()] + ", " + t[a] + " " + n + " " + s
        },
        O = function (e, t) {
            for (var i = 0; i < t.length; i++)
                if (t[i].id === parseInt(e)) return t[i];
            return null
        },
        A = function (e, t) {
            if (a && s) {
                var i = new Date(e, t - 1, 1);
                K(i, "onChangeMonth", null, !1)
            }
        },
        L = function () {
            var e = g.datepicker("getDate");
            J(h[N(e)], e), _.text(I(e)), U()
        },
        D = function (e, t) {
            return t = null == t || t, e.getFullYear() + "-" + ("0" + (e.getMonth() + 1)).slice(-2) + "-" + ("0" + e.getDate()).slice(-2) + (t ? "T00:00:00.000Z" : "")
        },
        N = function (e) {
            return a + "-" + s + "_" + e.getFullYear() + "-" + e.getMonth()
        },
        R = function (e) {
            for (var t in e)
                if (e.hasOwnProperty(t)) return !1;
            return JSON.stringify(e) === JSON.stringify({})
        },
        W = function () {
            var e;
            e = function () {
                var e, t = m.find(".timezone-popup"),
                    i = t.find(".tz-select");
                i.empty(), p.forEach((function (t) {
                    e = u === t.id ? "class='selected'" : "", i.append("<li " + e + ' data-id="' + t.id + '">' + t.name + "</option>")
                })), WebPlatform.Popups.showSimplePopup(t.html(), 500, (function (e, t) {
                    m.find(".timezone-popup").show();
                    var i = t.find(".tz-select");
                    i.find(".selected")[0].scrollIntoView(), i.on("click", "li", (function () {
                        u = $(this).data("id"), m.find('span[data-role="current-timezone"]').text($(this).text()), h = {}, K(g.datepicker("getDate")), e.close()
                    }));
                    var n = t.find("[name='tz-search']");
                    n.focus(), n.on("keyup", (function () {
                        var e = n.val();
                        F(e, i)
                    }))
                }))
            }, p ? e() : WebPlatform.makeClientWebsiteRequest({
                action: "listTimezones",
                onOk: function (t) {
                    t.data && (p = t.data, e())
                }
            })
        },
        F = $.debounce(250, (function (e, t) {
            var i = t.find("li");
            i.removeClass("none"), $.each(i, (function (t, i) {
                var n = $(i); - 1 === n.text().toLowerCase().indexOf(e.toLowerCase()) && n.addClass("none")
            }))
        })),
        B = function () {
            if (t.name = decodeURIComponent(t.name), t.description = t.description ? WebPlatform.escapeHtml(decodeURIComponent(t.description)) : "", t.location = t.location ? decodeURIComponent(t.location) : "", m.find(".booking-name-label").text(t.name), m.find(".book-description").html(t.description.replace(/\n/g, "<br />")), window.ClientTools) {
                var i = m.find(".widget-form");
                ClientTools.setupFormFields(i);
                var r = i.find(".recaptcha-target");
                (M = r.length > 0) && ClientTools.setupRecaptcha({
                    ui: r,
                    button: S
                })
            }
            if (g.datepicker({
                firstDay: window.weekStartsAtMonday ? 1 : 0,
                minDate: new Date,
                maxDate: "+15m",
                onSelect: L,
                onChangeMonthYear: A,
                beforeShowDay: function (e) {
                    return -1 !== f.indexOf(D(e, !1)) ? [!0, ""] : [!1, ""]
                },
                monthNames: [WebPlatform.Phrases["label.january"], WebPlatform.Phrases["label.february"], WebPlatform.Phrases["label.march"], WebPlatform.Phrases["label.april"], WebPlatform.Phrases["label.may"], WebPlatform.Phrases["label.june"], WebPlatform.Phrases["label.july"], WebPlatform.Phrases["label.august"], WebPlatform.Phrases["label.september"], WebPlatform.Phrases["label.october"], WebPlatform.Phrases["label.november"], WebPlatform.Phrases["label.december"]],
                dayNamesMin: [WebPlatform.Phrases["label.sunday_min"], WebPlatform.Phrases["label.monday_min"], WebPlatform.Phrases["label.tuesday_min"], WebPlatform.Phrases["label.wednesday_min"], WebPlatform.Phrases["label.thursday_min"], WebPlatform.Phrases["label.friday_min"], WebPlatform.Phrases["label.saturday_min"]]
            }), t.location ? (m.find(".event-location").show(), m.find(".location").text(t.location)) : m.find(".event-location").hide(), t.autoAssign && m.find(".operator").hide(), _.text(I(g.datepicker("getDate"))), v.on("click", "li", (function () {
                var e, i, r, l, c, d, p, u, h = $(this);
                v.find("li").removeClass("active"), h.addClass("active"), o = h.data("time"), T.text((e = h[0].childNodes[0].nodeValue, i = -1 !== s ? O(s, n).duration : t.autoAssign ? t.operators[0].duration : O(a, t.operators).duration, r = "dd/mm/yy" === WebPlatform.dateFormat, l = e.split(" "), c = l[0].split(":"), d = parseInt(c[0]), p = parseInt(c[1]), u = l[1], (p = parseInt(p) + i) >= 60 && (d = Math.floor(p / 60) + d, p %= 60, !r && (12 === d || d > 12 && parseInt(c[0]) < 12) && (u = "AM" === u ? "PM" : "AM")), !r && d > 12 && (d %= 12), e + " - " + ("0" + d).slice(-2) + ":" + ("0" + p).slice(-2) + " " + (r ? "" : u))), H(), Z()
            })), function () {
                var e = m.find('span[data-role="current-timezone"]');
                try {
                    var t = (new Date).toString().split(" ").splice(5),
                        i = t.splice(0, 1)[0] || "";
                    i && (i = " (" + i.substr(0, i.length - 2) + ":" + i.substr(-2) + ")");
                    var n = (t.join(" ") || "").replace(/[()]/g, "") || "Times in";
                    e.text(n + i)
                } catch (t) {
                    Log.error(t);
                    var a = window.jstz ? jstz.determine().name() : "Times in GMT";
                    e.text(a)
                }
            }(), m.find(".back-button").click(z), m.find(".change-timezone").click(W), m.find('[data-role="hide-time"]').click(H), u = window.jstz ? jstz.determine().name() : "UTC", "service" === e.startWith) return c = [C, k, b, y, w], void q();
            c = [k, C, b, y, w], V()
        },
        U = function () {
            b.addClass("date-selected")
        },
        H = function () {
            b.removeClass("date-selected")
        },
        z = function () {
            H();
            var t = c.indexOf(d); - 1 === t && (c.unshift("service" === e.startWith ? C : k, d), t = c.indexOf(d)), d.addClass("none"), (d = c[t - 1]).removeClass("none"), G()
        },
        G = function () {
            var e = c.indexOf(d) + 1,
                t = c.length - 1,
                i = m.find(".form-progress-wrapper");
            i.find("span").text(e + " " + (WebPlatform.Phrases["label.of"] || "of") + " " + t), i.find(".success-bar").css("width", e / t * 100 + "%")
        },
        q = function () {
            var i = {};
            if (t.autoAssign || "service" === e.startWith) {
                for (var s = 0; s < t.operators.length; s++)
                    for (var o = 0; o < t.operators[s].services.length; o++)
                        if (!i[t.operators[s].services[o]]) {
                            var r = t.operators[s].services[o];
                            (u = O(r, n)) && (i[r] = u)
                        }
            } else {
                var p = O(a, t.operators);
                for (s = 0; s < p.services.length; s++)
                    if (!i[p.services[s]]) {
                        var u;
                        r = p.services[s];
                        (u = O(r, n)) && (i[r] = u)
                    }
            }
            if ((l = Object.keys(i).length) <= 1) {
                var h = c.indexOf(C);
                return -1 !== h && c.splice(h, 1), 1 === l ? j(Object.keys(i)[0]) : 0 === l && j(-1), void G()
            }
            var f = C.find('ul[data-role="service-select"]');
            f.empty(), C.removeClass("none"), d = C, c[0] === d && C.find(".back-button").hide(), $.each(i, (function (e, t) {
                var i, n, a = t.image ? getThumbnailsFromBase(t.imageBase, "160x120") + t.image + "?format=webp" : "";
                f.append(WebPlatform.escapeFormat((i = !!a, n = !!t.description, '<li><a data-action="selectService" data-id="%id%">' + (i ? '<span class="service-img" style="background-image: url(%img%);"></span><div>' : "<div>") + '<span class="option-title">%title%</span><span class="option-desc">%duration%</span>' + (n ? '<span class="option-desc">%description%</span>' : "") + "</div></a></li>"), "id", e, "title", t.name, "duration", t.duration + " " + WebPlatform.Phrases["label.minutes_short"], "img", a, "description", t.description))
            })), f.on("click", 'a[data-action="selectService"]', (function () {
                var e = $(this);
                e.parent("li").siblings("li").find("a").removeClass("active"), e.addClass("active"), j(e.data("id"))
            })), G()
        },
        j = function (i) {
            if (C.addClass("none"), s = parseInt(i), P = 0, -1 !== s) {
                var a = O(s, n);
                E.text(a.name)
            } else E.text(t.name);
            "service" !== e.startWith ? K() : V()
        },
        V = function () {
            if (t.autoAssign) return -1 !== (l = c.indexOf(k)) && c.splice(l, 1), Y(-1), void G();
            var n = {};
            if ("service" === e.startWith)
                for (var a = 0; a < t.operators.length; a++) {
                    if (s > 0 && -1 !== t.operators[a].services.indexOf(s) || -1 === s && 0 === t.operators[a].services.length) n[o = t.operators[a].id] || (n[o] = O(o, i))
                } else
                for (a = 0; a < t.operators.length; a++)
                    if (!n[t.operators[a].id]) {
                        var o = t.operators[a].id;
                        n[t.operators[a].id] = O(o, i)
                    } r = Object.keys(n).length;
            var l, p = k.find('ul[data-role="operator-select"]');
            (p.empty(), r > 1) ? (k.removeClass("none"), d = k, c[0] === d && k.find(".back-button").hide(), $.each(n, (function (e, t) {
                if (null != t) {
                    var i, n, a = t.image ? getThumbnailsFromBase(t.imageBase, "160x120") + t.image + "?format=webp" : "";
                    p.append(WebPlatform.escapeFormat((i = !!a, n = !!t.description, '<li><a data-action="selectOperator" data-id="%id%">' + (i ? '<span class="operator-img" style="background-image: url(%img%);"></span><div>' : "<div>") + '<span class="option-title">%title%</span>' + (n ? '<span class="option-desc">%description%</span>' : "") + "</div></a></li>"), "id", e, "title", t.name, "description", t.description || "", "img", a))
                }
            })), p.on("click", 'a[data-action="selectOperator"]', (function () {
                var e = $(this);
                e.parent("li").siblings("li").find("a").removeClass("active"), e.addClass("active"), Y(e.data("id"))
            }))) : (-1 !== (l = c.indexOf(k)) && c.splice(l, 1), Y(Object.keys(n)[0]));
            G()
        },
        Y = function (n) {
            if (k.addClass("none"), a = parseInt(n), P = 0, !t.autoAssign) {
                var s = O(a, i);
                if (null == s) return;
                x.text(s.name)
            }
            "service" !== e.startWith ? q() : K()
        },
        K = function (e, i, n, o) {
            o = !!isUndefined(o) || o, e = e || new Date, n = n || dummy, b.removeClass("none"), d = b, c[0] === d && b.find(".back-button").hide();
            var r = N(e);
            if (h.hasOwnProperty(r)) X(h[r]), e = Q(h[r], e, o), J(h[r], e), n();
            else {
                var l = {
                    bookingId: t.id,
                    operatorId: a,
                    serviceId: s,
                    startDate: D(e, !1),
                    endDate: D(new Date(e.getFullYear(), e.getMonth() + 1, 0), !1),
                    timeZone: u
                };
                WebPlatform.makeClientWebsiteRequest({
                    action: "getAvailableDates",
                    data: {
                        data: JSON.stringify(l)
                    },
                    onOk: function (t) {
                        h[r] = t.data, X(h[r]), e = Q(h[r], e, R(t.data), i), !i && R(t.data) && K(e, i, n, o), J(h[r], e), n()
                    }
                })
            }
            G()
        },
        X = function (e) {
            f = Object.keys(e), g.datepicker("refresh")
        },
        Q = function (e, t, i, n) {
            if ("onChangeMonth" === n) return t;
            var a, s = [];
            for (var o in e) e.hasOwnProperty(o) && s.push(o);
            if (!i && 0 === s.length) return t;
            if (0 === s.length) return ++P % 6 == 0 ? (g.datepicker("setDate", t), _.text(I(t)), t) : 11 === t.getMonth() ? new Date(t.getFullYear() + 1, 0, 1) : new Date(t.getFullYear(), t.getMonth() + 1, 1);
            s.sort();
            for (var r = 0; r < s.length; r++) {
                a = new Date(t.getTime());
                var l = s[r].split("-");
                if (a.setFullYear(l[0]), a.setMonth(parseInt(l[1]) - 1), a.setDate(l[2]), a.getMonth() === t.getMonth()) {
                    g.datepicker("setDate", a), _.text(I(a));
                    break
                }
            }
            return a
        },
        J = function (e, t) {
            if (null != t) {
                v.empty();
                var i = "dd/mm/yy" === WebPlatform.dateFormat;
                $.each(e[D(t, !1)], (function (e, t) {
                    var n, a, s, o, r, l = i ? t.time : (n = t.time, a = n.split(":"), s = parseInt(a[0]), o = parseInt(a[1]), r = s >= 12 ? "PM" : "AM", (s = ("0" + (s = s % 12 || 12)).slice(-2)) + ":" + (o = ("0" + o).slice(-2)) + " " + r),
                        c = t.data ? "<span>" + t.data + " " + WebPlatform.Phrases["label.slots_left"] + "</span>" : "";
                    v.append("<li data-time='" + t.time + "'>" + l + c + "</li>")
                }))
            }
        },
        Z = function () {
            var e = [];
            a || e.push("Please select operator."), s || e.push("Please select service."), g.datepicker("getDate") || e.push("Please select date."), o || e.push("Please select time."), e.length > 0 ? WebPlatform.showClientError(e.join("<br>"), 5e3) : (b.addClass("none"), y.removeClass("none"), d = y, S.off("click"), S.click((function () {
                te()
            })), G())
        },
        ee = function () {
            M && window.ClientTools && ClientTools.resetRecaptcha(m, S)
        },
        te = function () {
            if (!S.hasClass("disabled")) {
                var e = w.find(".call-to-action.button");
                if (e.addClass("none"), t.confirmation.title || t.confirmation.buttonText) {
                    var i = t.confirmation;
                    i.title && w.find(".confirmation-title").text(i.title), i.description && w.find(".confirmation-description").html(WebPlatform.escapeHtml(i.description).replace(/\n/g, "<br />")), i.buttonLink && (e.removeClass("none"), e.attr("href", i.buttonLink), e.find(".cta-text").text(i.buttonText))
                }
                var n = m.find(".widget-form .form-field").not('[data-type="section"]'),
                    r = ClientTools.readFormFields(n);
                if (!r.hasErrors) {
                    var l = D(g.datepicker("getDate"), !1),
                        c = {
                            id: t.id,
                            operatorId: a,
                            serviceId: s,
                            date: l,
                            time: o,
                            timeZone: u
                        },
                        d = m.find('input[name="formid"]').val(),
                        p = {
                            action: "reserveBooking",
                            method: "post",
                            data: {
                                data: JSON.stringify(c),
                                values: r.values,
                                form: d
                            },
                            onOk: function (e) {
                                if (WebPlatform.Events.trigger(m, WebPlatform.Events.FORM_SUBMITTED, {
                                    formId: d,
                                    values: r.values,
                                    uid: e.uid
                                }), m.find(".field-with-error").removeClass("field-with-error"), e.data && e.data.errors) {
                                    var i = e.data.errors;
                                    if (ee(), "existing" === i) return void ClientTools.showMessageBox(WebPlatform.Phrases["label.contact_booked_error"], b, "before", !0, 1e4);
                                    if ("notice" === i) return void ClientTools.showMessageBox(WebPlatform.Phrases["label.booking_notice_error"], b, "before", !0, 1e4);
                                    if ("booked" === i) return ClientTools.showMessageBox(WebPlatform.Phrases["label.already_booked_time_error"], b, "before", !0, 1e4), void z();
                                    for (var a = 0; a < i.length; ++a) i[a] && n.eq(a).addClass("field-invalid")
                                } else if (y.addClass("none"), WebPlatform.lastFormParams = params = "name=" + encodeURIComponent(t.name) + "&date=" + encodeURIComponent(c.date) + "&time=" + encodeURIComponent(c.time), t.confirmation && t.confirmation.link) {
                                    var s = 0 !== t.confirmation.link.toLowerCase().trim().indexOf("javascript:");
                                    window.location.href = s ? t.confirmation.link + (t.confirmation.link.indexOf("?") < 0 ? "?" : "&") + params : t.confirmation.link
                                } else t.confirmation && 0 === Object.keys(t.confirmation).length && w.find(".call-to-action.button").hide(), m.find(".call-to-action2").click((function () {
                                    WebPlatform.makeClientWebsiteRequest({
                                        action: "getBookingIcs",
                                        method: "get",
                                        data: {
                                            id: e.data.id,
                                            timeZone: u
                                        },
                                        onOk: function (e) {
                                            var t = document.createElement("a");
                                            t.download = "event.ics";
                                            var i = new Blob([e.data], {
                                                type: "text/plain;charset=UTF-8",
                                                encoding: "UTF-8"
                                            });
                                            t.href = window.URL.createObjectURL(i), t.click()
                                        }
                                    })
                                })), w.removeClass("none")
                            },
                            onNotOk: function (e) {
                                ee(), ClientTools.showMessageBox(e.message, S, "after", !0, 1e4)
                            }
                        };
                    r.file ? WebPlatform.makeClientWebsiteRequestWithFile(p, r.file) : WebPlatform.makeClientWebsiteRequest(p)
                }
            }
        };
    return {
        _init: function () {
            return function () {
                if (null !== (t = e.booking || null)) {
                    e.preview && (t.name = encodeURIComponent(t.name || ""), t.location = encodeURIComponent(t.location || ""), t.description = encodeURIComponent(t.description || ""));
                    var a = function () {
                        var e = [],
                            a = [];
                        (t.operators || []).forEach((function (t) {
                            e.push(t.id), t.services && t.services.length && Array.prototype.push.apply(a, t.services)
                        })), WebPlatform.makeClientWebsiteRequest({
                            action: "getBookingOperatorsAndServices",
                            data: {
                                operators: JSON.stringify(e),
                                services: JSON.stringify(a)
                            },
                            onOk: function (e) {
                                var t = e.data;
                                i = t.operators, n = t.services, 0 !== (i || []).length ? B() : m.find('[data-role="no-operators"]').removeClass("none")
                            }
                        })
                    };
                    if (window.ClientTools) {
                        var s = 2;
                        ClientTools.requestResource(resources + "/scripts/jquery-ui.min.js?v=" + resourcesVersion, resources + "/styles/jquery-ui.min.css?v=" + resourcesVersion, (function () {
                            return !!$.datepicker
                        }), (function () {
                            0 == --s && a()
                        })), ClientTools.requestResource(resources + "/scripts/external/jstz.js", null, (function () {
                            return !!window.jstz
                        }), (function () {
                            0 == --s && a()
                        }))
                    } else a()
                }
            }(), delete this._init, this
        }
    }._init()
};
var CSVContactsImporter = function () {
    var e, t = -1,
        i = ",",
        n = function (t) {
            var i, n, c = [Button(M.NEXT, Button.CLASS_MIDDLE_BLUE, (function (n, a) {
                var r = o(a),
                    c = l(r),
                    d = i.is(":checked"); - 1 !== c.indexOf("email") ? -1 !== c.indexOf("") ? Tools.prompt(M.WARNING, M.NON_MAPPED_CHECK, (function () {
                        s(r, t, d, (function () {
                            n.close(), e()
                        }))
                    })) : s(r, t, d, (function () {
                        n.close(), e()
                    })) : Tools.showError(M.MISSING_EMAIL_FIELD)
            })), Button.MIDDLE_CLOSE];
            Tools.showWindow({
                noTitle: !0,
                isModal: !0,
                width: 850,
                buttons: c,
                markup: Templates.get("importContactsMain"),
                action: {
                    onShow: function (e, s) {
                        var l = s.find(".button-wrapper");
                        i = s.find("#includeHeader"), l.hide();
                        var c = new FileReader;
                        c.onload = function () {
                            n = c.result;
                            a(n, s, i.is(":checked"));
                            l.show()
                        };
                        var d = t.slice(0, 5120);
                        c.readAsText(d), i.on("change", (function () {
                            var e = i.is(":checked"),
                                t = o(s);
                            a(n, s, e);
                            r(s, t), e ? (s.find("th.title").show(), s.find("td.title").show()) : (s.find("th.title").hide(), s.find("td.title").hide())
                        }))
                    }
                }
            })
        },
        a = function (e, t, n) {
            var a = Templates.get("importContactsRow"),
                s = e.split(/[\n\r]+/g);
            i = h(s) || ",";
            var o = s[0].split(i),
                r = function (e, t) {
                    t = t || ",";
                    var i = new RegExp("(\\" + t + '|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\' + t + "\\r\\n]*))", "gi"),
                        n = [
                            []
                        ],
                        a = null;
                    for (; a = i.exec(e);) {
                        var s, o = a[1];
                        o.length && o !== t && n.push([]), s = a[2] ? a[2].replace(new RegExp('""', "g"), '"') : a[3], n[n.length - 1].push(s)
                    }
                    return n
                }(e, i);
            n && r.splice(0, 1), r.length > 3 && (r = r.slice(0, 3));
            var l = c(),
                u = t.find("tbody"),
                f = 0;
            return u.empty(), o.forEach((function (e) {
                if ("" !== e) {
                    p(e) && (e = e.replace(/"/g, ""));
                    var t = d(e, l),
                        i = $(escapeFormat(a, "field", e)),
                        n = i.find("select");
                    n.prop("name", f), n.append(t.template), n.on("change", (function () {
                        $(this).parents("tr").find('[data-role="status-icon"]').removeClass("none")
                    }));
                    var s = "";
                    r.forEach((function (e) {
                        s += (e[f] || "-") + "<br />"
                    })), ++f, i.find(".sample").append(s), t.autoSelected && i.find('[data-role="status-icon"]').removeClass("none"), u.append(i)
                }
            })), s
        },
        s = function (e, n, a, s) {
            var o = {
                hasHeader: a,
                fields: JSON.stringify(e),
                separator: i,
                listId: t
            };
            Tools.makeWebsiteRequestWithFile({
                action: "importContacts",
                method: "post",
                data: o,
                onOk: function (e) {
                    Website.onImportExportTaskStarted("IMPORT_CONTACTS"), Tools.showWindow({
                        noNav: !0,
                        noTitle: !0,
                        width: 500,
                        withDarkBackground: !0,
                        isModal: !1,
                        showCloseButton: !0,
                        markup: format(Templates.get("confirmationMessage"), "message", M.IMPORT_IN_PROGRESS)
                    }), s()
                }
            }, n)
        },
        o = function (e) {
            var t = e.find("select"),
                i = {};
            return $.each(t, (function (e, t) {
                var n = t.name;
                i[n] = $(t).val()
            })), i
        },
        r = function (e, t) {
            $.each(t, (function (t, i) {
                var n = e.find('select[name="' + t + '"]');
                n.val(i), "" !== i && n.parents("tr").find('[data-role="status-icon"]').removeClass("none")
            }))
        },
        l = function (e) {
            var t = [];
            return $.each(e, (function (e, i) {
                t.push(i)
            })), t
        },
        c = function () {
            var e = $.extend(!0, [], Website.crmProperties);
            return e.push({
                name: "tags",
                label: M.TAGS
            }), e.push({
                name: "create_member",
                label: M.CREATE_MEMBER
            }), e.push({
                name: "member_password",
                label: M.MEMBER_PASSWORD
            }), e.push({
                name: "member_groups",
                label: M.MEMBER_GROUPS
            }), e.unshift({
                name: "",
                label: M.SELECT_PROPERTY
            }, {
                name: "skip",
                label: M.SKIP
            }), e
        },
        d = function (e, t) {
            var i = function (e) {
                return e.toLowerCase().trim().replace(/([^a-z])/g, "")
            },
                n = {
                    name: ["fullname", "firstname"],
                    address: ["addr"],
                    companyname: ["company"],
                    membergroups: ["groups", "group", "membergroup"],
                    createmember: ["member", "newmember", "ismember", "makemember", "registered", "register", "isregistered", "isregister"],
                    tags: ["tag"]
                };
            e = i(e);
            var a = "",
                s = !1;
            return t.forEach((function (t) {
                var o = i(t.name),
                    r = i(t.label),
                    l = e === o || e === r;
                l || (l = (n[o] || n[r] || []).indexOf(e) > -1), s = s || l, a += '<option value="' + t.name + '"' + (l ? ' selected="selected"' : "") + ">" + t.label + "</option>"
            })), {
                template: a,
                autoSelected: s
            }
        },
        p = function (e) {
            return u(e, '"') || u(e, "'")
        },
        u = function (e, t) {
            var i = !1;
            if (e[0] !== t) return !1;
            if (e[e.length - 1] !== t) return !1;
            for (var n = 1; n < e.length - 1; n++)
                if (e[n] === t) i = !i;
                else if (i) return !1;
            return !i
        },
        h = function (e) {
            if (0 === e.length) return null;
            var t = /[,;|\t]/g,
                i = [];
            if (e.forEach((function (e) {
                i = i.concat((e || "").match(t))
            })), 0 === i.length) return null;
            for (var n = {}, a = i[0], s = 1, o = 0; o < i.length; o++) {
                var r = i[o];
                null == n[r] ? n[r] = 1 : n[r]++, n[r] > s && (a = r, s = n[r])
            }
            return a
        };
    return {
        start: function (i, a) {
            isUndefined(i) || (t = i), e = a || dummy, Tools.showWindow({
                noTitle: !0,
                isModal: !0,
                width: 500,
                markup: Templates.get("importContactsWelcome"),
                action: {
                    onShow: function (e, t) {
                        t.find(".big-button.blue").click((function () {
                            if (t.find("#agree").is(":checked")) {
                                var i = t.find('[name="csv"]');
                                i.on("change", (function (t) {
                                    if (0 !== i.length && 0 !== i[0].files.length && 0 !== i[0].files[0].size) {
                                        var a = i[0].files[0];
                                        (a.name || "").toLowerCase().endsWith(".csv") ? (n(a), e.close()) : Tools.showError("Please select a CSV file")
                                    } else Tools.showError(M.EMPTY_CSV)
                                })), i.trigger("click")
                            } else Tools.showError(M.IMPORT_AGREE_ERROR)
                        }))
                    }
                }
            })
        }
    }
},
    CSVProductsImporter = function () {
        var e = ",",
            t = [],
            i = {},
            n = function (e) {
                var t, i, n, o = [Button(M.NEXT, Button.CLASS_MIDDLE_BLUE, (function (i, a) {
                    var o = l(a),
                        c = d(o),
                        p = t.is(":checked"),
                        u = a.find('select[name="categoryDelimiter"]').val(),
                        h = a.find('select[name="subcategoryDelimiter"]').val();
                    !1 !== s(c) && (-1 === c.indexOf("") ? (r(o, e, p, u, h, n), i.close()) : Tools.prompt(M.WARNING, M.NON_MAPPED_CHECK, (function () {
                        r(o, e, p, u, h, n), i.close()
                    })))
                })), Button.MIDDLE_CLOSE],
                    p = function (e, t) {
                        for (var i = Math.min(e.length, 3), n = [], a = 0; a < i; a++) n.push(e[a]);
                        var s = new Blob(n).size / i;
                        return Math.round(t.size / s)
                    };
                Tools.showWindow({
                    noTitle: !0,
                    isModal: !0,
                    width: 850,
                    buttons: o,
                    markup: Templates.get("importProductsMain"),
                    action: {
                        onShow: function (s, o) {
                            var r = o.find(".button-wrapper");
                            t = o.find("#includeHeader"), r.hide();
                            var d = new FileReader;
                            d.onload = function () {
                                i = d.result;
                                var s = a(i, o, t.is(":checked"));
                                n = p(s, e), r.show()
                            };
                            var u = e.slice(0, 5120);
                            d.readAsText(u), t.on("change", (function () {
                                var s = t.is(":checked"),
                                    r = l(o),
                                    d = a(i, o, s);
                                n = p(d, e), c(o, r), s ? (o.find("th.title").show(), o.find("td.title").show()) : (o.find("th.title").hide(), o.find("td.title").hide())
                            }))
                        }
                    }
                })
            },
            a = function (t, i, n) {
                var a = Templates.get("importProductsRow"),
                    s = t.split(/[\n\r]+/g);
                e = m(s) || ",";
                var o = s[0].split(e);
                "" === o[o.length - 1] && o.pop();
                var r = function (e, t) {
                    t = t || ",";
                    var i = new RegExp("(\\" + t + '|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\' + t + "\\r\\n]*))", "gi"),
                        n = [
                            []
                        ],
                        a = null;
                    for (; a = i.exec(e);) {
                        var s, o = a[1];
                        o.length && o !== t && n.push([]), s = a[2] ? a[2].replace(new RegExp('""', "g"), '"') : a[3], n[n.length - 1].push(s)
                    }
                    return n
                }(t, e);
                n && r.splice(0, 1), r.length > 3 && (r = r.slice(0, 3));
                var l = p(),
                    c = i.find("tbody"),
                    d = 0;
                return c.empty(), o.forEach((function (e) {
                    h(e) && (e = e.replace(/"/g, ""));
                    var t = u(e, l),
                        i = $(escapeFormat(a, "field", e)),
                        n = i.find("*[id*=import_product_property]");
                    n.prop("name", d), n.append(t.template), n.on("change", (function () {
                        $(this).parents("tr").find('[data-role="status-icon"]').removeClass("none")
                    }));
                    var s = "";
                    r.forEach((function (e) {
                        s += (e[d] || "-") + "<br />"
                    })), ++d, i.find(".sample").append(s), t.autoSelected && i.find('[data-role="status-icon"]').removeClass("none"), c.append(i)
                })), s
            },
            s = function (e) {
                return -1 === e.indexOf("title") ? (Tools.showError(M.MISSING_TITLE_FIELD), !1) : -1 === e.indexOf("url") ? (Tools.showError(M.MISSING_HANDLE_FIELD), !1) : -1 === e.indexOf("variants_price") ? (Tools.showError(M.MISSING_PRICE_FIELD), !1) : !o(e) || (Tools.showError(M.IMPORT_PRODUCTS_FIELDS_ARE_MAPPED_MORE_THAN_ONCE), !1)
            },
            o = function (e) {
                var t = e.filter((function (e) {
                    return e && "skip" !== e
                }));
                return new Set(t).size !== t.length
            },
            r = function (t, n, a, s, o, r) {
                Tools.makeWebsiteRequestWithFile({
                    action: "importProducts",
                    method: "post",
                    data: {
                        hasHeader: a,
                        categoryDelimiter: s,
                        subcategoryDelimiter: o,
                        fields: JSON.stringify(t),
                        separator: e,
                        storeSettings: JSON.stringify(i)
                    },
                    onOk: function (e) {
                        Website.onImportExportTaskStarted("IMPORT_STORE_PRODUCTS"), Tools.showWindow({
                            noNav: !0,
                            noTitle: !0,
                            width: 500,
                            withDarkBackground: !0,
                            isModal: !1,
                            showCloseButton: !0,
                            markup: format(Templates.get("confirmationMessage"), "message", M.IMPORT_IN_PROGRESS)
                        })
                    }
                }, n)
            },
            l = function (e) {
                var t = e.find('[data-role="import-fields"] select'),
                    i = {};
                return $.each(t, (function (e, t) {
                    var n = t.name;
                    i[n] = $(t).val()
                })), i
            },
            c = function (e, t) {
                $.each(t, (function (t, i) {
                    var n = e.find('select[name="' + t + '"]');
                    n.val(i), n.parents("tr").find('[data-role="status-icon"]')[i ? "removeClass" : "addClass"]("none")
                }))
            },
            d = function (e) {
                var t = [];
                return $.each(e, (function (e, i) {
                    t.push(i)
                })), t
            },
            p = function () {
                var e = $.extend(!0, [], t);
                return e.push({
                    name: "",
                    label: M.SELECT_PROPERTY
                }), e.push({
                    name: "skip",
                    label: M.SKIP
                }), e.push({
                    name: "title",
                    label: M.IMPORT_PRODUCT_PROPERTY_TITLE,
                    alternativeNames: ["Product Name", "Product Title", "Name"]
                }), e.push({
                    name: "url",
                    label: M.IMPORT_PRODUCT_PROPERTY_URL,
                    alternativeNames: ["Handle", "Product URL", "Product Handle", "Link"]
                }), e.push({
                    name: "description",
                    label: M.IMPORT_PRODUCT_PROPERTY_DESCRIPTION,
                    alternativeNames: ["Content", "Body (HTML)", "Body", "Product Description", "Product Content"]
                }), e.push({
                    name: "images",
                    label: M.IMPORT_PRODUCT_PROPERTY_IMAGES,
                    alternativeNames: ["Product Images", "Product Image", "Image", "Image src"]
                }), e.push({
                    name: "category_name",
                    label: M.IMPORT_PRODUCT_PROPERTY_CATEGORY_NAME,
                    alternativeNames: ["Category", "Categories", "Product Category", "Product Categories", "Collection", "Collections"]
                }), e.push({
                    name: "options_name_1",
                    label: M.IMPORT_PRODUCT_PROPERTY_OPTIONS_NAME_1,
                    alternativeNames: ["Option1 Name"]
                }), e.push({
                    name: "options_name_2",
                    label: M.IMPORT_PRODUCT_PROPERTY_OPTIONS_NAME_2,
                    alternativeNames: ["Option2 Name"]
                }), e.push({
                    name: "options_name_3",
                    label: M.IMPORT_PRODUCT_PROPERTY_OPTIONS_NAME_3,
                    alternativeNames: ["Option3 Name"]
                }), e.push({
                    name: "options_name_4",
                    label: M.IMPORT_PRODUCT_PROPERTY_OPTIONS_NAME_4,
                    alternativeNames: ["Option4 Name"]
                }), e.push({
                    name: "options_values_1",
                    label: M.IMPORT_PRODUCT_PROPERTY_OPTIONS_VALUE_1,
                    alternativeNames: ["Option1 Value"]
                }), e.push({
                    name: "options_values_2",
                    label: M.IMPORT_PRODUCT_PROPERTY_OPTIONS_VALUE_2,
                    alternativeNames: ["Option2 Value"]
                }), e.push({
                    name: "options_values_3",
                    label: M.IMPORT_PRODUCT_PROPERTY_OPTIONS_VALUE_3,
                    alternativeNames: ["Option3 Value"]
                }), e.push({
                    name: "options_values_4",
                    label: M.IMPORT_PRODUCT_PROPERTY_OPTIONS_VALUE_4,
                    alternativeNames: ["Option4 Value"]
                }), e.push({
                    name: "variants_sku",
                    label: M.IMPORT_PRODUCT_PROPERTY_VARIANTS_SKU,
                    alternativeNames: ["SKU", "Stock Keeping Unit", "Variant SKU"]
                }), e.push({
                    name: "variants_quantity",
                    label: M.IMPORT_PRODUCT_PROPERTY_VARIANTS_QUANTITY,
                    alternativeNames: ["Quantity", "Qty", "Variant Quantity", "Product Quantity", "Variant Inventory Qty", "Inventory"]
                }), e.push({
                    name: "variants_weight",
                    label: M.IMPORT_PRODUCT_PROPERTY_VARIANTS_WEIGHT,
                    alternativeNames: ["Weight", "Variant Grams", "Variant Kilograms", "Variant Weight"]
                }), e.push({
                    name: "variants_price",
                    label: M.IMPORT_PRODUCT_PROPERTY_VARIANTS_PRICE,
                    alternativeNames: ["Variant Price", "Price", "Product Price", "Sale Price"]
                }), e.push({
                    name: "variants_regularPrice",
                    label: M.IMPORT_PRODUCT_PROPERTY_VARIANTS_REGULAR_PRICE,
                    alternativeNames: ["Variant Compare At Price", "Regular Price", "Product Regular Price"]
                }), e.push({
                    name: "variants_onSale",
                    label: M.IMPORT_PRODUCT_PROPERTY_VARIANTS_ON_SALE,
                    alternativeNames: ["On Sale", "Is On Sale", "Product On Sale"]
                }), e.push({
                    name: "product_type",
                    label: M.IMPORT_PRODUCT_PROPERTY_TYPE,
                    alternativeNames: ["Type"]
                }), e.push({
                    name: "variants_weight_uom",
                    label: M.IMPORT_PRODUCT_VARIANTS_WEIGHT_UOM,
                    alternativeNames: ["Unit", "Variant Weight Unit"]
                }), e.push({
                    name: "seoDescription",
                    label: M.IMPORT_PRODUCT_PROPERTY_SEO_DESCRIPTION
                }), e.push({
                    name: "file",
                    label: M.IMPORT_PRODUCT_VARIANT_PROPERTY_FILE,
                    alternativeNames: ["Digital File", "Digital File URL", "Product File", "Digital Download"]
                }), e.push({
                    name: "hidden",
                    label: M.IMPORT_PRODUCT_PROPERTY_HIDDEN,
                    alternativeNames: ["Disabled"]
                }), e
            },
            u = function (e, t) {
                var i = function (e) {
                    return e ? e.toLowerCase().trim().replace(/([^a-z0-9])/gi, "") : e
                };
                e = i(e);
                var n = "",
                    a = !1;
                return t.forEach((function (t) {
                    var s = !1;
                    if (e && !a) {
                        var o = i(t.name),
                            r = i(t.label);
                        !(s = e === o || e === r) && t.alternativeNames && t.alternativeNames.forEach((function (t) {
                            s || (s = i(t).indexOf(e) >= 0)
                        }))
                    }
                    a = a || s, n += '<option value="' + t.name + '"' + (s ? ' selected="selected"' : "") + ">" + t.label + "</option>"
                })), {
                    template: n,
                    autoSelected: a
                }
            },
            h = function (e) {
                return f(e, '"') || f(e, "'")
            },
            f = function (e, t) {
                var i = !1;
                if (e[0] !== t) return !1;
                if (e[e.length - 1] !== t) return !1;
                for (var n = 1; n < e.length - 1; n++)
                    if (e[n] === t) i = !i;
                    else if (i) return !1;
                return !i
            },
            m = function (e) {
                if (0 === e.length) return null;
                var t = /[,;|\t]/g,
                    i = [];
                if (e.forEach((function (e) {
                    i = i.concat((e || "").match(t))
                })), 0 === i.length) return null;
                for (var n = {}, a = i[0], s = 1, o = 0; o < i.length; o++) {
                    var r = i[o];
                    null == n[r] ? n[r] = 1 : n[r]++, n[r] > s && (a = r, s = n[r])
                }
                return a
            };
        return {
            start: function () {
                Tools.showWindow({
                    noTitle: !0,
                    isModal: !0,
                    width: 450,
                    markup: Templates.get("importProductsWelcome"),
                    action: {
                        onShow: function (e, t) {
                            t.find(".big-button.blue").click((function () {
                                var i = t.find('[name="csv"]');
                                i.on("change", (function (t) {
                                    if (0 !== i.length && 0 !== i[0].files.length && 0 !== i[0].files[0].size) {
                                        var a = i[0].files[0];
                                        (a.name || "").toLowerCase().endsWith(".csv") ? (n(a), e.close()) : Tools.showError("Please select a CSV file")
                                    } else Tools.showError(M.EMPTY_CSV)
                                })), i.trigger("click")
                            }))
                        }
                    }
                })
            }
        }
    };
! function (e) {
    "object" == typeof module && module.exports ? module.exports = e() : window.intlTelInput = e()
}((() => (() => {
    var e = Object.defineProperty,
        t = Object.getOwnPropertyDescriptor,
        i = Object.getOwnPropertyNames,
        n = Object.prototype.hasOwnProperty,
        a = {};
    ((t, i) => {
        for (var n in i) e(t, n, {
            get: i[n],
            enumerable: !0
        })
    })(a, {
        Iti: () => b,
        default: () => w
    });
    var s = [
        ["af", "93"],
        ["al", "355"],
        ["dz", "213"],
        ["as", "1", 5, ["684"]],
        ["ad", "376"],
        ["ao", "244"],
        ["ai", "1", 6, ["264"]],
        ["ag", "1", 7, ["268"]],
        ["ar", "54"],
        ["am", "374"],
        ["aw", "297"],
        ["ac", "247"],
        ["au", "61", 0],
        ["at", "43"],
        ["az", "994"],
        ["bs", "1", 8, ["242"]],
        ["bh", "973"],
        ["bd", "880"],
        ["bb", "1", 9, ["246"]],
        ["by", "375"],
        ["be", "32"],
        ["bz", "501"],
        ["bj", "229"],
        ["bm", "1", 10, ["441"]],
        ["bt", "975"],
        ["bo", "591"],
        ["ba", "387"],
        ["bw", "267"],
        ["br", "55"],
        ["io", "246"],
        ["vg", "1", 11, ["284"]],
        ["bn", "673"],
        ["bg", "359"],
        ["bf", "226"],
        ["bi", "257"],
        ["kh", "855"],
        ["cm", "237"],
        ["ca", "1", 1, ["204", "226", "236", "249", "250", "263", "289", "306", "343", "354", "365", "367", "368", "382", "387", "403", "416", "418", "428", "431", "437", "438", "450", "584", "468", "474", "506", "514", "519", "548", "579", "581", "584", "587", "604", "613", "639", "647", "672", "683", "705", "709", "742", "753", "778", "780", "782", "807", "819", "825", "867", "873", "879", "902", "905"]],
        ["cv", "238"],
        ["bq", "599", 1, ["3", "4", "7"]],
        ["ky", "1", 12, ["345"]],
        ["cf", "236"],
        ["td", "235"],
        ["cl", "56"],
        ["cn", "86"],
        ["cx", "61", 2, ["89164"]],
        ["cc", "61", 1, ["89162"]],
        ["co", "57"],
        ["km", "269"],
        ["cg", "242"],
        ["cd", "243"],
        ["ck", "682"],
        ["cr", "506"],
        ["ci", "225"],
        ["hr", "385"],
        ["cu", "53"],
        ["cw", "599", 0],
        ["cy", "357"],
        ["cz", "420"],
        ["dk", "45"],
        ["dj", "253"],
        ["dm", "1", 13, ["767"]],
        ["do", "1", 2, ["809", "829", "849"]],
        ["ec", "593"],
        ["eg", "20"],
        ["sv", "503"],
        ["gq", "240"],
        ["er", "291"],
        ["ee", "372"],
        ["sz", "268"],
        ["et", "251"],
        ["fk", "500"],
        ["fo", "298"],
        ["fj", "679"],
        ["fi", "358", 0],
        ["fr", "33"],
        ["gf", "594"],
        ["pf", "689"],
        ["ga", "241"],
        ["gm", "220"],
        ["ge", "995"],
        ["de", "49"],
        ["gh", "233"],
        ["gi", "350"],
        ["gr", "30"],
        ["gl", "299"],
        ["gd", "1", 14, ["473"]],
        ["gp", "590", 0],
        ["gu", "1", 15, ["671"]],
        ["gt", "502"],
        ["gg", "44", 1, ["1481", "7781", "7839", "7911"]],
        ["gn", "224"],
        ["gw", "245"],
        ["gy", "592"],
        ["ht", "509"],
        ["hn", "504"],
        ["hk", "852"],
        ["hu", "36"],
        ["is", "354"],
        ["in", "91"],
        ["id", "62"],
        ["ir", "98"],
        ["iq", "964"],
        ["ie", "353"],
        ["im", "44", 2, ["1624", "74576", "7524", "7924", "7624"]],
        ["il", "972"],
        ["it", "39", 0],
        ["jm", "1", 4, ["876", "658"]],
        ["jp", "81"],
        ["je", "44", 3, ["1534", "7509", "7700", "7797", "7829", "7937"]],
        ["jo", "962"],
        ["kz", "7", 1, ["33", "7"]],
        ["ke", "254"],
        ["ki", "686"],
        ["xk", "383"],
        ["kw", "965"],
        ["kg", "996"],
        ["la", "856"],
        ["lv", "371"],
        ["lb", "961"],
        ["ls", "266"],
        ["lr", "231"],
        ["ly", "218"],
        ["li", "423"],
        ["lt", "370"],
        ["lu", "352"],
        ["mo", "853"],
        ["mg", "261"],
        ["mw", "265"],
        ["my", "60"],
        ["mv", "960"],
        ["ml", "223"],
        ["mt", "356"],
        ["mh", "692"],
        ["mq", "596"],
        ["mr", "222"],
        ["mu", "230"],
        ["yt", "262", 1, ["269", "639"]],
        ["mx", "52"],
        ["fm", "691"],
        ["md", "373"],
        ["mc", "377"],
        ["mn", "976"],
        ["me", "382"],
        ["ms", "1", 16, ["664"]],
        ["ma", "212", 0],
        ["mz", "258"],
        ["mm", "95"],
        ["na", "264"],
        ["nr", "674"],
        ["np", "977"],
        ["nl", "31"],
        ["nc", "687"],
        ["nz", "64"],
        ["ni", "505"],
        ["ne", "227"],
        ["ng", "234"],
        ["nu", "683"],
        ["nf", "672"],
        ["kp", "850"],
        ["mk", "389"],
        ["mp", "1", 17, ["670"]],
        ["no", "47", 0],
        ["om", "968"],
        ["pk", "92"],
        ["pw", "680"],
        ["ps", "970"],
        ["pa", "507"],
        ["pg", "675"],
        ["py", "595"],
        ["pe", "51"],
        ["ph", "63"],
        ["pl", "48"],
        ["pt", "351"],
        ["pr", "1", 3, ["787", "939"]],
        ["qa", "974"],
        ["re", "262", 0],
        ["ro", "40"],
        ["ru", "7", 0],
        ["rw", "250"],
        ["ws", "685"],
        ["sm", "378"],
        ["st", "239"],
        ["sa", "966"],
        ["sn", "221"],
        ["rs", "381"],
        ["sc", "248"],
        ["sl", "232"],
        ["sg", "65"],
        ["sx", "1", 21, ["721"]],
        ["sk", "421"],
        ["si", "386"],
        ["sb", "677"],
        ["so", "252"],
        ["za", "27"],
        ["kr", "82"],
        ["ss", "211"],
        ["es", "34"],
        ["lk", "94"],
        ["bl", "590", 1],
        ["sh", "290"],
        ["kn", "1", 18, ["869"]],
        ["lc", "1", 19, ["758"]],
        ["mf", "590", 2],
        ["pm", "508"],
        ["vc", "1", 20, ["784"]],
        ["sd", "249"],
        ["sr", "597"],
        ["sj", "47", 1, ["79"]],
        ["se", "46"],
        ["ch", "41"],
        ["sy", "963"],
        ["tw", "886"],
        ["tj", "992"],
        ["tz", "255"],
        ["th", "66"],
        ["tl", "670"],
        ["tg", "228"],
        ["tk", "690"],
        ["to", "676"],
        ["tt", "1", 22, ["868"]],
        ["tn", "216"],
        ["tr", "90"],
        ["tm", "993"],
        ["tc", "1", 23, ["649"]],
        ["tv", "688"],
        ["ug", "256"],
        ["ua", "380"],
        ["ae", "971"],
        ["gb", "44", 0],
        ["us", "1", 0],
        ["uy", "598"],
        ["vi", "1", 24, ["340"]],
        ["uz", "998"],
        ["vu", "678"],
        ["va", "39", 1, ["06698"]],
        ["ve", "58"],
        ["vn", "84"],
        ["wf", "681"],
        ["eh", "212", 1, ["5288", "5289"]],
        ["ye", "967"],
        ["zm", "260"],
        ["zw", "263"],
        ["ax", "358", 1, ["18"]]
    ],
        o = [];
    for (let e = 0; e < s.length; e++) {
        let t = s[e];
        o[e] = {
            name: "",
            iso2: t[0],
            dialCode: t[1],
            priority: t[2] || 0,
            areaCodes: t[3] || null,
            nodeById: {}
        }
    }
    var r = o,
        l = {
            ad: "Andorra",
            ae: "United Arab Emirates",
            af: "Afghanistan",
            ag: "Antigua & Barbuda",
            ai: "Anguilla",
            al: "Albania",
            am: "Armenia",
            ao: "Angola",
            aq: "Antarctica",
            ar: "Argentina",
            as: "American Samoa",
            at: "Austria",
            au: "Australia",
            aw: "Aruba",
            ax: "Ã…land Islands",
            az: "Azerbaijan",
            ba: "Bosnia & Herzegovina",
            bb: "Barbados",
            bd: "Bangladesh",
            be: "Belgium",
            bf: "Burkina Faso",
            bg: "Bulgaria",
            bh: "Bahrain",
            bi: "Burundi",
            bj: "Benin",
            bl: "St. BarthÃ©lemy",
            bm: "Bermuda",
            bn: "Brunei",
            bo: "Bolivia",
            bq: "Caribbean Netherlands",
            br: "Brazil",
            bs: "Bahamas",
            bt: "Bhutan",
            bv: "Bouvet Island",
            bw: "Botswana",
            by: "Belarus",
            bz: "Belize",
            ca: "Canada",
            cc: "Cocos (Keeling) Islands",
            cd: "Congo - Kinshasa",
            cf: "Central African Republic",
            cg: "Congo - Brazzaville",
            ch: "Switzerland",
            ci: "CÃ´te dâ€™Ivoire",
            ck: "Cook Islands",
            cl: "Chile",
            cm: "Cameroon",
            cn: "China",
            co: "Colombia",
            cr: "Costa Rica",
            cu: "Cuba",
            cv: "Cape Verde",
            cw: "CuraÃ§ao",
            cx: "Christmas Island",
            cy: "Cyprus",
            cz: "Czechia",
            de: "Germany",
            dj: "Djibouti",
            dk: "Denmark",
            dm: "Dominica",
            do: "Dominican Republic",
            dz: "Algeria",
            ec: "Ecuador",
            ee: "Estonia",
            eg: "Egypt",
            eh: "Western Sahara",
            er: "Eritrea",
            es: "Spain",
            et: "Ethiopia",
            fi: "Finland",
            fj: "Fiji",
            fk: "Falkland Islands",
            fm: "Micronesia",
            fo: "Faroe Islands",
            fr: "France",
            ga: "Gabon",
            gb: "United Kingdom",
            gd: "Grenada",
            ge: "Georgia",
            gf: "French Guiana",
            gg: "Guernsey",
            gh: "Ghana",
            gi: "Gibraltar",
            gl: "Greenland",
            gm: "Gambia",
            gn: "Guinea",
            gp: "Guadeloupe",
            gq: "Equatorial Guinea",
            gr: "Greece",
            gs: "South Georgia & South Sandwich Islands",
            gt: "Guatemala",
            gu: "Guam",
            gw: "Guinea-Bissau",
            gy: "Guyana",
            hk: "Hong Kong SAR China",
            hm: "Heard & McDonald Islands",
            hn: "Honduras",
            hr: "Croatia",
            ht: "Haiti",
            hu: "Hungary",
            id: "Indonesia",
            ie: "Ireland",
            il: "Israel",
            im: "Isle of Man",
            in: "India",
            io: "British Indian Ocean Territory",
            iq: "Iraq",
            ir: "Iran",
            is: "Iceland",
            it: "Italy",
            je: "Jersey",
            jm: "Jamaica",
            jo: "Jordan",
            jp: "Japan",
            ke: "Kenya",
            kg: "Kyrgyzstan",
            kh: "Cambodia",
            ki: "Kiribati",
            km: "Comoros",
            kn: "St. Kitts & Nevis",
            kp: "North Korea",
            kr: "South Korea",
            kw: "Kuwait",
            ky: "Cayman Islands",
            kz: "Kazakhstan",
            la: "Laos",
            lb: "Lebanon",
            lc: "St. Lucia",
            li: "Liechtenstein",
            lk: "Sri Lanka",
            lr: "Liberia",
            ls: "Lesotho",
            lt: "Lithuania",
            lu: "Luxembourg",
            lv: "Latvia",
            ly: "Libya",
            ma: "Morocco",
            mc: "Monaco",
            md: "Moldova",
            me: "Montenegro",
            mf: "St. Martin",
            mg: "Madagascar",
            mh: "Marshall Islands",
            mk: "North Macedonia",
            ml: "Mali",
            mm: "Myanmar (Burma)",
            mn: "Mongolia",
            mo: "Macao SAR China",
            mp: "Northern Mariana Islands",
            mq: "Martinique",
            mr: "Mauritania",
            ms: "Montserrat",
            mt: "Malta",
            mu: "Mauritius",
            mv: "Maldives",
            mw: "Malawi",
            mx: "Mexico",
            my: "Malaysia",
            mz: "Mozambique",
            na: "Namibia",
            nc: "New Caledonia",
            ne: "Niger",
            nf: "Norfolk Island",
            ng: "Nigeria",
            ni: "Nicaragua",
            nl: "Netherlands",
            no: "Norway",
            np: "Nepal",
            nr: "Nauru",
            nu: "Niue",
            nz: "New Zealand",
            om: "Oman",
            pa: "Panama",
            pe: "Peru",
            pf: "French Polynesia",
            pg: "Papua New Guinea",
            ph: "Philippines",
            pk: "Pakistan",
            pl: "Poland",
            pm: "St. Pierre & Miquelon",
            pn: "Pitcairn Islands",
            pr: "Puerto Rico",
            ps: "Palestinian Territories",
            pt: "Portugal",
            pw: "Palau",
            py: "Paraguay",
            qa: "Qatar",
            re: "RÃ©union",
            ro: "Romania",
            rs: "Serbia",
            ru: "Russia",
            rw: "Rwanda",
            sa: "Saudi Arabia",
            sb: "Solomon Islands",
            sc: "Seychelles",
            sd: "Sudan",
            se: "Sweden",
            sg: "Singapore",
            sh: "St. Helena",
            si: "Slovenia",
            sj: "Svalbard & Jan Mayen",
            sk: "Slovakia",
            sl: "Sierra Leone",
            sm: "San Marino",
            sn: "Senegal",
            so: "Somalia",
            sr: "Suriname",
            ss: "South Sudan",
            st: "SÃ£o TomÃ© & PrÃ­ncipe",
            sv: "El Salvador",
            sx: "Sint Maarten",
            sy: "Syria",
            sz: "Eswatini",
            tc: "Turks & Caicos Islands",
            td: "Chad",
            tf: "French Southern Territories",
            tg: "Togo",
            th: "Thailand",
            tj: "Tajikistan",
            tk: "Tokelau",
            tl: "Timor-Leste",
            tm: "Turkmenistan",
            tn: "Tunisia",
            to: "Tonga",
            tr: "Turkey",
            tt: "Trinidad & Tobago",
            tv: "Tuvalu",
            tw: "Taiwan",
            tz: "Tanzania",
            ua: "Ukraine",
            ug: "Uganda",
            um: "U.S. Outlying Islands",
            us: "United States",
            uy: "Uruguay",
            uz: "Uzbekistan",
            va: "Vatican City",
            vc: "St. Vincent & Grenadines",
            ve: "Venezuela",
            vg: "British Virgin Islands",
            vi: "U.S. Virgin Islands",
            vn: "Vietnam",
            vu: "Vanuatu",
            wf: "Wallis & Futuna",
            ws: "Samoa",
            ye: "Yemen",
            yt: "Mayotte",
            za: "South Africa",
            zm: "Zambia",
            zw: "Zimbabwe",
            selectedCountryAriaLabel: "Selected country",
            noCountrySelected: "No country selected",
            countryListAriaLabel: "List of countries",
            searchPlaceholder: "Search",
            zeroSearchResults: "No results found",
            oneSearchResult: "1 result found",
            multipleSearchResults: "${count} results found",
            ac: "Ascension Island",
            xk: "Kosovo"
        };
    for (let e = 0; e < r.length; e++) r[e].name = l[r[e].iso2];
    var c, d = 0,
        p = {
            allowDropdown: !0,
            autoPlaceholder: "polite",
            containerClass: "",
            countryOrder: null,
            countrySearch: !0,
            customPlaceholder: null,
            dropdownContainer: null,
            excludeCountries: [],
            fixDropdownWidth: !0,
            formatAsYouType: !0,
            formatOnDisplay: !0,
            geoIpLookup: null,
            hiddenInput: null,
            i18n: {},
            initialCountry: "",
            nationalMode: !0,
            onlyCountries: [],
            placeholderNumberType: "MOBILE",
            showFlags: !0,
            separateDialCode: !1,
            strictMode: !1,
            useFullscreenPopup: typeof navigator < "u" && typeof window < "u" && (/Android.+Mobile|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || window.innerWidth <= 500),
            utilsScript: "",
            validationNumberType: "MOBILE"
        },
        u = ["800", "822", "833", "844", "855", "866", "877", "880", "881", "882", "883", "884", "885", "886", "887", "888", "889"],
        h = e => e.replace(/\D/g, ""),
        f = (e = "") => e.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase(),
        m = e => {
            let t = h(e);
            if ("1" === t.charAt(0)) {
                let e = t.substr(1, 3);
                return -1 !== u.indexOf(e)
            }
            return !1
        },
        g = (e, t, i) => {
            let n = document.createElement(e);
            return t && Object.entries(t).forEach((([e, t]) => n.setAttribute(e, t))), i && i.appendChild(n), n
        },
        v = e => {
            let {
                instances: t
            } = y;
            Object.values(t).forEach((t => t[e]()))
        },
        b = class {
            constructor(e, t = {}) {
                this.id = d++, this.a = e, this.c = null, this.d = Object.assign({}, p, t), this.e = !!e.getAttribute("placeholder")
            }
            _init() {
                this.d.useFullscreenPopup && (this.d.fixDropdownWidth = !1), this.d.separateDialCode && (this.d.allowDropdown = !0, this.d.nationalMode = !1, this.d.countrySearch = !0), !this.d.showFlags && !this.d.separateDialCode && (this.d.nationalMode = !1), this.d.useFullscreenPopup && !this.d.dropdownContainer && (this.d.dropdownContainer = document.body), this.isAndroid = typeof navigator < "u" && /Android/i.test(navigator.userAgent), this.isRTL = !!this.a.closest("[dir=rtl]"), this.d.separateDialCode && (this.isRTL ? this.originalPaddingRight = this.a.style.paddingRight : this.originalPaddingLeft = this.a.style.paddingLeft), this.d.i18n = {
                    ...l,
                    ...this.d.i18n
                };
                let e = new Promise(((e, t) => {
                    this.h = e, this.i = t
                })),
                    t = new Promise(((e, t) => {
                        this.i0 = e, this.i1 = t
                    }));
                this.promise = Promise.all([e, t]), this.s = {}, this._b(), this._f(), this._h(), this._i(), this._i3()
            }
            _b() {
                this._d(), this._d2(), this._d0(), this._sortCountries()
            }
            _sortCountries() {
                this.d.countryOrder && (this.d.countryOrder = this.d.countryOrder.map((e => e.toLowerCase()))), this.p.sort(((e, t) => {
                    let {
                        countryOrder: i
                    } = this.d;
                    if (i) {
                        let n = i.indexOf(e.iso2),
                            a = i.indexOf(t.iso2),
                            s = n > -1,
                            o = a > -1;
                        if (s || o) return s && o ? n - a : s ? -1 : 1
                    }
                    return e.name.localeCompare(t.name)
                }))
            }
            _c(e, t, i) {
                t.length > this.dialCodeMaxLen && (this.dialCodeMaxLen = t.length), this.q.hasOwnProperty(t) || (this.q[t] = []);
                for (let i = 0; i < this.q[t].length; i++)
                    if (this.q[t][i] === e) return;
                let n = void 0 !== i ? i : this.q[t].length;
                this.q[t][n] = e
            }
            _d() {
                let {
                    onlyCountries: e,
                    excludeCountries: t
                } = this.d;
                if (e.length) {
                    let t = e.map((e => e.toLowerCase()));
                    this.p = r.filter((e => t.indexOf(e.iso2) > -1))
                } else if (t.length) {
                    let e = t.map((e => e.toLowerCase()));
                    this.p = r.filter((t => -1 === e.indexOf(t.iso2)))
                } else this.p = r
            }
            _d0() {
                for (let e = 0; e < this.p.length; e++) {
                    let t = this.p[e].iso2.toLowerCase();
                    this.d.i18n.hasOwnProperty(t) && (this.p[e].name = this.d.i18n[t])
                }
            }
            _d2() {
                this.dialCodes = {}, this.dialCodeMaxLen = 0, this.q = {};
                for (let e = 0; e < this.p.length; e++) {
                    let t = this.p[e];
                    this.dialCodes[t.dialCode] || (this.dialCodes[t.dialCode] = !0), this._c(t.iso2, t.dialCode, t.priority)
                }
                for (let e = 0; e < this.p.length; e++) {
                    let t = this.p[e];
                    if (t.areaCodes) {
                        let e = this.q[t.dialCode][0];
                        for (let i = 0; i < t.areaCodes.length; i++) {
                            let n = t.areaCodes[i];
                            for (let i = 1; i < n.length; i++) {
                                let a = t.dialCode + n.substr(0, i);
                                this._c(e, a), this._c(t.iso2, a)
                            }
                            this._c(t.iso2, t.dialCode + n)
                        }
                    }
                }
            }
            _f() {
                this.a.classList.add("iti__tel-input"), !this.a.hasAttribute("autocomplete") && (!this.a.form || !this.a.form.hasAttribute("autocomplete")) && this.a.setAttribute("autocomplete", "off");
                let {
                    allowDropdown: e,
                    separateDialCode: t,
                    showFlags: i,
                    containerClass: n,
                    hiddenInput: a,
                    dropdownContainer: s,
                    fixDropdownWidth: o,
                    useFullscreenPopup: r,
                    countrySearch: l,
                    i18n: c
                } = this.d, d = "iti";
                e && (d += " iti--allow-dropdown"), i && (d += " iti--show-flags"), n && (d += ` ${n}`), r || (d += " iti--inline-dropdown");
                let p = g("div", {
                    class: d
                });
                if (this.a.parentNode?.insertBefore(p, this.a), e || i) {
                    this.k = g("div", {
                        class: "iti__country-container"
                    }, p), e ? (this.selectedCountry = g("button", {
                        type: "button",
                        class: "iti__selected-country",
                        "aria-expanded": "false",
                        "aria-label": this.d.i18n.selectedCountryAriaLabel,
                        "aria-haspopup": "true",
                        "aria-controls": `iti-${this.id}__dropdown-content`,
                        role: "combobox"
                    }, this.k), this.a.disabled && this.selectedCountry.setAttribute("disabled", "true")) : this.selectedCountry = g("div", {
                        class: "iti__selected-country"
                    }, this.k);
                    let i = g("div", {
                        class: "iti__selected-country-primary"
                    }, this.selectedCountry);
                    if (this.l = g("div", null, i), this.selectedCountryA11yText = g("span", {
                        class: "iti__a11y-text"
                    }, this.l), e && (this.u = g("div", {
                        class: "iti__arrow",
                        "aria-hidden": "true"
                    }, i)), t && (this.t = g("div", {
                        class: "iti__selected-dial-code"
                    }, this.selectedCountry)), e) {
                        let e = o ? "" : "iti--flexible-dropdown-width";
                        if (this.dropdownContent = g("div", {
                            id: `iti-${this.id}__dropdown-content`,
                            class: `iti__dropdown-content iti__hide ${e}`
                        }), l && (this.searchInput = g("input", {
                            type: "text",
                            class: "iti__search-input",
                            placeholder: c.searchPlaceholder,
                            role: "combobox",
                            "aria-expanded": "true",
                            "aria-label": c.searchPlaceholder,
                            "aria-controls": `iti-${this.id}__country-listbox`,
                            "aria-autocomplete": "list",
                            autocomplete: "off"
                        }, this.dropdownContent), this.searchResultsA11yText = g("span", {
                            class: "iti__a11y-text"
                        }, this.dropdownContent)), this.countryList = g("ul", {
                            class: "iti__country-list",
                            id: `iti-${this.id}__country-listbox`,
                            role: "listbox",
                            "aria-label": c.countryListAriaLabel
                        }, this.dropdownContent), this._g(), l && this._p4(), s) {
                            let e = "iti iti--container";
                            e += r ? " iti--fullscreen-popup" : " iti--inline-dropdown", this.dropdown = g("div", {
                                class: e
                            }), this.dropdown.appendChild(this.dropdownContent)
                        } else this.k.appendChild(this.dropdownContent)
                    }
                }
                if (p.appendChild(this.a), a) {
                    let e = a(this.a.getAttribute("name") || "");
                    e.phone && (this.hiddenInput = g("input", {
                        type: "hidden",
                        name: e.phone
                    }), p.appendChild(this.hiddenInput)), e.country && (this.hiddenInputCountry = g("input", {
                        type: "hidden",
                        name: e.country
                    }), p.appendChild(this.hiddenInputCountry))
                }
            }
            _g() {
                for (let e = 0; e < this.p.length; e++) {
                    let t = this.p[e],
                        i = 0 === e ? "iti__highlight" : "",
                        n = g("li", {
                            id: `iti-${this.id}__item-${t.iso2}`,
                            class: `iti__country ${i}`,
                            tabindex: "-1",
                            role: "option",
                            "data-dial-code": t.dialCode,
                            "data-country-code": t.iso2,
                            "aria-selected": "false"
                        }, this.countryList);
                    t.nodeById[this.id] = n;
                    let a = "";
                    this.d.showFlags && (a += `<div class='iti__flag-box'><div class='iti__flag iti__${t.iso2}'></div></div>`), a += `<span class='iti__country-name'>${t.name}</span>`, a += `<span class='iti__dial-code'>+${t.dialCode}</span>`, n.insertAdjacentHTML("beforeend", a)
                }
            }
            _h(e = !1) {
                let t = this.a.getAttribute("value"),
                    i = this.a.value,
                    n = !t || "+" !== t.charAt(0) || i && "+" === i.charAt(0) ? i : t,
                    a = this._5(n),
                    s = m(n),
                    {
                        initialCountry: o,
                        geoIpLookup: r
                    } = this.d,
                    l = "auto" === o && r;
                if (a && !s) this._v(n);
                else if (!l || e) {
                    let e = o ? o.toLowerCase() : "";
                    e && this._y(e, !0) ? this._z(e) : a && s ? this._z("us") : this._z()
                }
                n && this._u(n)
            }
            _i() {
                this._j(), this.d.allowDropdown && this._i2(), (this.hiddenInput || this.hiddenInputCountry) && this.a.form && this._i0()
            }
            _i0() {
                this._a14 = () => {
                    this.hiddenInput && (this.hiddenInput.value = this.getNumber()), this.hiddenInputCountry && (this.hiddenInputCountry.value = this.getSelectedCountryData().iso2 || "")
                }, this.a.form?.addEventListener("submit", this._a14)
            }
            _i2() {
                this._a9 = e => {
                    this.dropdownContent.classList.contains("iti__hide") ? this.a.focus() : e.preventDefault()
                };
                let e = this.a.closest("label");
                e && e.addEventListener("click", this._a9), this._a10 = () => {
                    this.dropdownContent.classList.contains("iti__hide") && !this.a.disabled && !this.a.readOnly && this._n()
                }, this.selectedCountry.addEventListener("click", this._a10), this._a11 = e => {
                    this.dropdownContent.classList.contains("iti__hide") && ["ArrowUp", "ArrowDown", " ", "Enter"].includes(e.key) && (e.preventDefault(), e.stopPropagation(), this._n()), "Tab" === e.key && this._2()
                }, this.k.addEventListener("keydown", this._a11)
            }
            _i3() {
                let {
                    utilsScript: e,
                    initialCountry: t,
                    geoIpLookup: i
                } = this.d;
                e && !y.utils ? y.documentReady() ? y.loadUtils(e) : window.addEventListener("load", (() => {
                    y.loadUtils(e)
                })) : this.i0(), "auto" === t && i && !this.s.iso2 ? this._i4() : this.h()
            }
            _i4() {
                y.autoCountry ? this.handleAutoCountry() : y.startedLoadingAutoCountry || (y.startedLoadingAutoCountry = !0, "function" == typeof this.d.geoIpLookup && this.d.geoIpLookup(((e = "") => {
                    let t = e.toLowerCase();
                    t && this._y(t, !0) ? (y.autoCountry = t, setTimeout((() => v("handleAutoCountry")))) : (this._h(!0), v("rejectAutoCountryPromise"))
                }), (() => {
                    this._h(!0), v("rejectAutoCountryPromise")
                })))
            }
            _j() {
                let {
                    strictMode: e,
                    formatAsYouType: t,
                    separateDialCode: i,
                    formatOnDisplay: n
                } = this.d, a = !1, s = () => {
                    this._n(), this.searchInput.value = "+", this._p3("", !0)
                };
                this._a12 = o => {
                    if (this.isAndroid && "+" === o?.data && i) {
                        let e = this.a.selectionStart || 0,
                            t = this.a.value.substring(0, e - 1),
                            i = this.a.value.substring(e);
                        return this.a.value = t + i, void s()
                    }
                    this._v(this.a.value) && this._8();
                    let r = o?.data && /[^+0-9]/.test(o.data),
                        l = "insertFromPaste" === o?.inputType && this.a.value;
                    r || l && !e ? a = !0 : /[^+0-9]/.test(this.a.value) || (a = !1);
                    let c = o?.detail && o.detail.isSetNumber && !n;
                    if (t && !a && !c) {
                        let e = this.a.selectionStart || 0,
                            t = this.a.value.substring(0, e).replace(/[^+0-9]/g, "").length,
                            i = "deleteContentForward" === o?.inputType,
                            n = this._9(),
                            a = ((e, t, i, n) => {
                                if (0 === i && !n) return 0;
                                let a = 0;
                                for (let i = 0; i < t.length; i++) {
                                    if (/[+0-9]/.test(t[i]) && a++, a === e && !n) return i + 1;
                                    if (n && a === e + 1) return i
                                }
                                return t.length
                            })(t, n, e, i);
                        this.a.value = n, this.a.setSelectionRange(a, a)
                    }
                }, this.a.addEventListener("input", this._a12), (e || i) && (this._handleKeydownEvent = t => {
                    if (t.key && 1 === t.key.length && !t.altKey && !t.ctrlKey && !t.metaKey) {
                        if (i && "+" === t.key) return t.preventDefault(), void s();
                        if (e) {
                            let e = 0 === this.a.selectionStart && "+" === t.key,
                                i = /^[0-9]$/.test(t.key),
                                n = e || i,
                                a = this._6(),
                                s = y.utils.getCoreNumber(a, this.s.iso2),
                                o = this.maxCoreNumberLength && s.length >= this.maxCoreNumberLength,
                                r = this.a.value.substring(this.a.selectionStart, this.a.selectionEnd),
                                l = /\d/.test(r);
                            (!n || o && !l) && t.preventDefault()
                        }
                    }
                }, this.a.addEventListener("keydown", this._handleKeydownEvent))
            }
            _j2(e) {
                let t = parseInt(this.a.getAttribute("maxlength") || "", 10);
                return t && e.length > t ? e.substr(0, t) : e
            }
            _trigger(e, t = {}) {
                let i = new CustomEvent(e, {
                    bubbles: !0,
                    cancelable: !0,
                    detail: t
                });
                this.a.dispatchEvent(i)
            }
            _n() {
                let {
                    fixDropdownWidth: e,
                    countrySearch: t
                } = this.d;
                if (e && (this.dropdownContent.style.width = `${this.a.offsetWidth}px`), this.dropdownContent.classList.remove("iti__hide"), this.selectedCountry.setAttribute("aria-expanded", "true"), this._o(), t) {
                    let e = this.countryList.firstElementChild;
                    e && (this._x(e, !1), this.countryList.scrollTop = 0), this.searchInput.focus()
                }
                this._p(), this.u.classList.add("iti__arrow--up"), this._trigger("open:countrydropdown")
            }
            _o() {
                if (this.d.dropdownContainer && this.d.dropdownContainer.appendChild(this.dropdown), !this.d.useFullscreenPopup) {
                    let e = this.a.getBoundingClientRect(),
                        t = this.a.offsetHeight;
                    this.d.dropdownContainer && (this.dropdown.style.top = `${e.top + t}px`, this.dropdown.style.left = `${e.left}px`, this._a4 = () => this._2(), window.addEventListener("scroll", this._a4))
                }
            }
            _p() {
                this._a0 = e => {
                    let t = e.target?.closest(".iti__country");
                    t && this._x(t, !1)
                }, this.countryList.addEventListener("mouseover", this._a0), this._a1 = e => {
                    let t = e.target?.closest(".iti__country");
                    t && this._1(t)
                }, this.countryList.addEventListener("click", this._a1);
                let e = !0;
                this._a2 = () => {
                    e || this._2(), e = !1
                }, document.documentElement.addEventListener("click", this._a2);
                let t = "",
                    i = null;
                if (this._a3 = e => {
                    ["ArrowUp", "ArrowDown", "Enter", "Escape"].includes(e.key) && (e.preventDefault(), e.stopPropagation(), "ArrowUp" === e.key || "ArrowDown" === e.key ? this._q(e.key) : "Enter" === e.key ? this._r() : "Escape" === e.key && this._2()), !this.d.countrySearch && /^[a-zA-ZÃ€-Ã¿Ð°-ÑÐ-Ð¯ ]$/.test(e.key) && (e.stopPropagation(), i && clearTimeout(i), t += e.key.toLowerCase(), this._searchForCountry(t), i = setTimeout((() => {
                        t = ""
                    }), 1e3))
                }, document.addEventListener("keydown", this._a3), this.d.countrySearch) {
                    let e = () => {
                        let e = this.searchInput.value.trim();
                        e ? this._p3(e) : this._p3("", !0)
                    },
                        t = null;
                    this._a7 = () => {
                        t && clearTimeout(t), t = setTimeout((() => {
                            e(), t = null
                        }), 100)
                    }, this.searchInput.addEventListener("input", this._a7), this.searchInput.addEventListener("click", (e => e.stopPropagation()))
                }
            }
            _searchForCountry(e) {
                for (let t = 0; t < this.p.length; t++) {
                    let i = this.p[t];
                    if (i.name.substr(0, e.length).toLowerCase() === e) {
                        let e = i.nodeById[this.id];
                        this._x(e, !1), this._3(e);
                        break
                    }
                }
            }
            _p3(e, t = !1) {
                let i = !0;
                this.countryList.innerHTML = "";
                let n = f(e);
                for (let e = 0; e < this.p.length; e++) {
                    let a = this.p[e],
                        s = f(a.name),
                        o = `+${a.dialCode}`;
                    if (t || s.includes(n) || o.includes(n) || a.iso2.includes(n)) {
                        let e = a.nodeById[this.id];
                        e && this.countryList.appendChild(e), i && (this._x(e, !1), i = !1)
                    }
                }
                i && this._x(null, !1), this.countryList.scrollTop = 0, this._p4()
            }
            _p4() {
                let e, {
                    i18n: t
                } = this.d,
                    i = this.countryList.childElementCount;
                e = 0 === i ? t.zeroSearchResults : 1 === i ? t.oneSearchResult : t.multipleSearchResults.replace("${count}", i.toString()), this.searchResultsA11yText.textContent = e
            }
            _q(e) {
                let t = "ArrowUp" === e ? this.c?.previousElementSibling : this.c?.nextElementSibling;
                !t && this.countryList.childElementCount > 1 && (t = "ArrowUp" === e ? this.countryList.lastElementChild : this.countryList.firstElementChild), t && (this._3(t), this._x(t, !1))
            }
            _r() {
                this.c && this._1(this.c)
            }
            _u(e) {
                let t = e;
                if (this.d.formatOnDisplay && y.utils && this.s) {
                    let e = this.d.nationalMode || "+" !== t.charAt(0) && !this.d.separateDialCode,
                        {
                            NATIONAL: i,
                            INTERNATIONAL: n
                        } = y.utils.numberFormat,
                        a = e ? i : n;
                    t = y.utils.formatNumber(t, this.s.iso2, a)
                }
                t = this._7(t), this.a.value = t
            }
            _v(e) {
                let t = e.indexOf("+"),
                    i = t ? e.substring(t) : e,
                    n = this.s.dialCode;
                i && "1" === n && "+" !== i.charAt(0) && ("1" !== i.charAt(0) && (i = `1${i}`), i = `+${i}`), this.d.separateDialCode && n && "+" !== i.charAt(0) && (i = `+${n}${i}`);
                let a = this._5(i, !0),
                    s = h(i),
                    o = null;
                if (a) {
                    let e = this.q[h(a)],
                        t = -1 !== e.indexOf(this.s.iso2) && s.length <= a.length - 1;
                    if (!("1" === n && m(s) || t))
                        for (let t = 0; t < e.length; t++)
                            if (e[t]) {
                                o = e[t];
                                break
                            }
                } else "+" === i.charAt(0) && s.length ? o = "" : (!i || "+" === i) && !this.s.iso2 && (o = this.j);
                return null !== o && this._z(o)
            }
            _x(e, t) {
                let i = this.c;
                if (i && (i.classList.remove("iti__highlight"), i.setAttribute("aria-selected", "false")), this.c = e, this.c) {
                    this.c.classList.add("iti__highlight"), this.c.setAttribute("aria-selected", "true");
                    let e = this.c.getAttribute("id") || "";
                    this.selectedCountry.setAttribute("aria-activedescendant", e), this.d.countrySearch && this.searchInput.setAttribute("aria-activedescendant", e)
                }
                t && this.c.focus()
            }
            _y(e, t) {
                for (let t = 0; t < this.p.length; t++)
                    if (this.p[t].iso2 === e) return this.p[t];
                if (t) return null;
                throw new Error(`No country data for '${e}'`)
            }
            _z(e) {
                let {
                    separateDialCode: t,
                    showFlags: i,
                    i18n: n
                } = this.d, a = this.s.iso2 ? this.s : {};
                if (this.s = e && this._y(e, !1) || {}, this.s.iso2 && (this.j = this.s.iso2), this.l) {
                    let t = "",
                        a = "";
                    e && i ? (t = `iti__flag iti__${e}`, a = `${this.s.name} +${this.s.dialCode}`) : (t = "iti__flag iti__globe", a = n.noCountrySelected), this.l.className = t, this.selectedCountryA11yText.textContent = a
                }
                if (this._z3(e, t), t) {
                    let e = this.s.dialCode ? `+${this.s.dialCode}` : "";
                    this.t.innerHTML = e;
                    let t = (this.selectedCountry.offsetWidth || this._z2()) + 8;
                    this.isRTL ? this.a.style.paddingRight = `${t}px` : this.a.style.paddingLeft = `${t}px`
                }
                return this._0(), this._updateMaxLength(), a.iso2 !== e
            }
            _updateMaxLength() {
                let {
                    strictMode: e,
                    placeholderNumberType: t,
                    validationNumberType: i
                } = this.d;
                if (e && y.utils)
                    if (this.s.iso2) {
                        let e = y.utils.numberType[t],
                            n = y.utils.getExampleNumber(this.s.iso2, !1, e, !0),
                            a = n;
                        for (; y.utils.isPossibleNumber(n, this.s.iso2, i);) a = n, n += "0";
                        let s = y.utils.getCoreNumber(a, this.s.iso2);
                        this.maxCoreNumberLength = s.length
                    } else this.maxCoreNumberLength = null
            }
            _z3(e = null, t) {
                if (!this.selectedCountry) return;
                let i;
                i = e && !t ? `${this.s.name}: +${this.s.dialCode}` : e ? this.s.name : "Unknown", this.selectedCountry.setAttribute("title", i)
            }
            _z2() {
                if (this.a.parentNode) {
                    let e = this.a.parentNode.cloneNode(!1);
                    e.style.visibility = "hidden", document.body.appendChild(e);
                    let t = this.k.cloneNode();
                    e.appendChild(t);
                    let i = this.selectedCountry.cloneNode(!0);
                    t.appendChild(i);
                    let n = i.offsetWidth;
                    return document.body.removeChild(e), n
                }
                return 0
            }
            _0() {
                let {
                    autoPlaceholder: e,
                    placeholderNumberType: t,
                    nationalMode: i,
                    customPlaceholder: n
                } = this.d, a = "aggressive" === e || !this.e && "polite" === e;
                if (y.utils && a) {
                    let e = y.utils.numberType[t],
                        a = this.s.iso2 ? y.utils.getExampleNumber(this.s.iso2, i, e) : "";
                    a = this._7(a), "function" == typeof n && (a = n(a, this.s)), this.a.setAttribute("placeholder", a)
                }
            }
            _1(e) {
                let t = this._z(e.getAttribute("data-country-code"));
                this._2(), this._4(e.getAttribute("data-dial-code")), this.a.focus(), t && this._8()
            }
            _2() {
                this.dropdownContent.classList.add("iti__hide"), this.selectedCountry.setAttribute("aria-expanded", "false"), this.selectedCountry.removeAttribute("aria-activedescendant"), this.c && this.c.setAttribute("aria-selected", "false"), this.d.countrySearch && this.searchInput.removeAttribute("aria-activedescendant"), this.u.classList.remove("iti__arrow--up"), document.removeEventListener("keydown", this._a3), this.d.countrySearch && this.searchInput.removeEventListener("input", this._a7), document.documentElement.removeEventListener("click", this._a2), this.countryList.removeEventListener("mouseover", this._a0), this.countryList.removeEventListener("click", this._a1), this.d.dropdownContainer && (this.d.useFullscreenPopup || window.removeEventListener("scroll", this._a4), this.dropdown.parentNode && this.dropdown.parentNode.removeChild(this.dropdown)), this._trigger("close:countrydropdown")
            }
            _3(e) {
                let t = this.countryList,
                    i = document.documentElement.scrollTop,
                    n = t.offsetHeight,
                    a = t.getBoundingClientRect().top + i,
                    s = a + n,
                    o = e.offsetHeight,
                    r = e.getBoundingClientRect().top + i,
                    l = r + o,
                    c = r - a + t.scrollTop;
                if (r < a) t.scrollTop = c;
                else if (l > s) {
                    let e = n - o;
                    t.scrollTop = c - e
                }
            }
            _4(e) {
                let t, i = this.a.value,
                    n = `+${e}`;
                if ("+" === i.charAt(0)) {
                    let e = this._5(i);
                    t = e ? i.replace(e, n) : n, this.a.value = t
                }
            }
            _5(e, t) {
                let i = "";
                if ("+" === e.charAt(0)) {
                    let n = "";
                    for (let a = 0; a < e.length; a++) {
                        let s = e.charAt(a);
                        if (!isNaN(parseInt(s, 10))) {
                            if (n += s, t) this.q[n] && (i = e.substr(0, a + 1));
                            else if (this.dialCodes[n]) {
                                i = e.substr(0, a + 1);
                                break
                            }
                            if (n.length === this.dialCodeMaxLen) break
                        }
                    }
                }
                return i
            }
            _6() {
                let e, t = this.a.value.trim(),
                    {
                        dialCode: i
                    } = this.s,
                    n = h(t);
                return e = this.d.separateDialCode && "+" !== t.charAt(0) && i && n ? `+${i}` : "", e + t
            }
            _7(e) {
                let t = e;
                if (this.d.separateDialCode) {
                    let e = this._5(t);
                    if (e) {
                        e = `+${this.s.dialCode}`;
                        let i = " " === t[e.length] || "-" === t[e.length] ? e.length + 1 : e.length;
                        t = t.substr(i)
                    }
                }
                return this._j2(t)
            }
            _8() {
                this._trigger("countrychange")
            }
            _9() {
                let e = this._6(),
                    t = y.utils ? y.utils.formatNumberAsYouType(e, this.s.iso2) : e,
                    {
                        dialCode: i
                    } = this.s;
                return this.d.separateDialCode && "+" !== this.a.value.charAt(0) && t.includes(`+${i}`) ? (t.split(`+${i}`)[1] || "").trim() : t
            }
            handleAutoCountry() {
                "auto" === this.d.initialCountry && y.autoCountry && (this.j = y.autoCountry, this.s.iso2 || this.l.classList.contains("iti__globe") || this.setCountry(this.j), this.h())
            }
            handleUtils() {
                y.utils && (this.a.value && this._u(this.a.value), this.s.iso2 && (this._0(), this._updateMaxLength())), this.i0()
            }
            destroy() {
                let {
                    allowDropdown: e,
                    separateDialCode: t
                } = this.d;
                if (e) {
                    this._2(), this.selectedCountry.removeEventListener("click", this._a10), this.k.removeEventListener("keydown", this._a11);
                    let e = this.a.closest("label");
                    e && e.removeEventListener("click", this._a9)
                }
                let {
                    form: i
                } = this.a;
                this._a14 && i && i.removeEventListener("submit", this._a14), this.a.removeEventListener("input", this._a12), this._handleKeydownEvent && this.a.removeEventListener("keydown", this._handleKeydownEvent), this.a.removeAttribute("data-intl-tel-input-id"), t && (this.isRTL ? this.a.style.paddingRight = this.originalPaddingRight : this.a.style.paddingLeft = this.originalPaddingLeft);
                let n = this.a.parentNode;
                n?.parentNode?.insertBefore(this.a, n), n?.parentNode?.removeChild(n), delete y.instances[this.id]
            }
            getExtension() {
                return y.utils ? y.utils.getExtension(this._6(), this.s.iso2) : ""
            }
            getNumber(e) {
                if (y.utils) {
                    let {
                        iso2: t
                    } = this.s;
                    return y.utils.formatNumber(this._6(), t, e)
                }
                return ""
            }
            getNumberType() {
                return y.utils ? y.utils.getNumberType(this._6(), this.s.iso2) : -99
            }
            getSelectedCountryData() {
                return this.s
            }
            getValidationError() {
                if (y.utils) {
                    let {
                        iso2: e
                    } = this.s;
                    return y.utils.getValidationError(this._6(), e)
                }
                return -99
            }
            isValidNumber() {
                let e = this._6();
                return !/\p{L}/u.test(e) && (y.utils ? y.utils.isPossibleNumber(e, this.s.iso2, this.d.validationNumberType) : null)
            }
            isValidNumberPrecise() {
                let e = this._6();
                return !/\p{L}/u.test(e) && (y.utils ? y.utils.isValidNumber(e, this.s.iso2) : null)
            }
            setCountry(e) {
                let t = e?.toLowerCase(),
                    i = this.s.iso2;
                (e && t !== i || !e && i) && (this._z(t), this._4(this.s.dialCode), this._8())
            }
            setNumber(e) {
                let t = this._v(e);
                this._u(e), t && this._8(), this._trigger("input", {
                    isSetNumber: !0
                })
            }
            setPlaceholderNumberType(e) {
                this.d.placeholderNumberType = e, this._0()
            }
            setDisabled(e) {
                this.a.disabled = e, e ? this.selectedCountry.setAttribute("disabled", "true") : this.selectedCountry.removeAttribute("disabled")
            }
        },
        y = Object.assign(((e, t) => {
            let i = new b(e, t);
            return i._init(), e.setAttribute("data-intl-tel-input-id", i.id.toString()), y.instances[i.id] = i, i
        }), {
            defaults: p,
            documentReady: () => "complete" === document.readyState,
            getCountryData: () => r,
            getInstance: e => {
                let t = e.getAttribute("data-intl-tel-input-id");
                return t ? y.instances[t] : null
            },
            instances: {},
            loadUtils: e => y.utils || y.startedLoadingUtilsScript ? null : (y.startedLoadingUtilsScript = !0, new Promise(((t, i) => {
                import(e).then((({
                    default: e
                }) => {
                    y.utils = e, v("handleUtils"), t(!0)
                })).catch((() => {
                    v("rejectUtilsScriptPromise"), i()
                }))
            }))),
            version: "23.8.0"
        }),
        w = y;
    return c = a, ((a, s, o, r) => {
        if (s && "object" == typeof s || "function" == typeof s)
            for (let l of i(s)) !n.call(a, l) && l !== o && e(a, l, {
                get: () => s[l],
                enumerable: !(r = t(s, l)) || r.enumerable
            });
        return a
    })(e({}, "__esModule", {
        value: !0
    }), c)
})().default)), window.PhoneInput = class e {
    _originalInput;
    _intlTelInput;
    _dummyInput;
    _svelteMode;
    _externalListener;
    _dummyListener;
    _validationListener;
    constructor(e, t, i) {
        if (!e) return;
        this._originalInput = "string" == typeof e ? document.querySelector(e) : e, this._svelteMode = !0 === i;
        const n = this._svelteMode ? this._originalInput : this._createDummyInput(),
            a = window.locale?.split("_")[0] || "en";
        this._loadCountries(a).then((e => {
            this._init(n, t, e)
        })).catch((e => {
            console.log("unable to load " + a + " language pack: " + e), this._loadCountries("en").then((e => {
                this._init(n, t, e)
            })).catch((e => {
                console.log("unable to load en language pack: " + e)
            }))
        }))
    }
    static wrap(t, i) {
        return new e(t, i)
    }
    _loadCountries(e) {
        return import(resources + "/scripts/external/intl-tel-input/i18n/" + e + "/countries.js?v=" + resourcesVersion)
    }
    _init(e, t, i) {
        this._intlTelInput = window.intlTelInput(e, {
            utilsScript: resources + "/scripts/external/intl-tel-input/utils.js?v=" + resourcesVersion,
            i18n: i.default,
            strictMode: !0,
            validationNumberType: null,
            initialCountry: "auto",
            geoIpLookup: (e, t) => {
                fetch("https://ipapi.co/json").then((e => e.json())).then((t => {
                    e(t.country_code)
                })).catch((() => {
                    t()
                }))
            }
        }), this._addValidationListener(e), t && this._addExternalListener(e, t)
    }
    _addValidationListener(e) {
        const t = this;
        this._validationListener = () => {
            !e.value.length || t.isValidNumber() ? e.classList.remove("phone-input-error") : e.classList.add("phone-input-error")
        }, this._addChangeListener(e, this._validationListener)
    }
    _addExternalListener(e, t) {
        this._externalListener = () => {
            t(this.value, this.isValidNumber())
        }, this._addChangeListener(e, this._externalListener)
    }
    updateOriginalInput() {
        this._intlTelInput && (this._originalInput.value = this._intlTelInput.getNumber())
    }
    _createDummyInput() {
        this._dummyInput = this._originalInput.cloneNode(!0), this._dummyInput.id = this._dummyInput.id + "_dummy", this._dummyInput.name = "", this._originalInput.parentNode.insertBefore(this._dummyInput, this._originalInput.nextSibling), this._originalInput.classList.add("phone-input-hidden");
        const e = this;
        return this._dummyListener = () => {
            e.updateOriginalInput()
        }, this._addChangeListener(this._dummyInput, this._dummyListener), this._dummyInput
    }
    _removeDummyInput() {
        this._removeChangeListener(this._dummyInput, this._dummyListener), this._removeChangeListener(this._dummyInput, this._validationListener), this._dummyInput.parentNode.removeChild(this._dummyInput), this._originalInput.classList.remove("phone-input-hidden"), this._dummyInput = this._dummyListener = this._validationListener = null
    }
    get value() {
        return this._intlTelInput.getNumber()
    }
    isValidNumber() {
        return this._intlTelInput.isValidNumber()
    }
    getValidationError() {
        return this._intlTelInput.getValidationError()
    }
    isEmpty() {
        return 0 === this.value.length
    }
    destroy() {
        this._svelteMode ? (this._removeChangeListener(this._originalInput, this._originalInput), this._removeChangeListener(this._originalInput, this._validationListener), this._validationListener = null) : this._removeDummyInput(), this._originalInput = null, this._intlTelInput.destroy()
    }
    _addChangeListener(e, t) {
        e.addEventListener("input", t), e.addEventListener("countrychange", t)
    }
    _removeChangeListener(e, t) {
        e.removeEventListener("input", t), e.removeEventListener("countrychange", t)
    }
};